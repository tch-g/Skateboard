"use strict";(self.webpackChunkskateboard=self.webpackChunkskateboard||[]).push([[179],{4322:(Mt,Ue,B)=>{B.d(Ue,{e:()=>ph});var b=B(5e3),L=B(3385),q=B(4473),Ee=B(4986),he=B(9751),De=B(8996),Ie=B(9646),Ce=B(5813),Se=B(8675),ae=B(4482),oe=B(5403);function pe(){return(0,ae.e)((i,e)=>{let t,o=!1;i.subscribe((0,oe.x)(e,u=>{const g=t;t=u,o&&e.next([g,u]),o=!0}))})}var at=B(4004),qe=B(5026),Qe=B(4671);function Ge(i,e){return i===e}var le,Ke=B(9300),_t=B(2011),xt=B(9808),Re=(B(4087),B(3942)),ue=B(5861),gt=B(9681),mt=B(4859),Pe=B(1877),fe=B(2090),ke="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Oe={},Je=Je||{},be=ke||self;function Vt(){}function pn(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ve(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var te="closure_uid_"+(1e9*Math.random()>>>0),$e=0;function ot(i,e,t){return i.call.apply(i.bind,arguments)}function Rt(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function lt(i,e,t){return(lt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ot:Rt).apply(null,arguments)}function In(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Ot(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,g){for(var v=Array(arguments.length-2),S=2;S<arguments.length;S++)v[S-2]=arguments[S];return e.prototype[u].apply(o,v)}}function qt(){this.s=this.s,this.o=this.o}var $n={};qt.prototype.s=!1,qt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function tt(i){return Object.prototype.hasOwnProperty.call(i,te)&&i[te]||(i[te]=++$e)}(this);delete $n[i]}},qt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ir=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},ir=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let g=0;g<o;g++)g in u&&e.call(t,u[g],g,i)};function Pr(i){return Array.prototype.concat.apply([],arguments)}function Hn(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function br(i){return/^[\s\xa0]*$/.test(i)}var xn,Lt=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function zn(i,e){return-1!=i.indexOf(e)}function Or(i,e){return i<e?-1:i>e?1:0}e:{var ii=be.navigator;if(ii){var fs=ii.userAgent;if(fs){xn=fs;break e}}xn=""}function or(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function $r(i){const e={};for(const t in i)e[t]=i[t];return e}var Ui="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function si(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let g=0;g<Ui.length;g++)t=Ui[g],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function Dt(i){return Dt[" "](i),i}Dt[" "]=Vt;var Ht,i,zt=zn(xn,"Opera"),dr=zn(xn,"Trident")||zn(xn,"MSIE"),Qr=zn(xn,"Edge"),Rn=Qr||dr,Ji=zn(xn,"Gecko")&&!(zn(xn.toLowerCase(),"webkit")&&!zn(xn,"Edge"))&&!(zn(xn,"Trident")||zn(xn,"MSIE"))&&!zn(xn,"Edge"),Jr=zn(xn.toLowerCase(),"webkit")&&!zn(xn,"Edge");function ar(){var i=be.document;return i?i.documentMode:void 0}e:{var Vr="",vn=(i=xn,Ji?/rv:([^\);]+)(\)|;)/.exec(i):Qr?/Edge\/([\d\.]+)/.exec(i):dr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Jr?/WebKit\/(\S+)/.exec(i):zt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(vn&&(Vr=vn?vn[1]:""),dr){var Nt=ar();if(null!=Nt&&Nt>parseFloat(Vr)){Ht=String(Nt);break e}}Ht=Vr}var Ze={};var _n=be.document&&dr&&(ar()||parseInt(Ht,10))||void 0,de=function(){if(!be.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{be.addEventListener("test",Vt,e),be.removeEventListener("test",Vt,e)}catch(t){}return i}();function ee(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function ve(i,e){if(ee.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Ji){e:{try{Dt(e.nodeName);var u=!0;break e}catch(g){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ze[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ve.Z.h.call(this)}}ee.prototype.h=function(){this.defaultPrevented=!0},Ot(ve,ee);var ze={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),yt=0;function Yt(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++yt,this.ca=this.fa=!1}function gn(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function Gt(i){this.src=i,this.g={},this.h=0}function cn(i,e){var t=e.type;if(t in i.g){var g,o=i.g[t],u=Ir(o,e);(g=0<=u)&&Array.prototype.splice.call(o,u,1),g&&(gn(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function hr(i,e,t,o){for(var u=0;u<i.length;++u){var g=i[u];if(!g.ca&&g.listener==e&&g.capture==!!t&&g.ia==o)return u}return-1}Gt.prototype.add=function(i,e,t,o,u){var g=i.toString();(i=this.g[g])||(i=this.g[g]=[],this.h++);var v=hr(i,e,o,u);return-1<v?(e=i[v],t||(e.fa=!1)):((e=new Yt(e,this.src,g,!!o,u)).fa=t,i.push(e)),e};var nn="closure_lm_"+(1e6*Math.random()|0),Pn={};function Nr(i,e,t,o,u){if(o&&o.once)return fi(i,e,t,o,u);if(Array.isArray(e)){for(var g=0;g<e.length;g++)Nr(i,e[g],t,o,u);return null}return t=Zn(t),i&&i[xe]?i.N(e,t,Ve(o)?!!o.capture:!!o,u):Xi(i,e,t,!1,o,u)}function Xi(i,e,t,o,u,g){if(!e)throw Error("Invalid event type");var v=Ve(u)?!!u.capture:!!u,S=ht(i);if(S||(i[nn]=S=new Gt(i)),(t=S.add(e,t,o,v,g)).proxy)return t;if(o=function Qo(){var e=Ri;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)de||(u=v),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Vi(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function fi(i,e,t,o,u){if(Array.isArray(e)){for(var g=0;g<e.length;g++)fi(i,e[g],t,o,u);return null}return t=Zn(t),i&&i[xe]?i.O(e,t,Ve(o)?!!o.capture:!!o,u):Xi(i,e,t,!0,o,u)}function Hr(i,e,t,o,u){if(Array.isArray(e))for(var g=0;g<e.length;g++)Hr(i,e[g],t,o,u);else o=Ve(o)?!!o.capture:!!o,t=Zn(t),i&&i[xe]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=hr(g=i.g[e],t,o,u))&&(gn(g[t]),Array.prototype.splice.call(g,t,1),0==g.length&&(delete i.g[e],i.h--))):i&&(i=ht(i))&&(e=i.g[e.toString()],i=-1,e&&(i=hr(e,t,o,u)),(t=-1<i?e[i]:null)&&Dr(t))}function Dr(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[xe])cn(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Vi(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=ht(e))?(cn(t,i),0==t.h&&(t.src=null,e[nn]=null)):gn(i)}}}function Vi(i){return i in Pn?Pn[i]:Pn[i]="on"+i}function Ri(i,e){if(i.ca)i=!0;else{e=new ve(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&Dr(i),i=t.call(o,e)}return i}function ht(i){return(i=i[nn])instanceof Gt?i:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zn(i){return"function"==typeof i?i:(i[hn]||(i[hn]=function(e){return i.handleEvent(e)}),i[hn])}function On(){qt.call(this),this.i=new Gt(this),this.P=this,this.I=null}function ur(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new ee(e,i);else if(e instanceof ee)e.target=e.target||i;else{var u=e;si(e=new ee(o,i),u)}if(u=!0,t)for(var g=t.length-1;0<=g;g--){var v=e.g=t[g];u=vr(v,o,!0,e)&&u}if(u=vr(v=e.g=i,o,!0,e)&&u,u=vr(v,o,!1,e)&&u,t)for(g=0;g<t.length;g++)u=vr(v=e.g=t[g],o,!1,e)&&u}function vr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,g=0;g<e.length;++g){var v=e[g];if(v&&!v.ca&&v.capture==t){var S=v.listener,V=v.ia||v.src;v.fa&&cn(i.i,v),u=!1!==S.call(V,o)&&u}}return u&&!o.defaultPrevented}Ot(On,qt),On.prototype[xe]=!0,On.prototype.removeEventListener=function(i,e,t,o){Hr(this,i,e,t,o)},On.prototype.M=function(){if(On.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)gn(t[o]);delete i.g[e],i.h--}}this.I=null},On.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},On.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Mi=be.JSON.stringify;function Yn(){var i=Lr;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var ys,ps=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new En,i=>i.reset());class En{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gs(i){be.setTimeout(()=>{throw i},0)}function ms(i,e){ys||function Pi(){var i=be.Promise.resolve(void 0);ys=function(){i.then(Xr)}}(),kr||(ys(),kr=!0),Lr.add(i,e)}var kr=!1,Lr=new class Sr{constructor(){this.h=this.g=null}add(e,t){const o=ps.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Xr(){for(var i;i=Yn();){try{i.h.call(i.g)}catch(t){gs(t)}var e=ps;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}kr=!1}function Gr(i,e){On.call(this),this.h=i||1,this.g=e||be,this.j=lt(this.kb,this),this.l=Date.now()}function Wn(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function es(i,e,t){if("function"==typeof i)t&&(i=lt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=lt(i.handleEvent,i)}return 2147483647<Number(e)?-1:be.setTimeout(i,e||0)}function Bi(i){i.g=es(()=>{i.g=null,i.i&&(i.i=!1,Bi(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ot(Gr,On),(le=Gr.prototype).da=!1,le.S=null,le.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ur(this,"tick"),this.da&&(Wn(this),this.start()))}},le.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},le.M=function(){Gr.Z.M.call(this),Wn(this),delete this.g};class Ar extends qt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Bi(this)}M(){super.M(),this.g&&(be.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oi(i){qt.call(this),this.h=i,this.g={}}Ot(oi,qt);var eo=[];function ji(i,e,t,o){Array.isArray(t)||(t&&(eo[0]=t.toString()),t=eo);for(var u=0;u<t.length;u++){var g=Nr(e,t[u],o||i.handleEvent,!1,i.h||i);if(!g)break;i.g[g.key]=g}}function to(i){or(i.g,function(e,t){this.g.hasOwnProperty(t)&&Dr(e)},i),i.g={}}function zr(){this.g=!0}function ks(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ba(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var g=u[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var v=1;v<u.length;v++)u[v]=""}}}return Mi(t)}catch(S){return e}}(i,t)+(o?" "+o:"")})}oi.prototype.M=function(){oi.Z.M.call(this),to(this)},oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zr.prototype.Aa=function(){this.g=!1},zr.prototype.info=function(){};var no={},we=null;function _e(){return we=we||new On}function Le(i){ee.call(this,no.Ma,i)}function Xe(i){const e=_e();ur(e,new Le(e,i))}function st(i,e){ee.call(this,no.STAT_EVENT,i),this.stat=e}function Tt(i){const e=_e();ur(e,new st(e,i))}function Qn(i,e){ee.call(this,no.Na,i),this.size=e}function lr(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return be.setTimeout(function(){i()},e)}no.Ma="serverreachability",Ot(Le,ee),no.STAT_EVENT="statevent",Ot(st,ee),no.Na="timingevent",Ot(Qn,ee);var Un={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Oi={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ni(){}function Fs(){}Ni.prototype.h=null;var vs,ts={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function la(){ee.call(this,"d")}function ca(){ee.call(this,"c")}function pi(){}function Us(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new oi(this),this.P=da,this.W=new Gr(i=Rn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new yo}function yo(){this.i=null,this.g="",this.h=!1}Ot(la,ee),Ot(ca,ee),Ot(pi,Ni),pi.prototype.g=function(){return new XMLHttpRequest},pi.prototype.i=function(){return{}},vs=new pi;var da=45e3,Jo={},_s={};function ro(i,e,t){i.K=1,i.v=Vn(K(e)),i.s=t,i.U=!0,gi(i,null)}function gi(i,e){i.F=Date.now(),ai(i),i.A=K(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),Da(t.h,"t",o),i.C=0,t=i.l.H,i.h=new yo,i.g=iu(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Ar(lt(i.Ia,i,i.g),i.O)),ji(i.V,i.g,"readystatechange",i.gb),e=i.H?$r(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Xe(1),function Ro(i,e,t,o,u,g){i.info(function(){if(i.g)if(g)for(var v="",S=g.split("&"),V=0;V<S.length;V++){var W=S[V].split("=");if(1<W.length){var se=W[0];W=W[1];var ye=se.split("_");v=2<=ye.length&&"type"==ye[1]?v+(se+"=")+W+"&":v+(se+"=redacted&")}}else v=null;else v=g;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+v})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Ei(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function vo(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Xo(i,t),u==_s){4==e&&(i.o=4,Tt(14),o=!1),ks(i.j,i.m,null,"[Incomplete Response]");break}if(u==Jo){i.o=4,Tt(15),ks(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}ks(i.j,i.m,u,null),so(i,u)}Ei(i)&&u!=_s&&u!=Jo&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Tt(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ki(e),e.L=!0,Tt(11))):(ks(i.j,i.m,t,"[Invalid Chunked Response]"),ns(i),_o(i))}function Xo(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?_s:(t=Number(e.substring(t,o)),isNaN(t)?Jo:(o+=1)+t>e.length?_s:(e=e.substr(o,t),i.C=o+t,e))}function ai(i){i.Y=Date.now()+i.P,Mr(i,i.P)}function Mr(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=lr(lt(i.eb,i),e)}function io(i){i.B&&(be.clearTimeout(i.B),i.B=null)}function _o(i){0==i.l.G||i.I||Ts(i.l,i)}function ns(i){io(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Wn(i.W),to(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function so(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Ta(t.i,i)))if(t.I=i.N,!i.J&&Ta(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(W){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=lr(lt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;Io(t),eu(t)}nu(t),Tt(18)}if(1>=Is(t.i)&&t.ka){try{t.ka()}catch(W){}t.ka=void 0}}else co(t,11)}else if((i.J||t.g==i)&&Io(t),!br(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let W=u[e];if(t.U=W[0],W=W[1],2==t.G)if("c"==W[0]){t.J=W[1],t.la=W[2];const se=W[3];null!=se&&(t.ma=se,t.h.info("VER="+t.ma));const ye=W[4];null!=ye&&(t.za=ye,t.h.info("SVER="+t.za));const je=W[5];null!=je&&"number"==typeof je&&0<je&&(t.K=o=1.5*je,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const ut=i.g;if(ut){const ft=ut.g?ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ft){var g=o.i;!g.g&&(zn(ft,"spdy")||zn(ft,"quic")||zn(ft,"h2"))&&(g.j=g.l,g.g=new Set,g.h&&(Eo(g,g.h),g.h=null))}if(o.D){const Kt=ut.g?ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Kt&&(o.sa=Kt,sn(o.F,o.D,Kt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var v=i;if((o=t).oa=ru(o,o.H?o.la:null,o.W),v.J){_u(o.i,v);var S=v,V=o.K;V&&S.setTimeout(V),S.B&&(io(S),ai(S)),o.g=v}else Ii(o);0<t.l.length&&Ra(t)}else"stop"!=W[0]&&"close"!=W[0]||co(t,7);else 3==t.G&&("stop"==W[0]||"close"==W[0]?"stop"==W[0]?co(t,7):Ma(t):"noop"!=W[0]&&t.j&&t.j.wa(W),t.A=0)}Xe(4)}catch(W){}}function rs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(pn(i)||"string"==typeof i)ir(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(pn(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function ha(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(pn(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var g=0;g<u;g++)e.call(void 0,o[g],t&&t[g],i)}}function Es(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Es)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function Po(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];Jn(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)Jn(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function Jn(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(le=Us.prototype).setTimeout=function(i){this.P=i},le.gb=function(i){i=i.target;const e=this.L;e&&3==Bs(i)?e.l():this.Ia(i)},le.Ia=function(i){try{if(i==this.g)e:{const se=Bs(this.g);var e=this.g.Da();const ye=this.g.ba();if(!(3>se)&&(3!=se||Rn||this.g&&(this.h.h||this.g.ga()||ma(this.g)))){this.I||4!=se||7==e||Xe(8==e||0>=ye?3:2),io(this);var t=this.g.ba();this.N=t;t:if(Ei(this)){var o=ma(this.g);i="";var u=o.length,g=4==Bs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ns(this),_o(this);var v="";break t}this.h.i=new be.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:g&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.ga();if(this.i=200==t,function $i(i,e,t,o,u,g,v){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+g+" "+v})}(this.j,this.u,this.A,this.m,this.X,se,t),this.i){if(this.$&&!this.J){t:{if(this.g){var S,V=this.g;if((S=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!br(S)){var W=S;break t}}W=null}if(!(t=W)){this.i=!1,this.o=3,Tt(12),ns(this),_o(this);break e}ks(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,so(this,t)}this.U?(vo(this,se,v),Rn&&this.i&&3==se&&(ji(this.V,this.W,"tick",this.fb),this.W.start())):(ks(this.j,this.m,v,null),so(this,v)),4==se&&ns(this),this.i&&!this.I&&(4==se?Ts(this.l,this):(this.i=!1,ai(this)))}else 400==t&&0<v.indexOf("Unknown SID")?(this.o=3,Tt(12)):(this.o=0,Tt(13)),ns(this),_o(this)}}}catch(se){}},le.fb=function(){if(this.g){var i=Bs(this.g),e=this.g.ga();this.C<e.length&&(io(this),vo(this,i,e),this.i&&4!=i&&ai(this))}},le.cancel=function(){this.I=!0,ns(this)},le.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function _r(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Xe(3),Tt(17)),ns(this),this.o=2,_o(this)):Mr(this,this.Y-i)},(le=Es.prototype).R=function(){Po(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},le.T=function(){return Po(this),this.g.concat()},le.get=function(i,e){return Jn(this.h,i)?this.h[i]:e},le.set=function(i,e){Jn(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},le.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],g=this.get(u);i.call(e,g,u,this)}};var O=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function P(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof P){this.g=void 0!==e?e:i.g,ce(this,i.j),this.s=i.s,He(this,i.i),it(this,i.m),this.l=i.l,e=i.h;var t=new ws;t.i=e.i,e.g&&(t.g=new Es(e.g),t.h=e.h),It(this,t),this.o=i.o}else i&&(t=String(i).match(O))?(this.g=!!e,ce(this,t[1]||"",!0),this.s=fr(t[2]||""),He(this,t[3]||"",!0),it(this,t[4]),this.l=fr(t[5]||"",!0),It(this,t[6]||"",!0),this.o=fr(t[7]||"")):(this.g=!!e,this.h=new ws(null,this.g))}function K(i){return new P(i)}function ce(i,e,t){i.j=t?fr(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function He(i,e,t){i.i=t?fr(e,!0):e}function it(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function It(i,e,t){e instanceof ws?(i.h=e,function Ln(i,e){e&&!i.j&&(Hi(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(ea(this,o),Da(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Xn(e,wn)),i.h=new ws(e,i.g))}function sn(i,e,t){i.h.set(e,t)}function Vn(i){return sn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function fr(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Xn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,sr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function sr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}P.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Xn(e,ui,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Xn(e,ui,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Xn(t,"/"==t.charAt(0)?Qt:wi,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Xn(t,oo)),i.join("")};var ui=/[#\/\?@]/g,wi=/[#\?:]/g,Qt=/[#\?]/g,wn=/[#\?@]/g,oo=/#/g;function ws(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Hi(i){i.g||(i.g=new Es,i.h=0,i.i&&function z(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var g=i[t].substring(0,o);u=i[t].substring(o+1)}else g=i[t];e(g,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ea(i,e){Hi(i),e=rt(i,e),Jn(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Jn((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Po(i)))}function qa(i,e){return Hi(i),e=rt(i,e),Jn(i.g.h,e)}function Da(i,e,t){ea(i,e),0<t.length&&(i.i=null,i.g.set(rt(i,e),Hn(t)),i.h+=t.length)}function rt(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Tr(i){this.l=i||Ya,i=be.PerformanceNavigationTiming?0<(i=be.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(be.g&&be.g.Ea&&be.g.Ea()&&be.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(le=ws.prototype).add=function(i,e){Hi(this),this.i=null,i=rt(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},le.forEach=function(i,e){Hi(this),this.g.forEach(function(t,o){ir(t,function(u){i.call(e,u,o,this)},this)},this)},le.T=function(){Hi(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],g=0;g<u.length;g++)t.push(e[o]);return t},le.R=function(i){Hi(this);var e=[];if("string"==typeof i)qa(this,i)&&(e=Pr(e,this.g.get(rt(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Pr(e,i[t])}return e},le.set=function(i,e){return Hi(this),this.i=null,qa(this,i=rt(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},le.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},le.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var g=0;g<o.length;g++){var v=u;""!==o[g]&&(v+="="+encodeURIComponent(String(o[g]))),i.push(v)}}return this.i=i.join("&")};var Ya=10;function Vs(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Is(i){return i.h?1:i.g?i.g.size:0}function Ta(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Eo(i,e){i.g?i.g.add(e):i.h=e}function _u(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Eu(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Hn(i.i)}function fa(){}function Oo(){this.g=new fa}function ki(i,e,t){const o=t||"";try{rs(i,function(u,g){let v=u;Ve(u)&&(v=Mi(u)),e.push(o+g+"="+encodeURIComponent(v))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function ta(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(g){}}function Ds(i){this.l=i.$b||null,this.j=i.ib||!1}function Gi(i,e){On.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=pa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tr.prototype.cancel=function(){if(this.i=Eu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},fa.prototype.stringify=function(i){return be.JSON.stringify(i,void 0)},fa.prototype.parse=function(i){return be.JSON.parse(i,void 0)},Ot(Ds,Ni),Ds.prototype.g=function(){return new Gi(this.l,this.j)},Ds.prototype.i=function(i){return function(){return i}}({}),Ot(Gi,On);var pa=0;function Ca(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function No(i){i.readyState=4,i.l=null,i.j=null,i.A=null,na(i)}function na(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(le=Gi.prototype).open=function(i,e){if(this.readyState!=pa)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,na(this)},le.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||be).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},le.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,No(this)),this.readyState=pa},le.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==be.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ca(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},le.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?No(this):na(this),3==this.readyState&&Ca(this)}},le.Ua=function(i){this.g&&(this.response=this.responseText=i,No(this))},le.Ta=function(i){this.g&&(this.response=i,No(this))},le.ha=function(){this.g&&No(this)},le.setRequestHeader=function(i,e){this.v.append(i,e)},le.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},le.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Gi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Sa=be.JSON.parse;function xr(i){On.call(this),this.headers=new Es,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ga,this.K=this.L=!1}Ot(xr,On);var ga="",Uu=/^https?$/i,Qa=["POST","PUT"];function ko(i){return"content-type"==i.toLowerCase()}function wu(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Lo(i),Fo(i)}function Lo(i){i.D||(i.D=!0,ur(i,"complete"),ur(i,"error"))}function Ja(i){if(i.h&&void 0!==Je&&(!i.C[1]||4!=Bs(i)||2!=i.ba()))if(i.v&&4==Bs(i))es(i.Fa,0,i);else if(ur(i,"readystatechange"),4==Bs(i)){i.h=!1;try{const S=i.ba();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===S){var u=String(i.H).match(O)[1]||null;if(!u&&be.self&&be.self.location){var g=be.self.location.protocol;u=g.substr(0,g.length-1)}o=!Uu.test(u?u.toLowerCase():"")}t=o}if(t)ur(i,"complete"),ur(i,"success");else{i.m=6;try{var v=2<Bs(i)?i.g.statusText:""}catch(V){v=""}i.j=v+" ["+i.ba()+"]",Lo(i)}}finally{Fo(i)}}}function Fo(i,e){if(i.g){zi(i);const t=i.g,o=i.C[0]?Vt:null;i.g=null,i.C=null,e||ur(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function zi(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(be.clearTimeout(i.A),i.A=null)}function Bs(i){return i.g?i.g.readyState:0}function ma(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ga:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ao(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function li(i){let e="";return or(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):sn(i,e,t))}function Bn(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Xa(i){this.za=0,this.l=[],this.h=new zr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bn("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bn("baseRetryDelayMs",5e3,i),this.$a=Bn("retryDelaySeedMs",1e4,i),this.Ya=Bn("forwardChannelMaxRetries",2,i),this.ra=Bn("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Tr(i&&i.concurrentRequestLimit),this.Ca=new Oo,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Ma(i){if(xa(i),3==i.G){var e=i.V++,t=K(i.F);sn(t,"SID",i.J),sn(t,"RID",e),sn(t,"TYPE","terminate"),lo(i,t),(e=new Us(i,i.h,e,void 0)).K=2,e.v=Vn(K(t)),t=!1,be.navigator&&be.navigator.sendBeacon&&(t=be.navigator.sendBeacon(e.v.toString(),"")),!t&&be.Image&&((new Image).src=e.v,t=!0),t||(e.g=iu(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ai(e)}Iu(i)}function eu(i){i.g&&(Ki(i),i.g.cancel(),i.g=null)}function xa(i){eu(i),i.u&&(be.clearTimeout(i.u),i.u=null),Io(i),i.i.cancel(),i.m&&("number"==typeof i.m&&be.clearTimeout(i.m),i.m=null)}function tu(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Ra(i)}function Ra(i){Vs(i.i)||i.m||(i.m=!0,ms(i.Ha,i),i.C=0)}function Wi(i,e){var t;t=e?e.m:i.V++;const o=K(i.F);sn(o,"SID",i.J),sn(o,"RID",t),sn(o,"AID",i.U),lo(i,o),i.o&&i.s&&ao(o,i.o,i.s),t=new Us(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Wr(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Eo(i.i,t),ro(t,o,e)}function lo(i,e){i.j&&rs({},function(t,o){sn(e,o,t)})}function Wr(i,e,t){t=Math.min(i.l.length,t);var o=i.j?lt(i.j.Oa,i.j,i):null;e:{var u=i.l;let g=-1;for(;;){const v=["count="+t];-1==g?0<t?(g=u[0].h,v.push("ofs="+g)):g=0:v.push("ofs="+g);let S=!0;for(let V=0;V<t;V++){let W=u[V].h;const se=u[V].g;if(W-=g,0>W)g=Math.max(0,u[V].h-100),S=!1;else try{ki(se,v,"req"+W+"_")}catch(ye){o&&o(se)}}if(S){o=v.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function Ii(i){i.g||i.u||(i.Y=1,ms(i.Ga,i),i.A=0)}function nu(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=lr(lt(i.Ga,i),bo(i,i.A)),i.A++,0))}function Ki(i){null!=i.B&&(be.clearTimeout(i.B),i.B=null)}function wo(i){i.g=new Us(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=K(i.oa);sn(e,"RID","rpc"),sn(e,"SID",i.J),sn(e,"CI",i.N?"0":"1"),sn(e,"AID",i.U),lo(i,e),sn(e,"TYPE","xmlhttp"),i.o&&i.s&&ao(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Vn(K(e)),t.s=null,t.U=!0,gi(t,i)}function Io(i){null!=i.v&&(be.clearTimeout(i.v),i.v=null)}function Ts(i,e){var t=null;if(i.g==e){Io(i),Ki(i),i.g=null;var o=2}else{if(!Ta(i.i,e))return;t=e.D,_u(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;ur(o=_e(),new Qn(o,t,e,u)),Ra(i)}else Ii(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function uo(i,e){return!(Is(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=lr(lt(i.Ha,i,e),bo(i,i.C)),i.C++,0)))}(i,e)||2==o&&nu(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:co(i,5);break;case 4:co(i,10);break;case 3:co(i,6);break;default:co(i,2)}}function bo(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function co(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=lt(i.jb,i);t||(t=new P("//www.google.com/images/cleardot.gif"),be.location&&"http"==be.location.protocol||ce(t,"https"),Vn(t)),function bs(i,e){const t=new zr;if(be.Image){const o=new Image;o.onload=In(ta,t,o,"TestLoadImage: loaded",!0,e),o.onerror=In(ta,t,o,"TestLoadImage: error",!1,e),o.onabort=In(ta,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=In(ta,t,o,"TestLoadImage: timeout",!1,e),be.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Tt(2);i.G=0,i.j&&i.j.va(e),Iu(i),xa(i)}function Iu(i){i.G=0,i.I=-1,i.j&&((0!=Eu(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Hn(i.l),i.l.length=0),i.j.ua())}function ru(i,e,t){let o=function Dn(i){return i instanceof P?K(i):new P(i,void 0)}(t);if(""!=o.i)e&&He(o,e+"."+o.i),it(o,o.m);else{const u=be.location;o=function Nn(i,e,t,o){var u=new P(null,void 0);return i&&ce(u,i),e&&He(u,e),t&&it(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&or(i.aa,function(u,g){sn(o,g,u)}),t=i.sa,(e=i.D)&&t&&sn(o,e,t),sn(o,"VER",i.ma),lo(i,o),o}function iu(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xr(t&&i.Ba&&!i.qa?new Ds({ib:!0}):i.qa)).L=i.H,e}function ei(){}function js(){if(dr&&!(10<=Number(_n)))throw Error("Environmental error: no available transport.")}function Kr(i,e){On.call(this),this.g=new Xa(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!br(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!br(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ss(this)}function Cs(i){la.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function is(){ca.call(this),this.status=1}function ss(i){this.g=i}(le=xr.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():vs.g(),this.C=function Ls(i){return i.h||(i.h=i.i())}(this.u?this.u:vs),this.g.onreadystatechange=lt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(g){return void wu(this,g)}i=t||"";const u=new Es(this.headers);o&&rs(o,function(g,v){u.set(v,g)}),o=function ri(i){e:{var e=ko;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=be.FormData&&i instanceof be.FormData,!(0<=Ir(Qa,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(g,v){this.g.setRequestHeader(v,g)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zi(this),0<this.B&&((this.K=function Aa(i){return dr&&function Ct(){return function Bt(i){var e=Ze;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Lt(String(Ht)).split("."),t=Lt("9").split("."),o=Math.max(e.length,t.length);for(let v=0;0==i&&v<o;v++){var u=e[v]||"",g=t[v]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==u[0].length&&0==g[0].length)break;i=Or(0==u[1].length?0:parseInt(u[1],10),0==g[1].length?0:parseInt(g[1],10))||Or(0==u[2].length,0==g[2].length)||Or(u[2],g[2]),u=u[3],g=g[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lt(this.pa,this)):this.A=es(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(g){wu(this,g)}},le.pa=function(){void 0!==Je&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ur(this,"timeout"),this.abort(8))},le.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,ur(this,"complete"),ur(this,"abort"),Fo(this))},le.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fo(this,!0)),xr.Z.M.call(this)},le.Fa=function(){this.s||(this.F||this.v||this.l?Ja(this):this.cb())},le.cb=function(){Ja(this)},le.ba=function(){try{return 2<Bs(this)?this.g.status:-1}catch(i){return-1}},le.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},le.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Sa(e)}},le.Da=function(){return this.m},le.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(le=Xa.prototype).ma=8,le.G=1,le.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},le.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new Us(this,this.h,i,void 0);let g=this.s;if(this.P&&(g?(g=$r(g),si(g,this.P)):g=this.P),null===this.o&&(u.H=g),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Wr(this,u,e),sn(t=K(this.F),"RID",i),sn(t,"CVER",22),this.D&&sn(t,"X-HTTP-Session-Id",this.D),lo(this,t),this.o&&g&&ao(t,this.o,g),Eo(this.i,u),this.Ra&&sn(t,"TYPE","init"),this.ja?(sn(t,"$req",e),sn(t,"SID","null"),u.$=!0,ro(u,t,null)):ro(u,t,e),this.G=2}}else 3==this.G&&(i?Wi(this,i):0==this.l.length||Vs(this.i)||Wi(this))},le.Ga=function(){if(this.u=null,wo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=lr(lt(this.bb,this),i)}},le.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Tt(10),eu(this),wo(this))},le.ab=function(){null!=this.v&&(this.v=null,eu(this),nu(this),Tt(19))},le.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Tt(2)):(this.h.info("Failed to ping google.com"),Tt(1))},(le=ei.prototype).xa=function(){},le.wa=function(){},le.va=function(){},le.ua=function(){},le.Oa=function(){},js.prototype.g=function(i,e){return new Kr(i,e)},Ot(Kr,On),Kr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),ms(lt(i.hb,i,e))),Tt(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=ru(i,null,i.W),Ra(i)},Kr.prototype.close=function(){Ma(this.g)},Kr.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,tu(this.g,e)}else this.v?((e={}).__data__=Mi(i),tu(this.g,e)):tu(this.g,i)},Kr.prototype.M=function(){this.g.j=null,delete this.j,Ma(this.g),delete this.g,Kr.Z.M.call(this)},Ot(Cs,la),Ot(is,ca),Ot(ss,ei),ss.prototype.xa=function(){ur(this.g,"a")},ss.prototype.wa=function(i){ur(this.g,new Cs(i))},ss.prototype.va=function(i){ur(this.g,new is(i))},ss.prototype.ua=function(){ur(this.g,"b")},js.prototype.createWebChannel=js.prototype.g,Kr.prototype.send=Kr.prototype.u,Kr.prototype.open=Kr.prototype.m,Kr.prototype.close=Kr.prototype.close,Un.NO_ERROR=0,Un.TIMEOUT=8,Un.HTTP_ERROR=6,Oi.COMPLETE="complete",Fs.EventType=ts,ts.OPEN="a",ts.CLOSE="b",ts.ERROR="c",ts.MESSAGE="d",On.prototype.listen=On.prototype.N,xr.prototype.listenOnce=xr.prototype.O,xr.prototype.getLastError=xr.prototype.La,xr.prototype.getLastErrorCode=xr.prototype.Da,xr.prototype.getStatus=xr.prototype.ba,xr.prototype.getResponseJson=xr.prototype.Qa,xr.prototype.getResponseText=xr.prototype.ga,xr.prototype.send=xr.prototype.ea;var Pa=Oe.createWebChannelTransport=function(){return new js},Er=Oe.getStatEventTarget=function(){return _e()},Uo=Oe.ErrorCode=Un,$s=Oe.EventType=Oi,Hs=Oe.Event=no,Gs=Oe.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},dl=Oe.FetchXmlHttpFactory=Ds,qi=Oe.WebChannel=Fs,Do=Oe.XhrIo=xr;const Vo="@firebase/firestore";class Br{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Br.UNAUTHENTICATED=new Br(null),Br.GOOGLE_CREDENTIALS=new Br("google-credentials-uid"),Br.FIRST_PARTY=new Br("first-party-uid"),Br.MOCK_USER=new Br("mock-user");let os="9.6.10";const mi=new Pe.Yd("@firebase/firestore");function zs(){return mi.logLevel}function T(i,...e){if(mi.logLevel<=Pe.in.DEBUG){const t=e.map(R);mi.debug(`Firestore (${os}): ${i}`,...t)}}function w(i,...e){if(mi.logLevel<=Pe.in.ERROR){const t=e.map(R);mi.error(`Firestore (${os}): ${i}`,...t)}}function E(i,...e){if(mi.logLevel<=Pe.in.WARN){const t=e.map(R);mi.warn(`Firestore (${os}): ${i}`,...t)}}function R(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function N(i="Unexpected state"){const e=`FIRESTORE (${os}) INTERNAL ASSERTION FAILED: `+i;throw w(e),new Error(e)}function j(i,e){i||N()}function Q(i,e){return i}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends fe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class jt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Br.UNAUTHENTICATED))}shutdown(){}}class kn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yi{constructor(e){this.t=e,this.currentUser=Br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const g=W=>this.i!==u?(u=this.i,t(W)):Promise.resolve();let v=new Jt;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new Jt,e.enqueueRetryable(()=>g(this.currentUser))};const S=()=>{const W=v;e.enqueueRetryable((0,ue.Z)(function*(){yield W.promise,yield g(o.currentUser)}))},V=W=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=W,this.auth.addAuthTokenListener(this.o),S()};this.t.onInit(W=>V(W)),setTimeout(()=>{if(!this.auth){const W=this.t.getImmediate({optional:!0});W?V(W):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new Jt)}},0),S()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(j("string"==typeof o.accessToken),new jt(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return j(null===e||"string"==typeof e),new Br(e)}}class Ss{constructor(e,t,o){this.type="FirstParty",this.user=Br.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class ya{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new Ss(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ho{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class as{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=g=>{null!=g.error&&T("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const v=g.token!==this.p;return this.p=g.token,T("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>o(g))};const u=g=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.g.onInit(g=>u(g)),setTimeout(()=>{if(!this.appCheck){const g=this.g.getImmediate({optional:!0});g?u(g):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(j("string"==typeof t.token),this.p=t.token,new ho(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class As{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Vu(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}As.A=-1;class Oa{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=Vu(40);for(let g=0;g<u.length;++g)o.length<20&&u[g]<t&&(o+=e.charAt(u[g]%e.length))}return o}}function Cn(i,e){return i<e?-1:i>e?1:0}function su(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function ci(i){return i+"\0"}class yi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yi.fromMillis(Date.now())}static fromDate(e){return yi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new yi(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Cn(this.nanoseconds,e.nanoseconds):Cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fn(e)}static min(){return new fn(new yi(0,0))}static max(){return new fn(new yi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function nc(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function va(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function bu(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Bu{constructor(e,t,o){void 0===t?t=0:t>e.length&&N(),void 0===o?o=e.length-t:o>e.length-t&&N(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Bu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bu?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const g=e.get(u),v=t.get(u);if(g<v)return-1;if(g>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Fn extends Bu{construct(e,t,o){return new Fn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Me(X.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new Fn(t)}static emptyPath(){return new Fn([])}}const ra=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bi extends Bu{construct(e,t,o){return new bi(e,t,o)}static isValidIdentifier(e){return ra.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new bi(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const g=()=>{if(0===o.length)throw new Me(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let v=!1;for(;u<e.length;){const S=e[u];if("\\"===S){if(u+1===e.length)throw new Me(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const V=e[u+1];if("\\"!==V&&"."!==V&&"`"!==V)throw new Me(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=V,u+=2}else"`"===S?(v=!v,u++):"."!==S||v?(o+=S,u++):(g(),u++)}if(g(),v)throw new Me(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bi(t)}static emptyPath(){return new bi([])}}class pr{constructor(e){this.fields=e,e.sort(bi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return su(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class jr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new jr(t)}static fromUint8Array(e){const t=function(o){let u="";for(let g=0;g<o.length;++g)u+=String.fromCharCode(o[g]);return u}(e);return new jr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jr.EMPTY_BYTE_STRING=new jr("");const Lc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bo(i){if(j(!!i),"string"==typeof i){let e=0;const t=Lc.exec(i);if(j(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Kn(i.seconds),nanos:Kn(i.nanos)}}function Kn(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function vi(i){return"string"==typeof i?jr.fromBase64String(i):jr.fromUint8Array(i)}function ju(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fo(i){const e=i.mapValue.fields.__previous_value__;return ju(e)?fo(e):e}function Li(i){const e=Bo(i.mapValue.fields.__local_write_time__.timestampValue);return new yi(e.seconds,e.nanos)}class Ws{constructor(e,t,o,u,g,v,S,V){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=g,this.forceLongPolling=v,this.autoDetectLongPolling=S,this.useFetchStreams=V}}class Ks{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ks("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ks&&e.projectId===this.projectId&&e.database===this.database}}function jo(i){return null==i}function ou(i){return 0===i&&1/i==-1/0}function xl(i){return"number"==typeof i&&Number.isInteger(i)&&!ou(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Et{constructor(e){this.path=e}static fromPath(e){return new Et(Fn.fromString(e))}static fromName(e){return new Et(Fn.fromString(e).popFirst(5))}static empty(){return new Et(Fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Et(new Fn(e.slice()))}}const qs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fl={nullValue:"NULL_VALUE"};function po(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ju(i)?4:Hu(i)?9:10:N()}function To(i,e){if(i===e)return!0;const t=po(i);if(t!==po(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Li(i).isEqual(Li(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const g=Bo(o.timestampValue),v=Bo(u.timestampValue);return g.seconds===v.seconds&&g.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,vi(i.bytesValue).isEqual(vi(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Kn(o.geoPointValue.latitude)===Kn(u.geoPointValue.latitude)&&Kn(o.geoPointValue.longitude)===Kn(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Kn(o.integerValue)===Kn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const g=Kn(o.doubleValue),v=Kn(u.doubleValue);return g===v?ou(g)===ou(v):isNaN(g)&&isNaN(v)}return!1}(i,e);case 9:return su(i.arrayValue.values||[],e.arrayValue.values||[],To);case 10:return function(o,u){const g=o.mapValue.fields||{},v=u.mapValue.fields||{};if(nc(g)!==nc(v))return!1;for(const S in g)if(g.hasOwnProperty(S)&&(void 0===v[S]||!To(g[S],v[S])))return!1;return!0}(i,e);default:return N()}var u}function go(i,e){return void 0!==(i.values||[]).find(t=>To(t,e))}function Zs(i,e){if(i===e)return 0;const t=po(i),o=po(e);if(t!==o)return Cn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Cn(i.booleanValue,e.booleanValue);case 2:return function(u,g){const v=Kn(u.integerValue||u.doubleValue),S=Kn(g.integerValue||g.doubleValue);return v<S?-1:v>S?1:v===S?0:isNaN(v)?isNaN(S)?0:-1:1}(i,e);case 3:return pl(i.timestampValue,e.timestampValue);case 4:return pl(Li(i),Li(e));case 5:return Cn(i.stringValue,e.stringValue);case 6:return function(u,g){const v=vi(u),S=vi(g);return v.compareTo(S)}(i.bytesValue,e.bytesValue);case 7:return function(u,g){const v=u.split("/"),S=g.split("/");for(let V=0;V<v.length&&V<S.length;V++){const W=Cn(v[V],S[V]);if(0!==W)return W}return Cn(v.length,S.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,g){const v=Cn(Kn(u.latitude),Kn(g.latitude));return 0!==v?v:Cn(Kn(u.longitude),Kn(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,g){const v=u.values||[],S=g.values||[];for(let V=0;V<v.length&&V<S.length;++V){const W=Zs(v[V],S[V]);if(W)return W}return Cn(v.length,S.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,g){const v=u.fields||{},S=Object.keys(v),V=g.fields||{},W=Object.keys(V);S.sort(),W.sort();for(let se=0;se<S.length&&se<W.length;++se){const ye=Cn(S[se],W[se]);if(0!==ye)return ye;const je=Zs(v[S[se]],V[W[se]]);if(0!==je)return je}return Cn(S.length,W.length)}(i.mapValue,e.mapValue);default:throw N()}}function pl(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Cn(i,e);const t=Bo(i),o=Bo(e),u=Cn(t.seconds,o.seconds);return 0!==u?u:Cn(t.nanos,o.nanos)}function _a(i){return Co(i)}function Co(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Bo(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?vi(i.bytesValue).toBase64():"referenceValue"in i?Et.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",g=!0;for(const v of o.values||[])g?g=!1:u+=",",u+=Co(v);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let g="{",v=!0;for(const S of u)v?v=!1:g+=",",g+=`${S}:${Co(o.fields[S])}`;return g+"}"}(i.mapValue):N();var e}function au(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ys(i){return!!i&&"integerValue"in i}function uu(i){return!!i&&"arrayValue"in i}function Du(i){return!!i&&"nullValue"in i}function $u(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function $o(i){return!!i&&"mapValue"in i}function Ho(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return va(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=Ho(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ho(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Hu(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function x(i,e){return void 0===i?e:void 0===e||Zs(i,e)>0?i:e}function k(i,e){return void 0===i?e:void 0===e||Zs(i,e)<0?i:e}class G{constructor(e){this.value=e}static empty(){return new G({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!$o(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ho(t)}setAll(e){let t=bi.emptyPath(),o={},u=[];e.forEach((v,S)=>{if(!t.isImmediateParentOf(S)){const V=this.getFieldsMap(t);this.applyChanges(V,o,u),o={},u=[],t=S.popLast()}v?o[S.lastSegment()]=Ho(v):u.push(S.lastSegment())});const g=this.getFieldsMap(t);this.applyChanges(g,o,u)}delete(e){const t=this.field(e.popLast());$o(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return To(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];$o(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){va(t,(u,g)=>e[u]=g);for(const u of o)delete e[u]}clone(){return new G(Ho(this.value))}}function ie(i){const e=[];return va(i.fields,(t,o)=>{const u=new bi([t]);if($o(o)){const g=ie(o.mapValue).fields;if(0===g.length)e.push(u);else for(const v of g)e.push(u.child(v))}else e.push(u)}),new pr(e)}class Te{constructor(e,t,o,u,g,v){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=g,this.documentState=v}static newInvalidDocument(e){return new Te(e,0,fn.min(),fn.min(),G.empty(),0)}static newFoundDocument(e,t,o){return new Te(e,1,t,fn.min(),o,0)}static newNoDocument(e,t){return new Te(e,2,t,fn.min(),G.empty(),0)}static newUnknownDocument(e,t){return new Te(e,3,t,fn.min(),G.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=G.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=G.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Te&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Te(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fe{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function pt(i){return i.fields.find(e=>2===e.kind)}function bt(i){return i.fields.filter(e=>2!==e.kind)}Fe.UNKNOWN_ID=-1;class Ft{constructor(e,t){this.fieldPath=e,this.kind=t}}class on{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new on(0,Rr.min())}}function Gn(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=fn.fromTimestamp(1e9===o?new yi(t+1,0):new yi(t,o));return new Rr(u,Et.empty(),e)}function Tn(i){return new Rr(i.readTime,i.key,-1)}class Rr{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Rr(fn.min(),Et.empty(),-1)}static max(){return new Rr(fn.max(),Et.empty(),-1)}}function ti(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Et.comparator(i.documentKey,e.documentKey),0!==t?t:Cn(i.largestBatchId,e.largestBatchId))}class lu{constructor(e,t=null,o=[],u=[],g=null,v=null,S=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=g,this.startAt=v,this.endAt=S,this.P=null}}function Tu(i,e=null,t=[],o=[],u=null,g=null,v=null){return new lu(i,e,t,o,u,g,v)}function Di(i){const e=Q(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+_a(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),jo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>_a(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>_a(o)).join(",")),e.P=t}return e.P}function Qs(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Rl(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!To(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Vc(i.startAt,e.startAt)&&Vc(i.endAt,e.endAt)}function Ao(i){return Et.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Gu(i,e){return i.filters.filter(t=>t instanceof Cr&&t.field.isEqual(e))}class Cr extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new Na(e,t,o):"array-contains"===t?new Cd(e,o):"in"===t?new ka(e,o):"not-in"===t?new cu(e,o):"array-contains-any"===t?new Sd(e,o):new Cr(e,t,o)}static V(e,t,o){return"in"===t?new zu(e,o):new Fc(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Zs(t,this.value)):null!==t&&po(this.value)===po(t)&&this.v(Zs(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return N()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Na extends Cr{constructor(e,t,o){super(e,t,o),this.key=Et.fromName(o.referenceValue)}matches(e){const t=Et.comparator(e.key,this.key);return this.v(t)}}class zu extends Cr{constructor(e,t){super(e,"in",t),this.keys=rc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fc extends Cr{constructor(e,t){super(e,"not-in",t),this.keys=rc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rc(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Et.fromName(o.referenceValue))}class Cd extends Cr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uu(t)&&go(t.arrayValue,this.value)}}class ka extends Cr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&go(this.value.arrayValue,t)}}class cu extends Cr{constructor(e,t){super(e,"not-in",t)}matches(e){if(go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!go(this.value.arrayValue,t)}}class Sd extends Cr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>go(this.value.arrayValue,o))}}class du{constructor(e,t){this.position=e,this.inclusive=t}}class La{constructor(e,t="asc"){this.field=e,this.dir=t}}function Rl(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Uc(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const g=e[u],v=i.position[u];if(o=g.field.isKeyField()?Et.comparator(Et.fromName(v.referenceValue),t.key):Zs(v,t.data.field(g.field)),"desc"===g.dir&&(o*=-1),0!==o)break}return o}function Vc(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!To(i.position[t],e.position[t]))return!1;return!0}class Fa{constructor(e,t=null,o=[],u=[],g=null,v="F",S=null,V=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=g,this.limitType=v,this.startAt=S,this.endAt=V,this.D=null,this.C=null}}function Bc(i,e,t,o,u,g,v,S){return new Fa(i,e,t,o,u,g,v,S)}function Ua(i){return new Fa(i)}function Cu(i){return!jo(i.limit)&&"F"===i.limitType}function Go(i){return!jo(i.limit)&&"L"===i.limitType}function Pl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function gl(i){for(const e of i.filters)if(e.S())return e.field;return null}function ic(i){return null!==i.collectionGroup}function Va(i){const e=Q(i);if(null===e.D){e.D=[];const t=gl(e),o=Pl(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new La(t)),e.D.push(new La(bi.keyField(),"asc"));else{let u=!1;for(const g of e.explicitOrderBy)e.D.push(g),g.field.isKeyField()&&(u=!0);if(!u){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new La(bi.keyField(),g))}}}return e.D}function mo(i){const e=Q(i);if(!e.C)if("F"===e.limitType)e.C=Tu(e.path,e.collectionGroup,Va(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const g of Va(e))t.push(new La(g.field,"desc"===g.dir?"asc":"desc"));const o=e.endAt?new du(e.endAt.position,!e.endAt.inclusive):null,u=e.startAt?new du(e.startAt.position,!e.startAt.inclusive):null;e.C=Tu(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.C}function sc(i,e,t){return new Fa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Wu(i,e){return Qs(mo(i),mo(e))&&i.limitType===e.limitType}function Ol(i){return`${Di(mo(i))}|lt:${i.limitType}`}function Nl(i){return`Query(target=${function So(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${_a(o.value)}`;var o}).join(", ")}]`),jo(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>_a(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>_a(t)).join(",")),`Target(${e})`}(mo(i))}; limitType=${i.limitType})`}function kl(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):Et.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,g,v){const S=Uc(u,g,v);return u.inclusive?S<=0:S<0}(t.startAt,Va(t),o)||t.endAt&&!function(u,g,v){const S=Uc(u,g,v);return u.inclusive?S>=0:S>0}(t.endAt,Va(t),o)));var t,o}function oc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ac(i){return(e,t)=>{let o=!1;for(const u of Va(i)){const g=uc(u,e,t);if(0!==g)return g;o=o||u.field.isKeyField()}return 0}}function uc(i,e,t){const o=i.field.isKeyField()?Et.comparator(e.key,t.key):function(u,g,v){const S=g.data.field(u),V=v.data.field(u);return null!==S&&null!==V?Zs(S,V):N()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return N()}}function jc(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ou(e)?"-0":e}}function Ea(i){return{integerValue:""+i}}function Ku(i,e){return xl(e)?Ea(e):jc(i,e)}class ml{constructor(){this._=void 0}}function D(i,e,t){return i instanceof _?function(o,u){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(g.fields.__previous_value__=u),{mapValue:g}}(t,e):i instanceof M?$(i,e):i instanceof Y?ne(i,e):function(o,u){const g=h(o,u),v=Be(g)+Be(o.k);return Ys(g)&&Ys(o.k)?Ea(v):jc(o.M,v)}(i,e)}function c(i,e,t){return i instanceof M?$(i,e):i instanceof Y?ne(i,e):t}function h(i,e){return i instanceof me?Ys(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class _ extends ml{}class M extends ml{constructor(e){super(),this.elements=e}}function $(i,e){const t=Pt(e);for(const o of i.elements)t.some(u=>To(u,o))||t.push(o);return{arrayValue:{values:t}}}class Y extends ml{constructor(e){super(),this.elements=e}}function ne(i,e){let t=Pt(e);for(const o of i.elements)t=t.filter(u=>!To(u,o));return{arrayValue:{values:t}}}class me extends ml{constructor(e,t){super(),this.M=e,this.k=t}}function Be(i){return Kn(i.integerValue||i.doubleValue)}function Pt(i){return uu(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ut{constructor(e,t){this.field=e,this.transform=t}}class $t{constructor(e,t){this.version=e,this.transformResults=t}}class dt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dt}static exists(e){return new dt(void 0,e)}static updateTime(e){return new dt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function an(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class nr{}function er(i,e,t){i instanceof xs?function(o,u,g){const v=o.value.clone(),S=Ba(o.fieldTransforms,u,g.transformResults);v.setAll(S),u.convertToFoundDocument(g.version,v).setHasCommittedMutations()}(i,e,t):i instanceof di?function(o,u,g){if(!an(o.precondition,u))return void u.convertToUnknownDocument(g.version);const v=Ba(o.fieldTransforms,u,g.transformResults),S=u.data;S.setAll(zo(o)),S.setAll(v),u.convertToFoundDocument(g.version,S).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function qr(i,e,t){var u;i instanceof xs?function(o,u,g){if(!an(o.precondition,u))return;const v=o.value.clone(),S=wa(o.fieldTransforms,g,u);v.setAll(S),u.convertToFoundDocument(qu(u),v).setHasLocalMutations()}(i,e,t):i instanceof di?function(o,u,g){if(!an(o.precondition,u))return;const v=wa(o.fieldTransforms,g,u),S=u.data;S.setAll(zo(o)),S.setAll(v),u.convertToFoundDocument(qu(u),S).setHasLocalMutations()}(i,e,t):an(i.precondition,u=e)&&u.convertToNoDocument(fn.min())}function Ms(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),g=h(o.transform,u||null);null!=g&&(null==t&&(t=G.empty()),t.set(o.field,g))}return t||null}function Ti(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&su(t,o,(u,g)=>function en(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof M&&o instanceof M||t instanceof Y&&o instanceof Y?su(t.elements,o.elements,To):t instanceof me&&o instanceof me?To(t.k,o.k):t instanceof _&&o instanceof _);var t,o}(u,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function qu(i){return i.isFoundDocument()?i.version:fn.min()}class xs extends nr{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}}class di extends nr{constructor(e,t,o,u,g=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=g,this.type=1}}function zo(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Ba(i,e,t){const o=new Map;j(i.length===t.length);for(let u=0;u<t.length;u++){const g=i[u],v=g.transform,S=e.data.field(g.field);o.set(g.field,c(v,S,t[u]))}return o}function wa(i,e,t){const o=new Map;for(const u of i){const g=u.transform,v=t.data.field(u.field);o.set(u.field,D(g,v,e))}return o}class ja extends nr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Su extends nr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Au{constructor(e){this.count=e}}var hi,tr;function Wt(i){switch(i){default:return N();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function rn(i){if(void 0===i)return w("GRPC error has no .code"),X.UNKNOWN;switch(i){case hi.OK:return X.OK;case hi.CANCELLED:return X.CANCELLED;case hi.UNKNOWN:return X.UNKNOWN;case hi.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case hi.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case hi.INTERNAL:return X.INTERNAL;case hi.UNAVAILABLE:return X.UNAVAILABLE;case hi.UNAUTHENTICATED:return X.UNAUTHENTICATED;case hi.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case hi.NOT_FOUND:return X.NOT_FOUND;case hi.ALREADY_EXISTS:return X.ALREADY_EXISTS;case hi.PERMISSION_DENIED:return X.PERMISSION_DENIED;case hi.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case hi.ABORTED:return X.ABORTED;case hi.OUT_OF_RANGE:return X.OUT_OF_RANGE;case hi.UNIMPLEMENTED:return X.UNIMPLEMENTED;case hi.DATA_LOSS:return X.DATA_LOSS;default:return N()}}(tr=hi||(hi={}))[tr.OK=0]="OK",tr[tr.CANCELLED=1]="CANCELLED",tr[tr.UNKNOWN=2]="UNKNOWN",tr[tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tr[tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tr[tr.NOT_FOUND=5]="NOT_FOUND",tr[tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",tr[tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",tr[tr.UNAUTHENTICATED=16]="UNAUTHENTICATED",tr[tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tr[tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tr[tr.ABORTED=10]="ABORTED",tr[tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",tr[tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",tr[tr.INTERNAL=13]="INTERNAL",tr[tr.UNAVAILABLE=14]="UNAVAILABLE",tr[tr.DATA_LOSS=15]="DATA_LOSS";class tn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,g]of o)if(this.equalsFn(u,e))return g}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let g=0;g<u.length;g++)if(this.equalsFn(u[g][0],e))return void(u[g]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,(t,o)=>{for(const[u,g]of o)e(u,g)})}isEmpty(){return bu(this.inner)}size(){return this.innerSize}}class un{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ci(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ci(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ci(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ci(this.root,e,this.comparator,!0)}}class Ci{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=t?o(e.key,t):1,t&&u&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,o,u,g){this.key=e,this.value=t,this.color=null!=o?o:Sn.RED,this.left=null!=u?u:Sn.EMPTY,this.right=null!=g?g:Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,g){return new Sn(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const g=o(e,u.key);return u=g<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===g?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return Sn.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw N();const e=this.left.check();if(e!==this.right.check())throw N();return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1,Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw N()}get value(){throw N()}get color(){throw N()}get left(){throw N()}get right(){throw N()}copy(i,e,t,o,u){return this}insert(i,e,t){return new Sn(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $a(this.data.getIterator())}getIteratorFrom(e){return new $a(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,g=o.getNext().key;if(0!==this.comparator(u,g))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class $a{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wr(i){return i.hasNext()?i.getNext():void 0}const lc=new un(Et.comparator);function Wo(){return lc}const Qi=new un(Et.comparator);function Ha(){return Qi}function Mo(){return new tn(i=>i.toString(),(i,e)=>i.isEqual(e))}const Mu=new un(Et.comparator),$c=new qn(Et.comparator);function Fr(...i){let e=$c;for(const t of i)e=e.add(t);return e}const cc=new qn(Cn);function ls(){return cc}class xu{constructor(e,t,o,u,g){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,Zu.createSynthesizedTargetChangeForCurrentChange(e,t)),new xu(fn.min(),o,ls(),Wo(),Fr())}}class Zu{constructor(e,t,o,u,g){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Zu(jr.EMPTY_BYTE_STRING,t,Fr(),Fr(),Fr())}}class Ll{constructor(e,t,o,u){this.O=e,this.removedTargetIds=t,this.key=o,this.F=u}}class Js{constructor(e,t){this.targetId=e,this.$=t}}class Yu{constructor(e,t,o=jr.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class Hc{constructor(){this.B=0,this.L=Gc(),this.U=jr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=Fr(),t=Fr(),o=Fr();return this.L.forEach((u,g)=>{switch(g){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:N()}}),new Zu(this.U,this.q,e,t,o)}J(){this.G=!1,this.L=Gc()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class ia{constructor(e){this.nt=e,this.st=new Map,this.it=Wo(),this.rt=Fl(),this.ot=new qn(Cn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.K||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.K||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:N()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,u)=>{this.ft(u)&&t(u)})}_t(e){const t=e.targetId,o=e.$.count,u=this.wt(t);if(u){const g=u.target;if(Ao(g))if(0===o){const v=new Et(g.path);this.ct(t,v,Te.newNoDocument(v,fn.min()))}else j(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((g,v)=>{const S=this.wt(v);if(S){if(g.current&&Ao(S.target)){const V=new Et(S.target.path);null!==this.it.get(V)||this.It(v,V)||this.ct(v,V,Te.newNoDocument(V,e))}g.j&&(t.set(v,g.H()),g.J())}});let o=Fr();this.rt.forEach((g,v)=>{let S=!0;v.forEachWhile(V=>{const W=this.wt(V);return!W||2===W.purpose||(S=!1,!1)}),S&&(o=o.add(g))}),this.it.forEach((g,v)=>v.setReadTime(e));const u=new xu(e,t,this.ot,this.it,o);return this.it=Wo(),this.rt=Fl(),this.ot=new qn(Cn),u}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const u=this.lt(e);this.It(e,t)?u.Y(t,1):u.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Hc,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new qn(Cn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||T("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Hc),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Fl(){return new un(Et.comparator)}function Gc(){return new un(Et.comparator)}const Ff={asc:"ASCENDING",desc:"DESCENDING"},zc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ad{constructor(e,t){this.databaseId=e,this.N=t}}function Ul(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Md(i,e){return i.N?e.toBase64():e.toUint8Array()}function Uf(i,e){return Ul(i,e.toTimestamp())}function Zr(i){return j(!!i),fn.fromTimestamp(function(e){const t=Bo(e);return new yi(t.seconds,t.nanos)}(i))}function Wc(i,e){return(t=i,new Fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function yh(i){const e=Fn.fromString(i);return j(St(e)),e}function yl(i,e){return Wc(i.databaseId,e.path)}function hu(i,e){const t=yh(e);if(t.get(1)!==i.databaseId.projectId)throw new Me(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Me(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Et(qc(t))}function Kc(i,e){return Wc(i.databaseId,e)}function Rs(i){const e=yh(i);return 4===e.length?Fn.emptyPath():qc(e)}function vl(i){return new Fn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function qc(i){return j(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function vh(i,e,t){return{name:yl(i,e),fields:t.value.mapValue.fields}}function fu(i,e,t){const o=hu(i,e.name),u=Zr(e.updateTime),g=new G({mapValue:{fields:e.fields}}),v=Te.newFoundDocument(o,u,g);return t&&v.setHasCommittedMutations(),t?v.setHasCommittedMutations():v}function Vl(i,e){let t;if(e instanceof xs)t={update:vh(i,e.key,e.value)};else if(e instanceof ja)t={delete:yl(i,e.key)};else if(e instanceof di)t={update:vh(i,e.key,e.data),updateMask:We(e.fieldMask)};else{if(!(e instanceof Su))return N();t={verify:yl(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,g){const v=g.transform;if(v instanceof _)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof M)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Y)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof me)return{fieldPath:g.field.canonicalString(),increment:v.k};throw N()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Uf(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:N()),t;var u}function Rd(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?dt.updateTime(Zr(u.updateTime)):void 0!==u.exists?dt.exists(u.exists):dt.none():dt.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(g,v){let S=null;"setToServerValue"in v?(j("REQUEST_TIME"===v.setToServerValue),S=new _):"appendMissingElements"in v?S=new M(v.appendMissingElements.values||[]):"removeAllFromArray"in v?S=new Y(v.removeAllFromArray.values||[]):"increment"in v?S=new me(g,v.increment):N();const V=bi.fromServerFormat(v.fieldPath);return new Ut(V,S)}(i,u)):[];var u;if(e.update){const u=hu(i,e.update.name),g=new G({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new pr((e.updateMask.fieldPaths||[]).map(W=>bi.fromServerFormat(W)));return new di(u,g,v,t,o)}return new xs(u,g,t,o)}if(e.delete){const u=hu(i,e.delete);return new ja(u,t)}if(e.verify){const u=hu(i,e.verify);return new Su(u,t)}return N()}function _h(i,e){return{documents:[Kc(i,e.path)]}}function Eh(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Kc(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Kc(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(V){if(0===V.length)return;const W=V.map(se=>function(ye){if("=="===ye.op){if($u(ye.value))return{unaryFilter:{field:I(ye.field),op:"IS_NAN"}};if(Du(ye.value))return{unaryFilter:{field:I(ye.field),op:"IS_NULL"}}}else if("!="===ye.op){if($u(ye.value))return{unaryFilter:{field:I(ye.field),op:"IS_NOT_NAN"}};if(Du(ye.value))return{unaryFilter:{field:I(ye.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:I(ye.field),op:p(ye.op),value:ye.value}}}(se));return 1===W.length?W[0]:{compositeFilter:{op:"AND",filters:W}}}(e.filters);u&&(t.structuredQuery.where=u);const g=function(V){if(0!==V.length)return V.map(W=>{return{field:I((se=W).field),direction:d(se.dir)};var se})}(e.orderBy);g&&(t.structuredQuery.orderBy=g);const v=(W=e.limit,i.N||jo(W)?W:{value:W});var W,S,V;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(S=e.startAt).inclusive,values:S.position}),e.endAt&&(t.structuredQuery.endAt={before:!(V=e.endAt).inclusive,values:V.position}),t}function wh(i){let e=Rs(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){j(1===o);const se=t.from[0];se.allDescendants?u=se.collectionId:e=e.child(se.collectionId)}let g=[];t.where&&(g=m(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(se=>{return new La(F((ye=se).field),function(je){switch(je){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ye.direction));var ye}));let S=null;t.limit&&(S=function(se){let ye;return ye="object"==typeof se?se.value:se,jo(ye)?null:ye}(t.limit));let V=null;var se;t.startAt&&(V=new du((se=t.startAt).values||[],!!se.before));let W=null;return t.endAt&&(W=function(se){return new du(se.values||[],!se.before)}(t.endAt)),Bc(e,u,v,g,S,"F",V,W)}function m(i){return i?void 0!==i.unaryFilter?[Ae(i)]:void 0!==i.fieldFilter?[Z(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>m(e)).reduce((e,t)=>e.concat(t)):N():[]}function d(i){return Ff[i]}function p(i){return zc[i]}function I(i){return{fieldPath:i.canonicalString()}}function F(i){return bi.fromServerFormat(i.fieldPath)}function Z(i){return Cr.create(F(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return N()}}(i.fieldFilter.op),i.fieldFilter.value)}function Ae(i){switch(i.unaryFilter.op){case"IS_NAN":const e=F(i.unaryFilter.field);return Cr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=F(i.unaryFilter.field);return Cr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=F(i.unaryFilter.field);return Cr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=F(i.unaryFilter.field);return Cr.create(u,"!=",{nullValue:"NULL_VALUE"});default:return N()}}function We(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function St(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function At(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=ln(e)),e=mn(i.get(t),e);return ln(e)}function mn(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const g=i.charAt(u);switch(g){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=g}}return t}function ln(i){return i+"\x01\x01"}function gr(i){const e=i.length;if(j(e>=2),2===e)return j("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Fn.emptyPath();const t=e-2,o=[];let u="";for(let g=0;g<e;){const v=i.indexOf("\x01",g);switch((v<0||v>t)&&N(),i.charAt(v+1)){case"\x01":const S=i.substring(g,v);let V;0===u.length?V=S:(u+=S,V=u,u=""),o.push(V);break;case"\x10":u+=i.substring(g,v),u+="\0";break;case"\x11":u+=i.substring(g,v+1);break;default:N()}g=v+2}return new Fn(o)}const sa=["userId","batchId"];function Qu(i,e){return[i,At(e)]}function hc(i,e,t){return[i,At(e),t]}const fc={},Od=["prefixPath","collectionGroup","readTime","documentId"],Bf=["prefixPath","collectionGroup","documentId"],Ju=["collectionGroup","readTime","prefixPath","documentId"],Zc=["canonicalId","targetId"],Nd=["targetId","path"],kd=["path","targetId"],Yc=["collectionId","parent"],jf=["indexId","uid"],Ld=["uid","sequenceNumber"],$f=["indexId","uid","arrayValue","directionalValue","documentKey"],Fy=["indexId","uid","documentKey"],Uy=["userId","collectionPath","documentId"],Vy=["userId","collectionPath","largestBatchId"],Ag=["userId","collectionGroup","largestBatchId"],Ih=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Mg=[...Ih,"documentOverlays"],bh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],By=[...bh,"indexConfiguration","indexState","indexEntries"],xg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&N(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ye((o,u)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(o,u)},this.catchCallback=g=>{this.wrapFailure(t,g).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ye?t:Ye.resolve(t)}catch(t){return Ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ye.reject(t)}static resolve(e){return new Ye((t,o)=>{t(e)})}static reject(e){return new Ye((t,o)=>{o(e)})}static waitFor(e){return new Ye((t,o)=>{let u=0,g=0,v=!1;e.forEach(S=>{++u,S.next(()=>{++g,v&&g===u&&t()},V=>o(V))}),v=!0,g===u&&t()})}static or(e){let t=Ye.resolve(!1);for(const o of e)t=t.next(u=>u?Ye.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,g)=>{o.push(t.call(this,u,g))}),this.waitFor(o)}}class Xu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Jt,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Fd(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const u=Dh(o.target.error);this.At.reject(new Fd(e,u))}}static open(e,t,o,u){try{return new Xu(t,e.transaction(u,o))}catch(g){throw new Fd(t,g)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(T("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jy(t)}}class pu{constructor(e,t,o){this.name=e,this.version=t,this.Pt=o,12.2===pu.Vt((0,fe.z$)())&&w("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return T("SimpleDb","Removing database:",e),Bl(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,fe.hl)())return!1;if(pu.St())return!0;const e=(0,fe.z$)(),t=pu.Vt(e),o=0<t&&t<10,u=pu.Dt(e),g=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||g)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,ue.Z)(function*(){return t.db||(T("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const g=indexedDB.open(t.name,t.version);g.onsuccess=v=>{o(v.target.result)},g.onblocked=()=>{u(new Fd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=v=>{const S=v.target.error;u("VersionError"===S.name?new Me(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===S.name?new Me(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+S):new Fd(e,S))},g.onupgradeneeded=v=>{T("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.Pt.kt(v.target.result,g.transaction,v.oldVersion,t.version).next(()=>{T("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var g=this;return(0,ue.Z)(function*(){const v="readonly"===t;let S=0;for(;;){++S;try{g.db=yield g.Nt(e);const V=Xu.open(g.db,e,v?"readonly":"readwrite",o),W=u(V).next(se=>(V.bt(),se)).catch(se=>(V.abort(se),Ye.reject(se))).toPromise();return W.catch(()=>{}),yield V.Rt,W}catch(V){const W="FirebaseError"!==V.name&&S<3;if(T("SimpleDb","Transaction failed with error:",V.message,"Retrying:",W),g.close(),!W)return Promise.reject(V)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Rg{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Bl(this.Ft.delete())}}class Fd extends Me{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function el(i){return"IndexedDbTransactionError"===i.name}class jy{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(T("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(T("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Bl(o)}add(e){return T("SimpleDb","ADD",this.store.name,e,e),Bl(this.store.add(e))}get(e){return Bl(this.store.get(e)).next(t=>(void 0===t&&(t=null),T("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return T("SimpleDb","DELETE",this.store.name,e),Bl(this.store.delete(e))}count(){return T("SimpleDb","COUNT",this.store.name),Bl(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),g=[];return this.Gt(u,(v,S)=>{g.push(S)}).next(()=>g)}{const u=this.store.getAll(o.range);return new Ye((g,v)=>{u.onerror=S=>{v(S.target.error)},u.onsuccess=S=>{g(S.target.result)}})}}Kt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new Ye((u,g)=>{o.onerror=v=>{g(v.target.error)},o.onsuccess=v=>{u(v.target.result)}})}Qt(e,t){T("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const u=this.cursor(o);return this.Gt(u,(g,v,S)=>S.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.Gt(u,t)}zt(e){const t=this.cursor({});return new Ye((o,u)=>{t.onerror=g=>{const v=Dh(g.target.error);u(v)},t.onsuccess=g=>{const v=g.target.result;v?e(v.primaryKey,v.value).next(S=>{S?v.continue():o()}):o()}})}Gt(e,t){const o=[];return new Ye((u,g)=>{e.onerror=v=>{g(v.target.error)},e.onsuccess=v=>{const S=v.target.result;if(!S)return void u();const V=new Rg(S),W=t(S.primaryKey,S.value,V);if(W instanceof Ye){const se=W.catch(ye=>(V.done(),Ye.reject(ye)));o.push(se)}V.isDone?u():null===V.Lt?S.continue():S.continue(V.Lt)}}).next(()=>Ye.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bl(i){return new Ye((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Dh(o.target.error);t(u)}})}let Gf=!1;function Dh(i){const e=pu.Vt((0,fe.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gf||(Gf=!0,setTimeout(()=>{throw o},0)),o}}return i}class Th extends Hf{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Xs(i,e){const t=Q(i);return pu.xt(t.Ht,e)}class Qc{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const g=this.mutations[u];g.key.isEqual(e.key)&&er(g,e,o[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&qr(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&qr(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),u=o;this.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(fn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fr())}isEqual(e){return this.batchId===e.batchId&&su(this.mutations,e.mutations,(t,o)=>Ti(t,o))&&su(this.baseMutations,e.baseMutations,(t,o)=>Ti(t,o))}}class Jc{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){j(e.mutations.length===o.length);let u=Mu;const g=e.mutations;for(let v=0;v<g.length;v++)u=u.insert(g[v].key,o[v].version);return new Jc(e,t,o,u)}}class Ch{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class tl{constructor(e,t,o,u,g=fn.min(),v=fn.min(),S=jr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=S}withSequenceNumber(e){return new tl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class zf{constructor(e){this.Jt=e}}function Xc(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Sh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:yl(u=i.Jt,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:Ul(u,g.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:jl(e.version)};else{if(!e.isUnknownDocument())return N();o.unknownDocument={path:t.path.toArray(),version:jl(e.version)}}var u,g;return o}function Sh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function jl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pc(i){const e=new yi(i.seconds,i.nanoseconds);return fn.fromTimestamp(e)}function ed(i,e){const t=(e.baseMutations||[]).map(g=>Rd(i.Jt,g));for(let g=0;g<e.mutations.length-1;++g){const v=e.mutations[g];g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(v.updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g)}const o=e.mutations.map(g=>Rd(i.Jt,g)),u=yi.fromMillis(e.localWriteTimeMs);return new Qc(e.batchId,u,t,o)}function td(i){const e=pc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?pc(i.lastLimboFreeSnapshotVersion):fn.min();let o;var u;return void 0!==i.query.documents?(j(1===(u=i.query).documents.length),o=mo(Ua(Rs(u.documents[0])))):o=mo(wh(i.query)),new tl(o,i.targetId,0,i.lastListenSequenceNumber,e,t,jr.fromBase64String(i.resumeToken))}function Ah(i,e){const t=jl(e.snapshotVersion),o=jl(e.lastLimboFreeSnapshotVersion);let u;u=Ao(e.target)?_h(i.Jt,e.target):Eh(i.Jt,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Di(e.target),readTime:t,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Mh(i){const e=wh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?sc(e,e.limit,"L"):e}function Pg(i,e){return new Ch(e.largestBatchId,Rd(i.Jt,e.overlayMutation))}function Kf(i,e){const t=e.path.lastSegment();return[i,At(e.path.popLast()),t]}class $y{getBundleMetadata(e,t){return qf(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:pc(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return qf(e).put({bundleId:(o=t).id,createTime:jl(Zr(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Og(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:Mh(u.bundledQuery),readTime:pc(u.readTime)};var u})}saveNamedQuery(e,t){return Og(e).put({name:(o=t).name,readTime:jl(Zr(o.readTime)),bundledQuery:o.bundledQuery});var o}}function qf(i){return Xs(i,"bundles")}function Og(i){return Xs(i,"namedQueries")}class Zf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Zf(e,t.uid||"")}getOverlay(e,t){return oa(e).get(Kf(this.userId,t)).next(o=>o?Pg(this.M,o):null)}saveOverlays(e,t,o){const u=[];return o.forEach((g,v)=>{const S=new Ch(t,v);u.push(this.Xt(e,S))}),Ye.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(v=>u.add(At(v.getCollectionPath())));const g=[];return u.forEach(v=>{const S=IDBKeyRange.bound([this.userId,v,o],[this.userId,v,o+1],!1,!0);g.push(oa(e).Qt("collectionPathOverlayIndex",S))}),Ye.waitFor(g)}getOverlaysForCollection(e,t,o){const u=Mo(),g=At(t),v=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,Number.POSITIVE_INFINITY],!0);return oa(e).qt("collectionPathOverlayIndex",v).next(S=>{for(const V of S){const W=Pg(this.M,V);u.set(W.getKey(),W)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const g=Mo();let v;const S=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return oa(e).Wt({index:"collectionGroupOverlayIndex",range:S},(V,W,se)=>{const ye=Pg(this.M,W);g.size()<u||ye.largestBatchId===v?(g.set(ye.getKey(),ye),v=ye.largestBatchId):se.done()}).next(()=>g)}Xt(e,t){return oa(e).put(function(o,u,g){const[v,S,V]=Kf(u,g.mutation.key);return{userId:u,collectionPath:S,documentId:V,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Vl(o.Jt,g.mutation)}}(this.M,this.userId,t))}}function oa(i){return Xs(i,"documentOverlays")}class nd{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Kn(e.integerValue));else if("doubleValue"in e){const o=Kn(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),ou(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(vi(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?Hu(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):N()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const u of Object.keys(o))this.re(u,t),this.te(o[u],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const u of o)this.te(u,t)}ae(e,t){this.ne(t,37),Et.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Ng(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function kg(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const g=Ng(255&t[u]);if(o+=g,8!==g)break}return o}(i);return Math.ceil(e/8)}nd.fe=new nd;class Hy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const u=t.codePointAt(0);this._e(240|u>>>18),this._e(128|63&u>>>12),this._e(128|63&u>>>6),this._e(128|63&u)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const u=t.codePointAt(0);this.ge(240|u>>>18),this.ge(128|63&u>>>12),this.ge(128|63&u>>>6),this.ge(128|63&u)}}this.ye()}Te(e){const t=this.Ee(e),o=kg(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Re(e){const t=this.Ee(e),o=kg(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(u){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,u,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Gy{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class zy{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Ud{constructor(){this.De=new Hy,this.Ce=new Gy(this.De),this.xe=new zy(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class $l{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new $l(this.indexId,this.documentKey,this.arrayValue,o)}}function gc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Lg(i.arrayValue,e.arrayValue),0!==t?t:(t=Lg(i.directionalValue,e.directionalValue),0!==t?t:Et.comparator(i.documentKey,e.documentKey)))}function Lg(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class jn{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=pt(e);if(void 0!==t&&!this.Be(t))return!1;const o=bt(e);let u=0,g=0;for(;u<o.length&&this.Be(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Fe){const v=o[u];if(!this.Le(this.Fe,v)||!this.Ue(this.Me[g++],v))return!1;++u}for(;u<o.length;++u){const v=o[u];if(g>=this.Me.length||!this.Ue(this.Me[g++],v))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Fg{constructor(){this.qe=new xh}addToCollectionParentIndex(e,t){return this.qe.add(t),Ye.resolve()}getCollectionParents(e,t){return Ye.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return Ye.resolve()}deleteFieldIndex(e,t){return Ye.resolve()}getDocumentsMatchingTarget(e,t){return Ye.resolve(null)}getFieldIndex(e,t){return Ye.resolve(null)}getFieldIndexes(e,t){return Ye.resolve([])}getNextCollectionGroupToUpdate(e){return Ye.resolve(null)}updateCollectionGroup(e,t,o){return Ye.resolve()}updateIndexEntries(e,t){return Ye.resolve()}}class xh{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new qn(Fn.comparator),g=!u.has(o);return this.index[t]=u.add(o),g}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new qn(Fn.comparator)).toArray()}}const Vd=new Uint8Array(0);class Rh{constructor(e){this.user=e,this.Ge=new xh,this.Ke=new tn(t=>Di(t),(t,o)=>Qs(t,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const g={collectionId:o,parent:At(u)};return gu(e).put(g)}return Ye.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[ci(t),""],!1,!0);return gu(e).qt(u).next(g=>{for(const v of g){if(v.collectionId!==t)break;o.push(gr(v.parent))}return o})}addFieldIndex(e,t){const o=Ph(e),u={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(v=>[v.fieldPath.canonicalString(),v.kind])};var g;return delete u.indexId,o.add(u).next()}deleteFieldIndex(e,t){const o=Ph(e),u=id(e),g=rd(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=rd(e);let u=!0;const g=new Map;return Ye.forEach(this.Qe(t),v=>this.getFieldIndex(e,v).next(S=>{u&&(u=!!S),g.set(v,S)})).next(()=>{if(u){let v=Fr();return Ye.forEach(g,(S,V)=>{var W;T("IndexedDbIndexManager",`Using index ${W=S,`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(rr=>`${rr.fieldPath}:${rr.kind}`).join(",")}`} to execute ${Di(t)}`);const se=function(rr,Os){const Yr=pt(Os);if(void 0===Yr)return null;for(const _i of Gu(rr,Yr.fieldPath))switch(_i.op){case"array-contains-any":return _i.value.arrayValue.values||[];case"array-contains":return[_i.value]}return null}(V,S),ye=function(rr,Os){const Yr=new Map;for(const _i of bt(Os))for(const Ur of Gu(rr,_i.fieldPath))switch(Ur.op){case"==":case"in":Yr.set(_i.fieldPath.canonicalString(),Ur.value);break;case"not-in":case"!=":return Yr.set(_i.fieldPath.canonicalString(),Ur.value),Array.from(Yr.values())}return null}(V,S),je=function(rr,Os){const Yr=[];let _i=!0;for(const cl of bt(Os)){let Wa,kc=!0;for(const Ns of Gu(rr,cl.fieldPath)){let Fi,Td=!0;switch(Ns.op){case"<":case"<=":Fi="nullValue"in(Ur=Ns.value)?fl:"booleanValue"in Ur?{booleanValue:!1}:"integerValue"in Ur||"doubleValue"in Ur?{doubleValue:NaN}:"timestampValue"in Ur?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Ur?{stringValue:""}:"bytesValue"in Ur?{bytesValue:""}:"referenceValue"in Ur?au(Ks.empty(),Et.empty()):"geoPointValue"in Ur?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Ur?{arrayValue:{}}:"mapValue"in Ur?{mapValue:{}}:N();break;case"==":case"in":case">=":Fi=Ns.value;break;case">":Fi=Ns.value,Td=!1;break;case"!=":case"not-in":Fi=fl}x(Wa,Fi)===Fi&&(Wa=Fi,kc=Td)}if(null!==rr.startAt)for(let Ns=0;Ns<rr.orderBy.length;++Ns)if(rr.orderBy[Ns].field.isEqual(cl.fieldPath)){const Fi=rr.startAt.position[Ns];x(Wa,Fi)===Fi&&(Wa=Fi,kc=rr.startAt.inclusive);break}if(void 0===Wa)return null;Yr.push(Wa),_i&&(_i=kc)}var Ur;return new du(Yr,_i)}(V,S),ut=function(rr,Os){const Yr=[];let _i=!0;for(const cl of bt(Os)){let Wa,kc=!0;for(const Ns of Gu(rr,cl.fieldPath)){let Fi,Td=!0;switch(Ns.op){case">=":case">":Fi="nullValue"in(Ur=Ns.value)?{booleanValue:!1}:"booleanValue"in Ur?{doubleValue:NaN}:"integerValue"in Ur||"doubleValue"in Ur?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Ur?{stringValue:""}:"stringValue"in Ur?{bytesValue:""}:"bytesValue"in Ur?au(Ks.empty(),Et.empty()):"referenceValue"in Ur?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Ur?{arrayValue:{}}:"arrayValue"in Ur?{mapValue:{}}:"mapValue"in Ur?qs:N(),Td=!1;break;case"==":case"in":case"<=":Fi=Ns.value;break;case"<":Fi=Ns.value,Td=!1;break;case"!=":case"not-in":Fi=qs}k(Wa,Fi)===Fi&&(Wa=Fi,kc=Td)}if(null!==rr.endAt)for(let Ns=0;Ns<rr.orderBy.length;++Ns)if(rr.orderBy[Ns].field.isEqual(cl.fieldPath)){const Fi=rr.endAt.position[Ns];k(Wa,Fi)===Fi&&(Wa=Fi,kc=rr.endAt.inclusive);break}if(void 0===Wa)return null;Yr.push(Wa),_i&&(_i=kc)}var Ur;return new du(Yr,_i)}(V,S),ft=this.je(S,V,je),Kt=this.je(S,V,ut),An=this.We(S,V,ye),xi=this.ze(S.indexId,se,ft,!!je&&je.inclusive,Kt,!!ut&&ut.inclusive,An);return Ye.forEach(xi,rr=>o.Kt(rr,t.limit).next(Os=>{Os.forEach(Yr=>{v=v.add(new Et(gr(Yr.documentKey)))})}))}).next(()=>v)}return Ye.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,o,u,g,v,S){const V=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=g?g.length:1),W=V/(null!=t?t.length:1),se=[];for(let ye=0;ye<V;++ye){const je=t?this.He(t[ye/W]):Vd,ut=o?this.Je(e,je,o[ye%W],u):this.Ye(e),ft=g?this.Xe(e,je,g[ye%W],v):this.Ye(e+1);se.push(...this.createRange(ut,ft,S.map(Kt=>this.Je(e,je,Kt,!0))))}return se}Je(e,t,o,u){const g=new $l(e,Et.empty(),t,o);return u?g:g.ke()}Xe(e,t,o,u){const g=new $l(e,Et.empty(),t,o);return u?g.ke():g}Ye(e){return new $l(e,Et.empty(),Vd,Vd)}getFieldIndex(e,t){const o=new jn(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(g=>{const v=g.filter(S=>o.$e(S));return v.sort((S,V)=>V.fields.length-S.fields.length),v.length>0?v[0]:null})}Ze(e,t){const o=new Ud;for(const u of bt(e)){const g=t.data.field(u.fieldPath);if(null==g)return null;const v=o.Ne(u.kind);nd.fe.Zt(g,v)}return o.Se()}He(e){const t=new Ud;return nd.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,o){if(null===o)return[];let u=[];u.push(new Ud);let g=0;for(const v of bt(e)){const S=o[g++];for(const V of u)if(this.tn(t,v.fieldPath)&&uu(S))u=this.en(u,v,S);else{const W=V.Ne(v.kind);nd.fe.Zt(S,W)}}return this.nn(u)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}nn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}en(e,t,o){const u=[...e],g=[];for(const v of o.arrayValue.values||[])for(const S of u){const V=new Ud;V.seed(S.Se()),nd.fe.Zt(v,V.Ne(t.kind)),g.push(V)}return g}tn(e,t){return!!e.filters.find(o=>o instanceof Cr&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Ph(e),u=id(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(g=>{const v=[];return Ye.forEach(g,S=>u.get([S.indexId,this.uid]).next(V=>{v.push(function(W,se){const ye=se?new on(se.sequenceNumber,new Rr(pc(se.readTime),new Et(gr(se.documentKey)),se.largestBatchId)):on.empty(),je=W.fields.map(([ut,ft])=>new Ft(bi.fromServerFormat(ut),ft));return new Fe(W.indexId,W.collectionGroup,je,ye)}(S,V))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const g=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==g?g:Cn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Ph(e),g=id(e);return this.sn(e).next(v=>u.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(S=>Ye.forEach(S,V=>{return g.put({indexId:V.indexId,uid:this.user.uid||"",sequenceNumber:v,readTime:jl((je=o).readTime),documentKey:At(je.documentKey.path),largestBatchId:je.largestBatchId});var je})))}updateIndexEntries(e,t){const o=new Map;return Ye.forEach(t,(u,g)=>{const v=o.get(u.collectionGroup);return(v?Ye.resolve(v):this.getFieldIndexes(e,u.collectionGroup)).next(S=>(o.set(u.collectionGroup,S),Ye.forEach(S,V=>this.rn(e,u,V).next(W=>{const se=this.on(g,V);return W.isEqual(se)?Ye.resolve():this.un(e,g,W,se)}))))})}an(e,t,o){return rd(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,documentKey:At(t.key.path)})}cn(e,t,o){return rd(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,At(t.key.path)])}rn(e,t,o){const u=rd(e);let g=new qn(gc);return u.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,At(t.path)])},(v,S)=>{g=g.add(new $l(o.indexId,t,S.arrayValue,S.directionalValue))}).next(()=>g)}on(e,t){let o=new qn(gc);const u=this.Ze(t,e);if(null==u)return o;const g=pt(t);if(null!=g){const v=e.data.field(g.fieldPath);if(uu(v))for(const S of v.arrayValue.values||[])o=o.add(new $l(t.indexId,e.key,this.He(S),u))}else o=o.add(new $l(t.indexId,e.key,Vd,u));return o}un(e,t,o,u){T("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const g=[];return function(v,S,V,W,se){const ye=v.getIterator(),je=S.getIterator();let ut=wr(ye),ft=wr(je);for(;ut||ft;){let Kt=!1,An=!1;if(ut&&ft){const xi=V(ut,ft);xi<0?An=!0:xi>0&&(Kt=!0)}else null!=ut?An=!0:Kt=!0;Kt?(W(ft),ft=wr(je)):An?(se(ut),ut=wr(ye)):(ut=wr(ye),ft=wr(je))}}(o,u,gc,v=>{g.push(this.an(e,t,v))},v=>{g.push(this.cn(e,t,v))}),Ye.waitFor(g)}sn(e){let t=1;return id(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,g)=>{g.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((v,S)=>gc(v,S)).filter((v,S,V)=>!S||0!==gc(v,V[S-1]));const u=[];u.push(e);for(const v of o){const S=gc(v,e),V=gc(v,t);if(0===S)u[0]=e.ke();else if(S>0&&V<0)u.push(v),u.push(v.ke());else if(V>0)break}u.push(t);const g=[];for(let v=0;v<u.length;v+=2)g.push(IDBKeyRange.bound([u[v].indexId,this.uid,u[v].arrayValue,u[v].directionalValue,""],[u[v+1].indexId,this.uid,u[v+1].arrayValue,u[v+1].directionalValue,""]));return g}}function gu(i){return Xs(i,"collectionParents")}function rd(i){return Xs(i,"indexEntries")}function Ph(i){return Xs(i,"indexConfiguration")}function id(i){return Xs(i,"indexState")}const nl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ko{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Ko(e,Ko.DEFAULT_COLLECTION_PERCENTILE,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yf(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),g=[],v=IDBKeyRange.only(t.batchId);let S=0;const V=o.Wt({range:v},(se,ye,je)=>(S++,je.delete()));g.push(V.next(()=>{j(1===S)}));const W=[];for(const se of t.mutations){const ye=hc(e,se.key.path,t.batchId);g.push(u.delete(ye)),W.push(se.key)}return Ye.waitFor(g).next(()=>W)}function sd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw N();e=i.noDocument}return JSON.stringify(e).length}Ko.DEFAULT_COLLECTION_PERCENTILE=10,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ko.DEFAULT=new Ko(41943040,Ko.DEFAULT_COLLECTION_PERCENTILE,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ko.DISABLED=new Ko(-1,0,0);class Ug{constructor(e,t,o,u){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=u,this.hn={}}static Yt(e,t,o,u){j(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new Ug(g,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mc(e).Wt({index:"userMutationsIndex",range:o},(u,g,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const g=_l(e),v=mc(e);return v.add({}).next(S=>{j("number"==typeof S);const V=new Qc(S,t,o,u),W=function(je,ut,ft){const Kt=ft.baseMutations.map(xi=>Vl(je.Jt,xi)),An=ft.mutations.map(xi=>Vl(je.Jt,xi));return{userId:ut,batchId:ft.batchId,localWriteTimeMs:ft.localWriteTime.toMillis(),baseMutations:Kt,mutations:An}}(this.M,this.userId,V),se=[];let ye=new qn((je,ut)=>Cn(je.canonicalString(),ut.canonicalString()));for(const je of u){const ut=hc(this.userId,je.key.path,S);ye=ye.add(je.key.path.popLast()),se.push(v.put(W)),se.push(g.put(ut,fc))}return ye.forEach(je=>{se.push(this.indexManager.addToCollectionParentIndex(e,je))}),e.addOnCommittedListener(()=>{this.hn[S]=V.keys()}),Ye.waitFor(se).next(()=>V)})}lookupMutationBatch(e,t){return mc(e).get(t).next(o=>o?(j(o.userId===this.userId),ed(this.M,o)):null)}ln(e,t){return this.hn[t]?Ye.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.hn[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let g=null;return mc(e).Wt({index:"userMutationsIndex",range:u},(v,S,V)=>{S.userId===this.userId&&(j(S.batchId>=o),g=ed(this.M,S)),V.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return mc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(u,g,v)=>{o=g.batchId,v.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mc(e).qt("userMutationsIndex",t).next(o=>o.map(u=>ed(this.M,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Qu(this.userId,t.path),u=IDBKeyRange.lowerBound(o),g=[];return _l(e).Wt({range:u},(v,S,V)=>{const[W,se,ye]=v,je=gr(se);if(W===this.userId&&t.path.isEqual(je))return mc(e).get(ye).next(ut=>{if(!ut)throw N();j(ut.userId===this.userId),g.push(ed(this.M,ut))});V.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new qn(Cn);const u=[];return t.forEach(g=>{const v=Qu(this.userId,g.path),S=IDBKeyRange.lowerBound(v),V=_l(e).Wt({range:S},(W,se,ye)=>{const[je,ut,ft]=W,Kt=gr(ut);je===this.userId&&g.path.isEqual(Kt)?o=o.add(ft):ye.done()});u.push(V)}),Ye.waitFor(u).next(()=>this.fn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,g=Qu(this.userId,o),v=IDBKeyRange.lowerBound(g);let S=new qn(Cn);return _l(e).Wt({range:v},(V,W,se)=>{const[ye,je,ut]=V,ft=gr(je);ye===this.userId&&o.isPrefixOf(ft)?ft.length===u&&(S=S.add(ut)):se.done()}).next(()=>this.fn(e,S))}fn(e,t){const o=[],u=[];return t.forEach(g=>{u.push(mc(e).get(g).next(v=>{if(null===v)throw N();j(v.userId===this.userId),o.push(ed(this.M,v))}))}),Ye.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Yf(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),Ye.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ye.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return _l(e).Wt({range:o},(g,v,S)=>{if(g[0]===this.userId){const V=gr(g[1]);u.push(V)}else S.done()}).next(()=>{j(0===u.length)})})}containsKey(e,t){return Qf(e,this.userId,t)}_n(e){return Bd(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Qf(i,e,t){const o=Qu(e,t.path),u=o[1],g=IDBKeyRange.lowerBound(o);let v=!1;return _l(i).Wt({range:g,jt:!0},(S,V,W)=>{const[se,ye,je]=S;se===e&&ye===u&&(v=!0),W.done()}).next(()=>v)}function mc(i){return Xs(i,"mutations")}function _l(i){return Xs(i,"documentMutations")}function Bd(i){return Xs(i,"mutationQueues")}class El{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new El(0)}static gn(){return new El(-1)}}class Jf{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const o=new El(t.highestTargetId);return t.highestTargetId=o.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>fn.fromTimestamp(new yi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.yn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.pn(e,u)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(o=>(o.targetCount+=1,this.Tn(t,o),this.pn(e,o))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hl(e).delete(t.targetId)).next(()=>this.yn(e)).next(o=>(j(o.targetCount>0),o.targetCount-=1,this.pn(e,o)))}removeTargets(e,t,o){let u=0;const g=[];return Hl(e).Wt((v,S)=>{const V=td(S);V.sequenceNumber<=t&&null===o.get(V.targetId)&&(u++,g.push(this.removeTargetData(e,V)))}).next(()=>Ye.waitFor(g)).next(()=>u)}forEachTarget(e,t){return Hl(e).Wt((o,u)=>{const g=td(u);t(g)})}yn(e){return Wy(e).get("targetGlobalKey").next(t=>(j(null!==t),t))}pn(e,t){return Wy(e).put("targetGlobalKey",t)}In(e,t){return Hl(e).put(Ah(this.M,t))}Tn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Di(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let g=null;return Hl(e).Wt({range:u,index:"queryTargetsIndex"},(v,S,V)=>{const W=td(S);Qs(t,W.target)&&(g=W,V.done())}).next(()=>g)}addMatchingKeys(e,t,o){const u=[],g=Gl(e);return t.forEach(v=>{const S=At(v.path);u.push(g.put({targetId:o,path:S})),u.push(this.referenceDelegate.addReference(e,o,v))}),Ye.waitFor(u)}removeMatchingKeys(e,t,o){const u=Gl(e);return Ye.forEach(t,g=>{const v=At(g.path);return Ye.waitFor([u.delete([o,v]),this.referenceDelegate.removeReference(e,o,g)])})}removeMatchingKeysForTargetId(e,t){const o=Gl(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=Gl(e);let g=Fr();return u.Wt({range:o,jt:!0},(v,S,V)=>{const W=gr(v[1]),se=new Et(W);g=g.add(se)}).next(()=>g)}containsKey(e,t){const o=At(t.path),u=IDBKeyRange.bound([o],[ci(o)],!1,!0);let g=0;return Gl(e).Wt({index:"documentTargetsIndex",jt:!0,range:u},([v,S],V,W)=>{0!==v&&(g++,W.done())}).next(()=>g>0)}Et(e,t){return Hl(e).get(t).next(o=>o?td(o):null)}}function Hl(i){return Xs(i,"targets")}function Wy(i){return Xs(i,"targetGlobal")}function Gl(i){return Xs(i,"targetDocuments")}function yc(i){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,ue.Z)(function*(i){if(i.code!==X.FAILED_PRECONDITION||i.message!==xg)throw i;T("LocalStore","Unexpectedly lost primary lease")}),Xf.apply(this,arguments)}function Vg([i,e],[t,o]){const u=Cn(i,t);return 0===u?Cn(e,o):u}class Bg{constructor(e){this.En=e,this.buffer=new qn(Vg),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Vg(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class z_{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const o=this.Pn?3e5:6e4;T("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,ue.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){el(u)?T("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield yc(u)}yield t.vn(e)}))}}class Ky{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return Ye.resolve(As.A);const o=new Bg(t);return this.Sn.forEachTarget(e,u=>o.bn(u.sequenceNumber)).next(()=>this.Sn.Cn(e,u=>o.bn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Sn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; disabled"),Ye.resolve(nl)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nl):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let o,u,g,v,S,V,W;const se=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ye=>(ye>this.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ye}`),u=this.params.maximumSequenceNumbersToCollect):u=ye,v=Date.now(),this.nthSequenceNumber(e,u))).next(ye=>(o=ye,S=Date.now(),this.removeTargets(e,o,t))).next(ye=>(g=ye,V=Date.now(),this.removeOrphanedDocuments(e,o))).next(ye=>(W=Date.now(),zs()<=Pe.in.DEBUG&&T("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-se}ms\n\tDetermined least recently used ${u} in `+(S-v)+`ms\n\tRemoved ${g} targets in `+(V-S)+`ms\n\tRemoved ${ye} documents in `+(W-V)+`ms\nTotal Duration: ${W-se}ms`),Ye.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:g,documentsRemoved:ye})))}}class W_{constructor(e,t){this.db=e,this.garbageCollector=new Ky(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}Nn(e){let t=0;return this.Cn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(o,u)=>t(u))}addReference(e,t,o){return jd(e,o)}removeReference(e,t,o){return jd(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return jd(e,t)}Mn(e,t){return function(o,u){let g=!1;return Bd(o).zt(v=>Qf(o,v,u).next(S=>(S&&(g=!0),Ye.resolve(!S)))).next(()=>g)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let g=0;return this.kn(e,(v,S)=>{if(S<=t){const V=this.Mn(e,v).next(W=>{if(!W)return g++,o.getEntry(e,v).next(()=>(o.removeEntry(v,fn.min()),Gl(e).delete([0,At(v.path)])))});u.push(V)}}).next(()=>Ye.waitFor(u)).next(()=>o.apply(e)).next(()=>g)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return jd(e,t)}kn(e,t){const o=Gl(e);let u,g=As.A;return o.Wt({index:"documentTargetsIndex"},([v,S],{path:V,sequenceNumber:W})=>{0===v?(g!==As.A&&t(new Et(gr(u)),g),g=W,u=V):g=As.A}).next(()=>{g!==As.A&&t(new Et(gr(u)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jd(i,e){return Gl(i).put((o=i.currentSequenceNumber,{targetId:0,path:At(e.path),sequenceNumber:o}));var o}class ep{constructor(){this.changes=new tn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Te.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?Ye.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qy{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return od(e).put(o)}removeEntry(e,t,o){return od(e).delete(function(u,g){const v=u.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],Sh(g),v[v.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.On(e,o)))}getEntry(e,t){let o=Te.newInvalidDocument(t);return od(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Oh(t))},(u,g)=>{o=this.Fn(t,g)}).next(()=>o)}$n(e,t){let o={size:0,document:Te.newInvalidDocument(t)};return od(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Oh(t))},(u,g)=>{o={document:this.Fn(t,g),size:sd(g)}}).next(()=>o)}getEntries(e,t){let o=Wo();return this.Bn(e,t,(u,g)=>{const v=this.Fn(u,g);o=o.insert(u,v)}).next(()=>o)}Ln(e,t){let o=Wo(),u=new un(Et.comparator);return this.Bn(e,t,(g,v)=>{const S=this.Fn(g,v);o=o.insert(g,S),u=u.insert(g,sd(v))}).next(()=>({documents:o,Un:u}))}Bn(e,t,o){if(t.isEmpty())return Ye.resolve();let u=new qn(Qy);t.forEach(V=>u=u.add(V));const g=IDBKeyRange.bound(Oh(u.first()),Oh(u.last())),v=u.getIterator();let S=v.getNext();return od(e).Wt({index:"documentKeyIndex",range:g},(V,W,se)=>{const ye=Et.fromSegments([...W.prefixPath,W.collectionGroup,W.documentId]);for(;S&&Qy(S,ye)<0;)o(S,null),S=v.getNext();S&&S.isEqual(ye)&&(o(S,W),S=v.hasNext()?v.getNext():null),S?se.Ut(Oh(S)):se.done()}).next(()=>{for(;S;)o(S,null),S=v.hasNext()?v.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),Sh(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],g=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return od(e).qt(IDBKeyRange.bound(u,g,!0)).next(v=>{let S=Wo();for(const V of v){const W=this.Fn(Et.fromSegments(V.prefixPath.concat(V.collectionGroup,V.documentId)),V);S=S.insert(W.key,W)}return S})}getAllFromCollectionGroup(e,t,o,u){let g=Wo();const v=Yy(t,o),S=Yy(t,Rr.max());return od(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,S,!0)},(V,W,se)=>{const ye=this.Fn(Et.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);g=g.insert(ye.key,ye),g.size===u&&se.done()}).next(()=>g)}newChangeBuffer(e){return new tp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Zy(e).get("remoteDocumentGlobalKey").next(t=>(j(!!t),t))}On(e,t){return Zy(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const o=function Wf(i,e){let t;if(e.document)t=fu(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Et.fromSegments(e.noDocument.path),u=pc(e.noDocument.readTime);t=Te.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return N();{const o=Et.fromSegments(e.unknownDocument.path),u=pc(e.unknownDocument.version);t=Te.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new yi(o[0],o[1]);return fn.fromTimestamp(u)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(fn.min()))return o}return Te.newInvalidDocument(e)}}class tp extends ep{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new tn(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new qn((g,v)=>Cn(g.canonicalString(),v.canonicalString()));return this.changes.forEach((g,v)=>{const S=this.Gn.get(g);if(t.push(this.qn.removeEntry(e,g,S.readTime)),v.isValidDocument()){const V=Xc(this.qn.M,v);u=u.add(g.path.popLast()),o+=sd(V)-S.size,t.push(this.qn.addEntry(e,g,V))}else if(o-=S.size,this.trackRemovals){const V=Xc(this.qn.M,v.convertToNoDocument(fn.min()));t.push(this.qn.addEntry(e,g,V))}}),u.forEach(g=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,g))}),t.push(this.qn.updateMetadata(e,o)),Ye.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:o,Un:u})=>(u.forEach((g,v)=>{this.Gn.set(g,{size:v,readTime:o.get(g).readTime})}),o))}}function Zy(i){return Xs(i,"remoteDocumentGlobal")}function od(i){return Xs(i,"remoteDocumentsV14")}function Oh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Yy(i,e){const t=e.documentKey.path.toArray();return[i,Sh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Qy(i,e){const t=i.path.length-e.path.length;return 0!==t?t:Et.comparator(i,e)}class K_{constructor(e){this.M=e}kt(e,t,o,u){const g=new Xu("createOrUpgrade",t);var S;o<1&&u>=1&&(e.createObjectStore("owner"),(S=e).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sa,{unique:!0}),S.createObjectStore("documentMutations"),Jy(e),function(S){S.createObjectStore("remoteDocuments")}(e));let v=Ye.resolve();return o<3&&u>=3&&(0!==o&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(e),Jy(e)),v=v.next(()=>function(S){const V=S.store("targetGlobal"),W={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fn.min().toTimestamp(),targetCount:0};return V.put("targetGlobalKey",W)}(g))),o<4&&u>=4&&(0!==o&&(v=v.next(()=>function(S,V){return V.store("mutations").qt().next(W=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sa,{unique:!0});const se=V.store("mutations"),ye=W.map(je=>se.put(je));return Ye.waitFor(ye)})}(e,g))),v=v.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(v=v.next(()=>this.Kn(g))),o<6&&u>=6&&(v=v.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(g)))),o<7&&u>=7&&(v=v.next(()=>this.jn(g))),o<8&&u>=8&&(v=v.next(()=>this.Wn(e,g))),o<9&&u>=9&&(v=v.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(v=v.next(()=>this.zn(g))),o<11&&u>=11&&(v=v.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(v=v.next(()=>{!function(S){const V=S.createObjectStore("documentOverlays",{keyPath:Uy});V.createIndex("collectionPathOverlayIndex",Vy,{unique:!1}),V.createIndex("collectionGroupOverlayIndex",Ag,{unique:!1})}(e)})),o<13&&u>=13&&(v=v.next(()=>function(S){const V=S.createObjectStore("remoteDocumentsV14",{keyPath:Od});V.createIndex("documentKeyIndex",Bf),V.createIndex("collectionGroupIndex",Ju)}(e)).next(()=>this.Hn(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(v=v.next(()=>{!function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:jf}).createIndex("sequenceNumberIndex",Ld,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:$f}).createIndex("documentKeyIndex",Fy,{unique:!1})}(e)})),v}Qn(e){let t=0;return e.store("remoteDocuments").Wt((o,u)=>{t+=sd(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Kn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(u=>Ye.forEach(u,g=>{const v=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",v).next(S=>Ye.forEach(S,V=>{j(V.userId===g.userId);const W=ed(this.M,V);return Yf(e,g.userId,W).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const g=[];return o.Wt((v,S)=>{const V=new Fn(v),W=[0,At(V)];g.push(t.get(W).next(se=>se?Ye.resolve():t.put({targetId:0,path:At(V),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Ye.waitFor(g))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:Yc});const o=t.store("collectionParents"),u=new xh,g=v=>{if(u.add(v)){const S=v.lastSegment(),V=v.popLast();return o.put({collectionId:S,parent:At(V)})}};return t.store("remoteDocuments").Wt({jt:!0},(v,S)=>{const V=new Fn(v);return g(V.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([v,S,V],W)=>{const se=gr(S);return g(se.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((o,u)=>{const g=td(u),v=Ah(this.M,g);return t.put(v)})}Hn(e,t){const o=t.store("remoteDocuments"),u=[];return o.Wt((g,v)=>{const S=t.store("remoteDocumentsV14"),V=(W=v,W.document?new Et(Fn.fromString(W.document.name).popFirst(5)):W.noDocument?Et.fromSegments(W.noDocument.path):W.unknownDocument?Et.fromSegments(W.unknownDocument.path):N()).path.toArray();var W;const se={prefixPath:V.slice(0,V.length-2),collectionGroup:V[V.length-2],documentId:V[V.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};u.push(S.put(se))}).next(()=>Ye.waitFor(u))}}function Jy(i){i.createObjectStore("targetDocuments",{keyPath:Nd}).createIndex("documentTargetsIndex",kd,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Zc,{unique:!0}),i.createObjectStore("targetGlobal")}const jg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $g{constructor(e,t,o,u,g,v,S,V,W,se,ye=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Jn=g,this.window=v,this.document=S,this.Yn=W,this.Xn=se,this.Zn=ye,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=je=>Promise.resolve(),!$g.vt())throw new Me(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new W_(this,u),this.cs=t+"main",this.M=new zf(V),this.hs=new pu(this.cs,this.Zn,new K_(this.M)),this.ls=new Jf(this.referenceDelegate,this.M),this.fs=new qy(this.M),this.ds=new $y,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===se&&w("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(X.FAILED_PRECONDITION,jg);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new As(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var o=(0,ue.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ue.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ue.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ru(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(el(e))return T("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return T("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Nh(e).get("owner").next(t=>Ye.resolve(this.bs(t)))}Ps(e){return Ru(e).delete(this.clientId)}Vs(){var e=this;return(0,ue.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Xs(o,"clientMetadata");return u.qt().next(g=>{const v=e.Ss(g,18e5),S=g.filter(V=>-1===v.indexOf(V));return Ye.forEach(S,V=>u.delete(V.clientId)).next(()=>S)})}).catch(()=>[]);if(e._s)for(const o of t)e._s.removeItem(e.Ds(o.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?Ye.resolve(!0):Nh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Me(X.FAILED_PRECONDITION,jg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ru(e).qt().next(o=>void 0===this.Ss(o,5e3).find(u=>{if(this.clientId!==u.clientId){const v=!this.inForeground&&u.inForeground,S=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||v&&S)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&T("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ue.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new Th(t,As.A);return e.As(o).next(()=>e.Ps(o))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(o=>this.vs(o.updateTimeMs,t)&&!this.Cs(o.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Ru(e).qt().next(t=>this.Ss(t,18e5).map(o=>o.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Ug.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new Rh(e)}getDocumentOverlayCache(e){return Zf.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,o){T("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",g=14===(v=this.Zn)?By:13===v?bh:12===v?Mg:11===v?Ih:void N();var v;let S;return this.hs.runTransaction(e,u,g,V=>(S=new Th(V,this.ts?this.ts.next():As.A),"readwrite-primary"===t?this.Ts(S).next(W=>!!W||this.Es(S)).next(W=>{if(!W)throw w(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Me(X.FAILED_PRECONDITION,xg);return o(S)}).next(W=>this.Rs(S).next(()=>W)):this.Fs(S).next(()=>o(S)))).then(V=>(S.raiseOnCommittedEvent(),V))}Fs(e){return Nh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(X.FAILED_PRECONDITION,jg)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nh(e).put("owner",t)}static vt(){return pu.vt()}As(e){const t=Nh(e);return t.get("owner").next(o=>this.bs(o)?(T("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ye.resolve())}vs(e,t){const o=Date.now();return!(e<o-t||e>o&&(w(`Detected an update time that is in the future: ${e} > ${o}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,fe.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const o=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return T("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return w("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){w("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nh(i){return Xs(i,"owner")}function Ru(i){return Xs(i,"clientMetadata")}function $d(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Xy{constructor(e,t,o){this.fs=e,this.$s=t,this.indexManager=o}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Ls(e,t,o))}Ls(e,t,o){return this.fs.getEntry(e,t).next(u=>{for(const g of o)g.applyToLocalView(u);return u})}Us(e,t){e.forEach((o,u)=>{for(const g of t)g.applyToLocalView(u)})}qs(e,t){return this.fs.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.Us(t,o))}Ks(e,t,o){return Et.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.Qs(e,t.path):ic(t)?this.js(e,t,o):this.Ws(e,t,o);var u}Qs(e,t){return this.Bs(e,new Et(t)).next(o=>{let u=Ha();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}js(e,t,o){const u=t.collectionGroup;let g=Ha();return this.indexManager.getCollectionParents(e,u).next(v=>Ye.forEach(v,S=>{const V=(W=t,se=S.child(u),new Fa(se,null,W.explicitOrderBy.slice(),W.filters.slice(),W.limit,W.limitType,W.startAt,W.endAt));var W,se;return this.Ws(e,V,o).next(W=>{W.forEach((se,ye)=>{g=g.insert(se,ye)})})}).next(()=>g))}Ws(e,t,o){let u;return this.fs.getAllFromCollection(e,t.path,o).next(g=>(u=g,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(g=>{for(const v of g)for(const S of v.mutations){const V=S.key;let W=u.get(V);null==W&&(W=Te.newInvalidDocument(V),u=u.insert(V,W)),qr(S,W,v.localWriteTime),W.isFoundDocument()||(u=u.remove(V))}}).next(()=>(u.forEach((g,v)=>{kl(t,v)||(u=u.remove(g))}),u))}}class kh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.zs=o,this.Hs=u}static Js(e,t){let o=Fr(),u=Fr();for(const g of t.docChanges)switch(g.type){case 0:o=o.add(g.doc.key);break;case 1:u=u.add(g.doc.key)}return new kh(e,t.fromCache,o,u)}}class Lh{Ys(e){this.Xs=e}Ks(e,t,o,u){return 0===(g=t).filters.length&&null===g.limit&&null==g.startAt&&null==g.endAt&&(0===g.explicitOrderBy.length||1===g.explicitOrderBy.length&&g.explicitOrderBy[0].field.isKeyField())||o.isEqual(fn.min())?this.Zs(e,t):this.Xs.qs(e,u).next(g=>{const v=this.ti(t,g);return(Cu(t)||Go(t))&&this.ei(t.limitType,v,u,o)?this.Zs(e,t):(zs()<=Pe.in.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Nl(t)),this.Xs.Ks(e,t,Gn(o,-1)).next(S=>(v.forEach(V=>{S=S.insert(V.key,V)}),S)))});var g}ti(e,t){let o=new qn(ac(e));return t.forEach((u,g)=>{kl(e,g)&&(o=o.add(g))}),o}ei(e,t,o,u){if(o.size!==t.size)return!0;const g="F"===e?t.last():t.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(u)>0)}Zs(e,t){return zs()<=Pe.in.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",Nl(t)),this.Xs.Ks(e,t,Rr.min())}}class Hg{constructor(e,t,o,u){this.persistence=e,this.ni=t,this.M=u,this.si=new un(Cn),this.ii=new tn(g=>Di(g),Qs),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(o)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new Xy(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function Fh(i,e,t,o){return new Hg(i,e,t,o)}function Gg(i,e){return rl.apply(this,arguments)}function rl(){return rl=(0,ue.Z)(function*(i,e){const t=Q(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.$s.getAllMutationBatches(o).next(g=>(u=g,t.ui(e),t.$s.getAllMutationBatches(o))).next(g=>{const v=[],S=[];let V=Fr();for(const W of u){v.push(W.batchId);for(const se of W.mutations)V=V.add(se.key)}for(const W of g){S.push(W.batchId);for(const se of W.mutations)V=V.add(se.key)}return t.ai.qs(o,V).next(W=>({ci:W,removedBatchIds:v,addedBatchIds:S}))})})}),rl.apply(this,arguments)}function zg(i,e){const t=Q(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),g=t.oi.newChangeBuffer({trackRemovals:!0});return function(v,S,V,W){const se=V.batch,ye=se.keys();let je=Ye.resolve();return ye.forEach(ut=>{je=je.next(()=>W.getEntry(S,ut)).next(ft=>{const Kt=V.docVersions.get(ut);j(null!==Kt),ft.version.compareTo(Kt)<0&&(se.applyToRemoteDocument(ft,V),ft.isValidDocument()&&(ft.setReadTime(V.commitVersion),W.addEntry(ft)))})}),je.next(()=>v.$s.removeMutationBatch(S,se))}(t,o,e,g).next(()=>g.apply(o)).next(()=>t.$s.performConsistencyCheck(o)).next(()=>t.ai.qs(o,u))})}function Wg(i){const e=Q(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function np(i,e){const t=Q(i),o=e.snapshotVersion;let u=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const v=t.oi.newChangeBuffer({trackRemovals:!0});u=t.si;const S=[];e.targetChanges.forEach((W,se)=>{const ye=u.get(se);if(!ye)return;S.push(t.ls.removeMatchingKeys(g,W.removedDocuments,se).next(()=>t.ls.addMatchingKeys(g,W.addedDocuments,se)));let je=ye.withSequenceNumber(g.currentSequenceNumber);var ut,ft,Kt;e.targetMismatches.has(se)?je=je.withResumeToken(jr.EMPTY_BYTE_STRING,fn.min()).withLastLimboFreeSnapshotVersion(fn.min()):W.resumeToken.approximateByteSize()>0&&(je=je.withResumeToken(W.resumeToken,o)),u=u.insert(se,je),ft=je,Kt=W,(0===(ut=ye).resumeToken.approximateByteSize()||ft.snapshotVersion.toMicroseconds()-ut.snapshotVersion.toMicroseconds()>=3e8||Kt.addedDocuments.size+Kt.modifiedDocuments.size+Kt.removedDocuments.size>0)&&S.push(t.ls.updateTargetData(g,je))});let V=Wo();if(e.documentUpdates.forEach(W=>{e.resolvedLimboDocuments.has(W)&&S.push(t.persistence.referenceDelegate.updateLimboDocument(g,W))}),S.push(Kg(g,v,e.documentUpdates).next(W=>{V=W})),!o.isEqual(fn.min())){const W=t.ls.getLastRemoteSnapshotVersion(g).next(se=>t.ls.setTargetsMetadata(g,g.currentSequenceNumber,o));S.push(W)}return Ye.waitFor(S).next(()=>v.apply(g)).next(()=>t.ai.Gs(g,V)).next(()=>V)}).then(g=>(t.si=u,g))}function Kg(i,e,t){let o=Fr();return t.forEach(u=>o=o.add(u)),e.getEntries(i,o).next(u=>{let g=Wo();return t.forEach((v,S)=>{const V=u.get(v);S.isNoDocument()&&S.version.isEqual(fn.min())?(e.removeEntry(v,S.readTime),g=g.insert(v,S)):!V.isValidDocument()||S.version.compareTo(V.version)>0||0===S.version.compareTo(V.version)&&V.hasPendingWrites?(e.addEntry(S),g=g.insert(v,S)):T("LocalStore","Ignoring outdated watch update for ",v,". Current version:",V.version," Watch version:",S.version)}),g})}function qg(i,e){const t=Q(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(o,e)))}function ad(i,e){const t=Q(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.ls.getTargetData(o,e).next(g=>g?(u=g,Ye.resolve(u)):t.ls.allocateTargetId(o).next(v=>(u=new tl(e,v,0,o.currentSequenceNumber),t.ls.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.si.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.si=t.si.insert(o.targetId,o),t.ii.set(e,o.targetId)),o})}function ud(i,e,t){return vc.apply(this,arguments)}function vc(){return vc=(0,ue.Z)(function*(i,e,t){const o=Q(i),u=o.si.get(e),g=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",g,v=>o.persistence.referenceDelegate.removeTarget(v,u)))}catch(v){if(!el(v))throw v;T("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}o.si=o.si.remove(e),o.ii.delete(u.target)}),vc.apply(this,arguments)}function wl(i,e,t){const o=Q(i);let u=fn.min(),g=Fr();return o.persistence.runTransaction("Execute query","readonly",v=>function(S,V,W){const se=Q(S),ye=se.ii.get(W);return void 0!==ye?Ye.resolve(se.si.get(ye)):se.ls.getTargetData(V,W)}(o,v,mo(e)).next(S=>{if(S)return u=S.lastLimboFreeSnapshotVersion,o.ls.getMatchingKeysForTargetId(v,S.targetId).next(V=>{g=V})}).next(()=>o.ni.Ks(v,e,t?u:fn.min(),t?g:Fr())).next(S=>(ld(o,oc(e),S),{documents:S,hi:g})))}function Uh(i,e){const t=Q(i),o=Q(t.ls),u=t.si.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",g=>o.Et(g,e).next(v=>v?v.target:null))}function _c(i,e){const t=Q(i),o=t.ri.get(e)||fn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.oi.getAllFromCollectionGroup(u,e,Gn(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(ld(t,e,u),u))}function ld(i,e,t){let o=fn.min();t.forEach((u,g)=>{g.readTime.compareTo(o)>0&&(o=g.readTime)}),i.ri.set(e,o)}function rp(){return rp=(0,ue.Z)(function*(i,e,t,o){const u=Q(i);let g=Fr(),v=Wo();for(const W of t){const se=e.li(W.metadata.name);W.document&&(g=g.add(se));const ye=e.fi(W);ye.setReadTime(e.di(W.metadata.readTime)),v=v.insert(se,ye)}const S=u.oi.newChangeBuffer({trackRemovals:!0}),V=yield ad(u,(W=o,mo(Ua(Fn.fromString(`__bundle__/docs/${W}`)))));var W;return u.persistence.runTransaction("Apply bundle documents","readwrite",W=>Kg(W,S,v).next(se=>(S.apply(W),se)).next(se=>u.ls.removeMatchingKeysForTargetId(W,V.targetId).next(()=>u.ls.addMatchingKeys(W,g,V.targetId)).next(()=>u.ai.Gs(W,se)).next(()=>se)))}),rp.apply(this,arguments)}function Zg(i,e){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,ue.Z)(function*(i,e,t=Fr()){const o=yield ad(i,mo(Mh(e.bundledQuery))),u=Q(i);return u.persistence.runTransaction("Save named query","readwrite",g=>{const v=Zr(e.readTime);if(o.snapshotVersion.compareTo(v)>=0)return u.ds.saveNamedQuery(g,e);const S=o.withResumeToken(jr.EMPTY_BYTE_STRING,v);return u.si=u.si.insert(S.targetId,S),u.ls.updateTargetData(g,S).next(()=>u.ls.removeMatchingKeysForTargetId(g,o.targetId)).next(()=>u.ls.addMatchingKeys(g,t,o.targetId)).next(()=>u.ds.saveNamedQuery(g,e))})}),Vh.apply(this,arguments)}class ip{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return Ye.resolve(this._i.get(t))}saveBundleMetadata(e,t){var o;return this._i.set(t.id,{id:(o=t).id,version:o.version,createTime:Zr(o.createTime)}),Ye.resolve()}getNamedQuery(e,t){return Ye.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(o=t).name,query:Mh(o.bundledQuery),readTime:Zr(o.readTime)}),Ye.resolve();var o}}class sp{constructor(){this.overlays=new un(Et.comparator),this.mi=new Map}getOverlay(e,t){return Ye.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((u,g)=>{this.Xt(e,t,g)}),Ye.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.mi.get(o);return void 0!==u&&(u.forEach(g=>this.overlays=this.overlays.remove(g)),this.mi.delete(o)),Ye.resolve()}getOverlaysForCollection(e,t,o){const u=Mo(),g=t.length+1,v=new Et(t.child("")),S=this.overlays.getIteratorFrom(v);for(;S.hasNext();){const V=S.getNext().value,W=V.getKey();if(!t.isPrefixOf(W.path))break;W.path.length===g&&V.largestBatchId>o&&u.set(V.getKey(),V)}return Ye.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let g=new un((W,se)=>W-se);const v=this.overlays.getIterator();for(;v.hasNext();){const W=v.getNext().value;if(W.getKey().getCollectionGroup()===t&&W.largestBatchId>o){let se=g.get(W.largestBatchId);null===se&&(se=Mo(),g=g.insert(W.largestBatchId,se)),se.set(W.getKey(),W)}}const S=Mo(),V=g.getIterator();for(;V.hasNext()&&(V.getNext().value.forEach((W,se)=>S.set(W,se)),!(S.size()>=u)););return Ye.resolve(S)}Xt(e,t,o){if(null===o)return;const u=this.overlays.get(o.key);if(null!==u){const v=this.mi.get(u.largestBatchId).delete(o.key);this.mi.set(u.largestBatchId,v)}this.overlays=this.overlays.insert(o.key,new Ch(t,o));let g=this.mi.get(t);void 0===g&&(g=Fr(),this.mi.set(t,g)),this.mi.set(t,g.add(o.key))}}class Bh{constructor(){this.gi=new qn(cs.yi),this.pi=new qn(cs.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const o=new cs(e,t);this.gi=this.gi.add(o),this.pi=this.pi.add(o)}Ti(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ei(new cs(e,t))}Ai(e,t){e.forEach(o=>this.removeReference(o,t))}Ri(e){const t=new Et(new Fn([])),o=new cs(t,e),u=new cs(t,e+1),g=[];return this.pi.forEachInRange([o,u],v=>{this.Ei(v),g.push(v.key)}),g}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Et(new Fn([])),o=new cs(t,e),u=new cs(t,e+1);let g=Fr();return this.pi.forEachInRange([o,u],v=>{g=g.add(v.key)}),g}containsKey(e){const t=new cs(e,0),o=this.gi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class cs{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Et.comparator(e.key,t.key)||Cn(e.Vi,t.Vi)}static Ii(e,t){return Cn(e.Vi,t.Vi)||Et.comparator(e.key,t.key)}}class ev{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new qn(cs.yi)}checkEmpty(e){return Ye.resolve(0===this.$s.length)}addMutationBatch(e,t,o,u){const g=this.vi;this.vi++;const v=new Qc(g,t,o,u);this.$s.push(v);for(const S of u)this.Si=this.Si.add(new cs(S.key,g)),this.indexManager.addToCollectionParentIndex(e,S.key.path.popLast());return Ye.resolve(v)}lookupMutationBatch(e,t){return Ye.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.Ci(t+1),g=u<0?0:u;return Ye.resolve(this.$s.length>g?this.$s[g]:null)}getHighestUnacknowledgedBatchId(){return Ye.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return Ye.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new cs(t,0),u=new cs(t,Number.POSITIVE_INFINITY),g=[];return this.Si.forEachInRange([o,u],v=>{const S=this.Di(v.Vi);g.push(S)}),Ye.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new qn(Cn);return t.forEach(u=>{const g=new cs(u,0),v=new cs(u,Number.POSITIVE_INFINITY);this.Si.forEachInRange([g,v],S=>{o=o.add(S.Vi)})}),Ye.resolve(this.xi(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let g=o;Et.isDocumentKey(g)||(g=g.child(""));const v=new cs(new Et(g),0);let S=new qn(Cn);return this.Si.forEachWhile(V=>{const W=V.key.path;return!!o.isPrefixOf(W)&&(W.length===u&&(S=S.add(V.Vi)),!0)},v),Ye.resolve(this.xi(S))}xi(e){const t=[];return e.forEach(o=>{const u=this.Di(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){j(0===this.Ni(t.batchId,"removed")),this.$s.shift();let o=this.Si;return Ye.forEach(t.mutations,u=>{const g=new cs(u.key,t.batchId);return o=o.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Si=o})}dn(e){}containsKey(e,t){const o=new cs(t,0),u=this.Si.firstAfterOrEqual(o);return Ye.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return Ye.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class Yg{constructor(e){this.ki=e,this.docs=new un(Et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),g=u?u.size:0,v=this.ki(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:v}),this.size+=v-g,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return Ye.resolve(o?o.document.mutableCopy():Te.newInvalidDocument(t))}getEntries(e,t){let o=Wo();return t.forEach(u=>{const g=this.docs.get(u);o=o.insert(u,g?g.document.mutableCopy():Te.newInvalidDocument(u))}),Ye.resolve(o)}getAllFromCollection(e,t,o){let u=Wo();const g=new Et(t.child("")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:S,value:{document:V}}=v.getNext();if(!t.isPrefixOf(S.path))break;S.path.length>t.length+1||ti(Tn(V),o)<=0||(u=u.insert(V.key,V.mutableCopy()))}return Ye.resolve(u)}getAllFromCollectionGroup(e,t,o,u){N()}Mi(e,t){return Ye.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new q_(this)}getSize(e){return Ye.resolve(this.size)}}class q_ extends ep{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.qn.addEntry(e,u)):this.qn.removeEntry(o)}),Ye.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class Qg{constructor(e){this.persistence=e,this.Oi=new tn(t=>Di(t),Qs),this.lastRemoteSnapshotVersion=fn.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Bh,this.targetCount=0,this.Bi=El.mn()}forEachTarget(e,t){return this.Oi.forEach((o,u)=>t(u)),Ye.resolve()}getLastRemoteSnapshotVersion(e){return Ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ye.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),Ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Fi&&(this.Fi=t),Ye.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new El(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,Ye.resolve()}updateTargetData(e,t){return this.In(t),Ye.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,Ye.resolve()}removeTargets(e,t,o){let u=0;const g=[];return this.Oi.forEach((v,S)=>{S.sequenceNumber<=t&&null===o.get(S.targetId)&&(this.Oi.delete(v),g.push(this.removeMatchingKeysForTargetId(e,S.targetId)),u++)}),Ye.waitFor(g).next(()=>u)}getTargetCount(e){return Ye.resolve(this.targetCount)}getTargetData(e,t){const o=this.Oi.get(t)||null;return Ye.resolve(o)}addMatchingKeys(e,t,o){return this.$i.Ti(t,o),Ye.resolve()}removeMatchingKeys(e,t,o){this.$i.Ai(t,o);const u=this.persistence.referenceDelegate,g=[];return u&&t.forEach(v=>{g.push(u.markPotentiallyOrphaned(e,v))}),Ye.waitFor(g)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),Ye.resolve()}getMatchingKeysForTargetId(e,t){const o=this.$i.Pi(t);return Ye.resolve(o)}containsKey(e,t){return Ye.resolve(this.$i.containsKey(t))}}class Jg{constructor(e,t){this.Li={},this.overlays={},this.ts=new As(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new Qg(this),this.indexManager=new Fg,this.fs=new Yg(o=>this.referenceDelegate.Ui(o)),this.M=new zf(t),this.ds=new ip(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Li[e.toKey()];return o||(o=new ev(t,this.referenceDelegate),this.Li[e.toKey()]=o),o}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,o){T("MemoryPersistence","Starting transaction:",e);const u=new tv(this.ts.next());return this.referenceDelegate.qi(),o(u).next(g=>this.referenceDelegate.Gi(u).next(()=>g)).toPromise().then(g=>(u.raiseOnCommittedEvent(),g))}Ki(e,t){return Ye.or(Object.values(this.Li).map(o=>()=>o.containsKey(e,t)))}}class tv extends Hf{constructor(e){super(),this.currentSequenceNumber=e}}class jh{constructor(e){this.persistence=e,this.Qi=new Bh,this.ji=null}static Wi(e){return new jh(e)}get zi(){if(this.ji)return this.ji;throw N()}addReference(e,t,o){return this.Qi.addReference(o,t),this.zi.delete(o.toString()),Ye.resolve()}removeReference(e,t,o){return this.Qi.removeReference(o,t),this.zi.add(o.toString()),Ye.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),Ye.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(u=>this.zi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(g=>this.zi.add(g.toString()))}).next(()=>o.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ye.forEach(this.zi,o=>{const u=Et.fromPath(o);return this.Hi(e,u).next(g=>{g||t.removeEntry(u,fn.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(o=>{o?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return Ye.or([()=>Ye.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function Xg(i,e){return`firestore_clients_${i}_${e}`}function em(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function aa(i,e){return`firestore_targets_${i}_${e}`}class $h{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static Ji(e,t,o){const u=JSON.parse(o);let g,v="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return v&&u.error&&(v="string"==typeof u.error.message&&"string"==typeof u.error.code,v&&(g=new Me(u.error.code,u.error.message))),v?new $h(e,t,u.state,g):(w("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hd{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Ji(e,t){const o=JSON.parse(t);let u,g="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return g&&o.error&&(g="string"==typeof o.error.message&&"string"==typeof o.error.code,g&&(u=new Me(o.error.code,o.error.message))),g?new Hd(e,o.state,u):(w("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class op{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,g=ls();for(let v=0;u&&v<o.activeTargetIds.length;++v)u=xl(o.activeTargetIds[v]),g=g.add(o.activeTargetIds[v]);return u?new op(e,g):(w("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class tm{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new tm(t.clientId,t.onlineState):(w("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Hh{constructor(){this.activeTargetIds=ls()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nm{constructor(e,t,o,u,g){this.window=e,this.Jn=t,this.persistenceKey=o,this.tr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new un(Cn),this.started=!1,this.ir=[];const v=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.rr=Xg(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Hh),this.ar=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ue.Z)(function*(){const t=yield e.syncEngine.Os();for(const u of t){if(u===e.tr)continue;const g=e.getItem(Xg(e.persistenceKey,u));if(g){const v=op.Ji(u,g);v&&(e.sr=e.sr.insert(v.clientId,v))}}e._r();const o=e.storage.getItem(e.lr);if(o){const u=e.wr(o);u&&e.mr(u)}for(const u of e.ir)e.nr(u);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,o){this.yr(e,t,o),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(aa(this.persistenceKey,e));if(o){const u=Hd.Ji(e,o);u&&(t=u.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(aa(this.persistenceKey,e))}updateQueryState(e,t,o){this.Tr(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.pr(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return T("SharedClientState","READ",e,t),t}setItem(e,t){T("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){T("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(T("SharedClientState","EVENT",o.key,o.newValue),o.key===this.rr)return void w("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ue.Z)(function*(){if(t.started){if(null!==o.key)if(t.ar.test(o.key)){if(null==o.newValue){const u=t.Rr(o.key);return t.br(u,null)}{const u=t.Pr(o.key,o.newValue);if(u)return t.br(u.clientId,u)}}else if(t.cr.test(o.key)){if(null!==o.newValue){const u=t.Vr(o.key,o.newValue);if(u)return t.vr(u)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const u=t.Sr(o.key,o.newValue);if(u)return t.Dr(u)}}else if(o.key===t.lr){if(null!==o.newValue){const u=t.wr(o.newValue);if(u)return t.mr(u)}}else if(o.key===t.ur){const u=function(g){let v=As.A;if(null!=g)try{const S=JSON.parse(g);j("number"==typeof S),v=S}catch(S){w("SharedClientState","Failed to read sequence number from WebStorage",S)}return v}(o.newValue);u!==As.A&&t.sequenceNumberHandler(u)}else if(o.key===t.dr){const u=t.Cr(o.newValue);yield Promise.all(u.map(g=>t.syncEngine.Nr(g)))}}else t.ir.push(o)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,o){const u=new $h(this.currentUser,e,t,o),g=em(this.persistenceKey,this.currentUser,e);this.setItem(g,u.Yi())}pr(e){const t=em(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,o){const u=aa(this.persistenceKey,e),g=new Hd(e,t,o);this.setItem(u,g.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const o=this.Rr(e);return op.Ji(o,t)}Vr(e,t){const o=this.cr.exec(e),u=Number(o[1]);return $h.Ji(new Br(void 0!==o[2]?o[2]:null),u,t)}Sr(e,t){const o=this.hr.exec(e),u=Number(o[1]);return Hd.Ji(u,t)}wr(e){return tm.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ue.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);T("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const o=t?this.sr.insert(e,t):this.sr.remove(e),u=this.gr(this.sr),g=this.gr(o),v=[],S=[];return g.forEach(V=>{u.has(V)||v.push(V)}),u.forEach(V=>{g.has(V)||S.push(V)}),this.syncEngine.Or(v,S).then(()=>{this.sr=o})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=ls();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class rm{constructor(){this.Fr=new Hh,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,o){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Hh,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ap{Br(e){}shutdown(){}}class up{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const nv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class rv{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class iv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,o,u,g){const v=this.oo(e,t);T("RestConnection","Sending: ",v,o);const S={};return this.uo(S,u,g),this.ao(e,v,S,o).then(V=>(T("RestConnection","Received: ",V),V),V=>{throw E("RestConnection",`${e} failed with error: `,V,"url: ",v,"request:",o),V})}co(e,t,o,u,g){return this.ro(e,t,o,u,g)}uo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+os,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,g)=>e[g]=u),o&&o.headers.forEach((u,g)=>e[g]=u)}oo(e,t){return`${this.so}/v1/${t}:${nv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,o,u){return new Promise((g,v)=>{const S=new Do;S.listenOnce($s.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case Uo.NO_ERROR:const W=S.getResponseJson();T("Connection","XHR received:",JSON.stringify(W)),g(W);break;case Uo.TIMEOUT:T("Connection",'RPC "'+e+'" timed out'),v(new Me(X.DEADLINE_EXCEEDED,"Request time out"));break;case Uo.HTTP_ERROR:const se=S.getStatus();if(T("Connection",'RPC "'+e+'" failed with status:',se,"response text:",S.getResponseText()),se>0){const ye=S.getResponseJson().error;if(ye&&ye.status&&ye.message){const je=function(ut){const ft=ut.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ft)>=0?ft:X.UNKNOWN}(ye.status);v(new Me(je,ye.message))}else v(new Me(X.UNKNOWN,"Server responded with status "+S.getStatus()))}else v(new Me(X.UNAVAILABLE,"Connection failed."));break;default:N()}}finally{T("Connection",'RPC "'+e+'" completed.')}});const V=JSON.stringify(u);S.send(t,"POST",V,o,15)})}ho(e,t,o){const u=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=Pa(),v=Er(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(S.xmlHttpFactory=new dl({})),this.uo(S.initMessageHeaders,t,o),(0,fe.uI)()||(0,fe.b$)()||(0,fe.d)()||(0,fe.w1)()||(0,fe.Mn)()||(0,fe.ru)()||(S.httpHeadersOverwriteParam="$httpHeaders");const V=u.join("");T("Connection","Creating WebChannel: "+V,S);const W=g.createWebChannel(V,S);let se=!1,ye=!1;const je=new rv({jr:ft=>{ye?T("Connection","Not sending because WebChannel is closed:",ft):(se||(T("Connection","Opening WebChannel transport."),W.open(),se=!0),T("Connection","WebChannel sending:",ft),W.send(ft))},Wr:()=>W.close()}),ut=(ft,Kt,An)=>{ft.listen(Kt,xi=>{try{An(xi)}catch(rr){setTimeout(()=>{throw rr},0)}})};return ut(W,qi.EventType.OPEN,()=>{ye||T("Connection","WebChannel transport opened.")}),ut(W,qi.EventType.CLOSE,()=>{ye||(ye=!0,T("Connection","WebChannel transport closed"),je.eo())}),ut(W,qi.EventType.ERROR,ft=>{ye||(ye=!0,E("Connection","WebChannel transport errored:",ft),je.eo(new Me(X.UNAVAILABLE,"The operation could not be completed")))}),ut(W,qi.EventType.MESSAGE,ft=>{var Kt;if(!ye){const An=ft.data[0];j(!!An);const xi=An,rr=xi.error||(null===(Kt=xi[0])||void 0===Kt?void 0:Kt.error);if(rr){T("Connection","WebChannel received error:",rr);const Os=rr.status;let Yr=function(Ur){const cl=hi[Ur];if(void 0!==cl)return rn(cl)}(Os),_i=rr.message;void 0===Yr&&(Yr=X.INTERNAL,_i="Unknown error status: "+Os+" with message "+rr.message),ye=!0,je.eo(new Me(Yr,_i)),W.close()}else T("Connection","WebChannel received:",An),je.no(An)}}),ut(v,Hs.STAT_EVENT,ft=>{ft.stat===Gs.PROXY?T("Connection","Detected buffering proxy"):ft.stat===Gs.NOPROXY&&T("Connection","Detected no buffering proxy")}),setTimeout(()=>{je.Zr()},0),je}}function lp(){return"undefined"!=typeof window?window:null}function Gh(){return"undefined"!=typeof document?document:null}function dd(i){return new Ad(i,!0)}class cp{constructor(e,t,o=1e3,u=1.5,g=6e4){this.Jn=e,this.timerId=t,this.lo=o,this.fo=u,this._o=g,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),o=Math.max(0,Date.now()-this.yo),u=Math.max(0,t-o);u>0&&T("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,u,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class im{constructor(e,t,o,u,g,v,S,V){this.Jn=e,this.Ao=o,this.Ro=u,this.bo=g,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=S,this.listener=V,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new cp(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ue.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ue.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var o=this;return(0,ue.Z)(function*(){o.Fo(),o.$o(),o.So.cancel(),o.Po++,4!==e?o.So.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(w(t.toString()),w("Using maximum backoff delay to prevent overloading the backend."),o.So.po()):t&&t.code===X.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Bo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Po===t&&this.Uo(o,u)},o=>{e(()=>{const u=new Me(X.UNKNOWN,"Fetching auth token failed: "+o.message);return this.qo(u)})})}Uo(e,t){const o=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{o(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(u=>{o(()=>this.qo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}xo(){var e=this;this.state=5,this.So.Io((0,ue.Z)(function*(){e.state=0,e.start()}))}qo(e){return T("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sm extends im{constructor(e,t,o,u,g,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,v),this.M=g}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function xd(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(V=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===V?1:"REMOVE"===V?2:"CURRENT"===V?3:"RESET"===V?4:N(),u=e.targetChange.targetIds||[],g=function(V,W){return V.N?(j(void 0===W||"string"==typeof W),jr.fromBase64String(W||"")):(j(void 0===W||W instanceof Uint8Array),jr.fromUint8Array(W||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,S=v&&function(V){const W=void 0===V.code?X.UNKNOWN:rn(V.code);return new Me(W,V.message||"")}(v);t=new Yu(o,u,g,S||null)}else if("documentChange"in e){const o=e.documentChange,u=hu(i,o.document.name),g=Zr(o.document.updateTime),v=new G({mapValue:{fields:o.document.fields}}),S=Te.newFoundDocument(u,g,v);t=new Ll(o.targetIds||[],o.removedTargetIds||[],S.key,S)}else if("documentDelete"in e){const o=e.documentDelete,u=hu(i,o.document),g=o.readTime?Zr(o.readTime):fn.min(),v=Te.newNoDocument(u,g);t=new Ll([],o.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const o=e.documentRemove,u=hu(i,o.document);t=new Ll([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return N();{const o=e.filter,g=new Au(o.count||0);t=new Js(o.targetId,g)}}var V;return t}(this.M,e),o=function(u){if(!("targetChange"in u))return fn.min();const g=u.targetChange;return g.targetIds&&g.targetIds.length?fn.min():g.readTime?Zr(g.readTime):fn.min()}(e);return this.listener.Ko(t,o)}Qo(e){const t={};t.database=vl(this.M),t.addTarget=function(u,g){let v;const S=g.target;return v=Ao(S)?{documents:_h(u,S)}:{query:Eh(u,S)},v.targetId=g.targetId,g.resumeToken.approximateByteSize()>0?v.resumeToken=Md(u,g.resumeToken):g.snapshotVersion.compareTo(fn.min())>0&&(v.readTime=Ul(u,g.snapshotVersion.toTimestamp())),v}(this.M,e);const o=function Vf(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return N()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Oo(t)}jo(e){const t={};t.database=vl(this.M),t.removeTarget=e,this.Oo(t)}}class om extends im{constructor(e,t,o,u,g,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,v),this.M=g,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(j(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function Pd(i,e){return i&&i.length>0?(j(void 0!==e),i.map(t=>function(o,u){let g=Zr(o.updateTime?o.updateTime:u);return g.isEqual(fn.min())&&(g=Zr(u)),new $t(g,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Zr(e.commitTime);return this.listener.Jo(o,t)}return j(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=vl(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Vl(this.M,o))};this.Oo(t)}}class sv extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=u,this.Zo=!1}tu(){if(this.Zo)throw new Me(X.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,g])=>this.bo.ro(e,t,o,u,g)).catch(u=>{throw"FirebaseError"===u.name?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Me(X.UNKNOWN,u.toString())})}co(e,t,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,g])=>this.bo.co(e,t,o,u,g)).catch(u=>{throw"FirebaseError"===u.name?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Me(X.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class il{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(w(t),this.su=!1):T("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class dp{constructor(e,t,o,u,g){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=g,this.du.Br(S=>{o.enqueueAndForget((0,ue.Z)(function*(){var V;Pu(v)&&(T("RemoteStore","Restarting streams for network reachability change."),yield(V=(0,ue.Z)(function*(W){const se=Q(W);se.lu.add(4),yield zd(se),se._u.set("Unknown"),se.lu.delete(4),yield Gd(se)}),function(W){return V.apply(this,arguments)})(v))}))}),this._u=new il(o,u)}}function Gd(i){return hp.apply(this,arguments)}function hp(){return hp=(0,ue.Z)(function*(i){if(Pu(i))for(const e of i.fu)yield e(!0)}),hp.apply(this,arguments)}function zd(i){return zh.apply(this,arguments)}function zh(){return zh=(0,ue.Z)(function*(i){for(const e of i.fu)yield e(!1)}),zh.apply(this,arguments)}function Wh(i,e){const t=Q(i);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),gp(t)?pp(t):Ic(t).Co()&&fp(t,e))}function Wd(i,e){const t=Q(i),o=Ic(t);t.hu.delete(e),o.Co()&&Kh(t,e),0===t.hu.size&&(o.Co()?o.ko():Pu(t)&&t._u.set("Unknown"))}function fp(i,e){i.wu.Z(e.targetId),Ic(i).Qo(e)}function Kh(i,e){i.wu.Z(e),Ic(i).jo(e)}function pp(i){i.wu=new ia({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.hu.get(e)||null}),Ic(i).start(),i._u.iu()}function gp(i){return Pu(i)&&!Ic(i).Do()&&i.hu.size>0}function Pu(i){return 0===Q(i).lu.size}function qh(i){i.wu=void 0}function ov(i){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,ue.Z)(function*(i){i.hu.forEach((e,t)=>{fp(i,e)})}),Kd.apply(this,arguments)}function mp(i,e){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,ue.Z)(function*(i,e){qh(i),gp(i)?(i._u.uu(e),pp(i)):i._u.set("Unknown")}),Zh.apply(this,arguments)}function av(i,e,t){return yp.apply(this,arguments)}function yp(){return yp=(0,ue.Z)(function*(i,e,t){if(i._u.set("Online"),e instanceof Yu&&2===e.state&&e.cause)try{yield(o=(0,ue.Z)(function*(u,g){const v=g.cause;for(const S of g.targetIds)u.hu.has(S)&&(yield u.remoteSyncer.rejectListen(S,v),u.hu.delete(S),u.wu.removeTarget(S))}),function(u,g){return o.apply(this,arguments)})(i,e)}catch(o){T("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield hd(i,o)}else if(e instanceof Ll?i.wu.ut(e):e instanceof Js?i.wu._t(e):i.wu.ht(e),!t.isEqual(fn.min()))try{const o=yield Wg(i.localStore);t.compareTo(o)>=0&&(yield function(u,g){const v=u.wu.yt(g);return v.targetChanges.forEach((S,V)=>{if(S.resumeToken.approximateByteSize()>0){const W=u.hu.get(V);W&&u.hu.set(V,W.withResumeToken(S.resumeToken,g))}}),v.targetMismatches.forEach(S=>{const V=u.hu.get(S);if(!V)return;u.hu.set(S,V.withResumeToken(jr.EMPTY_BYTE_STRING,V.snapshotVersion)),Kh(u,S);const W=new tl(V.target,S,1,V.sequenceNumber);fp(u,W)}),u.remoteSyncer.applyRemoteEvent(v)}(i,t))}catch(o){T("RemoteStore","Failed to raise snapshot:",o),yield hd(i,o)}var o}),yp.apply(this,arguments)}function hd(i,e,t){return am.apply(this,arguments)}function am(){return am=(0,ue.Z)(function*(i,e,t){if(!el(e))throw e;i.lu.add(1),yield zd(i),i._u.set("Offline"),t||(t=()=>Wg(i.localStore)),i.asyncQueue.enqueueRetryable((0,ue.Z)(function*(){T("RemoteStore","Retrying IndexedDB access"),yield t(),i.lu.delete(1),yield Gd(i)}))}),am.apply(this,arguments)}function um(i,e){return e().catch(t=>hd(i,t,e))}function Ec(i){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,ue.Z)(function*(i){const e=Q(i),t=zl(e);let o=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;lm(e);)try{const u=yield qg(e.localStore,o);if(null===u){0===e.cu.length&&t.ko();break}o=u.batchId,cm(e,u)}catch(u){yield hd(e,u)}vp(e)&&sl(e)}),Yh.apply(this,arguments)}function lm(i){return Pu(i)&&i.cu.length<10}function cm(i,e){i.cu.push(e);const t=zl(i);t.Co()&&t.zo&&t.Ho(e.mutations)}function vp(i){return Pu(i)&&!zl(i).Do()&&i.cu.length>0}function sl(i){zl(i).start()}function Qh(i){return _p.apply(this,arguments)}function _p(){return _p=(0,ue.Z)(function*(i){zl(i).Xo()}),_p.apply(this,arguments)}function uv(i){return dm.apply(this,arguments)}function dm(){return dm=(0,ue.Z)(function*(i){const e=zl(i);for(const t of i.cu)e.Ho(t.mutations)}),dm.apply(this,arguments)}function Ep(i,e,t){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,ue.Z)(function*(i,e,t){const o=i.cu.shift(),u=Jc.from(o,e,t);yield um(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Ec(i)}),Jh.apply(this,arguments)}function wp(i,e){return wc.apply(this,arguments)}function wc(){return wc=(0,ue.Z)(function*(i,e){var t;e&&zl(i).zo&&(yield(t=(0,ue.Z)(function*(o,u){if(Wt(g=u.code)&&g!==X.ABORTED){const v=o.cu.shift();zl(o).No(),yield um(o,()=>o.remoteSyncer.rejectFailedWrite(v.batchId,u)),yield Ec(o)}var g}),function(o,u){return t.apply(this,arguments)})(i,e)),vp(i)&&sl(i)}),wc.apply(this,arguments)}function hm(i,e){return qd.apply(this,arguments)}function qd(){return qd=(0,ue.Z)(function*(i,e){const t=Q(i);t.asyncQueue.verifyOperationInProgress(),T("RemoteStore","RemoteStore received new credentials");const o=Pu(t);t.lu.add(3),yield zd(t),o&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Gd(t)}),qd.apply(this,arguments)}function Xh(i,e){return ef.apply(this,arguments)}function ef(){return ef=(0,ue.Z)(function*(i,e){const t=Q(i);e?(t.lu.delete(2),yield Gd(t)):e||(t.lu.add(2),yield zd(t),t._u.set("Unknown"))}),ef.apply(this,arguments)}function Ic(i){return i.mu||(i.mu=function(e,t,o){const u=Q(e);return u.tu(),new sm(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{zr:ov.bind(null,i),Jr:mp.bind(null,i),Ko:av.bind(null,i)}),i.fu.push(function(){var e=(0,ue.Z)(function*(t){t?(i.mu.No(),gp(i)?pp(i):i._u.set("Unknown")):(yield i.mu.stop(),qh(i))});return function(t){return e.apply(this,arguments)}}())),i.mu}function zl(i){return i.gu||(i.gu=function(e,t,o){const u=Q(e);return u.tu(),new om(t,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{zr:Qh.bind(null,i),Jr:wp.bind(null,i),Yo:uv.bind(null,i),Jo:Ep.bind(null,i)}),i.fu.push(function(){var e=(0,ue.Z)(function*(t){t?(i.gu.No(),yield Ec(i)):(yield i.gu.stop(),i.cu.length>0&&(T("RemoteStore",`Stopping write stream with ${i.cu.length} pending writes`),i.cu=[]))});return function(t){return e.apply(this,arguments)}}())),i.gu}class Zd{constructor(e,t,o,u,g){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=g,this.deferred=new Jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,o,u,g){const v=Date.now()+o,S=new Zd(e,t,v,u,g);return S.start(o),S}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fd(i,e){if(w("AsyncQueue",`${e}: ${i}`),el(i))return new Me(X.UNAVAILABLE,`${e}: ${i}`);throw i}class pd{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Et.comparator(t.key,o.key):(t,o)=>Et.comparator(t.key,o.key),this.keyedMap=Ha(),this.sortedSet=new un(this.comparator)}static emptySet(e){return new pd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,g=o.getNext().key;if(!u.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new pd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Ip{constructor(){this.yu=new un(Et.comparator)}track(e){const t=e.doc.key,o=this.yu.get(t);o?0!==e.type&&3===o.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==o.type?this.yu=this.yu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.yu=this.yu.remove(t):1===e.type&&2===o.type?this.yu=this.yu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):N():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Ou{constructor(e,t,o,u,g,v,S,V){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=g,this.fromCache=v,this.syncStateChanged=S,this.excludesMetadataChanges=V}static fromInitialDocuments(e,t,o,u){const g=[];return t.forEach(v=>{g.push({type:0,doc:v})}),new Ou(e,t,pd.emptySet(t),g,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class fm{constructor(){this.Iu=void 0,this.listeners=[]}}class lv{constructor(){this.queries=new tn(e=>Ol(e),Wu),this.onlineState="Unknown",this.Tu=new Set}}function bp(i,e){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,ue.Z)(function*(i,e){const t=Q(i),o=e.query;let u=!1,g=t.queries.get(o);if(g||(u=!0,g=new fm),u)try{g.Iu=yield t.onListen(o)}catch(v){const S=fd(v,`Initialization of query '${Nl(e.query)}' failed`);return void e.onError(S)}t.queries.set(o,g),g.listeners.push(e),e.Eu(t.onlineState),g.Iu&&e.Au(g.Iu)&&Ga(t)}),Wl.apply(this,arguments)}function Dp(i,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,ue.Z)(function*(i,e){const t=Q(i),o=e.query;let u=!1;const g=t.queries.get(o);if(g){const v=g.listeners.indexOf(e);v>=0&&(g.listeners.splice(v,1),u=0===g.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Tp.apply(this,arguments)}function cv(i,e){const t=Q(i);let o=!1;for(const u of e){const v=t.queries.get(u.query);if(v){for(const S of v.listeners)S.Au(u)&&(o=!0);v.Iu=u}}o&&Ga(t)}function dv(i,e,t){const o=Q(i),u=o.queries.get(e);if(u)for(const g of u.listeners)g.onError(t);o.queries.delete(e)}function Ga(i){i.Tu.forEach(e=>{e.next()})}class Yd{constructor(e,t,o){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=o||{}}Au(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Ou(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Ou.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class pm{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Cp{constructor(e){this.M=e}li(e){return hu(this.M,e)}fi(e){return e.metadata.exists?fu(this.M,e.document,!1):Te.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Zr(e)}}class gm{constructor(e,t,o){this.xu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Sp(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Fn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,o=new Cp(this.M);for(const u of e)if(u.metadata.queries){const g=o.li(u.metadata.name);for(const v of u.metadata.queries){const S=(t.get(v)||Fr()).add(g);t.set(v,S)}}return t}complete(){var e=this;return(0,ue.Z)(function*(){const t=yield function cd(i,e,t,o){return rp.apply(this,arguments)}(e.localStore,new Cp(e.M),e.documents,e.xu.id),o=e.ku(e.documents);for(const u of e.queries)yield Zg(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function Sp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class mm{constructor(e){this.key=e}}class ym{constructor(e){this.key=e}}class vm{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Fr(),this.mutatedKeys=Fr(),this.Lu=ac(e),this.Uu=new pd(this.Lu)}get qu(){return this.Fu}Gu(e,t){const o=t?t.Ku:new Ip,u=t?t.Uu:this.Uu;let g=t?t.mutatedKeys:this.mutatedKeys,v=u,S=!1;const V=Cu(this.query)&&u.size===this.query.limit?u.last():null,W=Go(this.query)&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((se,ye)=>{const je=u.get(se),ut=kl(this.query,ye)?ye:null,ft=!!je&&this.mutatedKeys.has(je.key),Kt=!!ut&&(ut.hasLocalMutations||this.mutatedKeys.has(ut.key)&&ut.hasCommittedMutations);let An=!1;je&&ut?je.data.isEqual(ut.data)?ft!==Kt&&(o.track({type:3,doc:ut}),An=!0):this.Qu(je,ut)||(o.track({type:2,doc:ut}),An=!0,(V&&this.Lu(ut,V)>0||W&&this.Lu(ut,W)<0)&&(S=!0)):!je&&ut?(o.track({type:0,doc:ut}),An=!0):je&&!ut&&(o.track({type:1,doc:je}),An=!0,(V||W)&&(S=!0)),An&&(ut?(v=v.add(ut),g=Kt?g.add(se):g.delete(se)):(v=v.delete(se),g=g.delete(se)))}),Cu(this.query)||Go(this.query))for(;v.size>this.query.limit;){const se=Cu(this.query)?v.last():v.first();v=v.delete(se.key),g=g.delete(se.key),o.track({type:1,doc:se})}return{Uu:v,Ku:o,ei:S,mutatedKeys:g}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const g=e.Ku.pu();g.sort((W,se)=>function(ye,je){const ut=ft=>{switch(ft){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return N()}};return ut(ye)-ut(je)}(W.type,se.type)||this.Lu(W.doc,se.doc)),this.ju(o);const v=t?this.Wu():[],S=0===this.Bu.size&&this.current?1:0,V=S!==this.$u;return this.$u=S,0!==g.length||V?{snapshot:new Ou(this.query,e.Uu,u,g,e.mutatedKeys,0===S,V,!1),zu:v}:{zu:v}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new Ip,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Fr(),this.Uu.forEach(o=>{this.Hu(o.key)&&(this.Bu=this.Bu.add(o.key))});const t=[];return e.forEach(o=>{this.Bu.has(o)||t.push(new ym(o))}),this.Bu.forEach(o=>{e.has(o)||t.push(new mm(o))}),t}Ju(e){this.Fu=e.hi,this.Bu=Fr();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Ou.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class hv{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class _m{constructor(e){this.key=e,this.Xu=!1}}class Z_{constructor(e,t,o,u,g,v){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=g,this.maxConcurrentLimboResolutions=v,this.Zu={},this.ta=new tn(S=>Ol(S),Wu),this.ea=new Map,this.na=new Set,this.sa=new un(Et.comparator),this.ia=new Map,this.ra=new Bh,this.oa={},this.ua=new Map,this.aa=El.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function Em(i,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,ue.Z)(function*(i,e){const t=Ql(i);let o,u;const g=t.ta.get(e);if(g)o=g.targetId,t.sharedClientState.addLocalQueryTarget(o),u=g.view.Yu();else{const v=yield ad(t.localStore,mo(e));t.isPrimaryClient&&Wh(t.remoteStore,v);const S=t.sharedClientState.addLocalQueryTarget(v.targetId);o=v.targetId,u=yield Mp(t,e,o,"current"===S)}return u}),Ap.apply(this,arguments)}function Mp(i,e,t,o){return wm.apply(this,arguments)}function wm(){return wm=(0,ue.Z)(function*(i,e,t,o){i.ha=(se,ye,je)=>{return(ut=(0,ue.Z)(function*(ft,Kt,An,xi){let rr=Kt.view.Gu(An);rr.ei&&(rr=yield wl(ft.localStore,Kt.query,!1).then(({documents:_i})=>Kt.view.Gu(_i,rr)));const Os=xi&&xi.targetChanges.get(Kt.targetId),Yr=Kt.view.applyChanges(rr,ft.isPrimaryClient,Os);return Op(ft,Kt.targetId,Yr.zu),Yr.snapshot}),function(ft,Kt,An,xi){return ut.apply(this,arguments)})(i,se,ye,je);var ut};const u=yield wl(i.localStore,e,!0),g=new vm(e,u.hi),v=g.Gu(u.documents),S=Zu.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),V=g.applyChanges(v,i.isPrimaryClient,S);Op(i,t,V.zu);const W=new hv(e,t,g);return i.ta.set(e,W),i.ea.has(t)?i.ea.get(t).push(e):i.ea.set(t,[e]),V.snapshot}),wm.apply(this,arguments)}function Y_(i,e){return Qd.apply(this,arguments)}function Qd(){return Qd=(0,ue.Z)(function*(i,e){const t=Q(i),o=t.ta.get(e),u=t.ea.get(o.targetId);if(u.length>1)return t.ea.set(o.targetId,u.filter(g=>!Wu(g,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield ud(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Wd(t.remoteStore,o.targetId),Kl(t,o.targetId)}).catch(yc))):(Kl(t,o.targetId),yield ud(t.localStore,o.targetId,!0))}),Qd.apply(this,arguments)}function tf(){return tf=(0,ue.Z)(function*(i,e,t){const o=Jl(i);try{const u=yield function(g,v){const S=Q(g),V=yi.now(),W=v.reduce((ye,je)=>ye.add(je.key),Fr());let se;return S.persistence.runTransaction("Locally write mutations","readwrite",ye=>S.ai.qs(ye,W).next(je=>{se=je;const ut=[];for(const ft of v){const Kt=Ms(ft,se.get(ft.key));null!=Kt&&ut.push(new di(ft.key,Kt,ie(Kt.value.mapValue),dt.exists(!0)))}return S.$s.addMutationBatch(ye,V,ut,v)})).then(ye=>(ye.applyToLocalDocumentSet(se),{batchId:ye.batchId,changes:se}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(g,v,S){let V=g.oa[g.currentUser.toKey()];V||(V=new un(Cn)),V=V.insert(v,S),g.oa[g.currentUser.toKey()]=V}(o,u.batchId,t),yield Il(o,u.changes),yield Ec(o.remoteStore)}catch(u){const g=fd(u,"Failed to persist write");t.reject(g)}}),tf.apply(this,arguments)}function xp(i,e){return Im.apply(this,arguments)}function Im(){return Im=(0,ue.Z)(function*(i,e){const t=Q(i);try{const o=yield np(t.localStore,e);e.targetChanges.forEach((u,g)=>{const v=t.ia.get(g);v&&(j(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?v.Xu=!0:u.modifiedDocuments.size>0?j(v.Xu):u.removedDocuments.size>0&&(j(v.Xu),v.Xu=!1))}),yield Il(t,o,e)}catch(o){yield yc(o)}}),Im.apply(this,arguments)}function mu(i,e,t){const o=Q(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ta.forEach((g,v)=>{const S=v.view.Eu(e);S.snapshot&&u.push(S.snapshot)}),function(g,v){const S=Q(g);S.onlineState=v;let V=!1;S.queries.forEach((W,se)=>{for(const ye of se.listeners)ye.Eu(v)&&(V=!0)}),V&&Ga(S)}(o.eventManager,e),u.length&&o.Zu.Ko(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Q_(i,e,t){return bm.apply(this,arguments)}function bm(){return bm=(0,ue.Z)(function*(i,e,t){const o=Q(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.ia.get(e),g=u&&u.key;if(g){let v=new un(Et.comparator);v=v.insert(g,Te.newNoDocument(g,fn.min()));const S=Fr().add(g),V=new xu(fn.min(),new Map,new qn(Cn),v,S);yield xp(o,V),o.sa=o.sa.remove(g),o.ia.delete(e),Np(o)}else yield ud(o.localStore,e,!1).then(()=>Kl(o,e,t)).catch(yc)}),bm.apply(this,arguments)}function Dm(i,e){return nf.apply(this,arguments)}function nf(){return nf=(0,ue.Z)(function*(i,e){const t=Q(i),o=e.batch.batchId;try{const u=yield zg(t.localStore,e);Pp(t,o,null),Jd(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Il(t,u)}catch(u){yield yc(u)}}),nf.apply(this,arguments)}function Tm(i,e,t){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,ue.Z)(function*(i,e,t){const o=Q(i);try{const u=yield function(g,v){const S=Q(g);return S.persistence.runTransaction("Reject batch","readwrite-primary",V=>{let W;return S.$s.lookupMutationBatch(V,v).next(se=>(j(null!==se),W=se.keys(),S.$s.removeMutationBatch(V,se))).next(()=>S.$s.performConsistencyCheck(V)).next(()=>S.ai.qs(V,W))})}(o.localStore,e);Pp(o,e,t),Jd(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Il(o,u)}catch(u){yield yc(u)}}),Rp.apply(this,arguments)}function rf(){return rf=(0,ue.Z)(function*(i,e){const t=Q(i);Pu(t.remoteStore)||T("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const v=Q(g);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>v.$s.getHighestUnacknowledgedBatchId(S))}(t.localStore);if(-1===o)return void e.resolve();const u=t.ua.get(o)||[];u.push(e),t.ua.set(o,u)}catch(o){const u=fd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),rf.apply(this,arguments)}function Jd(i,e){(i.ua.get(e)||[]).forEach(t=>{t.resolve()}),i.ua.delete(e)}function Pp(i,e,t){const o=Q(i);let u=o.oa[o.currentUser.toKey()];if(u){const g=u.get(e);g&&(t?g.reject(t):g.resolve(),u=u.remove(e)),o.oa[o.currentUser.toKey()]=u}}function Kl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ea.get(e))i.ta.delete(o),t&&i.Zu.la(o,t);i.ea.delete(e),i.isPrimaryClient&&i.ra.Ri(e).forEach(o=>{i.ra.containsKey(o)||Cm(i,o)})}function Cm(i,e){i.na.delete(e.path.canonicalString());const t=i.sa.get(e);null!==t&&(Wd(i.remoteStore,t),i.sa=i.sa.remove(e),i.ia.delete(t),Np(i))}function Op(i,e,t){for(const o of t)o instanceof mm?(i.ra.addReference(o.key,e),pv(i,o)):o instanceof ym?(T("SyncEngine","Document no longer in limbo: "+o.key),i.ra.removeReference(o.key,e),i.ra.containsKey(o.key)||Cm(i,o.key)):N()}function pv(i,e){const t=e.key,o=t.path.canonicalString();i.sa.get(t)||i.na.has(o)||(T("SyncEngine","New document in limbo: "+t),i.na.add(o),Np(i))}function Np(i){for(;i.na.size>0&&i.sa.size<i.maxConcurrentLimboResolutions;){const e=i.na.values().next().value;i.na.delete(e);const t=new Et(Fn.fromString(e)),o=i.aa.next();i.ia.set(o,new _m(t)),i.sa=i.sa.insert(t,o),Wh(i.remoteStore,new tl(mo(Ua(t.path)),o,2,As.A))}}function Il(i,e,t){return kp.apply(this,arguments)}function kp(){return kp=(0,ue.Z)(function*(i,e,t){const o=Q(i),u=[],g=[],v=[];var S;o.ta.isEmpty()||(o.ta.forEach((S,V)=>{v.push(o.ha(V,e,t).then(W=>{if(W){o.isPrimaryClient&&o.sharedClientState.updateQueryState(V.targetId,W.fromCache?"not-current":"current"),u.push(W);const se=kh.Js(V.targetId,W);g.push(se)}}))}),yield Promise.all(v),o.Zu.Ko(u),yield(S=(0,ue.Z)(function*(V,W){const se=Q(V);try{yield se.persistence.runTransaction("notifyLocalViewChanges","readwrite",ye=>Ye.forEach(W,je=>Ye.forEach(je.zs,ut=>se.persistence.referenceDelegate.addReference(ye,je.targetId,ut)).next(()=>Ye.forEach(je.Hs,ut=>se.persistence.referenceDelegate.removeReference(ye,je.targetId,ut)))))}catch(ye){if(!el(ye))throw ye;T("LocalStore","Failed to update sequence numbers: "+ye)}for(const ye of W){const je=ye.targetId;if(!ye.fromCache){const ut=se.si.get(je),Kt=ut.withLastLimboFreeSnapshotVersion(ut.snapshotVersion);se.si=se.si.insert(je,Kt)}}}),function(V,W){return S.apply(this,arguments)})(o.localStore,g))}),kp.apply(this,arguments)}function sf(i,e){return ql.apply(this,arguments)}function ql(){return ql=(0,ue.Z)(function*(i,e){const t=Q(i);if(!t.currentUser.isEqual(e)){T("SyncEngine","User change. New user:",e.toKey());const o=yield Gg(t.localStore,e);t.currentUser=e,(u=t).ua.forEach(v=>{v.forEach(S=>{S.reject(new Me(X.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.ua.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Il(t,o.ci)}var u}),ql.apply(this,arguments)}function gv(i,e){const t=Q(i),o=t.ia.get(e);if(o&&o.Xu)return Fr().add(o.key);{let u=Fr();const g=t.ea.get(e);if(!g)return u;for(const v of g){const S=t.ta.get(v);u=u.unionWith(S.view.qu)}return u}}function Xd(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,ue.Z)(function*(i,e){const t=Q(i),o=yield wl(t.localStore,e.query,!0),u=e.view.Ju(o);return t.isPrimaryClient&&Op(t,e.targetId,u.zu),u}),Lp.apply(this,arguments)}function mv(i,e){return eh.apply(this,arguments)}function eh(){return eh=(0,ue.Z)(function*(i,e){const t=Q(i);return _c(t.localStore,e).then(o=>Il(t,o))}),eh.apply(this,arguments)}function ol(i,e,t,o){return bc.apply(this,arguments)}function bc(){return bc=(0,ue.Z)(function*(i,e,t,o){const u=Q(i),g=yield function(v,S){const V=Q(v),W=Q(V.$s);return V.persistence.runTransaction("Lookup mutation documents","readonly",se=>W.ln(se,S).next(ye=>ye?V.ai.qs(se,ye):Ye.resolve(null)))}(u.localStore,e);var S;null!==g?("pending"===t?yield Ec(u.remoteStore):"acknowledged"===t||"rejected"===t?(Pp(u,e,o||null),Jd(u,e),S=e,Q(Q(u.localStore).$s).dn(S)):N(),yield Il(u,g)):T("SyncEngine","Cannot apply mutation batch with id: "+e)}),bc.apply(this,arguments)}function bl(){return bl=(0,ue.Z)(function*(i,e){const t=Q(i);if(Ql(t),Jl(t),!0===e&&!0!==t.ca){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield th(t,o.toArray());t.ca=!0,yield Xh(t.remoteStore,!0);for(const g of u)Wh(t.remoteStore,g)}else if(!1===e&&!1!==t.ca){const o=[];let u=Promise.resolve();t.ea.forEach((g,v)=>{t.sharedClientState.isLocalQueryTarget(v)?o.push(v):u=u.then(()=>(Kl(t,v),ud(t.localStore,v,!0))),Wd(t.remoteStore,v)}),yield u,yield th(t,o),function(g){const v=Q(g);v.ia.forEach((S,V)=>{Wd(v.remoteStore,V)}),v.ra.bi(),v.ia=new Map,v.sa=new un(Et.comparator)}(t),t.ca=!1,yield Xh(t.remoteStore,!1)}}),bl.apply(this,arguments)}function th(i,e,t){return Ia.apply(this,arguments)}function Ia(){return Ia=(0,ue.Z)(function*(i,e,t){const o=Q(i),u=[],g=[];for(const v of e){let S;const V=o.ea.get(v);if(V&&0!==V.length){S=yield ad(o.localStore,mo(V[0]));for(const W of V){const se=o.ta.get(W),ye=yield Xd(o,se);ye.snapshot&&g.push(ye.snapshot)}}else{const W=yield Uh(o.localStore,v);S=yield ad(o.localStore,W),yield Mp(o,af(W),v,!1)}u.push(S)}return o.Zu.Ko(g),u}),Ia.apply(this,arguments)}function af(i){return Bc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function gd(i){const e=Q(i);return Q(Q(e.localStore).persistence).Os()}function md(i,e,t,o){return Zl.apply(this,arguments)}function Zl(){return Zl=(0,ue.Z)(function*(i,e,t,o){const u=Q(i);if(u.ca)return void T("SyncEngine","Ignoring unexpected query state notification.");const g=u.ea.get(e);if(g&&g.length>0)switch(t){case"current":case"not-current":{const v=yield _c(u.localStore,oc(g[0])),S=xu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Il(u,v,S);break}case"rejected":yield ud(u.localStore,e,!0),Kl(u,e,o);break;default:N()}}),Zl.apply(this,arguments)}function yd(i,e,t){return Yl.apply(this,arguments)}function Yl(){return Yl=(0,ue.Z)(function*(i,e,t){const o=Ql(i);if(o.ca){for(const u of e){if(o.ea.has(u)){T("SyncEngine","Adding an already active target "+u);continue}const g=yield Uh(o.localStore,u),v=yield ad(o.localStore,g);yield Mp(o,af(g),v.targetId,!1),Wh(o.remoteStore,v)}for(const u of t)o.ea.has(u)&&(yield ud(o.localStore,u,!1).then(()=>{Wd(o.remoteStore,u),Kl(o,u)}).catch(yc))}}),Yl.apply(this,arguments)}function Ql(i){const e=Q(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=xp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q_.bind(null,e),e.Zu.Ko=cv.bind(null,e.eventManager),e.Zu.la=dv.bind(null,e.eventManager),e}function Jl(i){const e=Q(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tm.bind(null,e),e}class Dc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ue.Z)(function*(){t.M=dd(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return Fh(this.persistence,new Lh,e.initialUser,this.M)}_a(e){return new Jg(jh.Wi,this.M)}da(e){return new rm}terminate(){var e=this;return(0,ue.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Fp extends Dc{constructor(e,t,o){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,ue.Z)(function*(){yield t().call(o,e),yield o.ga.initialize(o,e),yield Jl(o.ga.syncEngine),yield Ec(o.ga.remoteStore),yield o.persistence.Is(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ma(e){return Fh(this.persistence,new Lh,e.initialUser,this.M)}wa(e){return new z_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=$d(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Ko.withCacheSize(this.cacheSizeBytes):Ko.DEFAULT;return new $g(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,lp(),Gh(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new rm}}class Sm extends Fp{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,ue.Z)(function*(){yield t().call(o,e);const u=o.ga.syncEngine;o.sharedClientState instanceof nm&&(o.sharedClientState.syncEngine={kr:ol.bind(null,u),Mr:md.bind(null,u),Or:yd.bind(null,u),Os:gd.bind(null,u),Nr:mv.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Is(function(){var g=(0,ue.Z)(function*(v){yield function qo(i,e){return bl.apply(this,arguments)}(o.ga.syncEngine,v),o.gcScheduler&&(v&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):v||o.gcScheduler.stop())});return function(v){return g.apply(this,arguments)}}())})()}da(e){const t=lp();if(!nm.vt(t))throw new Me(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=$d(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nm(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class uf{initialize(e,t){var o=this;return(0,ue.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>mu(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=sf.bind(null,o.syncEngine),yield Xh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new lv}createDatastore(e){const t=dd(e.databaseInfo.databaseId),o=new iv(e.databaseInfo);return new sv(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,g=S=>mu(this.syncEngine,S,0),v=up.vt()?new up:new ap,new dp(t,o,u,g,v);var t,o,u,g,v}createSyncEngine(e,t){return function(o,u,g,v,S,V,W){const se=new Z_(o,u,g,v,S,V);return W&&(se.ca=!0),se}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ue.Z)(function*(t){const o=Q(t);T("RemoteStore","RemoteStore shutting down."),o.lu.add(5),yield zd(o),o.du.shutdown(),o._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Up(i,e=10240){let t=0;return{read:()=>(0,ue.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,ue.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class nh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Am{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Jt,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(o=>{o&&o.Cu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ue.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ue.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const o=e.Ta.decode(t),u=Number(o);isNaN(u)&&e.Ra(`length string (${o}) is not valid number`);const g=yield e.ba(u);return new pm(JSON.parse(g),t.length+u)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ue.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,ue.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const o=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Mm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ue.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,ue.Z)(function*(g,v){const S=Q(g),V=vl(S.M)+"/documents",W={documents:v.map(ut=>yl(S.M,ut))},se=yield S.co("BatchGetDocuments",V,W),ye=new Map;se.forEach(ut=>{const ft=function dc(i,e){return"found"in e?function(t,o){j(!!o.found);const u=hu(t,o.found.name),g=Zr(o.found.updateTime),v=new G({mapValue:{fields:o.found.fields}});return Te.newFoundDocument(u,g,v)}(i,e):"missing"in e?function(t,o){j(!!o.missing),j(!!o.readTime);const u=hu(t,o.missing),g=Zr(o.readTime);return Te.newNoDocument(u,g)}(i,e):N()}(S.M,ut);ye.set(ft.key.toString(),ft)});const je=[];return v.forEach(ut=>{const ft=ye.get(ut.toString());j(!!ft),je.push(ft)}),je}),function(g,v){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new ja(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ue.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const g=Et.fromPath(u);e.mutations.push(new Su(g,e.precondition(g)))}),yield(o=(0,ue.Z)(function*(u,g){const v=Q(u),S=vl(v.M)+"/documents",V={writes:g.map(W=>Vl(v.M,W))};yield v.ro("Commit",S,V)}),function(u,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw N();t=fn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new Me(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?dt.updateTime(t):dt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fn.min()))throw new Me(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dt.updateTime(t)}return dt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xm{constructor(e,t,o,u){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=u,this.va=5,this.So=new cp(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ue.Z)(function*(){const t=new Mm(e.datastore),o=e.Da(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(g=>{e.Ca(g)}))}).catch(u=>{e.Ca(u)})}))}Da(e){try{const t=this.updateFunction(e);return!jo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Wt(t)}return!1}}class Rm{constructor(e,t,o,u){var g=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=Br.UNAUTHENTICATED,this.clientId=Oa.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var v=(0,ue.Z)(function*(S){T("FirestoreClient","Received user=",S.uid),yield g.authCredentialListener(S),g.user=S});return function(S){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(o,v=>(T("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,ue.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(X.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=fd(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Pm(i,e){return lf.apply(this,arguments)}function lf(){return lf=(0,ue.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,ue.Z)(function*(g){o.isEqual(g)||(yield Gg(e.localStore,g),o=g)});return function(g){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),lf.apply(this,arguments)}function Om(i,e){return cf.apply(this,arguments)}function cf(){return cf=(0,ue.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield df(i);T("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>hm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,g)=>hm(e.remoteStore,g)),i.onlineComponents=e}),cf.apply(this,arguments)}function df(i){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,ue.Z)(function*(i){return i.offlineComponents||(T("FirestoreClient","Using default OfflineComponentProvider"),yield Pm(i,new Dc)),i.offlineComponents}),Vp.apply(this,arguments)}function hf(i){return ff.apply(this,arguments)}function ff(){return ff=(0,ue.Z)(function*(i){return i.onlineComponents||(T("FirestoreClient","Using default OnlineComponentProvider"),yield Om(i,new uf)),i.onlineComponents}),ff.apply(this,arguments)}function Nm(i){return df(i).then(e=>e.persistence)}function pf(i){return df(i).then(e=>e.localStore)}function km(i){return hf(i).then(e=>e.remoteStore)}function Bp(i){return hf(i).then(e=>e.syncEngine)}function rh(i){return jp.apply(this,arguments)}function jp(){return jp=(0,ue.Z)(function*(i){const e=yield hf(i),t=e.eventManager;return t.onListen=Em.bind(null,e.syncEngine),t.onUnlisten=Y_.bind(null,e.syncEngine),t}),jp.apply(this,arguments)}function vv(i,e,t={}){const o=new Jt;return i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(u,g,v,S,V){const W=new nh({next:ye=>{g.enqueueAndForget(()=>Dp(u,se));const je=ye.docs.has(v);!je&&ye.fromCache?V.reject(new Me(X.UNAVAILABLE,"Failed to get document because the client is offline.")):je&&ye.fromCache&&S&&"server"===S.source?V.reject(new Me(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):V.resolve(ye)},error:ye=>V.reject(ye)}),se=new Yd(Ua(v.path),W,{includeMetadataChanges:!0,Du:!0});return bp(u,se)}(yield rh(i),i.asyncQueue,e,t,o)})),o.promise}function _v(i,e,t={}){const o=new Jt;return i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(u,g,v,S,V){const W=new nh({next:ye=>{g.enqueueAndForget(()=>Dp(u,se)),ye.fromCache&&"server"===S.source?V.reject(new Me(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):V.resolve(ye)},error:ye=>V.reject(ye)}),se=new Yd(v,W,{includeMetadataChanges:!0,Du:!0});return bp(u,se)}(yield rh(i),i.asyncQueue,e,t,o)})),o.promise}const Tc=new Map;function Gp(i,e,t){if(!t)throw new Me(X.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function zp(i,e,t,o){if(!0===e&&!0===o)throw new Me(X.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Fm(i){if(!Et.isDocumentKey(i))throw new Me(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Wp(i){if(Et.isDocumentKey(i))throw new Me(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Cc(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":N()}function mr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Me(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cc(i);throw new Me(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Kp(i,e){if(e<=0)throw new Me(X.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Um{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,zp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ih{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Um({}),this._settingsFrozen=!1,e instanceof Ks?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Me(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ks(u.options.projectId)}(e))}get app(){if(!this._app)throw new Me(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Um(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cr;switch(t.type){case"gapi":const o=t.client;return j(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new ya(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Tc.get(e);t&&(T("ComponentProvider","Removing Datastore"),Tc.delete(e),t.terminate())}(this),Promise.resolve()}}class Si{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Si(this.firestore,e,this._key)}}class Zo{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Zo(this.firestore,e,this._query)}}class Nu extends Zo{constructor(e,t,o){super(e,t,Ua(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Si(this.firestore,null,new Et(e))}withConverter(e){return new Nu(this.firestore,e,this._path)}}function Vm(i,e,...t){if(i=(0,fe.m9)(i),Gp("collection","path",e),i instanceof ih){const o=Fn.fromString(e,...t);return Wp(o),new Nu(i,null,o)}{if(!(i instanceof Si||i instanceof Nu))throw new Me(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Fn.fromString(e,...t));return Wp(o),new Nu(i.firestore,null,o)}}function sh(i,e,...t){if(i=(0,fe.m9)(i),1===arguments.length&&(e=Oa.R()),Gp("doc","path",e),i instanceof ih){const o=Fn.fromString(e,...t);return Fm(o),new Si(i,null,new Et(o))}{if(!(i instanceof Si||i instanceof Nu))throw new Me(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Fn.fromString(e,...t));return Fm(o),new Si(i.firestore,i instanceof Nu?i.converter:null,new Et(o))}}function gf(i,e){return i=(0,fe.m9)(i),e=(0,fe.m9)(e),(i instanceof Si||i instanceof Nu)&&(e instanceof Si||e instanceof Nu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function bv(i,e){return i=(0,fe.m9)(i),e=(0,fe.m9)(e),i instanceof Zo&&e instanceof Zo&&i.firestore===e.firestore&&Wu(i._query,e._query)&&i.converter===e.converter}class qp{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new cp(this,"async_queue_retry"),this.Ua=()=>{const t=Gh();t&&T("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Gh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Gh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Jt;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ue.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!el(t))throw t;T("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(o=>{throw this.Fa=o,this.$a=!1,w("INTERNAL UNHANDLED ERROR: ",function(g){let v=g.message||"";return g.stack&&(v=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),v}(o)),o}).then(o=>(this.$a=!1,o))));return this.Na=t,t}enqueueAfterDelay(e,t,o){this.qa(),this.La.indexOf(e)>-1&&(t=0);const u=Zd.createAndSchedule(this,e,t,o,g=>this.Qa(g));return this.Oa.push(u),u}qa(){this.Fa&&N()}verifyOperationInProgress(){}ja(){var e=this;return(0,ue.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function Zp(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class t0{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ai extends ih{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new qp,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ah(this),this._firestoreClient.terminate()}}function Ps(i){return i._firestoreClient||ah(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function ah(i){var e;const t=i._freezeSettings(),o=(g=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ws(i._databaseId,g,i._persistenceKey,(S=t).host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,S.useFetchStreams));var g,S;i._firestoreClient=new Rm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Dv(i,e,t){const o=new Jt;return i.asyncQueue.enqueue((0,ue.Z)(function*(){try{yield Pm(i,t),yield Om(i,e),o.resolve()}catch(u){if(!("FirebaseError"===(g=u).name?g.code===X.FAILED_PRECONDITION||g.code===X.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u)}var g})).then(()=>o.promise)}function Jp(i){if(i._initialized||i._terminated)throw new Me(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ku{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class al{constructor(e){this._byteString=e}static fromBase64String(e){try{return new al(jr.fromBase64String(e))}catch(t){throw new Me(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new al(jr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xl{constructor(e){this._methodName=e}}class uh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Cn(this._lat,e._lat)||Cn(this._long,e._long)}}const Xp=/^__.*__$/;class zm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new di(e,this.data,this.fieldMask,t,this.fieldTransforms):new xs(e,this.data,t,this.fieldTransforms)}}class Wm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new di(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Km(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw N()}}class _f{constructor(e,t,o,u,g,v){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=u,void 0===g&&this.Ja(),this.fieldTransforms=g||[],this.fieldMask=v||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new _f(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Xa({path:o,tc:!1});return u.ec(e),u}nc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Xa({path:o,tc:!1});return u.Ja(),u}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return ch(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(Km(this.Ya)&&Xp.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class qm{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||dd(e)}uc(e,t,o,u=!1){return new _f({Ya:e,methodName:t,oc:o,path:bi.emptyPath(),tc:!1,rc:u},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Dl(i){const e=i._freezeSettings(),t=dd(i._databaseId);return new qm(i._databaseId,!!e.ignoreUndefinedProperties,t)}function lh(i,e,t,o,u,g={}){const v=i.uc(g.merge||g.mergeFields?2:0,e,t,u);ds("Data must be an object, but it was:",v,o);const S=tg(o,v);let V,W;if(g.merge)V=new pr(v.fieldMask),W=v.fieldTransforms;else if(g.mergeFields){const se=[];for(const ye of g.mergeFields){const je=If(e,ye,t);if(!v.contains(je))throw new Me(X.INVALID_ARGUMENT,`Field '${je}' is specified in your field mask but missing from your input data.`);ty(se,je)||se.push(je)}V=new pr(se),W=v.fieldTransforms.filter(ye=>V.covers(ye.field))}else V=null,W=v.fieldTransforms;return new zm(new G(S),V,W)}class _d extends Xl{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}function eg(i,e,t){return new _f({Ya:3,oc:e.settings.oc,methodName:i._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Ef extends Xl{_toFieldTransform(e){return new Ut(e.path,new _)}isEqual(e){return e instanceof Ef}}class Zm extends Xl{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=eg(this,e,!0),o=this.ac.map(g=>Sc(g,t)),u=new M(o);return new Ut(e.path,u)}isEqual(e){return this===e}}class Ym extends Xl{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=eg(this,e,!0),o=this.ac.map(g=>Sc(g,t)),u=new Y(o);return new Ut(e.path,u)}isEqual(e){return this===e}}class Qm extends Xl{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new me(e.M,Ku(e.M,this.cc));return new Ut(e.path,t)}isEqual(e){return this===e}}function wf(i,e,t,o){const u=i.uc(1,e,t);ds("Data must be an object, but it was:",u,o);const g=[],v=G.empty();va(o,(V,W)=>{const se=bf(e,V,t);W=(0,fe.m9)(W);const ye=u.nc(se);if(W instanceof _d)g.push(se);else{const je=Sc(W,ye);null!=je&&(g.push(se),v.set(se,je))}});const S=new pr(g);return new Wm(v,S,u.fieldTransforms)}function Jm(i,e,t,o,u,g){const v=i.uc(1,e,t),S=[If(e,o,t)],V=[u];if(g.length%2!=0)throw new Me(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let je=0;je<g.length;je+=2)S.push(If(e,g[je])),V.push(g[je+1]);const W=[],se=G.empty();for(let je=S.length-1;je>=0;--je)if(!ty(W,S[je])){const ut=S[je];let ft=V[je];ft=(0,fe.m9)(ft);const Kt=v.nc(ut);if(ft instanceof _d)W.push(ut);else{const An=Sc(ft,Kt);null!=An&&(W.push(ut),se.set(ut,An))}}const ye=new pr(W);return new Wm(se,ye,v.fieldTransforms)}function Xm(i,e,t,o=!1){return Sc(t,i.uc(o?4:3,e))}function Sc(i,e){if(ey(i=(0,fe.m9)(i)))return ds("Unsupported field value:",e,i),tg(i,e);if(i instanceof Xl)return function(t,o){if(!Km(o.Ya))throw o.ic(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ic(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,o){const u=[];let g=0;for(const v of t){let S=Sc(v,o.sc(g));null==S&&(S={nullValue:"NULL_VALUE"}),u.push(S),g++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,fe.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ku(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=yi.fromDate(t);return{timestampValue:Ul(o.M,u)}}if(t instanceof yi){const u=new yi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ul(o.M,u)}}if(t instanceof uh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof al)return{bytesValue:Md(o.M,t._byteString)};if(t instanceof Si){const u=o.databaseId,g=t.firestore._databaseId;if(!g.isEqual(u))throw o.ic(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Wc(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ic(`Unsupported field value: ${Cc(t)}`)}(i,e)}function tg(i,e){const t={};return bu(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(i,(o,u)=>{const g=Sc(u,e.Za(o));null!=g&&(t[o]=g)}),{mapValue:{fields:t}}}function ey(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof yi||i instanceof uh||i instanceof al||i instanceof Si||i instanceof Xl)}function ds(i,e,t){if(!ey(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Cc(t);throw e.ic("an object"===o?i+" a custom object":i+" "+o)}var o}function If(i,e,t){if((e=(0,fe.m9)(e))instanceof ku)return e._internalPath;if("string"==typeof e)return bf(i,e);throw ch("Field path arguments must be of type string or ",i,!1,void 0,t)}const Av=new RegExp("[~\\*/\\[\\]]");function bf(i,e,t){if(e.search(Av)>=0)throw ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ku(...e.split("."))._internalPath}catch(o){throw ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function ch(i,e,t,o,u){const g=o&&!o.isEmpty(),v=void 0!==u;let S=`Function ${e}() called with invalid data`;t&&(S+=" (via `toFirestore()`)"),S+=". ";let V="";return(g||v)&&(V+=" (found",g&&(V+=` in field ${o}`),v&&(V+=` in document ${u}`),V+=")"),new Me(X.INVALID_ARGUMENT,S+i+V)}function ty(i,e){return i.some(t=>t.isEqual(e))}class Ed{constructor(e,t,o,u,g){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new Si(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ny(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ny extends Ed{data(){return super.data()}}function Tl(i,e){return"string"==typeof e?bf(i,e):e instanceof ku?e._internalPath:e._delegate._internalPath}class Ac{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cl extends Ed{constructor(e,t,o,u,g,v){super(e,t,o,u,v),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Tl("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class wd extends Cl{data(e={}){return super.data(e)}}class ec{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new Ac(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new wd(this._firestore,this._userDataWriter,o.key,o,new Ac(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let g=0;return o._snapshot.docChanges.map(v=>({type:"added",doc:new wd(o._firestore,o._userDataWriter,v.doc.key,v.doc,new Ac(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:g++}))}{let g=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(v=>u||3!==v.type).map(v=>{const S=new wd(o._firestore,o._userDataWriter,v.doc.key,v.doc,new Ac(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter);let V=-1,W=-1;return 0!==v.type&&(V=g.indexOf(v.doc.key),g=g.delete(v.doc.key)),1!==v.type&&(g=g.add(v.doc),W=g.indexOf(v.doc.key)),{type:ry(v.type),doc:S,oldIndex:V,newIndex:W}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ry(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return N()}}function Mv(i,e){return i instanceof Cl&&e instanceof Cl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ec&&e instanceof ec&&i._firestore===e._firestore&&bv(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function ng(i){if(Go(i)&&0===i.explicitOrderBy.length)throw new Me(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mc{}function xo(i,...e){for(const t of e)i=t._apply(i);return i}class xv extends Mc{constructor(e,t,o){super(),this.hc=e,this.lc=t,this.fc=o,this.type="where"}_apply(e){const t=Dl(e.firestore),o=function(u,g,v,S,V,W,se){let ye;if(V.isKeyField()){if("array-contains"===W||"array-contains-any"===W)throw new Me(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${W}' queries on documentId().`);if("in"===W||"not-in"===W){ly(se,W);const ut=[];for(const ft of se)ut.push(ig(S,u,ft));ye={arrayValue:{values:ut}}}else ye=ig(S,u,se)}else"in"!==W&&"not-in"!==W&&"array-contains-any"!==W||ly(se,W),ye=Xm(v,"where",se,"in"===W||"not-in"===W);const je=Cr.create(V,W,ye);return function(ut,ft){if(ft.S()){const An=gl(ut);if(null!==An&&!An.isEqual(ft.field))throw new Me(X.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${An.toString()}' and '${ft.field.toString()}'`);const xi=Pl(ut);null!==xi&&sg(0,ft.field,xi)}const Kt=function(An,xi){for(const rr of An.filters)if(xi.indexOf(rr.op)>=0)return rr.op;return null}(ut,function(An){switch(An){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ft.op));if(null!==Kt)throw new Me(X.INVALID_ARGUMENT,Kt===ft.op?`Invalid query. You cannot use more than one '${ft.op.toString()}' filter.`:`Invalid query. You cannot use '${ft.op.toString()}' filters with '${Kt.toString()}' filters.`)}(u,je),je}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Zo(e.firestore,e.converter,function(u,g){const v=u.filters.concat([g]);return new Fa(u.path,u.collectionGroup,u.explicitOrderBy.slice(),v,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class ul extends Mc{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(o,u,g){if(null!==o.startAt)throw new Me(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Me(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new La(u,g);return function(S,V){if(null===Pl(S)){const W=gl(S);null!==W&&sg(0,W,V.field)}}(o,v),v}(e._query,this.hc,this.dc);return new Zo(e.firestore,e.converter,function(o,u){const g=o.explicitOrderBy.concat([u]);return new Fa(o.path,o.collectionGroup,g,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class yu extends Mc{constructor(e,t,o){super(),this.type=e,this._c=t,this.wc=o}_apply(e){return new Zo(e.firestore,e.converter,sc(e._query,this._c,this.wc))}}class oy extends Mc{constructor(e,t,o){super(),this.type=e,this.mc=t,this.gc=o}_apply(e){const t=uy(e,this.type,this.mc,this.gc);return new Zo(e.firestore,e.converter,(u=t,new Fa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class ay extends Mc{constructor(e,t,o){super(),this.type=e,this.mc=t,this.gc=o}_apply(e){const t=uy(e,this.type,this.mc,this.gc);return new Zo(e.firestore,e.converter,(u=t,new Fa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function uy(i,e,t,o){if(t[0]=(0,fe.m9)(t[0]),t[0]instanceof Ed)return function(u,g,v,S,V){if(!S)throw new Me(X.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const W=[];for(const se of Va(u))if(se.field.isKeyField())W.push(au(g,S.key));else{const ye=S.data.field(se.field);if(ju(ye))throw new Me(X.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+se.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ye){const je=se.field.canonicalString();throw new Me(X.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${je}' (used as the orderBy) does not exist.`)}W.push(ye)}return new du(W,V)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=Dl(i.firestore);return function(g,v,S,V,W,se){const ye=g.explicitOrderBy;if(W.length>ye.length)throw new Me(X.INVALID_ARGUMENT,`Too many arguments provided to ${V}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const je=[];for(let ut=0;ut<W.length;ut++){const ft=W[ut];if(ye[ut].field.isKeyField()){if("string"!=typeof ft)throw new Me(X.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${V}(), but got a ${typeof ft}`);if(!ic(g)&&-1!==ft.indexOf("/"))throw new Me(X.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${V}() must be a plain document ID, but '${ft}' contains a slash.`);const Kt=g.path.child(Fn.fromString(ft));if(!Et.isDocumentKey(Kt))throw new Me(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${V}() must result in a valid document path, but '${Kt}' is not because it contains an odd number of segments.`);const An=new Et(Kt);je.push(au(v,An))}else{const Kt=Xm(S,V,ft);je.push(Kt)}}return new du(je,se)}(i._query,i.firestore._databaseId,u,e,t,o)}}function ig(i,e,t){if("string"==typeof(t=(0,fe.m9)(t))){if(""===t)throw new Me(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ic(e)&&-1!==t.indexOf("/"))throw new Me(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Fn.fromString(t));if(!Et.isDocumentKey(o))throw new Me(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return au(i,new Et(o))}if(t instanceof Si)return au(i,t._key);throw new Me(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cc(t)}.`)}function ly(i,e){if(!Array.isArray(i)||0===i.length)throw new Me(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Me(X.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sg(i,e,t){if(!t.isEqual(e))throw new Me(X.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Df{convertValue(e,t="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw N()}}convertObject(e,t){const o={};return va(e.fields,(u,g)=>{o[u]=this.convertValue(g,t)}),o}convertGeoPoint(e){return new uh(Kn(e.latitude),Kn(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=fo(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Li(e));default:return null}}convertTimestamp(e){const t=Bo(e);return new yi(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Fn.fromString(e);j(St(o));const u=new Ks(o.get(1),o.get(3)),g=new Et(o.popFirst(5));return u.isEqual(t)||w(`Document ${g} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),g}}function xc(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Nv extends Df{constructor(e){super(),this.firestore=e}convertBytes(e){return new al(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Si(this.firestore,null,t)}}class og{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dl(e)}set(e,t,o){this._verifyNotCommitted();const u=Sl(e,this._firestore),g=xc(u.converter,t,o),v=lh(this._dataReader,"WriteBatch.set",u._key,g,null!==u.converter,o);return this._mutations.push(v.toMutation(u._key,dt.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const g=Sl(e,this._firestore);let v;return v="string"==typeof(t=(0,fe.m9)(t))||t instanceof ku?Jm(this._dataReader,"WriteBatch.update",g._key,t,o,u):wf(this._dataReader,"WriteBatch.update",g._key,t),this._mutations.push(v.toMutation(g._key,dt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sl(e,this._firestore);return this._mutations=this._mutations.concat(new ja(t._key,dt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sl(i,e){if((i=(0,fe.m9)(i)).firestore!==e)throw new Me(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class ll extends Df{constructor(e){super(),this.firestore=e}convertBytes(e){return new al(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Si(this.firestore,null,t)}}function ug(i,e,t){i=mr(i,Si);const o=mr(i.firestore,Ai),u=xc(i.converter,e,t);return Id(o,[lh(Dl(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,dt.none())])}function lg(i,e,t,...o){i=mr(i,Si);const u=mr(i.firestore,Ai),g=Dl(u);let v;return v="string"==typeof(e=(0,fe.m9)(e))||e instanceof ku?Jm(g,"updateDoc",i._key,e,t,o):wf(g,"updateDoc",i._key,e),Id(u,[v.toMutation(i._key,dt.exists(!0))])}function my(i,...e){var t,o,u;i=(0,fe.m9)(i);let g={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||Zp(e[v])||(g=e[v],v++);const S={includeMetadataChanges:g.includeMetadataChanges};if(Zp(e[v])){const ye=e[v];e[v]=null===(t=ye.next)||void 0===t?void 0:t.bind(ye),e[v+1]=null===(o=ye.error)||void 0===o?void 0:o.bind(ye),e[v+2]=null===(u=ye.complete)||void 0===u?void 0:u.bind(ye)}let V,W,se;if(i instanceof Si)W=mr(i.firestore,Ai),se=Ua(i._key.path),V={next:ye=>{e[v]&&e[v](cg(W,i,ye))},error:e[v+1],complete:e[v+2]};else{const ye=mr(i,Zo);W=mr(ye.firestore,Ai),se=ye._query;const je=new ll(W);V={next:ut=>{e[v]&&e[v](new ec(W,je,ye,ut))},error:e[v+1],complete:e[v+2]},ng(i._query)}return function(ye,je,ut,ft){const Kt=new nh(ft),An=new Yd(je,Kt,ut);return ye.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return bp(yield rh(ye),An)})),()=>{Kt.pa(),ye.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return Dp(yield rh(ye),An)}))}}(Ps(W),se,S,V)}function Id(i,e){return function(t,o){const u=new Jt;return t.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function fv(i,e,t){return tf.apply(this,arguments)}(yield Bp(t),o,u)})),u.promise}(Ps(i),e)}function cg(i,e,t){const o=t.docs.get(e._key),u=new ll(i);return new Cl(i,u,e._key,o,new Ac(t.hasPendingWrites,t.fromCache),e.converter)}class Fv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dl(e)}get(e){const t=Sl(e,this._firestore),o=new Nv(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return N();const g=u[0];if(g.isFoundDocument())return new Ed(this._firestore,o,g.key,g,t.converter);if(g.isNoDocument())return new Ed(this._firestore,o,t._key,null,t.converter);throw N()})}set(e,t,o){const u=Sl(e,this._firestore),g=xc(u.converter,t,o),v=lh(this._dataReader,"Transaction.set",u._key,g,null!==u.converter,o);return this._transaction.set(u._key,v),this}update(e,t,o,...u){const g=Sl(e,this._firestore);let v;return v="string"==typeof(t=(0,fe.m9)(t))||t instanceof ku?Jm(this._dataReader,"Transaction.update",g._key,t,o,u):wf(this._dataReader,"Transaction.update",g._key,t),this._transaction.update(g._key,v),this}delete(e){const t=Sl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sl(e,this._firestore),o=new ll(this._firestore);return super.get(e).then(u=>new Cl(this._firestore,o,t._key,u._document,new Ac(!1,!1),t.converter))}}function dg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function hg(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function fg(){if(!function hl(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){os=gt.SDK_VERSION,(0,gt._registerComponent)(new mt.wA("firestore",(t,{options:o})=>{const u=t.getProvider("app").getImmediate(),g=new Ai(u,new Yi(t.getProvider("auth-internal")),new as(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),g._setSettings(o),g},"PUBLIC")),(0,gt.registerVersion)(Vo,"3.4.7",i),(0,gt.registerVersion)(Vo,"3.4.7","esm2017")}();class bd{constructor(e){this._delegate=e}static fromBase64String(e){return fg(),new bd(al.fromBase64String(e))}static fromUint8Array(e){return hg(),new bd(al.fromUint8Array(e))}toBase64(){return fg(),this._delegate.toBase64()}toUint8Array(){return hg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Tf(i){return function vy(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class _y{enableIndexedDbPersistence(e,t){return function mf(i,e){Jp(i=mr(i,Ai));const t=Ps(i),o=i._freezeSettings(),u=new uf;return Dv(t,u,new Fp(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Yp(i){Jp(i=mr(i,Ai));const e=Ps(i),t=i._freezeSettings(),o=new uf;return Dv(e,o,new Sm(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Tv(i){if(i._initialized&&!i._terminated)throw new Me(X.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jt;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{yield(t=(0,ue.Z)(function*(o){if(!pu.vt())return Promise.resolve();const u=o+"main";yield pu.delete(u)}),function(o){return t.apply(this,arguments)})($d(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pg{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ks||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&E("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function Iv(i,e,t,o={}){var u;const g=(i=mr(i,ih))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==e&&E("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},g),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let v,S;if("string"==typeof o.mockUserToken)v=o.mockUserToken,S=Br.MOCK_USER;else{v=(0,fe.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const V=o.mockUserToken.sub||o.mockUserToken.user_id;if(!V)throw new Me(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Br(V)}i._authCredentials=new kn(new jt(v,S))}}(this._delegate,e,t,o)}enableNetwork(){return function vf(i){return function $p(i){return i.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield Nm(i),t=yield km(i);return e.setNetworkEnabled(!0),function(o){const u=Q(o);return u.lu.delete(0),Gd(u)}(t)}))}(Ps(i=mr(i,Ai)))}(this._delegate)}disableNetwork(){return function Hm(i){return function Hp(i){return i.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield Nm(i),t=yield km(i);return e.setNetworkEnabled(!1),(o=(0,ue.Z)(function*(u){const g=Q(u);g.lu.add(0),yield zd(g),g._u.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(Ps(i=mr(i,Ai)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,zp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function yf(i){return function(e){const t=new Jt;return e.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function J_(i,e){return rf.apply(this,arguments)}(yield Bp(e),t)})),t.promise}(Ps(i=mr(i,Ai)))}(this._delegate)}onSnapshotsInSync(e){return function Lv(i,e){return function Ev(i,e){const t=new nh(e);return i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return o=yield rh(i),u=t,Q(o).Tu.add(u),void u.next();var o,u})),()=>{t.pa(),i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return o=yield rh(i),u=t,void Q(o).Tu.delete(u);var o,u}))}}(Ps(i=mr(i,Ai)),Zp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new dn(this,Vm(this._delegate,e))}catch(t){throw ua(t,"collection()","Firestore.collection()")}}doc(e){try{return new vu(this,sh(this._delegate,e))}catch(t){throw ua(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yo(this,function Bm(i,e){if(i=mr(i,ih),Gp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(X.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zo(i,null,(t=e,new Fa(Fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ua(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Uv(i,e){return function Lm(i,e){const t=new Jt;return i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){const o=yield(u=i,hf(u).then(g=>g.datastore));var u;new xm(i.asyncQueue,o,e,t).run()})),t.promise}(Ps(i=mr(i,Ai)),t=>e(new Fv(i,t)))}(this._delegate,t=>e(new gg(this,t)))}batch(){return Ps(this._delegate),new mg(new og(this._delegate,e=>Id(this._delegate,e)))}loadBundle(e){return function Qp(i,e){const t=Ps(i=mr(i,Ai)),o=new t0;return function e0(i,e,t,o){const u=function(g,v){let S;return S="string"==typeof g?(new TextEncoder).encode(g):g,V=function(V,W){if(V instanceof Uint8Array)return Up(V,W);if(V instanceof ArrayBuffer)return Up(new Uint8Array(V),W);if(V instanceof ReadableStream)return V.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new Am(V,v);var V}(t,dd(e));i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){!function vd(i,e,t){const o=Q(i);var u;(u=(0,ue.Z)(function*(g,v,S){try{const V=yield v.getMetadata();if(yield function(je,ut){const ft=Q(je),Kt=Zr(ut.createTime);return ft.persistence.runTransaction("hasNewerBundle","readonly",An=>ft.ds.getBundleMetadata(An,ut.id)).then(An=>!!An&&An.createTime.compareTo(Kt)>=0)}(g.localStore,V))return yield v.close(),S._completeWith({taskState:"Success",documentsLoaded:(je=V).totalDocuments,bytesLoaded:je.totalBytes,totalDocuments:je.totalDocuments,totalBytes:je.totalBytes}),Promise.resolve(new Set);S._updateProgress(Sp(V));const W=new gm(V,g.localStore,v.M);let se=yield v.fa();for(;se;){const je=yield W.Nu(se);je&&S._updateProgress(je),se=yield v.fa()}const ye=yield W.complete();return yield Il(g,ye.Ou,void 0),yield function(je,ut){const ft=Q(je);return ft.persistence.runTransaction("Save bundle","readwrite",Kt=>ft.ds.saveBundleMetadata(Kt,ut))}(g.localStore,V),S._completeWith(ye.progress),Promise.resolve(ye.Mu)}catch(V){return E("SyncEngine",`Loading bundle failed with ${V}`),S._failWith(V),Promise.resolve(new Set)}var je}),function(g,v,S){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Bp(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Gm(i,e){return function wv(i,e){return i.asyncQueue.enqueue((0,ue.Z)(function*(){return function(t,o){const u=Q(t);return u.persistence.runTransaction("Get named query","readonly",g=>u.ds.getNamedQuery(g,o))}(yield pf(i),e)}))}(Ps(i=mr(i,Ai)),e).then(t=>t?new Zo(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Yo(this,t):null)}}class hh extends Df{constructor(e){super(),this.firestore=e}convertBytes(e){return new bd(new al(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return vu.forKey(t,this.firestore,null)}}class gg{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hh(e)}get(e){const t=Oc(e);return this._delegate.get(t).then(o=>new Pc(this._firestore,new Cl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=Oc(e);return o?(dg("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const g=Oc(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,o,...u),this}delete(e){const t=Oc(e);return this._delegate.delete(t),this}}class mg{constructor(e){this._delegate=e}set(e,t,o){const u=Oc(e);return o?(dg("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const g=Oc(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,o,...u),this}delete(e){const t=Oc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class za{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new wd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cf(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=za.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let g=u.get(t);return g||(g=new za(e,new hh(e),t),u.set(t,g)),g}}za.INSTANCES=new WeakMap;class vu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hh(e)}static forPath(e,t,o){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new vu(t,new Si(t._delegate,o,new Et(e)))}static forKey(e,t,o){return new vu(t,new Si(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new dn(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new dn(this.firestore,Vm(this._delegate,e))}catch(t){throw ua(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,fe.m9)(e))instanceof Si&&gf(this._delegate,e)}set(e,t){t=dg("DocumentReference.set",t);try{return t?ug(this._delegate,e,t):ug(this._delegate,e)}catch(o){throw ua(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?lg(this._delegate,e):lg(this._delegate,e,t,...o)}catch(u){throw ua(u,"updateDoc()","DocumentReference.update()")}}delete(){return function gy(i){return Id(mr(i.firestore,Ai),[new ja(i._key,dt.none())])}(this._delegate)}onSnapshot(...e){const t=Rc(e),o=Wv(e,u=>new Pc(this.firestore,new Cl(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return my(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function cy(i){i=mr(i,Si);const e=mr(i.firestore,Ai),t=Ps(e),o=new ll(e);return function yv(i,e){const t=new Jt;return i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(o=(0,ue.Z)(function*(u,g,v){try{const S=yield function(V,W){const se=Q(V);return se.persistence.runTransaction("read document","readonly",ye=>se.ai.Bs(ye,W))}(u,g);S.isFoundDocument()?v.resolve(S):S.isNoDocument()?v.resolve(null):v.reject(new Me(X.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const V=fd(S,`Failed to get document '${g} from cache`);v.reject(V)}}),function(u,g,v){return o.apply(this,arguments)})(yield pf(i),e,t);var o})),t.promise}(t,i._key).then(u=>new Cl(e,o,i._key,u,new Ac(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function dy(i){i=mr(i,Si);const e=mr(i.firestore,Ai);return vv(Ps(e),i._key,{source:"server"}).then(t=>cg(e,i,t))}(this._delegate):function ag(i){i=mr(i,Si);const e=mr(i.firestore,Ai);return vv(Ps(e),i._key).then(t=>cg(e,i,t))}(this._delegate),t.then(o=>new Pc(this.firestore,new Cl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new vu(this.firestore,this._delegate.withConverter(e?za.getInstance(this.firestore,e):null))}}function ua(i,e,t){return i.message=i.message.replace(e,t),i}function Rc(i){for(const e of i)if("object"==typeof e&&!Tf(e))return e;return{}}function Wv(i,e){var t,o;let u;return u=Tf(i[0])?i[0]:Tf(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:g=>{u.next&&u.next(e(g))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Pc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new vu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Mv(this._delegate,e._delegate)}}class Cf extends Pc{data(e){const t=this._delegate.data(e);return function re(i,e){i||N()}(void 0!==t),t}}class Yo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hh(e)}where(e,t,o){try{return new Yo(this.firestore,xo(this._delegate,function Rv(i,e,t){const o=e,u=Tl("where",i);return new xv(u,o,t)}(e,t,o)))}catch(u){throw ua(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Yo(this.firestore,xo(this._delegate,function Lu(i,e="asc"){const t=e,o=Tl("orderBy",i);return new ul(o,t)}(e,t)))}catch(o){throw ua(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Yo(this.firestore,xo(this._delegate,function iy(i){return Kp("limit",i),new yu("limit",i,"F")}(e)))}catch(t){throw ua(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Yo(this.firestore,xo(this._delegate,function sy(i){return Kp("limitToLast",i),new yu("limitToLast",i,"L")}(e)))}catch(t){throw ua(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Yo(this.firestore,xo(this._delegate,function Pv(...i){return new oy("startAt",i,!0)}(...e)))}catch(t){throw ua(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Yo(this.firestore,xo(this._delegate,function Ov(...i){return new oy("startAfter",i,!1)}(...e)))}catch(t){throw ua(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Yo(this.firestore,xo(this._delegate,function rg(...i){return new ay("endBefore",i,!1)}(...e)))}catch(t){throw ua(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Yo(this.firestore,xo(this._delegate,function dh(...i){return new ay("endAt",i,!0)}(...e)))}catch(t){throw ua(t,"endAt()","Query.endAt()")}}isEqual(e){return bv(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function fy(i){i=mr(i,Zo);const e=mr(i.firestore,Ai),t=Ps(e),o=new ll(e);return function X_(i,e){const t=new Jt;return i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(o=(0,ue.Z)(function*(u,g,v){try{const S=yield wl(u,g,!0),V=new vm(g,S.hi),W=V.Gu(S.documents),se=V.applyChanges(W,!1);v.resolve(se.snapshot)}catch(S){const V=fd(S,`Failed to execute query '${g} against cache`);v.reject(V)}}),function(u,g,v){return o.apply(this,arguments)})(yield pf(i),e,t);var o})),t.promise}(t,i._query).then(u=>new ec(e,o,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function py(i){i=mr(i,Zo);const e=mr(i.firestore,Ai),t=Ps(e),o=new ll(e);return _v(t,i._query,{source:"server"}).then(u=>new ec(e,o,i,u))}(this._delegate):function hy(i){i=mr(i,Zo);const e=mr(i.firestore,Ai),t=Ps(e),o=new ll(e);return ng(i._query),_v(t,i._query).then(u=>new ec(e,o,i,u))}(this._delegate),t.then(o=>new Iy(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=Rc(e),o=Wv(e,u=>new Iy(this.firestore,new ec(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return my(this._delegate,t,o)}withConverter(e){return new Yo(this.firestore,this._delegate.withConverter(e?za.getInstance(this.firestore,e):null))}}class wy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Cf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Iy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Yo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Cf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new wy(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Cf(this._firestore,o))})}isEqual(e){return Mv(this._delegate,e._delegate)}}class dn extends Yo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new vu(this.firestore,e):null}doc(e){try{return new vu(this.firestore,void 0===e?sh(this._delegate):sh(this._delegate,e))}catch(t){throw ua(t,"doc()","CollectionReference.doc()")}}add(e){return function kv(i,e){const t=mr(i.firestore,Ai),o=sh(i),u=xc(i.converter,e);return Id(t,[lh(Dl(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,dt.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new vu(this.firestore,t))}isEqual(e){return gf(this._delegate,e._delegate)}withConverter(e){return new dn(this.firestore,this._delegate.withConverter(e?za.getInstance(this.firestore,e):null))}}function Oc(i){return mr(i,Si)}class yg{constructor(...e){this._delegate=new ku(...e)}static documentId(){return new yg(bi.keyField().canonicalString())}isEqual(e){return(e=(0,fe.m9)(e))instanceof ku&&this._delegate._internalPath.isEqual(e._internalPath)}}class Nc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Bv(){return new Ef("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Nc(e)}static delete(){const e=function Vv(){return new _d("deleteField")}();return e._methodName="FieldValue.delete",new Nc(e)}static arrayUnion(...e){const t=function jv(...i){return new Zm("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Nc(t)}static arrayRemove(...e){const t=function $v(...i){return new Ym("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Nc(t)}static increment(e){const t=function Hv(i){return new Qm("increment",i)}(e);return t._methodName="FieldValue.increment",new Nc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Sf={Firestore:pg,GeoPoint:uh,Timestamp:yi,Blob:bd,Transaction:gg,WriteBatch:mg,DocumentReference:vu,DocumentSnapshot:Pc,Query:Yo,QueryDocumentSnapshot:Cf,QuerySnapshot:Iy,CollectionReference:dn,FieldPath:yg,FieldValue:Nc,setLogLevel:function Ey(i){!function Zi(i){mi.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Af(i){(function Kv(i,e){i.INTERNAL.registerComponent(new mt.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},Sf)))})(i,(e,t)=>new pg(e,t,new _y)),i.registerVersion("@firebase/firestore-compat","0.1.16")}(Re.Z);var Mf=B(440);function vg(i,e){return function s0(i,e=Ee.z){return new he.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function _g(i,e){return vg(i,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function fh(i,e){return _g(i,e).pipe((0,Se.O)(void 0),pe(),(0,at.U)(([t,o])=>{const u=o.payload.docChanges(),g=u.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((v,S)=>{const V=u.find(se=>se.doc.ref.isEqual(v.ref)),W=null==t?void 0:t.payload.docs.find(se=>se.ref.isEqual(v.ref));V&&JSON.stringify(V.doc.metadata)===JSON.stringify(v.metadata)||!V&&W&&JSON.stringify(W.metadata)===JSON.stringify(v.metadata)||g.push({type:"modified",payload:{oldIndex:S,newIndex:S,type:"modified",doc:v}})}),g}))}function Eg(i,e,t){return fh(i,t).pipe((0,qe.R)((o,u)=>function by(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Zv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return xf(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return xf(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xf(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(g=>g.payload),e),[]),function vt(i,e=Qe.y){return i=null!=i?i:Ge,(0,ae.e)((t,o)=>{let u,g=!0;t.subscribe((0,oe.x)(o,v=>{const S=e(v);(g||!i(u,S))&&(g=!1,u=S,o.next(v))}))})}(),(0,at.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function xf(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function Dy(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}B(127);class Ty{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=fh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,at.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,Se.O)(void 0),pe(),(0,Ke.h)(([o,u])=>u.length>0||!o),(0,at.U)(([o,u])=>u),Ce.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,qe.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Dy(e);return Eg(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ce.iC)}valueChanges(e={}){return _g(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Ce.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(Ce.iC)}add(e){return this.ref.add(e)}doc(e){return new Dd(this.ref.doc(e),this.afs)}}class Dd{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:g}=wg(o,t);return new Ty(u,g,this.afs)}snapshotChanges(){return function qv(i,e){return vg(i,e).pipe((0,Se.O)(void 0),pe(),(0,at.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ce.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,at.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,De.D)(this.ref.get(e)).pipe(Ce.iC)}}class Yv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?fh(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,Ke.h)(t=>t.length>0),Ce.iC):fh(this.query,this.afs.schedulers.outsideAngular).pipe(Ce.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,qe.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Dy(e);return Eg(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ce.iC)}valueChanges(e={}){return _g(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Ce.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(Ce.iC)}}const Qv=new b.OlP("angularfire2.enableFirestorePersistence"),Jv=new b.OlP("angularfire2.firestore.persistenceSettings"),Rf=new b.OlP("angularfire2.firestore.settings"),Cy=new b.OlP("angularfire2.firestore.use-emulator");function wg(i,e=(t=>t)){return{query:e(i),ref:i}}let Sy=(()=>{class i{constructor(t,o,u,g,v,S,V,W,se,ye,je,ut,ft,Kt,An,xi,rr){this.schedulers=V;const Os=(0,_t.on)(t,S,o),Yr=se;ye&&(0,L.nw)(Os,S,je,ft,Kt,An,ut,xi),[this.firestore,this.persistenceEnabled$]=(0,_t.cc)(`${Os.name}.firestore`,"AngularFirestore",Os.name,()=>{const _i=S.runOutsideAngular(()=>Os.firestore());if(g&&_i.settings(g),Yr&&_i.useEmulator(...Yr),u&&!(0,xt.PM)(v)){const Ur=()=>{try{return(0,De.D)(_i.enablePersistence(W||void 0).then(()=>!0,()=>!1))}catch(cl){return"undefined"!=typeof console&&console.warn(cl),(0,Ie.of)(!1)}};return[_i,S.runOutsideAngular(Ur)]}return[_i,(0,Ie.of)(!1)]},[g,Yr,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:g,query:v}=wg(u,o),S=this.schedulers.ngZone.run(()=>g);return new Ty(S,v,this)}collectionGroup(t,o){const u=o||(v=>v),g=this.firestore.collectionGroup(t);return new Yv(u(g),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Dd(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(b.LFG(_t.Dh),b.LFG(_t.xv,8),b.LFG(Qv,8),b.LFG(Rf,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(Ce.HU),b.LFG(Jv,8),b.LFG(Cy,8),b.LFG(L.zQ,8),b.LFG(L.Qv,8),b.LFG(L.L6,8),b.LFG(L._Q,8),b.LFG(L.rT,8),b.LFG(L.lh,8),b.LFG(L.f7,8),b.LFG(Mf.nm,8))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),ph=(()=>{class i{constructor(t,o,u){this.auth=t,this.router=o,this.store=u,this.auth.onAuthStateChanged(g=>{this._user=g})}get isLoggedIn(){return!!this._user}get userId(){return this._user.uid}get userEmail(){return this._user.email}SignIn({email:t,password:o}){return this.auth.signInWithEmailAndPassword(t,o)}SignUp({email:t,password:o}){return this.auth.createUserWithEmailAndPassword(t,o)}SignOut(){return this.auth.signOut()}}return i.\u0275fac=function(t){return new(t||i)(b.LFG(L.zQ),b.LFG(q.F0),b.LFG(Sy))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},5973:(Mt,Ue,B)=>{var b=B(9808),L=B(5e3);class q extends b.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ee extends q{static makeCurrent(){(0,b.HT)(new Ee)}onAndCancel(c,h,_){return c.addEventListener(h,_,!1),()=>{c.removeEventListener(h,_,!1)}}dispatchEvent(c,h){c.dispatchEvent(h)}remove(c){c.parentNode&&c.parentNode.removeChild(c)}createElement(c,h){return(h=h||this.getDefaultDocument()).createElement(c)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(c){return c.nodeType===Node.ELEMENT_NODE}isShadowRoot(c){return c instanceof DocumentFragment}getGlobalEventTarget(c,h){return"window"===h?window:"document"===h?c:"body"===h?c.body:null}getBaseHref(c){const h=function De(){return he=he||document.querySelector("base"),he?he.getAttribute("href"):null}();return null==h?null:function Ce(D){Ie=Ie||document.createElement("a"),Ie.setAttribute("href",D);const c=Ie.pathname;return"/"===c.charAt(0)?c:`/${c}`}(h)}resetBaseElement(){he=null}getUserAgent(){return window.navigator.userAgent}getCookie(c){return(0,b.Mx)(document.cookie,c)}}let Ie,he=null;const Se=new L.OlP("TRANSITION_ID"),oe=[{provide:L.ip1,useFactory:function ae(D,c,h){return()=>{h.get(L.CZH).donePromise.then(()=>{const _=(0,b.q)(),M=c.querySelectorAll(`style[ng-transition="${D}"]`);for(let $=0;$<M.length;$++)_.remove(M[$])})}},deps:[Se,b.K0,L.zs3],multi:!0}];class pe{static init(){(0,L.VLi)(new pe)}addToWindow(c){L.dqk.getAngularTestability=(_,M=!0)=>{const $=c.findTestabilityInTree(_,M);if(null==$)throw new Error("Could not find testability for element.");return $},L.dqk.getAllAngularTestabilities=()=>c.getAllTestabilities(),L.dqk.getAllAngularRootElements=()=>c.getAllRootElements(),L.dqk.frameworkStabilizers||(L.dqk.frameworkStabilizers=[]),L.dqk.frameworkStabilizers.push(_=>{const M=L.dqk.getAllAngularTestabilities();let $=M.length,Y=!1;const ne=function(me){Y=Y||me,$--,0==$&&_(Y)};M.forEach(function(me){me.whenStable(ne)})})}findTestabilityInTree(c,h,_){if(null==h)return null;const M=c.getTestability(h);return null!=M?M:_?(0,b.q)().isShadowRoot(h)?this.findTestabilityInTree(c,h.host,!0):this.findTestabilityInTree(c,h.parentElement,!0):null}}let at=(()=>{class D{build(){return new XMLHttpRequest}}return D.\u0275fac=function(h){return new(h||D)},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})();const qe=new L.OlP("EventManagerPlugins");let Qe=(()=>{class D{constructor(h,_){this._zone=_,this._eventNameToPlugin=new Map,h.forEach(M=>M.manager=this),this._plugins=h.slice().reverse()}addEventListener(h,_,M){return this._findPluginFor(_).addEventListener(h,_,M)}addGlobalEventListener(h,_,M){return this._findPluginFor(_).addGlobalEventListener(h,_,M)}getZone(){return this._zone}_findPluginFor(h){const _=this._eventNameToPlugin.get(h);if(_)return _;const M=this._plugins;for(let $=0;$<M.length;$++){const Y=M[$];if(Y.supports(h))return this._eventNameToPlugin.set(h,Y),Y}throw new Error(`No event manager plugin found for event ${h}`)}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(qe),L.LFG(L.R0b))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})();class vt{constructor(c){this._doc=c}addGlobalEventListener(c,h,_){const M=(0,b.q)().getGlobalEventTarget(this._doc,c);if(!M)throw new Error(`Unsupported event target ${M} for event ${h}`);return this.addEventListener(M,h,_)}}let Ge=(()=>{class D{constructor(){this._stylesSet=new Set}addStyles(h){const _=new Set;h.forEach(M=>{this._stylesSet.has(M)||(this._stylesSet.add(M),_.add(M))}),this.onStylesAdded(_)}onStylesAdded(h){}getAllStyles(){return Array.from(this._stylesSet)}}return D.\u0275fac=function(h){return new(h||D)},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})(),Ke=(()=>{class D extends Ge{constructor(h){super(),this._doc=h,this._hostNodes=new Map,this._hostNodes.set(h.head,[])}_addStylesToHost(h,_,M){h.forEach($=>{const Y=this._doc.createElement("style");Y.textContent=$,M.push(_.appendChild(Y))})}addHost(h){const _=[];this._addStylesToHost(this._stylesSet,h,_),this._hostNodes.set(h,_)}removeHost(h){const _=this._hostNodes.get(h);_&&_.forEach(_t),this._hostNodes.delete(h)}onStylesAdded(h){this._hostNodes.forEach((_,M)=>{this._addStylesToHost(h,M,_)})}ngOnDestroy(){this._hostNodes.forEach(h=>h.forEach(_t))}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(b.K0))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})();function _t(D){(0,b.q)().remove(D)}const xt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},et=/%COMP%/g;function ke(D,c,h){for(let _=0;_<c.length;_++){let M=c[_];Array.isArray(M)?ke(D,M,h):(M=M.replace(et,D),h.push(M))}return h}function Oe(D){return c=>{if("__ngUnwrap__"===c)return D;!1===D(c)&&(c.preventDefault(),c.returnValue=!1)}}let Je=(()=>{class D{constructor(h,_,M){this.eventManager=h,this.sharedStylesHost=_,this.appId=M,this.rendererByCompId=new Map,this.defaultRenderer=new be(h)}createRenderer(h,_){if(!h||!_)return this.defaultRenderer;switch(_.encapsulation){case L.ifc.Emulated:{let M=this.rendererByCompId.get(_.id);return M||(M=new Ve(this.eventManager,this.sharedStylesHost,_,this.appId),this.rendererByCompId.set(_.id,M)),M.applyToHost(h),M}case 1:case L.ifc.ShadowDom:return new tt(this.eventManager,this.sharedStylesHost,h,_);default:if(!this.rendererByCompId.has(_.id)){const M=ke(_.id,_.styles,[]);this.sharedStylesHost.addStyles(M),this.rendererByCompId.set(_.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(Qe),L.LFG(Ke),L.LFG(L.AFp))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})();class be{constructor(c){this.eventManager=c,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(c,h){return h?document.createElementNS(xt[h]||h,c):document.createElement(c)}createComment(c){return document.createComment(c)}createText(c){return document.createTextNode(c)}appendChild(c,h){c.appendChild(h)}insertBefore(c,h,_){c&&c.insertBefore(h,_)}removeChild(c,h){c&&c.removeChild(h)}selectRootElement(c,h){let _="string"==typeof c?document.querySelector(c):c;if(!_)throw new Error(`The selector "${c}" did not match any elements`);return h||(_.textContent=""),_}parentNode(c){return c.parentNode}nextSibling(c){return c.nextSibling}setAttribute(c,h,_,M){if(M){h=M+":"+h;const $=xt[M];$?c.setAttributeNS($,h,_):c.setAttribute(h,_)}else c.setAttribute(h,_)}removeAttribute(c,h,_){if(_){const M=xt[_];M?c.removeAttributeNS(M,h):c.removeAttribute(`${_}:${h}`)}else c.removeAttribute(h)}addClass(c,h){c.classList.add(h)}removeClass(c,h){c.classList.remove(h)}setStyle(c,h,_,M){M&(L.JOm.DashCase|L.JOm.Important)?c.style.setProperty(h,_,M&L.JOm.Important?"important":""):c.style[h]=_}removeStyle(c,h,_){_&L.JOm.DashCase?c.style.removeProperty(h):c.style[h]=""}setProperty(c,h,_){c[h]=_}setValue(c,h){c.nodeValue=h}listen(c,h,_){return"string"==typeof c?this.eventManager.addGlobalEventListener(c,h,Oe(_)):this.eventManager.addEventListener(c,h,Oe(_))}}class Ve extends be{constructor(c,h,_,M){super(c),this.component=_;const $=ke(M+"-"+_.id,_.styles,[]);h.addStyles($),this.contentAttr=function Pe(D){return"_ngcontent-%COMP%".replace(et,D)}(M+"-"+_.id),this.hostAttr=function fe(D){return"_nghost-%COMP%".replace(et,D)}(M+"-"+_.id)}applyToHost(c){super.setAttribute(c,this.hostAttr,"")}createElement(c,h){const _=super.createElement(c,h);return super.setAttribute(_,this.contentAttr,""),_}}class tt extends be{constructor(c,h,_,M){super(c),this.sharedStylesHost=h,this.hostEl=_,this.shadowRoot=_.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const $=ke(M.id,M.styles,[]);for(let Y=0;Y<$.length;Y++){const ne=document.createElement("style");ne.textContent=$[Y],this.shadowRoot.appendChild(ne)}}nodeOrShadowRoot(c){return c===this.hostEl?this.shadowRoot:c}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(c,h){return super.appendChild(this.nodeOrShadowRoot(c),h)}insertBefore(c,h,_){return super.insertBefore(this.nodeOrShadowRoot(c),h,_)}removeChild(c,h){return super.removeChild(this.nodeOrShadowRoot(c),h)}parentNode(c){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(c)))}}let te=(()=>{class D extends vt{constructor(h){super(h)}supports(h){return!0}addEventListener(h,_,M){return h.addEventListener(_,M,!1),()=>this.removeEventListener(h,_,M)}removeEventListener(h,_,M){return h.removeEventListener(_,M)}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(b.K0))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})();const $e=["alt","control","meta","shift"],Rt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},In={alt:D=>D.altKey,control:D=>D.ctrlKey,meta:D=>D.metaKey,shift:D=>D.shiftKey};let Ot=(()=>{class D extends vt{constructor(h){super(h)}supports(h){return null!=D.parseEventName(h)}addEventListener(h,_,M){const $=D.parseEventName(_),Y=D.eventCallback($.fullKey,M,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,b.q)().onAndCancel(h,$.domEventName,Y))}static parseEventName(h){const _=h.toLowerCase().split("."),M=_.shift();if(0===_.length||"keydown"!==M&&"keyup"!==M)return null;const $=D._normalizeKey(_.pop());let Y="";if($e.forEach(me=>{const Be=_.indexOf(me);Be>-1&&(_.splice(Be,1),Y+=me+".")}),Y+=$,0!=_.length||0===$.length)return null;const ne={};return ne.domEventName=M,ne.fullKey=Y,ne}static getEventFullKey(h){let _="",M=function qt(D){let c=D.key;if(null==c){if(c=D.keyIdentifier,null==c)return"Unidentified";c.startsWith("U+")&&(c=String.fromCharCode(parseInt(c.substring(2),16)),3===D.location&&lt.hasOwnProperty(c)&&(c=lt[c]))}return Rt[c]||c}(h);return M=M.toLowerCase()," "===M?M="space":"."===M&&(M="dot"),$e.forEach($=>{$!=M&&In[$](h)&&(_+=$+".")}),_+=M,_}static eventCallback(h,_,M){return $=>{D.getEventFullKey($)===h&&M.runGuarded(()=>_($))}}static _normalizeKey(h){return"esc"===h?"escape":h}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(b.K0))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})();const ri=(0,L.eFA)(L._c5,"browser",[{provide:L.Lbi,useValue:b.bD},{provide:L.g9A,useValue:function Mn(){Ee.makeCurrent(),pe.init()},multi:!0},{provide:b.K0,useFactory:function Ir(){return(0,L.RDi)(document),document},deps:[]}]),Pr=[{provide:L.zSh,useValue:"root"},{provide:L.qLn,useFactory:function $n(){return new L.qLn},deps:[]},{provide:qe,useClass:te,multi:!0,deps:[b.K0,L.R0b,L.Lbi]},{provide:qe,useClass:Ot,multi:!0,deps:[b.K0]},{provide:Je,useClass:Je,deps:[Qe,Ke,L.AFp]},{provide:L.FYo,useExisting:Je},{provide:Ge,useExisting:Ke},{provide:Ke,useClass:Ke,deps:[b.K0]},{provide:L.dDg,useClass:L.dDg,deps:[L.R0b]},{provide:Qe,useClass:Qe,deps:[qe,L.R0b]},{provide:b.JF,useClass:at,deps:[]}];let Hn=(()=>{class D{constructor(h){if(h)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(h){return{ngModule:D,providers:[{provide:L.AFp,useValue:h.appId},{provide:Se,useExisting:L.AFp},oe]}}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(D,12))},D.\u0275mod=L.oAB({type:D}),D.\u0275inj=L.cJS({providers:Pr,imports:[b.ez,L.hGG]}),D})();"undefined"!=typeof window&&window;const Yt_firebase={apiKey:"AIzaSyBnqCcGfFVOLQheod3buHfek8UZ-c0eG-g",authDomain:"skateboard-ecf80.firebaseapp.com",projectId:"skateboard-ecf80",storageBucket:"skateboard-ecf80.appspot.com",messagingSenderId:"1053805359074",appId:"1:1053805359074:web:ed81428b82098634d553bb"};var gn=B(2011),Gt=B(4473),cn=B(8995);let hr=(()=>{class D{constructor(){}ngOnInit(){}}return D.\u0275fac=function(h){return new(h||D)},D.\u0275cmp=L.Xpm({type:D,selectors:[["app-skate"]],decls:51,vars:21,consts:[[1,"py-5","text-center","middle"],[1,"col-lg-6","col-md-8","mx-auto"],[1,"py-5","direction"],[1,"skate"],[1,"skate-txt","item"],["src","/assets/img/item1.png","alt","","width","64"],[1,"headline-txt"],["src","/assets/img/item2.png","alt","","width","64"],["src","/assets/img/item3.png","alt","","width","64"],["src","/assets/img/item4.png","alt","","width","64"],["src","/assets/img/item5.png","alt","","width","64"],["src","/assets/img/item6.png","alt","","width","64"]],template:function(h,_){1&h&&(L.TgZ(0,"main")(1,"section",0)(2,"div",1)(3,"h2"),L._uU(4),L.ALo(5,"translate"),L.qZA()()(),L.TgZ(6,"section",2)(7,"div",3)(8,"div",4),L._UZ(9,"img",5),L.TgZ(10,"div",6),L._uU(11),L.ALo(12,"translate"),L.qZA(),L.TgZ(13,"p"),L._uU(14,"$100.00"),L.qZA()(),L.TgZ(15,"div",4),L._UZ(16,"img",7),L.TgZ(17,"div",6),L._uU(18),L.ALo(19,"translate"),L.qZA(),L.TgZ(20,"p"),L._uU(21,"$100.00"),L.qZA()(),L.TgZ(22,"div",4),L._UZ(23,"img",8),L.TgZ(24,"div",6),L._uU(25),L.ALo(26,"translate"),L.qZA(),L.TgZ(27,"p"),L._uU(28,"$100.00"),L.qZA()()(),L.TgZ(29,"div",3)(30,"div",4),L._UZ(31,"img",9),L.TgZ(32,"div",6),L._uU(33),L.ALo(34,"translate"),L.qZA(),L.TgZ(35,"p"),L._uU(36,"$100.00"),L.qZA()(),L.TgZ(37,"div",4),L._UZ(38,"img",10),L.TgZ(39,"div",6),L._uU(40),L.ALo(41,"translate"),L.qZA(),L.TgZ(42,"p"),L._uU(43,"$100.00"),L.qZA()(),L.TgZ(44,"div",4),L._UZ(45,"img",11),L.TgZ(46,"div",6),L._uU(47),L.ALo(48,"translate"),L.qZA(),L.TgZ(49,"p"),L._uU(50,"$100.00"),L.qZA()()()()()),2&h&&(L.xp6(4),L.Oqu(L.lcZ(5,7,"SKATE_COLLECTION")),L.xp6(7),L.Oqu(L.lcZ(12,9,"PRODUCT_HEADLINE")),L.xp6(7),L.Oqu(L.lcZ(19,11,"PRODUCT_HEADLINE")),L.xp6(7),L.Oqu(L.lcZ(26,13,"PRODUCT_HEADLINE")),L.xp6(8),L.Oqu(L.lcZ(34,15,"PRODUCT_HEADLINE")),L.xp6(7),L.Oqu(L.lcZ(41,17,"PRODUCT_HEADLINE")),L.xp6(7),L.Oqu(L.lcZ(48,19,"PRODUCT_HEADLINE")))},pipes:[cn.X$],styles:["main[_ngcontent-%COMP%]{margin:0 auto;width:600px;background-color:#fff}h2[_ngcontent-%COMP%]{font-family:helvetica;color:#75786f}.headline-txt[_ngcontent-%COMP%]{font-family:helvetica;color:#7e8177;font-size:15px;font-weight:bolder;text-align:center}p[_ngcontent-%COMP%]{color:#ff8c00;font-weight:bolder;font-size:25px;font-family:Arial,Helvetica,sans-serif}.skate[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;gap:120px}.skate-txt[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px}.item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:10px;width:80px}.direction[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:10px}img[_ngcontent-%COMP%]{max-width:128px}@media only screen and (max-width: 480px){main[_ngcontent-%COMP%]{width:100%}img[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{width:100%}.skate[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:20px}.skate-txt[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px}.item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:10px;width:100%}.direction[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:10px}}"]}),D})();var nn=B(9635),Pn=B(4004),Nr=B(5698),Xi=B(3385);B(127);const fi=(0,Pn.U)(D=>!!D);let Hr=(()=>{class D{constructor(h,_){this.router=h,this.auth=_,this.canActivate=(M,$)=>{const Y=M.data.authGuardPipe||(()=>fi);return this.auth.user.pipe((0,Nr.q)(1),Y(M,$),(0,Pn.U)(ne=>"boolean"==typeof ne?ne:Array.isArray(ne)?this.router.createUrlTree(ne):this.router.parseUrl(ne)))}}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(Gt.F0),L.LFG(Xi.zQ))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac,providedIn:"any"}),D})();const Sr=[{path:"",canActivate:[Hr],data:{authGuardPipe:()=>{return D=["skate"],(0,nn.z)(fi,(0,Pn.U)(c=>c&&D||!0));var D}},loadChildren:()=>B.e(154).then(B.bind(B,9154)).then(D=>D.AuthModule)},{path:"skate",canActivate:[Hr],data:{authGuardPipe:()=>{return D=["sign-in"],(0,nn.z)(fi,(0,Pn.U)(c=>c||D));var D}},component:hr}];let ps=(()=>{class D{}return D.\u0275fac=function(h){return new(h||D)},D.\u0275mod=L.oAB({type:D}),D.\u0275inj=L.cJS({imports:[[Gt.Bz.forRoot(Sr)],Gt.Bz]}),D})();var En=B(4322);function gs(D,c){if(1&D){const h=L.EpF();L.ynx(0),L.TgZ(1,"button",6),L.NdJ("click",function(){return L.CHM(h),L.oxw().goToSignIn()}),L._uU(2),L.ALo(3,"translate"),L.qZA(),L.TgZ(4,"button",6),L.NdJ("click",function(){return L.CHM(h),L.oxw().goToSignUp()}),L._uU(5),L.ALo(6,"translate"),L.qZA(),L.BQk()}2&D&&(L.xp6(2),L.Oqu(L.lcZ(3,2,"SIGN_IN")),L.xp6(3),L.Oqu(L.lcZ(6,4,"SIGN_UP")))}function ms(D,c){if(1&D){const h=L.EpF();L.TgZ(0,"button",6),L.NdJ("click",function(){return L.CHM(h),L.oxw().SignOut()}),L._uU(1),L.ALo(2,"translate"),L.qZA()}2&D&&(L.xp6(1),L.Oqu(L.lcZ(2,1,"SIGN_OUT")))}let ys=(()=>{class D{constructor(h,_,M){this.translateService=h,this.router=_,this.auth=M}get isEn(){return this.isLanguage("en")}get isKa(){return this.isLanguage("ka")}get isLoggedIn(){return this.auth.isLoggedIn}goToSignIn(){this.router.navigate(["sign-in"])}goToSignUp(){this.router.navigate(["sign-up"])}SignOut(){this.auth.SignOut().then(()=>{this.router.navigate(["sign-in"])})}isLanguage(h){const M=this.translateService.currentLang;return M?M===h:this.translateService.defaultLang===h}useKa(){this.translateService.use("ka")}useEn(){this.translateService.use("en")}ngOnInit(){}}return D.\u0275fac=function(h){return new(h||D)(L.Y36(cn.sK),L.Y36(Gt.F0),L.Y36(En.e))},D.\u0275cmp=L.Xpm({type:D,selectors:[["app-header"]],decls:8,vars:6,consts:[[1,"nav-1"],[1,"user-flex"],[4,"ngIf"],["class","btn  me-2",3,"click",4,"ngIf"],[1,"lang","en","ms-2",3,"click"],[1,"lang","ka","ms-2",3,"click"],[1,"btn","me-2",3,"click"]],template:function(h,_){1&h&&(L.TgZ(0,"header")(1,"div",0)(2,"div")(3,"div",1),L.YNc(4,gs,7,6,"ng-container",2),L.YNc(5,ms,3,3,"button",3),L.TgZ(6,"button",4),L.NdJ("click",function(){return _.useEn()}),L.qZA(),L.TgZ(7,"button",5),L.NdJ("click",function(){return _.useKa()}),L.qZA()()()()()),2&h&&(L.xp6(4),L.Q6J("ngIf",!_.isLoggedIn),L.xp6(1),L.Q6J("ngIf",_.isLoggedIn),L.xp6(1),L.ekj("inactive",_.isEn),L.xp6(1),L.ekj("inactive",_.isKa))},directives:[b.O5],pipes:[cn.X$],styles:["img[_ngcontent-%COMP%]{height:35px;width:35px}.lang[_ngcontent-%COMP%]{border:none;outline:none;width:32px;height:32px}.lang.ka[_ngcontent-%COMP%]{background:url(/assets/img/geo.png)}.lang.en[_ngcontent-%COMP%]{background:url(/assets/img/eng.png)}.lang.inactive[_ngcontent-%COMP%]{filter:grayscale(100%)}header[_ngcontent-%COMP%]{margin:20px auto;width:600px}button[_ngcontent-%COMP%]{cursor:pointer}.user-flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.me-2[_ngcontent-%COMP%]{margin-right:20px}.ms-2[_ngcontent-%COMP%]{margin-right:8px}.btn[_ngcontent-%COMP%]{text-decoration:none;color:#000;padding:5px 20px;border:1px solid transparent;transition:.6s ease;font-size:15px;font-family:helvetica}.btn[_ngcontent-%COMP%]:hover{background-color:#576058;color:#fff}.btn[_ngcontent-%COMP%]:active{background-color:#7b8f7d;color:#fff}@media only screen and (max-width: 480px){header[_ngcontent-%COMP%]{width:100%}}"]}),D})(),Pi=(()=>{class D{constructor(h){this.translateService=h,this.title="skateboard"}useKa(){this.translateService.use("ka")}useEn(){this.translateService.use("en")}}return D.\u0275fac=function(h){return new(h||D)(L.Y36(cn.sK))},D.\u0275cmp=L.Xpm({type:D,selectors:[["app-root"]],decls:2,vars:0,template:function(h,_){1&h&&L._UZ(0,"app-header")(1,"router-outlet")},directives:[ys,Gt.lC],styles:[""]}),D})();class kr{constructor(c,h="/assets/i18n/",_=".json"){this.http=c,this.prefix=h,this.suffix=_}getTranslation(c){return this.http.get(`${this.prefix}${c}${this.suffix}`)}}var Lr=B(9646),Xr=B(9751),Gr=B(4351),Wn=B(9300);class es{}class Bi{}class Ar{constructor(c){this.normalizedNames=new Map,this.lazyUpdate=null,c?this.lazyInit="string"==typeof c?()=>{this.headers=new Map,c.split("\n").forEach(h=>{const _=h.indexOf(":");if(_>0){const M=h.slice(0,_),$=M.toLowerCase(),Y=h.slice(_+1).trim();this.maybeSetNormalizedName(M,$),this.headers.has($)?this.headers.get($).push(Y):this.headers.set($,[Y])}})}:()=>{this.headers=new Map,Object.keys(c).forEach(h=>{let _=c[h];const M=h.toLowerCase();"string"==typeof _&&(_=[_]),_.length>0&&(this.headers.set(M,_),this.maybeSetNormalizedName(h,M))})}:this.headers=new Map}has(c){return this.init(),this.headers.has(c.toLowerCase())}get(c){this.init();const h=this.headers.get(c.toLowerCase());return h&&h.length>0?h[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(c){return this.init(),this.headers.get(c.toLowerCase())||null}append(c,h){return this.clone({name:c,value:h,op:"a"})}set(c,h){return this.clone({name:c,value:h,op:"s"})}delete(c,h){return this.clone({name:c,value:h,op:"d"})}maybeSetNormalizedName(c,h){this.normalizedNames.has(h)||this.normalizedNames.set(h,c)}init(){this.lazyInit&&(this.lazyInit instanceof Ar?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(c=>this.applyUpdate(c)),this.lazyUpdate=null))}copyFrom(c){c.init(),Array.from(c.headers.keys()).forEach(h=>{this.headers.set(h,c.headers.get(h)),this.normalizedNames.set(h,c.normalizedNames.get(h))})}clone(c){const h=new Ar;return h.lazyInit=this.lazyInit&&this.lazyInit instanceof Ar?this.lazyInit:this,h.lazyUpdate=(this.lazyUpdate||[]).concat([c]),h}applyUpdate(c){const h=c.name.toLowerCase();switch(c.op){case"a":case"s":let _=c.value;if("string"==typeof _&&(_=[_]),0===_.length)return;this.maybeSetNormalizedName(c.name,h);const M=("a"===c.op?this.headers.get(h):void 0)||[];M.push(..._),this.headers.set(h,M);break;case"d":const $=c.value;if($){let Y=this.headers.get(h);if(!Y)return;Y=Y.filter(ne=>-1===$.indexOf(ne)),0===Y.length?(this.headers.delete(h),this.normalizedNames.delete(h)):this.headers.set(h,Y)}else this.headers.delete(h),this.normalizedNames.delete(h)}}forEach(c){this.init(),Array.from(this.normalizedNames.keys()).forEach(h=>c(this.normalizedNames.get(h),this.headers.get(h)))}}class oi{encodeKey(c){return zr(c)}encodeValue(c){return zr(c)}decodeKey(c){return decodeURIComponent(c)}decodeValue(c){return decodeURIComponent(c)}}const ji=/%(\d[a-f0-9])/gi,to={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function zr(D){return encodeURIComponent(D).replace(ji,(c,h)=>{var _;return null!==(_=to[h])&&void 0!==_?_:c})}function Ro(D){return`${D}`}class $i{constructor(c={}){if(this.updates=null,this.cloneFrom=null,this.encoder=c.encoder||new oi,c.fromString){if(c.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function eo(D,c){const h=new Map;return D.length>0&&D.replace(/^\?/,"").split("&").forEach(M=>{const $=M.indexOf("="),[Y,ne]=-1==$?[c.decodeKey(M),""]:[c.decodeKey(M.slice(0,$)),c.decodeValue(M.slice($+1))],me=h.get(Y)||[];me.push(ne),h.set(Y,me)}),h}(c.fromString,this.encoder)}else c.fromObject?(this.map=new Map,Object.keys(c.fromObject).forEach(h=>{const _=c.fromObject[h];this.map.set(h,Array.isArray(_)?_:[_])})):this.map=null}has(c){return this.init(),this.map.has(c)}get(c){this.init();const h=this.map.get(c);return h?h[0]:null}getAll(c){return this.init(),this.map.get(c)||null}keys(){return this.init(),Array.from(this.map.keys())}append(c,h){return this.clone({param:c,value:h,op:"a"})}appendAll(c){const h=[];return Object.keys(c).forEach(_=>{const M=c[_];Array.isArray(M)?M.forEach($=>{h.push({param:_,value:$,op:"a"})}):h.push({param:_,value:M,op:"a"})}),this.clone(h)}set(c,h){return this.clone({param:c,value:h,op:"s"})}delete(c,h){return this.clone({param:c,value:h,op:"d"})}toString(){return this.init(),this.keys().map(c=>{const h=this.encoder.encodeKey(c);return this.map.get(c).map(_=>h+"="+this.encoder.encodeValue(_)).join("&")}).filter(c=>""!==c).join("&")}clone(c){const h=new $i({encoder:this.encoder});return h.cloneFrom=this.cloneFrom||this,h.updates=(this.updates||[]).concat(c),h}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(c=>this.map.set(c,this.cloneFrom.map.get(c))),this.updates.forEach(c=>{switch(c.op){case"a":case"s":const h=("a"===c.op?this.map.get(c.param):void 0)||[];h.push(Ro(c.value)),this.map.set(c.param,h);break;case"d":if(void 0===c.value){this.map.delete(c.param);break}{let _=this.map.get(c.param)||[];const M=_.indexOf(Ro(c.value));-1!==M&&_.splice(M,1),_.length>0?this.map.set(c.param,_):this.map.delete(c.param)}}}),this.cloneFrom=this.updates=null)}}class _r{constructor(){this.map=new Map}set(c,h){return this.map.set(c,h),this}get(c){return this.map.has(c)||this.map.set(c,c.defaultValue()),this.map.get(c)}delete(c){return this.map.delete(c),this}has(c){return this.map.has(c)}keys(){return this.map.keys()}}function no(D){return"undefined"!=typeof ArrayBuffer&&D instanceof ArrayBuffer}function we(D){return"undefined"!=typeof Blob&&D instanceof Blob}function _e(D){return"undefined"!=typeof FormData&&D instanceof FormData}class Xe{constructor(c,h,_,M){let $;if(this.url=h,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=c.toUpperCase(),function ba(D){switch(D){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||M?(this.body=void 0!==_?_:null,$=M):$=_,$&&(this.reportProgress=!!$.reportProgress,this.withCredentials=!!$.withCredentials,$.responseType&&(this.responseType=$.responseType),$.headers&&(this.headers=$.headers),$.context&&(this.context=$.context),$.params&&(this.params=$.params)),this.headers||(this.headers=new Ar),this.context||(this.context=new _r),this.params){const Y=this.params.toString();if(0===Y.length)this.urlWithParams=h;else{const ne=h.indexOf("?");this.urlWithParams=h+(-1===ne?"?":ne<h.length-1?"&":"")+Y}}else this.params=new $i,this.urlWithParams=h}serializeBody(){return null===this.body?null:no(this.body)||we(this.body)||_e(this.body)||function Le(D){return"undefined"!=typeof URLSearchParams&&D instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof $i?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_e(this.body)?null:we(this.body)?this.body.type||null:no(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $i?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(c={}){var h;const _=c.method||this.method,M=c.url||this.url,$=c.responseType||this.responseType,Y=void 0!==c.body?c.body:this.body,ne=void 0!==c.withCredentials?c.withCredentials:this.withCredentials,me=void 0!==c.reportProgress?c.reportProgress:this.reportProgress;let Be=c.headers||this.headers,Pt=c.params||this.params;const Ut=null!==(h=c.context)&&void 0!==h?h:this.context;return void 0!==c.setHeaders&&(Be=Object.keys(c.setHeaders).reduce((en,$t)=>en.set($t,c.setHeaders[$t]),Be)),c.setParams&&(Pt=Object.keys(c.setParams).reduce((en,$t)=>en.set($t,c.setParams[$t]),Pt)),new Xe(_,M,Y,{params:Pt,headers:Be,context:Ut,reportProgress:me,responseType:$,withCredentials:ne})}}var st=(()=>((st=st||{})[st.Sent=0]="Sent",st[st.UploadProgress=1]="UploadProgress",st[st.ResponseHeader=2]="ResponseHeader",st[st.DownloadProgress=3]="DownloadProgress",st[st.Response=4]="Response",st[st.User=5]="User",st))();class Tt{constructor(c,h=200,_="OK"){this.headers=c.headers||new Ar,this.status=void 0!==c.status?c.status:h,this.statusText=c.statusText||_,this.url=c.url||null,this.ok=this.status>=200&&this.status<300}}class Qn extends Tt{constructor(c={}){super(c),this.type=st.ResponseHeader}clone(c={}){return new Qn({headers:c.headers||this.headers,status:void 0!==c.status?c.status:this.status,statusText:c.statusText||this.statusText,url:c.url||this.url||void 0})}}class lr extends Tt{constructor(c={}){super(c),this.type=st.Response,this.body=void 0!==c.body?c.body:null}clone(c={}){return new lr({body:void 0!==c.body?c.body:this.body,headers:c.headers||this.headers,status:void 0!==c.status?c.status:this.status,statusText:c.statusText||this.statusText,url:c.url||this.url||void 0})}}class Un extends Tt{constructor(c){super(c,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${c.url||"(unknown url)"}`:`Http failure response for ${c.url||"(unknown url)"}: ${c.status} ${c.statusText}`,this.error=c.error||null}}function Oi(D,c){return{body:c,headers:D.headers,context:D.context,observe:D.observe,params:D.params,reportProgress:D.reportProgress,responseType:D.responseType,withCredentials:D.withCredentials}}let Ni=(()=>{class D{constructor(h){this.handler=h}request(h,_,M={}){let $;if(h instanceof Xe)$=h;else{let me,Be;me=M.headers instanceof Ar?M.headers:new Ar(M.headers),M.params&&(Be=M.params instanceof $i?M.params:new $i({fromObject:M.params})),$=new Xe(h,_,void 0!==M.body?M.body:null,{headers:me,context:M.context,params:Be,reportProgress:M.reportProgress,responseType:M.responseType||"json",withCredentials:M.withCredentials})}const Y=(0,Lr.of)($).pipe((0,Gr.b)(me=>this.handler.handle(me)));if(h instanceof Xe||"events"===M.observe)return Y;const ne=Y.pipe((0,Wn.h)(me=>me instanceof lr));switch(M.observe||"body"){case"body":switch($.responseType){case"arraybuffer":return ne.pipe((0,Pn.U)(me=>{if(null!==me.body&&!(me.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return me.body}));case"blob":return ne.pipe((0,Pn.U)(me=>{if(null!==me.body&&!(me.body instanceof Blob))throw new Error("Response is not a Blob.");return me.body}));case"text":return ne.pipe((0,Pn.U)(me=>{if(null!==me.body&&"string"!=typeof me.body)throw new Error("Response is not a string.");return me.body}));default:return ne.pipe((0,Pn.U)(me=>me.body))}case"response":return ne;default:throw new Error(`Unreachable: unhandled observe type ${M.observe}}`)}}delete(h,_={}){return this.request("DELETE",h,_)}get(h,_={}){return this.request("GET",h,_)}head(h,_={}){return this.request("HEAD",h,_)}jsonp(h,_){return this.request("JSONP",h,{params:(new $i).append(_,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(h,_={}){return this.request("OPTIONS",h,_)}patch(h,_,M={}){return this.request("PATCH",h,Oi(M,_))}post(h,_,M={}){return this.request("POST",h,Oi(M,_))}put(h,_,M={}){return this.request("PUT",h,Oi(M,_))}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(es))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})();class Ls{constructor(c,h){this.next=c,this.interceptor=h}handle(c){return this.interceptor.intercept(c,this.next)}}const Fs=new L.OlP("HTTP_INTERCEPTORS");let ts=(()=>{class D{intercept(h,_){return _.handle(h)}}return D.\u0275fac=function(h){return new(h||D)},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})();const _s=/^\)\]\}',?\n/;let gi=(()=>{class D{constructor(h){this.xhrFactory=h}handle(h){if("JSONP"===h.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Xr.y(_=>{const M=this.xhrFactory.build();if(M.open(h.method,h.urlWithParams),h.withCredentials&&(M.withCredentials=!0),h.headers.forEach(($t,dt)=>M.setRequestHeader($t,dt.join(","))),h.headers.has("Accept")||M.setRequestHeader("Accept","application/json, text/plain, */*"),!h.headers.has("Content-Type")){const $t=h.detectContentTypeHeader();null!==$t&&M.setRequestHeader("Content-Type",$t)}if(h.responseType){const $t=h.responseType.toLowerCase();M.responseType="json"!==$t?$t:"text"}const $=h.serializeBody();let Y=null;const ne=()=>{if(null!==Y)return Y;const $t=M.statusText||"OK",dt=new Ar(M.getAllResponseHeaders()),an=function ro(D){return"responseURL"in D&&D.responseURL?D.responseURL:/^X-Request-URL:/m.test(D.getAllResponseHeaders())?D.getResponseHeader("X-Request-URL"):null}(M)||h.url;return Y=new Qn({headers:dt,status:M.status,statusText:$t,url:an}),Y},me=()=>{let{headers:$t,status:dt,statusText:an,url:nr}=ne(),er=null;204!==dt&&(er=void 0===M.response?M.responseText:M.response),0===dt&&(dt=er?200:0);let qr=dt>=200&&dt<300;if("json"===h.responseType&&"string"==typeof er){const Ms=er;er=er.replace(_s,"");try{er=""!==er?JSON.parse(er):null}catch(Ti){er=Ms,qr&&(qr=!1,er={error:Ti,text:er})}}qr?(_.next(new lr({body:er,headers:$t,status:dt,statusText:an,url:nr||void 0})),_.complete()):_.error(new Un({error:er,headers:$t,status:dt,statusText:an,url:nr||void 0}))},Be=$t=>{const{url:dt}=ne(),an=new Un({error:$t,status:M.status||0,statusText:M.statusText||"Unknown Error",url:dt||void 0});_.error(an)};let Pt=!1;const Ut=$t=>{Pt||(_.next(ne()),Pt=!0);let dt={type:st.DownloadProgress,loaded:$t.loaded};$t.lengthComputable&&(dt.total=$t.total),"text"===h.responseType&&!!M.responseText&&(dt.partialText=M.responseText),_.next(dt)},en=$t=>{let dt={type:st.UploadProgress,loaded:$t.loaded};$t.lengthComputable&&(dt.total=$t.total),_.next(dt)};return M.addEventListener("load",me),M.addEventListener("error",Be),M.addEventListener("timeout",Be),M.addEventListener("abort",Be),h.reportProgress&&(M.addEventListener("progress",Ut),null!==$&&M.upload&&M.upload.addEventListener("progress",en)),M.send($),_.next({type:st.Sent}),()=>{M.removeEventListener("error",Be),M.removeEventListener("abort",Be),M.removeEventListener("load",me),M.removeEventListener("timeout",Be),h.reportProgress&&(M.removeEventListener("progress",Ut),null!==$&&M.upload&&M.upload.removeEventListener("progress",en)),M.readyState!==M.DONE&&M.abort()}})}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(b.JF))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})();const Ei=new L.OlP("XSRF_COOKIE_NAME"),vo=new L.OlP("XSRF_HEADER_NAME");class Xo{}let ai=(()=>{class D{constructor(h,_,M){this.doc=h,this.platform=_,this.cookieName=M,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const h=this.doc.cookie||"";return h!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,b.Mx)(h,this.cookieName),this.lastCookieString=h),this.lastToken}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(b.K0),L.LFG(L.Lbi),L.LFG(Ei))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})(),Mr=(()=>{class D{constructor(h,_){this.tokenService=h,this.headerName=_}intercept(h,_){const M=h.url.toLowerCase();if("GET"===h.method||"HEAD"===h.method||M.startsWith("http://")||M.startsWith("https://"))return _.handle(h);const $=this.tokenService.getToken();return null!==$&&!h.headers.has(this.headerName)&&(h=h.clone({headers:h.headers.set(this.headerName,$)})),_.handle(h)}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(Xo),L.LFG(vo))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})(),io=(()=>{class D{constructor(h,_){this.backend=h,this.injector=_,this.chain=null}handle(h){if(null===this.chain){const _=this.injector.get(Fs,[]);this.chain=_.reduceRight((M,$)=>new Ls(M,$),this.backend)}return this.chain.handle(h)}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(Bi),L.LFG(L.zs3))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})(),so=(()=>{class D{static disable(){return{ngModule:D,providers:[{provide:Mr,useClass:ts}]}}static withOptions(h={}){return{ngModule:D,providers:[h.cookieName?{provide:Ei,useValue:h.cookieName}:[],h.headerName?{provide:vo,useValue:h.headerName}:[]]}}}return D.\u0275fac=function(h){return new(h||D)},D.\u0275mod=L.oAB({type:D}),D.\u0275inj=L.cJS({providers:[Mr,{provide:Fs,useExisting:Mr,multi:!0},{provide:Xo,useClass:ai},{provide:Ei,useValue:"XSRF-TOKEN"},{provide:vo,useValue:"X-XSRF-TOKEN"}]}),D})(),ha=(()=>{class D{}return D.\u0275fac=function(h){return new(h||D)},D.\u0275mod=L.oAB({type:D}),D.\u0275inj=L.cJS({providers:[Ni,{provide:es,useClass:io},gi,{provide:Bi,useExisting:gi}],imports:[[so.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),D})();class Po{}const O="*";function ce(D,c=null){return{type:2,steps:D,options:c}}function He(D){return{type:6,styles:D,offset:null}}function sr(D){Promise.resolve(null).then(D)}class ui{constructor(c=0,h=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=c+h}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(c=>c()),this._onDoneFns=[])}onStart(c){this._onStartFns.push(c)}onDone(c){this._onDoneFns.push(c)}onDestroy(c){this._onDestroyFns.push(c)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){sr(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(c=>c()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(c=>c()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(c){this._position=this.totalTime?c*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(c){const h="start"==c?this._onStartFns:this._onDoneFns;h.forEach(_=>_()),h.length=0}}class wi{constructor(c){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=c;let h=0,_=0,M=0;const $=this.players.length;0==$?sr(()=>this._onFinish()):this.players.forEach(Y=>{Y.onDone(()=>{++h==$&&this._onFinish()}),Y.onDestroy(()=>{++_==$&&this._onDestroy()}),Y.onStart(()=>{++M==$&&this._onStart()})}),this.totalTime=this.players.reduce((Y,ne)=>Math.max(Y,ne.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(c=>c()),this._onDoneFns=[])}init(){this.players.forEach(c=>c.init())}onStart(c){this._onStartFns.push(c)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(c=>c()),this._onStartFns=[])}onDone(c){this._onDoneFns.push(c)}onDestroy(c){this._onDestroyFns.push(c)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(c=>c.play())}pause(){this.players.forEach(c=>c.pause())}restart(){this.players.forEach(c=>c.restart())}finish(){this._onFinish(),this.players.forEach(c=>c.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(c=>c.destroy()),this._onDestroyFns.forEach(c=>c()),this._onDestroyFns=[])}reset(){this.players.forEach(c=>c.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(c){const h=c*this.totalTime;this.players.forEach(_=>{const M=_.totalTime?Math.min(1,h/_.totalTime):1;_.setPosition(M)})}getPosition(){const c=this.players.reduce((h,_)=>null===h||_.totalTime>h.totalTime?_:h,null);return null!=c?c.getPosition():0}beforeDestroy(){this.players.forEach(c=>{c.beforeDestroy&&c.beforeDestroy()})}triggerCallback(c){const h="start"==c?this._onStartFns:this._onDoneFns;h.forEach(_=>_()),h.length=0}}const wn=!1;function ws(D){return new L.vHH(3e3,wn)}function Ja(){return"undefined"!=typeof window&&void 0!==window.document}function Fo(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function zi(D){switch(D.length){case 0:return new ui;case 1:return D[0];default:return new wi(D)}}function Bs(D,c,h,_,M={},$={}){const Y=[],ne=[];let me=-1,Be=null;if(_.forEach(Pt=>{const Ut=Pt.offset,en=Ut==me,$t=en&&Be||{};Object.keys(Pt).forEach(dt=>{let an=dt,nr=Pt[dt];if("offset"!==dt)switch(an=c.normalizePropertyName(an,Y),nr){case"!":nr=M[dt];break;case O:nr=$[dt];break;default:nr=c.normalizeStyleValue(dt,an,nr,Y)}$t[an]=nr}),en||ne.push($t),Be=$t,me=Ut}),Y.length)throw function Ca(D){return new L.vHH(3502,wn)}();return ne}function ma(D,c,h,_){switch(c){case"start":D.onStart(()=>_(h&&li(h,"start",D)));break;case"done":D.onDone(()=>_(h&&li(h,"done",D)));break;case"destroy":D.onDestroy(()=>_(h&&li(h,"destroy",D)))}}function li(D,c,h){const _=h.totalTime,$=ao(D.element,D.triggerName,D.fromState,D.toState,c||D.phaseName,null==_?D.totalTime:_,!!h.disabled),Y=D._data;return null!=Y&&($._data=Y),$}function ao(D,c,h,_,M="",$=0,Y){return{element:D,triggerName:c,fromState:h,toState:_,phaseName:M,totalTime:$,disabled:!!Y}}function Bn(D,c,h){let _;return D instanceof Map?(_=D.get(c),_||D.set(c,_=h)):(_=D[c],_||(_=D[c]=h)),_}function Xa(D){const c=D.indexOf(":");return[D.substring(1,c),D.substr(c+1)]}let Ma=(D,c)=>!1,eu=(D,c,h)=>[],xa=null;function tu(D){const c=D.parentNode||D.host;return c===xa?null:c}(Fo()||"undefined"!=typeof Element)&&(Ja()?(xa=(()=>document.documentElement)(),Ma=(D,c)=>{for(;c;){if(c===D)return!0;c=tu(c)}return!1}):Ma=(D,c)=>D.contains(c),eu=(D,c,h)=>{if(h)return Array.from(D.querySelectorAll(c));const _=D.querySelector(c);return _?[_]:[]});let Wi=null,lo=!1;function Wr(D){Wi||(Wi=function Ii(){return"undefined"!=typeof document?document.body:null}()||{},lo=!!Wi.style&&"WebkitAppearance"in Wi.style);let c=!0;return Wi.style&&!function uo(D){return"ebkit"==D.substring(1,6)}(D)&&(c=D in Wi.style,!c&&lo&&(c="Webkit"+D.charAt(0).toUpperCase()+D.substr(1)in Wi.style)),c}const nu=Ma,Ki=eu;let Io=(()=>{class D{validateStyleProperty(h){return Wr(h)}matchesElement(h,_){return!1}containsElement(h,_){return nu(h,_)}getParentElement(h){return tu(h)}query(h,_,M){return Ki(h,_,M)}computeStyle(h,_,M){return M||""}animate(h,_,M,$,Y,ne=[],me){return new ui(M,$)}}return D.\u0275fac=function(h){return new(h||D)},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})(),Ts=(()=>{class D{}return D.NOOP=new Io,D})();const ru="ng-enter",iu="ng-leave",ei="ng-trigger",js=".ng-trigger",Kr="ng-animating",Cs=".ng-animating";function is(D){if("number"==typeof D)return D;const c=D.match(/^(-?[\.\d]+)(m?s)/);return!c||c.length<2?0:ss(parseFloat(c[1]),c[2])}function ss(D,c){return"s"===c?1e3*D:D}function Pa(D,c,h){return D.hasOwnProperty("duration")?D:function Er(D,c,h){let M,$=0,Y="";if("string"==typeof D){const ne=D.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ne)return c.push(ws()),{duration:0,delay:0,easing:""};M=ss(parseFloat(ne[1]),ne[2]);const me=ne[3];null!=me&&($=ss(parseFloat(me),ne[4]));const Be=ne[5];Be&&(Y=Be)}else M=D;if(!h){let ne=!1,me=c.length;M<0&&(c.push(function Hi(){return new L.vHH(3100,wn)}()),ne=!0),$<0&&(c.push(function ea(){return new L.vHH(3101,wn)}()),ne=!0),ne&&c.splice(me,0,ws())}return{duration:M,delay:$,easing:Y}}(D,c,h)}function Uo(D,c={}){return Object.keys(D).forEach(h=>{c[h]=D[h]}),c}function Hs(D,c,h={}){if(c)for(let _ in D)h[_]=D[_];else Uo(D,h);return h}function Gs(D,c,h){return h?c+":"+h+";":""}function dl(D){let c="";for(let h=0;h<D.style.length;h++){const _=D.style.item(h);c+=Gs(0,_,D.style.getPropertyValue(_))}for(const h in D.style)D.style.hasOwnProperty(h)&&!h.startsWith("_")&&(c+=Gs(0,E(h),D.style[h]));D.setAttribute("style",c)}function qi(D,c,h){D.style&&(Object.keys(c).forEach(_=>{const M=w(_);h&&!h.hasOwnProperty(_)&&(h[_]=D.style[M]),D.style[M]=c[_]}),Fo()&&dl(D))}function Do(D,c){D.style&&(Object.keys(c).forEach(h=>{const _=w(h);D.style[_]=""}),Fo()&&dl(D))}function Vo(D){return Array.isArray(D)?1==D.length?D[0]:ce(D):D}const os=new RegExp("{{\\s*(.+?)\\s*}}","g");function mi(D){let c=[];if("string"==typeof D){let h;for(;h=os.exec(D);)c.push(h[1]);os.lastIndex=0}return c}function zs(D,c,h){const _=D.toString(),M=_.replace(os,($,Y)=>{let ne=c[Y];return c.hasOwnProperty(Y)||(h.push(function Da(D){return new L.vHH(3003,wn)}()),ne=""),ne.toString()});return M==_?D:M}function Zi(D){const c=[];let h=D.next();for(;!h.done;)c.push(h.value),h=D.next();return c}const T=/-+([a-z0-9])/g;function w(D){return D.replace(T,(...c)=>c[1].toUpperCase())}function E(D){return D.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function j(D,c,h){switch(c.type){case 7:return D.visitTrigger(c,h);case 0:return D.visitState(c,h);case 1:return D.visitTransition(c,h);case 2:return D.visitSequence(c,h);case 3:return D.visitGroup(c,h);case 4:return D.visitAnimate(c,h);case 5:return D.visitKeyframes(c,h);case 6:return D.visitStyle(c,h);case 8:return D.visitReference(c,h);case 9:return D.visitAnimateChild(c,h);case 10:return D.visitAnimateRef(c,h);case 11:return D.visitQuery(c,h);case 12:return D.visitStagger(c,h);default:throw function rt(D){return new L.vHH(3004,wn)}()}}function re(D,c){return window.getComputedStyle(D)[c]}function Ss(D,c){const h=[];return"string"==typeof D?D.split(/\s*,\s*/).forEach(_=>function ya(D,c,h){if(":"==D[0]){const me=function ho(D,c){switch(D){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(h,_)=>parseFloat(_)>parseFloat(h);case":decrement":return(h,_)=>parseFloat(_)<parseFloat(h);default:return c.push(function ta(D){return new L.vHH(3016,wn)}()),"* => *"}}(D,h);if("function"==typeof me)return void c.push(me);D=me}const _=D.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==_||_.length<4)return h.push(function bs(D){return new L.vHH(3015,wn)}()),c;const M=_[1],$=_[2],Y=_[3];c.push(As(M,Y));"<"==$[0]&&!("*"==M&&"*"==Y)&&c.push(As(Y,M))}(_,h,c)):h.push(D),h}const as=new Set(["true","1"]),us=new Set(["false","0"]);function As(D,c){const h=as.has(D)||us.has(D),_=as.has(c)||us.has(c);return(M,$)=>{let Y="*"==D||D==M,ne="*"==c||c==$;return!Y&&h&&"boolean"==typeof M&&(Y=M?as.has(D):us.has(D)),!ne&&_&&"boolean"==typeof $&&(ne=$?as.has(c):us.has(c)),Y&&ne}}const Oa=new RegExp("s*:selfs*,?","g");function Cn(D,c,h,_){return new ci(D).build(c,h,_)}class ci{constructor(c){this._driver=c}build(c,h,_){const M=new nc(h);this._resetContextStyleTimingState(M);const $=j(this,Vo(c),M);return M.unsupportedCSSPropertiesFound.size&&M.unsupportedCSSPropertiesFound.keys(),$}_resetContextStyleTimingState(c){c.currentQuerySelector="",c.collectedStyles={},c.collectedStyles[""]={},c.currentTime=0}visitTrigger(c,h){let _=h.queryCount=0,M=h.depCount=0;const $=[],Y=[];return"@"==c.name.charAt(0)&&h.errors.push(function Za(){return new L.vHH(3006,wn)}()),c.definitions.forEach(ne=>{if(this._resetContextStyleTimingState(h),0==ne.type){const me=ne,Be=me.name;Be.toString().split(/\s*,\s*/).forEach(Pt=>{me.name=Pt,$.push(this.visitState(me,h))}),me.name=Be}else if(1==ne.type){const me=this.visitTransition(ne,h);_+=me.queryCount,M+=me.depCount,Y.push(me)}else h.errors.push(function Tr(){return new L.vHH(3007,wn)}())}),{type:7,name:c.name,states:$,transitions:Y,queryCount:_,depCount:M,options:null}}visitState(c,h){const _=this.visitStyle(c.styles,h),M=c.options&&c.options.params||null;if(_.containsDynamicStyles){const $=new Set,Y=M||{};_.styles.forEach(ne=>{if(bu(ne)){const me=ne;Object.keys(me).forEach(Be=>{mi(me[Be]).forEach(Pt=>{Y.hasOwnProperty(Pt)||$.add(Pt)})})}}),$.size&&(Zi($.values()),h.errors.push(function Ya(D,c){return new L.vHH(3008,wn)}()))}return{type:0,name:c.name,style:_,options:M?{params:M}:null}}visitTransition(c,h){h.queryCount=0,h.depCount=0;const _=j(this,Vo(c.animation),h);return{type:1,matchers:Ss(c.expr,h.errors),animation:_,queryCount:h.queryCount,depCount:h.depCount,options:Fn(c.options)}}visitSequence(c,h){return{type:2,steps:c.steps.map(_=>j(this,_,h)),options:Fn(c.options)}}visitGroup(c,h){const _=h.currentTime;let M=0;const $=c.steps.map(Y=>{h.currentTime=_;const ne=j(this,Y,h);return M=Math.max(M,h.currentTime),ne});return h.currentTime=M,{type:3,steps:$,options:Fn(c.options)}}visitAnimate(c,h){const _=function Bu(D,c){let h=null;if(D.hasOwnProperty("duration"))h=D;else if("number"==typeof D)return ra(Pa(D,c).duration,0,"");const _=D;if(_.split(/\s+/).some($=>"{"==$.charAt(0)&&"{"==$.charAt(1))){const $=ra(0,0,"");return $.dynamic=!0,$.strValue=_,$}return h=h||Pa(_,c),ra(h.duration,h.delay,h.easing)}(c.timings,h.errors);h.currentAnimateTimings=_;let M,$=c.styles?c.styles:He({});if(5==$.type)M=this.visitKeyframes($,h);else{let Y=c.styles,ne=!1;if(!Y){ne=!0;const Be={};_.easing&&(Be.easing=_.easing),Y=He(Be)}h.currentTime+=_.duration+_.delay;const me=this.visitStyle(Y,h);me.isEmptyStep=ne,M=me}return h.currentAnimateTimings=null,{type:4,timings:_,style:M,options:null}}visitStyle(c,h){const _=this._makeStyleAst(c,h);return this._validateStyleAst(_,h),_}_makeStyleAst(c,h){const _=[];Array.isArray(c.styles)?c.styles.forEach(Y=>{"string"==typeof Y?Y==O?_.push(Y):h.errors.push(function Vs(D){return new L.vHH(3002,wn)}()):_.push(Y)}):_.push(c.styles);let M=!1,$=null;return _.forEach(Y=>{if(bu(Y)){const ne=Y,me=ne.easing;if(me&&($=me,delete ne.easing),!M)for(let Be in ne)if(ne[Be].toString().indexOf("{{")>=0){M=!0;break}}}),{type:6,styles:_,easing:$,offset:c.offset,containsDynamicStyles:M,options:null}}_validateStyleAst(c,h){const _=h.currentAnimateTimings;let M=h.currentTime,$=h.currentTime;_&&$>0&&($-=_.duration+_.delay),c.styles.forEach(Y=>{"string"!=typeof Y&&Object.keys(Y).forEach(ne=>{if(!this._driver.validateStyleProperty(ne))return delete Y[ne],void h.unsupportedCSSPropertiesFound.add(ne);const me=h.collectedStyles[h.currentQuerySelector],Be=me[ne];let Pt=!0;Be&&($!=M&&$>=Be.startTime&&M<=Be.endTime&&(h.errors.push(function Ta(D,c,h,_,M){return new L.vHH(3010,wn)}()),Pt=!1),$=Be.startTime),Pt&&(me[ne]={startTime:$,endTime:M}),h.options&&function Br(D,c,h){const _=c.params||{},M=mi(D);M.length&&M.forEach($=>{_.hasOwnProperty($)||h.push(function qa(D){return new L.vHH(3001,wn)}())})}(Y[ne],h.options,h.errors)})})}visitKeyframes(c,h){const _={type:5,styles:[],options:null};if(!h.currentAnimateTimings)return h.errors.push(function Eo(){return new L.vHH(3011,wn)}()),_;let $=0;const Y=[];let ne=!1,me=!1,Be=0;const Pt=c.steps.map(er=>{const qr=this._makeStyleAst(er,h);let Ms=null!=qr.offset?qr.offset:function va(D){if("string"==typeof D)return null;let c=null;if(Array.isArray(D))D.forEach(h=>{if(bu(h)&&h.hasOwnProperty("offset")){const _=h;c=parseFloat(_.offset),delete _.offset}});else if(bu(D)&&D.hasOwnProperty("offset")){const h=D;c=parseFloat(h.offset),delete h.offset}return c}(qr.styles),Ti=0;return null!=Ms&&($++,Ti=qr.offset=Ms),me=me||Ti<0||Ti>1,ne=ne||Ti<Be,Be=Ti,Y.push(Ti),qr});me&&h.errors.push(function _u(){return new L.vHH(3012,wn)}()),ne&&h.errors.push(function Eu(){return new L.vHH(3200,wn)}());const Ut=c.steps.length;let en=0;$>0&&$<Ut?h.errors.push(function fa(){return new L.vHH(3202,wn)}()):0==$&&(en=1/(Ut-1));const $t=Ut-1,dt=h.currentTime,an=h.currentAnimateTimings,nr=an.duration;return Pt.forEach((er,qr)=>{const Ms=en>0?qr==$t?1:en*qr:Y[qr],Ti=Ms*nr;h.currentTime=dt+an.delay+Ti,an.duration=Ti,this._validateStyleAst(er,h),er.offset=Ms,_.styles.push(er)}),_}visitReference(c,h){return{type:8,animation:j(this,Vo(c.animation),h),options:Fn(c.options)}}visitAnimateChild(c,h){return h.depCount++,{type:9,options:Fn(c.options)}}visitAnimateRef(c,h){return{type:10,animation:this.visitReference(c.animation,h),options:Fn(c.options)}}visitQuery(c,h){const _=h.currentQuerySelector,M=c.options||{};h.queryCount++,h.currentQuery=c;const[$,Y]=function yi(D){const c=!!D.split(/\s*,\s*/).find(h=>":self"==h);return c&&(D=D.replace(Oa,"")),D=D.replace(/@\*/g,js).replace(/@\w+/g,h=>js+"-"+h.substr(1)).replace(/:animating/g,Cs),[D,c]}(c.selector);h.currentQuerySelector=_.length?_+" "+$:$,Bn(h.collectedStyles,h.currentQuerySelector,{});const ne=j(this,Vo(c.animation),h);return h.currentQuery=null,h.currentQuerySelector=_,{type:11,selector:$,limit:M.limit||0,optional:!!M.optional,includeSelf:Y,animation:ne,originalSelector:c.selector,options:Fn(c.options)}}visitStagger(c,h){h.currentQuery||h.errors.push(function Oo(){return new L.vHH(3013,wn)}());const _="full"===c.timings?{duration:0,delay:0,easing:"full"}:Pa(c.timings,h.errors,!0);return{type:12,animation:j(this,Vo(c.animation),h),timings:_,options:null}}}class nc{constructor(c){this.errors=c,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function bu(D){return!Array.isArray(D)&&"object"==typeof D}function Fn(D){return D?(D=Uo(D)).params&&(D.params=function fn(D){return D?Uo(D):null}(D.params)):D={},D}function ra(D,c,h){return{duration:D,delay:c,easing:h}}function bi(D,c,h,_,M,$,Y=null,ne=!1){return{type:1,element:D,keyframes:c,preStyleProps:h,postStyleProps:_,duration:M,delay:$,totalTime:M+$,easing:Y,subTimeline:ne}}class pr{constructor(){this._map=new Map}get(c){return this._map.get(c)||[]}append(c,h){let _=this._map.get(c);_||this._map.set(c,_=[]),_.push(...h)}has(c){return this._map.has(c)}clear(){this._map.clear()}}const Lc=new RegExp(":enter","g"),Kn=new RegExp(":leave","g");function vi(D,c,h,_,M,$={},Y={},ne,me,Be=[]){return(new ju).buildKeyframes(D,c,h,_,M,$,Y,ne,me,Be)}class ju{buildKeyframes(c,h,_,M,$,Y,ne,me,Be,Pt=[]){Be=Be||new pr;const Ut=new Li(c,h,Be,M,$,Pt,[]);Ut.options=me,Ut.currentTimeline.setStyles([Y],null,Ut.errors,me),j(this,_,Ut);const en=Ut.timelines.filter($t=>$t.containsAnimation());if(Object.keys(ne).length){let $t;for(let dt=en.length-1;dt>=0;dt--){const an=en[dt];if(an.element===h){$t=an;break}}$t&&!$t.allowOnlyTimelineStyles()&&$t.setStyles([ne],null,Ut.errors,me)}return en.length?en.map($t=>$t.buildKeyframes()):[bi(h,[],[],[],0,0,"",!1)]}visitTrigger(c,h){}visitState(c,h){}visitTransition(c,h){}visitAnimateChild(c,h){const _=h.subInstructions.get(h.element);if(_){const M=h.createSubContext(c.options),$=h.currentTimeline.currentTime,Y=this._visitSubInstructions(_,M,M.options);$!=Y&&h.transformIntoNewTimeline(Y)}h.previousNode=c}visitAnimateRef(c,h){const _=h.createSubContext(c.options);_.transformIntoNewTimeline(),this.visitReference(c.animation,_),h.transformIntoNewTimeline(_.currentTimeline.currentTime),h.previousNode=c}_visitSubInstructions(c,h,_){let $=h.currentTimeline.currentTime;const Y=null!=_.duration?is(_.duration):null,ne=null!=_.delay?is(_.delay):null;return 0!==Y&&c.forEach(me=>{const Be=h.appendInstructionToTimeline(me,Y,ne);$=Math.max($,Be.duration+Be.delay)}),$}visitReference(c,h){h.updateOptions(c.options,!0),j(this,c.animation,h),h.previousNode=c}visitSequence(c,h){const _=h.subContextCount;let M=h;const $=c.options;if($&&($.params||$.delay)&&(M=h.createSubContext($),M.transformIntoNewTimeline(),null!=$.delay)){6==M.previousNode.type&&(M.currentTimeline.snapshotCurrentStyles(),M.previousNode=fo);const Y=is($.delay);M.delayNextStep(Y)}c.steps.length&&(c.steps.forEach(Y=>j(this,Y,M)),M.currentTimeline.applyStylesToKeyframe(),M.subContextCount>_&&M.transformIntoNewTimeline()),h.previousNode=c}visitGroup(c,h){const _=[];let M=h.currentTimeline.currentTime;const $=c.options&&c.options.delay?is(c.options.delay):0;c.steps.forEach(Y=>{const ne=h.createSubContext(c.options);$&&ne.delayNextStep($),j(this,Y,ne),M=Math.max(M,ne.currentTimeline.currentTime),_.push(ne.currentTimeline)}),_.forEach(Y=>h.currentTimeline.mergeTimelineCollectedStyles(Y)),h.transformIntoNewTimeline(M),h.previousNode=c}_visitTiming(c,h){if(c.dynamic){const _=c.strValue;return Pa(h.params?zs(_,h.params,h.errors):_,h.errors)}return{duration:c.duration,delay:c.delay,easing:c.easing}}visitAnimate(c,h){const _=h.currentAnimateTimings=this._visitTiming(c.timings,h),M=h.currentTimeline;_.delay&&(h.incrementTime(_.delay),M.snapshotCurrentStyles());const $=c.style;5==$.type?this.visitKeyframes($,h):(h.incrementTime(_.duration),this.visitStyle($,h),M.applyStylesToKeyframe()),h.currentAnimateTimings=null,h.previousNode=c}visitStyle(c,h){const _=h.currentTimeline,M=h.currentAnimateTimings;!M&&_.getCurrentStyleProperties().length&&_.forwardFrame();const $=M&&M.easing||c.easing;c.isEmptyStep?_.applyEmptyStep($):_.setStyles(c.styles,$,h.errors,h.options),h.previousNode=c}visitKeyframes(c,h){const _=h.currentAnimateTimings,M=h.currentTimeline.duration,$=_.duration,ne=h.createSubContext().currentTimeline;ne.easing=_.easing,c.styles.forEach(me=>{ne.forwardTime((me.offset||0)*$),ne.setStyles(me.styles,me.easing,h.errors,h.options),ne.applyStylesToKeyframe()}),h.currentTimeline.mergeTimelineCollectedStyles(ne),h.transformIntoNewTimeline(M+$),h.previousNode=c}visitQuery(c,h){const _=h.currentTimeline.currentTime,M=c.options||{},$=M.delay?is(M.delay):0;$&&(6===h.previousNode.type||0==_&&h.currentTimeline.getCurrentStyleProperties().length)&&(h.currentTimeline.snapshotCurrentStyles(),h.previousNode=fo);let Y=_;const ne=h.invokeQuery(c.selector,c.originalSelector,c.limit,c.includeSelf,!!M.optional,h.errors);h.currentQueryTotal=ne.length;let me=null;ne.forEach((Be,Pt)=>{h.currentQueryIndex=Pt;const Ut=h.createSubContext(c.options,Be);$&&Ut.delayNextStep($),Be===h.element&&(me=Ut.currentTimeline),j(this,c.animation,Ut),Ut.currentTimeline.applyStylesToKeyframe(),Y=Math.max(Y,Ut.currentTimeline.currentTime)}),h.currentQueryIndex=0,h.currentQueryTotal=0,h.transformIntoNewTimeline(Y),me&&(h.currentTimeline.mergeTimelineCollectedStyles(me),h.currentTimeline.snapshotCurrentStyles()),h.previousNode=c}visitStagger(c,h){const _=h.parentContext,M=h.currentTimeline,$=c.timings,Y=Math.abs($.duration),ne=Y*(h.currentQueryTotal-1);let me=Y*h.currentQueryIndex;switch($.duration<0?"reverse":$.easing){case"reverse":me=ne-me;break;case"full":me=_.currentStaggerTime}const Pt=h.currentTimeline;me&&Pt.delayNextStep(me);const Ut=Pt.currentTime;j(this,c.animation,h),h.previousNode=c,_.currentStaggerTime=M.currentTime-Ut+(M.startTime-_.currentTimeline.startTime)}}const fo={};class Li{constructor(c,h,_,M,$,Y,ne,me){this._driver=c,this.element=h,this.subInstructions=_,this._enterClassName=M,this._leaveClassName=$,this.errors=Y,this.timelines=ne,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=fo,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=me||new Ws(this._driver,h,0),ne.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(c,h){if(!c)return;const _=c;let M=this.options;null!=_.duration&&(M.duration=is(_.duration)),null!=_.delay&&(M.delay=is(_.delay));const $=_.params;if($){let Y=M.params;Y||(Y=this.options.params={}),Object.keys($).forEach(ne=>{(!h||!Y.hasOwnProperty(ne))&&(Y[ne]=zs($[ne],Y,this.errors))})}}_copyOptions(){const c={};if(this.options){const h=this.options.params;if(h){const _=c.params={};Object.keys(h).forEach(M=>{_[M]=h[M]})}}return c}createSubContext(c=null,h,_){const M=h||this.element,$=new Li(this._driver,M,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(M,_||0));return $.previousNode=this.previousNode,$.currentAnimateTimings=this.currentAnimateTimings,$.options=this._copyOptions(),$.updateOptions(c),$.currentQueryIndex=this.currentQueryIndex,$.currentQueryTotal=this.currentQueryTotal,$.parentContext=this,this.subContextCount++,$}transformIntoNewTimeline(c){return this.previousNode=fo,this.currentTimeline=this.currentTimeline.fork(this.element,c),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(c,h,_){const M={duration:null!=h?h:c.duration,delay:this.currentTimeline.currentTime+(null!=_?_:0)+c.delay,easing:""},$=new Ks(this._driver,c.element,c.keyframes,c.preStyleProps,c.postStyleProps,M,c.stretchStartingKeyframe);return this.timelines.push($),M}incrementTime(c){this.currentTimeline.forwardTime(this.currentTimeline.duration+c)}delayNextStep(c){c>0&&this.currentTimeline.delayNextStep(c)}invokeQuery(c,h,_,M,$,Y){let ne=[];if(M&&ne.push(this.element),c.length>0){c=(c=c.replace(Lc,"."+this._enterClassName)).replace(Kn,"."+this._leaveClassName);let Be=this._driver.query(this.element,c,1!=_);0!==_&&(Be=_<0?Be.slice(Be.length+_,Be.length):Be.slice(0,_)),ne.push(...Be)}return!$&&0==ne.length&&Y.push(function ki(D){return new L.vHH(3014,wn)}()),ne}}class Ws{constructor(c,h,_,M){this._driver=c,this.element=h,this.startTime=_,this._elementTimelineStylesLookup=M,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(h),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(h,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(c){const h=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||h?(this.forwardTime(this.currentTime+c),h&&this.snapshotCurrentStyles()):this.startTime+=c}fork(c,h){return this.applyStylesToKeyframe(),new Ws(this._driver,c,h||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(c){this.applyStylesToKeyframe(),this.duration=c,this._loadKeyframe()}_updateStyle(c,h){this._localTimelineStyles[c]=h,this._globalTimelineStyles[c]=h,this._styleSummary[c]={time:this.currentTime,value:h}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(c){c&&(this._previousKeyframe.easing=c),Object.keys(this._globalTimelineStyles).forEach(h=>{this._backFill[h]=this._globalTimelineStyles[h]||O,this._currentKeyframe[h]=O}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(c,h,_,M){h&&(this._previousKeyframe.easing=h);const $=M&&M.params||{},Y=function ou(D,c){const h={};let _;return D.forEach(M=>{"*"===M?(_=_||Object.keys(c),_.forEach($=>{h[$]=O})):Hs(M,!1,h)}),h}(c,this._globalTimelineStyles);Object.keys(Y).forEach(ne=>{const me=zs(Y[ne],$,_);this._pendingStyles[ne]=me,this._localTimelineStyles.hasOwnProperty(ne)||(this._backFill[ne]=this._globalTimelineStyles.hasOwnProperty(ne)?this._globalTimelineStyles[ne]:O),this._updateStyle(ne,me)})}applyStylesToKeyframe(){const c=this._pendingStyles,h=Object.keys(c);0!=h.length&&(this._pendingStyles={},h.forEach(_=>{this._currentKeyframe[_]=c[_]}),Object.keys(this._localTimelineStyles).forEach(_=>{this._currentKeyframe.hasOwnProperty(_)||(this._currentKeyframe[_]=this._localTimelineStyles[_])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(c=>{const h=this._localTimelineStyles[c];this._pendingStyles[c]=h,this._updateStyle(c,h)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const c=[];for(let h in this._currentKeyframe)c.push(h);return c}mergeTimelineCollectedStyles(c){Object.keys(c._styleSummary).forEach(h=>{const _=this._styleSummary[h],M=c._styleSummary[h];(!_||M.time>_.time)&&this._updateStyle(h,M.value)})}buildKeyframes(){this.applyStylesToKeyframe();const c=new Set,h=new Set,_=1===this._keyframes.size&&0===this.duration;let M=[];this._keyframes.forEach((ne,me)=>{const Be=Hs(ne,!0);Object.keys(Be).forEach(Pt=>{const Ut=Be[Pt];"!"==Ut?c.add(Pt):Ut==O&&h.add(Pt)}),_||(Be.offset=me/this.duration),M.push(Be)});const $=c.size?Zi(c.values()):[],Y=h.size?Zi(h.values()):[];if(_){const ne=M[0],me=Uo(ne);ne.offset=0,me.offset=1,M=[ne,me]}return bi(this.element,M,$,Y,this.duration,this.startTime,this.easing,!1)}}class Ks extends Ws{constructor(c,h,_,M,$,Y,ne=!1){super(c,h,Y.delay),this.keyframes=_,this.preStyleProps=M,this.postStyleProps=$,this._stretchStartingKeyframe=ne,this.timings={duration:Y.duration,delay:Y.delay,easing:Y.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let c=this.keyframes,{delay:h,duration:_,easing:M}=this.timings;if(this._stretchStartingKeyframe&&h){const $=[],Y=_+h,ne=h/Y,me=Hs(c[0],!1);me.offset=0,$.push(me);const Be=Hs(c[0],!1);Be.offset=jo(ne),$.push(Be);const Pt=c.length-1;for(let Ut=1;Ut<=Pt;Ut++){let en=Hs(c[Ut],!1);en.offset=jo((h+en.offset*_)/Y),$.push(en)}_=Y,h=0,M="",c=$}return bi(this.element,c,this.preStyleProps,this.postStyleProps,_,h,M,!0)}}function jo(D,c=3){const h=Math.pow(10,c-1);return Math.round(D*h)/h}class Et{}class fl extends Et{normalizePropertyName(c,h){return w(c)}normalizeStyleValue(c,h,_,M){let $="";const Y=_.toString().trim();if(po[h]&&0!==_&&"0"!==_)if("number"==typeof _)$="px";else{const ne=_.match(/^[+-]?[\d\.]+([a-z]*)$/);ne&&0==ne[1].length&&M.push(function Ln(D,c){return new L.vHH(3005,wn)}())}return Y+$}}const po=(()=>function To(D){const c={};return D.forEach(h=>c[h]=!0),c}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function go(D,c,h,_,M,$,Y,ne,me,Be,Pt,Ut,en){return{type:0,element:D,triggerName:c,isRemovalTransition:M,fromState:h,fromStyles:$,toState:_,toStyles:Y,timelines:ne,queriedElements:me,preStyleProps:Be,postStyleProps:Pt,totalTime:Ut,errors:en}}const Zs={};class pl{constructor(c,h,_){this._triggerName=c,this.ast=h,this._stateStyles=_}match(c,h,_,M){return function _a(D,c,h,_,M){return D.some($=>$(c,h,_,M))}(this.ast.matchers,c,h,_,M)}buildStyles(c,h,_){const M=this._stateStyles["*"],$=this._stateStyles[c],Y=M?M.buildStyles(h,_):{};return $?$.buildStyles(h,_):Y}build(c,h,_,M,$,Y,ne,me,Be,Pt){const Ut=[],en=this.ast.options&&this.ast.options.params||Zs,dt=this.buildStyles(_,ne&&ne.params||Zs,Ut),an=me&&me.params||Zs,nr=this.buildStyles(M,an,Ut),er=new Set,qr=new Map,Ms=new Map,Ti="void"===M,qu={params:Object.assign(Object.assign({},en),an)},xs=Pt?[]:vi(c,h,this.ast.animation,$,Y,dt,nr,qu,Be,Ut);let di=0;if(xs.forEach(Ba=>{di=Math.max(Ba.duration+Ba.delay,di)}),Ut.length)return go(h,this._triggerName,_,M,Ti,dt,nr,[],[],qr,Ms,di,Ut);xs.forEach(Ba=>{const wa=Ba.element,ja=Bn(qr,wa,{});Ba.preStyleProps.forEach(Au=>ja[Au]=!0);const Su=Bn(Ms,wa,{});Ba.postStyleProps.forEach(Au=>Su[Au]=!0),wa!==h&&er.add(wa)});const zo=Zi(er.values());return go(h,this._triggerName,_,M,Ti,dt,nr,xs,zo,qr,Ms,di)}}class Co{constructor(c,h,_){this.styles=c,this.defaultParams=h,this.normalizer=_}buildStyles(c,h){const _={},M=Uo(this.defaultParams);return Object.keys(c).forEach($=>{const Y=c[$];null!=Y&&(M[$]=Y)}),this.styles.styles.forEach($=>{if("string"!=typeof $){const Y=$;Object.keys(Y).forEach(ne=>{let me=Y[ne];me.length>1&&(me=zs(me,M,h));const Be=this.normalizer.normalizePropertyName(ne,h);me=this.normalizer.normalizeStyleValue(ne,Be,me,h),_[Be]=me})}}),_}}class Ys{constructor(c,h,_){this.name=c,this.ast=h,this._normalizer=_,this.transitionFactories=[],this.states={},h.states.forEach(M=>{this.states[M.name]=new Co(M.style,M.options&&M.options.params||{},_)}),Du(this.states,"true","1"),Du(this.states,"false","0"),h.transitions.forEach(M=>{this.transitionFactories.push(new pl(c,M,this.states))}),this.fallbackTransition=function uu(D,c,h){return new pl(D,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Y,ne)=>!0],options:null,queryCount:0,depCount:0},c)}(c,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(c,h,_,M){return this.transitionFactories.find(Y=>Y.match(c,h,_,M))||null}matchStyles(c,h,_){return this.fallbackTransition.buildStyles(c,h,_)}}function Du(D,c,h){D.hasOwnProperty(c)?D.hasOwnProperty(h)||(D[h]=D[c]):D.hasOwnProperty(h)&&(D[c]=D[h])}const $u=new pr;class $o{constructor(c,h,_){this.bodyNode=c,this._driver=h,this._normalizer=_,this._animations={},this._playersById={},this.players=[]}register(c,h){const _=[],$=Cn(this._driver,h,_,[]);if(_.length)throw function No(D){return new L.vHH(3503,wn)}();this._animations[c]=$}_buildPlayer(c,h,_){const M=c.element,$=Bs(0,this._normalizer,0,c.keyframes,h,_);return this._driver.animate(M,$,c.duration,c.delay,c.easing,[],!0)}create(c,h,_={}){const M=[],$=this._animations[c];let Y;const ne=new Map;if($?(Y=vi(this._driver,h,$,ru,iu,{},{},_,$u,M),Y.forEach(Pt=>{const Ut=Bn(ne,Pt.element,{});Pt.postStyleProps.forEach(en=>Ut[en]=null)})):(M.push(function na(){return new L.vHH(3300,wn)}()),Y=[]),M.length)throw function Sa(D){return new L.vHH(3504,wn)}();ne.forEach((Pt,Ut)=>{Object.keys(Pt).forEach(en=>{Pt[en]=this._driver.computeStyle(Ut,en,O)})});const Be=zi(Y.map(Pt=>{const Ut=ne.get(Pt.element);return this._buildPlayer(Pt,{},Ut)}));return this._playersById[c]=Be,Be.onDestroy(()=>this.destroy(c)),this.players.push(Be),Be}destroy(c){const h=this._getPlayer(c);h.destroy(),delete this._playersById[c];const _=this.players.indexOf(h);_>=0&&this.players.splice(_,1)}_getPlayer(c){const h=this._playersById[c];if(!h)throw function xr(D){return new L.vHH(3301,wn)}();return h}listen(c,h,_,M){const $=ao(h,"","","");return ma(this._getPlayer(c),_,$,M),()=>{}}command(c,h,_,M){if("register"==_)return void this.register(c,M[0]);if("create"==_)return void this.create(c,h,M[0]||{});const $=this._getPlayer(c);switch(_){case"play":$.play();break;case"pause":$.pause();break;case"reset":$.reset();break;case"restart":$.restart();break;case"finish":$.finish();break;case"init":$.init();break;case"setPosition":$.setPosition(parseFloat(M[0]));break;case"destroy":this.destroy(c)}}}const Ho="ng-animate-queued",x="ng-animate-disabled",Te=[],Fe={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},pt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},bt="__ng_removed";class Ft{constructor(c,h=""){this.namespaceId=h;const _=c&&c.hasOwnProperty("value");if(this.value=function Tu(D){return null!=D?D:null}(_?c.value:c),_){const $=Uo(c);delete $.value,this.options=$}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(c){const h=c.params;if(h){const _=this.options.params;Object.keys(h).forEach(M=>{null==_[M]&&(_[M]=h[M])})}}}const on="void",Gn=new Ft(on);class Tn{constructor(c,h,_){this.id=c,this.hostElement=h,this._engine=_,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+c,Cr(h,this._hostClassName)}listen(c,h,_,M){if(!this._triggers.hasOwnProperty(h))throw function ga(D,c){return new L.vHH(3302,wn)}();if(null==_||0==_.length)throw function Uu(D){return new L.vHH(3303,wn)}();if(!function So(D){return"start"==D||"done"==D}(_))throw function Qa(D,c){return new L.vHH(3400,wn)}();const $=Bn(this._elementListeners,c,[]),Y={name:h,phase:_,callback:M};$.push(Y);const ne=Bn(this._engine.statesByElement,c,{});return ne.hasOwnProperty(h)||(Cr(c,ei),Cr(c,ei+"-"+h),ne[h]=Gn),()=>{this._engine.afterFlush(()=>{const me=$.indexOf(Y);me>=0&&$.splice(me,1),this._triggers[h]||delete ne[h]})}}register(c,h){return!this._triggers[c]&&(this._triggers[c]=h,!0)}_getTrigger(c){const h=this._triggers[c];if(!h)throw function Aa(D){return new L.vHH(3401,wn)}();return h}trigger(c,h,_,M=!0){const $=this._getTrigger(h),Y=new ti(this.id,h,c);let ne=this._engine.statesByElement.get(c);ne||(Cr(c,ei),Cr(c,ei+"-"+h),this._engine.statesByElement.set(c,ne={}));let me=ne[h];const Be=new Ft(_,this.id);if(!(_&&_.hasOwnProperty("value"))&&me&&Be.absorbOptions(me.options),ne[h]=Be,me||(me=Gn),Be.value!==on&&me.value===Be.value){if(!function Cd(D,c){const h=Object.keys(D),_=Object.keys(c);if(h.length!=_.length)return!1;for(let M=0;M<h.length;M++){const $=h[M];if(!c.hasOwnProperty($)||D[$]!==c[$])return!1}return!0}(me.params,Be.params)){const an=[],nr=$.matchStyles(me.value,me.params,an),er=$.matchStyles(Be.value,Be.params,an);an.length?this._engine.reportError(an):this._engine.afterFlush(()=>{Do(c,nr),qi(c,er)})}return}const en=Bn(this._engine.playersByElement,c,[]);en.forEach(an=>{an.namespaceId==this.id&&an.triggerName==h&&an.queued&&an.destroy()});let $t=$.matchTransition(me.value,Be.value,c,Be.params),dt=!1;if(!$t){if(!M)return;$t=$.fallbackTransition,dt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:c,triggerName:h,transition:$t,fromState:me,toState:Be,player:Y,isFallbackTransition:dt}),dt||(Cr(c,Ho),Y.onStart(()=>{Na(c,Ho)})),Y.onDone(()=>{let an=this.players.indexOf(Y);an>=0&&this.players.splice(an,1);const nr=this._engine.playersByElement.get(c);if(nr){let er=nr.indexOf(Y);er>=0&&nr.splice(er,1)}}),this.players.push(Y),en.push(Y),Y}deregister(c){delete this._triggers[c],this._engine.statesByElement.forEach((h,_)=>{delete h[c]}),this._elementListeners.forEach((h,_)=>{this._elementListeners.set(_,h.filter(M=>M.name!=c))})}clearElementCache(c){this._engine.statesByElement.delete(c),this._elementListeners.delete(c);const h=this._engine.playersByElement.get(c);h&&(h.forEach(_=>_.destroy()),this._engine.playersByElement.delete(c))}_signalRemovalForInnerTriggers(c,h){const _=this._engine.driver.query(c,js,!0);_.forEach(M=>{if(M[bt])return;const $=this._engine.fetchNamespacesByElement(M);$.size?$.forEach(Y=>Y.triggerLeaveAnimation(M,h,!1,!0)):this.clearElementCache(M)}),this._engine.afterFlushAnimationsDone(()=>_.forEach(M=>this.clearElementCache(M)))}triggerLeaveAnimation(c,h,_,M){const $=this._engine.statesByElement.get(c),Y=new Map;if($){const ne=[];if(Object.keys($).forEach(me=>{if(Y.set(me,$[me].value),this._triggers[me]){const Be=this.trigger(c,me,on,M);Be&&ne.push(Be)}}),ne.length)return this._engine.markElementAsRemoved(this.id,c,!0,h,Y),_&&zi(ne).onDone(()=>this._engine.processLeaveNode(c)),!0}return!1}prepareLeaveAnimationListeners(c){const h=this._elementListeners.get(c),_=this._engine.statesByElement.get(c);if(h&&_){const M=new Set;h.forEach($=>{const Y=$.name;if(M.has(Y))return;M.add(Y);const me=this._triggers[Y].fallbackTransition,Be=_[Y]||Gn,Pt=new Ft(on),Ut=new ti(this.id,Y,c);this._engine.totalQueuedPlayers++,this._queue.push({element:c,triggerName:Y,transition:me,fromState:Be,toState:Pt,player:Ut,isFallbackTransition:!0})})}}removeNode(c,h){const _=this._engine;if(c.childElementCount&&this._signalRemovalForInnerTriggers(c,h),this.triggerLeaveAnimation(c,h,!0))return;let M=!1;if(_.totalAnimations){const $=_.players.length?_.playersByQueriedElement.get(c):[];if($&&$.length)M=!0;else{let Y=c;for(;Y=Y.parentNode;)if(_.statesByElement.get(Y)){M=!0;break}}}if(this.prepareLeaveAnimationListeners(c),M)_.markElementAsRemoved(this.id,c,!1,h);else{const $=c[bt];(!$||$===Fe)&&(_.afterFlush(()=>this.clearElementCache(c)),_.destroyInnerAnimations(c),_._onRemovalComplete(c,h))}}insertNode(c,h){Cr(c,this._hostClassName)}drainQueuedTransitions(c){const h=[];return this._queue.forEach(_=>{const M=_.player;if(M.destroyed)return;const $=_.element,Y=this._elementListeners.get($);Y&&Y.forEach(ne=>{if(ne.name==_.triggerName){const me=ao($,_.triggerName,_.fromState.value,_.toState.value);me._data=c,ma(_.player,ne.phase,me,ne.callback)}}),M.markedForDestroy?this._engine.afterFlush(()=>{M.destroy()}):h.push(_)}),this._queue=[],h.sort((_,M)=>{const $=_.transition.ast.depCount,Y=M.transition.ast.depCount;return 0==$||0==Y?$-Y:this._engine.driver.containsElement(_.element,M.element)?1:-1})}destroy(c){this.players.forEach(h=>h.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,c)}elementContainsData(c){let h=!1;return this._elementListeners.has(c)&&(h=!0),h=!!this._queue.find(_=>_.element===c)||h,h}}class Rr{constructor(c,h,_){this.bodyNode=c,this.driver=h,this._normalizer=_,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(M,$)=>{}}_onRemovalComplete(c,h){this.onRemovalComplete(c,h)}get queuedPlayers(){const c=[];return this._namespaceList.forEach(h=>{h.players.forEach(_=>{_.queued&&c.push(_)})}),c}createNamespace(c,h){const _=new Tn(c,h,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,h)?this._balanceNamespaceList(_,h):(this.newHostElements.set(h,_),this.collectEnterElement(h)),this._namespaceLookup[c]=_}_balanceNamespaceList(c,h){const _=this._namespaceList,M=this.namespacesByHostElement,$=_.length-1;if($>=0){let Y=!1;if(void 0!==this.driver.getParentElement){let ne=this.driver.getParentElement(h);for(;ne;){const me=M.get(ne);if(me){const Be=_.indexOf(me);_.splice(Be+1,0,c),Y=!0;break}ne=this.driver.getParentElement(ne)}}else for(let ne=$;ne>=0;ne--)if(this.driver.containsElement(_[ne].hostElement,h)){_.splice(ne+1,0,c),Y=!0;break}Y||_.unshift(c)}else _.push(c);return M.set(h,c),c}register(c,h){let _=this._namespaceLookup[c];return _||(_=this.createNamespace(c,h)),_}registerTrigger(c,h,_){let M=this._namespaceLookup[c];M&&M.register(h,_)&&this.totalAnimations++}destroy(c,h){if(!c)return;const _=this._fetchNamespace(c);this.afterFlush(()=>{this.namespacesByHostElement.delete(_.hostElement),delete this._namespaceLookup[c];const M=this._namespaceList.indexOf(_);M>=0&&this._namespaceList.splice(M,1)}),this.afterFlushAnimationsDone(()=>_.destroy(h))}_fetchNamespace(c){return this._namespaceLookup[c]}fetchNamespacesByElement(c){const h=new Set,_=this.statesByElement.get(c);if(_){const M=Object.keys(_);for(let $=0;$<M.length;$++){const Y=_[M[$]].namespaceId;if(Y){const ne=this._fetchNamespace(Y);ne&&h.add(ne)}}}return h}trigger(c,h,_,M){if(Di(h)){const $=this._fetchNamespace(c);if($)return $.trigger(h,_,M),!0}return!1}insertNode(c,h,_,M){if(!Di(h))return;const $=h[bt];if($&&$.setForRemoval){$.setForRemoval=!1,$.setForMove=!0;const Y=this.collectedLeaveElements.indexOf(h);Y>=0&&this.collectedLeaveElements.splice(Y,1)}if(c){const Y=this._fetchNamespace(c);Y&&Y.insertNode(h,_)}M&&this.collectEnterElement(h)}collectEnterElement(c){this.collectedEnterElements.push(c)}markElementAsDisabled(c,h){h?this.disabledNodes.has(c)||(this.disabledNodes.add(c),Cr(c,x)):this.disabledNodes.has(c)&&(this.disabledNodes.delete(c),Na(c,x))}removeNode(c,h,_,M){if(Di(h)){const $=c?this._fetchNamespace(c):null;if($?$.removeNode(h,M):this.markElementAsRemoved(c,h,!1,M),_){const Y=this.namespacesByHostElement.get(h);Y&&Y.id!==c&&Y.removeNode(h,M)}}else this._onRemovalComplete(h,M)}markElementAsRemoved(c,h,_,M,$){this.collectedLeaveElements.push(h),h[bt]={namespaceId:c,setForRemoval:M,hasAnimation:_,removedBeforeQueried:!1,previousTriggersValues:$}}listen(c,h,_,M,$){return Di(h)?this._fetchNamespace(c).listen(h,_,M,$):()=>{}}_buildInstruction(c,h,_,M,$){return c.transition.build(this.driver,c.element,c.fromState.value,c.toState.value,_,M,c.fromState.options,c.toState.options,h,$)}destroyInnerAnimations(c){let h=this.driver.query(c,js,!0);h.forEach(_=>this.destroyActiveAnimationsForElement(_)),0!=this.playersByQueriedElement.size&&(h=this.driver.query(c,Cs,!0),h.forEach(_=>this.finishActiveQueriedAnimationOnElement(_)))}destroyActiveAnimationsForElement(c){const h=this.playersByElement.get(c);h&&h.forEach(_=>{_.queued?_.markedForDestroy=!0:_.destroy()})}finishActiveQueriedAnimationOnElement(c){const h=this.playersByQueriedElement.get(c);h&&h.forEach(_=>_.finish())}whenRenderingDone(){return new Promise(c=>{if(this.players.length)return zi(this.players).onDone(()=>c());c()})}processLeaveNode(c){var h;const _=c[bt];if(_&&_.setForRemoval){if(c[bt]=Fe,_.namespaceId){this.destroyInnerAnimations(c);const M=this._fetchNamespace(_.namespaceId);M&&M.clearElementCache(c)}this._onRemovalComplete(c,_.setForRemoval)}(null===(h=c.classList)||void 0===h?void 0:h.contains(x))&&this.markElementAsDisabled(c,!1),this.driver.query(c,".ng-animate-disabled",!0).forEach(M=>{this.markElementAsDisabled(M,!1)})}flush(c=-1){let h=[];if(this.newHostElements.size&&(this.newHostElements.forEach((_,M)=>this._balanceNamespaceList(_,M)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let _=0;_<this.collectedEnterElements.length;_++)Cr(this.collectedEnterElements[_],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const _=[];try{h=this._flushAnimations(_,c)}finally{for(let M=0;M<_.length;M++)_[M]()}}else for(let _=0;_<this.collectedLeaveElements.length;_++)this.processLeaveNode(this.collectedLeaveElements[_]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(_=>_()),this._flushFns=[],this._whenQuietFns.length){const _=this._whenQuietFns;this._whenQuietFns=[],h.length?zi(h).onDone(()=>{_.forEach(M=>M())}):_.forEach(M=>M())}}reportError(c){throw function ko(D){return new L.vHH(3402,wn)}()}_flushAnimations(c,h){const _=new pr,M=[],$=new Map,Y=[],ne=new Map,me=new Map,Be=new Map,Pt=new Set;this.disabledNodes.forEach(Wt=>{Pt.add(Wt);const rn=this.driver.query(Wt,".ng-animate-queued",!0);for(let tn=0;tn<rn.length;tn++)Pt.add(rn[tn])});const Ut=this.bodyNode,en=Array.from(this.statesByElement.keys()),$t=Gu(en,this.collectedEnterElements),dt=new Map;let an=0;$t.forEach((Wt,rn)=>{const tn=ru+an++;dt.set(rn,tn),Wt.forEach(un=>Cr(un,tn))});const nr=[],er=new Set,qr=new Set;for(let Wt=0;Wt<this.collectedLeaveElements.length;Wt++){const rn=this.collectedLeaveElements[Wt],tn=rn[bt];tn&&tn.setForRemoval&&(nr.push(rn),er.add(rn),tn.hasAnimation?this.driver.query(rn,".ng-star-inserted",!0).forEach(un=>er.add(un)):qr.add(rn))}const Ms=new Map,Ti=Gu(en,Array.from(er));Ti.forEach((Wt,rn)=>{const tn=iu+an++;Ms.set(rn,tn),Wt.forEach(un=>Cr(un,tn))}),c.push(()=>{$t.forEach((Wt,rn)=>{const tn=dt.get(rn);Wt.forEach(un=>Na(un,tn))}),Ti.forEach((Wt,rn)=>{const tn=Ms.get(rn);Wt.forEach(un=>Na(un,tn))}),nr.forEach(Wt=>{this.processLeaveNode(Wt)})});const qu=[],xs=[];for(let Wt=this._namespaceList.length-1;Wt>=0;Wt--)this._namespaceList[Wt].drainQueuedTransitions(h).forEach(tn=>{const un=tn.player,Ci=tn.element;if(qu.push(un),this.collectedEnterElements.length){const Qi=Ci[bt];if(Qi&&Qi.setForMove){if(Qi.previousTriggersValues&&Qi.previousTriggersValues.has(tn.triggerName)){const Ha=Qi.previousTriggersValues.get(tn.triggerName),Mo=this.statesByElement.get(tn.element);Mo&&Mo[tn.triggerName]&&(Mo[tn.triggerName].value=Ha)}return void un.destroy()}}const Sn=!Ut||!this.driver.containsElement(Ut,Ci),qn=Ms.get(Ci),$a=dt.get(Ci),wr=this._buildInstruction(tn,_,$a,qn,Sn);if(wr.errors&&wr.errors.length)return void xs.push(wr);if(Sn)return un.onStart(()=>Do(Ci,wr.fromStyles)),un.onDestroy(()=>qi(Ci,wr.toStyles)),void M.push(un);if(tn.isFallbackTransition)return un.onStart(()=>Do(Ci,wr.fromStyles)),un.onDestroy(()=>qi(Ci,wr.toStyles)),void M.push(un);const lc=[];wr.timelines.forEach(Qi=>{Qi.stretchStartingKeyframe=!0,this.disabledNodes.has(Qi.element)||lc.push(Qi)}),wr.timelines=lc,_.append(Ci,wr.timelines),Y.push({instruction:wr,player:un,element:Ci}),wr.queriedElements.forEach(Qi=>Bn(ne,Qi,[]).push(un)),wr.preStyleProps.forEach((Qi,Ha)=>{const Mo=Object.keys(Qi);if(Mo.length){let Mu=me.get(Ha);Mu||me.set(Ha,Mu=new Set),Mo.forEach($c=>Mu.add($c))}}),wr.postStyleProps.forEach((Qi,Ha)=>{const Mo=Object.keys(Qi);let Mu=Be.get(Ha);Mu||Be.set(Ha,Mu=new Set),Mo.forEach($c=>Mu.add($c))})});if(xs.length){const Wt=[];xs.forEach(rn=>{Wt.push(function Lo(D,c){return new L.vHH(3505,wn)}())}),qu.forEach(rn=>rn.destroy()),this.reportError(Wt)}const di=new Map,zo=new Map;Y.forEach(Wt=>{const rn=Wt.element;_.has(rn)&&(zo.set(rn,rn),this._beforeAnimationBuild(Wt.player.namespaceId,Wt.instruction,di))}),M.forEach(Wt=>{const rn=Wt.element;this._getPreviousPlayers(rn,!1,Wt.namespaceId,Wt.triggerName,null).forEach(un=>{Bn(di,rn,[]).push(un),un.destroy()})});const Ba=nr.filter(Wt=>ka(Wt,me,Be)),wa=new Map;Ao(wa,this.driver,qr,Be,O).forEach(Wt=>{ka(Wt,me,Be)&&Ba.push(Wt)});const Su=new Map;$t.forEach((Wt,rn)=>{Ao(Su,this.driver,new Set(Wt),me,"!")}),Ba.forEach(Wt=>{const rn=wa.get(Wt),tn=Su.get(Wt);wa.set(Wt,Object.assign(Object.assign({},rn),tn))});const Au=[],hi=[],tr={};Y.forEach(Wt=>{const{element:rn,player:tn,instruction:un}=Wt;if(_.has(rn)){if(Pt.has(rn))return tn.onDestroy(()=>qi(rn,un.toStyles)),tn.disabled=!0,tn.overrideTotalTime(un.totalTime),void M.push(tn);let Ci=tr;if(zo.size>1){let qn=rn;const $a=[];for(;qn=qn.parentNode;){const wr=zo.get(qn);if(wr){Ci=wr;break}$a.push(qn)}$a.forEach(wr=>zo.set(wr,Ci))}const Sn=this._buildAnimation(tn.namespaceId,un,di,$,Su,wa);if(tn.setRealPlayer(Sn),Ci===tr)Au.push(tn);else{const qn=this.playersByElement.get(Ci);qn&&qn.length&&(tn.parentPlayer=zi(qn)),M.push(tn)}}else Do(rn,un.fromStyles),tn.onDestroy(()=>qi(rn,un.toStyles)),hi.push(tn),Pt.has(rn)&&M.push(tn)}),hi.forEach(Wt=>{const rn=$.get(Wt.element);if(rn&&rn.length){const tn=zi(rn);Wt.setRealPlayer(tn)}}),M.forEach(Wt=>{Wt.parentPlayer?Wt.syncPlayerEvents(Wt.parentPlayer):Wt.destroy()});for(let Wt=0;Wt<nr.length;Wt++){const rn=nr[Wt],tn=rn[bt];if(Na(rn,iu),tn&&tn.hasAnimation)continue;let un=[];if(ne.size){let Sn=ne.get(rn);Sn&&Sn.length&&un.push(...Sn);let qn=this.driver.query(rn,Cs,!0);for(let $a=0;$a<qn.length;$a++){let wr=ne.get(qn[$a]);wr&&wr.length&&un.push(...wr)}}const Ci=un.filter(Sn=>!Sn.destroyed);Ci.length?zu(this,rn,Ci):this.processLeaveNode(rn)}return nr.length=0,Au.forEach(Wt=>{this.players.push(Wt),Wt.onDone(()=>{Wt.destroy();const rn=this.players.indexOf(Wt);this.players.splice(rn,1)}),Wt.play()}),Au}elementContainsData(c,h){let _=!1;const M=h[bt];return M&&M.setForRemoval&&(_=!0),this.playersByElement.has(h)&&(_=!0),this.playersByQueriedElement.has(h)&&(_=!0),this.statesByElement.has(h)&&(_=!0),this._fetchNamespace(c).elementContainsData(h)||_}afterFlush(c){this._flushFns.push(c)}afterFlushAnimationsDone(c){this._whenQuietFns.push(c)}_getPreviousPlayers(c,h,_,M,$){let Y=[];if(h){const ne=this.playersByQueriedElement.get(c);ne&&(Y=ne)}else{const ne=this.playersByElement.get(c);if(ne){const me=!$||$==on;ne.forEach(Be=>{Be.queued||!me&&Be.triggerName!=M||Y.push(Be)})}}return(_||M)&&(Y=Y.filter(ne=>!(_&&_!=ne.namespaceId||M&&M!=ne.triggerName))),Y}_beforeAnimationBuild(c,h,_){const $=h.element,Y=h.isRemovalTransition?void 0:c,ne=h.isRemovalTransition?void 0:h.triggerName;for(const me of h.timelines){const Be=me.element,Pt=Be!==$,Ut=Bn(_,Be,[]);this._getPreviousPlayers(Be,Pt,Y,ne,h.toState).forEach($t=>{const dt=$t.getRealPlayer();dt.beforeDestroy&&dt.beforeDestroy(),$t.destroy(),Ut.push($t)})}Do($,h.fromStyles)}_buildAnimation(c,h,_,M,$,Y){const ne=h.triggerName,me=h.element,Be=[],Pt=new Set,Ut=new Set,en=h.timelines.map(dt=>{const an=dt.element;Pt.add(an);const nr=an[bt];if(nr&&nr.removedBeforeQueried)return new ui(dt.duration,dt.delay);const er=an!==me,qr=function Fc(D){const c=[];return rc(D,c),c}((_.get(an)||Te).map(di=>di.getRealPlayer())).filter(di=>!!di.element&&di.element===an),Ms=$.get(an),Ti=Y.get(an),qu=Bs(0,this._normalizer,0,dt.keyframes,Ms,Ti),xs=this._buildPlayer(dt,qu,qr);if(dt.subTimeline&&M&&Ut.add(an),er){const di=new ti(c,ne,an);di.setRealPlayer(xs),Be.push(di)}return xs});Be.forEach(dt=>{Bn(this.playersByQueriedElement,dt.element,[]).push(dt),dt.onDone(()=>function lu(D,c,h){let _;if(D instanceof Map){if(_=D.get(c),_){if(_.length){const M=_.indexOf(h);_.splice(M,1)}0==_.length&&D.delete(c)}}else if(_=D[c],_){if(_.length){const M=_.indexOf(h);_.splice(M,1)}0==_.length&&delete D[c]}return _}(this.playersByQueriedElement,dt.element,dt))}),Pt.forEach(dt=>Cr(dt,Kr));const $t=zi(en);return $t.onDestroy(()=>{Pt.forEach(dt=>Na(dt,Kr)),qi(me,h.toStyles)}),Ut.forEach(dt=>{Bn(M,dt,[]).push($t)}),$t}_buildPlayer(c,h,_){return h.length>0?this.driver.animate(c.element,h,c.duration,c.delay,c.easing,_):new ui(c.duration,c.delay)}}class ti{constructor(c,h,_){this.namespaceId=c,this.triggerName=h,this.element=_,this._player=new ui,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(c){this._containsRealPlayer||(this._player=c,Object.keys(this._queuedCallbacks).forEach(h=>{this._queuedCallbacks[h].forEach(_=>ma(c,h,void 0,_))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(c.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(c){this.totalTime=c}syncPlayerEvents(c){const h=this._player;h.triggerCallback&&c.onStart(()=>h.triggerCallback("start")),c.onDone(()=>this.finish()),c.onDestroy(()=>this.destroy())}_queueEvent(c,h){Bn(this._queuedCallbacks,c,[]).push(h)}onDone(c){this.queued&&this._queueEvent("done",c),this._player.onDone(c)}onStart(c){this.queued&&this._queueEvent("start",c),this._player.onStart(c)}onDestroy(c){this.queued&&this._queueEvent("destroy",c),this._player.onDestroy(c)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(c){this.queued||this._player.setPosition(c)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(c){const h=this._player;h.triggerCallback&&h.triggerCallback(c)}}function Di(D){return D&&1===D.nodeType}function Qs(D,c){const h=D.style.display;return D.style.display=null!=c?c:"none",h}function Ao(D,c,h,_,M){const $=[];h.forEach(me=>$.push(Qs(me)));const Y=[];_.forEach((me,Be)=>{const Pt={};me.forEach(Ut=>{const en=Pt[Ut]=c.computeStyle(Be,Ut,M);(!en||0==en.length)&&(Be[bt]=pt,Y.push(Be))}),D.set(Be,Pt)});let ne=0;return h.forEach(me=>Qs(me,$[ne++])),Y}function Gu(D,c){const h=new Map;if(D.forEach(ne=>h.set(ne,[])),0==c.length)return h;const M=new Set(c),$=new Map;function Y(ne){if(!ne)return 1;let me=$.get(ne);if(me)return me;const Be=ne.parentNode;return me=h.has(Be)?Be:M.has(Be)?1:Y(Be),$.set(ne,me),me}return c.forEach(ne=>{const me=Y(ne);1!==me&&h.get(me).push(ne)}),h}function Cr(D,c){var h;null===(h=D.classList)||void 0===h||h.add(c)}function Na(D,c){var h;null===(h=D.classList)||void 0===h||h.remove(c)}function zu(D,c,h){zi(h).onDone(()=>D.processLeaveNode(c))}function rc(D,c){for(let h=0;h<D.length;h++){const _=D[h];_ instanceof wi?rc(_.players,c):c.push(_)}}function ka(D,c,h){const _=h.get(D);if(!_)return!1;let M=c.get(D);return M?_.forEach($=>M.add($)):c.set(D,_),h.delete(D),!0}class cu{constructor(c,h,_){this.bodyNode=c,this._driver=h,this._normalizer=_,this._triggerCache={},this.onRemovalComplete=(M,$)=>{},this._transitionEngine=new Rr(c,h,_),this._timelineEngine=new $o(c,h,_),this._transitionEngine.onRemovalComplete=(M,$)=>this.onRemovalComplete(M,$)}registerTrigger(c,h,_,M,$){const Y=c+"-"+M;let ne=this._triggerCache[Y];if(!ne){const me=[],Pt=Cn(this._driver,$,me,[]);if(me.length)throw function pa(D,c){return new L.vHH(3404,wn)}();ne=function au(D,c,h){return new Ys(D,c,h)}(M,Pt,this._normalizer),this._triggerCache[Y]=ne}this._transitionEngine.registerTrigger(h,M,ne)}register(c,h){this._transitionEngine.register(c,h)}destroy(c,h){this._transitionEngine.destroy(c,h)}onInsert(c,h,_,M){this._transitionEngine.insertNode(c,h,_,M)}onRemove(c,h,_,M){this._transitionEngine.removeNode(c,h,M||!1,_)}disableAnimations(c,h){this._transitionEngine.markElementAsDisabled(c,h)}process(c,h,_,M){if("@"==_.charAt(0)){const[$,Y]=Xa(_);this._timelineEngine.command($,h,Y,M)}else this._transitionEngine.trigger(c,h,_,M)}listen(c,h,_,M,$){if("@"==_.charAt(0)){const[Y,ne]=Xa(_);return this._timelineEngine.listen(Y,h,ne,$)}return this._transitionEngine.listen(c,h,_,M,$)}flush(c=-1){this._transitionEngine.flush(c)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let du=(()=>{class D{constructor(h,_,M){this._element=h,this._startStyles=_,this._endStyles=M,this._state=0;let $=D.initialStylesByElement.get(h);$||D.initialStylesByElement.set(h,$={}),this._initialStyles=$}start(){this._state<1&&(this._startStyles&&qi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qi(this._element,this._initialStyles),this._endStyles&&(qi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(D.initialStylesByElement.delete(this._element),this._startStyles&&(Do(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Do(this._element,this._endStyles),this._endStyles=null),qi(this._element,this._initialStyles),this._state=3)}}return D.initialStylesByElement=new WeakMap,D})();function La(D){let c=null;const h=Object.keys(D);for(let _=0;_<h.length;_++){const M=h[_];Rl(M)&&(c=c||{},c[M]=D[M])}return c}function Rl(D){return"display"===D||"position"===D}class Uc{constructor(c,h,_,M){this.element=c,this.keyframes=h,this.options=_,this._specialStyles=M,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=_.duration,this._delay=_.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(c=>c()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const c=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,c,this.options),this._finalKeyframe=c.length?c[c.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(c,h,_){return c.animate(h,_)}onStart(c){this._onStartFns.push(c)}onDone(c){this._onDoneFns.push(c)}onDestroy(c){this._onDestroyFns.push(c)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(c=>c()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(c=>c()),this._onDestroyFns=[])}setPosition(c){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=c*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const c={};if(this.hasStarted()){const h=this._finalKeyframe;Object.keys(h).forEach(_=>{"offset"!=_&&(c[_]=this._finished?h[_]:re(this.element,_))})}this.currentSnapshot=c}triggerCallback(c){const h="start"==c?this._onStartFns:this._onDoneFns;h.forEach(_=>_()),h.length=0}}class Vc{validateStyleProperty(c){return Wr(c)}matchesElement(c,h){return!1}containsElement(c,h){return nu(c,h)}getParentElement(c){return tu(c)}query(c,h,_){return Ki(c,h,_)}computeStyle(c,h,_){return window.getComputedStyle(c)[h]}animate(c,h,_,M,$,Y=[]){const me={duration:_,delay:M,fill:0==M?"both":"forwards"};$&&(me.easing=$);const Be={},Pt=Y.filter(en=>en instanceof Uc);(function R(D,c){return 0===D||0===c})(_,M)&&Pt.forEach(en=>{let $t=en.currentSnapshot;Object.keys($t).forEach(dt=>Be[dt]=$t[dt])}),h=function N(D,c,h){const _=Object.keys(h);if(_.length&&c.length){let $=c[0],Y=[];if(_.forEach(ne=>{$.hasOwnProperty(ne)||Y.push(ne),$[ne]=h[ne]}),Y.length)for(var M=1;M<c.length;M++){let ne=c[M];Y.forEach(function(me){ne[me]=re(D,me)})}}return c}(c,h=h.map(en=>Hs(en,!1)),Be);const Ut=function Sd(D,c){let h=null,_=null;return Array.isArray(c)&&c.length?(h=La(c[0]),c.length>1&&(_=La(c[c.length-1]))):c&&(h=La(c)),h||_?new du(D,h,_):null}(c,h);return new Uc(c,h,me,Ut)}}let Fa=(()=>{class D extends Po{constructor(h,_){super(),this._nextAnimationId=0,this._renderer=h.createRenderer(_.body,{id:"0",encapsulation:L.ifc.None,styles:[],data:{animation:[]}})}build(h){const _=this._nextAnimationId.toString();this._nextAnimationId++;const M=Array.isArray(h)?ce(h):h;return Cu(this._renderer,null,_,"register",[M]),new Bc(_,this._renderer)}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(L.FYo),L.LFG(b.K0))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})();class Bc extends class Jn{}{constructor(c,h){super(),this._id=c,this._renderer=h}create(c,h){return new Ua(this._id,c,h||{},this._renderer)}}class Ua{constructor(c,h,_,M){this.id=c,this.element=h,this._renderer=M,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",_)}_listen(c,h){return this._renderer.listen(this.element,`@@${this.id}:${c}`,h)}_command(c,...h){return Cu(this._renderer,this.element,this.id,c,h)}onDone(c){this._listen("done",c)}onStart(c){this._listen("start",c)}onDestroy(c){this._listen("destroy",c)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(c){this._command("setPosition",c)}getPosition(){var c,h;return null!==(h=null===(c=this._renderer.engine.players[+this.id])||void 0===c?void 0:c.getPosition())&&void 0!==h?h:0}}function Cu(D,c,h,_,M){return D.setProperty(c,`@@${h}:${_}`,M)}const Pl="@.disabled";let gl=(()=>{class D{constructor(h,_,M){this.delegate=h,this.engine=_,this._zone=M,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),_.onRemovalComplete=($,Y)=>{const ne=null==Y?void 0:Y.parentNode($);ne&&Y.removeChild(ne,$)}}createRenderer(h,_){const $=this.delegate.createRenderer(h,_);if(!(h&&_&&_.data&&_.data.animation)){let Pt=this._rendererCache.get($);return Pt||(Pt=new ic("",$,this.engine),this._rendererCache.set($,Pt)),Pt}const Y=_.id,ne=_.id+"-"+this._currentId;this._currentId++,this.engine.register(ne,h);const me=Pt=>{Array.isArray(Pt)?Pt.forEach(me):this.engine.registerTrigger(Y,ne,h,Pt.name,Pt)};return _.data.animation.forEach(me),new Va(this,ne,$,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(h,_,M){h>=0&&h<this._microtaskId?this._zone.run(()=>_(M)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach($=>{const[Y,ne]=$;Y(ne)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([_,M]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(L.FYo),L.LFG(cu),L.LFG(L.R0b))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})();class ic{constructor(c,h,_){this.namespaceId=c,this.delegate=h,this.engine=_,this.destroyNode=this.delegate.destroyNode?M=>h.destroyNode(M):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(c,h){return this.delegate.createElement(c,h)}createComment(c){return this.delegate.createComment(c)}createText(c){return this.delegate.createText(c)}appendChild(c,h){this.delegate.appendChild(c,h),this.engine.onInsert(this.namespaceId,h,c,!1)}insertBefore(c,h,_,M=!0){this.delegate.insertBefore(c,h,_),this.engine.onInsert(this.namespaceId,h,c,M)}removeChild(c,h,_){this.engine.onRemove(this.namespaceId,h,this.delegate,_)}selectRootElement(c,h){return this.delegate.selectRootElement(c,h)}parentNode(c){return this.delegate.parentNode(c)}nextSibling(c){return this.delegate.nextSibling(c)}setAttribute(c,h,_,M){this.delegate.setAttribute(c,h,_,M)}removeAttribute(c,h,_){this.delegate.removeAttribute(c,h,_)}addClass(c,h){this.delegate.addClass(c,h)}removeClass(c,h){this.delegate.removeClass(c,h)}setStyle(c,h,_,M){this.delegate.setStyle(c,h,_,M)}removeStyle(c,h,_){this.delegate.removeStyle(c,h,_)}setProperty(c,h,_){"@"==h.charAt(0)&&h==Pl?this.disableAnimations(c,!!_):this.delegate.setProperty(c,h,_)}setValue(c,h){this.delegate.setValue(c,h)}listen(c,h,_){return this.delegate.listen(c,h,_)}disableAnimations(c,h){this.engine.disableAnimations(c,h)}}class Va extends ic{constructor(c,h,_,M){super(h,_,M),this.factory=c,this.namespaceId=h}setProperty(c,h,_){"@"==h.charAt(0)?"."==h.charAt(1)&&h==Pl?this.disableAnimations(c,_=void 0===_||!!_):this.engine.process(this.namespaceId,c,h.substr(1),_):this.delegate.setProperty(c,h,_)}listen(c,h,_){if("@"==h.charAt(0)){const M=function mo(D){switch(D){case"body":return document.body;case"document":return document;case"window":return window;default:return D}}(c);let $=h.substr(1),Y="";return"@"!=$.charAt(0)&&([$,Y]=function sc(D){const c=D.indexOf(".");return[D.substring(0,c),D.substr(c+1)]}($)),this.engine.listen(this.namespaceId,M,$,Y,ne=>{this.factory.scheduleListenerCallback(ne._data||-1,_,ne)})}return this.delegate.listen(c,h,_)}}let Wu=(()=>{class D extends cu{constructor(h,_,M){super(h.body,_,M)}ngOnDestroy(){this.flush()}}return D.\u0275fac=function(h){return new(h||D)(L.LFG(b.K0),L.LFG(Ts),L.LFG(Et))},D.\u0275prov=L.Yz7({token:D,factory:D.\u0275fac}),D})();const kl=new L.OlP("AnimationModuleType"),oc=[{provide:Po,useClass:Fa},{provide:Et,useFactory:function Ol(){return new fl}},{provide:cu,useClass:Wu},{provide:L.FYo,useFactory:function Nl(D,c,h){return new gl(D,c,h)},deps:[Je,cu,L.R0b]}],ac=[{provide:Ts,useFactory:()=>new Vc},{provide:kl,useValue:"BrowserAnimations"},...oc],uc=[{provide:Ts,useClass:Io},{provide:kl,useValue:"NoopAnimations"},...oc];let jc=(()=>{class D{static withConfig(h){return{ngModule:D,providers:h.disableAnimations?uc:ac}}}return D.\u0275fac=function(h){return new(h||D)},D.\u0275mod=L.oAB({type:D}),D.\u0275inj=L.cJS({providers:ac,imports:[Hn]}),D})();function Ku(D){return new kr(D,"assets/i18n/")}let ml=(()=>{class D{}return D.\u0275fac=function(h){return new(h||D)},D.\u0275mod=L.oAB({type:D,bootstrap:[Pi]}),D.\u0275inj=L.cJS({providers:[Ni],imports:[[Hn,ha,ps,jc,gn.hO.initializeApp(Yt_firebase),cn.aw.forRoot({loader:{provide:cn.Zw,useFactory:Ku,deps:[Ni]},defaultLanguage:"ka"})]]}),D})();(0,L.G48)(),ri().bootstrapModule(ml).catch(D=>console.error(D))},440:(Mt,Ue,B)=>{B.d(Ue,{nm:()=>Gr});var b=B(5813);B(5e3),B(5867);var et=B(5861),Re=B(9681),ue=B(4859),gt=B(2090),mt=B(1877);const Pe=new Map,fe={activated:!1,tokenObservers:[]},ke={initialized:!1,enabled:!1};function Oe(we){return Pe.get(we)||fe}function le(we,_e){Pe.set(we,_e)}function Je(){return ke}class $e{constructor(_e,Le,Xe,st,Tt){if(this.operation=_e,this.retryPolicy=Le,this.getWaitDuration=Xe,this.lowerBound=st,this.upperBound=Tt,this.pending=null,this.nextErrorWaitInterval=st,st>Tt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(_e){var Le=this;return(0,et.Z)(function*(){Le.stop();try{Le.pending=new gt.BH,yield function ot(we){return new Promise(_e=>{setTimeout(_e,we)})}(Le.getNextRun(_e)),Le.pending.resolve(),yield Le.pending.promise,Le.pending=new gt.BH,yield Le.operation(),Le.pending.resolve(),yield Le.pending.promise,Le.process(!0).catch(()=>{})}catch(Xe){Le.retryPolicy(Xe)?Le.process(!1).catch(()=>{}):Le.stop()}})()}getNextRun(_e){if(_e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Le=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Le}}}const lt=new gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ot(we){if(!Oe(we).activated)throw lt.create("use-before-activation",{appName:we.name})}function Ir(we,_e){return ir.apply(this,arguments)}function ir(){return(ir=(0,et.Z)(function*({url:we,body:_e},Le){const Xe={"Content-Type":"application/json"},st=Le.getImmediate({optional:!0});if(st){const Ls=yield st.getHeartbeatsHeader();Ls&&(Xe["X-Firebase-Client"]=Ls)}const Tt={method:"POST",body:JSON.stringify(_e),headers:Xe};let Qn,lr;try{Qn=yield fetch(we,Tt)}catch(Ls){throw lt.create("fetch-network-error",{originalErrorMessage:Ls.message})}if(200!==Qn.status)throw lt.create("fetch-status-error",{httpStatus:Qn.status});try{lr=yield Qn.json()}catch(Ls){throw lt.create("fetch-parse-error",{originalErrorMessage:Ls.message})}const Un=lr.ttl.match(/^([\d.]+)(s)$/);if(!Un||!Un[2]||isNaN(Number(Un[1])))throw lt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${lr.ttl}`});const Oi=1e3*Number(Un[1]),Ni=Date.now();return{token:lr.attestationToken,expireTimeMillis:Ni+Oi,issuedAtTimeMillis:Ni}})).apply(this,arguments)}function Hn(we,_e){const{projectId:Le,appId:Xe,apiKey:st}=we.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${Le}/apps/${Xe}:exchangeDebugToken?key=${st}`,body:{debug_token:_e}}}const zn="firebase-app-check-store";let xn=null;function ii(){return xn||(xn=new Promise((we,_e)=>{try{const Le=indexedDB.open("firebase-app-check-database",1);Le.onsuccess=Xe=>{we(Xe.target.result)},Le.onerror=Xe=>{var st;_e(lt.create("storage-open",{originalErrorMessage:null===(st=Xe.target.error)||void 0===st?void 0:st.message}))},Le.onupgradeneeded=Xe=>{0===Xe.oldVersion&&Xe.target.result.createObjectStore(zn,{keyPath:"compositeKey"})}}catch(Le){_e(lt.create("storage-open",{originalErrorMessage:Le.message}))}}),xn)}function Dt(){return(Dt=(0,et.Z)(function*(we,_e){const Xe=(yield ii()).transaction(zn,"readwrite"),Tt=Xe.objectStore(zn).put({compositeKey:we,value:_e});return new Promise((Qn,lr)=>{Tt.onsuccess=Un=>{Qn()},Xe.onerror=Un=>{var Oi;lr(lt.create("storage-set",{originalErrorMessage:null===(Oi=Un.target.error)||void 0===Oi?void 0:Oi.message}))}})})).apply(this,arguments)}const Qr=new mt.Yd("@firebase/app-check");function Jr(we,_e){return(0,gt.hl)()?function or(we,_e){return function si(we,_e){return Dt.apply(this,arguments)}(function dr(we){return`${we.options.appId}-${we.name}`}(we),_e)}(we,_e).catch(Le=>{Qr.warn(`Failed to write token to IndexedDB. Error: ${Le}`)}):Promise.resolve()}function Vr(){return Je().enabled}function vn(){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,et.Z)(function*(){const we=Je();if(we.enabled&&we.token)return we.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ct={error:"UNKNOWN_ERROR"};function Zt(we){return gt.US.encodeString(JSON.stringify(we),!1)}function bn(we){return _n.apply(this,arguments)}function _n(){return(_n=(0,et.Z)(function*(we,_e=!1){const Le=we.app;Ot(Le);const Xe=Oe(Le);let Tt,st=Xe.token;if(!st){const Un=yield Xe.cachedTokenPromise;Un&&yt(Un)&&(st=Un)}if(!_e&&st&&yt(st))return{token:st.token};let lr,Qn=!1;if(Vr()){Xe.exchangeTokenPromise||(Xe.exchangeTokenPromise=Ir(Hn(Le,yield vn()),we.heartbeatServiceProvider).then(Oi=>(Xe.exchangeTokenPromise=void 0,Oi)),Qn=!0);const Un=yield Xe.exchangeTokenPromise;return yield Jr(Le,Un),le(Le,Object.assign(Object.assign({},Xe),{token:Un})),{token:Un.token}}try{Xe.exchangeTokenPromise||(Xe.exchangeTokenPromise=Xe.provider.getToken().then(Un=>(Xe.exchangeTokenPromise=void 0,Un)),Qn=!0),st=yield Xe.exchangeTokenPromise}catch(Un){"appCheck/throttled"===Un.code?Qr.warn(Un.message):Qr.error(Un),Tt=Un}return st?(lr={token:st.token},le(Le,Object.assign(Object.assign({},Xe),{token:st})),yield Jr(Le,st)):lr=Yt(Tt),Qn&&xe(Le,lr),lr})).apply(this,arguments)}function ee(we,_e){const Le=Oe(we),Xe=Le.tokenObservers.filter(st=>st.next!==_e);0===Xe.length&&Le.tokenRefresher&&Le.tokenRefresher.isRunning()&&Le.tokenRefresher.stop(),le(we,Object.assign(Object.assign({},Le),{tokenObservers:Xe}))}function ve(we){const{app:_e}=we,Le=Oe(_e);let Xe=Le.tokenRefresher;Xe||(Xe=function ze(we){const{app:_e}=we;return new $e((0,et.Z)(function*(){let Xe;if(Xe=Oe(_e).token?yield bn(we,!0):yield bn(we),Xe.error)throw Xe.error}),()=>!0,()=>{const Le=Oe(_e);if(Le.token){let Xe=Le.token.issuedAtTimeMillis+.5*(Le.token.expireTimeMillis-Le.token.issuedAtTimeMillis)+3e5;return Xe=Math.min(Xe,Le.token.expireTimeMillis-3e5),Math.max(0,Xe-Date.now())}return 0},3e4,96e4)}(we),le(_e,Object.assign(Object.assign({},Le),{tokenRefresher:Xe}))),!Xe.isRunning()&&Le.isTokenAutoRefreshEnabled&&Xe.start()}function xe(we,_e){const Le=Oe(we).tokenObservers;for(const Xe of Le)try{"EXTERNAL"===Xe.type&&null!=_e.error?Xe.error(_e.error):Xe.next(_e)}catch(st){}}function yt(we){return we.expireTimeMillis-Date.now()>0}function Yt(we){return{token:Zt(Ct),error:we}}class gn{constructor(_e,Le){this.app=_e,this.heartbeatServiceProvider=Le}_delete(){const{tokenObservers:_e}=Oe(this.app);for(const Le of _e)ee(this.app,Le.next);return Promise.resolve()}}const Pi="app-check-internal";!function kr(){(0,Re._registerComponent)(new ue.wA("app-check",we=>function Gt(we,_e){return new gn(we,_e)}(we.getProvider("app").getImmediate(),we.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((we,_e,Le)=>{we.getProvider(Pi).initialize()})),(0,Re._registerComponent)(new ue.wA(Pi,we=>function cn(we){return{getToken:_e=>bn(we,_e),addTokenListener:_e=>function de(we,_e,Le,Xe){const{app:st}=we,Tt=Oe(st),Qn={next:Le,error:Xe,type:_e};if(le(st,Object.assign(Object.assign({},Tt),{tokenObservers:[...Tt.tokenObservers,Qn]})),Tt.token&&yt(Tt.token)){const lr=Tt.token;Promise.resolve().then(()=>{Le({token:lr.token}),ve(we)}).catch(()=>{})}Tt.cachedTokenPromise.then(()=>ve(we))}(we,"INTERNAL",_e),removeTokenListener:_e=>ee(we.app,_e)}}(we.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Re.registerVersion)("@firebase/app-check","0.5.5")}();class Gr{constructor(){return(0,b.vb)("app-check")}}"undefined"!=typeof window&&window},3385:(Mt,Ue,B)=>{B.d(Ue,{zQ:()=>Oe,rT:()=>mt,f7:()=>fe,L6:()=>ue,_Q:()=>gt,lh:()=>Pe,Qv:()=>Re,nw:()=>ke});var b=B(5e3),L=B(7579),q=B(9646),Ee=B(9751),he=B(8996),De=B(6451),Ie=B(3900),Ce=B(576);function Se(Je,be){return(0,Ce.m)(be)?(0,Ie.w)(()=>Je,be):(0,Ie.w)(()=>Je)}var ae=B(5363),oe=B(4004),pe=B(3151),at=B(590),qe=B(9468),Qe=B(9300),vt=B(5813),Ge=B(2011),Ke=B(9808),_t=B(440);B(127);const Re=new b.OlP("angularfire2.auth.use-emulator"),ue=new b.OlP("angularfire2.auth.settings"),gt=new b.OlP("angularfire2.auth.tenant-id"),mt=new b.OlP("angularfire2.auth.langugage-code"),Pe=new b.OlP("angularfire2.auth.use-device-language"),fe=new b.OlP("angularfire.auth.persistence"),ke=(Je,be,Vt,pn,Ve,tt,te,$e)=>(0,Ge.cc)(`${Je.name}.auth`,"AngularFireAuth",Je.name,()=>{const ot=be.runOutsideAngular(()=>Je.auth());if(Vt&&ot.useEmulator(...Vt),pn&&(ot.tenantId=pn),ot.languageCode=Ve,tt&&ot.useDeviceLanguage(),te)for(const[Rt,lt]of Object.entries(te))ot.settings[Rt]=lt;return $e&&ot.setPersistence($e),ot},[Vt,pn,Ve,tt,te,$e]);let Oe=(()=>{class Je{constructor(Vt,pn,Ve,tt,te,$e,ot,Rt,lt,In,Ot,qt){const Mn=new L.x,$n=(0,q.of)(void 0).pipe((0,ae.Q)(te.outsideAngular),(0,Ie.w)(()=>tt.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,4087)))),(0,oe.U)(()=>(0,Ge.on)(Vt,tt,pn)),(0,oe.U)(Ir=>ke(Ir,tt,$e,Rt,lt,In,ot,Ot)),(0,pe.d)({bufferSize:1,refCount:!1}));if((0,Ke.PM)(Ve))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,q.of)(null);else{$n.pipe((0,at.P)()).subscribe();const ir=$n.pipe((0,Ie.w)(Hn=>Hn.getRedirectResult().then(br=>br,()=>null)),vt.iC,(0,pe.d)({bufferSize:1,refCount:!1})),ri=$n.pipe((0,Ie.w)(Hn=>new Ee.y(br=>({unsubscribe:tt.runOutsideAngular(()=>Hn.onAuthStateChanged(Lt=>br.next(Lt),Lt=>br.error(Lt),()=>br.complete()))})))),Pr=$n.pipe((0,Ie.w)(Hn=>new Ee.y(br=>({unsubscribe:tt.runOutsideAngular(()=>Hn.onIdTokenChanged(Lt=>br.next(Lt),Lt=>br.error(Lt),()=>br.complete()))}))));this.authState=ir.pipe(Se(ri),(0,qe.R)(te.outsideAngular),(0,ae.Q)(te.insideAngular)),this.user=ir.pipe(Se(Pr),(0,qe.R)(te.outsideAngular),(0,ae.Q)(te.insideAngular)),this.idToken=this.user.pipe((0,Ie.w)(Hn=>Hn?(0,he.D)(Hn.getIdToken()):(0,q.of)(null))),this.idTokenResult=this.user.pipe((0,Ie.w)(Hn=>Hn?(0,he.D)(Hn.getIdTokenResult()):(0,q.of)(null))),this.credential=(0,De.T)(ir,Mn,this.authState.pipe((0,Qe.h)(Hn=>!Hn))).pipe((0,oe.U)(Hn=>(null==Hn?void 0:Hn.user)?Hn:null),(0,qe.R)(te.outsideAngular),(0,ae.Q)(te.insideAngular))}return(0,Ge.pX)(this,$n,tt,{spy:{apply:(Ir,ir,ri)=>{(Ir.startsWith("signIn")||Ir.startsWith("createUser"))&&ri.then(Pr=>Mn.next(Pr))}}})}}return Je.\u0275fac=function(Vt){return new(Vt||Je)(b.LFG(Ge.Dh),b.LFG(Ge.xv,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(vt.HU),b.LFG(Re,8),b.LFG(ue,8),b.LFG(gt,8),b.LFG(mt,8),b.LFG(Pe,8),b.LFG(fe,8),b.LFG(_t.nm,8))},Je.\u0275prov=b.Yz7({token:Je,factory:Je.\u0275fac,providedIn:"any"}),Je})()},2011:(Mt,Ue,B)=>{B.d(Ue,{hO:()=>at,xv:()=>Se,Dh:()=>Ce,GT:()=>De,cc:()=>qe,on:()=>ae,pX:()=>he});var b=B(5e3),L=B(127),q=B(5813);Mt=B.hmd(Mt);const Ee=["ngOnDestroy"],he=(Ke,_t,xt,et={})=>new Proxy(Ke,{get:(Re,ue)=>xt.runOutsideAngular(()=>{var gt;if(Ke[ue])return(null===(gt=null==et?void 0:et.spy)||void 0===gt?void 0:gt.get)&&et.spy.get(ue,Ke[ue]),Ke[ue];if(Ee.indexOf(ue)>-1)return()=>{};const mt=_t.toPromise().then(Pe=>{const fe=Pe&&Pe[ue];return"function"==typeof fe?fe.bind(Pe):fe&&fe.then?fe.then(ke=>xt.run(()=>ke)):xt.run(()=>fe)});return new Proxy(()=>{},{get:(Pe,fe)=>mt[fe],apply:(Pe,fe,ke)=>mt.then(Oe=>{var le;const Je=Oe&&Oe(...ke);return(null===(le=null==et?void 0:et.spy)||void 0===le?void 0:le.apply)&&et.spy.apply(ue,ke,Je),Je})})})}),De=(Ke,_t)=>{_t.forEach(xt=>{Object.getOwnPropertyNames(xt.prototype||xt).forEach(et=>{Object.defineProperty(Ke.prototype,et,Object.getOwnPropertyDescriptor(xt.prototype||xt,et))})})};class Ie{constructor(_t){return _t}}const Ce=new b.OlP("angularfire2.app.options"),Se=new b.OlP("angularfire2.app.name");function ae(Ke,_t,xt){const Re="object"==typeof xt&&xt||{};Re.name=Re.name||"string"==typeof xt&&xt||"[DEFAULT]";const gt=L.Z.apps.filter(mt=>mt&&mt.name===Re.name)[0]||_t.runOutsideAngular(()=>L.Z.initializeApp(Ke,Re));try{JSON.stringify(Ke)!==JSON.stringify(gt.options)&&oe("error",`${gt.name} Firebase App already initialized with different options${Mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(mt){}return new Ie(gt)}const oe=(Ke,..._t)=>{(0,b.X6Q)()&&"undefined"!=typeof console&&console[Ke](..._t)},pe={provide:Ie,useFactory:ae,deps:[Ce,b.R0b,[new b.FiY,Se]]};let at=(()=>{class Ke{constructor(xt){L.Z.registerVersion("angularfire",q.q4.full,"core"),L.Z.registerVersion("angularfire",q.q4.full,"app-compat"),L.Z.registerVersion("angular",b.q4F.full,xt.toString())}static initializeApp(xt,et){return{ngModule:Ke,providers:[{provide:Ce,useValue:xt},{provide:Se,useValue:et}]}}}return Ke.\u0275fac=function(xt){return new(xt||Ke)(b.LFG(b.Lbi))},Ke.\u0275mod=b.oAB({type:Ke}),Ke.\u0275inj=b.cJS({providers:[pe]}),Ke})();function qe(Ke,_t,xt,et,Re){const[,ue,gt]=globalThis.\u0275AngularfireInstanceCache.find(mt=>mt[0]===Ke)||[];if(ue)return function Qe(Ke,_t){try{return Ke.toString()===_t.toString()}catch(xt){return Ke===_t}}(Re,gt)||(Ge("error",`${_t} was already initialized on the ${xt} Firebase App with different settings.${vt?" You may need to reload as Firebase is not HMR aware.":""}`),Ge("warn",{is:Re,was:gt})),ue;{const mt=et();return globalThis.\u0275AngularfireInstanceCache.push([Ke,mt,Re]),mt}}const vt=!!Mt.hot,Ge=(Ke,..._t)=>{(0,b.X6Q)()&&"undefined"!=typeof console&&console[Ke](..._t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Mt,Ue,B)=>{B.d(Ue,{q4:()=>ju,iC:()=>$u,HU:()=>_a,vb:()=>To,JM:()=>po});var b=B(5e3),L=B(5867),q=B(5861),Ee=B(9681),he=B(2090),De=B(4859),Ie=B(1877);const Ce="@firebase/installations",oe="w:0.5.7",pe="FIS_v2",Ke=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function _t(x){return x instanceof he.ZR&&x.code.includes("request-failed")}function xt({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function et(x){return{token:x.token,requestStatus:2,expiresIn:ke(x.expiresIn),creationTime:Date.now()}}function Re(x,k){return ue.apply(this,arguments)}function ue(){return(ue=(0,q.Z)(function*(x,k){const ie=(yield k.json()).error;return Ke.create("request-failed",{requestName:x,serverCode:ie.code,serverMessage:ie.message,serverStatus:ie.status})})).apply(this,arguments)}function gt({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function mt(x,{refreshToken:k}){const G=gt(x);return G.append("Authorization",function Oe(x){return`${pe} ${x}`}(k)),G}function Pe(x){return fe.apply(this,arguments)}function fe(){return(fe=(0,q.Z)(function*(x){const k=yield x();return k.status>=500&&k.status<600?x():k})).apply(this,arguments)}function ke(x){return Number(x.replace("s","000"))}function le(x,k){return Je.apply(this,arguments)}function Je(){return(Je=(0,q.Z)(function*({appConfig:x,heartbeatServiceProvider:k},{fid:G}){const ie=xt(x),Te=gt(x),Fe=k.getImmediate({optional:!0});if(Fe){const on=yield Fe.getHeartbeatsHeader();on&&Te.append("x-firebase-client",on)}const bt={method:"POST",headers:Te,body:JSON.stringify({fid:G,authVersion:pe,appId:x.appId,sdkVersion:oe})},Ft=yield Pe(()=>fetch(ie,bt));if(Ft.ok){const on=yield Ft.json();return{fid:on.fid||G,registrationStatus:2,refreshToken:on.refreshToken,authToken:et(on.authToken)}}throw yield Re("Create Installation",Ft)})).apply(this,arguments)}function be(x){return new Promise(k=>{setTimeout(k,x)})}const pn=/^[cdef][\w-]{21}$/;function tt(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const G=function te(x){return function Vt(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return pn.test(G)?G:""}catch(x){return""}}function $e(x){return`${x.appName}!${x.appId}`}const ot=new Map;function Rt(x,k){const G=$e(x);Ot(G,k),function qt(x,k){const G=function $n(){return!Mn&&"BroadcastChannel"in self&&(Mn=new BroadcastChannel("[Firebase] FID Change"),Mn.onmessage=x=>{Ot(x.data.key,x.data.fid)}),Mn}();G&&G.postMessage({key:x,fid:k}),function Ir(){0===ot.size&&Mn&&(Mn.close(),Mn=null)}()}(G,k)}function Ot(x,k){const G=ot.get(x);if(G)for(const ie of G)ie(k)}let Mn=null;const Pr="firebase-installations-store";let Hn=null;function br(){return Hn||(Hn=(0,he.X3)("firebase-installations-database",1,(x,k)=>{0===k&&x.createObjectStore(Pr)})),Hn}function Lt(x,k){return zn.apply(this,arguments)}function zn(){return(zn=(0,q.Z)(function*(x,k){const G=$e(x),Te=(yield br()).transaction(Pr,"readwrite"),Fe=Te.objectStore(Pr),pt=yield Fe.get(G);return yield Fe.put(k,G),yield Te.complete,(!pt||pt.fid!==k.fid)&&Rt(x,k.fid),k})).apply(this,arguments)}function Or(x){return xn.apply(this,arguments)}function xn(){return(xn=(0,q.Z)(function*(x){const k=$e(x),ie=(yield br()).transaction(Pr,"readwrite");yield ie.objectStore(Pr).delete(k),yield ie.complete})).apply(this,arguments)}function ii(x,k){return fs.apply(this,arguments)}function fs(){return(fs=(0,q.Z)(function*(x,k){const G=$e(x),Te=(yield br()).transaction(Pr,"readwrite"),Fe=Te.objectStore(Pr),pt=yield Fe.get(G),bt=k(pt);return void 0===bt?yield Fe.delete(G):yield Fe.put(bt,G),yield Te.complete,bt&&(!pt||pt.fid!==bt.fid)&&Rt(x,bt.fid),bt})).apply(this,arguments)}function or(x){return $r.apply(this,arguments)}function $r(){return($r=(0,q.Z)(function*(x){let k;const G=yield ii(x.appConfig,ie=>{const Te=Ui(ie),Fe=si(x,Te);return k=Fe.registrationPromise,Fe.installationEntry});return""===G.fid?{installationEntry:yield k}:{installationEntry:G,registrationPromise:k}})).apply(this,arguments)}function Ui(x){return Rn(x||{fid:tt(),registrationStatus:0})}function si(x,k){if(0===k.registrationStatus){if(!navigator.onLine)return{installationEntry:k,registrationPromise:Promise.reject(Ke.create("app-offline"))};const G={fid:k.fid,registrationStatus:1,registrationTime:Date.now()},ie=function Dt(x,k){return Bt.apply(this,arguments)}(x,G);return{installationEntry:G,registrationPromise:ie}}return 1===k.registrationStatus?{installationEntry:k,registrationPromise:zt(x)}:{installationEntry:k}}function Bt(){return(Bt=(0,q.Z)(function*(x,k){try{const G=yield le(x,k);return Lt(x.appConfig,G)}catch(G){throw _t(G)&&409===G.customData.serverCode?yield Or(x.appConfig):yield Lt(x.appConfig,{fid:k.fid,registrationStatus:0}),G}})).apply(this,arguments)}function zt(x){return dr.apply(this,arguments)}function dr(){return(dr=(0,q.Z)(function*(x){let k=yield Qr(x.appConfig);for(;1===k.registrationStatus;)yield be(100),k=yield Qr(x.appConfig);if(0===k.registrationStatus){const{installationEntry:G,registrationPromise:ie}=yield or(x);return ie||G}return k})).apply(this,arguments)}function Qr(x){return ii(x,k=>{if(!k)throw Ke.create("installation-not-found");return Rn(k)})}function Rn(x){return function Ji(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function Jr(x,k){return ar.apply(this,arguments)}function ar(){return(ar=(0,q.Z)(function*({appConfig:x,heartbeatServiceProvider:k},G){const ie=Ht(x,G),Te=mt(x,G),Fe=k.getImmediate({optional:!0});if(Fe){const on=yield Fe.getHeartbeatsHeader();on&&Te.append("x-firebase-client",on)}const bt={method:"POST",headers:Te,body:JSON.stringify({installation:{sdkVersion:oe,appId:x.appId}})},Ft=yield Pe(()=>fetch(ie,bt));if(Ft.ok)return et(yield Ft.json());throw yield Re("Generate Auth Token",Ft)})).apply(this,arguments)}function Ht(x,{fid:k}){return`${xt(x)}/${k}/authTokens:generate`}function Vr(x){return vn.apply(this,arguments)}function vn(){return(vn=(0,q.Z)(function*(x,k=!1){let G;const ie=yield ii(x.appConfig,Fe=>{if(!_n(Fe))throw Ke.create("not-registered");const pt=Fe.authToken;if(!k&&de(pt))return Fe;if(1===pt.requestStatus)return G=Nt(x,k),Fe;{if(!navigator.onLine)throw Ke.create("app-offline");const bt=ve(Fe);return G=Zt(x,bt),bt}});return G?yield G:ie.authToken})).apply(this,arguments)}function Nt(x,k){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,q.Z)(function*(x,k){let G=yield Ct(x.appConfig);for(;1===G.authToken.requestStatus;)yield be(100),G=yield Ct(x.appConfig);const ie=G.authToken;return 0===ie.requestStatus?Vr(x,k):ie})).apply(this,arguments)}function Ct(x){return ii(x,k=>{if(!_n(k))throw Ke.create("not-registered");return function ze(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(k.authToken)?Object.assign(Object.assign({},k),{authToken:{requestStatus:0}}):k})}function Zt(x,k){return bn.apply(this,arguments)}function bn(){return(bn=(0,q.Z)(function*(x,k){try{const G=yield Jr(x,k),ie=Object.assign(Object.assign({},k),{authToken:G});return yield Lt(x.appConfig,ie),G}catch(G){if(!_t(G)||401!==G.customData.serverCode&&404!==G.customData.serverCode){const ie=Object.assign(Object.assign({},k),{authToken:{requestStatus:0}});yield Lt(x.appConfig,ie)}else yield Or(x.appConfig);throw G}})).apply(this,arguments)}function _n(x){return void 0!==x&&2===x.registrationStatus}function de(x){return 2===x.requestStatus&&!function ee(x){const k=Date.now();return k<x.creationTime||x.creationTime+x.expiresIn<k+36e5}(x)}function ve(x){const k={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:k})}function yt(){return(yt=(0,q.Z)(function*(x){const k=x,{installationEntry:G,registrationPromise:ie}=yield or(k);return ie?ie.catch(console.error):Vr(k).catch(console.error),G.fid})).apply(this,arguments)}function gn(){return(gn=(0,q.Z)(function*(x,k=!1){const G=x;return yield Gt(G),(yield Vr(G,k)).token})).apply(this,arguments)}function Gt(x){return cn.apply(this,arguments)}function cn(){return(cn=(0,q.Z)(function*(x){const{registrationPromise:k}=yield or(x);k&&(yield k)})).apply(this,arguments)}function Dr(x){return Ke.create("missing-app-config-values",{valueName:x})}const Vi="installations",ht=x=>{const k=x.getProvider("app").getImmediate(),G=function Hr(x){if(!x||!x.options)throw Dr("App Configuration");if(!x.name)throw Dr("App Name");const k=["projectId","apiKey","appId"];for(const G of k)if(!x.options[G])throw Dr(G);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(k);return{app:k,appConfig:G,heartbeatServiceProvider:(0,Ee._getProvider)(k,"heartbeat"),_delete:()=>Promise.resolve()}},hn=x=>{const k=x.getProvider("app").getImmediate(),G=(0,Ee._getProvider)(k,Vi).getImmediate();return{getId:()=>function xe(x){return yt.apply(this,arguments)}(G),getToken:Te=>function Yt(x){return gn.apply(this,arguments)}(G,Te)}};(function Zn(){(0,Ee._registerComponent)(new De.wA(Vi,ht,"PUBLIC")),(0,Ee._registerComponent)(new De.wA("installations-internal",hn,"PRIVATE"))})(),(0,Ee.registerVersion)(Ce,"0.5.7"),(0,Ee.registerVersion)(Ce,"0.5.7","esm2017");const On="@firebase/remote-config",Sr=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ro{constructor(k,G,ie,Te){this.client=k,this.storage=G,this.storageCache=ie,this.logger=Te}isCachedDataFresh(k,G){if(!G)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ie=Date.now()-G,Te=ie<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ie}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${Te}.`),Te}fetch(k){var G=this;return(0,q.Z)(function*(){const[ie,Te]=yield Promise.all([G.storage.getLastSuccessfulFetchTimestampMillis(),G.storage.getLastSuccessfulFetchResponse()]);if(Te&&G.isCachedDataFresh(k.cacheMaxAgeMillis,ie))return Te;k.eTag=Te&&Te.eTag;const Fe=yield G.client.fetch(k),pt=[G.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Fe.status&&pt.push(G.storage.setLastSuccessfulFetchResponse(Fe)),yield Promise.all(pt),Fe})()}}function $i(x=navigator){return x.languages&&x.languages[0]||x.language}class ks{constructor(k,G,ie,Te,Fe,pt){this.firebaseInstallations=k,this.sdkVersion=G,this.namespace=ie,this.projectId=Te,this.apiKey=Fe,this.appId=pt}fetch(k){var G=this;return(0,q.Z)(function*(){const[ie,Te]=yield Promise.all([G.firebaseInstallations.getId(),G.firebaseInstallations.getToken()]),pt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${G.projectId}/namespaces/${G.namespace}:fetch?key=${G.apiKey}`,bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},Ft={sdk_version:G.sdkVersion,app_instance_id:ie,app_instance_id_token:Te,app_id:G.appId,language_code:$i()},on={method:"POST",headers:bt,body:JSON.stringify(Ft)},Gn=fetch(pt,on),Tn=new Promise((So,Qs)=>{k.signal.addEventListener(()=>{const Ao=new Error("The operation was aborted.");Ao.name="AbortError",Qs(Ao)})});let Rr;try{yield Promise.race([Gn,Tn]),Rr=yield Gn}catch(So){let Qs="fetch-client-network";throw"AbortError"===So.name&&(Qs="fetch-timeout"),Sr.create(Qs,{originalErrorMessage:So.message})}let ti=Rr.status;const lu=Rr.headers.get("ETag")||void 0;let Tu,Di;if(200===Rr.status){let So;try{So=yield Rr.json()}catch(Qs){throw Sr.create("fetch-client-parse",{originalErrorMessage:Qs.message})}Tu=So.entries,Di=So.state}if("INSTANCE_STATE_UNSPECIFIED"===Di?ti=500:"NO_CHANGE"===Di?ti=304:("NO_TEMPLATE"===Di||"EMPTY_CONFIG"===Di)&&(Tu={}),304!==ti&&200!==ti)throw Sr.create("fetch-status",{httpStatus:ti});return{status:ti,eTag:lu,config:Tu}})()}}class no{constructor(k,G){this.client=k,this.storage=G}fetch(k){var G=this;return(0,q.Z)(function*(){const ie=(yield G.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return G.attemptFetch(k,ie)})()}attemptFetch(k,{throttleEndTimeMillis:G,backoffCount:ie}){var Te=this;return(0,q.Z)(function*(){yield function _r(x,k){return new Promise((G,ie)=>{const Te=Math.max(k-Date.now(),0),Fe=setTimeout(G,Te);x.addEventListener(()=>{clearTimeout(Fe),ie(Sr.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,G);try{const Fe=yield Te.client.fetch(k);return yield Te.storage.deleteThrottleMetadata(),Fe}catch(Fe){if(!function ba(x){if(!(x instanceof he.ZR&&x.customData))return!1;const k=Number(x.customData.httpStatus);return 429===k||500===k||503===k||504===k}(Fe))throw Fe;const pt={throttleEndTimeMillis:Date.now()+(0,he.$s)(ie),backoffCount:ie+1};return yield Te.storage.setThrottleMetadata(pt),Te.attemptFetch(k,pt)}})()}}class Le{constructor(k,G,ie,Te,Fe){this.app=k,this._client=G,this._storageCache=ie,this._storage=Te,this._logger=Fe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xe(x,k){const G=x.target.error||void 0;return Sr.create(k,{originalErrorMessage:G&&G.message})}const st="app_namespace_store";class Un{constructor(k,G,ie,Te=function lr(){return new Promise((x,k)=>{try{const G=indexedDB.open("firebase_remote_config",1);G.onerror=ie=>{k(Xe(ie,"storage-open"))},G.onsuccess=ie=>{x(ie.target.result)},G.onupgradeneeded=ie=>{0===ie.oldVersion&&ie.target.result.createObjectStore(st,{keyPath:"compositeKey"})}}catch(G){k(Sr.create("storage-open",{originalErrorMessage:G}))}})}()){this.appId=k,this.appName=G,this.namespace=ie,this.openDbPromise=Te}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var G=this;return(0,q.Z)(function*(){const ie=yield G.openDbPromise;return new Promise((Te,Fe)=>{const bt=ie.transaction([st],"readonly").objectStore(st),Ft=G.createCompositeKey(k);try{const on=bt.get(Ft);on.onerror=Gn=>{Fe(Xe(Gn,"storage-get"))},on.onsuccess=Gn=>{const Tn=Gn.target.result;Te(Tn?Tn.value:void 0)}}catch(on){Fe(Sr.create("storage-get",{originalErrorMessage:on&&on.message}))}})})()}set(k,G){var ie=this;return(0,q.Z)(function*(){const Te=yield ie.openDbPromise;return new Promise((Fe,pt)=>{const Ft=Te.transaction([st],"readwrite").objectStore(st),on=ie.createCompositeKey(k);try{const Gn=Ft.put({compositeKey:on,value:G});Gn.onerror=Tn=>{pt(Xe(Tn,"storage-set"))},Gn.onsuccess=()=>{Fe()}}catch(Gn){pt(Sr.create("storage-set",{originalErrorMessage:Gn&&Gn.message}))}})})()}delete(k){var G=this;return(0,q.Z)(function*(){const ie=yield G.openDbPromise;return new Promise((Te,Fe)=>{const bt=ie.transaction([st],"readwrite").objectStore(st),Ft=G.createCompositeKey(k);try{const on=bt.delete(Ft);on.onerror=Gn=>{Fe(Xe(Gn,"storage-delete"))},on.onsuccess=()=>{Te()}}catch(on){Fe(Sr.create("storage-delete",{originalErrorMessage:on&&on.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class Oi{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,q.Z)(function*(){const G=k.storage.getLastFetchStatus(),ie=k.storage.getLastSuccessfulFetchTimestampMillis(),Te=k.storage.getActiveConfig(),Fe=yield G;Fe&&(k.lastFetchStatus=Fe);const pt=yield ie;pt&&(k.lastSuccessfulFetchTimestampMillis=pt);const bt=yield Te;bt&&(k.activeConfig=bt)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function ts(){return la.apply(this,arguments)}function la(){return(la=(0,q.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(x){return!1}})).apply(this,arguments)}!function Ni(){(0,Ee._registerComponent)(new De.wA("remote-config",function x(k,{instanceIdentifier:G}){const ie=k.getProvider("app").getImmediate(),Te=k.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Sr.create("registration-window");if(!(0,he.hl)())throw Sr.create("indexed-db-unavailable");const{projectId:Fe,apiKey:pt,appId:bt}=ie.options;if(!Fe)throw Sr.create("registration-project-id");if(!pt)throw Sr.create("registration-api-key");if(!bt)throw Sr.create("registration-app-id");const Ft=new Un(bt,ie.name,G=G||"firebase"),on=new Oi(Ft),Gn=new Ie.Yd(On);Gn.logLevel=Ie.in.ERROR;const Tn=new ks(Te,Ee.SDK_VERSION,G,Fe,pt,bt),Rr=new no(Tn,Ft),ti=new Ro(Rr,Ft,on,Gn),lu=new Le(ie,ti,on,Ft,Gn);return function Gr(x){const k=(0,he.m9)(x);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(lu),lu},"PUBLIC").setMultipleInstances(!0)),(0,Ee.registerVersion)(On,"0.3.6"),(0,Ee.registerVersion)(On,"0.3.6","esm2017")}();const ca="/firebase-messaging-sw.js",vs="/firebase-cloud-messaging-push-scope",pi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yo="google.c.a.c_id",da="google.c.a.c_l",Jo="google.c.a.ts",_s="google.c.a.e";var gi=(()=>{return(x=gi||(gi={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",gi;var x})();function Ei(x){const k=new Uint8Array(x);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vo(x){const G=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ie=atob(G),Te=new Uint8Array(ie.length);for(let Fe=0;Fe<ie.length;++Fe)Te[Fe]=ie.charCodeAt(Fe);return Te}const Xo="fcm_token_details_db",Mr="fcm_token_object_Store";function io(x){return _o.apply(this,arguments)}function _o(){return _o=(0,q.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Fe=>Fe.name).includes(Xo))return null;let k=null;return(yield(0,he.X3)(Xo,5,function(){var ie=(0,q.Z)(function*(Te,Fe,pt,bt){var Ft;if(Fe<2||!Te.objectStoreNames.contains(Mr))return;const on=bt.objectStore(Mr),Gn=yield on.index("fcmSenderId").get(x);if(yield on.clear(),Gn)if(2===Fe){const Tn=Gn;if(!Tn.auth||!Tn.p256dh||!Tn.endpoint)return;k={token:Tn.fcmToken,createTime:null!==(Ft=Tn.createTime)&&void 0!==Ft?Ft:Date.now(),subscriptionOptions:{auth:Tn.auth,p256dh:Tn.p256dh,endpoint:Tn.endpoint,swScope:Tn.swScope,vapidKey:"string"==typeof Tn.vapidKey?Tn.vapidKey:Ei(Tn.vapidKey)}}}else if(3===Fe){const Tn=Gn;k={token:Tn.fcmToken,createTime:Tn.createTime,subscriptionOptions:{auth:Ei(Tn.auth),p256dh:Ei(Tn.p256dh),endpoint:Tn.endpoint,swScope:Tn.swScope,vapidKey:Ei(Tn.vapidKey)}}}else if(4===Fe){const Tn=Gn;k={token:Tn.fcmToken,createTime:Tn.createTime,subscriptionOptions:{auth:Ei(Tn.auth),p256dh:Ei(Tn.p256dh),endpoint:Tn.endpoint,swScope:Tn.swScope,vapidKey:Ei(Tn.vapidKey)}}}});return function(Te,Fe,pt,bt){return ie.apply(this,arguments)}}())).close(),yield(0,he.Lj)(Xo),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),ns(k)?k:null}),_o.apply(this,arguments)}function ns(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:k}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}const rs="firebase-messaging-store";let Es=null;function Po(){return Es||(Es=(0,he.X3)("firebase-messaging-database",1,(x,k)=>{0===k&&x.createObjectStore(rs)})),Es}function Jn(x){return O.apply(this,arguments)}function O(){return(O=(0,q.Z)(function*(x){const k=He(x),ie=yield(yield Po()).transaction(rs).objectStore(rs).get(k);if(ie)return ie;{const Te=yield io(x.appConfig.senderId);if(Te)return yield z(x,Te),Te}})).apply(this,arguments)}function z(x,k){return P.apply(this,arguments)}function P(){return(P=(0,q.Z)(function*(x,k){const G=He(x),Te=(yield Po()).transaction(rs,"readwrite");return yield Te.objectStore(rs).put(k,G),yield Te.complete,k})).apply(this,arguments)}function K(x){return ce.apply(this,arguments)}function ce(){return(ce=(0,q.Z)(function*(x){const k=He(x),ie=(yield Po()).transaction(rs,"readwrite");yield ie.objectStore(rs).delete(k),yield ie.complete})).apply(this,arguments)}function He({appConfig:x}){return x.appId}const It=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function sn(x,k){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,q.Z)(function*(x,k){const G=yield ui(x),ie=Qt(k),Te={method:"POST",headers:G,body:JSON.stringify(ie)};let Fe;try{Fe=yield(yield fetch(sr(x.appConfig),Te)).json()}catch(pt){throw It.create("token-subscribe-failed",{errorInfo:pt})}if(Fe.error)throw It.create("token-subscribe-failed",{errorInfo:Fe.error.message});if(!Fe.token)throw It.create("token-subscribe-no-token");return Fe.token})).apply(this,arguments)}function Dn(x,k){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,q.Z)(function*(x,k){const G=yield ui(x),ie=Qt(k.subscriptionOptions),Te={method:"PATCH",headers:G,body:JSON.stringify(ie)};let Fe;try{Fe=yield(yield fetch(`${sr(x.appConfig)}/${k.token}`,Te)).json()}catch(pt){throw It.create("token-update-failed",{errorInfo:pt})}if(Fe.error)throw It.create("token-update-failed",{errorInfo:Fe.error.message});if(!Fe.token)throw It.create("token-update-no-token");return Fe.token})).apply(this,arguments)}function fr(x,k){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,q.Z)(function*(x,k){const ie={method:"DELETE",headers:yield ui(x)};try{const Fe=yield(yield fetch(`${sr(x.appConfig)}/${k}`,ie)).json();if(Fe.error)throw It.create("token-unsubscribe-failed",{errorInfo:Fe.error.message})}catch(Te){throw It.create("token-unsubscribe-failed",{errorInfo:Te})}})).apply(this,arguments)}function sr({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function ui(x){return wi.apply(this,arguments)}function wi(){return(wi=(0,q.Z)(function*({appConfig:x,installations:k}){const G=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${G}`})})).apply(this,arguments)}function Qt({p256dh:x,auth:k,endpoint:G,vapidKey:ie}){const Te={web:{endpoint:G,auth:k,p256dh:x}};return ie!==pi&&(Te.web.applicationPubKey=ie),Te}const wn=6048e5;function oo(x){return ws.apply(this,arguments)}function ws(){return(ws=(0,q.Z)(function*(x){const k=yield Za(x.swRegistration,x.vapidKey),G={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:k.endpoint,auth:Ei(k.getKey("auth")),p256dh:Ei(k.getKey("p256dh"))},ie=yield Jn(x.firebaseDependencies);if(ie){if(Ya(ie.subscriptionOptions,G))return Date.now()>=ie.createTime+wn?qa(x,{token:ie.token,createTime:Date.now(),subscriptionOptions:G}):ie.token;try{yield fr(x.firebaseDependencies,ie.token)}catch(Te){console.warn(Te)}return rt(x.firebaseDependencies,G)}return rt(x.firebaseDependencies,G)})).apply(this,arguments)}function Hi(x){return ea.apply(this,arguments)}function ea(){return(ea=(0,q.Z)(function*(x){const k=yield Jn(x.firebaseDependencies);k&&(yield fr(x.firebaseDependencies,k.token),yield K(x.firebaseDependencies));const G=yield x.swRegistration.pushManager.getSubscription();return!G||G.unsubscribe()})).apply(this,arguments)}function qa(x,k){return Da.apply(this,arguments)}function Da(){return(Da=(0,q.Z)(function*(x,k){try{const G=yield Dn(x.firebaseDependencies,k),ie=Object.assign(Object.assign({},k),{token:G,createTime:Date.now()});return yield z(x.firebaseDependencies,ie),G}catch(G){throw yield Hi(x),G}})).apply(this,arguments)}function rt(x,k){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,q.Z)(function*(x,k){const ie={token:yield sn(x,k),createTime:Date.now(),subscriptionOptions:k};return yield z(x,ie),ie.token})).apply(this,arguments)}function Za(x,k){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,q.Z)(function*(x,k){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vo(k)})})).apply(this,arguments)}function Ya(x,k){return k.vapidKey===x.vapidKey&&k.endpoint===x.endpoint&&k.auth===x.auth&&k.p256dh===x.p256dh}function Vs(x){const k={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function Is(x,k){if(!k.notification)return;x.notification={};const G=k.notification.title;G&&(x.notification.title=G);const ie=k.notification.body;ie&&(x.notification.body=ie);const Te=k.notification.image;Te&&(x.notification.image=Te)}(k,x),function Ta(x,k){!k.data||(x.data=k.data)}(k,x),function Eo(x,k){if(!k.fcmOptions)return;x.fcmOptions={};const G=k.fcmOptions.link;G&&(x.fcmOptions.link=G);const ie=k.fcmOptions.analytics_label;ie&&(x.fcmOptions.analyticsLabel=ie)}(k,x),k}function _u(x){return"object"==typeof x&&!!x&&yo in x}function Eu(x,k){const G=[];for(let ie=0;ie<x.length;ie++)G.push(x.charAt(ie)),ie<k.length&&G.push(k.charAt(ie));return G.join("")}function Oo(x){return It.create("missing-app-config-values",{valueName:x})}Eu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Eu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ki{constructor(k,G,ie){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Te=function fa(x){if(!x||!x.options)throw Oo("App Configuration Object");if(!x.name)throw Oo("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:G}=x;for(const ie of k)if(!G[ie])throw Oo(ie);return{appName:x.name,projectId:G.projectId,apiKey:G.apiKey,appId:G.appId,senderId:G.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:Te,installations:G,analyticsProvider:ie}}_delete(){return Promise.resolve()}}function bs(x){return ta.apply(this,arguments)}function ta(){return(ta=(0,q.Z)(function*(x){try{x.swRegistration=yield navigator.serviceWorker.register(ca,{scope:vs}),x.swRegistration.update().catch(()=>{})}catch(k){throw It.create("failed-service-worker-registration",{browserErrorMessage:k.message})}})).apply(this,arguments)}function Ds(x,k){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,q.Z)(function*(x,k){if(!k&&!x.swRegistration&&(yield bs(x)),k||!x.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw It.create("invalid-sw-registration");x.swRegistration=k}})).apply(this,arguments)}function pa(x,k){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,q.Z)(function*(x,k){k?x.vapidKey=k:x.vapidKey||(x.vapidKey=pi)})).apply(this,arguments)}function na(){return(na=(0,q.Z)(function*(x,k){if(!navigator)throw It.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw It.create("permission-blocked");return yield pa(x,null==k?void 0:k.vapidKey),yield Ds(x,null==k?void 0:k.serviceWorkerRegistration),oo(x)})).apply(this,arguments)}function Sa(x,k,G){return xr.apply(this,arguments)}function xr(){return(xr=(0,q.Z)(function*(x,k,G){const ie=ga(k);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(ie,{message_id:G[yo],message_name:G[da],message_time:G[Jo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ga(x){switch(x){case gi.NOTIFICATION_CLICKED:return"notification_open";case gi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Qa(){return(Qa=(0,q.Z)(function*(x,k){const G=k.data;if(!G.isFirebaseMessaging)return;x.onMessageHandler&&G.messageType===gi.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(Vs(G)):x.onMessageHandler.next(Vs(G)));const ie=G.data;_u(ie)&&"1"===ie[_s]&&(yield Sa(x,G.messageType,ie))})).apply(this,arguments)}const Aa="@firebase/messaging",wu=x=>{const k=new ki(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",G=>function Uu(x,k){return Qa.apply(this,arguments)}(k,G)),k},Lo=x=>{const k=x.getProvider("messaging").getImmediate();return{getToken:ie=>function No(x,k){return na.apply(this,arguments)}(k,ie)}};function Fo(){return zi.apply(this,arguments)}function zi(){return(zi=(0,q.Z)(function*(){try{yield(0,he.eu)()}catch(x){return!1}return"undefined"!=typeof window&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ja(){(0,Ee._registerComponent)(new De.wA("messaging",wu,"PUBLIC")),(0,Ee._registerComponent)(new De.wA("messaging-internal",Lo,"PRIVATE")),(0,Ee.registerVersion)(Aa,"0.9.11"),(0,Ee.registerVersion)(Aa,"0.9.11","esm2017")}();const xa="analytics",tu="firebase_id",Wi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lo="https://www.googletagmanager.com/gtag/js",Wr=new Ie.Yd("@firebase/analytics");function Ii(x){return Promise.all(x.map(k=>k.catch(G=>G)))}function nu(x,k){const G=document.createElement("script");G.src=`${lo}?l=${x}&id=${k}`,G.async=!0,document.head.appendChild(G)}function wo(x,k,G,ie,Te,Fe){return Io.apply(this,arguments)}function Io(){return(Io=(0,q.Z)(function*(x,k,G,ie,Te,Fe){const pt=ie[Te];try{if(pt)yield k[pt];else{const Ft=(yield Ii(G)).find(on=>on.measurementId===Te);Ft&&(yield k[Ft.appId])}}catch(bt){Wr.error(bt)}x("config",Te,Fe)})).apply(this,arguments)}function Ts(x,k,G,ie,Te){return bo.apply(this,arguments)}function bo(){return(bo=(0,q.Z)(function*(x,k,G,ie,Te){try{let Fe=[];if(Te&&Te.send_to){let pt=Te.send_to;Array.isArray(pt)||(pt=[pt]);const bt=yield Ii(G);for(const Ft of pt){const on=bt.find(Tn=>Tn.measurementId===Ft),Gn=on&&k[on.appId];if(!Gn){Fe=[];break}Fe.push(Gn)}}0===Fe.length&&(Fe=Object.values(k)),yield Promise.all(Fe),x("event",ie,Te||{})}catch(Fe){Wr.error(Fe)}})).apply(this,arguments)}function ru(){const x=window.document.getElementsByTagName("script");for(const k of Object.values(x))if(k.src&&k.src.includes(lo))return k;return null}const ei=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),is=new class Cs{constructor(k={},G=1e3){this.throttleMetadata=k,this.intervalMillis=G}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,G){this.throttleMetadata[k]=G}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function ss(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function Pa(x){return Er.apply(this,arguments)}function Er(){return(Er=(0,q.Z)(function*(x){var k;const{appId:G,apiKey:ie}=x,Te={method:"GET",headers:ss(ie)},Fe=Wi.replace("{app-id}",G),pt=yield fetch(Fe,Te);if(200!==pt.status&&304!==pt.status){let bt="";try{const Ft=yield pt.json();(null===(k=Ft.error)||void 0===k?void 0:k.message)&&(bt=Ft.error.message)}catch(Ft){}throw ei.create("config-fetch-failed",{httpStatus:pt.status,responseMessage:bt})}return pt.json()})).apply(this,arguments)}function Uo(x){return $s.apply(this,arguments)}function $s(){return($s=(0,q.Z)(function*(x,k=is,G){const{appId:ie,apiKey:Te,measurementId:Fe}=x.options;if(!ie)throw ei.create("no-app-id");if(!Te){if(Fe)return{measurementId:Fe,appId:ie};throw ei.create("no-api-key")}const pt=k.getThrottleMetadata(ie)||{backoffCount:0,throttleEndTimeMillis:Date.now()},bt=new Do;return setTimeout((0,q.Z)(function*(){bt.abort()}),void 0!==G?G:6e4),Hs({appId:ie,apiKey:Te,measurementId:Fe},pt,bt,k)})).apply(this,arguments)}function Hs(x,k,G){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,q.Z)(function*(x,{throttleEndTimeMillis:k,backoffCount:G},ie,Te=is){const{appId:Fe,measurementId:pt}=x;try{yield dl(ie,k)}catch(bt){if(pt)return Wr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${bt.message}]`),{appId:Fe,measurementId:pt};throw bt}try{const bt=yield Pa(x);return Te.deleteThrottleMetadata(Fe),bt}catch(bt){if(!qi(bt)){if(Te.deleteThrottleMetadata(Fe),pt)return Wr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${bt.message}]`),{appId:Fe,measurementId:pt};throw bt}const Ft=503===Number(bt.customData.httpStatus)?(0,he.$s)(G,Te.intervalMillis,30):(0,he.$s)(G,Te.intervalMillis),on={throttleEndTimeMillis:Date.now()+Ft,backoffCount:G+1};return Te.setThrottleMetadata(Fe,on),Wr.debug(`Calling attemptFetch again in ${Ft} millis`),Hs(x,on,ie,Te)}})).apply(this,arguments)}function dl(x,k){return new Promise((G,ie)=>{const Te=Math.max(k-Date.now(),0),Fe=setTimeout(G,Te);x.addEventListener(()=>{clearTimeout(Fe),ie(ei.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}function qi(x){if(!(x instanceof he.ZR&&x.customData))return!1;const k=Number(x.customData.httpStatus);return 429===k||500===k||503===k||504===k}class Do{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}function Vo(){return Br.apply(this,arguments)}function Br(){return(Br=(0,q.Z)(function*(){if(!(0,he.hl)())return Wr.warn(ei.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(x){return Wr.warn(ei.create("indexeddb-unavailable",{errorInfo:x}).message),!1}return!0})).apply(this,arguments)}function mi(){return(mi=(0,q.Z)(function*(x,k,G,ie,Te,Fe,pt){var bt;const Ft=Uo(x);Ft.then(ti=>{G[ti.measurementId]=ti.appId,x.options.measurementId&&ti.measurementId!==x.options.measurementId&&Wr.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${ti.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ti=>Wr.error(ti)),k.push(Ft);const on=Vo().then(ti=>{if(ti)return ie.getId()}),[Gn,Tn]=yield Promise.all([Ft,on]);ru()||nu(Fe,Gn.measurementId),Te("js",new Date);const Rr=null!==(bt=null==pt?void 0:pt.config)&&void 0!==bt?bt:{};return Rr.origin="firebase",Rr.update=!0,null!=Tn&&(Rr[tu]=Tn),Te("config",Gn.measurementId,Rr),Gn.measurementId})).apply(this,arguments)}class zs{constructor(k){this.app=k}_delete(){return delete Zi[this.app.options.appId],Promise.resolve()}}let Zi={},T=[];const w={};let N,j,E="dataLayer",re=!1;function Me(x,k,G){!function X(){const x=[];if((0,he.ru)()&&x.push("This is a browser extension environment."),(0,he.zI)()||x.push("Cookies are not available."),x.length>0){const k=x.map((ie,Te)=>`(${Te+1}) ${ie}`).join(" "),G=ei.create("invalid-analytics-context",{errorInfo:k});Wr.warn(G.message)}}();const ie=x.options.appId;if(!ie)throw ei.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw ei.create("no-api-key");Wr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zi[ie])throw ei.create("already-exists",{id:ie});if(!re){!function Ki(x){let k=[];Array.isArray(window[x])?k=window[x]:window[x]=k}(E);const{wrappedGtag:Fe,gtagCore:pt}=function Iu(x,k,G,ie,Te){let Fe=function(...pt){window[ie].push(arguments)};return window[Te]&&"function"==typeof window[Te]&&(Fe=window[Te]),window[Te]=function co(x,k,G,ie){function Fe(){return(Fe=(0,q.Z)(function*(pt,bt,Ft){try{"event"===pt?yield Ts(x,k,G,bt,Ft):"config"===pt?yield wo(x,k,G,ie,bt,Ft):x("set",bt)}catch(on){Wr.error(on)}})).apply(this,arguments)}return function Te(pt,bt,Ft){return Fe.apply(this,arguments)}}(Fe,x,k,G),{gtagCore:Fe,wrappedGtag:window[Te]}}(Zi,T,w,E,"gtag");j=Fe,N=pt,re=!0}return Zi[ie]=function os(x,k,G,ie,Te,Fe,pt){return mi.apply(this,arguments)}(x,T,w,k,N,E,G),new zs(x)}function jt(){return(jt=(0,q.Z)(function*(x,k,G,ie,Te){if(Te&&Te.global)x("event",G,ie);else{const Fe=yield k;x("event",G,Object.assign(Object.assign({},ie),{send_to:Fe}))}})).apply(this,arguments)}function Oa(){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,q.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(x){return!1}})).apply(this,arguments)}const va="@firebase/analytics";!function Bu(){(0,Ee._registerComponent)(new De.wA(xa,(k,{options:G})=>Me(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),G),"PUBLIC")),(0,Ee._registerComponent)(new De.wA("analytics-internal",function x(k){try{const G=k.getProvider(xa).getImmediate();return{logEvent:(ie,Te,Fe)=>function nc(x,k,G,ie){x=(0,he.m9)(x),function Jt(x,k,G,ie,Te){return jt.apply(this,arguments)}(j,Zi[x.app.options.appId],k,G,ie).catch(Te=>Wr.error(Te))}(G,ie,Te,Fe)}}catch(G){throw ei.create("interop-component-reg-failed",{reason:G})}},"PRIVATE")),(0,Ee.registerVersion)(va,"0.7.7"),(0,Ee.registerVersion)(va,"0.7.7","esm2017")}();var Fn=B(4408),bi=B(7565);const hl=new class pr extends bi.v{}(class ra extends Fn.o{constructor(k,G){super(k,G),this.scheduler=k,this.work=G}schedule(k,G=0){return G>0?super.schedule(k,G):(this.delay=G,this.state=k,this.scheduler.flush(this),this)}execute(k,G){return G>0||this.closed?super.execute(k,G):this._execute(k,G)}requestAsyncId(k,G,ie=0){return null!=ie&&ie>0||null==ie&&this.delay>0?super.requestAsyncId(k,G,ie):k.flush(this)}});var Lc=B(4986),Bo=B(8505),Kn=B(9468),vi=B(5363);const ju=new b.GfV("7.3.0"),fo="__angularfire_symbol__analyticsIsSupportedValue",Li="__angularfire_symbol__analyticsIsSupported",Ws="__angularfire_symbol__remoteConfigIsSupportedValue",Ks="__angularfire_symbol__remoteConfigIsSupported",jo="__angularfire_symbol__messagingIsSupportedValue",ou="__angularfire_symbol__messagingIsSupported";function po(x,k,G){if(k){if(1===k.length)return k[0];const Fe=k.filter(pt=>pt.app===G);if(1===Fe.length)return Fe[0]}return G.container.getProvider(x).getImmediate({optional:!0})}globalThis[Li]||(globalThis[Li]=Oa().then(x=>globalThis[fo]=x).catch(()=>globalThis[fo]=!1)),globalThis[ou]||(globalThis[ou]=Fo().then(x=>globalThis[jo]=x).catch(()=>globalThis[jo]=!1)),globalThis[Ks]||(globalThis[Ks]=ts().then(x=>globalThis[Ws]=x).catch(()=>globalThis[Ws]=!1));const To=(x,k)=>{const G=k?[k]:(0,L.C6)(),ie=[];return G.forEach(Te=>{Te.container.getProvider(x).instances.forEach(pt=>{ie.includes(pt)||ie.push(pt)})}),ie};function go(){}class Zs{constructor(k,G=hl){this.zone=k,this.delegate=G}now(){return this.delegate.now()}schedule(k,G,ie){const Te=this.zone;return this.delegate.schedule(function(pt){Te.runGuarded(()=>{k.apply(this,[pt])})},G,ie)}}class pl{constructor(k){this.zone=k,this.task=null}call(k,G){const ie=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",go,{},go,go)),G.pipe((0,Bo.b)({next:ie,complete:ie,error:ie})).subscribe(k).add(ie)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _a=(()=>{class x{constructor(G){this.ngZone=G,this.outsideAngular=G.runOutsideAngular(()=>new Zs(Zone.current)),this.insideAngular=G.run(()=>new Zs(Zone.current,Lc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(G){return new(G||x)(b.LFG(b.R0b))},x.\u0275prov=b.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function Co(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function $u(x){return Co(),function $o(x){return function(G){return(G=G.lift(new pl(x.ngZone))).pipe((0,Kn.R)(x.outsideAngular),(0,vi.Q)(x.insideAngular))}}(Co())(x)}},2090:(Mt,Ue,B)=>{B.d(Ue,{BH:()=>qe,LL:()=>Vt,ZR:()=>be,zI:()=>Oe,US:()=>Ie,tV:()=>ae,L:()=>Se,$s:()=>Ji,r3:()=>Ot,Sg:()=>Qe,ne:()=>Lt,vZ:()=>Ir,ZB:()=>pe,Lj:()=>bn,pd:()=>Hn,m9:()=>Ht,z$:()=>vt,jU:()=>_t,ru:()=>xt,d:()=>Re,xb:()=>Mn,w1:()=>ue,hl:()=>fe,uI:()=>Ge,UG:()=>Ke,b$:()=>et,G6:()=>Pe,Mn:()=>gt,X3:()=>Zt,xO:()=>ri,zd:()=>Pr,eu:()=>ke});var b=B(5861);const he=function(de){const ee=[];let ve=0;for(let ze=0;ze<de.length;ze++){let xe=de.charCodeAt(ze);xe<128?ee[ve++]=xe:xe<2048?(ee[ve++]=xe>>6|192,ee[ve++]=63&xe|128):55296==(64512&xe)&&ze+1<de.length&&56320==(64512&de.charCodeAt(ze+1))?(xe=65536+((1023&xe)<<10)+(1023&de.charCodeAt(++ze)),ee[ve++]=xe>>18|240,ee[ve++]=xe>>12&63|128,ee[ve++]=xe>>6&63|128,ee[ve++]=63&xe|128):(ee[ve++]=xe>>12|224,ee[ve++]=xe>>6&63|128,ee[ve++]=63&xe|128)}return ee},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(de,ee){if(!Array.isArray(de))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ve=ee?this.byteToCharMapWebSafe_:this.byteToCharMap_,ze=[];for(let xe=0;xe<de.length;xe+=3){const yt=de[xe],Yt=xe+1<de.length,gn=Yt?de[xe+1]:0,Gt=xe+2<de.length,cn=Gt?de[xe+2]:0;let Pn=(15&gn)<<2|cn>>6,Nr=63&cn;Gt||(Nr=64,Yt||(Pn=64)),ze.push(ve[yt>>2],ve[(3&yt)<<4|gn>>4],ve[Pn],ve[Nr])}return ze.join("")},encodeString(de,ee){return this.HAS_NATIVE_SUPPORT&&!ee?btoa(de):this.encodeByteArray(he(de),ee)},decodeString(de,ee){return this.HAS_NATIVE_SUPPORT&&!ee?atob(de):function(de){const ee=[];let ve=0,ze=0;for(;ve<de.length;){const xe=de[ve++];if(xe<128)ee[ze++]=String.fromCharCode(xe);else if(xe>191&&xe<224){const yt=de[ve++];ee[ze++]=String.fromCharCode((31&xe)<<6|63&yt)}else if(xe>239&&xe<365){const Gt=((7&xe)<<18|(63&de[ve++])<<12|(63&de[ve++])<<6|63&de[ve++])-65536;ee[ze++]=String.fromCharCode(55296+(Gt>>10)),ee[ze++]=String.fromCharCode(56320+(1023&Gt))}else{const yt=de[ve++],Yt=de[ve++];ee[ze++]=String.fromCharCode((15&xe)<<12|(63&yt)<<6|63&Yt)}}return ee.join("")}(this.decodeStringToByteArray(de,ee))},decodeStringToByteArray(de,ee){this.init_();const ve=ee?this.charToByteMapWebSafe_:this.charToByteMap_,ze=[];for(let xe=0;xe<de.length;){const yt=ve[de.charAt(xe++)],gn=xe<de.length?ve[de.charAt(xe)]:0;++xe;const cn=xe<de.length?ve[de.charAt(xe)]:64;++xe;const nn=xe<de.length?ve[de.charAt(xe)]:64;if(++xe,null==yt||null==gn||null==cn||null==nn)throw Error();ze.push(yt<<2|gn>>4),64!==cn&&(ze.push(gn<<4&240|cn>>2),64!==nn&&ze.push(cn<<6&192|nn))}return ze},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let de=0;de<this.ENCODED_VALS.length;de++)this.byteToCharMap_[de]=this.ENCODED_VALS.charAt(de),this.charToByteMap_[this.byteToCharMap_[de]]=de,this.byteToCharMapWebSafe_[de]=this.ENCODED_VALS_WEBSAFE.charAt(de),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[de]]=de,de>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(de)]=de,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(de)]=de)}}},Se=function(de){return function(de){const ee=he(de);return Ie.encodeByteArray(ee,!0)}(de).replace(/\./g,"")},ae=function(de){try{return Ie.decodeString(de,!0)}catch(ee){console.error("base64Decode failed: ",ee)}return null};function pe(de,ee){if(!(ee instanceof Object))return ee;switch(ee.constructor){case Date:return new Date(ee.getTime());case Object:void 0===de&&(de={});break;case Array:de=[];break;default:return ee}for(const ve in ee)!ee.hasOwnProperty(ve)||!at(ve)||(de[ve]=pe(de[ve],ee[ve]));return de}function at(de){return"__proto__"!==de}class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ee,ve)=>{this.resolve=ee,this.reject=ve})}wrapCallback(ee){return(ve,ze)=>{ve?this.reject(ve):this.resolve(ze),"function"==typeof ee&&(this.promise.catch(()=>{}),1===ee.length?ee(ve):ee(ve,ze))}}}function Qe(de,ee){if(de.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ze=ee||"demo-project",xe=de.iat||0,yt=de.sub||de.user_id;if(!yt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Yt=Object.assign({iss:`https://securetoken.google.com/${ze}`,aud:ze,iat:xe,exp:xe+3600,auth_time:xe,sub:yt,user_id:yt,firebase:{sign_in_provider:"custom",identities:{}}},de);return[Se(JSON.stringify({alg:"none",type:"JWT"})),Se(JSON.stringify(Yt)),""].join(".")}function vt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function Ke(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(de){return!1}}function _t(){return"object"==typeof self&&self.self===self}function xt(){const de="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof de&&void 0!==de.id}function et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Re(){return vt().indexOf("Electron/")>=0}function ue(){const de=vt();return de.indexOf("MSIE ")>=0||de.indexOf("Trident/")>=0}function gt(){return vt().indexOf("MSAppHost/")>=0}function Pe(){return!Ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){return"object"==typeof indexedDB}function ke(){return new Promise((de,ee)=>{try{let ve=!0;const ze="validate-browser-context-for-indexeddb-analytics-module",xe=self.indexedDB.open(ze);xe.onsuccess=()=>{xe.result.close(),ve||self.indexedDB.deleteDatabase(ze),de(!0)},xe.onupgradeneeded=()=>{ve=!1},xe.onerror=()=>{var yt;ee((null===(yt=xe.error)||void 0===yt?void 0:yt.message)||"")}}catch(ve){ee(ve)}})}function Oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class be extends Error{constructor(ee,ve,ze){super(ve),this.code=ee,this.customData=ze,this.name="FirebaseError",Object.setPrototypeOf(this,be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vt.prototype.create)}}class Vt{constructor(ee,ve,ze){this.service=ee,this.serviceName=ve,this.errors=ze}create(ee,...ve){const ze=ve[0]||{},xe=`${this.service}/${ee}`,yt=this.errors[ee],Yt=yt?function pn(de,ee){return de.replace(Ve,(ve,ze)=>{const xe=ee[ze];return null!=xe?String(xe):`<${ze}?>`})}(yt,ze):"Error";return new be(xe,`${this.serviceName}: ${Yt} (${xe}).`,ze)}}const Ve=/\{\$([^}]+)}/g;function Ot(de,ee){return Object.prototype.hasOwnProperty.call(de,ee)}function Mn(de){for(const ee in de)if(Object.prototype.hasOwnProperty.call(de,ee))return!1;return!0}function Ir(de,ee){if(de===ee)return!0;const ve=Object.keys(de),ze=Object.keys(ee);for(const xe of ve){if(!ze.includes(xe))return!1;const yt=de[xe],Yt=ee[xe];if(ir(yt)&&ir(Yt)){if(!Ir(yt,Yt))return!1}else if(yt!==Yt)return!1}for(const xe of ze)if(!ve.includes(xe))return!1;return!0}function ir(de){return null!==de&&"object"==typeof de}function ri(de){const ee=[];for(const[ve,ze]of Object.entries(de))Array.isArray(ze)?ze.forEach(xe=>{ee.push(encodeURIComponent(ve)+"="+encodeURIComponent(xe))}):ee.push(encodeURIComponent(ve)+"="+encodeURIComponent(ze));return ee.length?"&"+ee.join("&"):""}function Pr(de){const ee={};return de.replace(/^\?/,"").split("&").forEach(ze=>{if(ze){const[xe,yt]=ze.split("=");ee[decodeURIComponent(xe)]=decodeURIComponent(yt)}}),ee}function Hn(de){const ee=de.indexOf("?");if(!ee)return"";const ve=de.indexOf("#",ee);return de.substring(ee,ve>0?ve:void 0)}function Lt(de,ee){const ve=new zn(de,ee);return ve.subscribe.bind(ve)}class zn{constructor(ee,ve){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ve,this.task.then(()=>{ee(this)}).catch(ze=>{this.error(ze)})}next(ee){this.forEachObserver(ve=>{ve.next(ee)})}error(ee){this.forEachObserver(ve=>{ve.error(ee)}),this.close(ee)}complete(){this.forEachObserver(ee=>{ee.complete()}),this.close()}subscribe(ee,ve,ze){let xe;if(void 0===ee&&void 0===ve&&void 0===ze)throw new Error("Missing Observer.");xe=function xn(de,ee){if("object"!=typeof de||null===de)return!1;for(const ve of ee)if(ve in de&&"function"==typeof de[ve])return!0;return!1}(ee,["next","error","complete"])?ee:{next:ee,error:ve,complete:ze},void 0===xe.next&&(xe.next=ii),void 0===xe.error&&(xe.error=ii),void 0===xe.complete&&(xe.complete=ii);const yt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?xe.error(this.finalError):xe.complete()}catch(Yt){}}),this.observers.push(xe),yt}unsubscribeOne(ee){void 0===this.observers||void 0===this.observers[ee]||(delete this.observers[ee],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ee){if(!this.finalized)for(let ve=0;ve<this.observers.length;ve++)this.sendOne(ve,ee)}sendOne(ee,ve){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ee])try{ve(this.observers[ee])}catch(ze){"undefined"!=typeof console&&console.error&&console.error(ze)}})}close(ee){this.finalized||(this.finalized=!0,void 0!==ee&&(this.finalError=ee),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ii(){}function Ji(de,ee=1e3,ve=2){const ze=ee*Math.pow(ve,de),xe=Math.round(.5*ze*(Math.random()-.5)*2);return Math.min(144e5,ze+xe)}function Ht(de){return de&&de._delegate?de._delegate:de}function Vr(de,ee){return new Promise((ve,ze)=>{de.onsuccess=xe=>{ve(xe.target.result)},de.onerror=xe=>{var yt;ze(`${ee}: ${null===(yt=xe.target.error)||void 0===yt?void 0:yt.message}`)}})}class vn{constructor(ee){this._db=ee,this.objectStoreNames=this._db.objectStoreNames}transaction(ee,ve){return new Nt(this._db.transaction.call(this._db,ee,ve))}createObjectStore(ee,ve){return new Ze(this._db.createObjectStore(ee,ve))}close(){this._db.close()}}class Nt{constructor(ee){this._transaction=ee,this.complete=new Promise((ve,ze)=>{this._transaction.oncomplete=function(){ve()},this._transaction.onerror=()=>{ze(this._transaction.error)},this._transaction.onabort=()=>{ze(this._transaction.error)}})}objectStore(ee){return new Ze(this._transaction.objectStore(ee))}}class Ze{constructor(ee){this._store=ee}index(ee){return new Ct(this._store.index(ee))}createIndex(ee,ve,ze){return new Ct(this._store.createIndex(ee,ve,ze))}get(ee){return Vr(this._store.get(ee),"Error reading from IndexedDB")}put(ee,ve){return Vr(this._store.put(ee,ve),"Error writing to IndexedDB")}delete(ee){return Vr(this._store.delete(ee),"Error deleting from IndexedDB")}clear(){return Vr(this._store.clear(),"Error clearing IndexedDB object store")}}class Ct{constructor(ee){this._index=ee}get(ee){return Vr(this._index.get(ee),"Error reading from IndexedDB")}}function Zt(de,ee,ve){return new Promise((ze,xe)=>{try{const yt=indexedDB.open(de,ee);yt.onsuccess=Yt=>{ze(new vn(Yt.target.result))},yt.onerror=Yt=>{var gn;xe(`Error opening indexedDB: ${null===(gn=Yt.target.error)||void 0===gn?void 0:gn.message}`)},yt.onupgradeneeded=Yt=>{ve(new vn(yt.result),Yt.oldVersion,Yt.newVersion,new Nt(yt.transaction))}}catch(yt){xe(`Error opening indexedDB: ${yt.message}`)}})}function bn(de){return _n.apply(this,arguments)}function _n(){return(_n=(0,b.Z)(function*(de){return new Promise((ee,ve)=>{try{const ze=indexedDB.deleteDatabase(de);ze.onsuccess=()=>{ee()},ze.onerror=xe=>{var yt;ve(`Error deleting indexedDB database "${de}": ${null===(yt=xe.target.error)||void 0===yt?void 0:yt.message}`)}}catch(ze){ve(`Error deleting indexedDB database "${de}": ${ze.message}`)}})})).apply(this,arguments)}},5867:(Mt,Ue,B)=>{B.d(Ue,{Mq:()=>b.getApp,C6:()=>b.getApps});var b=B(9681);(0,b.registerVersion)("firebase","9.6.10","app")},127:(Mt,Ue,B)=>{B.d(Ue,{Z:()=>b.Z});var b=B(3942);b.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(Mt,Ue,B)=>{B.r(Ue);var b=B(5861),L=B(3942),q=B(2090),Ee=B(9681),he=B(655),De=B(1877),Ie=B(4859);const Qe=function at(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},vt=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ge=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_t=new De.Yd("@firebase/auth");function xt(m,...d){_t.logLevel<=De.in.ERROR&&_t.error(`Auth (${Ee.SDK_VERSION}): ${m}`,...d)}function et(m,...d){throw mt(m,...d)}function Re(m,...d){return mt(m,...d)}function ue(m,d,p){const I=Object.assign(Object.assign({},vt()),{[d]:p});return new q.LL("auth","Firebase",I).create(d,{appName:m.name})}function gt(m,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&et(m,"argument-error"),ue(m,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mt(m,...d){if("string"!=typeof m){const p=d[0],I=[...d.slice(1)];return I[0]&&(I[0].appName=m.name),m._errorFactory.create(p,...I)}return Ge.create(m,...d)}function Pe(m,d,...p){if(!m)throw mt(d,...p)}function fe(m){const d="INTERNAL ASSERTION FAILED: "+m;throw xt(d),new Error(d)}function ke(m,d){m||fe(d)}const Oe=new Map;function le(m){ke(m instanceof Function,"Expected a class definition");let d=Oe.get(m);return d?(ke(d instanceof m,"Instance stored in cache mismatched with class"),d):(d=new m,Oe.set(m,d),d)}function Vt(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function pn(){return"http:"===Ve()||"https:"===Ve()}function Ve(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class $e{constructor(d,p){this.shortDelay=d,this.longDelay=p,ke(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function tt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pn()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ot(m,d){ke(m.emulator,"Emulator should always be set here");const{url:p}=m.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class Rt{static initialize(d,p,I){this.fetchImpl=d,p&&(this.headersImpl=p),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},In=new $e(3e4,6e4);function Ot(m,d){return m.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:m.tenantId}):d}function qt(m,d,p,I){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,b.Z)(function*(m,d,p,I,F={}){return $n(m,F,(0,b.Z)(function*(){let Z={},Ae={};I&&("GET"===d?Ae=I:Z={body:JSON.stringify(I)});const We=(0,q.xO)(Object.assign({key:m.config.apiKey},Ae)).slice(1),St=yield m._getAdditionalHeaders();return St["Content-Type"]="application/json",m.languageCode&&(St["X-Firebase-Locale"]=m.languageCode),Rt.fetch()(Pr(m,m.config.apiHost,p,We),Object.assign({method:d,headers:St,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function $n(m,d,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,b.Z)(function*(m,d,p){m._canInitEmulator=!1;const I=Object.assign(Object.assign({},lt),d);try{const F=new Hn(m),Z=yield Promise.race([p(),F.promise]);F.clearNetworkTimeout();const Ae=yield Z.json();if("needConfirmation"in Ae)throw br(m,"account-exists-with-different-credential",Ae);if(Z.ok&&!("errorMessage"in Ae))return Ae;{const We=Z.ok?Ae.errorMessage:Ae.error.message,[St,At]=We.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===St)throw br(m,"credential-already-in-use",Ae);if("EMAIL_EXISTS"===St)throw br(m,"email-already-in-use",Ae);const mn=I[St]||St.toLowerCase().replace(/[_\s]+/g,"-");if(At)throw ue(m,mn,At);et(m,mn)}}catch(F){if(F instanceof q.ZR)throw F;et(m,"network-request-failed")}})).apply(this,arguments)}function ir(m,d,p,I){return ri.apply(this,arguments)}function ri(){return(ri=(0,b.Z)(function*(m,d,p,I,F={}){const Z=yield qt(m,d,p,I,F);return"mfaPendingCredential"in Z&&et(m,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function Pr(m,d,p,I){const F=`${d}${p}?${I}`;return m.config.emulator?ot(m.config,F):`${m.config.apiScheme}://${F}`}class Hn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,I)=>{this.timer=setTimeout(()=>I(Re(this.auth,"network-request-failed")),In.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function br(m,d,p){const I={appName:m.name};p.email&&(I.email=p.email),p.phoneNumber&&(I.phoneNumber=p.phoneNumber);const F=Re(m,d,I);return F.customData._tokenResponse=p,F}function zn(){return(zn=(0,b.Z)(function*(m,d){return qt(m,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Or(m,d){return xn.apply(this,arguments)}function xn(){return(xn=(0,b.Z)(function*(m,d){return qt(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ii(m,d){return fs.apply(this,arguments)}function fs(){return(fs=(0,b.Z)(function*(m,d){return qt(m,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function or(m){if(m)try{const d=new Date(Number(m));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function si(){return(si=(0,b.Z)(function*(m,d=!1){const p=(0,q.m9)(m),I=yield p.getIdToken(d),F=Bt(I);Pe(F&&F.exp&&F.auth_time&&F.iat,p.auth,"internal-error");const Z="object"==typeof F.firebase?F.firebase:void 0,Ae=null==Z?void 0:Z.sign_in_provider;return{claims:F,token:I,authTime:or(Dt(F.auth_time)),issuedAtTime:or(Dt(F.iat)),expirationTime:or(Dt(F.exp)),signInProvider:Ae||null,signInSecondFactor:(null==Z?void 0:Z.sign_in_second_factor)||null}})).apply(this,arguments)}function Dt(m){return 1e3*Number(m)}function Bt(m){const[d,p,I]=m.split(".");if(void 0===d||void 0===p||void 0===I)return xt("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,q.tV)(p);return F?JSON.parse(F):(xt("Failed to decode base64 JWT payload"),null)}catch(F){return xt("Caught error parsing JWT payload as JSON",F),null}}function dr(m,d){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,b.Z)(function*(m,d,p=!1){if(p)return d;try{return yield d}catch(I){throw I instanceof q.ZR&&Rn(I)&&m.auth.currentUser===m&&(yield m.auth.signOut()),I}})).apply(this,arguments)}function Rn({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class Ji{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const F=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,F)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const I=this.getInterval(d);this.timerId=setTimeout((0,b.Z)(function*(){yield p.iteration()}),I)}iteration(){var d=this;return(0,b.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&d.schedule(!0))}d.schedule()})()}}class Jr{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=or(this.lastLoginAt),this.creationTime=or(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ar(m){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,b.Z)(function*(m){var d;const p=m.auth,I=yield m.getIdToken(),F=yield dr(m,ii(p,{idToken:I}));Pe(null==F?void 0:F.users.length,p,"internal-error");const Z=F.users[0];m._notifyReloadListener(Z);const Ae=(null===(d=Z.providerUserInfo)||void 0===d?void 0:d.length)?Ze(Z.providerUserInfo):[],We=Nt(m.providerData,Ae),mn=!!m.isAnonymous&&!(m.email&&Z.passwordHash||(null==We?void 0:We.length)),ln={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:We,metadata:new Jr(Z.createdAt,Z.lastLoginAt),isAnonymous:mn};Object.assign(m,ln)})).apply(this,arguments)}function vn(){return(vn=(0,b.Z)(function*(m){const d=(0,q.m9)(m);yield ar(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Nt(m,d){return[...m.filter(I=>!d.some(F=>F.providerId===I.providerId)),...d]}function Ze(m){return m.map(d=>{var{providerId:p}=d,I=(0,he._T)(d,["providerId"]);return{providerId:p,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Zt(){return(Zt=(0,b.Z)(function*(m,d){const p=yield $n(m,{},(0,b.Z)(function*(){const I=(0,q.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:F,apiKey:Z}=m.config,Ae=Pr(m,F,"/v1/token",`key=${Z}`),We=yield m._getAdditionalHeaders();return We["Content-Type"]="application/x-www-form-urlencoded",Rt.fetch()(Ae,{method:"POST",headers:We,body:I})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class bn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Pe(d.idToken,"internal-error"),Pe(void 0!==d.idToken,"internal-error"),Pe(void 0!==d.refreshToken,"internal-error");const p="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function zt(m){const d=Bt(m);return Pe(d,"internal-error"),Pe(void 0!==d.exp,"internal-error"),Pe(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var I=this;return(0,b.Z)(function*(){return Pe(!I.accessToken||I.refreshToken,d,"user-token-expired"),p||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(d,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var I=this;return(0,b.Z)(function*(){const{accessToken:F,refreshToken:Z,expiresIn:Ae}=yield function Ct(m,d){return Zt.apply(this,arguments)}(d,p);I.updateTokensAndExpiration(F,Z,Number(Ae))})()}updateTokensAndExpiration(d,p,I){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(d,p){const{refreshToken:I,accessToken:F,expirationTime:Z}=p,Ae=new bn;return I&&(Pe("string"==typeof I,"internal-error",{appName:d}),Ae.refreshToken=I),F&&(Pe("string"==typeof F,"internal-error",{appName:d}),Ae.accessToken=F),Z&&(Pe("number"==typeof Z,"internal-error",{appName:d}),Ae.expirationTime=Z),Ae}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new bn,this.toJSON())}_performRefresh(){return fe("not implemented")}}function _n(m,d){Pe("string"==typeof m||void 0===m,"internal-error",{appName:d})}class de{constructor(d){var{uid:p,auth:I,stsTokenManager:F}=d,Z=(0,he._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ji(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=I,this.stsTokenManager=F,this.accessToken=F.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new Jr(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,b.Z)(function*(){const I=yield dr(p,p.stsTokenManager.getToken(p.auth,d));return Pe(I,p.auth,"internal-error"),p.accessToken!==I&&(p.accessToken=I,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),I})()}getIdTokenResult(d){return function Ui(m){return si.apply(this,arguments)}(this,d)}reload(){return function Vr(m){return vn.apply(this,arguments)}(this)}_assign(d){this!==d&&(Pe(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new de(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var I=this;return(0,b.Z)(function*(){let F=!1;d.idToken&&d.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(d),F=!0),p&&(yield ar(I)),yield I.auth._persistUserIfCurrent(I),F&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var d=this;return(0,b.Z)(function*(){const p=yield d.getIdToken();return yield dr(d,function Lt(m,d){return zn.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var I,F,Z,Ae,We,St,At,mn;const ln=null!==(I=p.displayName)&&void 0!==I?I:void 0,gr=null!==(F=p.email)&&void 0!==F?F:void 0,sa=null!==(Z=p.phoneNumber)&&void 0!==Z?Z:void 0,Qu=null!==(Ae=p.photoURL)&&void 0!==Ae?Ae:void 0,hc=null!==(We=p.tenantId)&&void 0!==We?We:void 0,fc=null!==(St=p._redirectEventId)&&void 0!==St?St:void 0,Od=null!==(At=p.createdAt)&&void 0!==At?At:void 0,Bf=null!==(mn=p.lastLoginAt)&&void 0!==mn?mn:void 0,{uid:Ju,emailVerified:Zc,isAnonymous:Nd,providerData:kd,stsTokenManager:Yc}=p;Pe(Ju&&Yc,d,"internal-error");const jf=bn.fromJSON(this.name,Yc);Pe("string"==typeof Ju,d,"internal-error"),_n(ln,d.name),_n(gr,d.name),Pe("boolean"==typeof Zc,d,"internal-error"),Pe("boolean"==typeof Nd,d,"internal-error"),_n(sa,d.name),_n(Qu,d.name),_n(hc,d.name),_n(fc,d.name),_n(Od,d.name),_n(Bf,d.name);const Ld=new de({uid:Ju,auth:d,email:gr,emailVerified:Zc,displayName:ln,isAnonymous:Nd,photoURL:Qu,phoneNumber:sa,tenantId:hc,stsTokenManager:jf,createdAt:Od,lastLoginAt:Bf});return kd&&Array.isArray(kd)&&(Ld.providerData=kd.map($f=>Object.assign({},$f))),fc&&(Ld._redirectEventId=fc),Ld}static _fromIdTokenResponse(d,p,I=!1){return(0,b.Z)(function*(){const F=new bn;F.updateFromServerResponse(p);const Z=new de({uid:p.localId,auth:d,stsTokenManager:F,isAnonymous:I});return yield ar(Z),Z})()}}const ve=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.Z)(function*(){return!0})()}_set(p,I){var F=this;return(0,b.Z)(function*(){F.storage[p]=I})()}_get(p){var I=this;return(0,b.Z)(function*(){const F=I.storage[p];return void 0===F?null:F})()}_remove(p){var I=this;return(0,b.Z)(function*(){delete I.storage[p]})()}_addListener(p,I){}_removeListener(p,I){}}return m.type="NONE",m})();function ze(m,d,p){return`firebase:${m}:${d}:${p}`}class xe{constructor(d,p,I){this.persistence=d,this.auth=p,this.userKey=I;const{config:F,name:Z}=this.auth;this.fullUserKey=ze(this.userKey,F.apiKey,Z),this.fullPersistenceKey=ze("persistence",F.apiKey,Z),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,b.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?de._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,b.Z)(function*(){if(p.persistence===d)return;const I=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,I?p.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,I="authUser"){return(0,b.Z)(function*(){if(!p.length)return new xe(le(ve),d,I);const F=(yield Promise.all(p.map(function(){var At=(0,b.Z)(function*(mn){if(yield mn._isAvailable())return mn});return function(mn){return At.apply(this,arguments)}}()))).filter(At=>At);let Z=F[0]||le(ve);const Ae=ze(I,d.config.apiKey,d.name);let We=null;for(const At of p)try{const mn=yield At._get(Ae);if(mn){const ln=de._fromJSON(d,mn);At!==Z&&(We=ln),Z=At;break}}catch(mn){}const St=F.filter(At=>At._shouldAllowMigration);return Z._shouldAllowMigration&&St.length?(Z=St[0],We&&(yield Z._set(Ae,We.toJSON())),yield Promise.all(p.map(function(){var At=(0,b.Z)(function*(mn){if(mn!==Z)try{yield mn._remove(Ae)}catch(ln){}});return function(mn){return At.apply(this,arguments)}}())),new xe(Z,d,I)):new xe(Z,d,I)})()}}function yt(m){const d=m.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(cn(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Yt(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(nn(d))return"Blackberry";if(Pn(d))return"Webos";if(gn(d))return"Safari";if((d.includes("chrome/")||Gt(d))&&!d.includes("edge/"))return"Chrome";if(hr(d))return"Android";{const I=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function Yt(m=(0,q.z$)()){return/firefox\//i.test(m)}function gn(m=(0,q.z$)()){const d=m.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Gt(m=(0,q.z$)()){return/crios\//i.test(m)}function cn(m=(0,q.z$)()){return/iemobile/i.test(m)}function hr(m=(0,q.z$)()){return/android/i.test(m)}function nn(m=(0,q.z$)()){return/blackberry/i.test(m)}function Pn(m=(0,q.z$)()){return/webos/i.test(m)}function Nr(m=(0,q.z$)()){return/iphone|ipad|ipod/i.test(m)}function Hr(m=(0,q.z$)()){return Nr(m)||hr(m)||Pn(m)||nn(m)||/windows phone/i.test(m)||cn(m)}function Vi(m,d=[]){let p;switch(m){case"Browser":p=yt((0,q.z$)());break;case"Worker":p=`${yt((0,q.z$)())}-${m}`;break;default:p=m}const I=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${Ee.SDK_VERSION}/${I}`}class Ri{constructor(d,p,I){this.app=d,this.heartbeatServiceProvider=p,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hn(this),this.idTokenSubscription=new hn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(d,p){var I=this;return p&&(this._popupRedirectResolver=le(p)),this._initializationPromise=this.queue((0,b.Z)(function*(){var F,Z;if(!I._deleted&&(I.persistenceManager=yield xe.create(I,d),!I._deleted)){if(null===(F=I._popupRedirectResolver)||void 0===F?void 0:F._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(Ae){}yield I.initializeCurrentUser(p),I.lastNotifiedUid=(null===(Z=I.currentUser)||void 0===Z?void 0:Z.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,b.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p)}})()}initializeCurrentUser(d){var p=this;return(0,b.Z)(function*(){var I;let F=yield p.assertedPersistence.getCurrentUser();if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Z=null===(I=p.redirectUser)||void 0===I?void 0:I._redirectEventId,Ae=null==F?void 0:F._redirectEventId,We=yield p.tryRedirectSignIn(d);(!Z||Z===Ae)&&(null==We?void 0:We.user)&&(F=We.user)}return F?F._redirectEventId?(Pe(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===F._redirectEventId?p.directlySetCurrentUser(F):p.reloadAndSetCurrentUserOrClear(F)):p.reloadAndSetCurrentUserOrClear(F):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(d){var p=this;return(0,b.Z)(function*(){let I=null;try{I=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch(F){yield p._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,b.Z)(function*(){try{yield ar(d)}catch(I){if("auth/network-request-failed"!==I.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function te(){if("undefined"==typeof navigator)return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var d=this;return(0,b.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,b.Z)(function*(){const I=d?(0,q.m9)(d):null;return I&&Pe(I.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(I&&I._clone(p))})()}_updateCurrentUser(d){var p=this;return(0,b.Z)(function*(){if(!p._deleted)return d&&Pe(p.tenantId===d.tenantId,p,"tenant-id-mismatch"),p.queue((0,b.Z)(function*(){yield p.directlySetCurrentUser(d),p.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,b.Z)(function*(){return(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null)})()}setPersistence(d){var p=this;return this.queue((0,b.Z)(function*(){yield p.assertedPersistence.setPersistence(le(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new q.LL("auth","Firebase",d())}onAuthStateChanged(d,p,I){return this.registerStateListener(this.authStateSubscription,d,p,I)}onIdTokenChanged(d,p,I){return this.registerStateListener(this.idTokenSubscription,d,p,I)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var I=this;return(0,b.Z)(function*(){const F=yield I.getOrInitRedirectPersistenceManager(p);return null===d?F.removeCurrentUser():F.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,b.Z)(function*(){if(!p.redirectPersistenceManager){const I=d&&le(d)||p._popupRedirectResolver;Pe(I,p,"argument-error"),p.redirectPersistenceManager=yield xe.create(p,[le(I._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,b.Z)(function*(){var I,F;return p._isInitialized&&(yield p.queue((0,b.Z)(function*(){}))),(null===(I=p._currentUser)||void 0===I?void 0:I._redirectEventId)===d?p._currentUser:(null===(F=p.redirectUser)||void 0===F?void 0:F._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,b.Z)(function*(){if(d===p.currentUser)return p.queue((0,b.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,I,F){if(this._deleted)return()=>{};const Z="function"==typeof p?p:p.next.bind(p),Ae=this._isInitialized?Promise.resolve():this._initializationPromise;return Pe(Ae,this,"internal-error"),Ae.then(()=>Z(this.currentUser)),"function"==typeof p?d.addObserver(p,I,F):d.addObserver(p)}directlySetCurrentUser(d){var p=this;return(0,b.Z)(function*(){p.currentUser&&p.currentUser!==d&&(p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh()),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Vi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,b.Z)(function*(){var p;const I={"X-Client-Version":d.clientVersion};d.app.options.appId&&(I["X-Firebase-gmpid"]=d.app.options.appId);const F=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return F&&(I["X-Firebase-Client"]=F),I})()}}function ht(m){return(0,q.m9)(m)}class hn{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,q.ne)(p=>this.observer=p)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function On(m){const d=m.indexOf(":");return d<0?"":m.substr(0,d+1)}function vr(m){if(!m)return null;const d=Number(m);return isNaN(d)?null:d}class Yn{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return fe("not implemented")}_getIdTokenResponse(d){return fe("not implemented")}_linkToIdToken(d,p){return fe("not implemented")}_getReauthenticationResolver(d){return fe("not implemented")}}function Sr(m,d){return ps.apply(this,arguments)}function ps(){return(ps=(0,b.Z)(function*(m,d){return qt(m,"POST","/v1/accounts:resetPassword",Ot(m,d))})).apply(this,arguments)}function En(m,d){return gs.apply(this,arguments)}function gs(){return(gs=(0,b.Z)(function*(m,d){return qt(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ms(m,d){return ys.apply(this,arguments)}function ys(){return(ys=(0,b.Z)(function*(m,d){return qt(m,"POST","/v1/accounts:update",Ot(m,d))})).apply(this,arguments)}function kr(){return(kr=(0,b.Z)(function*(m,d){return ir(m,"POST","/v1/accounts:signInWithPassword",Ot(m,d))})).apply(this,arguments)}function Lr(m,d){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,b.Z)(function*(m,d){return qt(m,"POST","/v1/accounts:sendOobCode",Ot(m,d))})).apply(this,arguments)}function Gr(m,d){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,b.Z)(function*(m,d){return Lr(m,d)})).apply(this,arguments)}function es(m,d){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,b.Z)(function*(m,d){return Lr(m,d)})).apply(this,arguments)}function Ar(m,d){return oi.apply(this,arguments)}function oi(){return(oi=(0,b.Z)(function*(m,d){return Lr(m,d)})).apply(this,arguments)}function eo(m,d){return ji.apply(this,arguments)}function ji(){return(ji=(0,b.Z)(function*(m,d){return Lr(m,d)})).apply(this,arguments)}function zr(){return(zr=(0,b.Z)(function*(m,d){return ir(m,"POST","/v1/accounts:signInWithEmailLink",Ot(m,d))})).apply(this,arguments)}function $i(){return($i=(0,b.Z)(function*(m,d){return ir(m,"POST","/v1/accounts:signInWithEmailLink",Ot(m,d))})).apply(this,arguments)}class ks extends Yn{constructor(d,p,I,F=null){super("password",I),this._email=d,this._password=p,this._tenantId=F}static _fromEmailAndPassword(d,p){return new ks(d,p,"password")}static _fromEmailAndCode(d,p,I=null){return new ks(d,p,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,b.Z)(function*(){switch(p.signInMethod){case"password":return function Pi(m,d){return kr.apply(this,arguments)}(d,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function to(m,d){return zr.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:et(d,"internal-error")}})()}_linkToIdToken(d,p){var I=this;return(0,b.Z)(function*(){switch(I.signInMethod){case"password":return En(d,{idToken:p,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Ro(m,d){return $i.apply(this,arguments)}(d,{idToken:p,email:I._email,oobCode:I._password});default:et(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function _r(m,d){return ba.apply(this,arguments)}function ba(){return(ba=(0,b.Z)(function*(m,d){return ir(m,"POST","/v1/accounts:signInWithIdp",Ot(m,d))})).apply(this,arguments)}class we extends Yn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new we(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):et("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:F}=p,Z=(0,he._T)(p,["providerId","signInMethod"]);if(!I||!F)return null;const Ae=new we(I,F);return Ae.idToken=Z.idToken||void 0,Ae.accessToken=Z.accessToken||void 0,Ae.secret=Z.secret,Ae.nonce=Z.nonce,Ae.pendingToken=Z.pendingToken||null,Ae}_getIdTokenResponse(d){return _r(d,this.buildRequest())}_linkToIdToken(d,p){const I=this.buildRequest();return I.idToken=p,_r(d,I)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,_r(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,q.xO)(p)}return d}}function _e(m,d){return Le.apply(this,arguments)}function Le(){return(Le=(0,b.Z)(function*(m,d){return qt(m,"POST","/v1/accounts:sendVerificationCode",Ot(m,d))})).apply(this,arguments)}function st(){return(st=(0,b.Z)(function*(m,d){return ir(m,"POST","/v1/accounts:signInWithPhoneNumber",Ot(m,d))})).apply(this,arguments)}function Qn(){return(Qn=(0,b.Z)(function*(m,d){const p=yield ir(m,"POST","/v1/accounts:signInWithPhoneNumber",Ot(m,d));if(p.temporaryProof)throw br(m,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const lr={USER_NOT_FOUND:"user-not-found"};function Oi(){return(Oi=(0,b.Z)(function*(m,d){return ir(m,"POST","/v1/accounts:signInWithPhoneNumber",Ot(m,Object.assign(Object.assign({},d),{operation:"REAUTH"})),lr)})).apply(this,arguments)}class Ni extends Yn{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new Ni({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new Ni({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function Xe(m,d){return st.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function Tt(m,d){return Qn.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Un(m,d){return Oi.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:I,verificationCode:F}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:I,code:F}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:I,phoneNumber:F,temporaryProof:Z}=d;return I||p||F||Z?new Ni({verificationId:p,verificationCode:I,phoneNumber:F,temporaryProof:Z}):null}}class ts{constructor(d){var p,I,F,Z,Ae,We;const St=(0,q.zd)((0,q.pd)(d)),At=null!==(p=St.apiKey)&&void 0!==p?p:null,mn=null!==(I=St.oobCode)&&void 0!==I?I:null,ln=function Ls(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(F=St.mode)&&void 0!==F?F:null);Pe(At&&mn&&ln,"argument-error"),this.apiKey=At,this.operation=ln,this.code=mn,this.continueUrl=null!==(Z=St.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(Ae=St.languageCode)&&void 0!==Ae?Ae:null,this.tenantId=null!==(We=St.tenantId)&&void 0!==We?We:null}static parseLink(d){const p=function Fs(m){const d=(0,q.zd)((0,q.pd)(m)).link,p=d?(0,q.zd)((0,q.pd)(d)).deep_link_id:null,I=(0,q.zd)((0,q.pd)(m)).deep_link_id;return(I?(0,q.zd)((0,q.pd)(I)).link:null)||I||p||d||m}(d);try{return new ts(p)}catch(I){return null}}}let ca=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(p,I){return ks._fromEmailAndPassword(p,I)}static credentialWithLink(p,I){const F=ts.parseLink(I);return Pe(F,"argument-error"),ks._fromEmailAndCode(p,F.code,F.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class vs{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class pi extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Us extends pi{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return Pe("providerId"in p&&"signInMethod"in p,"argument-error"),we._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Pe(d.idToken||d.accessToken,"argument-error"),we._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Us.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Us.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:I,oauthTokenSecret:F,pendingToken:Z,nonce:Ae,providerId:We}=d;if(!I&&!F&&!p&&!Z||!We)return null;try{return new Us(We)._credential({idToken:p,accessToken:I,nonce:Ae,pendingToken:Z})}catch(St){return null}}}let yo=(()=>{class m extends pi{constructor(){super("facebook.com")}static credential(p){return we._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch(I){return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),da=(()=>{class m extends pi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,I){return we._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:I})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:I,oauthAccessToken:F}=p;if(!I&&!F)return null;try{return m.credential(I,F)}catch(Z){return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Jo=(()=>{class m extends pi{constructor(){super("github.com")}static credential(p){return we._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch(I){return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class ro extends Yn{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return _r(d,this.buildRequest())}_linkToIdToken(d,p){const I=this.buildRequest();return I.idToken=p,_r(d,I)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,_r(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:F,pendingToken:Z}=p;return I&&F&&Z&&I===F?new ro(I,Z):null}static _create(d,p){return new ro(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ei extends vs{constructor(d){Pe(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Ei.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Ei.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=ro.fromJSON(d);return Pe(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:I}=d;if(!p||!I)return null;try{return ro._create(I,p)}catch(F){return null}}}let vo=(()=>{class m extends pi{constructor(){super("twitter.com")}static credential(p,I){return we._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:I})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:I,oauthTokenSecret:F}=p;if(!I||!F)return null;try{return m.credential(I,F)}catch(Z){return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Xo(m,d){return ai.apply(this,arguments)}function ai(){return(ai=(0,b.Z)(function*(m,d){return ir(m,"POST","/v1/accounts:signUp",Ot(m,d))})).apply(this,arguments)}class Mr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,I,F=!1){return(0,b.Z)(function*(){const Z=yield de._fromIdTokenResponse(d,I,F),Ae=io(I);return new Mr({user:Z,providerId:Ae,_tokenResponse:I,operationType:p})})()}static _forOperation(d,p,I){return(0,b.Z)(function*(){yield d._updateTokensIfNecessary(I,!0);const F=io(I);return new Mr({user:d,providerId:F,_tokenResponse:I,operationType:p})})()}}function io(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function ns(){return(ns=(0,b.Z)(function*(m){var d;const p=ht(m);if(yield p._initializationPromise,null===(d=p.currentUser)||void 0===d?void 0:d.isAnonymous)return new Mr({user:p.currentUser,providerId:null,operationType:"signIn"});const I=yield Xo(p,{returnSecureToken:!0}),F=yield Mr._fromIdTokenResponse(p,"signIn",I,!0);return yield p._updateCurrentUser(F.user),F})).apply(this,arguments)}class so extends q.ZR{constructor(d,p,I,F){var Z;super(p.code,p.message),this.operationType=I,this.user=F,Object.setPrototypeOf(this,so.prototype),this.customData={appName:d.name,tenantId:null!==(Z=d.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:p.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(d,p,I,F){return new so(d,p,I,F)}}function ha(m,d,p,I){return("reauthenticate"===d?p._getReauthenticationResolver(m):p._getIdTokenResponse(m)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?so._fromErrorAndOperation(m,Z,d,I):Z})}function rs(m){return new Set(m.map(({providerId:d})=>d).filter(d=>!!d))}function Po(){return(Po=(0,b.Z)(function*(m,d){const p=(0,q.m9)(m);yield z(!0,p,d);const{providerUserInfo:I}=yield Or(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),F=rs(I||[]);return p.providerData=p.providerData.filter(Z=>F.has(Z.providerId)),F.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Jn(m,d){return O.apply(this,arguments)}function O(){return(O=(0,b.Z)(function*(m,d,p=!1){const I=yield dr(m,d._linkToIdToken(m.auth,yield m.getIdToken()),p);return Mr._forOperation(m,"link",I)})).apply(this,arguments)}function z(m,d,p){return P.apply(this,arguments)}function P(){return(P=(0,b.Z)(function*(m,d,p){yield ar(d);const F=!1===m?"provider-already-linked":"no-such-provider";Pe(rs(d.providerData).has(p)===m,d.auth,F)})).apply(this,arguments)}function K(m,d){return ce.apply(this,arguments)}function ce(){return(ce=(0,b.Z)(function*(m,d,p=!1){const{auth:I}=m,F="reauthenticate";try{const Z=yield dr(m,ha(I,F,d,m),p);Pe(Z.idToken,I,"internal-error");const Ae=Bt(Z.idToken);Pe(Ae,I,"internal-error");const{sub:We}=Ae;return Pe(m.uid===We,I,"user-mismatch"),Mr._forOperation(m,F,Z)}catch(Z){throw"auth/user-not-found"===(null==Z?void 0:Z.code)&&et(I,"user-mismatch"),Z}})).apply(this,arguments)}function He(m,d){return it.apply(this,arguments)}function it(){return(it=(0,b.Z)(function*(m,d,p=!1){const I="signIn",F=yield ha(m,I,d),Z=yield Mr._fromIdTokenResponse(m,I,F);return p||(yield m._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function It(m,d){return sn.apply(this,arguments)}function sn(){return(sn=(0,b.Z)(function*(m,d){return He(ht(m),d)})).apply(this,arguments)}function Vn(m,d){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,b.Z)(function*(m,d){const p=(0,q.m9)(m);return yield z(!1,p,d.providerId),Jn(p,d)})).apply(this,arguments)}function Nn(m,d){return fr.apply(this,arguments)}function fr(){return(fr=(0,b.Z)(function*(m,d){return K((0,q.m9)(m),d)})).apply(this,arguments)}function Xn(m,d){return sr.apply(this,arguments)}function sr(){return(sr=(0,b.Z)(function*(m,d){return ir(m,"POST","/v1/accounts:signInWithCustomToken",Ot(m,d))})).apply(this,arguments)}function wi(){return(wi=(0,b.Z)(function*(m,d){const p=ht(m),I=yield Xn(p,{token:d,returnSecureToken:!0}),F=yield Mr._fromIdTokenResponse(p,"signIn",I);return yield p._updateCurrentUser(F.user),F})).apply(this,arguments)}class Qt{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?wn._fromServerResponse(d,p):et(d,"internal-error")}}class wn extends Qt{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new wn(p)}}function oo(m,d,p){var I;Pe((null===(I=p.url)||void 0===I?void 0:I.length)>0,m,"invalid-continue-uri"),Pe(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Pe(p.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(Pe(p.android.packageName.length>0,m,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function Hi(){return(Hi=(0,b.Z)(function*(m,d,p){const I=(0,q.m9)(m),F={requestType:"PASSWORD_RESET",email:d};p&&oo(I,F,p),yield es(I,F)})).apply(this,arguments)}function qa(){return(qa=(0,b.Z)(function*(m,d,p){yield Sr((0,q.m9)(m),{oobCode:d,newPassword:p})})).apply(this,arguments)}function rt(){return(rt=(0,b.Z)(function*(m,d){yield ms((0,q.m9)(m),{oobCode:d})})).apply(this,arguments)}function Ln(m,d){return Za.apply(this,arguments)}function Za(){return(Za=(0,b.Z)(function*(m,d){const p=(0,q.m9)(m),I=yield Sr(p,{oobCode:d}),F=I.requestType;switch(Pe(F,p,"internal-error"),F){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Pe(I.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Pe(I.mfaInfo,p,"internal-error");default:Pe(I.email,p,"internal-error")}let Z=null;return I.mfaInfo&&(Z=Qt._fromServerResponse(ht(p),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:Z},operation:F}})).apply(this,arguments)}function Ya(){return(Ya=(0,b.Z)(function*(m,d){const{data:p}=yield Ln((0,q.m9)(m),d);return p.email})).apply(this,arguments)}function Is(){return(Is=(0,b.Z)(function*(m,d,p){const I=ht(m),F=yield Xo(I,{returnSecureToken:!0,email:d,password:p}),Z=yield Mr._fromIdTokenResponse(I,"signIn",F);return yield I._updateCurrentUser(Z.user),Z})).apply(this,arguments)}function _u(){return(_u=(0,b.Z)(function*(m,d,p){const I=(0,q.m9)(m),F={requestType:"EMAIL_SIGNIN",email:d};Pe(p.handleCodeInApp,I,"argument-error"),p&&oo(I,F,p),yield Ar(I,F)})).apply(this,arguments)}function Oo(){return(Oo=(0,b.Z)(function*(m,d,p){const I=(0,q.m9)(m),F=ca.credentialWithLink(d,p||Vt());return Pe(F._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),It(I,F)})).apply(this,arguments)}function ki(m,d){return bs.apply(this,arguments)}function bs(){return(bs=(0,b.Z)(function*(m,d){return qt(m,"POST","/v1/accounts:createAuthUri",Ot(m,d))})).apply(this,arguments)}function Ds(){return(Ds=(0,b.Z)(function*(m,d){const I={identifier:d,continueUri:pn()?Vt():"http://localhost"},{signinMethods:F}=yield ki((0,q.m9)(m),I);return F||[]})).apply(this,arguments)}function pa(){return(pa=(0,b.Z)(function*(m,d){const p=(0,q.m9)(m),F={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};d&&oo(p.auth,F,d);const{email:Z}=yield Gr(p.auth,F);Z!==m.email&&(yield m.reload())})).apply(this,arguments)}function No(){return(No=(0,b.Z)(function*(m,d,p){const I=(0,q.m9)(m),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:d};p&&oo(I.auth,Z,p);const{email:Ae}=yield eo(I.auth,Z);Ae!==m.email&&(yield m.reload())})).apply(this,arguments)}function na(m,d){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,b.Z)(function*(m,d){return qt(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ga(){return(ga=(0,b.Z)(function*(m,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const I=(0,q.m9)(m),Z={idToken:yield I.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},Ae=yield dr(I,na(I.auth,Z));I.displayName=Ae.displayName||null,I.photoURL=Ae.photoUrl||null;const We=I.providerData.find(({providerId:St})=>"password"===St);We&&(We.displayName=I.displayName,We.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Ae)})).apply(this,arguments)}function Aa(m,d,p){return ko.apply(this,arguments)}function ko(){return(ko=(0,b.Z)(function*(m,d,p){const{auth:I}=m,Z={idToken:yield m.getIdToken(),returnSecureToken:!0};d&&(Z.email=d),p&&(Z.password=p);const Ae=yield dr(m,En(I,Z));yield m._updateTokensIfNecessary(Ae,!0)})).apply(this,arguments)}class Lo{constructor(d,p,I={}){this.isNewUser=d,this.providerId=p,this.profile=I}}class Ja extends Lo{constructor(d,p,I,F){super(d,p,I),this.username=F}}class Fo extends Lo{constructor(d,p){super(d,"facebook.com",p)}}class zi extends Ja{constructor(d,p){super(d,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Bs extends Lo{constructor(d,p){super(d,"google.com",p)}}class ma extends Ja{constructor(d,p,I){super(d,"twitter.com",p,I)}}function li(m){const{user:d,_tokenResponse:p}=m;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function wu(m){var d,p;if(!m)return null;const{providerId:I}=m,F=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},Z=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!I&&(null==m?void 0:m.idToken)){const Ae=null===(p=null===(d=Bt(m.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(Ae)return new Lo(Z,"anonymous"!==Ae&&"custom"!==Ae?Ae:null)}if(!I)return null;switch(I){case"facebook.com":return new Fo(Z,F);case"github.com":return new zi(Z,F);case"google.com":return new Bs(Z,F);case"twitter.com":return new ma(Z,F,m.screenName||null);case"custom":case"anonymous":return new Lo(Z,null);default:return new Lo(Z,I,F)}}(p)}class uo{constructor(d,p){this.type=d,this.credential=p}static _fromIdtoken(d){return new uo("enroll",d)}static _fromMfaPendingCredential(d){return new uo("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,I;if(null==d?void 0:d.multiFactorSession){if(null===(p=d.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return uo._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(I=d.multiFactorSession)||void 0===I?void 0:I.idToken)return uo._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Wi{constructor(d,p,I){this.session=d,this.hints=p,this.signInResolver=I}static _fromError(d,p){const I=ht(d),F=p.customData._serverResponse,Z=(F.mfaInfo||[]).map(We=>Qt._fromServerResponse(I,We));Pe(F.mfaPendingCredential,I,"internal-error");const Ae=uo._fromMfaPendingCredential(F.mfaPendingCredential);return new Wi(Ae,Z,function(){var We=(0,b.Z)(function*(St){const At=yield St._process(I,Ae);delete F.mfaInfo,delete F.mfaPendingCredential;const mn=Object.assign(Object.assign({},F),{idToken:At.idToken,refreshToken:At.refreshToken});switch(p.operationType){case"signIn":const ln=yield Mr._fromIdTokenResponse(I,p.operationType,mn);return yield I._updateCurrentUser(ln.user),ln;case"reauthenticate":return Pe(p.user,I,"internal-error"),Mr._forOperation(p.user,p.operationType,mn);default:et(I,"internal-error")}});return function(St){return We.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,b.Z)(function*(){return p.signInResolver(d)})()}}function Wr(m,d){return qt(m,"POST","/v2/accounts/mfaEnrollment:start",Ot(m,d))}class Ki{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(I=>Qt._fromServerResponse(d.auth,I)))})}static _fromUser(d){return new Ki(d)}getSession(){var d=this;return(0,b.Z)(function*(){return uo._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,p){var I=this;return(0,b.Z)(function*(){const F=d,Z=yield I.getSession(),Ae=yield dr(I.user,F._process(I.user.auth,Z,p));return yield I.user._updateTokensIfNecessary(Ae),I.user.reload()})()}unenroll(d){var p=this;return(0,b.Z)(function*(){const I="string"==typeof d?d:d.uid,F=yield p.user.getIdToken(),Z=yield dr(p.user,function nu(m,d){return qt(m,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(m,d))}(p.user.auth,{idToken:F,mfaEnrollmentId:I}));p.enrolledFactors=p.enrolledFactors.filter(({uid:Ae})=>Ae!==I),yield p.user._updateTokensIfNecessary(Z);try{yield p.user.reload()}catch(Ae){if("auth/user-token-expired"!==Ae.code)throw Ae}})()}}const wo=new WeakMap,Ts="__sak";class bo{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ts,"1"),this.storage.removeItem(Ts),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const ei=(()=>{class m extends bo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,I)=>this.onStorageEvent(p,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function co(){const m=(0,q.z$)();return gn(m)||Nr(m)}()&&function Dr(){try{return!(!window||window===window.top)}catch(m){return!1}}(),this.fallbackToPolling=Hr(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const I of Object.keys(this.listeners)){const F=this.storage.getItem(I),Z=this.localCache[I];F!==Z&&p(I,Z,F)}}onStorageEvent(p,I=!1){if(!p.key)return void this.forAllChangedKeys((We,St,At)=>{this.notifyListeners(We,At)});const F=p.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const We=this.storage.getItem(F);if(p.newValue!==We)null!==p.newValue?this.storage.setItem(F,p.newValue):this.storage.removeItem(F);else if(this.localCache[F]===p.newValue&&!I)return}const Z=()=>{const We=this.storage.getItem(F);!I&&this.localCache[F]===We||this.notifyListeners(F,We)},Ae=this.storage.getItem(F);!function fi(){return(0,q.w1)()&&10===document.documentMode}()||Ae===p.newValue||p.newValue===p.oldValue?Z():setTimeout(Z,10)}notifyListeners(p,I){this.localCache[p]=I;const F=this.listeners[p];if(F)for(const Z of Array.from(F))Z(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,I,F)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:I,newValue:F}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(I)}_removeListener(p,I){this.listeners[p]&&(this.listeners[p].delete(I),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,I){var F=()=>super._set,Z=this;return(0,b.Z)(function*(){yield F().call(Z,p,I),Z.localCache[p]=JSON.stringify(I)})()}_get(p){var I=()=>super._get,F=this;return(0,b.Z)(function*(){const Z=yield I().call(F,p);return F.localCache[p]=JSON.stringify(Z),Z})()}_remove(p){var I=()=>super._remove,F=this;return(0,b.Z)(function*(){yield I().call(F,p),delete F.localCache[p]})()}}return m.type="LOCAL",m})(),Kr=(()=>{class m extends bo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,I){}_removeListener(p,I){}}return m.type="SESSION",m})();let is=(()=>{class m{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const I=this.receivers.find(Z=>Z.isListeningto(p));if(I)return I;const F=new m(p);return this.receivers.push(F),F}isListeningto(p){return this.eventTarget===p}handleEvent(p){var I=this;return(0,b.Z)(function*(){const F=p,{eventId:Z,eventType:Ae,data:We}=F.data,St=I.handlersMap[Ae];if(!(null==St?void 0:St.size))return;F.ports[0].postMessage({status:"ack",eventId:Z,eventType:Ae});const At=Array.from(St).map(function(){var ln=(0,b.Z)(function*(gr){return gr(F.origin,We)});return function(gr){return ln.apply(this,arguments)}}()),mn=yield function Cs(m){return Promise.all(m.map(function(){var d=(0,b.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(I){return{fulfilled:!1,reason:I}}});return function(p){return d.apply(this,arguments)}}()))}(At);F.ports[0].postMessage({status:"done",eventId:Z,eventType:Ae,response:mn})})()}_subscribe(p,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(I)}_unsubscribe(p,I){this.handlersMap[p]&&I&&this.handlersMap[p].delete(I),(!I||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function ss(m="",d=10){let p="";for(let I=0;I<d;I++)p+=Math.floor(10*Math.random());return m+p}class Pa{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,I=50){var F=this;return(0,b.Z)(function*(){const Z="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let Ae,We;return new Promise((St,At)=>{const mn=ss("",20);Z.port1.start();const ln=setTimeout(()=>{At(new Error("unsupported_event"))},I);We={messageChannel:Z,onMessage(gr){const sa=gr;if(sa.data.eventId===mn)switch(sa.data.status){case"ack":clearTimeout(ln),Ae=setTimeout(()=>{At(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ae),St(sa.data.response);break;default:clearTimeout(ln),clearTimeout(Ae),At(new Error("invalid_response"))}}},F.handlers.add(We),Z.port1.addEventListener("message",We.onMessage),F.target.postMessage({eventType:d,eventId:mn,data:p},[Z.port2])}).finally(()=>{We&&F.removeMessageHandler(We)})})()}}function Er(){return window}function $s(){return void 0!==Er().WorkerGlobalScope&&"function"==typeof Er().importScripts}function Gs(){return(Gs=(0,b.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(m){return null}})).apply(this,arguments)}const Do="firebaseLocalStorageDb",Br="firebaseLocalStorage",os="fbase_key";class mi{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function zs(m,d){return m.transaction([Br],d?"readwrite":"readonly").objectStore(Br)}function T(){const m=indexedDB.open(Do,1);return new Promise((d,p)=>{m.addEventListener("error",()=>{p(m.error)}),m.addEventListener("upgradeneeded",()=>{const I=m.result;try{I.createObjectStore(Br,{keyPath:os})}catch(F){p(F)}}),m.addEventListener("success",(0,b.Z)(function*(){const I=m.result;I.objectStoreNames.contains(Br)?d(I):(I.close(),yield function Zi(){const m=indexedDB.deleteDatabase(Do);return new mi(m).toPromise()}(),d(yield T()))}))})}function w(m,d,p){return E.apply(this,arguments)}function E(){return(E=(0,b.Z)(function*(m,d,p){const I=zs(m,!0).put({[os]:d,value:p});return new mi(I).toPromise()})).apply(this,arguments)}function N(){return(N=(0,b.Z)(function*(m,d){const p=zs(m,!1).get(d),I=yield new mi(p).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function j(m,d){const p=zs(m,!0).delete(d);return new mi(p).toPromise()}const Me=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,b.Z)(function*(){return p.db||(p.db=yield T()),p.db})()}_withRetries(p){var I=this;return(0,b.Z)(function*(){let F=0;for(;;)try{const Z=yield I._openDb();return yield p(Z)}catch(Z){if(F++>3)throw Z;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,b.Z)(function*(){return $s()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,b.Z)(function*(){p.receiver=is._getInstance(function qi(){return $s()?self:null}()),p.receiver._subscribe("keyChanged",function(){var I=(0,b.Z)(function*(F,Z){return{keyProcessed:(yield p._poll()).includes(Z.key)}});return function(F,Z){return I.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var I=(0,b.Z)(function*(F,Z){return["keyChanged"]});return function(F,Z){return I.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,b.Z)(function*(){var I,F;if(p.activeServiceWorker=yield function Hs(){return Gs.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Pa(p.activeServiceWorker);const Z=yield p.sender._send("ping",{},800);!Z||(null===(I=Z[0])||void 0===I?void 0:I.fulfilled)&&(null===(F=Z[0])||void 0===F?void 0:F.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var I=this;return(0,b.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function dl(){var m;return(null===(m=null==navigator?void 0:navigator.serviceWorker)||void 0===m?void 0:m.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:p},I.serviceWorkerReceiverAvailable?800:50)}catch(F){}})()}_isAvailable(){return(0,b.Z)(function*(){try{if(!indexedDB)return!1;const p=yield T();return yield w(p,Ts,"1"),yield j(p,Ts),!0}catch(p){}return!1})()}_withPendingWrite(p){var I=this;return(0,b.Z)(function*(){I.pendingWrites++;try{yield p()}finally{I.pendingWrites--}})()}_set(p,I){var F=this;return(0,b.Z)(function*(){return F._withPendingWrite((0,b.Z)(function*(){return yield F._withRetries(Z=>w(Z,p,I)),F.localCache[p]=I,F.notifyServiceWorker(p)}))})()}_get(p){var I=this;return(0,b.Z)(function*(){const F=yield I._withRetries(Z=>function R(m,d){return N.apply(this,arguments)}(Z,p));return I.localCache[p]=F,F})()}_remove(p){var I=this;return(0,b.Z)(function*(){return I._withPendingWrite((0,b.Z)(function*(){return yield I._withRetries(F=>j(F,p)),delete I.localCache[p],I.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,b.Z)(function*(){const I=yield p._withRetries(Ae=>{const We=zs(Ae,!1).getAll();return new mi(We).toPromise()});if(!I)return[];if(0!==p.pendingWrites)return[];const F=[],Z=new Set;for(const{fbase_key:Ae,value:We}of I)Z.add(Ae),JSON.stringify(p.localCache[Ae])!==JSON.stringify(We)&&(p.notifyListeners(Ae,We),F.push(Ae));for(const Ae of Object.keys(p.localCache))p.localCache[Ae]&&!Z.has(Ae)&&(p.notifyListeners(Ae,null),F.push(Ae));return F})()}notifyListeners(p,I){this.localCache[p]=I;const F=this.listeners[p];if(F)for(const Z of Array.from(F))Z(I)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,b.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(I)}_removeListener(p,I){this.listeners[p]&&(this.listeners[p].delete(I),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function Jt(m,d){return qt(m,"POST","/v2/accounts/mfaSignIn:start",Ot(m,d))}function kn(){return(kn=(0,b.Z)(function*(m){return(yield qt(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ss(m){return new Promise((d,p)=>{const I=document.createElement("script");I.setAttribute("src",m),I.onload=d,I.onerror=F=>{const Z=Re("internal-error");Z.customData=F,p(Z)},I.type="text/javascript",I.charset="UTF-8",function Yi(){var m,d;return null!==(d=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==d?d:document}().appendChild(I)})}function ya(m){return`__${m}${Math.floor(1e6*Math.random())}`}const us=1e12;class As{constructor(d){this.auth=d,this.counter=us,this._widgets=new Map}render(d,p){const I=this.counter;return this._widgets.set(I,new Vu(d,this.auth.name,p||{})),this.counter++,I}reset(d){var p;const I=d||us;null===(p=this._widgets.get(I))||void 0===p||p.delete(),this._widgets.delete(I)}getResponse(d){var p;return(null===(p=this._widgets.get(d||us))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,b.Z)(function*(){var I;return null===(I=p._widgets.get(d||us))||void 0===I||I.execute(),""})()}}class Vu{constructor(d,p,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const F="string"==typeof d?document.getElementById(d):d;Pe(F,"argument-error",{appName:p}),this.container=F,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Oa(m){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<m;I++)d.push(p.charAt(Math.floor(Math.random()*p.length)));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cn=ya("rcb"),su=new $e(3e4,6e4);class yi{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Er().grecaptcha}load(d,p=""){return Pe(function fn(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(p),d,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Er().grecaptcha):new Promise((I,F)=>{const Z=Er().setTimeout(()=>{F(Re(d,"network-request-failed"))},su.get());Er()[Cn]=()=>{Er().clearTimeout(Z),delete Er()[Cn];const We=Er().grecaptcha;if(!We)return void F(Re(d,"internal-error"));const St=We.render;We.render=(At,mn)=>{const ln=St(At,mn);return this.counter++,ln},this.hostLanguage=p,I(We)},Ss(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:Cn,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(Z),F(Re(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!Er().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nc{load(d){return(0,b.Z)(function*(){return new As(d)})()}clearedOneInstance(){}}const va="recaptcha",bu={theme:"light",type:"image"};class Bu{constructor(d,p=Object.assign({},bu),I){this.parameters=p,this.type=va,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ht(I),this.isInvisible="invisible"===this.parameters.size,Pe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const F="string"==typeof d?document.getElementById(d):d;Pe(F,this.auth,"argument-error"),this.container=F,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nc:new yi,this.validateStartingState()}verify(){var d=this;return(0,b.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),I=d.getAssertedRecaptcha();return I.getResponse(p)||new Promise(Z=>{const Ae=We=>{!We||(d.tokenChangeListeners.delete(Ae),Z(We))};d.tokenChangeListeners.add(Ae),d.isInvisible&&I.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Pe(!this.parameters.sitekey,this.auth,"argument-error"),Pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(I=>I(p)),"function"==typeof d)d(p);else if("string"==typeof d){const I=Er()[d];"function"==typeof I&&I(p)}}}assertNotDestroyed(){Pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,b.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const I=document.createElement("div");p.appendChild(I),p=I}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,b.Z)(function*(){Pe(pn()&&!$s(),d.auth,"internal-error"),yield function Fn(){let m=null;return new Promise(d=>{"complete"!==document.readyState?(m=()=>d(),window.addEventListener("load",m)):d()}).catch(d=>{throw m&&window.removeEventListener("load",m),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function cr(m){return kn.apply(this,arguments)}(d.auth);Pe(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return Pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ra{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=Ni._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function pr(){return(pr=(0,b.Z)(function*(m,d,p){const I=ht(m),F=yield Kn(I,d,(0,q.m9)(p));return new ra(F,Z=>It(I,Z))})).apply(this,arguments)}function jr(){return(jr=(0,b.Z)(function*(m,d,p){const I=(0,q.m9)(m);yield z(!1,I,"phone");const F=yield Kn(I.auth,d,(0,q.m9)(p));return new ra(F,Z=>Vn(I,Z))})).apply(this,arguments)}function Bo(){return(Bo=(0,b.Z)(function*(m,d,p){const I=(0,q.m9)(m),F=yield Kn(I.auth,d,(0,q.m9)(p));return new ra(F,Z=>Nn(I,Z))})).apply(this,arguments)}function Kn(m,d,p){return vi.apply(this,arguments)}function vi(){return(vi=(0,b.Z)(function*(m,d,p){var I;const F=yield p.verify();try{let Z;if(Pe("string"==typeof F,m,"argument-error"),Pe(p.type===va,m,"argument-error"),Z="string"==typeof d?{phoneNumber:d}:d,"session"in Z){const Ae=Z.session;if("phoneNumber"in Z)return Pe("enroll"===Ae.type,m,"internal-error"),(yield Wr(m,{idToken:Ae.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:F}})).phoneSessionInfo.sessionInfo;{Pe("signin"===Ae.type,m,"internal-error");const We=(null===(I=Z.multiFactorHint)||void 0===I?void 0:I.uid)||Z.multiFactorUid;return Pe(We,m,"missing-multi-factor-info"),(yield Jt(m,{mfaPendingCredential:Ae.credential,mfaEnrollmentId:We,phoneSignInInfo:{recaptchaToken:F}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ae}=yield _e(m,{phoneNumber:Z.phoneNumber,recaptchaToken:F});return Ae}}finally{p._reset()}})).apply(this,arguments)}function fo(){return(fo=(0,b.Z)(function*(m,d){yield Jn((0,q.m9)(m),d)})).apply(this,arguments)}let Li=(()=>{class m{constructor(p){this.providerId=m.PROVIDER_ID,this.auth=ht(p)}verifyPhoneNumber(p,I){return Kn(this.auth,p,(0,q.m9)(I))}static credential(p,I){return Ni._fromVerification(p,I)}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:I,temporaryProof:F}=p;return I&&F?Ni._fromTokenResponse(I,F):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Ws(m,d){return d?le(d):(Pe(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Ks extends Yn{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return _r(d,this._buildIdpRequest())}_linkToIdToken(d,p){return _r(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return _r(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function jo(m){return He(m.auth,new Ks(m),m.bypassAuthState)}function ou(m){const{auth:d,user:p}=m;return Pe(p,d,"internal-error"),K(p,new Ks(m),m.bypassAuthState)}function xl(m){return Et.apply(this,arguments)}function Et(){return(Et=(0,b.Z)(function*(m){const{auth:d,user:p}=m;return Pe(p,d,"internal-error"),Jn(p,new Ks(m),m.bypassAuthState)})).apply(this,arguments)}class qs{constructor(d,p,I,F,Z=!1){this.auth=d,this.resolver=I,this.user=F,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,b.Z)(function*(I,F){d.pendingPromise={resolve:I,reject:F};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(Z){d.reject(Z)}});return function(I,F){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,b.Z)(function*(){const{urlResponse:I,sessionId:F,postBody:Z,tenantId:Ae,error:We,type:St}=d;if(We)return void p.reject(We);const At={auth:p.auth,requestUri:I,sessionId:F,tenantId:Ae||void 0,postBody:Z||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(St)(At))}catch(mn){p.reject(mn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return jo;case"linkViaPopup":case"linkViaRedirect":return xl;case"reauthViaPopup":case"reauthViaRedirect":return ou;default:et(this.auth,"internal-error")}}resolve(d){ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fl=new $e(2e3,1e4);function To(){return(To=(0,b.Z)(function*(m,d,p){const I=ht(m);gt(m,d,vs);const F=Ws(I,p);return new Co(I,"signInViaPopup",d,F).executeNotNull()})).apply(this,arguments)}function Zs(){return(Zs=(0,b.Z)(function*(m,d,p){const I=(0,q.m9)(m);gt(I.auth,d,vs);const F=Ws(I.auth,p);return new Co(I.auth,"reauthViaPopup",d,F,I).executeNotNull()})).apply(this,arguments)}function _a(){return(_a=(0,b.Z)(function*(m,d,p){const I=(0,q.m9)(m);gt(I.auth,d,vs);const F=Ws(I.auth,p);return new Co(I.auth,"linkViaPopup",d,F,I).executeNotNull()})).apply(this,arguments)}let Co=(()=>{class m extends qs{constructor(p,I,F,Z,Ae){super(p,I,Z,Ae),this.provider=F,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var p=this;return(0,b.Z)(function*(){const I=yield p.execute();return Pe(I,p.auth,"internal-error"),I})()}onExecution(){var p=this;return(0,b.Z)(function*(){ke(1===p.filter.length,"Popup operations only handle one event");const I=ss();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],I),p.authWindow.associatedEvent=I,p.resolver._originValidation(p.auth).catch(F=>{p.reject(F)}),p.resolver._isIframeWebStorageSupported(p.auth,F=>{F||p.reject(Re(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const p=()=>{var I,F;this.pollId=(null===(F=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===F?void 0:F.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,fl.get())};p()}}return m.currentPopupAction=null,m})();const Ys=new Map;class uu extends qs{constructor(d,p,I=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,I),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,b.Z)(function*(){let I=Ys.get(p.auth._key());if(!I){try{const Z=(yield function Du(m,d){return $u.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;I=()=>Promise.resolve(Z)}catch(F){I=()=>Promise.reject(F)}Ys.set(p.auth._key(),I)}return p.bypassAuthState||Ys.set(p.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,I=this;return(0,b.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(I,d);if("unknown"!==d.type){if(d.eventId){const F=yield I.auth._redirectUserForId(d.eventId);if(F)return I.user=F,p().call(I,d);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,b.Z)(function*(){})()}cleanUp(){}}function $u(){return($u=(0,b.Z)(function*(m,d){const p=k(d),I=x(m);if(!(yield I._isAvailable()))return!1;const F="true"===(yield I._get(p));return yield I._remove(p),F})).apply(this,arguments)}function $o(m,d){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,b.Z)(function*(m,d){return x(m)._set(k(d),"true")})).apply(this,arguments)}function x(m){return le(m._redirectPersistence)}function k(m){return ze("pendingRedirect",m.config.apiKey,m.name)}function Te(){return(Te=(0,b.Z)(function*(m,d,p){const I=ht(m);gt(m,d,vs);const F=Ws(I,p);return yield $o(F,I),F._openRedirect(I,d,"signInViaRedirect")})).apply(this,arguments)}function bt(){return(bt=(0,b.Z)(function*(m,d,p){const I=(0,q.m9)(m);gt(I.auth,d,vs);const F=Ws(I.auth,p);yield $o(F,I.auth);const Z=yield Tu(I);return F._openRedirect(I.auth,d,"reauthViaRedirect",Z)})).apply(this,arguments)}function Gn(){return(Gn=(0,b.Z)(function*(m,d,p){const I=(0,q.m9)(m);gt(I.auth,d,vs);const F=Ws(I.auth,p);yield z(!1,I,d.providerId),yield $o(F,I.auth);const Z=yield Tu(I);return F._openRedirect(I.auth,d,"linkViaRedirect",Z)})).apply(this,arguments)}function Rr(){return(Rr=(0,b.Z)(function*(m,d){return yield ht(m)._initializationPromise,ti(m,d,!1)})).apply(this,arguments)}function ti(m,d){return lu.apply(this,arguments)}function lu(){return(lu=(0,b.Z)(function*(m,d,p=!1){const I=ht(m),F=Ws(I,d),Ae=yield new uu(I,F,p).execute();return Ae&&!p&&(delete Ae.user._redirectEventId,yield I._persistUserIfCurrent(Ae.user),yield I._setRedirectUser(null,d)),Ae})).apply(this,arguments)}function Tu(m){return Di.apply(this,arguments)}function Di(){return(Di=(0,b.Z)(function*(m){const d=ss(`${m.uid}:::`);return m._redirectEventId=d,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),d})).apply(this,arguments)}class Qs{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(d,I)&&(p=!0,this.sendToConsumer(d,I),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Cr(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gu(m);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var I;if(d.error&&!Gu(d)){const F=(null===(I=d.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";p.onError(Re(this.auth,F))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const I=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&I}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ao(d))}saveEventToCache(d){this.cachedEventUids.add(Ao(d)),this.lastProcessedEventTime=Date.now()}}function Ao(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(d=>d).join("-")}function Gu({type:m,error:d}){return"unknown"===m&&"auth/no-auth-event"===(null==d?void 0:d.code)}function Na(m){return zu.apply(this,arguments)}function zu(){return(zu=(0,b.Z)(function*(m,d={}){return qt(m,"GET","/v1/projects",d)})).apply(this,arguments)}const Fc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rc=/^https?/;function ka(){return(ka=(0,b.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:d}=yield Na(m);for(const p of d)try{if(cu(p))return}catch(I){}et(m,"unauthorized-domain")})).apply(this,arguments)}function cu(m){const d=Vt(),{protocol:p,hostname:I}=new URL(d);if(m.startsWith("chrome-extension://")){const Ae=new URL(m);return""===Ae.hostname&&""===I?"chrome-extension:"===p&&m.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&Ae.hostname===I}if(!rc.test(p))return!1;if(Fc.test(m))return I===m;const F=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+F+"|"+F+")$","i").test(I)}const Sd=new $e(3e4,6e4);function du(){const m=Er().___jsl;if(null==m?void 0:m.H)for(const d of Object.keys(m.H))if(m.H[d].r=m.H[d].r||[],m.H[d].L=m.H[d].L||[],m.H[d].r=[...m.H[d].L],m.CP)for(let p=0;p<m.CP.length;p++)m.CP[p]=null}let Rl=null;function Uc(m){return Rl=Rl||function La(m){return new Promise((d,p)=>{var I,F,Z;function Ae(){du(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{du(),p(Re(m,"network-request-failed"))},timeout:Sd.get()})}if(null===(F=null===(I=Er().gapi)||void 0===I?void 0:I.iframes)||void 0===F?void 0:F.Iframe)d(gapi.iframes.getContext());else{if(!(null===(Z=Er().gapi)||void 0===Z?void 0:Z.load)){const We=ya("iframefcb");return Er()[We]=()=>{gapi.load?Ae():p(Re(m,"network-request-failed"))},Ss(`https://apis.google.com/js/api.js?onload=${We}`).catch(St=>p(St))}Ae()}}).catch(d=>{throw Rl=null,d})}(m),Rl}const Vc=new $e(5e3,15e3),Ua={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Go(m){const d=m.config;Pe(d.authDomain,m,"auth-domain-config-required");const p=d.emulator?ot(d,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,I={apiKey:d.apiKey,appName:m.name,v:Ee.SDK_VERSION},F=Cu.get(m.config.apiHost);F&&(I.eid=F);const Z=m._getFrameworks();return Z.length&&(I.fw=Z.join(",")),`${p}?${(0,q.xO)(I).slice(1)}`}function gl(){return gl=(0,b.Z)(function*(m){const d=yield Uc(m),p=Er().gapi;return Pe(p,m,"internal-error"),d.open({where:document.body,url:Go(m),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ua,dontclear:!0},I=>new Promise(function(){var F=(0,b.Z)(function*(Z,Ae){yield I.restyle({setHideOnLeave:!1});const We=Re(m,"network-request-failed"),St=Er().setTimeout(()=>{Ae(We)},Vc.get());function At(){Er().clearTimeout(St),Z(I)}I.ping(At).then(At,()=>{Ae(We)})});return function(Z,Ae){return F.apply(this,arguments)}}()))}),gl.apply(this,arguments)}const ic={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ol{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function uc(m,d,p,I,F,Z){Pe(m.config.authDomain,m,"auth-domain-config-required"),Pe(m.config.apiKey,m,"invalid-api-key");const Ae={apiKey:m.config.apiKey,appName:m.name,authType:p,redirectUrl:I,v:Ee.SDK_VERSION,eventId:F};if(d instanceof vs){d.setDefaultLanguage(m.languageCode),Ae.providerId=d.providerId||"",(0,q.xb)(d.getCustomParameters())||(Ae.customParameters=JSON.stringify(d.getCustomParameters()));for(const[St,At]of Object.entries(Z||{}))Ae[St]=At}if(d instanceof pi){const St=d.getScopes().filter(At=>""!==At);St.length>0&&(Ae.scopes=St.join(","))}m.tenantId&&(Ae.tid=m.tenantId);const We=Ae;for(const St of Object.keys(We))void 0===We[St]&&delete We[St];return`${function jc({config:m}){return m.emulator?ot(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,q.xO)(We).slice(1)}`}const Ea="webStorageSupport";class c extends class D{constructor(d){this.factorId=d}_process(d,p,I){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,I);case"signin":return this._finalizeSignIn(d,p.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new c(d)}_finalizeEnroll(d,p,I){return function Ii(m,d){return qt(m,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(m,d))}(d,{idToken:p,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function jt(m,d){return qt(m,"POST","/v2/accounts/mfaSignIn:finalize",Ot(m,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let h=(()=>{class m{constructor(){}static assertion(p){return c._fromCredential(p)}}return m.FACTOR_ID="phone",m})();var _="@firebase/auth",M="0.19.11";class ${constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,b.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(I=>{var F;d((null===(F=I)||void 0===F?void 0:F.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);!p||(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Be(){return window}function en(){return(en=(0,b.Z)(function*(m,d,p){var I;const{BuildInfo:F}=Be();ke(d.sessionId,"AuthEvent did not contain a session ID");const Z=yield Ms(d.sessionId),Ae={};return Nr()?Ae.ibi=F.packageName:hr()?Ae.apn=F.packageName:et(m,"operation-not-supported-in-this-environment"),F.displayName&&(Ae.appDisplayName=F.displayName),Ae.sessionId=Z,uc(m,p,d.type,void 0,null!==(I=d.eventId)&&void 0!==I?I:void 0,Ae)})).apply(this,arguments)}function dt(){return(dt=(0,b.Z)(function*(m){const{BuildInfo:d}=Be(),p={};Nr()?p.iosBundleId=d.packageName:hr()?p.androidPackageName=d.packageName:et(m,"operation-not-supported-in-this-environment"),yield Na(m,p)})).apply(this,arguments)}function er(){return(er=(0,b.Z)(function*(m,d,p){const{cordova:I}=Be();let F=()=>{};try{yield new Promise((Z,Ae)=>{let We=null;function St(){var ln;Z();const gr=null===(ln=I.plugins.browsertab)||void 0===ln?void 0:ln.close;"function"==typeof gr&&gr(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function At(){We||(We=window.setTimeout(()=>{Ae(Re(m,"redirect-cancelled-by-user"))},2e3))}function mn(){"visible"===(null==document?void 0:document.visibilityState)&&At()}d.addPassiveListener(St),document.addEventListener("resume",At,!1),hr()&&document.addEventListener("visibilitychange",mn,!1),F=()=>{d.removePassiveListener(St),document.removeEventListener("resume",At,!1),document.removeEventListener("visibilitychange",mn,!1),We&&window.clearTimeout(We)}})}finally{F()}})).apply(this,arguments)}function Ms(m){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,b.Z)(function*(m){const d=qu(m),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(F=>F.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function qu(m){if(ke(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(m);const d=new ArrayBuffer(m.length),p=new Uint8Array(d);for(let I=0;I<m.length;I++)p[I]=m.charCodeAt(I);return p}!function ne(m){(0,Ee._registerComponent)(new Ie.wA("auth",(d,{options:p})=>{const I=d.getProvider("app").getImmediate(),F=d.getProvider("heartbeat"),{apiKey:Z,authDomain:Ae}=I.options;return((We,St)=>{Pe(Z&&!Z.includes(":"),"invalid-api-key",{appName:We.name}),Pe(!(null==Ae?void 0:Ae.includes(":")),"argument-error",{appName:We.name});const At={apiKey:Z,authDomain:Ae,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vi(m)},mn=new Ri(We,St,At);return function be(m,d){const p=(null==d?void 0:d.persistence)||[],I=(Array.isArray(p)?p:[p]).map(le);(null==d?void 0:d.errorMap)&&m._updateErrorMap(d.errorMap),m._initializeWithPersistence(I,null==d?void 0:d.popupRedirectResolver)}(mn,p),mn})(I,F)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,I)=>{d.getProvider("auth-internal").initialize()})),(0,Ee._registerComponent)(new Ie.wA("auth-internal",d=>{const p=ht(d.getProvider("auth").getImmediate());return new $(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ee.registerVersion)(_,M,function Y(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,Ee.registerVersion)(_,M,"esm2017")}("Browser");class di extends Qs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,b.Z)(function*(){yield d.initPromise})()}}function wa(m){return ja.apply(this,arguments)}function ja(){return(ja=(0,b.Z)(function*(m){const d=yield hi()._get(tr(m));return d&&(yield hi()._remove(tr(m))),d})).apply(this,arguments)}function Au(){const m=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const I=Math.floor(Math.random()*d.length);m.push(d.charAt(I))}return m.join("")}function hi(){return le(ei)}function tr(m){return ze("authEvent",m.config.apiKey,m.name)}function tn(m){if(!(null==m?void 0:m.includes("?")))return{};const[d,...p]=m.split("?");return(0,q.zd)(p.join("?"))}function qn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Re("no-auth-event")}}function Qi(){var m;return(null===(m=null==self?void 0:self.location)||void 0===m?void 0:m.protocol)||null}function Mo(m=(0,q.z$)()){return!("file:"!==Qi()&&"ionic:"!==Qi()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function ls(){try{const m=self.localStorage,d=ss();if(m)return m.setItem(d,"1"),m.removeItem(d),!function cc(m=(0,q.z$)()){return function $c(){return(0,q.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Fr(m=(0,q.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,q.hl)()}catch(m){return xu()&&(0,q.hl)()}return!1}function xu(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zu(){return(function Ha(){return"http:"===Qi()||"https:"===Qi()}()||(0,q.ru)()||Mo())&&!function Mu(){return(0,q.b$)()||(0,q.UG)()}()&&ls()&&!xu()}function Ll(){return Mo()&&"undefined"!=typeof document}function Yu(){return(Yu=(0,b.Z)(function*(){return!!Ll()&&new Promise(m=>{const d=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),m(!0)})})})).apply(this,arguments)}const ia={LOCAL:"local",NONE:"none",SESSION:"session"},Fl=Pe,Gc="persistence";function zc(m){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,b.Z)(function*(m){yield m._initializationPromise;const d=Md(),p=ze(Gc,m.config.apiKey,m.name);d&&d.setItem(p,m._getPersistence())})).apply(this,arguments)}function Md(){var m;try{return(null===(m=function Hc(){return"undefined"!=typeof window?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch(d){return null}}const Uf=Pe;class Zr{constructor(){this.browserResolver=le(class Ku{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kr,this._completeRedirectFn=ti}_openPopup(d,p,I,F){var Z=this;return(0,b.Z)(function*(){var Ae;ke(null===(Ae=Z.eventManagers[d._key()])||void 0===Ae?void 0:Ae.manager,"_initialize() not called before _openPopup()");const We=uc(d,p,I,Vt(),F);return function Nl(m,d,p,I=500,F=600){const Z=Math.max((window.screen.availHeight-F)/2,0).toString(),Ae=Math.max((window.screen.availWidth-I)/2,0).toString();let We="";const St=Object.assign(Object.assign({},ic),{width:I.toString(),height:F.toString(),top:Z,left:Ae}),At=(0,q.z$)().toLowerCase();p&&(We=Gt(At)?"_blank":p),Yt(At)&&(d=d||"http://localhost",St.scrollbars="yes");const mn=Object.entries(St).reduce((gr,[sa,Qu])=>`${gr}${sa}=${Qu},`,"");if(function Qo(m=(0,q.z$)()){var d;return Nr(m)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(At)&&"_self"!==We)return function kl(m,d){const p=document.createElement("a");p.href=m,p.target=d;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(I)}(d||"",We),new Ol(null);const ln=window.open(d||"",We,mn);Pe(ln,m,"popup-blocked");try{ln.focus()}catch(gr){}return new Ol(ln)}(d,We,ss())})()}_openRedirect(d,p,I,F){var Z=this;return(0,b.Z)(function*(){return yield Z._originValidation(d),function Uo(m){Er().location.href=m}(uc(d,p,I,Vt(),F)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:F,promise:Z}=this.eventManagers[p];return F?Promise.resolve(F):(ke(Z,"If manager is not set, promise should be"),Z)}const I=this.initAndGetManager(d);return this.eventManagers[p]={promise:I},I.catch(()=>{delete this.eventManagers[p]}),I}initAndGetManager(d){var p=this;return(0,b.Z)(function*(){const I=yield function Pl(m){return gl.apply(this,arguments)}(d),F=new Qs(d);return I.register("authEvent",Z=>(Pe(null==Z?void 0:Z.authEvent,d,"invalid-auth-event"),{status:F.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:F},p.iframes[d._key()]=I,F})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(Ea,{type:Ea},F=>{var Z;const Ae=null===(Z=null==F?void 0:F[0])||void 0===Z?void 0:Z[Ea];void 0!==Ae&&p(!!Ae),et(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Cd(m){return ka.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return Hr()||gn()||Nr()}}),this.cordovaResolver=le(class Ci{constructor(){this._redirectPersistence=Kr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ti}_initialize(d){var p=this;return(0,b.Z)(function*(){const I=d._key();let F=p.eventManagers.get(I);return F||(F=new di(d),p.eventManagers.set(I,F),p.attachCallbackListeners(d,F)),F})()}_openPopup(d){et(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,I,F){var Z=this;return(0,b.Z)(function*(){!function qr(m){var d,p,I,F,Z,Ae,We,St,At,mn;const ln=Be();Pe("function"==typeof(null===(d=null==ln?void 0:ln.universalLinks)||void 0===d?void 0:d.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Pe(void 0!==(null===(p=null==ln?void 0:ln.BuildInfo)||void 0===p?void 0:p.packageName),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Pe("function"==typeof(null===(Z=null===(F=null===(I=null==ln?void 0:ln.cordova)||void 0===I?void 0:I.plugins)||void 0===F?void 0:F.browsertab)||void 0===Z?void 0:Z.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pe("function"==typeof(null===(St=null===(We=null===(Ae=null==ln?void 0:ln.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===We?void 0:We.browsertab)||void 0===St?void 0:St.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pe("function"==typeof(null===(mn=null===(At=null==ln?void 0:ln.cordova)||void 0===At?void 0:At.InAppBrowser)||void 0===mn?void 0:mn.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Ae=yield Z._initialize(d);yield Ae.initialized(),Ae.resetRedirect(),function Hu(){Ys.clear()}(),yield Z._originValidation(d);const We=function zo(m,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:Au(),postBody:null,tenantId:m.tenantId,error:Re(m,"no-auth-event")}}(d,I,F);yield function Ba(m,d){return hi()._set(tr(m),d)}(d,We);const St=yield function Ut(m,d,p){return en.apply(this,arguments)}(d,We,p),At=yield function an(m){const{cordova:d}=Be();return new Promise(p=>{d.plugins.browsertab.isAvailable(I=>{let F=null;I?d.plugins.browsertab.openUrl(m):F=d.InAppBrowser.open(m,function Xi(m=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),p(F)})})}(St);return function nr(m,d,p){return er.apply(this,arguments)}(d,Ae,At)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function $t(m){return dt.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:I,handleOpenURL:F,BuildInfo:Z}=Be(),Ae=setTimeout((0,b.Z)(function*(){yield wa(d),p.onEvent(qn())}),500),We=function(){var mn=(0,b.Z)(function*(ln){clearTimeout(Ae);const gr=yield wa(d);let sa=null;gr&&(null==ln?void 0:ln.url)&&(sa=function Su(m,d){var p,I;const F=function rn(m){const d=tn(m),p=d.link?decodeURIComponent(d.link):void 0,I=tn(p).link,F=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return tn(F).link||F||I||p||m}(d);if(F.includes("/__/auth/callback")){const Z=tn(F),Ae=Z.firebaseError?function Wt(m){try{return JSON.parse(m)}catch(d){return null}}(decodeURIComponent(Z.firebaseError)):null,We=null===(I=null===(p=null==Ae?void 0:Ae.code)||void 0===p?void 0:p.split("auth/"))||void 0===I?void 0:I[1],St=We?Re(We):null;return St?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:St,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:F,postBody:null}}return null}(gr,ln.url)),p.onEvent(sa||qn())});return function(gr){return mn.apply(this,arguments)}}();void 0!==I&&"function"==typeof I.subscribe&&I.subscribe(null,We);const St=F,At=`${Z.packageName.toLowerCase()}://`;Be().handleOpenURL=function(){var mn=(0,b.Z)(function*(ln){if(ln.toLowerCase().startsWith(At)&&We({url:ln}),"function"==typeof St)try{St(ln)}catch(gr){console.error(gr)}});return function(ln){return mn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Kr,this._completeRedirectFn=ti}_initialize(d){var p=this;return(0,b.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,I,F){var Z=this;return(0,b.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(d,p,I,F)})()}_openRedirect(d,p,I,F){var Z=this;return(0,b.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(d,p,I,F)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Ll()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Uf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,b.Z)(function*(){if(d.underlyingResolver)return;const p=yield function Js(){return Yu.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function Wc(m){return m.unwrap()}function yl(m){return Kc(m)}function Kc(m){const{_tokenResponse:d}=m instanceof q.ZR?m.customData:m;if(!d)return null;if(!(m instanceof q.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Li.credentialFromResult(m);const p=d.providerId;if(!p||"password"===p)return null;let I;switch(p){case"google.com":I=da;break;case"facebook.com":I=yo;break;case"github.com":I=Jo;break;case"twitter.com":I=vo;break;default:const{oauthIdToken:F,oauthAccessToken:Z,oauthTokenSecret:Ae,pendingToken:We,nonce:St}=d;return Z||Ae||F||We?We?p.startsWith("saml.")?ro._create(p,We):we._fromParams({providerId:p,signInMethod:p,pendingToken:We,idToken:F,accessToken:Z}):new Us(p).credential({idToken:F,accessToken:Z,rawNonce:St}):null}return m instanceof q.ZR?I.credentialFromError(m):I.credentialFromResult(m)}function Rs(m,d){return d.catch(p=>{throw p instanceof q.ZR&&function hu(m,d){var p;const I=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new vh(m,function lo(m,d){var p;const I=(0,q.m9)(m),F=d;return Pe(d.customData.operationType,I,"argument-error"),Pe(null===(p=F.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,I,"argument-error"),Wi._fromError(I,F)}(m,d));else if(I){const F=Kc(d),Z=d;F&&(Z.credential=F,Z.tenantId=I.tenantId||void 0,Z.email=I.email||void 0,Z.phoneNumber=I.phoneNumber||void 0)}}(m,p),p}).then(p=>{const F=p.user;return{operationType:p.operationType,credential:yl(p),additionalUserInfo:li(p),user:fu.getOrCreate(F)}})}function vl(m,d){return qc.apply(this,arguments)}function qc(){return(qc=(0,b.Z)(function*(m,d){const p=yield d;return{verificationId:p.verificationId,confirm:I=>Rs(m,p.confirm(I))}})).apply(this,arguments)}class vh{constructor(d,p){this.resolver=p,this.auth=function yh(m){return m.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Rs(Wc(this.auth),this.resolver.resolveSignIn(d))}}class fu{constructor(d){this._delegate=d,this.multiFactor=function Io(m){const d=(0,q.m9)(m);return wo.has(d)||wo.set(d,Ki._fromUser(d)),wo.get(d)}(d)}static getOrCreate(d){return fu.USER_MAP.has(d)||fu.USER_MAP.set(d,new fu(d)),fu.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,b.Z)(function*(){return Rs(p.auth,Vn(p._delegate,d))})()}linkWithPhoneNumber(d,p){var I=this;return(0,b.Z)(function*(){return vl(I.auth,function hl(m,d,p){return jr.apply(this,arguments)}(I._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,b.Z)(function*(){return Rs(p.auth,function pl(m,d,p){return _a.apply(this,arguments)}(p._delegate,d,Zr))})()}linkWithRedirect(d){var p=this;return(0,b.Z)(function*(){return yield zc(ht(p.auth)),function Ft(m,d,p){return function on(m,d,p){return Gn.apply(this,arguments)}(m,d,p)}(p._delegate,d,Zr)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,b.Z)(function*(){return Rs(p.auth,Nn(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return vl(this.auth,function Lc(m,d,p){return Bo.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return Rs(this.auth,function go(m,d,p){return Zs.apply(this,arguments)}(this._delegate,d,Zr))}reauthenticateWithRedirect(d){var p=this;return(0,b.Z)(function*(){return yield zc(ht(p.auth)),function Fe(m,d,p){return function pt(m,d,p){return bt.apply(this,arguments)}(m,d,p)}(p._delegate,d,Zr)})()}sendEmailVerification(d){return function Gi(m,d){return pa.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,b.Z)(function*(){return yield function Es(m,d){return Po.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function Uu(m,d){return Aa((0,q.m9)(m),d,null)}(this._delegate,d)}updatePassword(d){return function Qa(m,d){return Aa((0,q.m9)(m),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function ju(m,d){return fo.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function xr(m,d){return ga.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function Ca(m,d,p){return No.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}fu.USER_MAP=new WeakMap;const dc=Pe;let xd=(()=>{class m{constructor(p,I){if(this.app=p,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:F}=p.options;dc(F,"invalid-api-key",{appName:p.name}),dc(F,"invalid-api-key",{appName:p.name});const Z="undefined"!=typeof window?Zr:void 0;this._delegate=I.initialize({options:{persistence:Rd(F,p.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(Qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?fu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,I){!function Zn(m,d,p){const I=ht(m);Pe(I._canInitEmulator,I,"emulator-config-failed"),Pe(/^https?:\/\//.test(d),I,"invalid-emulator-scheme");const F=!!(null==p?void 0:p.disableWarnings),Z=On(d),{host:Ae,port:We}=function ur(m){const d=On(m),p=/(\/\/)?([^?#/]+)/.exec(m.substr(d.length));if(!p)return{host:"",port:null};const I=p[2].split("@").pop()||"",F=/^(\[[^\]]+\])(:|$)/.exec(I);if(F){const Z=F[1];return{host:Z,port:vr(I.substr(Z.length+1))}}{const[Z,Ae]=I.split(":");return{host:Z,port:vr(Ae)}}}(d);I.config.emulator={url:`${Z}//${Ae}${null===We?"":`:${We}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Ae,port:We,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:F})}),F||function Mi(){function m(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,p,I)}applyActionCode(p){return function Da(m,d){return rt.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Ln(this._delegate,p)}confirmPasswordReset(p,I){return function ea(m,d,p){return qa.apply(this,arguments)}(this._delegate,p,I)}createUserWithEmailAndPassword(p,I){var F=this;return(0,b.Z)(function*(){return Rs(F._delegate,function Vs(m,d,p){return Is.apply(this,arguments)}(F._delegate,p,I))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function ta(m,d){return Ds.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Eu(m,d){const p=ts.parseLink(d);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,b.Z)(function*(){dc(Zu(),p._delegate,"operation-not-supported-in-this-environment");const I=yield function Tn(m,d){return Rr.apply(this,arguments)}(p._delegate,Zr);return I?Rs(p._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function $a(m,d){ht(m)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,I,F){const{next:Z,error:Ae,complete:We}=Vl(p,I,F);return this._delegate.onAuthStateChanged(Z,Ae,We)}onIdTokenChanged(p,I,F){const{next:Z,error:Ae,complete:We}=Vl(p,I,F);return this._delegate.onIdTokenChanged(Z,Ae,We)}sendSignInLinkToEmail(p,I){return function Eo(m,d,p){return _u.apply(this,arguments)}(this._delegate,p,I)}sendPasswordResetEmail(p,I){return function ws(m,d,p){return Hi.apply(this,arguments)}(this._delegate,p,I||void 0)}setPersistence(p){var I=this;return(0,b.Z)(function*(){let F;switch(function Ff(m,d){Fl(Object.values(ia).includes(d),m,"invalid-persistence-type"),(0,q.b$)()?Fl(d!==ia.SESSION,m,"unsupported-persistence-type"):(0,q.UG)()?Fl(d===ia.NONE,m,"unsupported-persistence-type"):xu()?Fl(d===ia.NONE||d===ia.LOCAL&&(0,q.hl)(),m,"unsupported-persistence-type"):Fl(d===ia.NONE||ls(),m,"unsupported-persistence-type")}(I._delegate,p),p){case ia.SESSION:F=Kr;break;case ia.LOCAL:F=(yield le(Me)._isAvailable())?Me:ei;break;case ia.NONE:F=ve;break;default:return et("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(F)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Rs(this._delegate,function _o(m){return ns.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Rs(this._delegate,It(this._delegate,p))}signInWithCustomToken(p){return Rs(this._delegate,function ui(m,d){return wi.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,I){return Rs(this._delegate,function Ta(m,d,p){return It((0,q.m9)(m),ca.credential(d,p))}(this._delegate,p,I))}signInWithEmailLink(p,I){return Rs(this._delegate,function fa(m,d,p){return Oo.apply(this,arguments)}(this._delegate,p,I))}signInWithPhoneNumber(p,I){return vl(this._delegate,function bi(m,d,p){return pr.apply(this,arguments)}(this._delegate,p,I))}signInWithPopup(p){var I=this;return(0,b.Z)(function*(){return dc(Zu(),I._delegate,"operation-not-supported-in-this-environment"),Rs(I._delegate,function po(m,d,p){return To.apply(this,arguments)}(I._delegate,p,Zr))})()}signInWithRedirect(p){var I=this;return(0,b.Z)(function*(){return dc(Zu(),I._delegate,"operation-not-supported-in-this-environment"),yield zc(I._delegate),function G(m,d,p){return function ie(m,d,p){return Te.apply(this,arguments)}(m,d,p)}(I._delegate,p,Zr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Tr(m,d){return Ya.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=ia,m})();function Vl(m,d,p){let I=m;"function"!=typeof m&&({next:I,error:d,complete:p}=m);const F=I;return{next:Ae=>F(Ae&&fu.getOrCreate(Ae)),error:d,complete:p}}function Rd(m,d){const p=function Ul(m,d){const p=Md();if(!p)return[];const I=ze(Gc,m,d);switch(p.getItem(I)){case ia.NONE:return[ve];case ia.LOCAL:return[Me,Kr];case ia.SESSION:return[Kr];default:return[]}}(m,d);if("undefined"!=typeof self&&!p.includes(Me)&&p.push(Me),"undefined"!=typeof window)for(const I of[ei,Kr])p.includes(I)||p.push(I);return p.includes(ve)||p.push(ve),p}class Pd{constructor(){this.providerId="phone",this._delegate=new Li(Wc(L.Z.auth()))}static credential(d,p){return Li.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}Pd.PHONE_SIGN_IN_METHOD=Li.PHONE_SIGN_IN_METHOD,Pd.PROVIDER_ID=Li.PROVIDER_ID;const _h=Pe;class Eh{constructor(d,p,I=L.Z.app()){var F;_h(null===(F=I.options)||void 0===F?void 0:F.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new Bu(d,p,I.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Vf(m){m.INTERNAL.registerComponent(new Ie.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),I=d.getProvider("auth");return new xd(p,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ca,FacebookAuthProvider:yo,GithubAuthProvider:Jo,GoogleAuthProvider:da,OAuthProvider:Us,SAMLAuthProvider:Ei,PhoneAuthProvider:Pd,PhoneMultiFactorGenerator:h,RecaptchaVerifier:Eh,TwitterAuthProvider:vo,Auth:xd,AuthCredential:Yn,Error:q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.11")}(L.Z)},9751:(Mt,Ue,B)=>{B.d(Ue,{y:()=>Ce});var b=B(2961),L=B(727),q=B(8822),Ee=B(9635),he=B(2416),De=B(576),Ie=B(2806);let Ce=(()=>{class pe{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const Qe=new pe;return Qe.source=this,Qe.operator=qe,Qe}subscribe(qe,Qe,vt){const Ge=function oe(pe){return pe&&pe instanceof b.Lv||function ae(pe){return pe&&(0,De.m)(pe.next)&&(0,De.m)(pe.error)&&(0,De.m)(pe.complete)}(pe)&&(0,L.Nn)(pe)}(qe)?qe:new b.Hp(qe,Qe,vt);return(0,Ie.x)(()=>{const{operator:Ke,source:_t}=this;Ge.add(Ke?Ke.call(Ge,_t):_t?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(qe){try{return this._subscribe(qe)}catch(Qe){qe.error(Qe)}}forEach(qe,Qe){return new(Qe=Se(Qe))((vt,Ge)=>{const Ke=new b.Hp({next:_t=>{try{qe(_t)}catch(xt){Ge(xt),Ke.unsubscribe()}},error:Ge,complete:vt});this.subscribe(Ke)})}_subscribe(qe){var Qe;return null===(Qe=this.source)||void 0===Qe?void 0:Qe.subscribe(qe)}[q.L](){return this}pipe(...qe){return(0,Ee.U)(qe)(this)}toPromise(qe){return new(qe=Se(qe))((Qe,vt)=>{let Ge;this.subscribe(Ke=>Ge=Ke,Ke=>vt(Ke),()=>Qe(Ge))})}}return pe.create=at=>new pe(at),pe})();function Se(pe){var at;return null!==(at=null!=pe?pe:he.v.Promise)&&void 0!==at?at:Promise}},7579:(Mt,Ue,B)=>{B.d(Ue,{x:()=>Ie});var b=B(9751),L=B(727);const Ee=(0,B(3888).d)(Se=>function(){Se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=B(8737),De=B(2806);let Ie=(()=>{class Se extends b.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(oe){const pe=new Ce(this,this);return pe.operator=oe,pe}_throwIfClosed(){if(this.closed)throw new Ee}next(oe){(0,De.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const pe of this.currentObservers)pe.next(oe)}})}error(oe){(0,De.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=oe;const{observers:pe}=this;for(;pe.length;)pe.shift().error(oe)}})}complete(){(0,De.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:oe}=this;for(;oe.length;)oe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var oe;return(null===(oe=this.observers)||void 0===oe?void 0:oe.length)>0}_trySubscribe(oe){return this._throwIfClosed(),super._trySubscribe(oe)}_subscribe(oe){return this._throwIfClosed(),this._checkFinalizedStatuses(oe),this._innerSubscribe(oe)}_innerSubscribe(oe){const{hasError:pe,isStopped:at,observers:qe}=this;return pe||at?L.Lc:(this.currentObservers=null,qe.push(oe),new L.w0(()=>{this.currentObservers=null,(0,he.P)(qe,oe)}))}_checkFinalizedStatuses(oe){const{hasError:pe,thrownError:at,isStopped:qe}=this;pe?oe.error(at):qe&&oe.complete()}asObservable(){const oe=new b.y;return oe.source=this,oe}}return Se.create=(ae,oe)=>new Ce(ae,oe),Se})();class Ce extends Ie{constructor(ae,oe){super(),this.destination=ae,this.source=oe}next(ae){var oe,pe;null===(pe=null===(oe=this.destination)||void 0===oe?void 0:oe.next)||void 0===pe||pe.call(oe,ae)}error(ae){var oe,pe;null===(pe=null===(oe=this.destination)||void 0===oe?void 0:oe.error)||void 0===pe||pe.call(oe,ae)}complete(){var ae,oe;null===(oe=null===(ae=this.destination)||void 0===ae?void 0:ae.complete)||void 0===oe||oe.call(ae)}_subscribe(ae){var oe,pe;return null!==(pe=null===(oe=this.source)||void 0===oe?void 0:oe.subscribe(ae))&&void 0!==pe?pe:L.Lc}}},2961:(Mt,Ue,B)=>{B.d(Ue,{Hp:()=>vt,Lv:()=>pe});var b=B(576),L=B(727),q=B(2416),Ee=B(7849);function he(){}const De=Se("C",void 0,void 0);function Se(et,Re,ue){return{kind:et,value:Re,error:ue}}var ae=B(3410),oe=B(2806);class pe extends L.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,L.Nn)(Re)&&Re.add(this)):this.destination=xt}static create(Re,ue,gt){return new vt(Re,ue,gt)}next(Re){this.isStopped?_t(function Ce(et){return Se("N",et,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?_t(function Ie(et){return Se("E",void 0,et)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?_t(De,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function qe(et,Re){return at.call(et,Re)}class Qe{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:ue}=this;if(ue.next)try{ue.next(Re)}catch(gt){Ge(gt)}}error(Re){const{partialObserver:ue}=this;if(ue.error)try{ue.error(Re)}catch(gt){Ge(gt)}else Ge(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(ue){Ge(ue)}}}class vt extends pe{constructor(Re,ue,gt){let mt;if(super(),(0,b.m)(Re)||!Re)mt={next:null!=Re?Re:void 0,error:null!=ue?ue:void 0,complete:null!=gt?gt:void 0};else{let Pe;this&&q.v.useDeprecatedNextContext?(Pe=Object.create(Re),Pe.unsubscribe=()=>this.unsubscribe(),mt={next:Re.next&&qe(Re.next,Pe),error:Re.error&&qe(Re.error,Pe),complete:Re.complete&&qe(Re.complete,Pe)}):mt=Re}this.destination=new Qe(mt)}}function Ge(et){q.v.useDeprecatedSynchronousErrorHandling?(0,oe.O)(et):(0,Ee.h)(et)}function _t(et,Re){const{onStoppedNotification:ue}=q.v;ue&&ae.z.setTimeout(()=>ue(et,Re))}const xt={closed:!0,next:he,error:function Ke(et){throw et},complete:he}},727:(Mt,Ue,B)=>{B.d(Ue,{Lc:()=>De,w0:()=>he,Nn:()=>Ie});var b=B(576);const q=(0,B(3888).d)(Se=>function(oe){Se(this),this.message=oe?`${oe.length} errors occurred during unsubscription:\n${oe.map((pe,at)=>`${at+1}) ${pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=oe});var Ee=B(8737);class he{constructor(ae){this.initialTeardown=ae,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ae;if(!this.closed){this.closed=!0;const{_parentage:oe}=this;if(oe)if(this._parentage=null,Array.isArray(oe))for(const qe of oe)qe.remove(this);else oe.remove(this);const{initialTeardown:pe}=this;if((0,b.m)(pe))try{pe()}catch(qe){ae=qe instanceof q?qe.errors:[qe]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const qe of at)try{Ce(qe)}catch(Qe){ae=null!=ae?ae:[],Qe instanceof q?ae=[...ae,...Qe.errors]:ae.push(Qe)}}if(ae)throw new q(ae)}}add(ae){var oe;if(ae&&ae!==this)if(this.closed)Ce(ae);else{if(ae instanceof he){if(ae.closed||ae._hasParent(this))return;ae._addParent(this)}(this._finalizers=null!==(oe=this._finalizers)&&void 0!==oe?oe:[]).push(ae)}}_hasParent(ae){const{_parentage:oe}=this;return oe===ae||Array.isArray(oe)&&oe.includes(ae)}_addParent(ae){const{_parentage:oe}=this;this._parentage=Array.isArray(oe)?(oe.push(ae),oe):oe?[oe,ae]:ae}_removeParent(ae){const{_parentage:oe}=this;oe===ae?this._parentage=null:Array.isArray(oe)&&(0,Ee.P)(oe,ae)}remove(ae){const{_finalizers:oe}=this;oe&&(0,Ee.P)(oe,ae),ae instanceof he&&ae._removeParent(this)}}he.EMPTY=(()=>{const Se=new he;return Se.closed=!0,Se})();const De=he.EMPTY;function Ie(Se){return Se instanceof he||Se&&"closed"in Se&&(0,b.m)(Se.remove)&&(0,b.m)(Se.add)&&(0,b.m)(Se.unsubscribe)}function Ce(Se){(0,b.m)(Se)?Se():Se.unsubscribe()}},2416:(Mt,Ue,B)=>{B.d(Ue,{v:()=>b});const b={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Mt,Ue,B)=>{B.d(Ue,{z:()=>he});var b=B(8189),q=B(7669),Ee=B(8996);function he(...De){return function L(){return(0,b.J)(1)}()((0,Ee.D)(De,(0,q.yG)(De)))}},9770:(Mt,Ue,B)=>{B.d(Ue,{P:()=>q});var b=B(9751),L=B(8421);function q(Ee){return new b.y(he=>{(0,L.Xf)(Ee()).subscribe(he)})}},515:(Mt,Ue,B)=>{B.d(Ue,{E:()=>L});const L=new(B(9751).y)(he=>he.complete())},4128:(Mt,Ue,B)=>{B.d(Ue,{D:()=>Ce});var b=B(9751),L=B(4742),q=B(8421),Ee=B(7669),he=B(5403),De=B(3268),Ie=B(1810);function Ce(...Se){const ae=(0,Ee.jO)(Se),{args:oe,keys:pe}=(0,L.D)(Se),at=new b.y(qe=>{const{length:Qe}=oe;if(!Qe)return void qe.complete();const vt=new Array(Qe);let Ge=Qe,Ke=Qe;for(let _t=0;_t<Qe;_t++){let xt=!1;(0,q.Xf)(oe[_t]).subscribe((0,he.x)(qe,et=>{xt||(xt=!0,Ke--),vt[_t]=et},()=>Ge--,void 0,()=>{(!Ge||!xt)&&(Ke||qe.next(pe?(0,Ie.n)(pe,vt):vt),qe.complete())}))}});return ae?at.pipe((0,De.Z)(ae)):at}},8996:(Mt,Ue,B)=>{B.d(Ue,{D:()=>Re});var b=B(8421),L=B(5363),q=B(9468),De=B(9751),Ce=B(2202),Se=B(576),ae=B(9672);function pe(ue,gt){if(!ue)throw new Error("Iterable cannot be null");return new De.y(mt=>{(0,ae.f)(mt,gt,()=>{const Pe=ue[Symbol.asyncIterator]();(0,ae.f)(mt,gt,()=>{Pe.next().then(fe=>{fe.done?mt.complete():mt.next(fe.value)})},0,!0)})})}var at=B(3670),qe=B(8239),Qe=B(1144),vt=B(6495),Ge=B(2206),Ke=B(4532),_t=B(3260);function Re(ue,gt){return gt?function et(ue,gt){if(null!=ue){if((0,at.c)(ue))return function Ee(ue,gt){return(0,b.Xf)(ue).pipe((0,q.R)(gt),(0,L.Q)(gt))}(ue,gt);if((0,Qe.z)(ue))return function Ie(ue,gt){return new De.y(mt=>{let Pe=0;return gt.schedule(function(){Pe===ue.length?mt.complete():(mt.next(ue[Pe++]),mt.closed||this.schedule())})})}(ue,gt);if((0,qe.t)(ue))return function he(ue,gt){return(0,b.Xf)(ue).pipe((0,q.R)(gt),(0,L.Q)(gt))}(ue,gt);if((0,Ge.D)(ue))return pe(ue,gt);if((0,vt.T)(ue))return function oe(ue,gt){return new De.y(mt=>{let Pe;return(0,ae.f)(mt,gt,()=>{Pe=ue[Ce.h](),(0,ae.f)(mt,gt,()=>{let fe,ke;try{({value:fe,done:ke}=Pe.next())}catch(Oe){return void mt.error(Oe)}ke?mt.complete():mt.next(fe)},0,!0)}),()=>(0,Se.m)(null==Pe?void 0:Pe.return)&&Pe.return()})}(ue,gt);if((0,_t.L)(ue))return function xt(ue,gt){return pe((0,_t.Q)(ue),gt)}(ue,gt)}throw(0,Ke.z)(ue)}(ue,gt):(0,b.Xf)(ue)}},8421:(Mt,Ue,B)=>{B.d(Ue,{Xf:()=>at});var b=B(655),L=B(1144),q=B(8239),Ee=B(9751),he=B(3670),De=B(2206),Ie=B(4532),Ce=B(6495),Se=B(3260),ae=B(576),oe=B(7849),pe=B(8822);function at(et){if(et instanceof Ee.y)return et;if(null!=et){if((0,he.c)(et))return function qe(et){return new Ee.y(Re=>{const ue=et[pe.L]();if((0,ae.m)(ue.subscribe))return ue.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(et);if((0,L.z)(et))return function Qe(et){return new Ee.y(Re=>{for(let ue=0;ue<et.length&&!Re.closed;ue++)Re.next(et[ue]);Re.complete()})}(et);if((0,q.t)(et))return function vt(et){return new Ee.y(Re=>{et.then(ue=>{Re.closed||(Re.next(ue),Re.complete())},ue=>Re.error(ue)).then(null,oe.h)})}(et);if((0,De.D)(et))return Ke(et);if((0,Ce.T)(et))return function Ge(et){return new Ee.y(Re=>{for(const ue of et)if(Re.next(ue),Re.closed)return;Re.complete()})}(et);if((0,Se.L)(et))return function _t(et){return Ke((0,Se.Q)(et))}(et)}throw(0,Ie.z)(et)}function Ke(et){return new Ee.y(Re=>{(function xt(et,Re){var ue,gt,mt,Pe;return(0,b.mG)(this,void 0,void 0,function*(){try{for(ue=(0,b.KL)(et);!(gt=yield ue.next()).done;)if(Re.next(gt.value),Re.closed)return}catch(fe){mt={error:fe}}finally{try{gt&&!gt.done&&(Pe=ue.return)&&(yield Pe.call(ue))}finally{if(mt)throw mt.error}}Re.complete()})})(et,Re).catch(ue=>Re.error(ue))})}},6451:(Mt,Ue,B)=>{B.d(Ue,{T:()=>De});var b=B(8189),L=B(8421),q=B(515),Ee=B(7669),he=B(8996);function De(...Ie){const Ce=(0,Ee.yG)(Ie),Se=(0,Ee._6)(Ie,1/0),ae=Ie;return ae.length?1===ae.length?(0,L.Xf)(ae[0]):(0,b.J)(Se)((0,he.D)(ae,Ce)):q.E}},9646:(Mt,Ue,B)=>{B.d(Ue,{of:()=>q});var b=B(7669),L=B(8996);function q(...Ee){const he=(0,b.yG)(Ee);return(0,L.D)(Ee,he)}},5403:(Mt,Ue,B)=>{B.d(Ue,{x:()=>L});var b=B(2961);function L(Ee,he,De,Ie,Ce){return new q(Ee,he,De,Ie,Ce)}class q extends b.Lv{constructor(he,De,Ie,Ce,Se,ae){super(he),this.onFinalize=Se,this.shouldUnsubscribe=ae,this._next=De?function(oe){try{De(oe)}catch(pe){he.error(pe)}}:super._next,this._error=Ce?function(oe){try{Ce(oe)}catch(pe){he.error(pe)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(oe){he.error(oe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:De}=this;super.unsubscribe(),!De&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4351:(Mt,Ue,B)=>{B.d(Ue,{b:()=>q});var b=B(5577),L=B(576);function q(Ee,he){return(0,L.m)(he)?(0,b.z)(Ee,he,1):(0,b.z)(Ee,1)}},6590:(Mt,Ue,B)=>{B.d(Ue,{d:()=>q});var b=B(4482),L=B(5403);function q(Ee){return(0,b.e)((he,De)=>{let Ie=!1;he.subscribe((0,L.x)(De,Ce=>{Ie=!0,De.next(Ce)},()=>{Ie||De.next(Ee),De.complete()}))})}},9300:(Mt,Ue,B)=>{B.d(Ue,{h:()=>q});var b=B(4482),L=B(5403);function q(Ee,he){return(0,b.e)((De,Ie)=>{let Ce=0;De.subscribe((0,L.x)(Ie,Se=>Ee.call(he,Se,Ce++)&&Ie.next(Se)))})}},590:(Mt,Ue,B)=>{B.d(Ue,{P:()=>Ie});var b=B(6805),L=B(9300),q=B(5698),Ee=B(6590),he=B(8068),De=B(4671);function Ie(Ce,Se){const ae=arguments.length>=2;return oe=>oe.pipe(Ce?(0,L.h)((pe,at)=>Ce(pe,at,oe)):De.y,(0,q.q)(1),ae?(0,Ee.d)(Se):(0,he.T)(()=>new b.K))}},4004:(Mt,Ue,B)=>{B.d(Ue,{U:()=>q});var b=B(4482),L=B(5403);function q(Ee,he){return(0,b.e)((De,Ie)=>{let Ce=0;De.subscribe((0,L.x)(Ie,Se=>{Ie.next(Ee.call(he,Se,Ce++))}))})}},8189:(Mt,Ue,B)=>{B.d(Ue,{J:()=>q});var b=B(5577),L=B(4671);function q(Ee=1/0){return(0,b.z)(L.y,Ee)}},5577:(Mt,Ue,B)=>{B.d(Ue,{z:()=>Ce});var b=B(4004),L=B(8421),q=B(4482),Ee=B(9672),he=B(5403),Ie=B(576);function Ce(Se,ae,oe=1/0){return(0,Ie.m)(ae)?Ce((pe,at)=>(0,b.U)((qe,Qe)=>ae(pe,qe,at,Qe))((0,L.Xf)(Se(pe,at))),oe):("number"==typeof ae&&(oe=ae),(0,q.e)((pe,at)=>function De(Se,ae,oe,pe,at,qe,Qe,vt){const Ge=[];let Ke=0,_t=0,xt=!1;const et=()=>{xt&&!Ge.length&&!Ke&&ae.complete()},Re=gt=>Ke<pe?ue(gt):Ge.push(gt),ue=gt=>{qe&&ae.next(gt),Ke++;let mt=!1;(0,L.Xf)(oe(gt,_t++)).subscribe((0,he.x)(ae,Pe=>{null==at||at(Pe),qe?Re(Pe):ae.next(Pe)},()=>{mt=!0},void 0,()=>{if(mt)try{for(Ke--;Ge.length&&Ke<pe;){const Pe=Ge.shift();Qe?(0,Ee.f)(ae,Qe,()=>ue(Pe)):ue(Pe)}et()}catch(Pe){ae.error(Pe)}}))};return Se.subscribe((0,he.x)(ae,Re,()=>{xt=!0,et()})),()=>{null==vt||vt()}}(pe,at,Se,oe)))}},5363:(Mt,Ue,B)=>{B.d(Ue,{Q:()=>Ee});var b=B(9672),L=B(4482),q=B(5403);function Ee(he,De=0){return(0,L.e)((Ie,Ce)=>{Ie.subscribe((0,q.x)(Ce,Se=>(0,b.f)(Ce,he,()=>Ce.next(Se),De),()=>(0,b.f)(Ce,he,()=>Ce.complete(),De),Se=>(0,b.f)(Ce,he,()=>Ce.error(Se),De)))})}},5026:(Mt,Ue,B)=>{B.d(Ue,{R:()=>Ee});var b=B(4482),L=B(5403);function q(he,De,Ie,Ce,Se){return(ae,oe)=>{let pe=Ie,at=De,qe=0;ae.subscribe((0,L.x)(oe,Qe=>{const vt=qe++;at=pe?he(at,Qe,vt):(pe=!0,Qe),Ce&&oe.next(at)},Se&&(()=>{pe&&oe.next(at),oe.complete()})))}}function Ee(he,De){return(0,b.e)(q(he,De,arguments.length>=2,!0))}},3099:(Mt,Ue,B)=>{B.d(Ue,{B:()=>De});var b=B(8996),L=B(5698),q=B(7579),Ee=B(2961),he=B(4482);function De(Ce={}){const{connector:Se=(()=>new q.x),resetOnError:ae=!0,resetOnComplete:oe=!0,resetOnRefCountZero:pe=!0}=Ce;return at=>{let qe=null,Qe=null,vt=null,Ge=0,Ke=!1,_t=!1;const xt=()=>{null==Qe||Qe.unsubscribe(),Qe=null},et=()=>{xt(),qe=vt=null,Ke=_t=!1},Re=()=>{const ue=qe;et(),null==ue||ue.unsubscribe()};return(0,he.e)((ue,gt)=>{Ge++,!_t&&!Ke&&xt();const mt=vt=null!=vt?vt:Se();gt.add(()=>{Ge--,0===Ge&&!_t&&!Ke&&(Qe=Ie(Re,pe))}),mt.subscribe(gt),qe||(qe=new Ee.Hp({next:Pe=>mt.next(Pe),error:Pe=>{_t=!0,xt(),Qe=Ie(et,ae,Pe),mt.error(Pe)},complete:()=>{Ke=!0,xt(),Qe=Ie(et,oe),mt.complete()}}),(0,b.D)(ue).subscribe(qe))})(at)}}function Ie(Ce,Se,...ae){return!0===Se?(Ce(),null):!1===Se?null:Se(...ae).pipe((0,L.q)(1)).subscribe(()=>Ce())}},3151:(Mt,Ue,B)=>{B.d(Ue,{d:()=>he});var b=B(7579),L=B(6063);class q extends b.x{constructor(Ie=1/0,Ce=1/0,Se=L.l){super(),this._bufferSize=Ie,this._windowTime=Ce,this._timestampProvider=Se,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ce===1/0,this._bufferSize=Math.max(1,Ie),this._windowTime=Math.max(1,Ce)}next(Ie){const{isStopped:Ce,_buffer:Se,_infiniteTimeWindow:ae,_timestampProvider:oe,_windowTime:pe}=this;Ce||(Se.push(Ie),!ae&&Se.push(oe.now()+pe)),this._trimBuffer(),super.next(Ie)}_subscribe(Ie){this._throwIfClosed(),this._trimBuffer();const Ce=this._innerSubscribe(Ie),{_infiniteTimeWindow:Se,_buffer:ae}=this,oe=ae.slice();for(let pe=0;pe<oe.length&&!Ie.closed;pe+=Se?1:2)Ie.next(oe[pe]);return this._checkFinalizedStatuses(Ie),Ce}_trimBuffer(){const{_bufferSize:Ie,_timestampProvider:Ce,_buffer:Se,_infiniteTimeWindow:ae}=this,oe=(ae?1:2)*Ie;if(Ie<1/0&&oe<Se.length&&Se.splice(0,Se.length-oe),!ae){const pe=Ce.now();let at=0;for(let qe=1;qe<Se.length&&Se[qe]<=pe;qe+=2)at=qe;at&&Se.splice(0,at+1)}}}var Ee=B(3099);function he(De,Ie,Ce){let Se,ae=!1;return De&&"object"==typeof De?({bufferSize:Se=1/0,windowTime:Ie=1/0,refCount:ae=!1,scheduler:Ce}=De):Se=null!=De?De:1/0,(0,Ee.B)({connector:()=>new q(Se,Ie,Ce),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ae})}},8675:(Mt,Ue,B)=>{B.d(Ue,{O:()=>Ee});var b=B(7272),L=B(7669),q=B(4482);function Ee(...he){const De=(0,L.yG)(he);return(0,q.e)((Ie,Ce)=>{(De?(0,b.z)(he,Ie,De):(0,b.z)(he,Ie)).subscribe(Ce)})}},9468:(Mt,Ue,B)=>{B.d(Ue,{R:()=>L});var b=B(4482);function L(q,Ee=0){return(0,b.e)((he,De)=>{De.add(q.schedule(()=>he.subscribe(De),Ee))})}},3900:(Mt,Ue,B)=>{B.d(Ue,{w:()=>Ee});var b=B(8421),L=B(4482),q=B(5403);function Ee(he,De){return(0,L.e)((Ie,Ce)=>{let Se=null,ae=0,oe=!1;const pe=()=>oe&&!Se&&Ce.complete();Ie.subscribe((0,q.x)(Ce,at=>{null==Se||Se.unsubscribe();let qe=0;const Qe=ae++;(0,b.Xf)(he(at,Qe)).subscribe(Se=(0,q.x)(Ce,vt=>Ce.next(De?De(at,vt,Qe,qe++):vt),()=>{Se=null,pe()}))},()=>{oe=!0,pe()}))})}},5698:(Mt,Ue,B)=>{B.d(Ue,{q:()=>Ee});var b=B(515),L=B(4482),q=B(5403);function Ee(he){return he<=0?()=>b.E:(0,L.e)((De,Ie)=>{let Ce=0;De.subscribe((0,q.x)(Ie,Se=>{++Ce<=he&&(Ie.next(Se),he<=Ce&&Ie.complete())}))})}},8505:(Mt,Ue,B)=>{B.d(Ue,{b:()=>he});var b=B(576),L=B(4482),q=B(5403),Ee=B(4671);function he(De,Ie,Ce){const Se=(0,b.m)(De)||Ie||Ce?{next:De,error:Ie,complete:Ce}:De;return Se?(0,L.e)((ae,oe)=>{var pe;null===(pe=Se.subscribe)||void 0===pe||pe.call(Se);let at=!0;ae.subscribe((0,q.x)(oe,qe=>{var Qe;null===(Qe=Se.next)||void 0===Qe||Qe.call(Se,qe),oe.next(qe)},()=>{var qe;at=!1,null===(qe=Se.complete)||void 0===qe||qe.call(Se),oe.complete()},qe=>{var Qe;at=!1,null===(Qe=Se.error)||void 0===Qe||Qe.call(Se,qe),oe.error(qe)},()=>{var qe,Qe;at&&(null===(qe=Se.unsubscribe)||void 0===qe||qe.call(Se)),null===(Qe=Se.finalize)||void 0===Qe||Qe.call(Se)}))}):Ee.y}},8068:(Mt,Ue,B)=>{B.d(Ue,{T:()=>Ee});var b=B(6805),L=B(4482),q=B(5403);function Ee(De=he){return(0,L.e)((Ie,Ce)=>{let Se=!1;Ie.subscribe((0,q.x)(Ce,ae=>{Se=!0,Ce.next(ae)},()=>Se?Ce.complete():Ce.error(De())))})}function he(){return new b.K}},4408:(Mt,Ue,B)=>{B.d(Ue,{o:()=>he});var b=B(727);class L extends b.w0{constructor(Ie,Ce){super()}schedule(Ie,Ce=0){return this}}const q={setInterval(De,Ie,...Ce){const{delegate:Se}=q;return(null==Se?void 0:Se.setInterval)?Se.setInterval(De,Ie,...Ce):setInterval(De,Ie,...Ce)},clearInterval(De){const{delegate:Ie}=q;return((null==Ie?void 0:Ie.clearInterval)||clearInterval)(De)},delegate:void 0};var Ee=B(8737);class he extends L{constructor(Ie,Ce){super(Ie,Ce),this.scheduler=Ie,this.work=Ce,this.pending=!1}schedule(Ie,Ce=0){if(this.closed)return this;this.state=Ie;const Se=this.id,ae=this.scheduler;return null!=Se&&(this.id=this.recycleAsyncId(ae,Se,Ce)),this.pending=!0,this.delay=Ce,this.id=this.id||this.requestAsyncId(ae,this.id,Ce),this}requestAsyncId(Ie,Ce,Se=0){return q.setInterval(Ie.flush.bind(Ie,this),Se)}recycleAsyncId(Ie,Ce,Se=0){if(null!=Se&&this.delay===Se&&!1===this.pending)return Ce;q.clearInterval(Ce)}execute(Ie,Ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Se=this._execute(Ie,Ce);if(Se)return Se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ie,Ce){let ae,Se=!1;try{this.work(Ie)}catch(oe){Se=!0,ae=oe||new Error("Scheduled action threw falsy error")}if(Se)return this.unsubscribe(),ae}unsubscribe(){if(!this.closed){const{id:Ie,scheduler:Ce}=this,{actions:Se}=Ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ee.P)(Se,this),null!=Ie&&(this.id=this.recycleAsyncId(Ce,Ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(Mt,Ue,B)=>{B.d(Ue,{v:()=>q});var b=B(6063);class L{constructor(he,De=L.now){this.schedulerActionCtor=he,this.now=De}schedule(he,De=0,Ie){return new this.schedulerActionCtor(this,he).schedule(Ie,De)}}L.now=b.l.now;class q extends L{constructor(he,De=L.now){super(he,De),this.actions=[],this._active=!1,this._scheduled=void 0}flush(he){const{actions:De}=this;if(this._active)return void De.push(he);let Ie;this._active=!0;do{if(Ie=he.execute(he.state,he.delay))break}while(he=De.shift());if(this._active=!1,Ie){for(;he=De.shift();)he.unsubscribe();throw Ie}}}},4986:(Mt,Ue,B)=>{B.d(Ue,{z:()=>q});var b=B(4408);const q=new(B(7565).v)(b.o)},6063:(Mt,Ue,B)=>{B.d(Ue,{l:()=>b});const b={now:()=>(b.delegate||Date).now(),delegate:void 0}},3410:(Mt,Ue,B)=>{B.d(Ue,{z:()=>b});const b={setTimeout(L,q,...Ee){const{delegate:he}=b;return(null==he?void 0:he.setTimeout)?he.setTimeout(L,q,...Ee):setTimeout(L,q,...Ee)},clearTimeout(L){const{delegate:q}=b;return((null==q?void 0:q.clearTimeout)||clearTimeout)(L)},delegate:void 0}},2202:(Mt,Ue,B)=>{B.d(Ue,{h:()=>L});const L=function b(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Mt,Ue,B)=>{B.d(Ue,{L:()=>b});const b="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Mt,Ue,B)=>{B.d(Ue,{K:()=>L});const L=(0,B(3888).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Mt,Ue,B)=>{B.d(Ue,{_6:()=>De,jO:()=>Ee,yG:()=>he});var b=B(576);function q(Ie){return Ie[Ie.length-1]}function Ee(Ie){return(0,b.m)(q(Ie))?Ie.pop():void 0}function he(Ie){return function L(Ie){return Ie&&(0,b.m)(Ie.schedule)}(q(Ie))?Ie.pop():void 0}function De(Ie,Ce){return"number"==typeof q(Ie)?Ie.pop():Ce}},4742:(Mt,Ue,B)=>{B.d(Ue,{D:()=>he});const{isArray:b}=Array,{getPrototypeOf:L,prototype:q,keys:Ee}=Object;function he(Ie){if(1===Ie.length){const Ce=Ie[0];if(b(Ce))return{args:Ce,keys:null};if(function De(Ie){return Ie&&"object"==typeof Ie&&L(Ie)===q}(Ce)){const Se=Ee(Ce);return{args:Se.map(ae=>Ce[ae]),keys:Se}}}return{args:Ie,keys:null}}},8737:(Mt,Ue,B)=>{function b(L,q){if(L){const Ee=L.indexOf(q);0<=Ee&&L.splice(Ee,1)}}B.d(Ue,{P:()=>b})},3888:(Mt,Ue,B)=>{function b(L){const Ee=L(he=>{Error.call(he),he.stack=(new Error).stack});return Ee.prototype=Object.create(Error.prototype),Ee.prototype.constructor=Ee,Ee}B.d(Ue,{d:()=>b})},1810:(Mt,Ue,B)=>{function b(L,q){return L.reduce((Ee,he,De)=>(Ee[he]=q[De],Ee),{})}B.d(Ue,{n:()=>b})},2806:(Mt,Ue,B)=>{B.d(Ue,{x:()=>q,O:()=>Ee});var b=B(2416);let L=null;function q(he){if(b.v.useDeprecatedSynchronousErrorHandling){const De=!L;if(De&&(L={errorThrown:!1,error:null}),he(),De){const{errorThrown:Ie,error:Ce}=L;if(L=null,Ie)throw Ce}}else he()}function Ee(he){b.v.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=he)}},9672:(Mt,Ue,B)=>{function b(L,q,Ee,he=0,De=!1){const Ie=q.schedule(function(){Ee(),De?L.add(this.schedule(null,he)):this.unsubscribe()},he);if(L.add(Ie),!De)return Ie}B.d(Ue,{f:()=>b})},4671:(Mt,Ue,B)=>{function b(L){return L}B.d(Ue,{y:()=>b})},1144:(Mt,Ue,B)=>{B.d(Ue,{z:()=>b});const b=L=>L&&"number"==typeof L.length&&"function"!=typeof L},2206:(Mt,Ue,B)=>{B.d(Ue,{D:()=>L});var b=B(576);function L(q){return Symbol.asyncIterator&&(0,b.m)(null==q?void 0:q[Symbol.asyncIterator])}},576:(Mt,Ue,B)=>{function b(L){return"function"==typeof L}B.d(Ue,{m:()=>b})},3670:(Mt,Ue,B)=>{B.d(Ue,{c:()=>q});var b=B(8822),L=B(576);function q(Ee){return(0,L.m)(Ee[b.L])}},6495:(Mt,Ue,B)=>{B.d(Ue,{T:()=>q});var b=B(2202),L=B(576);function q(Ee){return(0,L.m)(null==Ee?void 0:Ee[b.h])}},8239:(Mt,Ue,B)=>{B.d(Ue,{t:()=>L});var b=B(576);function L(q){return(0,b.m)(null==q?void 0:q.then)}},3260:(Mt,Ue,B)=>{B.d(Ue,{Q:()=>q,L:()=>Ee});var b=B(655),L=B(576);function q(he){return(0,b.FC)(this,arguments,function*(){const Ie=he.getReader();try{for(;;){const{value:Ce,done:Se}=yield(0,b.qq)(Ie.read());if(Se)return yield(0,b.qq)(void 0);yield yield(0,b.qq)(Ce)}}finally{Ie.releaseLock()}})}function Ee(he){return(0,L.m)(null==he?void 0:he.getReader)}},4482:(Mt,Ue,B)=>{B.d(Ue,{A:()=>L,e:()=>q});var b=B(576);function L(Ee){return(0,b.m)(null==Ee?void 0:Ee.lift)}function q(Ee){return he=>{if(L(he))return he.lift(function(De){try{return Ee(De,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Mt,Ue,B)=>{B.d(Ue,{Z:()=>Ee});var b=B(4004);const{isArray:L}=Array;function Ee(he){return(0,b.U)(De=>function q(he,De){return L(De)?he(...De):he(De)}(he,De))}},9635:(Mt,Ue,B)=>{B.d(Ue,{z:()=>L,U:()=>q});var b=B(4671);function L(...Ee){return q(Ee)}function q(Ee){return 0===Ee.length?b.y:1===Ee.length?Ee[0]:function(De){return Ee.reduce((Ie,Ce)=>Ce(Ie),De)}}},7849:(Mt,Ue,B)=>{B.d(Ue,{h:()=>q});var b=B(2416),L=B(3410);function q(Ee){L.z.setTimeout(()=>{const{onUnhandledError:he}=b.v;if(!he)throw Ee;he(Ee)})}},4532:(Mt,Ue,B)=>{function b(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(Ue,{z:()=>b})},655:(Mt,Ue,B)=>{function Ee(fe,ke){var Oe={};for(var le in fe)Object.prototype.hasOwnProperty.call(fe,le)&&ke.indexOf(le)<0&&(Oe[le]=fe[le]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var Je=0;for(le=Object.getOwnPropertySymbols(fe);Je<le.length;Je++)ke.indexOf(le[Je])<0&&Object.prototype.propertyIsEnumerable.call(fe,le[Je])&&(Oe[le[Je]]=fe[le[Je]])}return Oe}function Ce(fe,ke,Oe,le){return new(Oe||(Oe=Promise))(function(be,Vt){function pn(te){try{tt(le.next(te))}catch($e){Vt($e)}}function Ve(te){try{tt(le.throw(te))}catch($e){Vt($e)}}function tt(te){te.done?be(te.value):function Je(be){return be instanceof Oe?be:new Oe(function(Vt){Vt(be)})}(te.value).then(pn,Ve)}tt((le=le.apply(fe,ke||[])).next())})}function Ge(fe){return this instanceof Ge?(this.v=fe,this):new Ge(fe)}function Ke(fe,ke,Oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Je,le=Oe.apply(fe,ke||[]),be=[];return Je={},Vt("next"),Vt("throw"),Vt("return"),Je[Symbol.asyncIterator]=function(){return this},Je;function Vt(ot){le[ot]&&(Je[ot]=function(Rt){return new Promise(function(lt,In){be.push([ot,Rt,lt,In])>1||pn(ot,Rt)})})}function pn(ot,Rt){try{!function Ve(ot){ot.value instanceof Ge?Promise.resolve(ot.value.v).then(tt,te):$e(be[0][2],ot)}(le[ot](Rt))}catch(lt){$e(be[0][3],lt)}}function tt(ot){pn("next",ot)}function te(ot){pn("throw",ot)}function $e(ot,Rt){ot(Rt),be.shift(),be.length&&pn(be[0][0],be[0][1])}}function xt(fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,ke=fe[Symbol.asyncIterator];return ke?ke.call(fe):(fe=function pe(fe){var ke="function"==typeof Symbol&&Symbol.iterator,Oe=ke&&fe[ke],le=0;if(Oe)return Oe.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&le>=fe.length&&(fe=void 0),{value:fe&&fe[le++],done:!fe}}};throw new TypeError(ke?"Object is not iterable.":"Symbol.iterator is not defined.")}(fe),Oe={},le("next"),le("throw"),le("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe);function le(be){Oe[be]=fe[be]&&function(Vt){return new Promise(function(pn,Ve){!function Je(be,Vt,pn,Ve){Promise.resolve(Ve).then(function(tt){be({value:tt,done:pn})},Vt)}(pn,Ve,(Vt=fe[be](Vt)).done,Vt.value)})}}}B.d(Ue,{_T:()=>Ee,mG:()=>Ce,qq:()=>Ge,FC:()=>Ke,KL:()=>xt})},9808:(Mt,Ue,B)=>{B.d(Ue,{mr:()=>_t,ez:()=>ro,K0:()=>Ie,Do:()=>et,V_:()=>ae,Ye:()=>Re,S$:()=>Ge,O5:()=>Gr,b0:()=>xt,lw:()=>Ce,EM:()=>so,JF:()=>Jn,PM:()=>Mr,w_:()=>De,bD:()=>gi,q:()=>q,Mx:()=>gs,HT:()=>he});var b=B(5e3);let L=null;function q(){return L}function he(O){L||(L=O)}class De{}const Ie=new b.OlP("DocumentToken");let Ce=(()=>{class O{historyGo(P){throw new Error("Not implemented")}}return O.\u0275fac=function(P){return new(P||O)},O.\u0275prov=b.Yz7({token:O,factory:function(){return function Se(){return(0,b.LFG)(oe)}()},providedIn:"platform"}),O})();const ae=new b.OlP("Location Initialized");let oe=(()=>{class O extends Ce{constructor(P){super(),this._doc=P,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(P){const K=q().getGlobalEventTarget(this._doc,"window");return K.addEventListener("popstate",P,!1),()=>K.removeEventListener("popstate",P)}onHashChange(P){const K=q().getGlobalEventTarget(this._doc,"window");return K.addEventListener("hashchange",P,!1),()=>K.removeEventListener("hashchange",P)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(P){this.location.pathname=P}pushState(P,K,ce){pe()?this._history.pushState(P,K,ce):this.location.hash=ce}replaceState(P,K,ce){pe()?this._history.replaceState(P,K,ce):this.location.hash=ce}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}}return O.\u0275fac=function(P){return new(P||O)(b.LFG(Ie))},O.\u0275prov=b.Yz7({token:O,factory:function(){return function at(){return new oe((0,b.LFG)(Ie))}()},providedIn:"platform"}),O})();function pe(){return!!window.history.pushState}function qe(O,z){if(0==O.length)return z;if(0==z.length)return O;let P=0;return O.endsWith("/")&&P++,z.startsWith("/")&&P++,2==P?O+z.substring(1):1==P?O+z:O+"/"+z}function Qe(O){const z=O.match(/#|\?|$/),P=z&&z.index||O.length;return O.slice(0,P-("/"===O[P-1]?1:0))+O.slice(P)}function vt(O){return O&&"?"!==O[0]?"?"+O:O}let Ge=(()=>{class O{historyGo(P){throw new Error("Not implemented")}}return O.\u0275fac=function(P){return new(P||O)},O.\u0275prov=b.Yz7({token:O,factory:function(){return function Ke(O){const z=(0,b.LFG)(Ie).location;return new xt((0,b.LFG)(Ce),z&&z.origin||"")}()},providedIn:"root"}),O})();const _t=new b.OlP("appBaseHref");let xt=(()=>{class O extends Ge{constructor(P,K){if(super(),this._platformLocation=P,this._removeListenerFns=[],null==K&&(K=this._platformLocation.getBaseHrefFromDOM()),null==K)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=K}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return qe(this._baseHref,P)}path(P=!1){const K=this._platformLocation.pathname+vt(this._platformLocation.search),ce=this._platformLocation.hash;return ce&&P?`${K}${ce}`:K}pushState(P,K,ce,He){const it=this.prepareExternalUrl(ce+vt(He));this._platformLocation.pushState(P,K,it)}replaceState(P,K,ce,He){const it=this.prepareExternalUrl(ce+vt(He));this._platformLocation.replaceState(P,K,it)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(P=0){var K,ce;null===(ce=(K=this._platformLocation).historyGo)||void 0===ce||ce.call(K,P)}}return O.\u0275fac=function(P){return new(P||O)(b.LFG(Ce),b.LFG(_t,8))},O.\u0275prov=b.Yz7({token:O,factory:O.\u0275fac}),O})(),et=(()=>{class O extends Ge{constructor(P,K){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=K&&(this._baseHref=K)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let K=this._platformLocation.hash;return null==K&&(K="#"),K.length>0?K.substring(1):K}prepareExternalUrl(P){const K=qe(this._baseHref,P);return K.length>0?"#"+K:K}pushState(P,K,ce,He){let it=this.prepareExternalUrl(ce+vt(He));0==it.length&&(it=this._platformLocation.pathname),this._platformLocation.pushState(P,K,it)}replaceState(P,K,ce,He){let it=this.prepareExternalUrl(ce+vt(He));0==it.length&&(it=this._platformLocation.pathname),this._platformLocation.replaceState(P,K,it)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(P=0){var K,ce;null===(ce=(K=this._platformLocation).historyGo)||void 0===ce||ce.call(K,P)}}return O.\u0275fac=function(P){return new(P||O)(b.LFG(Ce),b.LFG(_t,8))},O.\u0275prov=b.Yz7({token:O,factory:O.\u0275fac}),O})(),Re=(()=>{class O{constructor(P,K){this._subject=new b.vpe,this._urlChangeListeners=[],this._platformStrategy=P;const ce=this._platformStrategy.getBaseHref();this._platformLocation=K,this._baseHref=Qe(mt(ce)),this._platformStrategy.onPopState(He=>{this._subject.emit({url:this.path(!0),pop:!0,state:He.state,type:He.type})})}path(P=!1){return this.normalize(this._platformStrategy.path(P))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(P,K=""){return this.path()==this.normalize(P+vt(K))}normalize(P){return O.stripTrailingSlash(function gt(O,z){return O&&z.startsWith(O)?z.substring(O.length):z}(this._baseHref,mt(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._platformStrategy.prepareExternalUrl(P)}go(P,K="",ce=null){this._platformStrategy.pushState(ce,"",P,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+vt(K)),ce)}replaceState(P,K="",ce=null){this._platformStrategy.replaceState(ce,"",P,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+vt(K)),ce)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(P=0){var K,ce;null===(ce=(K=this._platformStrategy).historyGo)||void 0===ce||ce.call(K,P)}onUrlChange(P){this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(K=>{this._notifyUrlChangeListeners(K.url,K.state)}))}_notifyUrlChangeListeners(P="",K){this._urlChangeListeners.forEach(ce=>ce(P,K))}subscribe(P,K,ce){return this._subject.subscribe({next:P,error:K,complete:ce})}}return O.normalizeQueryParams=vt,O.joinWithSlash=qe,O.stripTrailingSlash=Qe,O.\u0275fac=function(P){return new(P||O)(b.LFG(Ge),b.LFG(Ce))},O.\u0275prov=b.Yz7({token:O,factory:function(){return function ue(){return new Re((0,b.LFG)(Ge),(0,b.LFG)(Ce))}()},providedIn:"root"}),O})();function mt(O){return O.replace(/\/index.html$/,"")}function gs(O,z){z=encodeURIComponent(z);for(const P of O.split(";")){const K=P.indexOf("="),[ce,He]=-1==K?[P,""]:[P.slice(0,K),P.slice(K+1)];if(ce.trim()===z)return decodeURIComponent(He)}return null}let Gr=(()=>{class O{constructor(P,K){this._viewContainer=P,this._context=new Wn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=K}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){es("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){es("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,K){return!0}}return O.\u0275fac=function(P){return new(P||O)(b.Y36(b.s_b),b.Y36(b.Rgc))},O.\u0275dir=b.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),O})();class Wn{constructor(){this.$implicit=null,this.ngIf=null}}function es(O,z){if(z&&!z.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,b.AaK)(z)}'.`)}let ro=(()=>{class O{}return O.\u0275fac=function(P){return new(P||O)},O.\u0275mod=b.oAB({type:O}),O.\u0275inj=b.cJS({}),O})();const gi="browser";function Mr(O){return"server"===O}let so=(()=>{class O{}return O.\u0275prov=(0,b.Yz7)({token:O,providedIn:"root",factory:()=>new ha((0,b.LFG)(Ie),window)}),O})();class ha{constructor(z,P){this.document=z,this.window=P,this.offset=()=>[0,0]}setOffset(z){this.offset=Array.isArray(z)?()=>z:z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(z){this.supportsScrolling()&&this.window.scrollTo(z[0],z[1])}scrollToAnchor(z){if(!this.supportsScrolling())return;const P=function Es(O,z){const P=O.getElementById(z)||O.getElementsByName(z)[0];if(P)return P;if("function"==typeof O.createTreeWalker&&O.body&&(O.body.createShadowRoot||O.body.attachShadow)){const K=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let ce=K.currentNode;for(;ce;){const He=ce.shadowRoot;if(He){const it=He.getElementById(z)||He.querySelector(`[name="${z}"]`);if(it)return it}ce=K.nextNode()}}return null}(this.document,z);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration(z){if(this.supportScrollRestoration()){const P=this.window.history;P&&P.scrollRestoration&&(P.scrollRestoration=z)}}scrollToElement(z){const P=z.getBoundingClientRect(),K=P.left+this.window.pageXOffset,ce=P.top+this.window.pageYOffset,He=this.offset();this.window.scrollTo(K-He[0],ce-He[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const z=rs(this.window.history)||rs(Object.getPrototypeOf(this.window.history));return!(!z||!z.writable&&!z.set)}catch(z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(z){return!1}}}function rs(O){return Object.getOwnPropertyDescriptor(O,"scrollRestoration")}class Jn{}},5e3:(Mt,Ue,B)=>{B.d(Ue,{deG:()=>yi,tb:()=>pE,AFp:()=>cE,ip1:()=>lE,CZH:()=>w_,hGG:()=>rb,z2F:()=>A_,sBO:()=>jI,Sil:()=>wI,_Vd:()=>Ay,EJc:()=>_I,SBq:()=>Ig,qLn:()=>Rs,vpe:()=>tc,tBr:()=>Di,XFs:()=>Lt,OlP:()=>ci,zs3:()=>Ga,ZZ4:()=>N_,aQg:()=>k_,soG:()=>b_,YKP:()=>T0,h0i:()=>Nf,PXZ:()=>OI,R0b:()=>Al,FiY:()=>So,Lbi:()=>fE,g9A:()=>hE,Qsj:()=>fw,FYo:()=>E0,JOm:()=>We,tp0:()=>Ao,Rgc:()=>Cg,dDg:()=>vE,q4F:()=>I0,GfV:()=>w0,s_b:()=>Ry,ifc:()=>Dt,eFA:()=>wE,G48:()=>BI,Gpc:()=>oe,X6Q:()=>VI,_c5:()=>nb,VLi:()=>xI,c2e:()=>gE,zSh:()=>wp,wAp:()=>dn,vHH:()=>Qe,cg1:()=>Pc,kL8:()=>Yo,dqk:()=>Rn,sIi:()=>Xd,CqO:()=>Jp,QGY:()=>Qp,F4k:()=>Gm,RDi:()=>rs,AaK:()=>Ce,qOj:()=>Jd,TTD:()=>yo,_Bn:()=>y0,xp6:()=>Fg,uIk:()=>af,ekj:()=>Mc,Suo:()=>$0,Xpm:()=>_n,lG2:()=>gn,Yz7:()=>lt,cJS:()=>Ot,oAB:()=>xe,Yjl:()=>Gt,Y36:()=>oh,_UZ:()=>Yp,BQk:()=>vf,ynx:()=>yf,qZA:()=>mf,TgZ:()=>ah,EpF:()=>Cv,n5z:()=>Yi,LFG:()=>Ft,$8M:()=>ya,$Z:()=>Ai,NdJ:()=>ku,CRH:()=>H0,oxw:()=>zm,ALo:()=>N0,lcZ:()=>k0,Q6J:()=>jm,iGM:()=>j0,MAs:()=>cf,CHM:()=>Za,LSH:()=>wr,YNc:()=>lf,_uU:()=>Sl,Oqu:()=>ag,hij:()=>ll});var b=B(7579),L=B(727),q=B(9751),Ee=B(6451),he=B(3099);function De(n){for(let r in n)if(n[r]===De)return r;throw Error("Could not find renamed property on target object.")}function Ie(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Ce(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ce).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Se(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ae=De({__forward_ref__:De});function oe(n){return n.__forward_ref__=oe,n.toString=function(){return Ce(this())},n}function pe(n){return at(n)?n():n}function at(n){return"function"==typeof n&&n.hasOwnProperty(ae)&&n.__forward_ref__===oe}class Qe extends Error{constructor(r,s){super(function vt(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Ge(n){return"string"==typeof n?n:null==n?"":String(n)}function Ke(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ge(n)}function Re(n,r){const s=r?` in ${r}`:"";throw new Qe(-201,`No provider for ${Ke(n)} found${s}`)}function tt(n,r){null==n&&function te(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function lt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function qt(n){return Mn(n,ri)||Mn(n,Hn)}function Mn(n,r){return n.hasOwnProperty(r)?n[r]:null}function ir(n){return n&&(n.hasOwnProperty(Pr)||n.hasOwnProperty(br))?n[Pr]:null}const ri=De({\u0275prov:De}),Pr=De({\u0275inj:De}),Hn=De({ngInjectableDef:De}),br=De({ngInjectorDef:De});var Lt=(()=>((Lt=Lt||{})[Lt.Default=0]="Default",Lt[Lt.Host=1]="Host",Lt[Lt.Self=2]="Self",Lt[Lt.SkipSelf=4]="SkipSelf",Lt[Lt.Optional=8]="Optional",Lt))();let zn;function xn(n){const r=zn;return zn=n,r}function ii(n,r,s){const a=qt(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Lt.Optional?null:void 0!==r?r:void Re(Ce(n),"Injector")}function or(n){return{toString:n}.toString()}var $r=(()=>(($r=$r||{})[$r.OnPush=0]="OnPush",$r[$r.Default=1]="Default",$r))(),Dt=(()=>{return(n=Dt||(Dt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Dt;var n})();const Bt="undefined"!=typeof globalThis&&globalThis,zt="undefined"!=typeof window&&window,dr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Rn=Bt||"undefined"!=typeof global&&global||zt||dr,ar={},Ht=[],Vr=De({\u0275cmp:De}),vn=De({\u0275dir:De}),Nt=De({\u0275pipe:De}),Ze=De({\u0275mod:De}),Ct=De({\u0275fac:De}),Zt=De({__NG_ELEMENT_ID__:De});let bn=0;function _n(n){return or(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===$r.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Ht,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Dt.Emulated,id:"c",styles:n.styles||Ht,_:null,setInput:null,schemas:n.schemas||null,tView:null},l=n.directives,f=n.features,y=n.pipes;return a.id+=bn++,a.inputs=Yt(n.inputs,s),a.outputs=Yt(n.outputs),f&&f.forEach(C=>C(a)),a.directiveDefs=l?()=>("function"==typeof l?l():l).map(ee):null,a.pipeDefs=y?()=>("function"==typeof y?y():y).map(ve):null,a})}function ee(n){return cn(n)||function hr(n){return n[vn]||null}(n)}function ve(n){return function nn(n){return n[Nt]||null}(n)}const ze={};function xe(n){return or(()=>{const r={type:n.type,bootstrap:n.bootstrap||Ht,declarations:n.declarations||Ht,imports:n.imports||Ht,exports:n.exports||Ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ze[n.id]=n.type),r})}function Yt(n,r){if(null==n)return ar;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),s[l]=a,r&&(r[l]=f)}return s}const gn=_n;function Gt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function cn(n){return n[Vr]||null}function Pn(n,r){const s=n[Ze]||null;if(!s&&!0===r)throw new Error(`Type ${Ce(n)} does not have '\u0275mod' property.`);return s}function Ar(n){return Array.isArray(n)&&"object"==typeof n[1]}function oi(n){return Array.isArray(n)&&!0===n[1]}function eo(n){return 0!=(8&n.flags)}function ji(n){return 2==(2&n.flags)}function to(n){return 1==(1&n.flags)}function zr(n){return null!==n.template}function Ro(n){return 0!=(512&n[2])}function pi(n,r){return n.hasOwnProperty(Ct)?n[Ct]:null}class Us{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function yo(){return da}function da(n){return n.type.prototype.ngOnChanges&&(n.setInput=_s),Jo}function Jo(){const n=gi(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===ar)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function _s(n,r,s,a){const l=gi(n)||function Ei(n,r){return n[ro]=r}(n,{previous:ar,current:null}),f=l.current||(l.current={}),y=l.previous,C=this.declaredInputs[s],A=y[C];f[C]=new Us(A&&A.currentValue,r,y===ar),n[a]=r}yo.ngInherit=!0;const ro="__ngSimpleChanges__";function gi(n){return n[ro]||null}let ha;function rs(n){ha=n}function Jn(n){return!!n.listen}const O={createRenderer:(n,r)=>function Es(){return void 0!==ha?ha:"undefined"!=typeof document?document:void 0}()};function P(n){for(;Array.isArray(n);)n=n[0];return n}function He(n,r){return P(r[n])}function it(n,r){return P(r[n.index])}function sn(n,r){return n.data[r]}function Vn(n,r){return n[r]}function Dn(n,r){const s=r[n];return Ar(s)?s:s[0]}function Nn(n){return 4==(4&n[2])}function fr(n){return 128==(128&n[2])}function sr(n,r){return null==r?null:n[r]}function ui(n){n[18]=0}function wi(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const Qt={lFrame:Lo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ea(){return Qt.bindingsEnabled}function rt(){return Qt.lFrame.lView}function Ln(){return Qt.lFrame.tView}function Za(n){return Qt.lFrame.contextLView=n,n[8]}function Tr(){let n=Ya();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ya(){return Qt.lFrame.currentTNode}function Is(n,r){const s=Qt.lFrame;s.currentTNode=n,s.isParent=r}function Ta(){return Qt.lFrame.isParent}function Eo(){Qt.lFrame.isParent=!1}function fa(){return Qt.isInCheckNoChangesMode}function Oo(n){Qt.isInCheckNoChangesMode=n}function Ds(){return Qt.lFrame.bindingIndex++}function No(n,r){const s=Qt.lFrame;s.bindingIndex=s.bindingRootIndex=n,Sa(r)}function Sa(n){Qt.lFrame.currentDirectiveIndex=n}function ga(){return Qt.lFrame.currentQueryIndex}function Uu(n){Qt.lFrame.currentQueryIndex=n}function Qa(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Aa(n,r,s){if(s&Lt.SkipSelf){let l=r,f=n;for(;!(l=l.parent,null!==l||s&Lt.Host||(l=Qa(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;r=l,n=f}const a=Qt.lFrame=wu();return a.currentTNode=r,a.lView=n,!0}function ko(n){const r=wu(),s=n[1];Qt.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function wu(){const n=Qt.lFrame,r=null===n?null:n.child;return null===r?Lo(n):r}function Lo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Ja(){const n=Qt.lFrame;return Qt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Fo=Ja;function zi(){const n=Ja();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function li(){return Qt.lFrame.selectedIndex}function ao(n){Qt.lFrame.selectedIndex=n}function Bn(){const n=Qt.lFrame;return sn(n.tView,n.selectedIndex)}function uo(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const f=n.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:A,ngAfterViewChecked:U,ngOnDestroy:H}=f;y&&(n.contentHooks||(n.contentHooks=[])).push(-s,y),C&&((n.contentHooks||(n.contentHooks=[])).push(s,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,C)),A&&(n.viewHooks||(n.viewHooks=[])).push(-s,A),U&&((n.viewHooks||(n.viewHooks=[])).push(s,U),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,U)),null!=H&&(n.destroyHooks||(n.destroyHooks=[])).push(s,H)}}function Wi(n,r,s){Ii(n,r,3,s)}function lo(n,r,s,a){(3&n[2])===s&&Ii(n,r,s,a)}function Wr(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Ii(n,r,s,a){const f=null!=a?a:-1,y=r.length-1;let C=0;for(let A=void 0!==a?65535&n[18]:0;A<y;A++)if("number"==typeof r[A+1]){if(C=r[A],null!=a&&C>=a)break}else r[A]<0&&(n[18]+=65536),(C<f||-1==f)&&(nu(n,s,r,A),n[18]=(4294901760&n[18])+A+2),A++}function nu(n,r,s,a){const l=s[a]<0,f=s[a+1],C=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{f.call(C)}finally{}}}else try{f.call(C)}finally{}}class wo{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function js(n,r,s){const a=Jn(n);let l=0;for(;l<s.length;){const f=s[l];if("number"==typeof f){if(0!==f)break;l++;const y=s[l++],C=s[l++],A=s[l++];a?n.setAttribute(r,C,A,y):r.setAttributeNS(y,C,A)}else{const y=f,C=s[++l];Cs(y)?a&&n.setProperty(r,y,C):a?n.setAttribute(r,y,C):r.setAttribute(y,C),l++}}return l}function Kr(n){return 3===n||4===n||6===n}function Cs(n){return 64===n.charCodeAt(0)}function is(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||ss(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function ss(n,r,s,a,l){let f=0,y=n.length;if(-1===r)y=-1;else for(;f<n.length;){const C=n[f++];if("number"==typeof C){if(C===r){y=-1;break}if(C>r){y=f-1;break}}}for(;f<n.length;){const C=n[f];if("number"==typeof C)break;if(C===s){if(null===a)return void(null!==l&&(n[f+1]=l));if(a===n[f+1])return void(n[f+2]=l)}f++,null!==a&&f++,null!==l&&f++}-1!==y&&(n.splice(y,0,r),f=y+1),n.splice(f++,0,s),null!==a&&n.splice(f++,0,a),null!==l&&n.splice(f++,0,l)}function Pa(n){return-1!==n}function Er(n){return 32767&n}function $s(n,r){let s=function Uo(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let Hs=!0;function Gs(n){const r=Hs;return Hs=n,r}let Vo=0;function os(n,r){const s=zs(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,mi(a.data,n),mi(r,null),mi(a.blueprint,null));const l=Zi(n,r),f=n.injectorIndex;if(Pa(l)){const y=Er(l),C=$s(l,r),A=C[1].data;for(let U=0;U<8;U++)r[f+U]=C[y+U]|A[y+U]}return r[f+8]=l,f}function mi(n,r){n.push(0,0,0,0,0,0,0,0,r)}function zs(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Zi(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){const f=l[1],y=f.type;if(a=2===y?f.declTNode:1===y?l[6]:null,null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function T(n,r,s){!function Br(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Zt)&&(a=s[Zt]),null==a&&(a=s[Zt]=Vo++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function E(n,r,s){if(s&Lt.Optional)return n;Re(r,"NodeInjector")}function R(n,r,s,a){if(s&Lt.Optional&&void 0===a&&(a=null),0==(s&(Lt.Self|Lt.Host))){const l=n[9],f=xn(void 0);try{return l?l.get(r,a,s&Lt.Optional):ii(r,a,s&Lt.Optional)}finally{xn(f)}}return E(a,r,s)}function N(n,r,s,a=Lt.Default,l){if(null!==n){const f=function Jt(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Zt)?n[Zt]:void 0;return"number"==typeof r?r>=0?255&r:re:r}(s);if("function"==typeof f){if(!Aa(r,n,a))return a&Lt.Host?E(l,s,a):R(r,s,a,l);try{const y=f(a);if(null!=y||a&Lt.Optional)return y;Re(s)}finally{Fo()}}else if("number"==typeof f){let y=null,C=zs(n,r),A=-1,U=a&Lt.Host?r[16][6]:null;for((-1===C||a&Lt.SkipSelf)&&(A=-1===C?Zi(n,r):r[C+8],-1!==A&&cr(a,!1)?(y=r[1],C=Er(A),r=$s(A,r)):C=-1);-1!==C;){const H=r[1];if(jt(f,C,H.data)){const J=Q(C,r,s,y,a,U);if(J!==j)return J}A=r[C+8],-1!==A&&cr(a,r[1].data[C+8]===U)&&jt(f,C,r)?(y=H,C=Er(A),r=$s(A,r)):C=-1}}}return R(r,s,a,l)}const j={};function re(){return new kn(Tr(),rt())}function Q(n,r,s,a,l,f){const y=r[1],C=y.data[n+8],H=X(C,y,s,null==a?ji(C)&&Hs:a!=y&&0!=(3&C.type),l&Lt.Host&&f===C);return null!==H?Me(r,y,H,C):j}function X(n,r,s,a,l){const f=n.providerIndexes,y=r.data,C=1048575&f,A=n.directiveStart,H=f>>20,ge=l?C+H:n.directiveEnd;for(let Ne=a?C:C+H;Ne<ge;Ne++){const nt=y[Ne];if(Ne<A&&s===nt||Ne>=A&&nt.type===s)return Ne}if(l){const Ne=y[A];if(Ne&&zr(Ne)&&Ne.type===s)return A}return null}function Me(n,r,s,a){let l=n[s];const f=r.data;if(function Io(n){return n instanceof wo}(l)){const y=l;y.resolving&&function _t(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Qe(-200,`Circular dependency in DI detected for ${n}${s}`)}(Ke(f[s]));const C=Gs(y.canSeeViewProviders);y.resolving=!0;const A=y.injectImpl?xn(y.injectImpl):null;Aa(n,a,Lt.Default);try{l=n[s]=y.factory(void 0,f,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Ra(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:f}=r.type.prototype;if(a){const y=da(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),f&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,f),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,f))}(s,f[s],r)}finally{null!==A&&xn(A),Gs(C),y.resolving=!1,Fo()}}return l}function jt(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function cr(n,r){return!(n&Lt.Self||n&Lt.Host&&r)}class kn{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return N(this._tNode,this._lView,r,a,s)}}function Yi(n){return or(()=>{const r=n.prototype.constructor,s=r[Ct]||Ss(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const f=l[Ct]||Ss(l);if(f&&f!==s)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function Ss(n){return at(n)?()=>{const r=Ss(pe(n));return r&&r()}:pi(n)}function ya(n){return function w(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const f=s[l];if(Kr(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(f===r)return s[l+1];l+=2}}}return null}(Tr(),n)}const as="__parameters__";function Oa(n,r,s){return or(()=>{const a=function Vu(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...f){if(this instanceof l)return a.apply(this,f),this;const y=new l(...f);return C.annotation=y,C;function C(A,U,H){const J=A.hasOwnProperty(as)?A[as]:Object.defineProperty(A,as,{value:[]})[as];for(;J.length<=H;)J.push(null);return(J[H]=J[H]||[]).push(y),A}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class ci{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=lt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const yi=new ci("AnalyzeForEntryComponents");function Kn(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),Kn(a,r)):r!==n&&r.push(a)}return r}function vi(n,r){n.forEach(s=>Array.isArray(s)?vi(s,r):r(s))}function ju(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function fo(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function qs(n,r,s){let a=po(n,r);return a>=0?n[1|a]=s:(a=~a,function jo(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function fl(n,r){const s=po(n,r);if(s>=0)return n[1|s]}function po(n,r){return function go(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const f=a+(l-a>>1),y=n[f<<s];if(r===y)return f<<s;y>r?l=f:a=f+1}return~(l<<s)}(n,r,1)}const $o={},Ho="__NG_DI_FLAG__",Hu="ngTempTokenPath",k=/\n/gm,ie="__source",Te=De({provide:String,useValue:De});let Fe;function pt(n){const r=Fe;return Fe=n,r}function bt(n,r=Lt.Default){if(void 0===Fe)throw new Qe(203,"");return null===Fe?ii(n,void 0,r):Fe.get(n,r&Lt.Optional?null:void 0,r)}function Ft(n,r=Lt.Default){return(function Or(){return zn}()||bt)(pe(n),r)}const Gn=Ft;function Tn(n){const r=[];for(let s=0;s<n.length;s++){const a=pe(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Qe(900,"");let l,f=Lt.Default;for(let y=0;y<a.length;y++){const C=a[y],A=ti(C);"number"==typeof A?-1===A?l=C.token:f|=A:l=C}r.push(Ft(l,f))}else r.push(Ft(a))}return r}function Rr(n,r){return n[Ho]=r,n.prototype[Ho]=r,n}function ti(n){return n[Ho]}const Di=Rr(Oa("Inject",n=>({token:n})),-1),So=Rr(Oa("Optional"),8),Ao=Rr(Oa("SkipSelf"),4);class Nl{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ea(n){return n instanceof Nl?n.changingThisBreaksApplicationSecurity:n}const Be=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ut=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function wr(n){const r=function cc(){const n=rt();return n&&n[12]}();return r?r.sanitize(Sn.URL,n)||"":function Ku(n,r){const s=function ml(n){return n instanceof Nl&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?Ea(n):function en(n){return(n=String(n)).match(Be)||n.match(Ut)?n:"unsafe:"+n}(Ge(n))}const Ll="__ngContext__";function Js(n,r){n[Ll]=r}function Hc(n){const r=function Yu(n){return n[Ll]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function yl(n){return n.ngOriginalError}function Kc(n,...r){n.error(...r)}class Rs{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function hu(n){return n&&n.ngErrorLogger||Kc}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&yl(r);for(;s&&yl(s);)s=yl(s);return s||null}}const Eh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Rn))();function p(n){return n instanceof Function?n():n}var We=(()=>((We=We||{})[We.Important=1]="Important",We[We.DashCase=2]="DashCase",We))();function At(n,r){return undefined(n,r)}function gr(n){const r=n[3];return oi(r)?r[3]:r}function hc(n){return Od(n[13])}function fc(n){return Od(n[4])}function Od(n){for(;null!==n&&!oi(n);)n=n[4];return n}function Ju(n,r,s,a,l){if(null!=a){let f,y=!1;oi(a)?f=a:Ar(a)&&(y=!0,a=a[0]);const C=P(a);0===n&&null!==s?null==l?pu(r,s,C):Xu(r,s,C,l||null,!0):1===n&&null!==s?Xu(r,s,C,l||null,!0):2===n?function zf(n,r,s){const a=el(n,r);a&&function Fd(n,r,s,a){Jn(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,C,y):3===n&&r.destroyNode(C),null!=f&&function pc(n,r,s,a,l){const f=s[7];f!==P(s)&&Ju(r,n,a,f,l);for(let C=10;C<s.length;C++){const A=s[C];Xc(A[1],A,n,r,a,f)}}(r,n,f,s,l)}}function Yc(n,r,s){if(Jn(n))return n.createElement(r,s);{const a=null!==s?function so(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Ag(n,r){const s=n[9],a=s.indexOf(r),l=r[3];1024&r[2]&&(r[2]&=-1025,wi(l,-1)),s.splice(a,1)}function Ih(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&Ag(l,a),r>0&&(n[s-1][4]=a[4]);const f=fo(n,10+r);!function jf(n,r){Xc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const y=f[19];null!==y&&y.detachView(f[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Mg(n,r){if(!(256&r[2])){const s=r[11];Jn(s)&&s.destroyNode&&Xc(n,r,s,3,null,null),function Fy(n){let r=n[13];if(!r)return bh(n[1],n);for(;r;){let s=null;if(Ar(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)Ar(r)&&bh(r[1],r),r=r[3];null===r&&(r=n),Ar(r)&&bh(r[1],r),s=r&&r[4]}r=s}}(r)}}function bh(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function xg(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof wo)){const f=s[a+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const C=l[f[y]],A=f[y+1];try{A.call(C)}finally{}}else try{f.call(l)}finally{}}}}(n,r),function By(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let f=0;f<s.length-1;f+=2)if("string"==typeof s[f]){const y=s[f+1],C="function"==typeof y?y(r):P(r[y]),A=a[l=s[f+2]],U=s[f+3];"boolean"==typeof U?C.removeEventListener(s[f],A,U):U>=0?a[l=U]():a[l=-U].unsubscribe(),f+=2}else{const y=a[l=s[f+1]];s[f].call(y)}if(null!==a){for(let f=l+1;f<a.length;f++)a[f]();r[7]=null}}(n,r),1===r[1].type&&Jn(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&oi(r[3])){s!==r[3]&&Ag(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function Hf(n,r,s){return function Ye(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===Dt.None||l===Dt.Emulated)return null}return it(a,s)}(n,r.parent,s)}function Xu(n,r,s,a,l){Jn(n)?n.insertBefore(r,s,a,l):r.insertBefore(s,a,l)}function pu(n,r,s){Jn(n)?n.appendChild(r,s):r.appendChild(s)}function Rg(n,r,s,a,l){null!==a?Xu(n,r,s,a,l):pu(n,r,s)}function el(n,r){return Jn(n)?n.parentNode(r):r.parentNode}let Dh=function Gf(n,r,s){return 40&n.type?it(n,s):null};function Qc(n,r,s,a){const l=Hf(n,a,r),f=r[11],C=function Bl(n,r,s){return Dh(n,r,s)}(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let A=0;A<s.length;A++)Rg(f,l,s[A],C,!1);else Rg(f,l,s,C,!1)}function Jc(n,r){if(null!==r){const s=r.type;if(3&s)return it(r,n);if(4&s)return tl(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return Jc(n,a);{const l=n[r.index];return oi(l)?tl(-1,l):P(l)}}if(32&s)return At(r,n)()||P(n[r.index]);{const a=Ch(n,r);return null!==a?Array.isArray(a)?a[0]:Jc(gr(n[16]),a):Jc(n,r.next)}}return null}function Ch(n,r){return null!==r?n[16][6].projection[r.projection]:null}function tl(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return Jc(a,l)}return r[7]}function Wf(n,r,s,a,l,f,y){for(;null!=s;){const C=a[s.index],A=s.type;if(y&&0===r&&(C&&Js(P(C),a),s.flags|=4),64!=(64&s.flags))if(8&A)Wf(n,r,s.child,a,l,f,!1),Ju(r,n,l,C,f);else if(32&A){const U=At(s,a);let H;for(;H=U();)Ju(r,n,l,H,f);Ju(r,n,l,C,f)}else 16&A?jl(n,r,a,s,l,f):Ju(r,n,l,C,f);s=y?s.projectionNext:s.next}}function Xc(n,r,s,a,l,f){Wf(s,a,n.firstChild,r,l,f,!1)}function jl(n,r,s,a,l,f){const y=s[16],A=y[6].projection[a.projection];if(Array.isArray(A))for(let U=0;U<A.length;U++)Ju(r,n,l,A[U],f);else Wf(n,r,A,y[3],l,f,!0)}function td(n,r,s){Jn(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Ah(n,r,s){Jn(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function Mh(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const f=r.length;if(l+f===a||n.charCodeAt(l+f)<=32)return l}s=l+1}}const Kf="ng-template";function $y(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==Mh(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function qf(n){return 4===n.type&&n.value!==Kf}function Og(n,r,s){return r===(4!==n.type||s?n.value:Kf)}function Zf(n,r,s){let a=4;const l=n.attrs||[],f=function Hy(n){for(let r=0;r<n.length;r++)if(Kr(n[r]))return r;return n.length}(l);let y=!1;for(let C=0;C<r.length;C++){const A=r[C];if("number"!=typeof A){if(!y)if(4&a){if(a=2|1&a,""!==A&&!Og(n,A,s)||""===A&&1===r.length){if(oa(a))return!1;y=!0}}else{const U=8&a?A:r[++C];if(8&a&&null!==n.attrs){if(!$y(n.attrs,U,s)){if(oa(a))return!1;y=!0}continue}const J=nd(8&a?"class":A,l,qf(n),s);if(-1===J){if(oa(a))return!1;y=!0;continue}if(""!==U){let ge;ge=J>f?"":l[J+1].toLowerCase();const Ne=8&a?ge:null;if(Ne&&-1!==Mh(Ne,U,0)||2&a&&U!==ge){if(oa(a))return!1;y=!0}}}}else{if(!y&&!oa(a)&&!oa(A))return!1;if(y&&oa(A))continue;y=!1,a=A|1&a}}return oa(a)||y}function oa(n){return 0==(1&n)}function nd(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let f=!1;for(;l<r.length;){const y=r[l];if(y===n)return l;if(3===y||6===y)f=!0;else{if(1===y||2===y){let C=r[++l];for(;"string"==typeof C;)C=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=f?1:2}return-1}return function Gy(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Ng(n,r,s=!1){for(let a=0;a<r.length;a++)if(Zf(n,r[a],s))return!0;return!1}function Ud(n,r){return n?":not("+r.trim()+")":r}function $l(n){let r=n[0],s=1,a=2,l="",f=!1;for(;s<n.length;){let y=n[s];if("string"==typeof y)if(2&a){const C=n[++s];l+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&a?l+="."+y:4&a&&(l+=" "+y);else""!==l&&!oa(y)&&(r+=Ud(f,l),l=""),a=y,f=f||!oa(a);s++}return""!==l&&(r+=Ud(f,l)),r}const jn={};function Fg(n){xh(Ln(),rt(),li()+n,fa())}function xh(n,r,s,a){if(!a)if(3==(3&r[2])){const f=n.preOrderCheckHooks;null!==f&&Wi(r,f,s)}else{const f=n.preOrderHooks;null!==f&&lo(r,f,0,s)}ao(s)}function Rh(n,r){return n<<17|r<<2}function gu(n){return n>>17&32767}function id(n){return 2|n}function nl(n){return(131068&n)>>2}function Ko(n,r){return-131069&n|r<<2}function sd(n){return 1|n}function qg(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],f=s[a+1];if(-1!==f){const y=n.data[f];Uu(l),y.contentQueries(2,r[f],f)}}}function vc(n,r,s,a,l,f,y,C,A,U){const H=r.blueprint.slice();return H[0]=l,H[2]=140|a,ui(H),H[3]=H[15]=n,H[8]=s,H[10]=y||n&&n[10],H[11]=C||n&&n[11],H[12]=A||n&&n[12]||null,H[9]=U||n&&n[9]||null,H[6]=f,H[16]=2==r.type?n[16]:H,H}function wl(n,r,s,a,l){let f=n.data[r];if(null===f)f=function Uh(n,r,s,a,l){const f=Ya(),y=Ta(),A=n.data[r]=function tv(n,r,s,a,l,f){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=A),null!==f&&(y?null==f.child&&null!==A.parent&&(f.child=A):null===f.next&&(f.next=A)),A}(n,r,s,a,l),function pa(){return Qt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=s,f.value=a,f.attrs=l;const y=function Vs(){const n=Qt.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Is(f,!0),f}function _c(n,r,s,a){if(0===s)return-1;const l=r.length;for(let f=0;f<s;f++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function ld(n,r,s){ko(r);try{const a=n.viewQuery;null!==a&&hd(1,a,s);const l=n.template;null!==l&&Zg(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&qg(n,r),n.staticViewQueries&&hd(2,n.viewQuery,s);const f=n.components;null!==f&&function ud(n,r){for(let s=0;s<r.length;s++)pp(n,r[s])}(r,f)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,zi()}}function cd(n,r,s,a){const l=r[2];if(256==(256&l))return;ko(r);const f=fa();try{ui(r),function ta(n){return Qt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Zg(n,r,s,2,a);const y=3==(3&l);if(!f)if(y){const U=n.preOrderCheckHooks;null!==U&&Wi(r,U,null)}else{const U=n.preOrderHooks;null!==U&&lo(r,U,0,null),Wr(r,0)}if(function Wd(n){for(let r=hc(n);null!==r;r=fc(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],f=l[3];0==(1024&l[2])&&wi(f,1),l[2]|=1024}}}(r),function Wh(n){for(let r=hc(n);null!==r;r=fc(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];fr(a)&&cd(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&qg(n,r),!f)if(y){const U=n.contentCheckHooks;null!==U&&Wi(r,U)}else{const U=n.contentHooks;null!==U&&lo(r,U,1),Wr(r,1)}!function Kg(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)ao(~l);else{const f=l,y=s[++a],C=s[++a];No(y,f),C(2,r[f])}}}finally{ao(-1)}}(n,r);const C=n.components;null!==C&&function ad(n,r){for(let s=0;s<r.length;s++)fp(n,r[s])}(r,C);const A=n.viewQuery;if(null!==A&&hd(2,A,a),!f)if(y){const U=n.viewCheckHooks;null!==U&&Wi(r,U)}else{const U=n.viewHooks;null!==U&&lo(r,U,2),Wr(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),f||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,wi(r[3],-1))}finally{zi()}}function rp(n,r,s,a){const l=r[10],f=!fa(),y=Nn(r);try{f&&!y&&l.begin&&l.begin(),y&&ld(n,r,a),cd(n,r,s,a)}finally{f&&!y&&l.end&&l.end()}}function Zg(n,r,s,a,l){const f=li(),y=2&a;try{ao(-1),y&&r.length>20&&xh(n,r,20,fa()),s(a,l)}finally{ao(f)}}function Vh(n,r,s){if(eo(r)){const l=r.directiveEnd;for(let f=r.directiveStart;f<l;f++){const y=n.data[f];y.contentQueries&&y.contentQueries(1,s[f],f)}}}function ip(n,r,s){!ea()||(function rv(n,r,s,a){const l=s.directiveStart,f=s.directiveEnd;n.firstCreatePass||os(s,r),Js(a,r);const y=s.initialInputs;for(let C=l;C<f;C++){const A=n.data[C],U=zr(A);U&&sv(r,s,A);const H=Me(r,n,C,s);Js(H,r),null!==y&&Gd(0,C-l,H,A,0,y),U&&(Dn(s.index,r)[8]=H)}}(n,r,s,it(s,r)),128==(128&s.flags)&&function iv(n,r,s){const a=s.directiveStart,l=s.directiveEnd,y=s.index,C=function na(){return Qt.lFrame.currentDirectiveIndex}();try{ao(y);for(let A=a;A<l;A++){const U=n.data[A],H=r[A];Sa(A),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&lp(U,H)}}finally{ao(-1),Sa(C)}}(n,r,s))}function sp(n,r,s=it){const a=r.localNames;if(null!==a){let l=r.index+1;for(let f=0;f<a.length;f+=2){const y=a[f+1],C=-1===y?s(r,n):n[y];n[l++]=C}}}function Bh(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=cs(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function cs(n,r,s,a,l,f,y,C,A,U){const H=20+a,J=H+l,ge=function ev(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:jn);return s}(H,J),Ne="function"==typeof U?U():U;return ge[1]={type:n,blueprint:ge,template:s,queries:null,viewQuery:C,declTNode:r,data:ge.slice().fill(null,H),bindingStartIndex:H,expandoStartIndex:J,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:A,consts:Ne,incompleteFirstPass:!1}}function Jg(n,r,s,a){const l=Ec(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&Yh(n).push(a,l.length-1))}function jh(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function ap(n,r,s,a){let l=!1;if(ea()){const f=function Gh(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];Ng(s,y.selectors,!1)&&(l||(l=[]),T(os(s,r),n,y.type),zr(y)?(dd(n,s),l.unshift(y)):l.push(y))}return l}(n,r,s),y=null===a?null:{"":-1};if(null!==f){l=!0,sm(s,n.data.length,f.length);for(let H=0;H<f.length;H++){const J=f[H];J.providersResolver&&J.providersResolver(J)}let C=!1,A=!1,U=_c(n,r,f.length,null);for(let H=0;H<f.length;H++){const J=f[H];s.mergedAttrs=is(s.mergedAttrs,J.hostAttrs),om(n,s,r,U,J),im(U,J,y),null!==J.contentQueries&&(s.flags|=8),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(s.flags|=128);const ge=J.type.prototype;!C&&(ge.ngOnChanges||ge.ngOnInit||ge.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),C=!0),!A&&(ge.ngOnChanges||ge.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),A=!0),U++}!function Xg(n,r){const a=r.directiveEnd,l=n.data,f=r.attrs,y=[];let C=null,A=null;for(let U=r.directiveStart;U<a;U++){const H=l[U],J=H.inputs,ge=null===f||qf(r)?null:hp(J,f);y.push(ge),C=jh(J,U,C),A=jh(H.outputs,U,A)}null!==C&&(C.hasOwnProperty("class")&&(r.flags|=16),C.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=y,r.inputs=C,r.outputs=A}(n,s)}y&&function cp(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const f=s[r[l+1]];if(null==f)throw new Qe(-301,!1);a.push(r[l],f)}}}(s,a,y)}return s.mergedAttrs=is(s.mergedAttrs,s.attrs),l}function up(n,r,s,a,l,f){const y=f.hostBindings;if(y){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const A=~r.index;(function nv(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(C)!=A&&C.push(A),C.push(a,l,y)}}function lp(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function dd(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function im(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;zr(r)&&(s[""]=n)}}function sm(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function om(n,r,s,a,l){n.data[a]=l;const f=l.factory||(l.factory=pi(l.type)),y=new wo(f,zr(l),null);n.blueprint[a]=y,s[a]=y,up(n,r,0,a,_c(n,s,l.hostVars,jn),l)}function sv(n,r,s){const a=it(r,n),l=Bh(s),f=n[10],y=Pu(n,vc(n,l,null,s.onPush?64:16,a,r,f,f.createRenderer(a,s),null,null));n[r.index]=y}function il(n,r,s,a,l,f){const y=it(n,r);!function dp(n,r,s,a,l,f,y){if(null==f)Jn(n)?n.removeAttribute(r,l,s):r.removeAttribute(l);else{const C=null==y?Ge(f):y(f,a||"",l);Jn(n)?n.setAttribute(r,l,C,s):s?r.setAttributeNS(s,l,C):r.setAttribute(l,C)}}(r[11],y,f,n.value,s,a,l)}function Gd(n,r,s,a,l,f){const y=f[r];if(null!==y){const C=a.setInput;for(let A=0;A<y.length;){const U=y[A++],H=y[A++],J=y[A++];null!==C?a.setInput(s,J,U,H):s[H]=J}}}function hp(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function zh(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function fp(n,r){const s=Dn(r,n);if(fr(s)){const a=s[1];80&s[2]?cd(a,s,a.template,s[8]):s[5]>0&&Kh(s)}}function Kh(n){for(let a=hc(n);null!==a;a=fc(a))for(let l=10;l<a.length;l++){const f=a[l];if(1024&f[2]){const y=f[1];cd(y,f,y.template,f[8])}else f[5]>0&&Kh(f)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=Dn(s[a],n);fr(l)&&l[5]>0&&Kh(l)}}function pp(n,r){const s=Dn(r,n),a=s[1];(function gp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),ld(a,s,s[8])}function Pu(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function qh(n){for(;n;){n[2]|=64;const r=gr(n);if(Ro(n)&&!r)return n;n=r}return null}function mp(n,r,s){const a=r[10];a.begin&&a.begin();try{cd(n,r,n.template,s)}catch(l){throw cm(r,l),l}finally{a.end&&a.end()}}function Zh(n){!function Kd(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=Hc(s),l=a[1];rp(l,a,l.template,s)}}(n[8])}function hd(n,r,s){Uu(0),r(n,s)}const um=(()=>Promise.resolve(null))();function Ec(n){return n[7]||(n[7]=[])}function Yh(n){return n.cleanup||(n.cleanup=[])}function cm(n,r){const s=n[9],a=s?s.get(Rs,null):null;a&&a.handleError(r)}function vp(n,r,s,a,l){for(let f=0;f<s.length;){const y=s[f++],C=s[f++],A=r[y],U=n.data[y];null!==U.setInput?U.setInput(A,l,a,C):A[C]=l}}function sl(n,r,s){const a=He(r,n);!function Nd(n,r,s){Jn(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function Qh(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,f=0;if(null!==r)for(let y=0;y<r.length;y++){const C=r[y];"number"==typeof C?f=C:1==f?l=Se(l,C):2==f&&(a=Se(a,C+": "+r[++y]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}const Ep=new ci("INJECTOR",-1);class Jh{get(r,s=$o){if(s===$o){const a=new Error(`NullInjectorError: No provider for ${Ce(r)}!`);throw a.name="NullInjectorError",a}return s}}const wp=new ci("Set Injector scope."),wc={},hm={};let qd;function Xh(){return void 0===qd&&(qd=new Jh),qd}function ef(n,r=null,s=null,a){const l=Ic(n,r,s,a);return l._resolveInjectorDefTypes(),l}function Ic(n,r=null,s=null,a){return new zl(n,s,r||Xh(),a)}class zl{constructor(r,s,a,l=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];s&&vi(s,C=>this.processProvider(C,r,s)),vi([r],C=>this.processInjectorType(C,[],f)),this.records.set(Ep,Ou(void 0,this));const y=this.records.get(wp);this.scope=null!=y?y.value:null,this.source=l||("object"==typeof r?null:Ce(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=$o,a=Lt.Default){this.assertNotDestroyed();const l=pt(this),f=xn(void 0);try{if(!(a&Lt.SkipSelf)){let C=this.records.get(r);if(void 0===C){const A=function dv(n){return"function"==typeof n||"object"==typeof n&&n instanceof ci}(r)&&qt(r);C=A&&this.injectableDefInScope(A)?Ou(Zd(r),wc):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(a&Lt.Self?Xh():this.parent).get(r,s=a&Lt.Optional&&s===$o?null:s)}catch(y){if("NullInjectorError"===y.name){if((y[Hu]=y[Hu]||[]).unshift(Ce(r)),l)throw y;return function lu(n,r,s,a){const l=n[Hu];throw r[ie]&&l.unshift(r[ie]),n.message=function Tu(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let l=Ce(r);if(Array.isArray(r))l=r.map(Ce).join(" -> ");else if("object"==typeof r){let f=[];for(let y in r)if(r.hasOwnProperty(y)){let C=r[y];f.push(y+":"+("string"==typeof C?JSON.stringify(C):Ce(C)))}l=`{${f.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(k,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[Hu]=null,n}(y,r,"R3InjectorError",this.source)}throw y}finally{xn(f),pt(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,l)=>r.push(Ce(l))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Qe(205,!1)}processInjectorType(r,s,a){if(!(r=pe(r)))return!1;let l=ir(r);const f=null==l&&r.ngModule||void 0,y=void 0===f?r:f,C=-1!==a.indexOf(y);if(void 0!==f&&(l=ir(f)),null==l)return!1;if(null!=l.imports&&!C){let H;a.push(y);try{vi(l.imports,J=>{this.processInjectorType(J,s,a)&&(void 0===H&&(H=[]),H.push(J))})}finally{}if(void 0!==H)for(let J=0;J<H.length;J++){const{ngModule:ge,providers:Ne}=H[J];vi(Ne,nt=>this.processProvider(nt,ge,Ne||Ht))}}this.injectorDefTypes.add(y);const A=pi(y)||(()=>new y);this.records.set(y,Ou(A,wc));const U=l.providers;if(null!=U&&!C){const H=r;vi(U,J=>this.processProvider(J,H,U))}return void 0!==f&&void 0!==r.providers}processProvider(r,s,a){let l=Wl(r=pe(r))?r:pe(r&&r.provide);const f=function pd(n,r,s){return fm(n)?Ou(void 0,n.useValue):Ou(Ip(n),wc)}(r);if(Wl(r)||!0!==r.multi)this.records.get(l);else{let y=this.records.get(l);y||(y=Ou(void 0,wc,!0),y.factory=()=>Tn(y.multi),this.records.set(l,y)),l=r,y.multi.push(r)}this.records.set(l,f)}hydrate(r,s){return s.value===wc&&(s.value=hm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function cv(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=pe(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Zd(n){const r=qt(n),s=null!==r?r.factory:pi(n);if(null!==s)return s;if(n instanceof ci)throw new Qe(204,!1);if(n instanceof Function)return function fd(n){const r=n.length;if(r>0)throw function Li(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new Qe(204,!1);const s=function $n(n){const r=n&&(n[ri]||n[Hn]);if(r){const s=function Ir(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Qe(204,!1)}function Ip(n,r,s){let a;if(Wl(n)){const l=pe(n);return pi(l)||Zd(l)}if(fm(n))a=()=>pe(n.useValue);else if(function bp(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Tn(n.deps||[]));else if(function lv(n){return!(!n||!n.useExisting)}(n))a=()=>Ft(pe(n.useExisting));else{const l=pe(n&&(n.useClass||n.provide));if(!function Tp(n){return!!n.deps}(n))return pi(l)||Zd(l);a=()=>new l(...Tn(n.deps))}return a}function Ou(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function fm(n){return null!==n&&"object"==typeof n&&Te in n}function Wl(n){return"function"==typeof n}let Ga=(()=>{class n{static create(s,a){var l;if(Array.isArray(s))return ef({name:""},a,s,"");{const f=null!==(l=s.name)&&void 0!==l?l:"";return ef({name:f},s.parent,s.providers,f)}}}return n.THROW_IF_NOT_FOUND=$o,n.NULL=new Jh,n.\u0275prov=lt({token:n,providedIn:"any",factory:()=>Ft(Ep)}),n.__NG_ELEMENT_ID__=-1,n})();function Rp(n,r){uo(Hc(n)[1],Tr())}function Jd(n){let r=function rf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(zr(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Qe(903,"");l=r.\u0275dir}if(l){if(s){a.push(l);const y=n;y.inputs=Kl(n.inputs),y.declaredInputs=Kl(n.declaredInputs),y.outputs=Kl(n.outputs);const C=l.hostBindings;C&&pv(n,C);const A=l.viewQuery,U=l.contentQueries;if(A&&Cm(n,A),U&&Op(n,U),Ie(n.inputs,l.inputs),Ie(n.declaredInputs,l.declaredInputs),Ie(n.outputs,l.outputs),zr(l)&&l.data.animation){const H=n.data;H.animation=(H.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let y=0;y<f.length;y++){const C=f[y];C&&C.ngInherit&&C(n),C===Jd&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Pp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=is(l.hostAttrs,s=is(s,l.hostAttrs))}}(a)}function Kl(n){return n===ar?{}:n===Ht?[]:n}function Cm(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Op(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,f)=>{r(a,l,f),s(a,l,f)}:r}function pv(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let sf=null;function ql(){if(!sf){const n=Rn.Symbol;if(n&&n.iterator)sf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(sf=a)}}}return sf}function Xd(n){return!!eh(n)&&(Array.isArray(n)||!(n instanceof Map)&&ql()in n)}function eh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function qo(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function af(n,r,s,a){const l=rt();return qo(l,Ds(),r)&&(Ln(),il(Bn(),l,n,r,s,a)),af}function lf(n,r,s,a,l,f,y,C){const A=rt(),U=Ln(),H=n+20,J=U.firstCreatePass?function Pm(n,r,s,a,l,f,y,C,A){const U=r.consts,H=wl(r,n,4,y||null,sr(U,C));ap(r,s,H,sr(U,A)),uo(r,H);const J=H.tViews=cs(2,H,a,l,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,U);return null!==r.queries&&(r.queries.template(r,H),J.queries=r.queries.embeddedTView(H)),H}(H,U,A,r,s,a,l,f,y):U.data[H];Is(J,!1);const ge=A[11].createComment("");Qc(U,A,ge,J),Js(ge,A),Pu(A,A[H]=zh(ge,A,ge,J)),to(J)&&ip(U,A,J),null!=y&&sp(A,J,C)}function cf(n){return Vn(function Eu(){return Qt.lFrame.contextLView}(),20+n)}function oh(n,r=Lt.Default){const s=rt();return null===s?Ft(n,r):N(Tr(),s,pe(n),r)}function Ai(){throw new Error("invalid")}function jm(n,r,s){const a=rt();return qo(a,Ds(),r)&&function aa(n,r,s,a,l,f,y,C){const A=it(r,s);let H,U=r.inputs;!C&&null!=U&&(H=U[a])?(vp(n,s,H,a,l),ji(r)&&function $h(n,r){const s=Dn(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function em(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=y?y(l,r.value||"",a):l,Jn(f)?f.setProperty(A,a,l):Cs(a)||(A.setProperty?A.setProperty(a,l):A[a]=l))}(Ln(),Bn(),a,n,r,a[11],s,!1),jm}function $m(n,r,s,a,l){const y=l?"class":"style";vp(n,s,r.inputs[y],y,a)}function ah(n,r,s,a){const l=rt(),f=Ln(),y=20+n,C=l[11],A=l[y]=Yc(C,r,function tu(){return Qt.lFrame.currentNamespace}()),U=f.firstCreatePass?function Ps(n,r,s,a,l,f,y){const C=r.consts,U=wl(r,n,2,l,sr(C,f));return ap(r,s,U,sr(C,y)),null!==U.attrs&&Qh(U,U.attrs,!1),null!==U.mergedAttrs&&Qh(U,U.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,U),U}(y,f,l,0,r,s,a):f.data[y];Is(U,!0);const H=U.mergedAttrs;null!==H&&js(C,A,H);const J=U.classes;null!==J&&Ah(C,A,J);const ge=U.styles;return null!==ge&&td(C,A,ge),64!=(64&U.flags)&&Qc(f,l,A,U),0===function oo(){return Qt.lFrame.elementDepthCount}()&&Js(A,l),function ws(){Qt.lFrame.elementDepthCount++}(),to(U)&&(ip(f,l,U),Vh(f,U,l)),null!==a&&sp(l,U),ah}function mf(){let n=Tr();Ta()?Eo():(n=n.parent,Is(n,!1));const r=n;!function Hi(){Qt.lFrame.elementDepthCount--}();const s=Ln();return s.firstCreatePass&&(uo(s,n),eo(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Iu(n){return 0!=(16&n.flags)}(r)&&$m(s,r,rt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function ru(n){return 0!=(32&n.flags)}(r)&&$m(s,r,rt(),r.stylesWithoutHost,!1),mf}function Yp(n,r,s,a){return ah(n,r,s,a),mf(),Yp}function yf(n,r,s){const a=rt(),l=Ln(),f=n+20,y=l.firstCreatePass?function Tv(n,r,s,a,l){const f=r.consts,y=sr(f,a),C=wl(r,n,8,"ng-container",y);return null!==y&&Qh(C,y,!0),ap(r,s,C,sr(f,l)),null!==r.queries&&r.queries.elementStart(r,C),C}(f,l,a,r,s):l.data[f];Is(y,!0);const C=a[f]=a[11].createComment("");return Qc(l,a,C,y),Js(C,a),to(y)&&(ip(l,a,y),Vh(l,y,a)),null!=s&&sp(a,y),yf}function vf(){let n=Tr();const r=Ln();return Ta()?Eo():(n=n.parent,Is(n,!1)),r.firstCreatePass&&(uo(r,n),eo(n)&&r.queries.elementEnd(n)),vf}function Cv(){return rt()}function Qp(n){return!!n&&"function"==typeof n.then}function Gm(n){return!!n&&"function"==typeof n.subscribe}const Jp=Gm;function ku(n,r,s,a){const l=rt(),f=Ln(),y=Tr();return function Xl(n,r,s,a,l,f,y,C){const A=to(a),H=n.firstCreatePass&&Yh(n),J=r[8],ge=Ec(r);let Ne=!0;if(3&a.type||C){const kt=it(a,r),Xt=C?C(kt):kt,ct=ge.length,yn=C?yr=>C(P(yr[a.index])):a.index;if(Jn(s)){let yr=null;if(!C&&A&&(yr=function al(n,r,s,a){const l=n.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const y=l[f];if(y===s&&l[f+1]===a){const C=r[7],A=l[f+2];return C.length>A?C[A]:null}"string"==typeof y&&(f+=2)}return null}(n,r,l,a.index)),null!==yr)(yr.__ngLastListenerFn__||yr).__ngNextListenerFn__=f,yr.__ngLastListenerFn__=f,Ne=!1;else{f=Xp(a,r,J,f,!1);const ni=s.listen(Xt,l,f);ge.push(f,ni),H&&H.push(l,yn,ct,ct+1)}}else f=Xp(a,r,J,f,!0),Xt.addEventListener(l,f,y),ge.push(f),H&&H.push(l,yn,ct,y)}else f=Xp(a,r,J,f,!1);const nt=a.outputs;let wt;if(Ne&&null!==nt&&(wt=nt[l])){const kt=wt.length;if(kt)for(let Xt=0;Xt<kt;Xt+=2){const Fu=r[wt[Xt]][wt[Xt+1]].subscribe(f),mh=ge.length;ge.push(f,Fu),H&&H.push(l,a.index,mh,-(mh+1))}}}(f,l,l[11],y,n,r,!!s,a),ku}function uh(n,r,s,a){try{return!1!==s(a)}catch(l){return cm(n,l),!1}}function Xp(n,r,s,a,l){return function f(y){if(y===Function)return a;const C=2&n.flags?Dn(n.index,r):r;0==(32&r[2])&&qh(C);let A=uh(r,0,a,y),U=f.__ngNextListenerFn__;for(;U;)A=uh(r,0,U,y)&&A,U=U.__ngNextListenerFn__;return l&&!1===A&&(y.preventDefault(),y.returnValue=!1),A}}function zm(n=1){return function Bs(n){return(Qt.lFrame.contextLView=function ma(n,r){for(;n>0;)r=r[15],n--;return r}(n,Qt.lFrame.contextLView))[8]}(n)}function tg(n,r,s,a,l){const f=n[s+1],y=null===r;let C=a?gu(f):nl(f),A=!1;for(;0!==C&&(!1===A||y);){const H=n[C+1];ey(n[C],r)&&(A=!0,n[C+1]=a?sd(H):id(H)),C=a?gu(H):nl(H)}A&&(n[s+1]=a?id(f):sd(f))}function ey(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&po(n,r)>=0}function Mc(n,r){return function Lu(n,r,s,a){const l=rt(),f=Ln(),y=function Gi(n){const r=Qt.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);f.firstUpdatePass&&function sy(n,r,s,a){const l=n.data;if(null===l[s+1]){const f=l[li()],y=function iy(n,r){return r>=n.expandoStartIndex}(n,s);(function og(n,r){return 0!=(n.flags&(r?16:32))})(f,a)&&null===r&&!y&&(r=!1),r=function oy(n,r,s,a){const l=function xr(n){const r=Qt.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let f=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=dh(s=rg(null,n,r,s,a),r.attrs,a),f=null);else{const y=r.directiveStylingLast;if(-1===y||n[y]!==l)if(s=rg(l,n,r,s,a),null===f){let A=function Pv(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==nl(a))return n[gu(a)]}(n,r,a);void 0!==A&&Array.isArray(A)&&(A=rg(null,n,r,A[1],a),A=dh(A,r.attrs,a),function Ov(n,r,s,a){n[gu(s?r.classBindings:r.styleBindings)]=a}(n,r,a,A))}else f=function ay(n,r,s){let a;const l=r.directiveEnd;for(let f=1+r.directiveStylingLast;f<l;f++)a=dh(a,n[f].hostAttrs,s);return dh(a,r.attrs,s)}(n,r,a)}return void 0!==f&&(a?r.residualClasses=f:r.residualStyles=f),s}(l,f,r,a),function Xm(n,r,s,a,l,f){let y=f?r.classBindings:r.styleBindings,C=gu(y),A=nl(y);n[a]=s;let H,U=!1;if(Array.isArray(s)){const J=s;H=J[1],(null===H||po(J,H)>0)&&(U=!0)}else H=s;if(l)if(0!==A){const ge=gu(n[C+1]);n[a+1]=Rh(ge,C),0!==ge&&(n[ge+1]=Ko(n[ge+1],a)),n[C+1]=function Ph(n,r){return 131071&n|r<<17}(n[C+1],a)}else n[a+1]=Rh(C,0),0!==C&&(n[C+1]=Ko(n[C+1],a)),C=a;else n[a+1]=Rh(A,0),0===C?C=a:n[A+1]=Ko(n[A+1],a),A=a;U&&(n[a+1]=id(n[a+1])),tg(n,H,a,!0),tg(n,H,a,!1),function Sc(n,r,s,a,l){const f=l?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof r&&po(f,r)>=0&&(s[a+1]=sd(s[a+1]))}(r,H,n,a,f),y=Rh(C,A),f?r.classBindings=y:r.styleBindings=y}(l,f,r,s,y,a)}}(f,n,y,a),r!==jn&&qo(l,y,r)&&function sg(n,r,s,a,l,f,y,C){if(!(3&r.type))return;const A=n.data,U=A[C+1];xc(function Yf(n){return 1==(1&n)}(U)?Df(A,r,s,l,nl(U),y):void 0)||(xc(f)||function rd(n){return 2==(2&n)}(U)&&(f=Df(A,null,s,l,C,y)),function ed(n,r,s,a,l){const f=Jn(n);if(r)l?f?n.addClass(s,a):s.classList.add(a):f?n.removeClass(s,a):s.classList.remove(a);else{let y=-1===a.indexOf("-")?void 0:We.DashCase;if(null==l)f?n.removeStyle(s,a,y):s.style.removeProperty(a);else{const C="string"==typeof l&&l.endsWith("!important");C&&(l=l.slice(0,-10),y|=We.Important),f?n.setStyle(s,a,l,y):s.style.setProperty(a,l,C?"important":"")}}}(a,y,He(li(),s),l,f))}(f,f.data[li()],l,l[11],n,l[y+1]=function Nv(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ce(Ea(n)))),n}(r,s),a,y)}(n,r,null,!0),Mc}function rg(n,r,s,a,l){let f=null;const y=s.directiveEnd;let C=s.directiveStylingLast;for(-1===C?C=s.directiveStart:C++;C<y&&(f=r[C],a=dh(a,f.hostAttrs,l),f!==n);)C++;return null!==n&&(s.directiveStylingLast=C),a}function dh(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let f=0;f<r.length;f++){const y=r[f];"number"==typeof y?l=y:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),qs(n,y,!!s||r[++f]))}return void 0===n?null:n}function Df(n,r,s,a,l,f){const y=null===r;let C;for(;l>0;){const A=n[l],U=Array.isArray(A),H=U?A[1]:A,J=null===H;let ge=s[l+1];ge===jn&&(ge=J?Ht:void 0);let Ne=J?fl(ge,a):H===a?ge:void 0;if(U&&!xc(Ne)&&(Ne=fl(A,a)),xc(Ne)&&(C=Ne,y))return C;const nt=n[l+1];l=y?gu(nt):nl(nt)}if(null!==r){let A=f?r.residualClasses:r.residualStyles;null!=A&&(C=fl(A,a))}return C}function xc(n){return void 0!==n}function Sl(n,r=""){const s=rt(),a=Ln(),l=n+20,f=a.firstCreatePass?wl(a,l,1,r,null):a.data[l],y=s[l]=function Zc(n,r){return Jn(n)?n.createText(r):n.createTextNode(r)}(s[11],r);Qc(a,s,y,f),Is(f,!1)}function ag(n){return ll("",n,""),ag}function ll(n,r,s){const a=rt(),l=function md(n,r,s,a){return qo(n,Ds(),s)?r+Ge(s)+a:jn}(a,n,r,s);return l!==jn&&sl(a,li(),l),ll}const za=void 0;var ua=["en",[["a","p"],["AM","PM"],za],[["AM","PM"],za,za],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],za,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],za,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",za,"{1} 'at' {0}",za],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function vu(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Rc={};function Pc(n){const r=function Oc(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=wy(r);if(s)return s;const a=r.split("-")[0];if(s=wy(a),s)return s;if("en"===a)return ua;throw new Error(`Missing locale data for the locale "${n}".`)}function Yo(n){return Pc(n)[dn.PluralCase]}function wy(n){return n in Rc||(Rc[n]=Rn.ng&&Rn.ng.common&&Rn.ng.common.locales&&Rn.ng.common.locales[n]),Rc[n]}var dn=(()=>((dn=dn||{})[dn.LocaleId=0]="LocaleId",dn[dn.DayPeriodsFormat=1]="DayPeriodsFormat",dn[dn.DayPeriodsStandalone=2]="DayPeriodsStandalone",dn[dn.DaysFormat=3]="DaysFormat",dn[dn.DaysStandalone=4]="DaysStandalone",dn[dn.MonthsFormat=5]="MonthsFormat",dn[dn.MonthsStandalone=6]="MonthsStandalone",dn[dn.Eras=7]="Eras",dn[dn.FirstDayOfWeek=8]="FirstDayOfWeek",dn[dn.WeekendRange=9]="WeekendRange",dn[dn.DateFormat=10]="DateFormat",dn[dn.TimeFormat=11]="TimeFormat",dn[dn.DateTimeFormat=12]="DateTimeFormat",dn[dn.NumberSymbols=13]="NumberSymbols",dn[dn.NumberFormats=14]="NumberFormats",dn[dn.CurrencyCode=15]="CurrencyCode",dn[dn.CurrencySymbol=16]="CurrencySymbol",dn[dn.CurrencyName=17]="CurrencyName",dn[dn.Currencies=18]="Currencies",dn[dn.Directionality=19]="Directionality",dn[dn.PluralCase=20]="PluralCase",dn[dn.ExtraData=21]="ExtraData",dn))();const Sf="en-US";let vg=Sf;function t_(n,r,s,a,l){if(n=pe(n),Array.isArray(n))for(let f=0;f<n.length;f++)t_(n[f],r,s,a,l);else{const f=Ln(),y=rt();let C=Wl(n)?n:pe(n.provide),A=Ip(n);const U=Tr(),H=1048575&U.providerIndexes,J=U.directiveStart,ge=U.providerIndexes>>20;if(Wl(n)||!n.multi){const Ne=new wo(A,l,oh),nt=r_(C,r,l?H:H+ge,J);-1===nt?(T(os(U,y),f,C),n_(f,n,r.length),r.push(C),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(Ne),y.push(Ne)):(s[nt]=Ne,y[nt]=Ne)}else{const Ne=r_(C,r,H+ge,J),nt=r_(C,r,H,H+ge),wt=Ne>=0&&s[Ne],kt=nt>=0&&s[nt];if(l&&!kt||!l&&!wt){T(os(U,y),f,C);const Xt=function aw(n,r,s,a,l){const f=new wo(n,s,oh);return f.multi=[],f.index=r,f.componentProviders=0,m0(f,l,a&&!s),f}(l?ow:sw,s.length,l,a,A);!l&&kt&&(s[nt].providerFactory=Xt),n_(f,n,r.length,0),r.push(C),U.directiveStart++,U.directiveEnd++,l&&(U.providerIndexes+=1048576),s.push(Xt),y.push(Xt)}else n_(f,n,Ne>-1?Ne:nt,m0(s[l?nt:Ne],A,!l&&a));!l&&a&&kt&&s[nt].componentProviders++}}}function n_(n,r,s,a){const l=Wl(r),f=function Dp(n){return!!n.useClass}(r);if(l||f){const A=(f?pe(r.useClass):r).prototype.ngOnDestroy;if(A){const U=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const H=U.indexOf(s);-1===H?U.push(s,[a,A]):U[H+1].push(a,A)}else U.push(s,A)}}}function m0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function r_(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function sw(n,r,s,a){return i_(this.multi,[])}function ow(n,r,s,a){const l=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=Me(s,s[1],this.providerFactory.index,a);f=C.slice(0,y),i_(l,f);for(let A=y;A<C.length;A++)f.push(C[A])}else f=[],i_(l,f);return f}function i_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function y0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function iw(n,r,s){const a=Ln();if(a.firstCreatePass){const l=zr(n);t_(s,a.data,a.blueprint,l,!0),t_(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class v0{}class cw{resolveComponentFactory(r){throw function lw(n){const r=Error(`No component factory found for ${Ce(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ay=(()=>{class n{}return n.NULL=new cw,n})();function dw(){return Of(Tr(),rt())}function Of(n,r){return new Ig(it(n,r))}let Ig=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=dw,n})();function hw(n){return n instanceof Ig?n.nativeElement:n}class E0{}let fw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function gw(){const n=rt(),s=Dn(Tr().index,n);return function pw(n){return n[11]}(Ar(s)?s:n)}(),n})(),mw=(()=>{class n{}return n.\u0275prov=lt({token:n,providedIn:"root",factory:()=>null}),n})();class w0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const I0=new w0("13.2.7"),s_={};function My(n,r,s,a,l=!1){for(;null!==s;){const f=r[s.index];if(null!==f&&a.push(P(f)),oi(f))for(let C=10;C<f.length;C++){const A=f[C],U=A[1].firstChild;null!==U&&My(A[1],A,U,a)}const y=s.type;if(8&y)My(n,r,s.child,a);else if(32&y){const C=At(s,r);let A;for(;A=C();)a.push(A)}else if(16&y){const C=Ch(r,s);if(Array.isArray(C))a.push(...C);else{const A=gr(r[16]);My(A[1],A,C,a,!0)}}s=l?s.projectionNext:s.next}return a}class bg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return My(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(oi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Ih(r,a),fo(s,a))}this._attachedToViewContainer=!1}Mg(this._lView[1],this._lView)}onDestroy(r){Jg(this._lView[1],this._lView,null,r)}markForCheck(){qh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){mp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function av(n,r,s){Oo(!0);try{mp(n,r,s)}finally{Oo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Qe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $f(n,r){Xc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Qe(902,"");this._appRef=r}}class yw extends bg{constructor(r){super(r),this._view=r}detectChanges(){Zh(this._view)}checkNoChanges(){!function yp(n){Oo(!0);try{Zh(n)}finally{Oo(!1)}}(this._view)}get context(){return null}}class b0 extends Ay{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=cn(r);return new o_(s,this.ngModule)}}function D0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class o_ extends v0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function gc(n){return n.map($l).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return D0(this.componentDef.inputs)}get outputs(){return D0(this.componentDef.outputs)}create(r,s,a,l){const f=(l=l||this.ngModule)?function _w(n,r){return{get:(s,a,l)=>{const f=n.get(s,s_,l);return f!==s_||a===s_?f:r.get(s,a,l)}}}(r,l.injector):r,y=f.get(E0,O),C=f.get(mw,null),A=y.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",H=a?function Qg(n,r,s){if(Jn(n))return n.selectRootElement(r,s===Dt.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(A,a,this.componentDef.encapsulation):Yc(y.createRenderer(null,this.componentDef),U,function vw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(U)),J=this.componentDef.onPush?576:528,ge=function Tm(n,r){return{components:[],scheduler:n||Eh,clean:um,playerHandler:r||null,flags:0}}(),Ne=cs(0,null,null,1,0,null,null,null,null,null),nt=vc(null,Ne,ge,J,null,null,y,A,C,f);let wt,kt;ko(nt);try{const Xt=function Dm(n,r,s,a,l,f){const y=s[1];s[20]=n;const A=wl(y,20,2,"#host",null),U=A.mergedAttrs=r.hostAttrs;null!==U&&(Qh(A,U,!0),null!==n&&(js(l,n,U),null!==A.classes&&Ah(l,n,A.classes),null!==A.styles&&td(l,n,A.styles)));const H=a.createRenderer(n,r),J=vc(s,Bh(r),null,r.onPush?64:16,s[20],A,a,H,f||null,null);return y.firstCreatePass&&(T(os(A,s),y,r.type),dd(y,A),sm(A,s.length,1)),Pu(s,J),s[20]=J}(H,this.componentDef,nt,y,A);if(H)if(a)js(A,H,["ng-version",I0.full]);else{const{attrs:ct,classes:yn}=function Lg(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let f=n[a];if("string"==typeof f)2===l?""!==f&&r.push(f,n[++a]):8===l&&s.push(f);else{if(!oa(l))break;l=f}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);ct&&js(A,H,ct),yn&&yn.length>0&&Ah(A,H,yn.join(" "))}if(kt=sn(Ne,20),void 0!==s){const ct=kt.projection=[];for(let yn=0;yn<this.ngContentSelectors.length;yn++){const yr=s[yn];ct.push(null!=yr?Array.from(yr):null)}}wt=function nf(n,r,s,a,l){const f=s[1],y=function rm(n,r,s){const a=Tr();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),om(n,a,r,_c(n,r,1,null),s));const l=Me(r,n,a.directiveStart,a);Js(l,r);const f=it(a,r);return f&&Js(f,r),l}(f,s,r);if(a.components.push(y),n[8]=y,l&&l.forEach(A=>A(y,r)),r.contentQueries){const A=Tr();r.contentQueries(1,y,A.directiveStart)}const C=Tr();return!f.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(ao(C.index),up(s[1],C,0,C.directiveStart,C.directiveEnd,r),lp(r,y)),y}(Xt,this.componentDef,nt,ge,[Rp]),ld(Ne,nt,null)}finally{zi()}return new ww(this.componentType,wt,Of(kt,nt),nt,kt)}}class ww extends class uw{}{constructor(r,s,a,l,f){super(),this.location=a,this._rootLView=l,this._tNode=f,this.instance=s,this.hostView=this.changeDetectorRef=new yw(l),this.componentType=r}get injector(){return new kn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Nf{}class T0{}const kf=new Map;class A0 extends Nf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new b0(this);const a=Pn(r);this._bootstrapComponents=p(a.bootstrap),this._r3Injector=Ic(r,s,[{provide:Nf,useValue:this},{provide:Ay,useValue:this.componentFactoryResolver}],Ce(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=Ga.THROW_IF_NOT_FOUND,a=Lt.Default){return r===Ga||r===Nf||r===Ep?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class a_ extends T0{constructor(r){super(),this.moduleType=r,null!==Pn(r)&&function bw(n){const r=new Set;!function s(a){const l=Pn(a,!0),f=l.id;null!==f&&(function C0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${Ce(r)} vs ${Ce(r.name)}`)}(f,kf.get(f),a),kf.set(f,a));const y=p(l.imports);for(const C of y)r.has(C)||(r.add(C),s(C))}(n)}(r)}create(r){return new A0(this.moduleType,r)}}function M0(n,r,s,a,l,f){const y=r+s;return qo(n,y,l)?function ol(n,r,s){return n[r]=s}(n,y+1,f?a.call(f,l):a(l)):function Dg(n,r){const s=n[r];return s===jn?void 0:s}(n,y+1)}function N0(n,r){const s=Ln();let a;const l=n+20;s.firstCreatePass?(a=function Nw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(l,a.onDestroy)):a=s.data[l];const f=a.factory||(a.factory=pi(a.type)),y=xn(oh);try{const C=Gs(!1),A=f();return Gs(C),function Om(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,rt(),l,A),A}finally{xn(y)}}function k0(n,r,s){const a=n+20,l=rt(),f=Vn(l,a);return function Tg(n,r){return n[1].data[r].pure}(l,a)?M0(l,function ki(){const n=Qt.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}(),r,f.transform,s,f):f.transform(s)}function u_(n){return r=>{setTimeout(n,void 0,r)}}const tc=class Vw extends b.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var l,f,y;let C=r,A=s||(()=>null),U=a;if(r&&"object"==typeof r){const J=r;C=null===(l=J.next)||void 0===l?void 0:l.bind(J),A=null===(f=J.error)||void 0===f?void 0:f.bind(J),U=null===(y=J.complete)||void 0===y?void 0:y.bind(J)}this.__isAsync&&(A=u_(A),C&&(C=u_(C)),U&&(U=u_(U)));const H=super.subscribe({next:C,error:A,complete:U});return r instanceof L.w0&&r.add(H),H}};function Bw(){return this._results[ql()]()}class l_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=ql(),a=l_.prototype;a[s]||(a[s]=Bw)}get changes(){return this._changes||(this._changes=new tc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=Kn(r);(this._changesDetected=!function Bo(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],f=r[a];if(s&&(l=s(l),f=s(f)),f!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Cg=(()=>{class n{}return n.__NG_ELEMENT_ID__=Hw,n})();const jw=Cg,$w=class extends jw{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=vc(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(a[19]=f.createEmbeddedView(s)),ld(s,a,r),new bg(a)}};function Hw(){return xy(Tr(),rt())}function xy(n,r){return 4&n.type?new $w(r,n,Of(n,r)):null}let Ry=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gw,n})();function Gw(){return U0(Tr(),rt())}const zw=Ry,L0=class extends zw{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Of(this._hostTNode,this._hostLView)}get injector(){return new kn(this._hostTNode,this._hostLView)}get parentInjector(){const r=Zi(this._hostTNode,this._hostLView);if(Pa(r)){const s=$s(r,this._hostLView),a=Er(r);return new kn(s[1].data[a+8],s)}return new kn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=F0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const l=r.createEmbeddedView(s||{});return this.insert(l,a),l}createComponent(r,s,a,l,f){const y=r&&!function jr(n){return"function"==typeof n}(r);let C;if(y)C=s;else{const J=s||{};C=J.index,a=J.injector,l=J.projectableNodes,f=J.ngModuleRef}const A=y?r:new o_(cn(r)),U=a||this.parentInjector;if(!f&&null==A.ngModule){const ge=(y?U:this.parentInjector).get(Nf,null);ge&&(f=ge)}const H=A.create(U,l,void 0,f);return this.insert(H.hostView,C),H}insert(r,s){const a=r._lView,l=a[1];if(function Xn(n){return oi(n[3])}(a)){const H=this.indexOf(r);if(-1!==H)this.detach(H);else{const J=a[3],ge=new L0(J,J[6],J[3]);ge.detach(ge.indexOf(r))}}const f=this._adjustIndex(s),y=this._lContainer;!function Uy(n,r,s,a){const l=10+a,f=s.length;a>0&&(s[l-1][4]=r),a<f-10?(r[4]=s[l],ju(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const y=r[17];null!==y&&s!==y&&function Vy(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(y,r);const C=r[19];null!==C&&C.insertView(n),r[2]|=128}(l,a,y,f);const C=tl(f,y),A=a[11],U=el(A,y[7]);return null!==U&&function Ld(n,r,s,a,l,f){a[0]=l,a[6]=r,Xc(n,a,s,1,l,f)}(l,y[6],A,a,U,C),r.attachToViewContainerRef(),ju(c_(y),f,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=F0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Ih(this._lContainer,s);a&&(fo(c_(this._lContainer),s),Mg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Ih(this._lContainer,s);return a&&null!=fo(c_(this._lContainer),s)?new bg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function F0(n){return n[8]}function c_(n){return n[8]||(n[8]=[])}function U0(n,r){let s;const a=r[n.index];if(oi(a))s=a;else{let l;if(8&n.type)l=P(a);else{const f=r[11];l=f.createComment("");const y=it(n,r);Xu(f,el(f,y),l,function jy(n,r){return Jn(n)?n.nextSibling(r):r.nextSibling}(f,y),!1)}r[n.index]=s=zh(a,r,l,n),Pu(r,s)}return new L0(s,n,r)}class d_{constructor(r){this.queryList=r,this.matches=null}clone(){return new d_(this.queryList)}setDirty(){this.queryList.setDirty()}}class h_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let f=0;f<a;f++){const y=s.getByIndex(f);l.push(this.queries[y.indexInDeclarationView].clone())}return new h_(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==W0(r,s).matches&&this.queries[s].setDirty()}}class V0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class f_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,f=this.getByIndex(a).embeddedTView(r,l);f&&(f.indexInDeclarationView=a,null!==s?s.push(f):s=[f])}return null!==s?new f_(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class p_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new p_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const f=a[l];this.matchTNodeWithReadOption(r,s,qw(s,f)),this.matchTNodeWithReadOption(r,s,X(s,r,f,!1,!1))}else a===Cg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,X(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Ig||l===Ry||l===Cg&&4&s.type)this.addMatch(s.index,-2);else{const f=X(s,r,l,!1,!1);null!==f&&this.addMatch(s.index,f)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function qw(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function Yw(n,r,s,a){return-1===s?function Zw(n,r){return 11&n.type?Of(n,r):4&n.type?xy(n,r):null}(r,n):-2===s?function Qw(n,r,s){return s===Ig?Of(r,n):s===Cg?xy(r,n):s===Ry?U0(r,n):void 0}(n,r,a):Me(n,n[1],s,r)}function B0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const f=n.data,y=s.matches,C=[];for(let A=0;A<y.length;A+=2){const U=y[A];C.push(U<0?null:Yw(r,f[U],y[A+1],s.metadata.read))}l.matches=C}return l.matches}function g_(n,r,s,a){const l=n.queries.getByIndex(s),f=l.matches;if(null!==f){const y=B0(n,r,l,s);for(let C=0;C<f.length;C+=2){const A=f[C];if(A>0)a.push(y[C/2]);else{const U=f[C+1],H=r[-A];for(let J=10;J<H.length;J++){const ge=H[J];ge[17]===ge[3]&&g_(ge[1],ge,U,a)}if(null!==H[9]){const J=H[9];for(let ge=0;ge<J.length;ge++){const Ne=J[ge];g_(Ne[1],Ne,U,a)}}}}}return a}function j0(n){const r=rt(),s=Ln(),a=ga();Uu(a+1);const l=W0(s,a);if(n.dirty&&Nn(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const f=l.crossesNgTemplate?g_(s,r,a,[]):B0(s,r,l,a);n.reset(f,hw),n.notifyOnChanges()}return!0}return!1}function $0(n,r,s,a){const l=Ln();if(l.firstCreatePass){const f=Tr();(function z0(n,r,s){null===n.queries&&(n.queries=new f_),n.queries.track(new p_(r,s))})(l,new V0(r,s,a),f.index),function eI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function G0(n,r,s){const a=new l_(4==(4&s));Jg(n,r,a,a.destroy),null===r[19]&&(r[19]=new h_),r[19].queries.push(new d_(a))}(l,rt(),s)}function H0(){return function Xw(n,r){return n[19].queries[r].queryList}(rt(),ga())}function W0(n,r){return n.queries.getByIndex(r)}function Ny(...n){}const lE=new ci("Application Initializer");let w_=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Ny,this.reject=Ny,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(Qp(f))s.push(f);else if(Jp(f)){const y=new Promise((C,A)=>{f.subscribe({complete:C,error:A})});s.push(y)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Ft(lE,8))},n.\u0275prov=lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cE=new ci("AppId",{providedIn:"root",factory:function dE(){return`${I_()}${I_()}${I_()}`}});function I_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hE=new ci("Platform Initializer"),fE=new ci("Platform ID"),pE=new ci("appBootstrapListener");let gE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})();const b_=new ci("LocaleId",{providedIn:"root",factory:()=>Gn(b_,Lt.Optional|Lt.SkipSelf)||function vI(){return"undefined"!=typeof $localize&&$localize.locale||Sf}()}),_I=new ci("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class EI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let wI=(()=>{class n{compileModuleSync(s){return new a_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),f=p(Pn(s).declarations).reduce((y,C)=>{const A=cn(C);return A&&y.push(new o_(A)),y},[]);return new EI(a,f)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bI=(()=>Promise.resolve(0))();function D_(n){"undefined"==typeof Zone?bI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Al{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tc(!1),this.onMicrotaskEmpty=new tc(!1),this.onStable=new tc(!1),this.onError=new tc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function DI(){let n=Rn.requestAnimationFrame,r=Rn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function SI(n){const r=()=>{!function CI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Rn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,C_(n),n.isCheckStableRunning=!0,T_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),C_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,f,y,C)=>{try{return mE(n),s.invokeTask(l,f,y,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&r(),yE(n)}},onInvoke:(s,a,l,f,y,C,A)=>{try{return mE(n),s.invoke(l,f,y,C,A)}finally{n.shouldCoalesceRunChangeDetection&&r(),yE(n)}},onHasTask:(s,a,l,f)=>{s.hasTask(l,f),a===l&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,C_(n),T_(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(s,a,l,f)=>(s.handleError(l,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Al.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Al.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+l,r,TI,Ny,Ny);try{return f.runTask(y,s,a)}finally{f.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const TI={};function T_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function C_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function mE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function yE(n){n._nesting--,T_(n)}class AI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tc,this.onMicrotaskEmpty=new tc,this.onStable=new tc,this.onError=new tc}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}let vE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Al.assertNotInAngularZone(),D_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())D_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:f,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(Ft(Al))},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})(),_E=(()=>{class n{constructor(){this._applications=new Map,S_.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return S_.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})();class MI{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function xI(n){S_=n}let Ml,S_=new MI;const EE=new ci("AllowMultipleToken");class OI{constructor(r,s){this.name=r,this.token=s}}function wE(n,r,s=[]){const a=`Platform: ${r}`,l=new ci(a);return(f=[])=>{let y=IE();if(!y||y.injector.get(EE,!1))if(n)n(s.concat(f).concat({provide:l,useValue:!0}));else{const C=s.concat(f).concat({provide:l,useValue:!0},{provide:wp,useValue:"platform"});!function NI(n){if(Ml&&!Ml.destroyed&&!Ml.injector.get(EE,!1))throw new Qe(400,"");Ml=n.get(bE);const r=n.get(hE,null);r&&r.forEach(s=>s())}(Ga.create({providers:C,name:a}))}return function kI(n){const r=IE();if(!r)throw new Qe(401,"");return r}()}}function IE(){return Ml&&!Ml.destroyed?Ml:null}let bE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const C=function LI(n,r){let s;return s="noop"===n?new AI:("zone.js"===n?void 0:n)||new Al({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),A=[{provide:Al,useValue:C}];return C.run(()=>{const U=Ga.create({providers:A,parent:this.injector,name:s.moduleType.name}),H=s.create(U),J=H.injector.get(Rs,null);if(!J)throw new Qe(402,"");return C.runOutsideAngular(()=>{const ge=C.onError.subscribe({next:Ne=>{J.handleError(Ne)}});H.onDestroy(()=>{M_(this._modules,H),ge.unsubscribe()})}),function FI(n,r,s){try{const a=s();return Qp(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(J,C,()=>{const ge=H.injector.get(w_);return ge.runInitializers(),ge.donePromise.then(()=>(function qv(n){tt(n,"Expected localeId to be defined"),"string"==typeof n&&(vg=n.toLowerCase().replace(/_/g,"-"))}(H.injector.get(b_,Sf)||Sf),this._moduleDoBootstrap(H),H))})})}bootstrapModule(s,a=[]){const l=DE({},a);return function RI(n,r,s){const a=new a_(s);return Promise.resolve(a)}(0,0,s).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(s){const a=s.injector.get(A_);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Qe(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Qe(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Ft(Ga))},n.\u0275prov=lt({token:n,factory:n.\u0275fac}),n})();function DE(n,r){return Array.isArray(r)?r.reduce(DE,n):Object.assign(Object.assign({},n),r)}let A_=(()=>{class n{constructor(s,a,l,f,y){this._zone=s,this._injector=a,this._exceptionHandler=l,this._componentFactoryResolver=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new q.y(U=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{U.next(this._stable),U.complete()})}),A=new q.y(U=>{let H;this._zone.runOutsideAngular(()=>{H=this._zone.onStable.subscribe(()=>{Al.assertNotInAngularZone(),D_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,U.next(!0))})})});const J=this._zone.onUnstable.subscribe(()=>{Al.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{U.next(!1)}))});return()=>{H.unsubscribe(),J.unsubscribe()}});this.isStable=(0,Ee.T)(C,A.pipe((0,he.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new Qe(405,"");let l;l=s instanceof v0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(l.componentType);const f=function PI(n){return n.isBoundToModule}(l)?void 0:this._injector.get(Nf),C=l.create(Ga.NULL,[],a||l.selector,f),A=C.location.nativeElement,U=C.injector.get(vE,null),H=U&&C.injector.get(_E);return U&&H&&H.registerApplication(A,U),C.onDestroy(()=>{this.detachView(C.hostView),M_(this.components,C),H&&H.unregisterApplication(A)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Qe(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;M_(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(pE,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(Ft(Al),Ft(Ga),Ft(Rs),Ft(Ay),Ft(w_))},n.\u0275prov=lt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function M_(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let CE=!0,SE=!1;function VI(){return SE=!0,CE}function BI(){if(SE)throw new Error("Cannot enable prod mode after platform setup.");CE=!1}let jI=(()=>{class n{}return n.__NG_ELEMENT_ID__=$I,n})();function $I(n){return function HI(n,r,s){if(ji(n)&&!s){const a=Dn(n.index,r);return new bg(a,a)}return 47&n.type?new bg(r[16],r):null}(Tr(),rt(),16==(16&n))}class RE{constructor(){}supports(r){return Xd(r)}create(r){return new ZI(r)}}const qI=(n,r)=>r;class ZI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||qI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,f=null;for(;s||a;){const y=!a||s&&s.currentIndex<OE(a,l,f)?s:a,C=OE(y,l,f),A=y.currentIndex;if(y===a)l--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)l++;else{f||(f=[]);const U=C-l,H=A-l;if(U!=H){for(let ge=0;ge<U;ge++){const Ne=ge<f.length?f[ge]:f[ge]=0,nt=Ne+ge;H<=nt&&nt<U&&(f[ge]=Ne+1)}f[y.previousIndex]=H-U}}C!==A&&r(y,C,A)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Xd(r))throw new Qe(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,f,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)f=r[C],y=this._trackByFn(C,f),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,f,y,C)),Object.is(s.item,f)||this._addIdentityChange(s,f)):(s=this._mismatch(s,f,y,C),a=!0),s=s._next}else l=0,function mv(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[ql()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,C=>{y=this._trackByFn(l,C),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,C,y,l)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,y,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,f,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,f,l)):r=this._addAfter(new YI(s,a),f,l),r}_verifyReinsertion(r,s,a,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?r=this._reinsertAfter(f,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,f=r._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new PE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new PE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class YI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class PE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new QI,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function OE(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class NE{constructor(){}supports(r){return r instanceof Map||eh(r)}create(){return new JI}}class JI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||eh(r)))throw new Qe(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const f=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,f)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const f=l._prev,y=l._next;return f&&(f._next=y),y&&(y._prev=f),l._next=null,l._prev=null,l}const a=new XI(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class XI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kE(){return new N_([new RE])}let N_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||kE()),deps:[[n,new Ao,new So]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Qe(901,"")}}return n.\u0275prov=lt({token:n,providedIn:"root",factory:kE}),n})();function LE(){return new k_([new NE])}let k_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||LE()),deps:[[n,new Ao,new So]]}}find(s){const a=this.factories.find(f=>f.supports(s));if(a)return a;throw new Qe(901,"")}}return n.\u0275prov=lt({token:n,providedIn:"root",factory:LE}),n})();const nb=wE(null,"core",[{provide:fE,useValue:"unknown"},{provide:bE,deps:[Ga]},{provide:_E,deps:[]},{provide:gE,deps:[]}]);let rb=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Ft(A_))},n.\u0275mod=xe({type:n}),n.\u0275inj=Ot({}),n})()},4473:(Mt,Ue,B)=>{B.d(Ue,{F0:()=>Ii,Bz:()=>Er,lC:()=>so});var b=B(5e3),L=B(7579);class q extends L.x{constructor(w){super(),this._value=w}get value(){return this.getValue()}_subscribe(w){const E=super._subscribe(w);return!E.closed&&w.next(this._value),E}getValue(){const{hasError:w,thrownError:E,_value:R}=this;if(w)throw E;return this._throwIfClosed(),R}next(w){super.next(this._value=w)}}var Ee=B(9751),he=B(4742),De=B(8996),Ie=B(4671),Ce=B(3268),Se=B(7669),ae=B(1810),oe=B(5403),pe=B(9672);function Qe(T,w,E){T?(0,pe.f)(E,T,w):w()}var vt=B(576);function Ge(T,w){const E=(0,vt.m)(T)?T:()=>T,R=N=>N.error(E());return new Ee.y(w?N=>w.schedule(R,0,N):R)}var Ke=B(727),_t=B(4482);function xt(){return(0,_t.e)((T,w)=>{let E=null;T._refCount++;const R=(0,oe.x)(w,void 0,void 0,void 0,()=>{if(!T||T._refCount<=0||0<--T._refCount)return void(E=null);const N=T._connection,j=E;E=null,N&&(!j||N===j)&&N.unsubscribe(),w.unsubscribe()});T.subscribe(R),R.closed||(E=T.connect())})}class et extends Ee.y{constructor(w,E){super(),this.source=w,this.subjectFactory=E,this._subject=null,this._refCount=0,this._connection=null,(0,_t.A)(w)&&(this.lift=w.lift)}_subscribe(w){return this.getSubject().subscribe(w)}getSubject(){const w=this._subject;return(!w||w.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:w}=this;this._subject=this._connection=null,null==w||w.unsubscribe()}connect(){let w=this._connection;if(!w){w=this._connection=new Ke.w0;const E=this.getSubject();w.add(this.source.subscribe((0,oe.x)(E,void 0,()=>{this._teardown(),E.complete()},R=>{this._teardown(),E.error(R)},()=>this._teardown()))),w.closed&&(this._connection=null,w=Ke.w0.EMPTY)}return w}refCount(){return xt()(this)}}var Re=B(9646),ue=B(6805),gt=B(7272),mt=B(9770),Pe=B(515),fe=B(8421);function ke(T){return(0,_t.e)((w,E)=>{let j,R=null,N=!1;R=w.subscribe((0,oe.x)(E,void 0,void 0,re=>{j=(0,fe.Xf)(T(re,ke(T)(w))),R?(R.unsubscribe(),R=null,j.subscribe(E)):N=!0})),N&&(R.unsubscribe(),R=null,j.subscribe(E))})}var Oe=B(9300);function le(T){return T<=0?()=>Pe.E:(0,_t.e)((w,E)=>{let R=[];w.subscribe((0,oe.x)(E,N=>{R.push(N),T<R.length&&R.shift()},()=>{for(const N of R)E.next(N);E.complete()},void 0,()=>{R=null}))})}var Je=B(8068),be=B(6590),Ve=B(4004),tt=B(3900),te=B(5698),$e=B(8675),ot=B(5026),Rt=B(4351),lt=B(590),In=B(5577),Ot=B(8505),qt=B(8189),Mn=B(9808);class $n{constructor(w,E){this.id=w,this.url=E}}class Ir extends $n{constructor(w,E,R="imperative",N=null){super(w,E),this.navigationTrigger=R,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ir extends $n{constructor(w,E,R){super(w,E),this.urlAfterRedirects=R}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ri extends $n{constructor(w,E,R){super(w,E),this.reason=R}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pr extends $n{constructor(w,E,R){super(w,E),this.error=R}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hn extends $n{constructor(w,E,R,N){super(w,E),this.urlAfterRedirects=R,this.state=N}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class br extends $n{constructor(w,E,R,N){super(w,E),this.urlAfterRedirects=R,this.state=N}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lt extends $n{constructor(w,E,R,N,j){super(w,E),this.urlAfterRedirects=R,this.state=N,this.shouldActivate=j}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zn extends $n{constructor(w,E,R,N){super(w,E),this.urlAfterRedirects=R,this.state=N}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Or extends $n{constructor(w,E,R,N){super(w,E),this.urlAfterRedirects=R,this.state=N}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xn{constructor(w){this.route=w}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ii{constructor(w){this.route=w}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fs{constructor(w){this.snapshot=w}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class or{constructor(w){this.snapshot=w}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $r{constructor(w){this.snapshot=w}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ui{constructor(w){this.snapshot=w}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class si{constructor(w,E,R){this.routerEvent=w,this.position=E,this.anchor=R}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Dt="primary";class Bt{constructor(w){this.params=w||{}}has(w){return Object.prototype.hasOwnProperty.call(this.params,w)}get(w){if(this.has(w)){const E=this.params[w];return Array.isArray(E)?E[0]:E}return null}getAll(w){if(this.has(w)){const E=this.params[w];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function zt(T){return new Bt(T)}const dr="ngNavigationCancelingError";function Qr(T){const w=Error("NavigationCancelingError: "+T);return w[dr]=!0,w}function Ji(T,w,E){const R=E.path.split("/");if(R.length>T.length||"full"===E.pathMatch&&(w.hasChildren()||R.length<T.length))return null;const N={};for(let j=0;j<R.length;j++){const re=R[j],Q=T[j];if(re.startsWith(":"))N[re.substring(1)]=Q;else if(re!==Q.path)return null}return{consumed:T.slice(0,R.length),posParams:N}}function ar(T,w){const E=T?Object.keys(T):void 0,R=w?Object.keys(w):void 0;if(!E||!R||E.length!=R.length)return!1;let N;for(let j=0;j<E.length;j++)if(N=E[j],!Ht(T[N],w[N]))return!1;return!0}function Ht(T,w){if(Array.isArray(T)&&Array.isArray(w)){if(T.length!==w.length)return!1;const E=[...T].sort(),R=[...w].sort();return E.every((N,j)=>R[j]===N)}return T===w}function Vr(T){return Array.prototype.concat.apply([],T)}function vn(T){return T.length>0?T[T.length-1]:null}function Ze(T,w){for(const E in T)T.hasOwnProperty(E)&&w(T[E],E)}function Ct(T){return(0,b.CqO)(T)?T:(0,b.QGY)(T)?(0,De.D)(Promise.resolve(T)):(0,Re.of)(T)}const bn={exact:function ve(T,w,E){if(!nn(T.segments,w.segments)||!Yt(T.segments,w.segments,E)||T.numberOfChildren!==w.numberOfChildren)return!1;for(const R in w.children)if(!T.children[R]||!ve(T.children[R],w.children[R],E))return!1;return!0},subset:xe},_n={exact:function ee(T,w){return ar(T,w)},subset:function ze(T,w){return Object.keys(w).length<=Object.keys(T).length&&Object.keys(w).every(E=>Ht(T[E],w[E]))},ignored:()=>!0};function de(T,w,E){return bn[E.paths](T.root,w.root,E.matrixParams)&&_n[E.queryParams](T.queryParams,w.queryParams)&&!("exact"===E.fragment&&T.fragment!==w.fragment)}function xe(T,w,E){return yt(T,w,w.segments,E)}function yt(T,w,E,R){if(T.segments.length>E.length){const N=T.segments.slice(0,E.length);return!(!nn(N,E)||w.hasChildren()||!Yt(N,E,R))}if(T.segments.length===E.length){if(!nn(T.segments,E)||!Yt(T.segments,E,R))return!1;for(const N in w.children)if(!T.children[N]||!xe(T.children[N],w.children[N],R))return!1;return!0}{const N=E.slice(0,T.segments.length),j=E.slice(T.segments.length);return!!(nn(T.segments,N)&&Yt(T.segments,N,R)&&T.children[Dt])&&yt(T.children[Dt],w,j,R)}}function Yt(T,w,E){return w.every((R,N)=>_n[E](T[N].parameters,R.parameters))}class gn{constructor(w,E,R){this.root=w,this.queryParams=E,this.fragment=R}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zt(this.queryParams)),this._queryParamMap}toString(){return Qo.serialize(this)}}class Gt{constructor(w,E){this.segments=w,this.children=E,this.parent=null,Ze(E,(R,N)=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fi(this)}}class cn{constructor(w,E){this.path=w,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=zt(this.parameters)),this._parameterMap}toString(){return On(this)}}function nn(T,w){return T.length===w.length&&T.every((E,R)=>E.path===w[R].path)}class Nr{}class Xi{parse(w){const E=new ms(w);return new gn(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(w){const E=`/${Hr(w.root,!0)}`,R=function vr(T){const w=Object.keys(T).map(E=>{const R=T[E];return Array.isArray(R)?R.map(N=>`${Vi(E)}=${Vi(N)}`).join("&"):`${Vi(E)}=${Vi(R)}`}).filter(E=>!!E);return w.length?`?${w.join("&")}`:""}(w.queryParams);return`${E}${R}${"string"==typeof w.fragment?`#${function Ri(T){return encodeURI(T)}(w.fragment)}`:""}`}}const Qo=new Xi;function fi(T){return T.segments.map(w=>On(w)).join("/")}function Hr(T,w){if(!T.hasChildren())return fi(T);if(w){const E=T.children[Dt]?Hr(T.children[Dt],!1):"",R=[];return Ze(T.children,(N,j)=>{j!==Dt&&R.push(`${j}:${Hr(N,!1)}`)}),R.length>0?`${E}(${R.join("//")})`:E}{const E=function Pn(T,w){let E=[];return Ze(T.children,(R,N)=>{N===Dt&&(E=E.concat(w(R,N)))}),Ze(T.children,(R,N)=>{N!==Dt&&(E=E.concat(w(R,N)))}),E}(T,(R,N)=>N===Dt?[Hr(T.children[Dt],!1)]:[`${N}:${Hr(R,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[Dt]?`${fi(T)}/${E[0]}`:`${fi(T)}/(${E.join("//")})`}}function Dr(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vi(T){return Dr(T).replace(/%3B/gi,";")}function ht(T){return Dr(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hn(T){return decodeURIComponent(T)}function Zn(T){return hn(T.replace(/\+/g,"%20"))}function On(T){return`${ht(T.path)}${function ur(T){return Object.keys(T).map(w=>`;${ht(w)}=${ht(T[w])}`).join("")}(T.parameters)}`}const Mi=/^[^\/()?;=#]+/;function Yn(T){const w=T.match(Mi);return w?w[0]:""}const Sr=/^[^=?&#]+/,En=/^[^&#]+/;class ms{constructor(w){this.url=w,this.remaining=w}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const w={};if(this.consumeOptional("?"))do{this.parseQueryParam(w)}while(this.consumeOptional("&"));return w}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const w=[];for(this.peekStartsWith("(")||w.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),w.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(w.length>0||Object.keys(E).length>0)&&(R[Dt]=new Gt(w,E)),R}parseSegment(){const w=Yn(this.remaining);if(""===w&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(w),new cn(hn(w),this.parseMatrixParams())}parseMatrixParams(){const w={};for(;this.consumeOptional(";");)this.parseParam(w);return w}parseParam(w){const E=Yn(this.remaining);if(!E)return;this.capture(E);let R="";if(this.consumeOptional("=")){const N=Yn(this.remaining);N&&(R=N,this.capture(R))}w[hn(E)]=hn(R)}parseQueryParam(w){const E=function ps(T){const w=T.match(Sr);return w?w[0]:""}(this.remaining);if(!E)return;this.capture(E);let R="";if(this.consumeOptional("=")){const re=function gs(T){const w=T.match(En);return w?w[0]:""}(this.remaining);re&&(R=re,this.capture(R))}const N=Zn(E),j=Zn(R);if(w.hasOwnProperty(N)){let re=w[N];Array.isArray(re)||(re=[re],w[N]=re),re.push(j)}else w[N]=j}parseParens(w){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=Yn(this.remaining),N=this.remaining[R.length];if("/"!==N&&")"!==N&&";"!==N)throw new Error(`Cannot parse url '${this.url}'`);let j;R.indexOf(":")>-1?(j=R.substr(0,R.indexOf(":")),this.capture(j),this.capture(":")):w&&(j=Dt);const re=this.parseChildren();E[j]=1===Object.keys(re).length?re[Dt]:new Gt([],re),this.consumeOptional("//")}return E}peekStartsWith(w){return this.remaining.startsWith(w)}consumeOptional(w){return!!this.peekStartsWith(w)&&(this.remaining=this.remaining.substring(w.length),!0)}capture(w){if(!this.consumeOptional(w))throw new Error(`Expected "${w}".`)}}class ys{constructor(w){this._root=w}get root(){return this._root.value}parent(w){const E=this.pathFromRoot(w);return E.length>1?E[E.length-2]:null}children(w){const E=Pi(w,this._root);return E?E.children.map(R=>R.value):[]}firstChild(w){const E=Pi(w,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(w){const E=kr(w,this._root);return E.length<2?[]:E[E.length-2].children.map(N=>N.value).filter(N=>N!==w)}pathFromRoot(w){return kr(w,this._root).map(E=>E.value)}}function Pi(T,w){if(T===w.value)return w;for(const E of w.children){const R=Pi(T,E);if(R)return R}return null}function kr(T,w){if(T===w.value)return[w];for(const E of w.children){const R=kr(T,E);if(R.length)return R.unshift(w),R}return[]}class Lr{constructor(w,E){this.value=w,this.children=E}toString(){return`TreeNode(${this.value})`}}function Xr(T){const w={};return T&&T.children.forEach(E=>w[E.value.outlet]=E),w}class Gr extends ys{constructor(w,E){super(w),this.snapshot=E,to(this,w)}toString(){return this.snapshot.toString()}}function Wn(T,w){const E=function es(T,w){const re=new eo([],{},{},"",{},Dt,w,null,T.root,-1,{});return new ji("",new Lr(re,[]))}(T,w),R=new q([new cn("",{})]),N=new q({}),j=new q({}),re=new q({}),Q=new q(""),X=new Bi(R,N,re,Q,j,Dt,w,E.root);return X.snapshot=E.root,new Gr(new Lr(X,[]),E)}class Bi{constructor(w,E,R,N,j,re,Q,X){this.url=w,this.params=E,this.queryParams=R,this.fragment=N,this.data=j,this.outlet=re,this.component=Q,this._futureSnapshot=X}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ve.U)(w=>zt(w)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ve.U)(w=>zt(w)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ar(T,w="emptyOnly"){const E=T.pathFromRoot;let R=0;if("always"!==w)for(R=E.length-1;R>=1;){const N=E[R],j=E[R-1];if(N.routeConfig&&""===N.routeConfig.path)R--;else{if(j.component)break;R--}}return function oi(T){return T.reduce((w,E)=>({params:Object.assign(Object.assign({},w.params),E.params),data:Object.assign(Object.assign({},w.data),E.data),resolve:Object.assign(Object.assign({},w.resolve),E._resolvedData)}),{params:{},data:{},resolve:{}})}(E.slice(R))}class eo{constructor(w,E,R,N,j,re,Q,X,Me,Jt,jt){this.url=w,this.params=E,this.queryParams=R,this.fragment=N,this.data=j,this.outlet=re,this.component=Q,this.routeConfig=X,this._urlSegment=Me,this._lastPathIndex=Jt,this._resolve=jt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ji extends ys{constructor(w,E){super(E),this.url=w,to(this,E)}toString(){return zr(this._root)}}function to(T,w){w.value._routerState=T,w.children.forEach(E=>to(T,E))}function zr(T){const w=T.children.length>0?` { ${T.children.map(zr).join(", ")} } `:"";return`${T.value}${w}`}function Ro(T){if(T.snapshot){const w=T.snapshot,E=T._futureSnapshot;T.snapshot=E,ar(w.queryParams,E.queryParams)||T.queryParams.next(E.queryParams),w.fragment!==E.fragment&&T.fragment.next(E.fragment),ar(w.params,E.params)||T.params.next(E.params),function Jr(T,w){if(T.length!==w.length)return!1;for(let E=0;E<T.length;++E)if(!ar(T[E],w[E]))return!1;return!0}(w.url,E.url)||T.url.next(E.url),ar(w.data,E.data)||T.data.next(E.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function $i(T,w){const E=ar(T.params,w.params)&&function hr(T,w){return nn(T,w)&&T.every((E,R)=>ar(E.parameters,w[R].parameters))}(T.url,w.url);return E&&!(!T.parent!=!w.parent)&&(!T.parent||$i(T.parent,w.parent))}function _r(T,w,E){if(E&&T.shouldReuseRoute(w.value,E.value.snapshot)){const R=E.value;R._futureSnapshot=w.value;const N=function ba(T,w,E){return w.children.map(R=>{for(const N of E.children)if(T.shouldReuseRoute(R.value,N.value.snapshot))return _r(T,R,N);return _r(T,R)})}(T,w,E);return new Lr(R,N)}{if(T.shouldAttach(w.value)){const j=T.retrieve(w.value);if(null!==j){const re=j.route;return re.value._futureSnapshot=w.value,re.children=w.children.map(Q=>_r(T,Q)),re}}const R=function no(T){return new Bi(new q(T.url),new q(T.params),new q(T.queryParams),new q(T.fragment),new q(T.data),T.outlet,T.component,T)}(w.value),N=w.children.map(j=>_r(T,j));return new Lr(R,N)}}function _e(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function Le(T){return"object"==typeof T&&null!=T&&T.outlets}function Xe(T,w,E,R,N){let j={};if(R&&Ze(R,(Q,X)=>{j[X]=Array.isArray(Q)?Q.map(Me=>`${Me}`):`${Q}`}),T===w)return new gn(E,j,N);const re=st(T,w,E);return new gn(re,j,N)}function st(T,w,E){const R={};return Ze(T.children,(N,j)=>{R[j]=N===w?E:st(N,w,E)}),new Gt(T.segments,R)}class Tt{constructor(w,E,R){if(this.isAbsolute=w,this.numberOfDoubleDots=E,this.commands=R,w&&R.length>0&&_e(R[0]))throw new Error("Root segment cannot have matrix parameters");const N=R.find(Le);if(N&&N!==vn(R))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lr{constructor(w,E,R){this.segmentGroup=w,this.processChildren=E,this.index=R}}function Ls(T,w,E){if(T||(T=new Gt([],{})),0===T.segments.length&&T.hasChildren())return Fs(T,w,E);const R=function ts(T,w,E){let R=0,N=w;const j={match:!1,pathIndex:0,commandIndex:0};for(;N<T.segments.length;){if(R>=E.length)return j;const re=T.segments[N],Q=E[R];if(Le(Q))break;const X=`${Q}`,Me=R<E.length-1?E[R+1]:null;if(N>0&&void 0===X)break;if(X&&Me&&"object"==typeof Me&&void 0===Me.outlets){if(!pi(X,Me,re))return j;R+=2}else{if(!pi(X,{},re))return j;R++}N++}return{match:!0,pathIndex:N,commandIndex:R}}(T,w,E),N=E.slice(R.commandIndex);if(R.match&&R.pathIndex<T.segments.length){const j=new Gt(T.segments.slice(0,R.pathIndex),{});return j.children[Dt]=new Gt(T.segments.slice(R.pathIndex),T.children),Fs(j,0,N)}return R.match&&0===N.length?new Gt(T.segments,{}):R.match&&!T.hasChildren()?la(T,w,E):R.match?Fs(T,0,N):la(T,w,E)}function Fs(T,w,E){if(0===E.length)return new Gt(T.segments,{});{const R=function Ni(T){return Le(T[0])?T[0].outlets:{[Dt]:T}}(E),N={};return Ze(R,(j,re)=>{"string"==typeof j&&(j=[j]),null!==j&&(N[re]=Ls(T.children[re],w,j))}),Ze(T.children,(j,re)=>{void 0===R[re]&&(N[re]=j)}),new Gt(T.segments,N)}}function la(T,w,E){const R=T.segments.slice(0,w);let N=0;for(;N<E.length;){const j=E[N];if(Le(j)){const X=ca(j.outlets);return new Gt(R,X)}if(0===N&&_e(E[0])){R.push(new cn(T.segments[w].path,vs(E[0]))),N++;continue}const re=Le(j)?j.outlets[Dt]:`${j}`,Q=N<E.length-1?E[N+1]:null;re&&Q&&_e(Q)?(R.push(new cn(re,vs(Q))),N+=2):(R.push(new cn(re,{})),N++)}return new Gt(R,{})}function ca(T){const w={};return Ze(T,(E,R)=>{"string"==typeof E&&(E=[E]),null!==E&&(w[R]=la(new Gt([],{}),0,E))}),w}function vs(T){const w={};return Ze(T,(E,R)=>w[R]=`${E}`),w}function pi(T,w,E){return T==E.path&&ar(w,E.parameters)}class yo{constructor(w,E,R,N){this.routeReuseStrategy=w,this.futureState=E,this.currState=R,this.forwardEvent=N}activate(w){const E=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,R,w),Ro(this.futureState.root),this.activateChildRoutes(E,R,w)}deactivateChildRoutes(w,E,R){const N=Xr(E);w.children.forEach(j=>{const re=j.value.outlet;this.deactivateRoutes(j,N[re],R),delete N[re]}),Ze(N,(j,re)=>{this.deactivateRouteAndItsChildren(j,R)})}deactivateRoutes(w,E,R){const N=w.value,j=E?E.value:null;if(N===j)if(N.component){const re=R.getContext(N.outlet);re&&this.deactivateChildRoutes(w,E,re.children)}else this.deactivateChildRoutes(w,E,R);else j&&this.deactivateRouteAndItsChildren(E,R)}deactivateRouteAndItsChildren(w,E){w.value.component&&this.routeReuseStrategy.shouldDetach(w.value.snapshot)?this.detachAndStoreRouteSubtree(w,E):this.deactivateRouteAndOutlet(w,E)}detachAndStoreRouteSubtree(w,E){const R=E.getContext(w.value.outlet),N=R&&w.value.component?R.children:E,j=Xr(w);for(const re of Object.keys(j))this.deactivateRouteAndItsChildren(j[re],N);if(R&&R.outlet){const re=R.outlet.detach(),Q=R.children.onOutletDeactivated();this.routeReuseStrategy.store(w.value.snapshot,{componentRef:re,route:w,contexts:Q})}}deactivateRouteAndOutlet(w,E){const R=E.getContext(w.value.outlet),N=R&&w.value.component?R.children:E,j=Xr(w);for(const re of Object.keys(j))this.deactivateRouteAndItsChildren(j[re],N);R&&R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated(),R.attachRef=null,R.resolver=null,R.route=null)}activateChildRoutes(w,E,R){const N=Xr(E);w.children.forEach(j=>{this.activateRoutes(j,N[j.value.outlet],R),this.forwardEvent(new Ui(j.value.snapshot))}),w.children.length&&this.forwardEvent(new or(w.value.snapshot))}activateRoutes(w,E,R){const N=w.value,j=E?E.value:null;if(Ro(N),N===j)if(N.component){const re=R.getOrCreateContext(N.outlet);this.activateChildRoutes(w,E,re.children)}else this.activateChildRoutes(w,E,R);else if(N.component){const re=R.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const Q=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),re.children.onOutletReAttached(Q.contexts),re.attachRef=Q.componentRef,re.route=Q.route.value,re.outlet&&re.outlet.attach(Q.componentRef,Q.route.value),Ro(Q.route.value),this.activateChildRoutes(w,null,re.children)}else{const Q=function da(T){for(let w=T.parent;w;w=w.parent){const E=w.routeConfig;if(E&&E._loadedConfig)return E._loadedConfig;if(E&&E.component)return null}return null}(N.snapshot),X=Q?Q.module.componentFactoryResolver:null;re.attachRef=null,re.route=N,re.resolver=X,re.outlet&&re.outlet.activateWith(N,X),this.activateChildRoutes(w,null,re.children)}}else this.activateChildRoutes(w,null,R)}}class Jo{constructor(w,E){this.routes=w,this.module=E}}function _s(T){return"function"==typeof T}function gi(T){return T instanceof gn}const Mr=Symbol("INITIAL_VALUE");function io(){return(0,tt.w)(T=>function at(...T){const w=(0,Se.yG)(T),E=(0,Se.jO)(T),{args:R,keys:N}=(0,he.D)(T);if(0===R.length)return(0,De.D)([],w);const j=new Ee.y(function qe(T,w,E=Ie.y){return R=>{Qe(w,()=>{const{length:N}=T,j=new Array(N);let re=N,Q=N;for(let X=0;X<N;X++)Qe(w,()=>{const Me=(0,De.D)(T[X],w);let Jt=!1;Me.subscribe((0,oe.x)(R,jt=>{j[X]=jt,Jt||(Jt=!0,Q--),Q||R.next(E(j.slice()))},()=>{--re||R.complete()}))},R)},R)}}(R,w,N?re=>(0,ae.n)(N,re):Ie.y));return E?j.pipe((0,Ce.Z)(E)):j}(T.map(w=>w.pipe((0,te.q)(1),(0,$e.O)(Mr)))).pipe((0,ot.R)((w,E)=>{let R=!1;return E.reduce((N,j,re)=>N!==Mr?N:(j===Mr&&(R=!0),R||!1!==j&&re!==E.length-1&&!gi(j)?N:j),w)},Mr),(0,Oe.h)(w=>w!==Mr),(0,Ve.U)(w=>gi(w)?w:!0===w),(0,te.q)(1)))}class _o{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ns,this.attachRef=null}}class ns{constructor(){this.contexts=new Map}onChildOutletCreated(w,E){const R=this.getOrCreateContext(w);R.outlet=E,this.contexts.set(w,R)}onChildOutletDestroyed(w){const E=this.getContext(w);E&&(E.outlet=null,E.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let E=this.getContext(w);return E||(E=new _o,this.contexts.set(w,E)),E}getContext(w){return this.contexts.get(w)||null}}let so=(()=>{class T{constructor(E,R,N,j,re){this.parentContexts=E,this.location=R,this.resolver=N,this.changeDetector=re,this.activated=null,this._activatedRoute=null,this.activateEvents=new b.vpe,this.deactivateEvents=new b.vpe,this.attachEvents=new b.vpe,this.detachEvents=new b.vpe,this.name=j||Dt,E.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const E=this.parentContexts.getContext(this.name);E&&E.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(E.instance),E}attach(E,R){this.activated=E,this._activatedRoute=R,this.location.insert(E.hostView),this.attachEvents.emit(E.instance)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,R){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=E;const re=(R=R||this.resolver).resolveComponentFactory(E._futureSnapshot.routeConfig.component),Q=this.parentContexts.getOrCreateContext(this.name).children,X=new ha(E,Q,this.location.injector);this.activated=this.location.createComponent(re,this.location.length,X),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(E){return new(E||T)(b.Y36(ns),b.Y36(b.s_b),b.Y36(b._Vd),b.$8M("name"),b.Y36(b.sBO))},T.\u0275dir=b.lG2({type:T,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),T})();class ha{constructor(w,E,R){this.route=w,this.childContexts=E,this.parent=R}get(w,E){return w===Bi?this.route:w===ns?this.childContexts:this.parent.get(w,E)}}let rs=(()=>{class T{}return T.\u0275fac=function(E){return new(E||T)},T.\u0275cmp=b.Xpm({type:T,selectors:[["ng-component"]],decls:1,vars:0,template:function(E,R){1&E&&b._UZ(0,"router-outlet")},directives:[so],encapsulation:2}),T})();function Es(T,w=""){for(let E=0;E<T.length;E++){const R=T[E];Po(R,Jn(w,R))}}function Po(T,w){T.children&&Es(T.children,w)}function Jn(T,w){return w?T||w.path?T&&!w.path?`${T}/`:!T&&w.path?w.path:`${T}/${w.path}`:"":T}function O(T){const w=T.children&&T.children.map(O),E=w?Object.assign(Object.assign({},T),{children:w}):Object.assign({},T);return!E.component&&(w||E.loadChildren)&&E.outlet&&E.outlet!==Dt&&(E.component=rs),E}function z(T){return T.outlet||Dt}function P(T,w){const E=T.filter(R=>z(R)===w);return E.push(...T.filter(R=>z(R)!==w)),E}const K={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ce(T,w,E){var R;if(""===w.path)return"full"===w.pathMatch&&(T.hasChildren()||E.length>0)?Object.assign({},K):{matched:!0,consumedSegments:[],remainingSegments:E,parameters:{},positionalParamSegments:{}};const j=(w.matcher||Ji)(E,T,w);if(!j)return Object.assign({},K);const re={};Ze(j.posParams,(X,Me)=>{re[Me]=X.path});const Q=j.consumed.length>0?Object.assign(Object.assign({},re),j.consumed[j.consumed.length-1].parameters):re;return{matched:!0,consumedSegments:j.consumed,remainingSegments:E.slice(j.consumed.length),parameters:Q,positionalParamSegments:null!==(R=j.posParams)&&void 0!==R?R:{}}}function He(T,w,E,R,N="corrected"){if(E.length>0&&function sn(T,w,E){return E.some(R=>Dn(T,w,R)&&z(R)!==Dt)}(T,E,R)){const re=new Gt(w,function It(T,w,E,R){const N={};N[Dt]=R,R._sourceSegment=T,R._segmentIndexShift=w.length;for(const j of E)if(""===j.path&&z(j)!==Dt){const re=new Gt([],{});re._sourceSegment=T,re._segmentIndexShift=w.length,N[z(j)]=re}return N}(T,w,R,new Gt(E,T.children)));return re._sourceSegment=T,re._segmentIndexShift=w.length,{segmentGroup:re,slicedSegments:[]}}if(0===E.length&&function Vn(T,w,E){return E.some(R=>Dn(T,w,R))}(T,E,R)){const re=new Gt(T.segments,function it(T,w,E,R,N,j){const re={};for(const Q of R)if(Dn(T,E,Q)&&!N[z(Q)]){const X=new Gt([],{});X._sourceSegment=T,X._segmentIndexShift="legacy"===j?T.segments.length:w.length,re[z(Q)]=X}return Object.assign(Object.assign({},N),re)}(T,w,E,R,T.children,N));return re._sourceSegment=T,re._segmentIndexShift=w.length,{segmentGroup:re,slicedSegments:E}}const j=new Gt(T.segments,T.children);return j._sourceSegment=T,j._segmentIndexShift=w.length,{segmentGroup:j,slicedSegments:E}}function Dn(T,w,E){return(!(T.hasChildren()||w.length>0)||"full"!==E.pathMatch)&&""===E.path}function Nn(T,w,E,R){return!!(z(T)===R||R!==Dt&&Dn(w,E,T))&&("**"===T.path||ce(w,T,E).matched)}function fr(T,w,E){return 0===w.length&&!T.children[E]}class Xn{constructor(w){this.segmentGroup=w||null}}class sr{constructor(w){this.urlTree=w}}function ui(T){return Ge(new Xn(T))}function wi(T){return Ge(new sr(T))}class ws{constructor(w,E,R,N,j){this.configLoader=E,this.urlSerializer=R,this.urlTree=N,this.config=j,this.allowRedirects=!0,this.ngModule=w.get(b.h0i)}apply(){const w=He(this.urlTree.root,[],[],this.config).segmentGroup,E=new Gt(w.segments,w.children);return this.expandSegmentGroup(this.ngModule,this.config,E,Dt).pipe((0,Ve.U)(j=>this.createUrlTree(ea(j),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ke(j=>{if(j instanceof sr)return this.allowRedirects=!1,this.match(j.urlTree);throw j instanceof Xn?this.noMatchError(j):j}))}match(w){return this.expandSegmentGroup(this.ngModule,this.config,w.root,Dt).pipe((0,Ve.U)(N=>this.createUrlTree(ea(N),w.queryParams,w.fragment))).pipe(ke(N=>{throw N instanceof Xn?this.noMatchError(N):N}))}noMatchError(w){return new Error(`Cannot match any routes. URL Segment: '${w.segmentGroup}'`)}createUrlTree(w,E,R){const N=w.segments.length>0?new Gt([],{[Dt]:w}):w;return new gn(N,E,R)}expandSegmentGroup(w,E,R,N){return 0===R.segments.length&&R.hasChildren()?this.expandChildren(w,E,R).pipe((0,Ve.U)(j=>new Gt([],j))):this.expandSegment(w,R,E,R.segments,N,!0)}expandChildren(w,E,R){const N=[];for(const j of Object.keys(R.children))"primary"===j?N.unshift(j):N.push(j);return(0,De.D)(N).pipe((0,Rt.b)(j=>{const re=R.children[j],Q=P(E,j);return this.expandSegmentGroup(w,Q,re,j).pipe((0,Ve.U)(X=>({segment:X,outlet:j})))}),(0,ot.R)((j,re)=>(j[re.outlet]=re.segment,j),{}),function Vt(T,w){const E=arguments.length>=2;return R=>R.pipe(T?(0,Oe.h)((N,j)=>T(N,j,R)):Ie.y,le(1),E?(0,be.d)(w):(0,Je.T)(()=>new ue.K))}())}expandSegment(w,E,R,N,j,re){return(0,De.D)(R).pipe((0,Rt.b)(Q=>this.expandSegmentAgainstRoute(w,E,R,Q,N,j,re).pipe(ke(Me=>{if(Me instanceof Xn)return(0,Re.of)(null);throw Me}))),(0,lt.P)(Q=>!!Q),ke((Q,X)=>{if(Q instanceof ue.K||"EmptyError"===Q.name)return fr(E,N,j)?(0,Re.of)(new Gt([],{})):ui(E);throw Q}))}expandSegmentAgainstRoute(w,E,R,N,j,re,Q){return Nn(N,E,j,re)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(w,E,N,j,re):Q&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(w,E,R,N,j,re):ui(E):ui(E)}expandSegmentAgainstRouteUsingRedirect(w,E,R,N,j,re){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(w,R,N,re):this.expandRegularSegmentAgainstRouteUsingRedirect(w,E,R,N,j,re)}expandWildCardWithParamsAgainstRouteUsingRedirect(w,E,R,N){const j=this.applyRedirectCommands([],R.redirectTo,{});return R.redirectTo.startsWith("/")?wi(j):this.lineralizeSegments(R,j).pipe((0,In.z)(re=>{const Q=new Gt(re,{});return this.expandSegment(w,Q,E,re,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(w,E,R,N,j,re){const{matched:Q,consumedSegments:X,remainingSegments:Me,positionalParamSegments:Jt}=ce(E,N,j);if(!Q)return ui(E);const jt=this.applyRedirectCommands(X,N.redirectTo,Jt);return N.redirectTo.startsWith("/")?wi(jt):this.lineralizeSegments(N,jt).pipe((0,In.z)(cr=>this.expandSegment(w,E,R,cr.concat(Me),re,!1)))}matchSegmentAgainstRoute(w,E,R,N,j){if("**"===R.path)return R.loadChildren?(R._loadedConfig?(0,Re.of)(R._loadedConfig):this.configLoader.load(w.injector,R)).pipe((0,Ve.U)(jt=>(R._loadedConfig=jt,new Gt(N,{})))):(0,Re.of)(new Gt(N,{}));const{matched:re,consumedSegments:Q,remainingSegments:X}=ce(E,R,N);return re?this.getChildConfig(w,R,N).pipe((0,In.z)(Jt=>{const jt=Jt.module,cr=Jt.routes,{segmentGroup:kn,slicedSegments:Yi}=He(E,Q,X,cr),Ss=new Gt(kn.segments,kn.children);if(0===Yi.length&&Ss.hasChildren())return this.expandChildren(jt,cr,Ss).pipe((0,Ve.U)(us=>new Gt(Q,us)));if(0===cr.length&&0===Yi.length)return(0,Re.of)(new Gt(Q,{}));const ya=z(R)===j;return this.expandSegment(jt,Ss,cr,Yi,ya?Dt:j,!0).pipe((0,Ve.U)(as=>new Gt(Q.concat(as.segments),as.children)))})):ui(E)}getChildConfig(w,E,R){return E.children?(0,Re.of)(new Jo(E.children,w)):E.loadChildren?void 0!==E._loadedConfig?(0,Re.of)(E._loadedConfig):this.runCanLoadGuards(w.injector,E,R).pipe((0,In.z)(N=>N?this.configLoader.load(w.injector,E).pipe((0,Ve.U)(j=>(E._loadedConfig=j,j))):function wn(T){return Ge(Qr(`Cannot load children because the guard of the route "path: '${T.path}'" returned false`))}(E))):(0,Re.of)(new Jo([],w))}runCanLoadGuards(w,E,R){const N=E.canLoad;if(!N||0===N.length)return(0,Re.of)(!0);const j=N.map(re=>{const Q=w.get(re);let X;if(function Ei(T){return T&&_s(T.canLoad)}(Q))X=Q.canLoad(E,R);else{if(!_s(Q))throw new Error("Invalid CanLoad guard");X=Q(E,R)}return Ct(X)});return(0,Re.of)(j).pipe(io(),(0,Ot.b)(re=>{if(!gi(re))return;const Q=Qr(`Redirecting to "${this.urlSerializer.serialize(re)}"`);throw Q.url=re,Q}),(0,Ve.U)(re=>!0===re))}lineralizeSegments(w,E){let R=[],N=E.root;for(;;){if(R=R.concat(N.segments),0===N.numberOfChildren)return(0,Re.of)(R);if(N.numberOfChildren>1||!N.children[Dt])return Ge(new Error(`Only absolute redirects can have named outlets. redirectTo: '${w.redirectTo}'`));N=N.children[Dt]}}applyRedirectCommands(w,E,R){return this.applyRedirectCreatreUrlTree(E,this.urlSerializer.parse(E),w,R)}applyRedirectCreatreUrlTree(w,E,R,N){const j=this.createSegmentGroup(w,E.root,R,N);return new gn(j,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(w,E){const R={};return Ze(w,(N,j)=>{if("string"==typeof N&&N.startsWith(":")){const Q=N.substring(1);R[j]=E[Q]}else R[j]=N}),R}createSegmentGroup(w,E,R,N){const j=this.createSegments(w,E.segments,R,N);let re={};return Ze(E.children,(Q,X)=>{re[X]=this.createSegmentGroup(w,Q,R,N)}),new Gt(j,re)}createSegments(w,E,R,N){return E.map(j=>j.path.startsWith(":")?this.findPosParam(w,j,N):this.findOrReturn(j,R))}findPosParam(w,E,R){const N=R[E.path.substring(1)];if(!N)throw new Error(`Cannot redirect to '${w}'. Cannot find '${E.path}'.`);return N}findOrReturn(w,E){let R=0;for(const N of E){if(N.path===w.path)return E.splice(R),N;R++}return w}}function ea(T){const w={};for(const R of Object.keys(T.children)){const j=ea(T.children[R]);(j.segments.length>0||j.hasChildren())&&(w[R]=j)}return function Hi(T){if(1===T.numberOfChildren&&T.children[Dt]){const w=T.children[Dt];return new Gt(T.segments.concat(w.segments),w.children)}return T}(new Gt(T.segments,w))}class Da{constructor(w){this.path=w,this.route=this.path[this.path.length-1]}}class rt{constructor(w,E){this.component=w,this.route=E}}function Ln(T,w,E){const R=T._root;return Vs(R,w?w._root:null,E,[R.value])}function Tr(T,w,E){const R=function Ya(T){if(!T)return null;for(let w=T.parent;w;w=w.parent){const E=w.routeConfig;if(E&&E._loadedConfig)return E._loadedConfig}return null}(w);return(R?R.module.injector:E).get(T)}function Vs(T,w,E,R,N={canDeactivateChecks:[],canActivateChecks:[]}){const j=Xr(w);return T.children.forEach(re=>{(function Is(T,w,E,R,N={canDeactivateChecks:[],canActivateChecks:[]}){const j=T.value,re=w?w.value:null,Q=E?E.getContext(T.value.outlet):null;if(re&&j.routeConfig===re.routeConfig){const X=function Ta(T,w,E){if("function"==typeof E)return E(T,w);switch(E){case"pathParamsChange":return!nn(T.url,w.url);case"pathParamsOrQueryParamsChange":return!nn(T.url,w.url)||!ar(T.queryParams,w.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$i(T,w)||!ar(T.queryParams,w.queryParams);default:return!$i(T,w)}}(re,j,j.routeConfig.runGuardsAndResolvers);X?N.canActivateChecks.push(new Da(R)):(j.data=re.data,j._resolvedData=re._resolvedData),Vs(T,w,j.component?Q?Q.children:null:E,R,N),X&&Q&&Q.outlet&&Q.outlet.isActivated&&N.canDeactivateChecks.push(new rt(Q.outlet.component,re))}else re&&Eo(w,Q,N),N.canActivateChecks.push(new Da(R)),Vs(T,null,j.component?Q?Q.children:null:E,R,N)})(re,j[re.value.outlet],E,R.concat([re.value]),N),delete j[re.value.outlet]}),Ze(j,(re,Q)=>Eo(re,E.getContext(Q),N)),N}function Eo(T,w,E){const R=Xr(T),N=T.value;Ze(R,(j,re)=>{Eo(j,N.component?w?w.children.getContext(re):null:w,E)}),E.canDeactivateChecks.push(new rt(N.component&&w&&w.outlet&&w.outlet.isActivated?w.outlet.component:null,N))}class Gi{}function pa(T){return new Ee.y(w=>w.error(T))}class No{constructor(w,E,R,N,j,re){this.rootComponentType=w,this.config=E,this.urlTree=R,this.url=N,this.paramsInheritanceStrategy=j,this.relativeLinkResolution=re}recognize(){const w=He(this.urlTree.root,[],[],this.config.filter(re=>void 0===re.redirectTo),this.relativeLinkResolution).segmentGroup,E=this.processSegmentGroup(this.config,w,Dt);if(null===E)return null;const R=new eo([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Dt,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Lr(R,E),j=new ji(this.url,N);return this.inheritParamsAndData(j._root),j}inheritParamsAndData(w){const E=w.value,R=Ar(E,this.paramsInheritanceStrategy);E.params=Object.freeze(R.params),E.data=Object.freeze(R.data),w.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(w,E,R){return 0===E.segments.length&&E.hasChildren()?this.processChildren(w,E):this.processSegment(w,E,E.segments,R)}processChildren(w,E){const R=[];for(const j of Object.keys(E.children)){const re=E.children[j],Q=P(w,j),X=this.processSegmentGroup(Q,re,j);if(null===X)return null;R.push(...X)}const N=ga(R);return function na(T){T.sort((w,E)=>w.value.outlet===Dt?-1:E.value.outlet===Dt?1:w.value.outlet.localeCompare(E.value.outlet))}(N),N}processSegment(w,E,R,N){for(const j of w){const re=this.processSegmentAgainstRoute(j,E,R,N);if(null!==re)return re}return fr(E,R,N)?[]:null}processSegmentAgainstRoute(w,E,R,N){if(w.redirectTo||!Nn(w,E,R,N))return null;let j,re=[],Q=[];if("**"===w.path){const kn=R.length>0?vn(R).parameters:{};j=new eo(R,kn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ko(w),z(w),w.component,w,Qa(E),Aa(E)+R.length,wu(w))}else{const kn=ce(E,w,R);if(!kn.matched)return null;re=kn.consumedSegments,Q=kn.remainingSegments,j=new eo(re,kn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ko(w),z(w),w.component,w,Qa(E),Aa(E)+re.length,wu(w))}const X=function Sa(T){return T.children?T.children:T.loadChildren?T._loadedConfig.routes:[]}(w),{segmentGroup:Me,slicedSegments:Jt}=He(E,re,Q,X.filter(kn=>void 0===kn.redirectTo),this.relativeLinkResolution);if(0===Jt.length&&Me.hasChildren()){const kn=this.processChildren(X,Me);return null===kn?null:[new Lr(j,kn)]}if(0===X.length&&0===Jt.length)return[new Lr(j,[])];const jt=z(w)===N,cr=this.processSegment(X,Me,Jt,jt?Dt:N);return null===cr?null:[new Lr(j,cr)]}}function xr(T){const w=T.value.routeConfig;return w&&""===w.path&&void 0===w.redirectTo}function ga(T){const w=[],E=new Set;for(const R of T){if(!xr(R)){w.push(R);continue}const N=w.find(j=>R.value.routeConfig===j.value.routeConfig);void 0!==N?(N.children.push(...R.children),E.add(N)):w.push(R)}for(const R of E){const N=ga(R.children);w.push(new Lr(R.value,N))}return w.filter(R=>!E.has(R))}function Qa(T){let w=T;for(;w._sourceSegment;)w=w._sourceSegment;return w}function Aa(T){let w=T,E=w._segmentIndexShift?w._segmentIndexShift:0;for(;w._sourceSegment;)w=w._sourceSegment,E+=w._segmentIndexShift?w._segmentIndexShift:0;return E-1}function ko(T){return T.data||{}}function wu(T){return T.resolve||{}}function Bs(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}function li(T){return(0,tt.w)(w=>{const E=T(w);return E?(0,De.D)(E).pipe((0,Ve.U)(()=>w)):(0,Re.of)(w)})}class Xa extends class Bn{shouldDetach(w){return!1}store(w,E){}shouldAttach(w){return!1}retrieve(w){return null}shouldReuseRoute(w,E){return w.routeConfig===E.routeConfig}}{}const Ma=new b.OlP("ROUTES");class eu{constructor(w,E,R,N){this.injector=w,this.compiler=E,this.onLoadStartListener=R,this.onLoadEndListener=N}load(w,E){if(E._loader$)return E._loader$;this.onLoadStartListener&&this.onLoadStartListener(E);const N=this.loadModuleFactory(E.loadChildren).pipe((0,Ve.U)(j=>{this.onLoadEndListener&&this.onLoadEndListener(E);const re=j.create(w);return new Jo(Vr(re.injector.get(Ma,void 0,b.XFs.Self|b.XFs.Optional)).map(O),re)}),ke(j=>{throw E._loader$=void 0,j}));return E._loader$=new et(N,()=>new L.x).pipe(xt()),E._loader$}loadModuleFactory(w){return Ct(w()).pipe((0,In.z)(E=>E instanceof b.YKP?(0,Re.of)(E):(0,De.D)(this.compiler.compileModuleAsync(E))))}}class tu{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,E){return w}}function Ra(T){throw T}function uo(T,w,E){return w.parse("/")}function Wi(T,w){return(0,Re.of)(null)}const lo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ii=(()=>{class T{constructor(E,R,N,j,re,Q,X){this.rootComponentType=E,this.urlSerializer=R,this.rootContexts=N,this.location=j,this.config=X,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new L.x,this.errorHandler=Ra,this.malformedUriErrorHandler=uo,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Wi,afterPreactivation:Wi},this.urlHandlingStrategy=new tu,this.routeReuseStrategy=new Xa,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=re.get(b.h0i),this.console=re.get(b.c2e);const jt=re.get(b.R0b);this.isNgZoneEnabled=jt instanceof b.R0b&&b.R0b.isInAngularZone(),this.resetConfig(X),this.currentUrlTree=function Zt(){return new gn(new Gt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new eu(re,Q,cr=>this.triggerEvent(new xn(cr)),cr=>this.triggerEvent(new ii(cr))),this.routerState=Wn(this.currentUrlTree,this.rootComponentType),this.transitions=new q({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var E;return null===(E=this.location.getState())||void 0===E?void 0:E.\u0275routerPageId}setupNavigations(E){const R=this.events;return E.pipe((0,Oe.h)(N=>0!==N.id),(0,Ve.U)(N=>Object.assign(Object.assign({},N),{extractedUrl:this.urlHandlingStrategy.extract(N.rawUrl)})),(0,tt.w)(N=>{let j=!1,re=!1;return(0,Re.of)(N).pipe((0,Ot.b)(Q=>{this.currentNavigation={id:Q.id,initialUrl:Q.currentRawUrl,extractedUrl:Q.extractedUrl,trigger:Q.source,extras:Q.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,tt.w)(Q=>{const X=this.browserUrlTree.toString(),Me=!this.navigated||Q.extractedUrl.toString()!==X||X!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Me)&&this.urlHandlingStrategy.shouldProcessUrl(Q.rawUrl))return Ki(Q.source)&&(this.browserUrlTree=Q.extractedUrl),(0,Re.of)(Q).pipe((0,tt.w)(jt=>{const cr=this.transitions.getValue();return R.next(new Ir(jt.id,this.serializeUrl(jt.extractedUrl),jt.source,jt.restoredState)),cr!==this.transitions.getValue()?Pe.E:Promise.resolve(jt)}),function qa(T,w,E,R){return(0,tt.w)(N=>function oo(T,w,E,R,N){return new ws(T,w,E,R,N).apply()}(T,w,E,N.extractedUrl,R).pipe((0,Ve.U)(j=>Object.assign(Object.assign({},N),{urlAfterRedirects:j}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ot.b)(jt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:jt.urlAfterRedirects})}),function Lo(T,w,E,R,N){return(0,In.z)(j=>function Ca(T,w,E,R,N="emptyOnly",j="legacy"){try{const re=new No(T,w,E,R,N,j).recognize();return null===re?pa(new Gi):(0,Re.of)(re)}catch(re){return pa(re)}}(T,w,j.urlAfterRedirects,E(j.urlAfterRedirects),R,N).pipe((0,Ve.U)(re=>Object.assign(Object.assign({},j),{targetSnapshot:re}))))}(this.rootComponentType,this.config,jt=>this.serializeUrl(jt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ot.b)(jt=>{if("eager"===this.urlUpdateStrategy){if(!jt.extras.skipLocationChange){const kn=this.urlHandlingStrategy.merge(jt.urlAfterRedirects,jt.rawUrl);this.setBrowserUrl(kn,jt)}this.browserUrlTree=jt.urlAfterRedirects}const cr=new Hn(jt.id,this.serializeUrl(jt.extractedUrl),this.serializeUrl(jt.urlAfterRedirects),jt.targetSnapshot);R.next(cr)}));if(Me&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:cr,extractedUrl:kn,source:Yi,restoredState:Ss,extras:ya}=Q,ho=new Ir(cr,this.serializeUrl(kn),Yi,Ss);R.next(ho);const as=Wn(kn,this.rootComponentType).snapshot;return(0,Re.of)(Object.assign(Object.assign({},Q),{targetSnapshot:as,urlAfterRedirects:kn,extras:Object.assign(Object.assign({},ya),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Q.rawUrl,Q.resolve(null),Pe.E}),li(Q=>{const{targetSnapshot:X,id:Me,extractedUrl:Jt,rawUrl:jt,extras:{skipLocationChange:cr,replaceUrl:kn}}=Q;return this.hooks.beforePreactivation(X,{navigationId:Me,appliedUrlTree:Jt,rawUrlTree:jt,skipLocationChange:!!cr,replaceUrl:!!kn})}),(0,Ot.b)(Q=>{const X=new br(Q.id,this.serializeUrl(Q.extractedUrl),this.serializeUrl(Q.urlAfterRedirects),Q.targetSnapshot);this.triggerEvent(X)}),(0,Ve.U)(Q=>Object.assign(Object.assign({},Q),{guards:Ln(Q.targetSnapshot,Q.currentSnapshot,this.rootContexts)})),function _u(T,w){return(0,In.z)(E=>{const{targetSnapshot:R,currentSnapshot:N,guards:{canActivateChecks:j,canDeactivateChecks:re}}=E;return 0===re.length&&0===j.length?(0,Re.of)(Object.assign(Object.assign({},E),{guardsResult:!0})):function Eu(T,w,E,R){return(0,De.D)(T).pipe((0,In.z)(N=>function Ds(T,w,E,R,N){const j=w&&w.routeConfig?w.routeConfig.canDeactivate:null;if(!j||0===j.length)return(0,Re.of)(!0);const re=j.map(Q=>{const X=Tr(Q,w,N);let Me;if(function ai(T){return T&&_s(T.canDeactivate)}(X))Me=Ct(X.canDeactivate(T,w,E,R));else{if(!_s(X))throw new Error("Invalid CanDeactivate guard");Me=Ct(X(T,w,E,R))}return Me.pipe((0,lt.P)())});return(0,Re.of)(re).pipe(io())}(N.component,N.route,E,w,R)),(0,lt.P)(N=>!0!==N,!0))}(re,R,N,T).pipe((0,In.z)(Q=>Q&&function ro(T){return"boolean"==typeof T}(Q)?function fa(T,w,E,R){return(0,De.D)(w).pipe((0,Rt.b)(N=>(0,gt.z)(function ki(T,w){return null!==T&&w&&w(new fs(T)),(0,Re.of)(!0)}(N.route.parent,R),function Oo(T,w){return null!==T&&w&&w(new $r(T)),(0,Re.of)(!0)}(N.route,R),function ta(T,w,E){const R=w[w.length-1],j=w.slice(0,w.length-1).reverse().map(re=>function Za(T){const w=T.routeConfig?T.routeConfig.canActivateChild:null;return w&&0!==w.length?{node:T,guards:w}:null}(re)).filter(re=>null!==re).map(re=>(0,mt.P)(()=>{const Q=re.guards.map(X=>{const Me=Tr(X,re.node,E);let Jt;if(function Xo(T){return T&&_s(T.canActivateChild)}(Me))Jt=Ct(Me.canActivateChild(R,T));else{if(!_s(Me))throw new Error("Invalid CanActivateChild guard");Jt=Ct(Me(R,T))}return Jt.pipe((0,lt.P)())});return(0,Re.of)(Q).pipe(io())}));return(0,Re.of)(j).pipe(io())}(T,N.path,E),function bs(T,w,E){const R=w.routeConfig?w.routeConfig.canActivate:null;if(!R||0===R.length)return(0,Re.of)(!0);const N=R.map(j=>(0,mt.P)(()=>{const re=Tr(j,w,E);let Q;if(function vo(T){return T&&_s(T.canActivate)}(re))Q=Ct(re.canActivate(w,T));else{if(!_s(re))throw new Error("Invalid CanActivate guard");Q=Ct(re(w,T))}return Q.pipe((0,lt.P)())}));return(0,Re.of)(N).pipe(io())}(T,N.route,E))),(0,lt.P)(N=>!0!==N,!0))}(R,j,T,w):(0,Re.of)(Q)),(0,Ve.U)(Q=>Object.assign(Object.assign({},E),{guardsResult:Q})))})}(this.ngModule.injector,Q=>this.triggerEvent(Q)),(0,Ot.b)(Q=>{if(gi(Q.guardsResult)){const Me=Qr(`Redirecting to "${this.serializeUrl(Q.guardsResult)}"`);throw Me.url=Q.guardsResult,Me}const X=new Lt(Q.id,this.serializeUrl(Q.extractedUrl),this.serializeUrl(Q.urlAfterRedirects),Q.targetSnapshot,!!Q.guardsResult);this.triggerEvent(X)}),(0,Oe.h)(Q=>!!Q.guardsResult||(this.restoreHistory(Q),this.cancelNavigationTransition(Q,""),!1)),li(Q=>{if(Q.guards.canActivateChecks.length)return(0,Re.of)(Q).pipe((0,Ot.b)(X=>{const Me=new zn(X.id,this.serializeUrl(X.extractedUrl),this.serializeUrl(X.urlAfterRedirects),X.targetSnapshot);this.triggerEvent(Me)}),(0,tt.w)(X=>{let Me=!1;return(0,Re.of)(X).pipe(function Ja(T,w){return(0,In.z)(E=>{const{targetSnapshot:R,guards:{canActivateChecks:N}}=E;if(!N.length)return(0,Re.of)(E);let j=0;return(0,De.D)(N).pipe((0,Rt.b)(re=>function Fo(T,w,E,R){return function zi(T,w,E,R){const N=Bs(T);if(0===N.length)return(0,Re.of)({});const j={};return(0,De.D)(N).pipe((0,In.z)(re=>function ma(T,w,E,R){const N=Tr(T,w,R);return Ct(N.resolve?N.resolve(w,E):N(w,E))}(T[re],w,E,R).pipe((0,Ot.b)(Q=>{j[re]=Q}))),le(1),(0,In.z)(()=>Bs(j).length===N.length?(0,Re.of)(j):Pe.E))}(T._resolve,T,w,R).pipe((0,Ve.U)(j=>(T._resolvedData=j,T.data=Object.assign(Object.assign({},T.data),Ar(T,E).resolve),null)))}(re.route,R,T,w)),(0,Ot.b)(()=>j++),le(1),(0,In.z)(re=>j===N.length?(0,Re.of)(E):Pe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ot.b)({next:()=>Me=!0,complete:()=>{Me||(this.restoreHistory(X),this.cancelNavigationTransition(X,"At least one route resolver didn't emit any value."))}}))}),(0,Ot.b)(X=>{const Me=new Or(X.id,this.serializeUrl(X.extractedUrl),this.serializeUrl(X.urlAfterRedirects),X.targetSnapshot);this.triggerEvent(Me)}))}),li(Q=>{const{targetSnapshot:X,id:Me,extractedUrl:Jt,rawUrl:jt,extras:{skipLocationChange:cr,replaceUrl:kn}}=Q;return this.hooks.afterPreactivation(X,{navigationId:Me,appliedUrlTree:Jt,rawUrlTree:jt,skipLocationChange:!!cr,replaceUrl:!!kn})}),(0,Ve.U)(Q=>{const X=function ks(T,w,E){const R=_r(T,w._root,E?E._root:void 0);return new Gr(R,w)}(this.routeReuseStrategy,Q.targetSnapshot,Q.currentRouterState);return Object.assign(Object.assign({},Q),{targetRouterState:X})}),(0,Ot.b)(Q=>{this.currentUrlTree=Q.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Q.urlAfterRedirects,Q.rawUrl),this.routerState=Q.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Q.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Q),this.browserUrlTree=Q.urlAfterRedirects)}),((T,w,E)=>(0,Ve.U)(R=>(new yo(w,R.targetRouterState,R.currentRouterState,E).activate(T),R)))(this.rootContexts,this.routeReuseStrategy,Q=>this.triggerEvent(Q)),(0,Ot.b)({next(){j=!0},complete(){j=!0}}),function pn(T){return(0,_t.e)((w,E)=>{try{w.subscribe(E)}finally{E.add(T)}})}(()=>{var Q;j||re||this.cancelNavigationTransition(N,`Navigation ID ${N.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Q=this.currentNavigation)||void 0===Q?void 0:Q.id)===N.id&&(this.currentNavigation=null)}),ke(Q=>{if(re=!0,function Rn(T){return T&&T[dr]}(Q)){const X=gi(Q.url);X||(this.navigated=!0,this.restoreHistory(N,!0));const Me=new ri(N.id,this.serializeUrl(N.extractedUrl),Q.message);R.next(Me),X?setTimeout(()=>{const Jt=this.urlHandlingStrategy.merge(Q.url,this.rawUrlTree),jt={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ki(N.source)};this.scheduleNavigation(Jt,"imperative",null,jt,{resolve:N.resolve,reject:N.reject,promise:N.promise})},0):N.resolve(!1)}else{this.restoreHistory(N,!0);const X=new Pr(N.id,this.serializeUrl(N.extractedUrl),Q);R.next(X);try{N.resolve(this.errorHandler(Q))}catch(Me){N.reject(Me)}}return Pe.E}))}))}resetRootComponentType(E){this.rootComponentType=E,this.routerState.root.component=this.rootComponentType}setTransition(E){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),E))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const R="popstate"===E.type?"popstate":"hashchange";"popstate"===R&&setTimeout(()=>{var N;const j={replaceUrl:!0},re=(null===(N=E.state)||void 0===N?void 0:N.navigationId)?E.state:null;if(re){const X=Object.assign({},re);delete X.navigationId,delete X.\u0275routerPageId,0!==Object.keys(X).length&&(j.state=X)}const Q=this.parseUrl(E.url);this.scheduleNavigation(Q,R,re,j)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(E){this.events.next(E)}resetConfig(E){Es(E),this.config=E.map(O),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(E,R={}){const{relativeTo:N,queryParams:j,fragment:re,queryParamsHandling:Q,preserveFragment:X}=R,Me=N||this.routerState.root,Jt=X?this.currentUrlTree.fragment:re;let jt=null;switch(Q){case"merge":jt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),j);break;case"preserve":jt=this.currentUrlTree.queryParams;break;default:jt=j||null}return null!==jt&&(jt=this.removeEmptyProps(jt)),function we(T,w,E,R,N){if(0===E.length)return Xe(w.root,w.root,w.root,R,N);const j=function Qn(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new Tt(!0,0,T);let w=0,E=!1;const R=T.reduce((N,j,re)=>{if("object"==typeof j&&null!=j){if(j.outlets){const Q={};return Ze(j.outlets,(X,Me)=>{Q[Me]="string"==typeof X?X.split("/"):X}),[...N,{outlets:Q}]}if(j.segmentPath)return[...N,j.segmentPath]}return"string"!=typeof j?[...N,j]:0===re?(j.split("/").forEach((Q,X)=>{0==X&&"."===Q||(0==X&&""===Q?E=!0:".."===Q?w++:""!=Q&&N.push(Q))}),N):[...N,j]},[]);return new Tt(E,w,R)}(E);if(j.toRoot())return Xe(w.root,w.root,new Gt([],{}),R,N);const re=function Un(T,w,E){if(T.isAbsolute)return new lr(w.root,!0,0);if(-1===E.snapshot._lastPathIndex){const j=E.snapshot._urlSegment;return new lr(j,j===w.root,0)}const R=_e(T.commands[0])?0:1;return function Oi(T,w,E){let R=T,N=w,j=E;for(;j>N;){if(j-=N,R=R.parent,!R)throw new Error("Invalid number of '../'");N=R.segments.length}return new lr(R,!1,N-j)}(E.snapshot._urlSegment,E.snapshot._lastPathIndex+R,T.numberOfDoubleDots)}(j,w,T),Q=re.processChildren?Fs(re.segmentGroup,re.index,j.commands):Ls(re.segmentGroup,re.index,j.commands);return Xe(w.root,re.segmentGroup,Q,R,N)}(Me,this.currentUrlTree,E,jt,null!=Jt?Jt:null)}navigateByUrl(E,R={skipLocationChange:!1}){const N=gi(E)?E:this.parseUrl(E),j=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(j,"imperative",null,R)}navigate(E,R={skipLocationChange:!1}){return function nu(T){for(let w=0;w<T.length;w++){const E=T[w];if(null==E)throw new Error(`The requested path contains ${E} segment at index ${w}`)}}(E),this.navigateByUrl(this.createUrlTree(E,R),R)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let R;try{R=this.urlSerializer.parse(E)}catch(N){R=this.malformedUriErrorHandler(N,this.urlSerializer,E)}return R}isActive(E,R){let N;if(N=!0===R?Object.assign({},lo):!1===R?Object.assign({},Wr):R,gi(E))return de(this.currentUrlTree,E,N);const j=this.parseUrl(E);return de(this.currentUrlTree,j,N)}removeEmptyProps(E){return Object.keys(E).reduce((R,N)=>{const j=E[N];return null!=j&&(R[N]=j),R},{})}processNavigations(){this.navigations.subscribe(E=>{this.navigated=!0,this.lastSuccessfulId=E.id,this.currentPageId=E.targetPageId,this.events.next(new ir(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,E.resolve(!0)},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)})}scheduleNavigation(E,R,N,j,re){var Q,X;if(this.disposed)return Promise.resolve(!1);let Me,Jt,jt;re?(Me=re.resolve,Jt=re.reject,jt=re.promise):jt=new Promise((Yi,Ss)=>{Me=Yi,Jt=Ss});const cr=++this.navigationId;let kn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(N=this.location.getState()),kn=N&&N.\u0275routerPageId?N.\u0275routerPageId:j.replaceUrl||j.skipLocationChange?null!==(Q=this.browserPageId)&&void 0!==Q?Q:0:(null!==(X=this.browserPageId)&&void 0!==X?X:0)+1):kn=0,this.setTransition({id:cr,targetPageId:kn,source:R,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:E,extras:j,resolve:Me,reject:Jt,promise:jt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),jt.catch(Yi=>Promise.reject(Yi))}setBrowserUrl(E,R){const N=this.urlSerializer.serialize(E),j=Object.assign(Object.assign({},R.extras.state),this.generateNgRouterState(R.id,R.targetPageId));this.location.isCurrentPathEqualTo(N)||R.extras.replaceUrl?this.location.replaceState(N,"",j):this.location.go(N,"",j)}restoreHistory(E,R=!1){var N,j;if("computed"===this.canceledNavigationResolution){const re=this.currentPageId-E.targetPageId;"popstate"!==E.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(N=this.currentNavigation)||void 0===N?void 0:N.finalUrl)||0===re?this.currentUrlTree===(null===(j=this.currentNavigation)||void 0===j?void 0:j.finalUrl)&&0===re&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(re)}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(E,R){const N=new ri(E.id,this.serializeUrl(E.extractedUrl),R);this.triggerEvent(N),E.resolve(!1)}generateNgRouterState(E,R){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:R}:{navigationId:E}}}return T.\u0275fac=function(E){b.$Z()},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac}),T})();function Ki(T){return"imperative"!==T}class Iu{}class iu{preload(w,E){return(0,Re.of)(null)}}let ei=(()=>{class T{constructor(E,R,N,j){this.router=E,this.injector=N,this.preloadingStrategy=j,this.loader=new eu(N,R,X=>E.triggerEvent(new xn(X)),X=>E.triggerEvent(new ii(X)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Oe.h)(E=>E instanceof ir),(0,Rt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const E=this.injector.get(b.h0i);return this.processRoutes(E,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,R){const N=[];for(const j of R)if(j.loadChildren&&!j.canLoad&&j._loadedConfig){const re=j._loadedConfig;N.push(this.processRoutes(re.module,re.routes))}else j.loadChildren&&!j.canLoad?N.push(this.preloadConfig(E,j)):j.children&&N.push(this.processRoutes(E,j.children));return(0,De.D)(N).pipe((0,qt.J)(),(0,Ve.U)(j=>{}))}preloadConfig(E,R){return this.preloadingStrategy.preload(R,()=>(R._loadedConfig?(0,Re.of)(R._loadedConfig):this.loader.load(E.injector,R)).pipe((0,In.z)(j=>(R._loadedConfig=j,this.processRoutes(j.module,j.routes)))))}}return T.\u0275fac=function(E){return new(E||T)(b.LFG(Ii),b.LFG(b.Sil),b.LFG(b.zs3),b.LFG(Iu))},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac}),T})(),js=(()=>{class T{constructor(E,R,N={}){this.router=E,this.viewportScroller=R,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(E=>{E instanceof Ir?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof ir&&(this.lastId=E.id,this.scheduleScrollEvent(E,this.router.parseUrl(E.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(E=>{E instanceof si&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,R){this.router.triggerEvent(new si(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,R))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return T.\u0275fac=function(E){b.$Z()},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac}),T})();const Cs=new b.OlP("ROUTER_CONFIGURATION"),is=new b.OlP("ROUTER_FORROOT_GUARD"),ss=[Mn.Ye,{provide:Nr,useClass:Xi},{provide:Ii,useFactory:function dl(T,w,E,R,N,j,re={},Q,X){const Me=new Ii(null,T,w,E,R,N,Vr(j));return Q&&(Me.urlHandlingStrategy=Q),X&&(Me.routeReuseStrategy=X),function qi(T,w){T.errorHandler&&(w.errorHandler=T.errorHandler),T.malformedUriErrorHandler&&(w.malformedUriErrorHandler=T.malformedUriErrorHandler),T.onSameUrlNavigation&&(w.onSameUrlNavigation=T.onSameUrlNavigation),T.paramsInheritanceStrategy&&(w.paramsInheritanceStrategy=T.paramsInheritanceStrategy),T.relativeLinkResolution&&(w.relativeLinkResolution=T.relativeLinkResolution),T.urlUpdateStrategy&&(w.urlUpdateStrategy=T.urlUpdateStrategy),T.canceledNavigationResolution&&(w.canceledNavigationResolution=T.canceledNavigationResolution)}(re,Me),re.enableTracing&&Me.events.subscribe(Jt=>{var jt,cr;null===(jt=console.group)||void 0===jt||jt.call(console,`Router Event: ${Jt.constructor.name}`),console.log(Jt.toString()),console.log(Jt),null===(cr=console.groupEnd)||void 0===cr||cr.call(console)}),Me},deps:[Nr,ns,Mn.Ye,b.zs3,b.Sil,Ma,Cs,[class xa{},new b.FiY],[class ao{},new b.FiY]]},ns,{provide:Bi,useFactory:function Do(T){return T.routerState.root},deps:[Ii]},ei,iu,class ru{preload(w,E){return E().pipe(ke(()=>(0,Re.of)(null)))}},{provide:Cs,useValue:{enableTracing:!1}}];function Pa(){return new b.PXZ("Router",Ii)}let Er=(()=>{class T{constructor(E,R){}static forRoot(E,R){return{ngModule:T,providers:[ss,Gs(E),{provide:is,useFactory:Hs,deps:[[Ii,new b.FiY,new b.tp0]]},{provide:Cs,useValue:R||{}},{provide:Mn.S$,useFactory:$s,deps:[Mn.lw,[new b.tBr(Mn.mr),new b.FiY],Cs]},{provide:js,useFactory:Uo,deps:[Ii,Mn.EM,Cs]},{provide:Iu,useExisting:R&&R.preloadingStrategy?R.preloadingStrategy:iu},{provide:b.PXZ,multi:!0,useFactory:Pa},[Vo,{provide:b.ip1,multi:!0,useFactory:Br,deps:[Vo]},{provide:mi,useFactory:os,deps:[Vo]},{provide:b.tb,multi:!0,useExisting:mi}]]}}static forChild(E){return{ngModule:T,providers:[Gs(E)]}}}return T.\u0275fac=function(E){return new(E||T)(b.LFG(is,8),b.LFG(Ii,8))},T.\u0275mod=b.oAB({type:T}),T.\u0275inj=b.cJS({}),T})();function Uo(T,w,E){return E.scrollOffset&&w.setOffset(E.scrollOffset),new js(T,w,E)}function $s(T,w,E={}){return E.useHash?new Mn.Do(T,w):new Mn.b0(T,w)}function Hs(T){return"guarded"}function Gs(T){return[{provide:b.deG,multi:!0,useValue:T},{provide:Ma,multi:!0,useValue:T}]}let Vo=(()=>{class T{constructor(E){this.injector=E,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new L.x}appInitializer(){return this.injector.get(Mn.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let R=null;const N=new Promise(Q=>R=Q),j=this.injector.get(Ii),re=this.injector.get(Cs);return"disabled"===re.initialNavigation?(j.setUpLocationChangeListener(),R(!0)):"enabled"===re.initialNavigation||"enabledBlocking"===re.initialNavigation?(j.hooks.afterPreactivation=()=>this.initNavigation?(0,Re.of)(null):(this.initNavigation=!0,R(!0),this.resultOfPreactivationDone),j.initialNavigation()):R(!0),N})}bootstrapListener(E){const R=this.injector.get(Cs),N=this.injector.get(ei),j=this.injector.get(js),re=this.injector.get(Ii),Q=this.injector.get(b.z2F);E===Q.components[0]&&(("enabledNonBlocking"===R.initialNavigation||void 0===R.initialNavigation)&&re.initialNavigation(),N.setUpPreloading(),j.init(),re.resetRootComponentType(Q.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return T.\u0275fac=function(E){return new(E||T)(b.LFG(b.zs3))},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac}),T})();function Br(T){return T.appInitializer.bind(T)}function os(T){return T.bootstrapListener.bind(T)}const mi=new b.OlP("Router Initializer")},3942:(Mt,Ue,B)=>{B.d(Ue,{Z:()=>Qe});var b=B(2090),L=B(4859),q=B(9681),Ee=B(1877);class he{constructor(Ge,Ke){this._delegate=Ge,this.firebase=Ke,(0,q._addComponent)(Ge,new L.wA("app-compat",()=>this,"PUBLIC")),this.container=Ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this._delegate.automaticDataCollectionEnabled=Ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ge=>{this._delegate.checkDestroyed(),Ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(Ge,Ke=q._DEFAULT_ENTRY_NAME){var _t;this._delegate.checkDestroyed();const xt=this._delegate.container.getProvider(Ge);return!xt.isInitialized()&&"EXPLICIT"===(null===(_t=xt.getComponent())||void 0===_t?void 0:_t.instantiationMode)&&xt.initialize(),xt.getImmediate({identifier:Ke})}_removeServiceInstance(Ge,Ke=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ge).clearInstance(Ke)}_addComponent(Ge){(0,q._addComponent)(this._delegate,Ge)}_addOrOverwriteComponent(Ge){(0,q._addOrOverwriteComponent)(this._delegate,Ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new b.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ae=function Se(){const vt=function Ce(vt){const Ge={},Ke={__esModule:!0,initializeApp:function et(mt,Pe={}){const fe=q.initializeApp(mt,Pe);if((0,b.r3)(Ge,fe.name))return Ge[fe.name];const ke=new vt(fe,Ke);return Ge[fe.name]=ke,ke},app:xt,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function ue(mt){const Pe=mt.name,fe=Pe.replace("-compat","");if(q._registerComponent(mt)&&"PUBLIC"===mt.type){const ke=(Oe=xt())=>{if("function"!=typeof Oe[fe])throw Ie.create("invalid-app-argument",{appName:Pe});return Oe[fe]()};void 0!==mt.serviceProps&&(0,b.ZB)(ke,mt.serviceProps),Ke[fe]=ke,vt.prototype[fe]=function(...Oe){return this._getService.bind(this,Pe).apply(this,mt.multipleInstances?Oe:[])}}return"PUBLIC"===mt.type?Ke[fe]:null},removeApp:function _t(mt){delete Ge[mt]},useAsService:function gt(mt,Pe){return"serverAuth"===Pe?null:Pe},modularAPIs:q}};function xt(mt){if(!(0,b.r3)(Ge,mt=mt||q._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:mt});return Ge[mt]}return Ke.default=Ke,Object.defineProperty(Ke,"apps",{get:function Re(){return Object.keys(Ge).map(mt=>Ge[mt])}}),xt.App=vt,Ke}(he);return vt.INTERNAL=Object.assign(Object.assign({},vt.INTERNAL),{createFirebaseNamespace:Se,extendNamespace:function Ge(Ke){(0,b.ZB)(vt,Ke)},createSubscribe:b.ne,ErrorFactory:b.LL,deepExtend:b.ZB}),vt}(),oe=new Ee.Yd("@firebase/app-compat");if((0,b.jU)()&&void 0!==self.firebase){oe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const vt=self.firebase.SDK_VERSION;vt&&vt.indexOf("LITE")>=0&&oe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qe=ae;!function qe(vt){(0,q.registerVersion)("@firebase/app-compat","0.1.21",vt)}()},9681:(Mt,Ue,B)=>{B.r(Ue),B.d(Ue,{FirebaseError:()=>Ee.ZR,SDK_VERSION:()=>ir,_DEFAULT_ENTRY_NAME:()=>Ve,_addComponent:()=>ot,_addOrOverwriteComponent:()=>Rt,_apps:()=>te,_clearComponents:()=>qt,_components:()=>$e,_getProvider:()=>In,_registerComponent:()=>lt,_removeServiceInstance:()=>Ot,deleteApp:()=>br,getApp:()=>Pr,getApps:()=>Hn,initializeApp:()=>ri,onLog:()=>Or,registerVersion:()=>zn,setLogLevel:()=>xn});var b=B(5861),L=B(4859),q=B(1877),Ee=B(2090);class he{constructor(Ze){this.container=Ze}getPlatformInfoString(){return this.container.getProviders().map(Ct=>{if(function De(Nt){const Ze=Nt.getComponent();return"VERSION"===(null==Ze?void 0:Ze.type)}(Ct)){const Zt=Ct.getImmediate();return`${Zt.library}/${Zt.version}`}return null}).filter(Ct=>Ct).join(" ")}}const Ie="@firebase/app",Se=new q.Yd("@firebase/app"),Ve="[DEFAULT]",tt={[Ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},te=new Map,$e=new Map;function ot(Nt,Ze){try{Nt.container.addComponent(Ze)}catch(Ct){Se.debug(`Component ${Ze.name} failed to register with FirebaseApp ${Nt.name}`,Ct)}}function Rt(Nt,Ze){Nt.container.addOrOverwriteComponent(Ze)}function lt(Nt){const Ze=Nt.name;if($e.has(Ze))return Se.debug(`There were multiple attempts to register component ${Ze}.`),!1;$e.set(Ze,Nt);for(const Ct of te.values())ot(Ct,Nt);return!0}function In(Nt,Ze){const Ct=Nt.container.getProvider("heartbeat").getImmediate({optional:!0});return Ct&&Ct.triggerHeartbeat(),Nt.container.getProvider(Ze)}function Ot(Nt,Ze,Ct=Ve){In(Nt,Ze).clearInstance(Ct)}function qt(){$e.clear()}const $n=new Ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ir{constructor(Ze,Ct,Zt){this._isDeleted=!1,this._options=Object.assign({},Ze),this._config=Object.assign({},Ct),this._name=Ct.name,this._automaticDataCollectionEnabled=Ct.automaticDataCollectionEnabled,this._container=Zt,this.container.addComponent(new L.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ze){this._isDeleted=Ze}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}}const ir="9.6.10";function ri(Nt,Ze={}){"object"!=typeof Ze&&(Ze={name:Ze});const Ct=Object.assign({name:Ve,automaticDataCollectionEnabled:!1},Ze),Zt=Ct.name;if("string"!=typeof Zt||!Zt)throw $n.create("bad-app-name",{appName:String(Zt)});const bn=te.get(Zt);if(bn){if((0,Ee.vZ)(Nt,bn.options)&&(0,Ee.vZ)(Ct,bn.config))return bn;throw $n.create("duplicate-app",{appName:Zt})}const _n=new L.H0(Zt);for(const ee of $e.values())_n.addComponent(ee);const de=new Ir(Nt,Ct,_n);return te.set(Zt,de),de}function Pr(Nt=Ve){const Ze=te.get(Nt);if(!Ze)throw $n.create("no-app",{appName:Nt});return Ze}function Hn(){return Array.from(te.values())}function br(Nt){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,b.Z)(function*(Nt){const Ze=Nt.name;te.has(Ze)&&(te.delete(Ze),yield Promise.all(Nt.container.getProviders().map(Ct=>Ct.delete())),Nt.isDeleted=!0)})).apply(this,arguments)}function zn(Nt,Ze,Ct){var Zt;let bn=null!==(Zt=tt[Nt])&&void 0!==Zt?Zt:Nt;Ct&&(bn+=`-${Ct}`);const _n=bn.match(/\s|\//),de=Ze.match(/\s|\//);if(_n||de){const ee=[`Unable to register library "${bn}" with version "${Ze}":`];return _n&&ee.push(`library name "${bn}" contains illegal characters (whitespace or "/")`),_n&&de&&ee.push("and"),de&&ee.push(`version name "${Ze}" contains illegal characters (whitespace or "/")`),void Se.warn(ee.join(" "))}lt(new L.wA(`${bn}-version`,()=>({library:bn,version:Ze}),"VERSION"))}function Or(Nt,Ze){if(null!==Nt&&"function"!=typeof Nt)throw $n.create("invalid-log-argument");(0,q.Am)(Nt,Ze)}function xn(Nt){(0,q.Ub)(Nt)}const or="firebase-heartbeat-store";let $r=null;function Ui(){return $r||($r=(0,Ee.X3)("firebase-heartbeat-database",1,(Nt,Ze)=>{0===Ze&&Nt.createObjectStore(or)}).catch(Nt=>{throw $n.create("storage-open",{originalErrorMessage:Nt.message})})),$r}function Dt(){return(Dt=(0,b.Z)(function*(Nt){try{return(yield Ui()).transaction(or).objectStore(or).get(dr(Nt))}catch(Ze){throw $n.create("storage-get",{originalErrorMessage:Ze.message})}})).apply(this,arguments)}function Bt(Nt,Ze){return zt.apply(this,arguments)}function zt(){return(zt=(0,b.Z)(function*(Nt,Ze){try{const Zt=(yield Ui()).transaction(or,"readwrite");return yield Zt.objectStore(or).put(Ze,dr(Nt)),Zt.complete}catch(Ct){throw $n.create("storage-set",{originalErrorMessage:Ct.message})}})).apply(this,arguments)}function dr(Nt){return`${Nt.name}!${Nt.options.appId}`}class Ji{constructor(Ze){this.container=Ze,this._heartbeatsCache=null;const Ct=this.container.getProvider("app").getImmediate();this._storage=new Ht(Ct),this._heartbeatsCachePromise=this._storage.read().then(Zt=>(this._heartbeatsCache=Zt,Zt))}triggerHeartbeat(){var Ze=this;return(0,b.Z)(function*(){const Zt=Ze.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),bn=Jr();if(null===Ze._heartbeatsCache&&(Ze._heartbeatsCache=yield Ze._heartbeatsCachePromise),Ze._heartbeatsCache.lastSentHeartbeatDate!==bn&&!Ze._heartbeatsCache.heartbeats.some(_n=>_n.date===bn))return Ze._heartbeatsCache.heartbeats.push({date:bn,agent:Zt}),Ze._heartbeatsCache.heartbeats=Ze._heartbeatsCache.heartbeats.filter(_n=>{const de=new Date(_n.date).valueOf();return Date.now()-de<=2592e6}),Ze._storage.overwrite(Ze._heartbeatsCache)})()}getHeartbeatsHeader(){var Ze=this;return(0,b.Z)(function*(){if(null===Ze._heartbeatsCache&&(yield Ze._heartbeatsCachePromise),null===Ze._heartbeatsCache||0===Ze._heartbeatsCache.heartbeats.length)return"";const Ct=Jr(),{heartbeatsToSend:Zt,unsentEntries:bn}=function ar(Nt,Ze=1024){const Ct=[];let Zt=Nt.slice();for(const bn of Nt){const _n=Ct.find(de=>de.agent===bn.agent);if(_n){if(_n.dates.push(bn.date),Vr(Ct)>Ze){_n.dates.pop();break}}else if(Ct.push({agent:bn.agent,dates:[bn.date]}),Vr(Ct)>Ze){Ct.pop();break}Zt=Zt.slice(1)}return{heartbeatsToSend:Ct,unsentEntries:Zt}}(Ze._heartbeatsCache.heartbeats),_n=(0,Ee.L)(JSON.stringify({version:2,heartbeats:Zt}));return Ze._heartbeatsCache.lastSentHeartbeatDate=Ct,bn.length>0?(Ze._heartbeatsCache.heartbeats=bn,yield Ze._storage.overwrite(Ze._heartbeatsCache)):(Ze._heartbeatsCache.heartbeats=[],Ze._storage.overwrite(Ze._heartbeatsCache)),_n})()}}function Jr(){return(new Date).toISOString().substring(0,10)}class Ht{constructor(Ze){this.app=Ze,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,b.Z)(function*(){return!!(0,Ee.hl)()&&(0,Ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ze=this;return(0,b.Z)(function*(){return(yield Ze._canUseIndexedDBPromise)&&(yield function si(Nt){return Dt.apply(this,arguments)}(Ze.app))||{heartbeats:[]}})()}overwrite(Ze){var Ct=this;return(0,b.Z)(function*(){var Zt;if(yield Ct._canUseIndexedDBPromise){const _n=yield Ct.read();return Bt(Ct.app,{lastSentHeartbeatDate:null!==(Zt=Ze.lastSentHeartbeatDate)&&void 0!==Zt?Zt:_n.lastSentHeartbeatDate,heartbeats:Ze.heartbeats})}})()}add(Ze){var Ct=this;return(0,b.Z)(function*(){var Zt;if(yield Ct._canUseIndexedDBPromise){const _n=yield Ct.read();return Bt(Ct.app,{lastSentHeartbeatDate:null!==(Zt=Ze.lastSentHeartbeatDate)&&void 0!==Zt?Zt:_n.lastSentHeartbeatDate,heartbeats:[..._n.heartbeats,...Ze.heartbeats]})}})()}}function Vr(Nt){return(0,Ee.L)(JSON.stringify({version:2,heartbeats:Nt})).length}!function vn(Nt){lt(new L.wA("platform-logger",Ze=>new he(Ze),"PRIVATE")),lt(new L.wA("heartbeat",Ze=>new Ji(Ze),"PRIVATE")),zn(Ie,"0.7.20",Nt),zn(Ie,"0.7.20","esm2017"),zn("fire-js","")}("")},4859:(Mt,Ue,B)=>{B.d(Ue,{wA:()=>q,H0:()=>Ce});var b=B(5861),L=B(2090);class q{constructor(ae,oe,pe){this.name=ae,this.instanceFactory=oe,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ae){return this.instantiationMode=ae,this}setMultipleInstances(ae){return this.multipleInstances=ae,this}setServiceProps(ae){return this.serviceProps=ae,this}setInstanceCreatedCallback(ae){return this.onInstanceCreated=ae,this}}const Ee="[DEFAULT]";class he{constructor(ae,oe){this.name=ae,this.container=oe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ae){const oe=this.normalizeInstanceIdentifier(ae);if(!this.instancesDeferred.has(oe)){const pe=new L.BH;if(this.instancesDeferred.set(oe,pe),this.isInitialized(oe)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:oe});at&&pe.resolve(at)}catch(at){}}return this.instancesDeferred.get(oe).promise}getImmediate(ae){var oe;const pe=this.normalizeInstanceIdentifier(null==ae?void 0:ae.identifier),at=null!==(oe=null==ae?void 0:ae.optional)&&void 0!==oe&&oe;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(qe){if(at)return null;throw qe}}getComponent(){return this.component}setComponent(ae){if(ae.name!==this.name)throw Error(`Mismatching Component ${ae.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ae,this.shouldAutoInitialize()){if(function Ie(Se){return"EAGER"===Se.instantiationMode}(ae))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch(oe){}for(const[oe,pe]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(oe);try{const qe=this.getOrInitializeService({instanceIdentifier:at});pe.resolve(qe)}catch(qe){}}}}clearInstance(ae=Ee){this.instancesDeferred.delete(ae),this.instancesOptions.delete(ae),this.instances.delete(ae)}delete(){var ae=this;return(0,b.Z)(function*(){const oe=Array.from(ae.instances.values());yield Promise.all([...oe.filter(pe=>"INTERNAL"in pe).map(pe=>pe.INTERNAL.delete()),...oe.filter(pe=>"_delete"in pe).map(pe=>pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ae=Ee){return this.instances.has(ae)}getOptions(ae=Ee){return this.instancesOptions.get(ae)||{}}initialize(ae={}){const{options:oe={}}=ae,pe=this.normalizeInstanceIdentifier(ae.instanceIdentifier);if(this.isInitialized(pe))throw Error(`${this.name}(${pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:pe,options:oe});for(const[qe,Qe]of this.instancesDeferred.entries())pe===this.normalizeInstanceIdentifier(qe)&&Qe.resolve(at);return at}onInit(ae,oe){var pe;const at=this.normalizeInstanceIdentifier(oe),qe=null!==(pe=this.onInitCallbacks.get(at))&&void 0!==pe?pe:new Set;qe.add(ae),this.onInitCallbacks.set(at,qe);const Qe=this.instances.get(at);return Qe&&ae(Qe,at),()=>{qe.delete(ae)}}invokeOnInitCallbacks(ae,oe){const pe=this.onInitCallbacks.get(oe);if(pe)for(const at of pe)try{at(ae,oe)}catch(qe){}}getOrInitializeService({instanceIdentifier:ae,options:oe={}}){let pe=this.instances.get(ae);if(!pe&&this.component&&(pe=this.component.instanceFactory(this.container,{instanceIdentifier:(Se=ae,Se===Ee?void 0:Se),options:oe}),this.instances.set(ae,pe),this.instancesOptions.set(ae,oe),this.invokeOnInitCallbacks(pe,ae),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ae,pe)}catch(at){}var Se;return pe||null}normalizeInstanceIdentifier(ae=Ee){return this.component?this.component.multipleInstances?ae:Ee:ae}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ce{constructor(ae){this.name=ae,this.providers=new Map}addComponent(ae){const oe=this.getProvider(ae.name);if(oe.isComponentSet())throw new Error(`Component ${ae.name} has already been registered with ${this.name}`);oe.setComponent(ae)}addOrOverwriteComponent(ae){this.getProvider(ae.name).isComponentSet()&&this.providers.delete(ae.name),this.addComponent(ae)}getProvider(ae){if(this.providers.has(ae))return this.providers.get(ae);const oe=new he(ae,this);return this.providers.set(ae,oe),oe}getProviders(){return Array.from(this.providers.values())}}},1877:(Mt,Ue,B)=>{B.d(Ue,{in:()=>L,Yd:()=>Ie,Ub:()=>Ce,Am:()=>Se});const b=[];var L=(()=>{return(ae=L||(L={}))[ae.DEBUG=0]="DEBUG",ae[ae.VERBOSE=1]="VERBOSE",ae[ae.INFO=2]="INFO",ae[ae.WARN=3]="WARN",ae[ae.ERROR=4]="ERROR",ae[ae.SILENT=5]="SILENT",L;var ae})();const q={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},Ee=L.INFO,he={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},De=(ae,oe,...pe)=>{if(oe<ae.logLevel)return;const at=(new Date).toISOString(),qe=he[oe];if(!qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${oe})`);console[qe](`[${at}]  ${ae.name}:`,...pe)};class Ie{constructor(oe){this.name=oe,this._logLevel=Ee,this._logHandler=De,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(oe){if(!(oe in L))throw new TypeError(`Invalid value "${oe}" assigned to \`logLevel\``);this._logLevel=oe}setLogLevel(oe){this._logLevel="string"==typeof oe?q[oe]:oe}get logHandler(){return this._logHandler}set logHandler(oe){if("function"!=typeof oe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=oe}get userLogHandler(){return this._userLogHandler}set userLogHandler(oe){this._userLogHandler=oe}debug(...oe){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...oe),this._logHandler(this,L.DEBUG,...oe)}log(...oe){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...oe),this._logHandler(this,L.VERBOSE,...oe)}info(...oe){this._userLogHandler&&this._userLogHandler(this,L.INFO,...oe),this._logHandler(this,L.INFO,...oe)}warn(...oe){this._userLogHandler&&this._userLogHandler(this,L.WARN,...oe),this._logHandler(this,L.WARN,...oe)}error(...oe){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...oe),this._logHandler(this,L.ERROR,...oe)}}function Ce(ae){b.forEach(oe=>{oe.setLogLevel(ae)})}function Se(ae,oe){for(const pe of b){let at=null;oe&&oe.level&&(at=q[oe.level]),pe.userLogHandler=null===ae?null:(qe,Qe,...vt)=>{const Ge=vt.map(Ke=>{if(null==Ke)return null;if("string"==typeof Ke)return Ke;if("number"==typeof Ke||"boolean"==typeof Ke)return Ke.toString();if(Ke instanceof Error)return Ke.message;try{return JSON.stringify(Ke)}catch(_t){return null}}).filter(Ke=>Ke).join(" ");Qe>=(null!=at?at:qe.logLevel)&&ae({level:L[Qe].toLowerCase(),message:Ge,args:vt,type:qe.name})}}}},8995:(Mt,Ue,B)=>{B.d(Ue,{Zw:()=>qe,aw:()=>pn,X$:()=>Vt,sK:()=>Je});var b=B(5e3),L=B(9751),q=B(576);function Ee(Ve){return!!Ve&&(Ve instanceof L.y||(0,q.m)(Ve.lift)&&(0,q.m)(Ve.subscribe))}var he=B(9646),De=B(4128),Ie=B(7272),Ce=B(9770),Se=B(5698),ae=B(3151),oe=B(4004),pe=B(4351),at=B(3900);class qe{}let Qe=(()=>{class Ve extends qe{getTranslation(te){return(0,he.of)({})}}return Ve.\u0275fac=function(){let tt;return function($e){return(tt||(tt=b.n5z(Ve)))($e||Ve)}}(),Ve.\u0275prov=b.Yz7({token:Ve,factory:Ve.\u0275fac}),Ve})();class vt{}let Ge=(()=>{class Ve{handle(te){return te.key}}return Ve.\u0275fac=function(te){return new(te||Ve)},Ve.\u0275prov=b.Yz7({token:Ve,factory:Ve.\u0275fac}),Ve})();function Ke(Ve,tt){if(Ve===tt)return!0;if(null===Ve||null===tt)return!1;if(Ve!=Ve&&tt!=tt)return!0;let ot,Rt,lt,te=typeof Ve;if(te==typeof tt&&"object"==te){if(!Array.isArray(Ve)){if(Array.isArray(tt))return!1;for(Rt in lt=Object.create(null),Ve){if(!Ke(Ve[Rt],tt[Rt]))return!1;lt[Rt]=!0}for(Rt in tt)if(!(Rt in lt)&&void 0!==tt[Rt])return!1;return!0}if(!Array.isArray(tt))return!1;if((ot=Ve.length)==tt.length){for(Rt=0;Rt<ot;Rt++)if(!Ke(Ve[Rt],tt[Rt]))return!1;return!0}}return!1}function _t(Ve){return null!=Ve}function xt(Ve){return Ve&&"object"==typeof Ve&&!Array.isArray(Ve)}function et(Ve,tt){let te=Object.assign({},Ve);return xt(Ve)&&xt(tt)&&Object.keys(tt).forEach($e=>{xt(tt[$e])?$e in Ve?te[$e]=et(Ve[$e],tt[$e]):Object.assign(te,{[$e]:tt[$e]}):Object.assign(te,{[$e]:tt[$e]})}),te}class Re{}let ue=(()=>{class Ve extends Re{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(te,$e){let ot;return ot="string"==typeof te?this.interpolateString(te,$e):"function"==typeof te?this.interpolateFunction(te,$e):te,ot}getValue(te,$e){let ot="string"==typeof $e?$e.split("."):[$e];$e="";do{$e+=ot.shift(),!_t(te)||!_t(te[$e])||"object"!=typeof te[$e]&&ot.length?ot.length?$e+=".":te=void 0:(te=te[$e],$e="")}while(ot.length);return te}interpolateFunction(te,$e){return te($e)}interpolateString(te,$e){return $e?te.replace(this.templateMatcher,(ot,Rt)=>{let lt=this.getValue($e,Rt);return _t(lt)?lt:ot}):te}}return Ve.\u0275fac=function(){let tt;return function($e){return(tt||(tt=b.n5z(Ve)))($e||Ve)}}(),Ve.\u0275prov=b.Yz7({token:Ve,factory:Ve.\u0275fac}),Ve})();class gt{}let mt=(()=>{class Ve extends gt{compile(te,$e){return te}compileTranslations(te,$e){return te}}return Ve.\u0275fac=function(){let tt;return function($e){return(tt||(tt=b.n5z(Ve)))($e||Ve)}}(),Ve.\u0275prov=b.Yz7({token:Ve,factory:Ve.\u0275fac}),Ve})();class Pe{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new b.vpe,this.onLangChange=new b.vpe,this.onDefaultLangChange=new b.vpe}}const fe=new b.OlP("USE_STORE"),ke=new b.OlP("USE_DEFAULT_LANG"),Oe=new b.OlP("DEFAULT_LANGUAGE"),le=new b.OlP("USE_EXTEND");let Je=(()=>{class Ve{constructor(te,$e,ot,Rt,lt,In=!0,Ot=!1,qt=!1,Mn){this.store=te,this.currentLoader=$e,this.compiler=ot,this.parser=Rt,this.missingTranslationHandler=lt,this.useDefaultLang=In,this.isolate=Ot,this.extend=qt,this.pending=!1,this._onTranslationChange=new b.vpe,this._onLangChange=new b.vpe,this._onDefaultLangChange=new b.vpe,this._langs=[],this._translations={},this._translationRequests={},Mn&&this.setDefaultLang(Mn)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(te){this.isolate?this._defaultLang=te:this.store.defaultLang=te}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(te){this.isolate?this._currentLang=te:this.store.currentLang=te}get langs(){return this.isolate?this._langs:this.store.langs}set langs(te){this.isolate?this._langs=te:this.store.langs=te}get translations(){return this.isolate?this._translations:this.store.translations}set translations(te){this.isolate?this._translations=te:this.store.translations=te}setDefaultLang(te){if(te===this.defaultLang)return;let $e=this.retrieveTranslations(te);void 0!==$e?(null==this.defaultLang&&(this.defaultLang=te),$e.pipe((0,Se.q)(1)).subscribe(ot=>{this.changeDefaultLang(te)})):this.changeDefaultLang(te)}getDefaultLang(){return this.defaultLang}use(te){if(te===this.currentLang)return(0,he.of)(this.translations[te]);let $e=this.retrieveTranslations(te);return void 0!==$e?(this.currentLang||(this.currentLang=te),$e.pipe((0,Se.q)(1)).subscribe(ot=>{this.changeLang(te)}),$e):(this.changeLang(te),(0,he.of)(this.translations[te]))}retrieveTranslations(te){let $e;return(void 0===this.translations[te]||this.extend)&&(this._translationRequests[te]=this._translationRequests[te]||this.getTranslation(te),$e=this._translationRequests[te]),$e}getTranslation(te){this.pending=!0;const $e=this.currentLoader.getTranslation(te).pipe((0,ae.d)(1),(0,Se.q)(1));return this.loadingTranslations=$e.pipe((0,oe.U)(ot=>this.compiler.compileTranslations(ot,te)),(0,ae.d)(1),(0,Se.q)(1)),this.loadingTranslations.subscribe({next:ot=>{this.translations[te]=this.extend&&this.translations[te]?Object.assign(Object.assign({},ot),this.translations[te]):ot,this.updateLangs(),this.pending=!1},error:ot=>{this.pending=!1}}),$e}setTranslation(te,$e,ot=!1){$e=this.compiler.compileTranslations($e,te),this.translations[te]=(ot||this.extend)&&this.translations[te]?et(this.translations[te],$e):$e,this.updateLangs(),this.onTranslationChange.emit({lang:te,translations:this.translations[te]})}getLangs(){return this.langs}addLangs(te){te.forEach($e=>{-1===this.langs.indexOf($e)&&this.langs.push($e)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(te,$e,ot){let Rt;if($e instanceof Array){let lt={},In=!1;for(let Ot of $e)lt[Ot]=this.getParsedResult(te,Ot,ot),Ee(lt[Ot])&&(In=!0);if(In){const Ot=$e.map(qt=>Ee(lt[qt])?lt[qt]:(0,he.of)(lt[qt]));return(0,De.D)(Ot).pipe((0,oe.U)(qt=>{let Mn={};return qt.forEach(($n,Ir)=>{Mn[$e[Ir]]=$n}),Mn}))}return lt}if(te&&(Rt=this.parser.interpolate(this.parser.getValue(te,$e),ot)),void 0===Rt&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(Rt=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],$e),ot)),void 0===Rt){let lt={key:$e,translateService:this};void 0!==ot&&(lt.interpolateParams=ot),Rt=this.missingTranslationHandler.handle(lt)}return void 0!==Rt?Rt:$e}get(te,$e){if(!_t(te)||!te.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,pe.b)(ot=>Ee(ot=this.getParsedResult(ot,te,$e))?ot:(0,he.of)(ot)));{let ot=this.getParsedResult(this.translations[this.currentLang],te,$e);return Ee(ot)?ot:(0,he.of)(ot)}}getStreamOnTranslationChange(te,$e){if(!_t(te)||!te.length)throw new Error('Parameter "key" required');return(0,Ie.z)((0,Ce.P)(()=>this.get(te,$e)),this.onTranslationChange.pipe((0,at.w)(ot=>{const Rt=this.getParsedResult(ot.translations,te,$e);return"function"==typeof Rt.subscribe?Rt:(0,he.of)(Rt)})))}stream(te,$e){if(!_t(te)||!te.length)throw new Error('Parameter "key" required');return(0,Ie.z)((0,Ce.P)(()=>this.get(te,$e)),this.onLangChange.pipe((0,at.w)(ot=>{const Rt=this.getParsedResult(ot.translations,te,$e);return Ee(Rt)?Rt:(0,he.of)(Rt)})))}instant(te,$e){if(!_t(te)||!te.length)throw new Error('Parameter "key" required');let ot=this.getParsedResult(this.translations[this.currentLang],te,$e);if(Ee(ot)){if(te instanceof Array){let Rt={};return te.forEach((lt,In)=>{Rt[te[In]]=te[In]}),Rt}return te}return ot}set(te,$e,ot=this.currentLang){this.translations[ot][te]=this.compiler.compile($e,ot),this.updateLangs(),this.onTranslationChange.emit({lang:ot,translations:this.translations[ot]})}changeLang(te){this.currentLang=te,this.onLangChange.emit({lang:te,translations:this.translations[te]}),null==this.defaultLang&&this.changeDefaultLang(te)}changeDefaultLang(te){this.defaultLang=te,this.onDefaultLangChange.emit({lang:te,translations:this.translations[te]})}reloadLang(te){return this.resetLang(te),this.getTranslation(te)}resetLang(te){this._translationRequests[te]=void 0,this.translations[te]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let te=window.navigator.languages?window.navigator.languages[0]:null;return te=te||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==te?(-1!==te.indexOf("-")&&(te=te.split("-")[0]),-1!==te.indexOf("_")&&(te=te.split("_")[0]),te):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let te=window.navigator.languages?window.navigator.languages[0]:null;return te=te||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,te}}return Ve.\u0275fac=function(te){return new(te||Ve)(b.LFG(Pe),b.LFG(qe),b.LFG(gt),b.LFG(Re),b.LFG(vt),b.LFG(ke),b.LFG(fe),b.LFG(le),b.LFG(Oe))},Ve.\u0275prov=b.Yz7({token:Ve,factory:Ve.\u0275fac}),Ve})(),Vt=(()=>{class Ve{constructor(te,$e){this.translate=te,this._ref=$e,this.value="",this.lastKey=null,this.lastParams=[]}updateValue(te,$e,ot){let Rt=lt=>{this.value=void 0!==lt?lt:te,this.lastKey=te,this._ref.markForCheck()};if(ot){let lt=this.translate.getParsedResult(ot,te,$e);Ee(lt.subscribe)?lt.subscribe(Rt):Rt(lt)}this.translate.get(te,$e).subscribe(Rt)}transform(te,...$e){if(!te||!te.length)return te;if(Ke(te,this.lastKey)&&Ke($e,this.lastParams))return this.value;let ot;if(_t($e[0])&&$e.length)if("string"==typeof $e[0]&&$e[0].length){let Rt=$e[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{ot=JSON.parse(Rt)}catch(lt){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${$e[0]}`)}}else"object"==typeof $e[0]&&!Array.isArray($e[0])&&(ot=$e[0]);return this.lastKey=te,this.lastParams=$e,this.updateValue(te,ot),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(Rt=>{this.lastKey&&Rt.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(te,ot,Rt.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(Rt=>{this.lastKey&&(this.lastKey=null,this.updateValue(te,ot,Rt.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(te,ot))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return Ve.\u0275fac=function(te){return new(te||Ve)(b.Y36(Je,16),b.Y36(b.sBO,16))},Ve.\u0275pipe=b.Yjl({name:"translate",type:Ve,pure:!1}),Ve.\u0275prov=b.Yz7({token:Ve,factory:Ve.\u0275fac}),Ve})(),pn=(()=>{class Ve{static forRoot(te={}){return{ngModule:Ve,providers:[te.loader||{provide:qe,useClass:Qe},te.compiler||{provide:gt,useClass:mt},te.parser||{provide:Re,useClass:ue},te.missingTranslationHandler||{provide:vt,useClass:Ge},Pe,{provide:fe,useValue:te.isolate},{provide:ke,useValue:te.useDefaultLang},{provide:le,useValue:te.extend},{provide:Oe,useValue:te.defaultLanguage},Je]}}static forChild(te={}){return{ngModule:Ve,providers:[te.loader||{provide:qe,useClass:Qe},te.compiler||{provide:gt,useClass:mt},te.parser||{provide:Re,useClass:ue},te.missingTranslationHandler||{provide:vt,useClass:Ge},{provide:fe,useValue:te.isolate},{provide:ke,useValue:te.useDefaultLang},{provide:le,useValue:te.extend},{provide:Oe,useValue:te.defaultLanguage},Je]}}}return Ve.\u0275fac=function(te){return new(te||Ve)},Ve.\u0275mod=b.oAB({type:Ve}),Ve.\u0275inj=b.cJS({}),Ve})()},5861:(Mt,Ue,B)=>{function b(q,Ee,he,De,Ie,Ce,Se){try{var ae=q[Ce](Se),oe=ae.value}catch(pe){return void he(pe)}ae.done?Ee(oe):Promise.resolve(oe).then(De,Ie)}function L(q){return function(){var Ee=this,he=arguments;return new Promise(function(De,Ie){var Ce=q.apply(Ee,he);function Se(oe){b(Ce,De,Ie,Se,ae,"next",oe)}function ae(oe){b(Ce,De,Ie,Se,ae,"throw",oe)}Se(void 0)})}}B.d(Ue,{Z:()=>L})}},Mt=>{Mt(Mt.s=5973)}]);