(self.webpackChunkskateboard=self.webpackChunkskateboard||[]).push([[179],{54322:function(Wt,Qe,O){"use strict";O.d(Qe,{e:function(){return E0}});var z=O(15671),H=O(43144),j=O(5e3),le=O(73385),M=O(24473),ce=O(4942),x=O(74902),F=O(97685),ke=O(34986),Ee=O(69751),Te=O(88996),et=O(39646),Je=O(75813),rt=O(68675),Ve=O(54482),fe=O(25403);function ve(){return(0,Ve.e)(function(t,r){var e,i=!1;t.subscribe((0,fe.x)(r,function(u){var l=e;e=u,i&&r.next([l,u]),i=!0}))})}var qe=O(54004),wt=O(75026),ht=O(44671);function Me(t,r){return t===r}var ot,ct=O(39300),gt=O(12011),kt=O(69808),$e=(O(4087),O(5647)),Fe=O(60136),Pe=O(57777),Ce=O(37762),at=O(63942),be=O(73237),Ge=O(61120),Se=O(15861),Mt=O(87757),te=O.n(Mt),Tt=O(49681),jt=O(34859),kn=O(41877),on=O(42090),Ze="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Kt={},je=je||{},ft=Ze||self;function Ft(){}function $t(t){var r=typeof t;return"array"==(r="object"!=r?r:t?Array.isArray(t)?"array":r:"null")||"object"==r&&"number"==typeof t.length}function Xt(t){var r=typeof t;return"object"==r&&null!=t||"function"==r}var Rn="closure_uid_"+(1e9*Math.random()>>>0),Sn=0;function Yr(t,r,e){return t.call.apply(t.bind,arguments)}function Ir(t,r,e){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,i),t.apply(r,u)}}return function(){return t.apply(r,arguments)}}function yr(t,r,e){return(yr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yr:Ir).apply(null,arguments)}function yn(t,r){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Yn(t,r){function e(){}e.prototype=r.prototype,t.Z=r.prototype,t.prototype=new e,t.prototype.constructor=t,t.Vb=function(i,u,l){for(var f=Array(arguments.length-2),v=2;v<arguments.length;v++)f[v-2]=arguments[v];return r.prototype[u].apply(i,f)}}function Mr(){this.s=this.s,this.o=this.o}var Lr={};Mr.prototype.s=!1,Mr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function qn(t){return Object.prototype.hasOwnProperty.call(t,Rn)&&t[Rn]||(t[Rn]=++Sn)}(this);delete Lr[t]}},Mr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var os=Array.prototype.indexOf?function(t,r){return Array.prototype.indexOf.call(t,r,void 0)}:function(t,r){if("string"==typeof t)return"string"!=typeof r||1!=r.length?-1:t.indexOf(r,0);for(var e=0;e<t.length;e++)if(e in t&&t[e]===r)return e;return-1},jr=Array.prototype.forEach?function(t,r,e){Array.prototype.forEach.call(t,r,e)}:function(t,r,e){for(var i=t.length,u="string"==typeof t?t.split(""):t,l=0;l<i;l++)l in u&&r.call(e,u[l],l,t)};function Xr(t){return Array.prototype.concat.apply([],arguments)}function ra(t){var r=t.length;if(0<r){for(var e=Array(r),i=0;i<r;i++)e[i]=t[i];return e}return[]}function ma(t){return/^[\s\xa0]*$/.test(t)}var Qn,ls=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function tn(t,r){return-1!=t.indexOf(r)}function ia(t,r){return t<r?-1:t>r?1:0}e:{var _n=ft.navigator;if(_n){var Un=_n.userAgent;if(Un){Qn=Un;break e}}Qn=""}function ya(t,r,e){for(var i in t)r.call(e,t[i],i,t)}function Pn(t){var r={};for(var e in t)r[e]=t[e];return r}var Dr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ka(t,r){for(var e,i,u=1;u<arguments.length;u++){for(e in i=arguments[u])t[e]=i[e];for(var l=0;l<Dr.length;l++)e=Dr[l],Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}}function fi(t){return fi[" "](t),t}fi[" "]=Ft;var vn,t,Zr=tn(Qn,"Opera"),Fi=tn(Qn,"Trident")||tn(Qn,"MSIE"),Or=tn(Qn,"Edge"),Ur=Or||Fi,dr=tn(Qn,"Gecko")&&!(tn(Qn.toLowerCase(),"webkit")&&!tn(Qn,"Edge"))&&!(tn(Qn,"Trident")||tn(Qn,"MSIE"))&&!tn(Qn,"Edge"),un=tn(Qn.toLowerCase(),"webkit")&&!tn(Qn,"Edge");function Qt(){var t=ft.document;return t?t.documentMode:void 0}e:{var zt="",qt=(t=Qn,dr?/rv:([^\);]+)(\)|;)/.exec(t):Or?/Edge\/([\d\.]+)/.exec(t):Fi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):un?/WebKit\/(\S+)/.exec(t):Zr?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(qt&&(zt=qt?qt[1]:""),Fi){var Mn=Qt();if(null!=Mn&&Mn>parseFloat(zt)){vn=String(Mn);break e}}vn=zt}var kr={};var Le=ft.document&&Fi&&(Qt()||parseInt(vn,10))||void 0,lt=function(){if(!ft.addEventListener||!Object.defineProperty)return!1;var t=!1,r=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ft.addEventListener("test",Ft,r),ft.removeEventListener("test",Ft,r)}catch(e){}return t}();function _t(t,r){this.type=t,this.g=this.target=r,this.defaultPrevented=!1}function Dt(t,r){if(_t.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var e=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=r,r=t.relatedTarget){if(dr){e:{try{fi(r.nodeName);var u=!0;break e}catch(l){}u=!1}u||(r=null)}}else"mouseover"==e?r=t.fromElement:"mouseout"==e&&(r=t.toElement);this.relatedTarget=r,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:pn[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Dt.Z.h.call(this)}}_t.prototype.h=function(){this.defaultPrevented=!0},Yn(Dt,_t);var pn={2:"touch",3:"pen",4:"mouse"};Dt.prototype.h=function(){Dt.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var An="closure_listenable_"+(1e6*Math.random()|0),nn=0;function Hr(t,r,e,i,u){this.listener=t,this.proxy=null,this.src=r,this.type=e,this.capture=!!i,this.ia=u,this.key=++nn,this.ca=this.fa=!1}function ni(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ci(t){this.src=t,this.g={},this.h=0}function hi(t,r){var e=r.type;if(e in t.g){var l,i=t.g[e],u=os(i,r);(l=0<=u)&&Array.prototype.splice.call(i,u,1),l&&(ni(r),0==t.g[e].length&&(delete t.g[e],t.h--))}}function Rr(t,r,e,i){for(var u=0;u<t.length;++u){var l=t[u];if(!l.ca&&l.listener==r&&l.capture==!!e&&l.ia==i)return u}return-1}Ci.prototype.add=function(t,r,e,i,u){var l=t.toString();(t=this.g[l])||(t=this.g[l]=[],this.h++);var f=Rr(t,r,i,u);return-1<f?(r=t[f],e||(r.fa=!1)):((r=new Hr(r,this.src,l,!!i,u)).fa=e,t.push(r)),r};var Mi="closure_lm_"+(1e6*Math.random()|0),Zi={};function ri(t,r,e,i,u){if(i&&i.once)return Fa(t,r,e,i,u);if(Array.isArray(r)){for(var l=0;l<r.length;l++)ri(t,r[l],e,i,u);return null}return e=Dn(e),t&&t[An]?t.N(r,e,Xt(i)?!!i.capture:!!i,u):Ia(t,r,e,!1,i,u)}function Ia(t,r,e,i,u,l){if(!r)throw Error("Invalid event type");var f=Xt(u)?!!u.capture:!!u,v=Ii(t);if(v||(t[Mi]=v=new Ci(t)),(e=v.add(r,e,i,f,l)).proxy)return e;if(i=function Qa(){var r=Ks;return function t(e){return r.call(t.src,t.listener,e)}}(),e.proxy=i,i.src=t,i.listener=e,t.addEventListener)lt||(u=f),void 0===u&&(u=!1),t.addEventListener(r.toString(),i,u);else if(t.attachEvent)t.attachEvent(_r(r.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return e}function Fa(t,r,e,i,u){if(Array.isArray(r)){for(var l=0;l<r.length;l++)Fa(t,r[l],e,i,u);return null}return e=Dn(e),t&&t[An]?t.O(r,e,Xt(i)?!!i.capture:!!i,u):Ia(t,r,e,!0,i,u)}function nu(t,r,e,i,u){if(Array.isArray(r))for(var l=0;l<r.length;l++)nu(t,r[l],e,i,u);else i=Xt(i)?!!i.capture:!!i,e=Dn(e),t&&t[An]?(t=t.i,(r=String(r).toString())in t.g&&-1<(e=Rr(l=t.g[r],e,i,u))&&(ni(l[e]),Array.prototype.splice.call(l,e,1),0==l.length&&(delete t.g[r],t.h--))):t&&(t=Ii(t))&&(r=t.g[r.toString()],t=-1,r&&(t=Rr(r,e,i,u)),(e=-1<t?r[t]:null)&&Za(e))}function Za(t){if("number"!=typeof t&&t&&!t.ca){var r=t.src;if(r&&r[An])hi(r.i,t);else{var e=t.type,i=t.proxy;r.removeEventListener?r.removeEventListener(e,i,t.capture):r.detachEvent?r.detachEvent(_r(e),i):r.addListener&&r.removeListener&&r.removeListener(i),(e=Ii(r))?(hi(e,t),0==e.h&&(e.src=null,r[Mi]=null)):ni(t)}}}function _r(t){return t in Zi?Zi[t]:Zi[t]="on"+t}function Ks(t,r){if(t.ca)t=!0;else{r=new Dt(r,this);var e=t.listener,i=t.ia||t.src;t.fa&&Za(t),t=e.call(i,r)}return t}function Ii(t){return(t=t[Mi])instanceof Ci?t:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dn(t){return"function"==typeof t?t:(t[fn]||(t[fn]=function(r){return t.handleEvent(r)}),t[fn])}function er(){Mr.call(this),this.i=new Ci(this),this.P=this,this.I=null}function Wn(t,r){var e,i=t.I;if(i)for(e=[];i;i=i.I)e.push(i);if(t=t.P,i=r.type||r,"string"==typeof r)r=new _t(r,t);else if(r instanceof _t)r.target=r.target||t;else{var u=r;ka(r=new _t(i,t),u)}if(u=!0,e)for(var l=e.length-1;0<=l;l--){var f=r.g=e[l];u=oa(f,i,!0,r)&&u}if(u=oa(f=r.g=t,i,!0,r)&&u,u=oa(f,i,!1,r)&&u,e)for(l=0;l<e.length;l++)u=oa(f=r.g=e[l],i,!1,r)&&u}function oa(t,r,e,i){if(!(r=t.i.g[String(r)]))return!0;r=r.concat();for(var u=!0,l=0;l<r.length;++l){var f=r[l];if(f&&!f.ca&&f.capture==e){var v=f.listener,b=f.ia||f.src;f.fa&&hi(t.i,f),u=!1!==v.call(b,i)&&u}}return u&&!i.defaultPrevented}Yn(er,Mr),er.prototype[An]=!0,er.prototype.removeEventListener=function(t,r,e,i){nu(this,t,r,e,i)},er.prototype.M=function(){if(er.Z.M.call(this),this.i){var r,t=this.i;for(r in t.g){for(var e=t.g[r],i=0;i<e.length;i++)ni(e[i]);delete t.g[r],t.h--}}this.I=null},er.prototype.N=function(t,r,e,i){return this.i.add(String(t),r,!1,e,i)},er.prototype.O=function(t,r,e,i){return this.i.add(String(t),r,!0,e,i)};var gi=ft.JSON.stringify;function ys(){var t=mi,r=null;return t.g&&(r=t.g,t.g=t.g.next,t.g||(t.h=null),r.next=null),r}var di,ii=function(){function t(){(0,z.Z)(this,t),this.h=this.g=null}return(0,H.Z)(t,[{key:"add",value:function(e,i){var u=Ui.get();u.set(e,i),this.h?this.h.next=u:this.g=u,this.h=u}}]),t}(),Ui=new(function(){function t(r,e){(0,z.Z)(this,t),this.i=r,this.j=e,this.h=0,this.g=null}return(0,H.Z)(t,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e}}]),t}())(function(){return new $i},function(t){return t.reset()}),$i=function(){function t(){(0,z.Z)(this,t),this.next=this.g=this.h=null}return(0,H.Z)(t,[{key:"set",value:function(e,i){this.h=e,this.g=i,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),t}();function Gn(t){ft.setTimeout(function(){throw t},0)}function Ua(t,r){di||function _a(){var t=ft.Promise.resolve(void 0);di=function(){t.then(Ba)}}(),la||(di(),la=!0),mi.add(t,r)}var la=!1,mi=new ii;function Ba(){for(var t;t=ys();){try{t.h.call(t.g)}catch(e){Gn(e)}var r=Ui;r.j(t),100>r.h&&(r.h++,t.next=r.g,r.g=t)}la=!1}function qi(t,r){er.call(this),this.h=t||1,this.g=r||ft,this.j=yr(this.kb,this),this.l=Date.now()}function Bi(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Gr(t,r,e){if("function"==typeof t)e&&(t=yr(t,e));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=yr(t.handleEvent,t)}return 2147483647<Number(r)?-1:ft.setTimeout(t,r||0)}function Ja(t){t.g=Gr(function(){t.g=null,t.i&&(t.i=!1,Ja(t))},t.j);var r=t.h;t.h=null,t.m.apply(null,r)}Yn(qi,er),(ot=qi.prototype).da=!1,ot.S=null,ot.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Wn(this,"tick"),this.da&&(Bi(this),this.start()))}},ot.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){qi.Z.M.call(this),Bi(this),delete this.g};var Vu=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this)).m=i,l.j=u,l.h=null,l.i=!1,l.g=null,l}return(0,H.Z)(e,[{key:"l",value:function(u){this.h=arguments,this.g?this.i=!0:Ja(this)}},{key:"M",value:function(){(0,be.Z)((0,Ge.Z)(e.prototype),"M",this).call(this),this.g&&(ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),e}(Mr);function Oi(t){Mr.call(this),this.h=t,this.g={}}Yn(Oi,Mr);var Br=[];function Ps(t,r,e,i){Array.isArray(e)||(e&&(Br[0]=e.toString()),e=Br);for(var u=0;u<e.length;u++){var l=ri(r,e[u],i||t.handleEvent,!1,t.h||t);if(!l)break;t.g[l.key]=l}}function Ms(t){ya(t.g,function(r,e){this.g.hasOwnProperty(e)&&Za(r)},t),t.g={}}function cs(){this.g=!0}function yt(t,r,e,i){t.info(function(){return"XMLHTTP TEXT ("+r+"): "+function St(t,r){if(!t.g)return r;if(!r)return null;try{var e=JSON.parse(r);if(e)for(t=0;t<e.length;t++)if(Array.isArray(e[t])){var i=e[t];if(!(2>i.length)){var u=i[1];if(Array.isArray(u)&&!(1>u.length)){var l=u[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var f=1;f<u.length;f++)u[f]=""}}}return gi(e)}catch(v){return r}}(t,e)+(i?" "+i:"")})}Oi.prototype.M=function(){Oi.Z.M.call(this),Ms(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cs.prototype.Aa=function(){this.g=!1},cs.prototype.info=function(){};var At={},ln=null;function Vr(){return ln=ln||new er}function Nr(t){_t.call(this,At.Ma,t)}function yi(t){var r=Vr();Wn(r,new Nr(r,t))}function ai(t,r){_t.call(this,At.STAT_EVENT,t),this.stat=r}function wr(t){var r=Vr();Wn(r,new ai(r,t))}function Va(t,r){_t.call(this,At.Na,t),this.size=r}function Bn(t,r){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ft.setTimeout(function(){t()},r)}At.Ma="serverreachability",Yn(Nr,_t),At.STAT_EVENT="statevent",Yn(ai,_t),At.Na="timingevent",Yn(Va,_t);var wa={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function uo(){}function xu(){}uo.prototype.h=null;var Qo,Os={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ru(){_t.call(this,"d")}function Po(){_t.call(this,"c")}function iu(){}function ki(t,r,e,i){this.l=t,this.j=r,this.m=e,this.X=i||1,this.V=new Oi(this),this.P=Tu,this.W=new qi(t=Ur?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ca}function ca(){this.i=null,this.g="",this.h=!1}Yn(ru,_t),Yn(Po,_t),Yn(iu,uo),iu.prototype.g=function(){return new XMLHttpRequest},iu.prototype.i=function(){return{}},Qo=new iu;var Tu=45e3,Yi={},Ea={};function oo(t,r,e){t.K=1,t.v=Si(Cn(r)),t.s=e,t.U=!0,au(t,null)}function au(t,r){t.F=Date.now(),ks(t),t.A=Cn(t.v);var e=t.A,i=t.X;Array.isArray(i)||(i=[String(i)]),yl(e.h,"t",i),t.C=0,e=t.l.H,t.h=new ca,t.g=tl(t.l,e?r:null,!t.s),0<t.O&&(t.L=new Vu(yr(t.Ia,t,t.g),t.O)),Ps(t.V,t.g,"readystatechange",t.gb),r=t.H?Pn(t.H):{},t.s?(t.u||(t.u="POST"),r["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,r)):(t.u="GET",t.g.ea(t.A,t.u,null,r)),yi(1),function ze(t,r,e,i,u,l){t.info(function(){if(t.g)if(l)for(var f="",v=l.split("&"),b=0;b<v.length;b++){var Z=v[b].split("=");if(1<Z.length){var K=Z[0];Z=Z[1];var re=K.split("_");f=2<=re.length&&"type"==re[1]?f+(K+"=")+Z+"&":f+(K+"=redacted&")}}else f=null;else f=l;return"XMLHTTP REQ ("+i+") [attempt "+u+"]: "+r+"\n"+e+"\n"+f})}(t.j,t.u,t.A,t.m,t.X,t.s)}function ju(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function su(t,r,e){for(var u,i=!0;!t.I&&t.C<e.length;){if((u=uu(t,e))==Ea){4==r&&(t.o=4,wr(14),i=!1),yt(t.j,t.m,null,"[Incomplete Response]");break}if(u==Yi){t.o=4,wr(15),yt(t.j,t.m,e,"[Invalid Chunk]"),i=!1;break}yt(t.j,t.m,u,null),Q(t,u)}ju(t)&&u!=Ea&&u!=Yi&&(t.h.g="",t.C=0),4!=r||0!=e.length||t.h.h||(t.o=1,wr(16),i=!1),t.i=t.i&&i,i?0<e.length&&!t.aa&&(t.aa=!0,(r=t.l).g==t&&r.$&&!r.L&&(r.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),Us(r),r.L=!0,wr(11))):(yt(t.j,t.m,e,"[Invalid Chunked Response]"),$(t),xa(t))}function uu(t,r){var e=t.C,i=r.indexOf("\n",e);return-1==i?Ea:(e=Number(r.substring(e,i)),isNaN(e)?Yi:(i+=1)+e>r.length?Ea:(r=r.substr(i,e),t.C=i+e,r))}function ks(t){t.Y=Date.now()+t.P,Vi(t,t.P)}function Vi(t,r){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Bn(yr(t.eb,t),r)}function Ns(t){t.B&&(ft.clearTimeout(t.B),t.B=null)}function xa(t){0==t.l.G||t.I||qu(t.l,t)}function $(t){Ns(t);var r=t.L;r&&"function"==typeof r.na&&r.na(),t.L=null,Bi(t.W),Ms(t.V),t.g&&(r=t.g,t.g=null,r.abort(),r.na())}function Q(t,r){try{var e=t.l;if(0!=e.G&&(e.g==t||es(e.i,t)))if(e.I=t.N,!t.J&&es(e.i,t)&&3==e.G){try{var i=e.Ca.g.parse(r)}catch(pt){i=null}if(Array.isArray(i)&&3==i.length){var u=i;if(0==u[0])e:if(e.u)e.ta=u[1],0<e.ta-e.U&&37500>u[2]&&e.N&&0==e.A&&!e.v&&(e.v=Bn(yr(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<t.F))break e;Vs(e),el(e)}hu(e),wr(18)}if(1>=ou(e.i)&&e.ka){try{e.ka()}catch(pt){}e.ka=void 0}}else aa(e,11)}else if((t.J||e.g==t)&&Vs(e),!ma(r))for(u=e.Ca.g.parse(r),r=0;r<u.length;r++){var l=u[r];if(e.U=l[0],l=l[1],2==e.G)if("c"==l[0]){e.J=l[1],e.la=l[2];var f=l[3];null!=f&&(e.ma=f,e.h.info("VER="+e.ma));var v=l[4];null!=v&&(e.za=v,e.h.info("SVER="+e.za));var b=l[5];null!=b&&"number"==typeof b&&0<b&&(e.K=i=1.5*b,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;var Z=t.g;if(Z){var K=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var re=i.i;!re.g&&(tn(K,"spdy")||tn(K,"quic")||tn(K,"h2"))&&(re.j=re.l,re.g=new Set,re.h&&(Su(re,re.h),re.h=null))}if(i.D){var de=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;de&&(i.sa=de,ir(i.F,i.D,de))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-t.F,e.h.info("Handshake RTT: "+e.O+"ms"));var Be=t;if((i=e).oa=fa(i,i.H?i.la:null,i.W),Be.J){Gu(i.i,Be);var we=Be,st=i.K;st&&we.setTimeout(st),we.B&&(Ns(we),ks(we)),i.g=Be}else Ru(i);0<e.l.length&&Lo(e)}else"stop"!=l[0]&&"close"!=l[0]||aa(e,7);else 3==e.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?aa(e,7):po(e):"noop"!=l[0]&&e.j&&e.j.wa(l),e.A=0)}yi(4)}catch(pt){}}function ie(t,r){if(t.forEach&&"function"==typeof t.forEach)t.forEach(r,void 0);else if($t(t)||"string"==typeof t)jr(t,r,void 0);else{if(t.T&&"function"==typeof t.T)var e=t.T();else if(t.R&&"function"==typeof t.R)e=void 0;else if($t(t)||"string"==typeof t){e=[];for(var i=t.length,u=0;u<i;u++)e.push(u)}else for(u in e=[],i=0,t)e[i++]=u;i=function se(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if($t(t)){for(var r=[],e=t.length,i=0;i<e;i++)r.push(t[i]);return r}for(i in r=[],e=0,t)r[e++]=t[i];return r}(t),u=i.length;for(var l=0;l<u;l++)r.call(void 0,i[l],e&&e[l],t)}}function _e(t,r){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof _e)for(e=t.T(),i=0;i<e.length;i++)this.set(e[i],t.get(e[i]));else for(i in t)this.set(i,t[i])}function Ae(t){if(t.i!=t.g.length){for(var r=0,e=0;r<t.g.length;){var i=t.g[r];mt(t.h,i)&&(t.g[e++]=i),r++}t.g.length=e}if(t.i!=t.g.length){var u={};for(e=r=0;r<t.g.length;)mt(u,i=t.g[r])||(t.g[e++]=i,u[i]=1),r++;t.g.length=e}}function mt(t,r){return Object.prototype.hasOwnProperty.call(t,r)}(ot=ki.prototype).setTimeout=function(t){this.P=t},ot.gb=function(t){t=t.target;var r=this.L;r&&3==_i(t)?r.l():this.Ia(t)},ot.Ia=function(t){try{if(t==this.g)e:{var r=_i(this.g),e=this.g.Da(),i=this.g.ba();if(!(3>r)&&(3!=r||Ur||this.g&&(this.h.h||this.g.ga()||wl(this.g)))){this.I||4!=r||7==e||yi(8==e||0>=i?3:2),Ns(this);var u=this.g.ba();this.N=u;t:if(ju(this)){var l=wl(this.g);t="";var f=l.length,v=4==_i(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){$(this),xa(this);var b="";break t}this.h.i=new ft.TextDecoder}for(e=0;e<f;e++)this.h.h=!0,t+=this.h.i.decode(l[e],{stream:v&&e==f-1});l.splice(0,f),this.h.g+=t,this.C=0,b=this.h.g}else b=this.g.ga();if(this.i=200==u,function ut(t,r,e,i,u,l,f){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+u+"]: "+r+"\n"+e+"\n"+l+" "+f})}(this.j,this.u,this.A,this.m,this.X,r,u),this.i){if(this.$&&!this.J){t:{if(this.g){var Z,K=this.g;if((Z=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ma(Z)){var re=Z;break t}}re=null}if(!(u=re)){this.i=!1,this.o=3,wr(12),$(this),xa(this);break e}yt(this.j,this.m,u,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Q(this,u)}this.U?(su(this,r,b),Ur&&this.i&&3==r&&(Ps(this.V,this.W,"tick",this.fb),this.W.start())):(yt(this.j,this.m,b,null),Q(this,b)),4==r&&$(this),this.i&&!this.I&&(4==r?qu(this.l,this):(this.i=!1,ks(this)))}else 400==u&&0<b.indexOf("Unknown SID")?(this.o=3,wr(12)):(this.o=0,wr(13)),$(this),xa(this)}}}catch(de){}},ot.fb=function(){if(this.g){var t=_i(this.g),r=this.g.ga();this.C<r.length&&(Ns(this),su(this,t,r),this.i&&4!=t&&ks(this))}},ot.cancel=function(){this.I=!0,$(this)},ot.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function It(t,r){t.info(function(){return"TIMEOUT: "+r})}(this.j,this.A),2!=this.K&&(yi(3),wr(17)),$(this),this.o=2,xa(this)):Vi(this,this.Y-t)},(ot=_e.prototype).R=function(){Ae(this);for(var t=[],r=0;r<this.g.length;r++)t.push(this.h[this.g[r]]);return t},ot.T=function(){return Ae(this),this.g.concat()},ot.get=function(t,r){return mt(this.h,t)?this.h[t]:r},ot.set=function(t,r){mt(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=r},ot.forEach=function(t,r){for(var e=this.T(),i=0;i<e.length;i++){var u=e[i],l=this.get(u);t.call(r,l,u,this)}};var Ot=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function En(t,r){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof En){this.g=void 0!==r?r:t.g,xn(this,t.j),this.s=t.s,ui(this,t.i),Qr(this,t.m),this.l=t.l,r=t.h;var e=new fo;e.i=r.i,r.g&&(e.g=new _e(r.g),e.h=r.h),oi(this,e),this.o=t.o}else t&&(e=String(t).match(Ot))?(this.g=!!r,xn(this,e[1]||"",!0),this.s=Qi(e[2]||""),ui(this,e[3]||"",!0),Qr(this,e[4]),this.l=Qi(e[5]||"",!0),oi(this,e[6]||"",!0),this.o=Qi(e[7]||"")):(this.g=!!r,this.h=new fo(null,this.g))}function Cn(t){return new En(t)}function xn(t,r,e){t.j=e?Qi(r,!0):r,t.j&&(t.j=t.j.replace(/:$/,""))}function ui(t,r,e){t.i=e?Qi(r,!0):r}function Qr(t,r){if(r){if(r=Number(r),isNaN(r)||0>r)throw Error("Bad port number "+r);t.m=r}else t.m=null}function oi(t,r,e){r instanceof fo?(t.h=r,function Gt(t,r){r&&!t.j&&(Ha(t),t.i=null,t.g.forEach(function(e,i){var u=i.toLowerCase();i!=u&&(Hu(this,i),yl(this,u,e))},t)),t.j=r}(t.h,t.g)):(e||(r=ba(r,Kn)),t.h=new fo(r,t.g))}function ir(t,r,e){t.h.set(r,e)}function Si(t){return ir(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Qi(t,r){return t?r?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ba(t,r,e){return"string"==typeof t?(t=encodeURI(t).replace(r,ar),e&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ar(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}En.prototype.toString=function(){var t=[],r=this.j;r&&t.push(ba(r,ja,!0),":");var e=this.i;return(e||"file"==r)&&(t.push("//"),(r=this.s)&&t.push(ba(r,ja,!0),"@"),t.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&t.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&t.push("/"),t.push(ba(e,"/"==e.charAt(0)?co:lo,!0))),(e=this.h.toString())&&t.push("?",e),(e=this.o)&&t.push("#",ba(e,Du)),t.join("")};var ja=/[#\/\?@]/g,lo=/[#\?:]/g,co=/[#\?]/g,Kn=/[#\?@]/g,Du=/#/g;function fo(t,r){this.h=this.g=null,this.i=t||null,this.j=!!r}function Ha(t){t.g||(t.g=new _e,t.h=0,t.i&&function Nn(t,r){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var i=t[e].indexOf("="),u=null;if(0<=i){var l=t[e].substring(0,i);u=t[e].substring(i+1)}else l=t[e];r(l,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(t.i,function(r,e){t.add(decodeURIComponent(r.replace(/\+/g," ")),e)}))}function Hu(t,r){Ha(t),r=Xa(t,r),mt(t.g.h,r)&&(t.i=null,t.h-=t.g.get(r).length,mt((t=t.g).h,r)&&(delete t.h[r],t.i--,t.g.length>2*t.i&&Ae(t)))}function Cu(t,r){return Ha(t),r=Xa(t,r),mt(t.g.h,r)}function yl(t,r,e){Hu(t,r),0<e.length&&(t.i=null,t.g.set(Xa(t,r),ra(e)),t.h+=e.length)}function Xa(t,r){return r=String(r),t.j&&(r=r.toLowerCase()),r}(ot=fo.prototype).add=function(t,r){Ha(this),this.i=null,t=Xa(this,t);var e=this.g.get(t);return e||this.g.set(t,e=[]),e.push(r),this.h+=1,this},ot.forEach=function(t,r){Ha(this),this.g.forEach(function(e,i){jr(e,function(u){t.call(r,u,i,this)},this)},this)},ot.T=function(){Ha(this);for(var t=this.g.R(),r=this.g.T(),e=[],i=0;i<r.length;i++)for(var u=t[i],l=0;l<u.length;l++)e.push(r[i]);return e},ot.R=function(t){Ha(this);var r=[];if("string"==typeof t)Cu(this,t)&&(r=Xr(r,this.g.get(Xa(this,t))));else{t=this.g.R();for(var e=0;e<t.length;e++)r=Xr(r,t[e])}return r},ot.set=function(t,r){return Ha(this),this.i=null,Cu(this,t=Xa(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[r]),this.h+=1,this},ot.get=function(t,r){return t&&0<(t=this.R(t)).length?String(t[0]):r},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],r=this.g.T(),e=0;e<r.length;e++){var i=r[e],u=encodeURIComponent(String(i));i=this.R(i);for(var l=0;l<i.length;l++){var f=u;""!==i[l]&&(f+="="+encodeURIComponent(String(i[l]))),t.push(f)}}return this.i=t.join("&")};var pr=(0,H.Z)(function t(r,e){(0,z.Z)(this,t),this.h=r,this.g=e});function Mo(t){this.l=t||Ni,t=ft.PerformanceNavigationTiming?0<(t=ft.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ft.g&&ft.g.Ea&&ft.g.Ea()&&ft.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ni=10;function Iu(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ou(t){return t.h?1:t.g?t.g.size:0}function es(t,r){return t.h?t.h==r:!!t.g&&t.g.has(r)}function Su(t,r){t.g?t.g.add(r):t.h=r}function Gu(t,r){t.h&&t.h==r?t.h=null:t.g&&t.g.has(r)&&t.g.delete(r)}function Ul(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var i,r=t.i,e=(0,Ce.Z)(t.g.values());try{for(e.s();!(i=e.n()).done;)r=r.concat(i.value.D)}catch(l){e.e(l)}finally{e.f()}return r}return ra(t.i)}function zu(){}function ho(){this.g=new zu}function Jo(t,r,e){var i=e||"";try{ie(t,function(u,l){var f=u;Xt(u)&&(f=gi(u)),r.push(i+l+"="+encodeURIComponent(f))})}catch(u){throw r.push(i+"type="+encodeURIComponent("_badmap")),u}}function ts(t,r,e,i,u){try{r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null,u(i)}catch(l){}}function Ls(t){this.l=t.$b||null,this.j=t.ib||!1}function Fs(t,r){er.call(this),this.D=t,this.u=r,this.m=void 0,this.readyState=Sa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mo.prototype.cancel=function(){if(this.i=Ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var r,t=(0,Ce.Z)(this.g.values());try{for(t.s();!(r=t.n()).done;)r.value.cancel()}catch(i){t.e(i)}finally{t.f()}this.g.clear()}},zu.prototype.stringify=function(t){return ft.JSON.stringify(t,void 0)},zu.prototype.parse=function(t){return ft.JSON.parse(t,void 0)},Yn(Ls,uo),Ls.prototype.g=function(){return new Fs(this.l,this.j)},Ls.prototype.i=function(t){return function(){return t}}({}),Yn(Fs,er);var Sa=0;function kl(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Zs(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Wu(t)}function Wu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ot=Fs.prototype).open=function(t,r){if(this.readyState!=Sa)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=r,this.readyState=1,Wu(this)},ot.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var r={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(r.body=t),(this.D||ft).fetch(new Request(this.B,r)).then(this.Va.bind(this),this.ha.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zs(this)),this.readyState=Sa},ot.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Wu(this)),this.g&&(this.readyState=3,Wu(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ft.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kl(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},ot.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var r=t.value?t.value:new Uint8Array(0);(r=this.A.decode(r,{stream:!t.done}))&&(this.response=this.responseText+=r)}t.done?Zs(this):Wu(this),3==this.readyState&&kl(this)}},ot.Ua=function(t){this.g&&(this.response=this.responseText=t,Zs(this))},ot.Ta=function(t){this.g&&(this.response=t,Zs(this))},ot.ha=function(){this.g&&Zs(this)},ot.setRequestHeader=function(t,r){this.v.append(t,r)},ot.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],r=this.h.entries(),e=r.next();!e.done;)t.push((e=e.value)[0]+": "+e[1]),e=r.next();return t.join("\r\n")},Object.defineProperty(Fs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var _l=ft.JSON.parse;function ci(t){er.call(this),this.headers=new _e,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=lu,this.K=this.L=!1}Yn(ci,er);var lu="",Xo=/^https?$/i,Ku=["POST","PUT"];function Oo(t){return"content-type"==t.toLowerCase()}function Ga(t,r){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=r,t.m=5,cu(t),za(t)}function cu(t){t.D||(t.D=!0,Wn(t,"complete"),Wn(t,"error"))}function $u(t){if(t.h&&void 0!==je&&(!t.C[1]||4!=_i(t)||2!=t.ba()))if(t.v&&4==_i(t))Gr(t.Fa,0,t);else if(Wn(t,"readystatechange"),4==_i(t)){t.h=!1;try{var i,r=t.ba();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}if(!(i=e)){var u;if(u=0===r){var l=String(t.H).match(Ot)[1]||null;if(!l&&ft.self&&ft.self.location){var f=ft.self.location.protocol;l=f.substr(0,f.length-1)}u=!Xo.test(l?l.toLowerCase():"")}i=u}if(i)Wn(t,"complete"),Wn(t,"success");else{t.m=6;try{var v=2<_i(t)?t.g.statusText:""}catch(b){v=""}t.j=v+" ["+t.ba()+"]",cu(t)}}finally{za(t)}}}function za(t,r){if(t.g){fu(t);var e=t.g,i=t.C[0]?Ft:null;t.g=null,t.C=null,r||Wn(t,"ready");try{e.onreadystatechange=i}catch(u){}}}function fu(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ft.clearTimeout(t.A),t.A=null)}function _i(t){return t.g?t.g.readyState:0}function wl(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case lu:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(r){return null}}function Xi(t,r,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=function vo(t){var r="";return ya(t,function(e,i){r+=i,r+=":",r+=e,r+="\r\n"}),r}(e),"string"==typeof t?null!=e&&encodeURIComponent(String(e)):ir(t,r,e))}function ns(t,r,e){return e&&e.internalChannelParams&&e.internalChannelParams[t]||r}function Pr(t){this.za=0,this.l=[],this.h=new cs,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ns("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ns("baseRetryDelayMs",5e3,t),this.$a=ns("retryDelaySeedMs",1e4,t),this.Ya=ns("forwardChannelMaxRetries",2,t),this.ra=ns("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Mo(t&&t.concurrentRequestLimit),this.Ca=new ho,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function po(t){if(Au(t),3==t.G){var r=t.V++,e=Cn(t.F);ir(e,"SID",t.J),ir(e,"RID",r),ir(e,"TYPE","terminate"),_s(t,e),(r=new ki(t,t.h,r,void 0)).K=2,r.v=Si(Cn(e)),e=!1,ft.navigator&&ft.navigator.sendBeacon&&(e=ft.navigator.sendBeacon(r.v.toString(),"")),!e&&ft.Image&&((new Image).src=r.v,e=!0),e||(r.g=tl(r.l,null),r.g.ea(r.v)),r.F=Date.now(),ks(r)}$s(t)}function el(t){t.g&&(Us(t),t.g.cancel(),t.g=null)}function Au(t){el(t),t.u&&(ft.clearTimeout(t.u),t.u=null),Vs(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ft.clearTimeout(t.m),t.m=null)}function No(t,r){t.l.push(new pr(t.Za++,r)),3==t.G&&Lo(t)}function Lo(t){Iu(t.i)||t.m||(t.m=!0,Ua(t.Ha,t),t.C=0)}function Cr(t,r){var e;e=r?r.m:t.V++;var i=Cn(t.F);ir(i,"SID",t.J),ir(i,"RID",e),ir(i,"AID",t.U),_s(t,i),t.o&&t.s&&Xi(i,t.o,t.s),e=new ki(t,t.h,e,t.C+1),null===t.o&&(e.H=t.s),r&&(t.l=r.D.concat(t.l)),r=go(t,e,1e3),e.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Su(t.i,e),oo(e,i,r)}function _s(t,r){t.j&&ie({},function(e,i){ir(r,i,e)})}function go(t,r,e){e=Math.min(t.l.length,e);var i=t.j?yr(t.j.Oa,t.j,t):null;e:for(var u=t.l,l=-1;;){var f=["count="+e];-1==l?0<e?f.push("ofs="+(l=u[0].h)):l=0:f.push("ofs="+l);for(var v=!0,b=0;b<e;b++){var Z=u[b].h,K=u[b].g;if(0>(Z-=l))l=Math.max(0,u[b].h-100),v=!1;else try{Jo(K,f,"req"+Z+"_")}catch(re){i&&i(K)}}if(v){i=f.join("&");break e}}return t=t.l.splice(0,e),r.D=t,i}function Ru(t){t.g||t.u||(t.Y=1,Ua(t.Ga,t),t.A=0)}function hu(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Bn(yr(t.Ga,t),Fo(t,t.A)),t.A++,0))}function Us(t){null!=t.B&&(ft.clearTimeout(t.B),t.B=null)}function Bs(t){t.g=new ki(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var r=Cn(t.oa);ir(r,"RID","rpc"),ir(r,"SID",t.J),ir(r,"CI",t.N?"0":"1"),ir(r,"AID",t.U),_s(t,r),ir(r,"TYPE","xmlhttp"),t.o&&t.s&&Xi(r,t.o,t.s),t.K&&t.g.setTimeout(t.K);var e=t.g;t=t.la,e.K=1,e.v=Si(Cn(r)),e.s=null,e.U=!0,au(e,t)}function Vs(t){null!=t.v&&(ft.clearTimeout(t.v),t.v=null)}function qu(t,r){var e=null;if(t.g==r){Vs(t),Us(t),t.g=null;var i=2}else{if(!es(t.i,r))return;e=r.D,Gu(t.i,r),i=1}if(t.I=r.N,0!=t.G)if(r.i)if(1==i){e=r.s?r.s.length:0,r=Date.now()-r.F;var u=t.C;Wn(i=Vr(),new Va(i,e,r,u)),Lo(t)}else Ru(t);else if(3==(u=r.o)||0==u&&0<t.I||!(1==i&&function Vl(t,r){return!(ou(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=r.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Bn(yr(t.Ha,t,r),Fo(t,t.C)),t.C++,0)))}(t,r)||2==i&&hu(t)))switch(e&&0<e.length&&(r=t.i,r.i=r.i.concat(e)),u){case 1:aa(t,5);break;case 4:aa(t,10);break;case 3:aa(t,6);break;default:aa(t,2)}}function Fo(t,r){var e=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(e*=2),e*r}function aa(t,r){if(t.h.info("Error code "+r),2==r){var e=null;t.j&&(e=null);var i=yr(t.jb,t);e||(e=new En("//www.google.com/images/cleardot.gif"),ft.location&&"http"==ft.location.protocol||xn(e,"https"),Si(e)),function Ji(t,r){var e=new cs;if(ft.Image){var i=new Image;i.onload=yn(ts,e,i,"TestLoadImage: loaded",!0,r),i.onerror=yn(ts,e,i,"TestLoadImage: error",!1,r),i.onabort=yn(ts,e,i,"TestLoadImage: abort",!1,r),i.ontimeout=yn(ts,e,i,"TestLoadImage: timeout",!1,r),ft.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else r(!1)}(e.toString(),i)}else wr(2);t.G=0,t.j&&t.j.va(r),$s(t),Au(t)}function $s(t){t.G=0,t.I=-1,t.j&&((0!=Ul(t.i).length||0!=t.l.length)&&(t.i.i.length=0,ra(t.l),t.l.length=0),t.j.ua())}function fa(t,r,e){var i=function vr(t){return t instanceof En?Cn(t):new En(t,void 0)}(e);if(""!=i.i)r&&ui(i,r+"."+i.i),Qr(i,i.m);else{var u=ft.location;i=function li(t,r,e,i){var u=new En(null,void 0);return t&&xn(u,t),r&&ui(u,r),e&&Qr(u,e),i&&(u.l=i),u}(u.protocol,r?r+"."+u.hostname:u.hostname,+u.port,e)}return t.aa&&ya(t.aa,function(l,f){ir(i,f,l)}),e=t.sa,(r=t.D)&&e&&ir(i,r,e),ir(i,"VER",t.ma),_s(t,i),i}function tl(t,r,e){if(r&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(r=new ci(e&&t.Ba&&!t.qa?new Ls({ib:!0}):t.qa)).L=t.H,r}function rs(){}function Yu(){if(Fi&&!(10<=Number(Le)))throw Error("Environmental error: no available transport.")}function wi(t,r){er.call(this),this.g=new Pr(r),this.l=t,this.h=r&&r.messageUrlParams||null,t=r&&r.messageHeaders||null,r&&r.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=r&&r.initMessageHeaders||null,r&&r.messageContentType&&(t?t["X-WebChannel-Content-Type"]=r.messageContentType:t={"X-WebChannel-Content-Type":r.messageContentType}),r&&r.ya&&(t?t["X-WebChannel-Client-Profile"]=r.ya:t={"X-WebChannel-Client-Profile":r.ya}),this.g.P=t,(t=r&&r.httpHeadersOverwriteParam)&&!ma(t)&&(this.g.o=t),this.A=r&&r.supportsCrossDomainXhr||!1,this.v=r&&r.sendRawJson||!1,(r=r&&r.httpSessionIdParam)&&!ma(r)&&(this.g.D=r,null!==(t=this.h)&&r in t&&r in(t=this.h)&&delete t[r]),this.j=new xs(this)}function nl(t){ru.call(this);var r=t.__sm__;if(r){e:{for(var e in r){t=e;break e}t=void 0}(this.i=t)&&(t=this.i,r=null!==r&&t in r?r[t]:void 0),this.data=r}else this.data=t}function Ta(){Po.call(this),this.status=1}function xs(t){this.g=t}(ot=ci.prototype).ea=function(t,r,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);r=r?r.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Qo.g(),this.C=function si(t){return t.h||(t.h=t.i())}(this.u?this.u:Qo),this.g.onreadystatechange=yr(this.Fa,this);try{this.F=!0,this.g.open(r,String(t),!0),this.F=!1}catch(l){return void Ga(this,l)}t=e||"";var u=new _e(this.headers);i&&ie(i,function(l,f){u.set(f,l)}),i=function Ki(t){e:{for(var r=Oo,e=t.length,i="string"==typeof t?t.split(""):t,u=0;u<e;u++)if(u in i&&r.call(void 0,i[u],u,t)){r=u;break e}r=-1}return 0>r?null:"string"==typeof t?t.charAt(r):t[r]}(u.T()),e=ft.FormData&&t instanceof ft.FormData,!(0<=os(Ku,r))||i||e||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(l,f){this.g.setRequestHeader(f,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{fu(this),0<this.B&&((this.K=function Bl(t){return Fi&&function On(){return function Pi(t){var r=kr;return Object.prototype.hasOwnProperty.call(r,9)?r[9]:r[9]=t(9)}(function(){for(var t=0,r=ls(String(vn)).split("."),e=ls("9").split("."),i=Math.max(r.length,e.length),u=0;0==t&&u<i;u++){var l=r[u]||"",f=e[u]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==l[0].length&&0==f[0].length)break;t=ia(0==l[1].length?0:parseInt(l[1],10),0==f[1].length?0:parseInt(f[1],10))||ia(0==l[2].length,0==f[2].length)||ia(l[2],f[2]),l=l[3],f=f[3]}while(0==t)}return 0<=t})}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yr(this.pa,this)):this.A=Gr(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(l){Ga(this,l)}},ot.pa=function(){void 0!==je&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wn(this,"timeout"),this.abort(8))},ot.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Wn(this,"complete"),Wn(this,"abort"),za(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),za(this,!0)),ci.Z.M.call(this)},ot.Fa=function(){this.s||(this.F||this.v||this.l?$u(this):this.cb())},ot.cb=function(){$u(this)},ot.ba=function(){try{return 2<_i(this)?this.g.status:-1}catch(t){return-1}},ot.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},ot.Qa=function(t){if(this.g){var r=this.g.responseText;return t&&0==r.indexOf(t)&&(r=r.substring(t.length)),_l(r)}},ot.Da=function(){return this.m},ot.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=Pr.prototype).ma=8,ot.G=1,ot.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(r){}},ot.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var r=new ki(this,this.h,t,void 0),e=this.s;if(this.P&&(e?ka(e=Pn(e),this.P):e=this.P),null===this.o&&(r.H=e),this.ja)e:{for(var i=0,u=0;u<this.l.length;u++){var l=this.l[u];if(void 0===(l="__data__"in l.g&&"string"==typeof(l=l.g.__data__)?l.length:void 0))break;if(4096<(i+=l)){i=u;break e}if(4096===i||u===this.l.length-1){i=u+1;break e}}i=1e3}else i=1e3;i=go(this,r,i),ir(u=Cn(this.F),"RID",t),ir(u,"CVER",22),this.D&&ir(u,"X-HTTP-Session-Id",this.D),_s(this,u),this.o&&e&&Xi(u,this.o,e),Su(this.i,r),this.Ra&&ir(u,"TYPE","init"),this.ja?(ir(u,"$req",i),ir(u,"SID","null"),r.$=!0,oo(r,u,null)):oo(r,u,i),this.G=2}}else 3==this.G&&(t?Cr(this,t):0==this.l.length||Iu(this.i)||Cr(this))},ot.Ga=function(){if(this.u=null,Bs(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Bn(yr(this.bb,this),t)}},ot.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,wr(10),el(this),Bs(this))},ot.ab=function(){null!=this.v&&(this.v=null,el(this),hu(this),wr(19))},ot.jb=function(t){t?(this.h.info("Successfully pinged google.com"),wr(2)):(this.h.info("Failed to ping google.com"),wr(1))},(ot=rs.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Oa=function(){},Yu.prototype.g=function(t,r){return new wi(t,r)},Yn(wi,er),wi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,r=this.l,e=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ua(yr(t.hb,t,r))),wr(0),t.W=r,t.aa=e||{},t.N=t.X,t.F=fa(t,null,t.W),Lo(t)},wi.prototype.close=function(){po(this.g)},wi.prototype.u=function(t){if("string"==typeof t){var r={};r.__data__=t,No(this.g,r)}else this.v?((r={}).__data__=gi(t),No(this.g,r)):No(this.g,t)},wi.prototype.M=function(){this.g.j=null,delete this.j,po(this.g),delete this.g,wi.Z.M.call(this)},Yn(nl,ru),Yn(Ta,Po),Yn(xs,rs),xs.prototype.xa=function(){Wn(this.g,"a")},xs.prototype.wa=function(t){Wn(this.g,new nl(t))},xs.prototype.va=function(t){Wn(this.g,new Ta(t))},xs.prototype.ua=function(){Wn(this.g,"b")},Yu.prototype.createWebChannel=Yu.prototype.g,wi.prototype.send=wi.prototype.u,wi.prototype.open=wi.prototype.m,wi.prototype.close=wi.prototype.close,wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,xr.COMPLETE="complete",xu.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",er.prototype.listen=er.prototype.N,ci.prototype.listenOnce=ci.prototype.O,ci.prototype.getLastError=ci.prototype.La,ci.prototype.getLastErrorCode=ci.prototype.Da,ci.prototype.getStatus=ci.prototype.ba,ci.prototype.getResponseJson=ci.prototype.Qa,ci.prototype.getResponseText=ci.prototype.ga,ci.prototype.send=ci.prototype.ea;var qs=Kt.createWebChannelTransport=function(){return new Yu},Ys=Kt.getStatEventTarget=function(){return Vr()},ws=Kt.ErrorCode=wa,zr=Kt.EventType=xr,fs=Kt.Event=At,js=Kt.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Qu=Kt.FetchXmlHttpFactory=Ls,du=Kt.WebChannel=xu,mo=Kt.XhrIo=ci,Pu="@firebase/firestore",Ei=function(){function t(r){(0,z.Z)(this,t),this.uid=r}return(0,H.Z)(t,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),t}();Ei.UNAUTHENTICATED=new Ei(null),Ei.GOOGLE_CREDENTIALS=new Ei("google-credentials-uid"),Ei.FIRST_PARTY=new Ei("first-party-uid"),Ei.MOCK_USER=new Ei("mock-user");var yo="9.6.10",A=new kn.Yd("@firebase/firestore");function U(){return A.logLevel}function D(t){if(A.logLevel<=kn.in.DEBUG){for(var r=arguments.length,e=new Array(r>1?r-1:0),i=1;i<r;i++)e[i-1]=arguments[i];var u=e.map(oe);A.debug.apply(A,["Firestore (".concat(yo,"): ").concat(t)].concat((0,x.Z)(u)))}}function N(t){if(A.logLevel<=kn.in.ERROR){for(var r=arguments.length,e=new Array(r>1?r-1:0),i=1;i<r;i++)e[i-1]=arguments[i];var u=e.map(oe);A.error.apply(A,["Firestore (".concat(yo,"): ").concat(t)].concat((0,x.Z)(u)))}}function J(t){if(A.logLevel<=kn.in.WARN){for(var r=arguments.length,e=new Array(r>1?r-1:0),i=1;i<r;i++)e[i-1]=arguments[i];var u=e.map(oe);A.warn.apply(A,["Firestore (".concat(yo,"): ").concat(t)].concat((0,x.Z)(u)))}}function oe(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function pe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",r="FIRESTORE (".concat(yo,") INTERNAL ASSERTION FAILED: ")+t;throw N(r),new Error(r)}function Ue(t,r){t||pe()}function vt(t,r){return t}var Ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Et=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this,i,u)).code=i,l.message=u,l.toString=function(){return"".concat(l.name,": [code=").concat(l.code,"]: ").concat(l.message)},l}return(0,H.Z)(e)}(on.ZR),Vn=(0,H.Z)(function t(){var r=this;(0,z.Z)(this,t),this.promise=new Promise(function(e,i){r.resolve=e,r.reject=i})}),sr=(0,H.Z)(function t(r,e){(0,z.Z)(this,t),this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(r))}),xi=function(){function t(){(0,z.Z)(this,t)}return(0,H.Z)(t,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,i){e.enqueueRetryable(function(){return i(Ei.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),t}(),ea=function(){function t(r){(0,z.Z)(this,t),this.token=r,this.changeListener=null}return(0,H.Z)(t,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,i){var u=this;this.changeListener=i,e.enqueueRetryable(function(){return i(u.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),t}(),ha=function(){function t(r){(0,z.Z)(this,t),this.t=r,this.currentUser=Ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,H.Z)(t,[{key:"start",value:function(e,i){var u=this,l=this.i,f=function(re){return u.i!==l?(l=u.i,i(re)):Promise.resolve()},v=new Vn;this.o=function(){u.i++,u.currentUser=u.u(),v.resolve(),v=new Vn,e.enqueueRetryable(function(){return f(u.currentUser)})};var b=function(){var re=v;e.enqueueRetryable((0,Se.Z)(te().mark(function de(){return te().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,re.promise;case 2:return we.next=4,f(u.currentUser);case 4:case"end":return we.stop()}},de)})))},Z=function(re){D("FirebaseAuthCredentialsProvider","Auth detected"),u.auth=re,u.auth.addAuthTokenListener(u.o),b()};this.t.onInit(function(K){return Z(K)}),setTimeout(function(){if(!u.auth){var K=u.t.getImmediate({optional:!0});K?Z(K):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new Vn)}},0),b()}},{key:"getToken",value:function(){var e=this,i=this.i,u=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(u).then(function(l){return e.i!==i?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):l?(Ue("string"==typeof l.accessToken),new sr(l.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ue(null===e||"string"==typeof e),new Ei(e)}}]),t}(),Wa=(0,H.Z)(function t(r,e,i){(0,z.Z)(this,t),this.type="FirstParty",this.user=Ei.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);var u=r.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}),vu=function(){function t(r,e,i){(0,z.Z)(this,t),this.h=r,this.l=e,this.m=i}return(0,H.Z)(t,[{key:"getToken",value:function(){return Promise.resolve(new Wa(this.h,this.l,this.m))}},{key:"start",value:function(e,i){e.enqueueRetryable(function(){return i(Ei.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),t}(),Es=(0,H.Z)(function t(r){(0,z.Z)(this,t),this.value=r,this.type="AppCheck",this.headers=new Map,r&&r.length>0&&this.headers.set("x-firebase-appcheck",this.value)}),ei=function(){function t(r){(0,z.Z)(this,t),this.g=r,this.forceRefresh=!1,this.appCheck=null,this.p=null}return(0,H.Z)(t,[{key:"start",value:function(e,i){var u=this;this.o=function(v){e.enqueueRetryable(function(){return function(b){null!=b.error&&D("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(b.error.message));var Z=b.token!==u.p;return u.p=b.token,D("FirebaseAppCheckTokenProvider","Received ".concat(Z?"new":"existing"," token.")),Z?i(b.token):Promise.resolve()}(v)})};var f=function(b){D("FirebaseAppCheckTokenProvider","AppCheck detected"),u.appCheck=b,u.appCheck.addTokenListener(u.o)};this.g.onInit(function(v){return f(v)}),setTimeout(function(){if(!u.appCheck){var v=u.g.getImmediate({optional:!0});v?f(v):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}},{key:"getToken",value:function(){var e=this,i=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(i).then(function(u){return u?(Ue("string"==typeof u.token),e.p=u.token,new Es(u.token)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),t}(),Li=function(){function t(r,e){var i=this;(0,z.Z)(this,t),this.previousValue=r,e&&(e.sequenceNumberHandler=function(u){return i.I(u)},this.T=function(u){return e.writeSequenceNumber(u)})}return(0,H.Z)(t,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),t}();function Gs(t){var r="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(t);if(r&&"function"==typeof r.getRandomValues)r.getRandomValues(e);else for(var i=0;i<t;i++)e[i]=Math.floor(256*Math.random());return e}Li.A=-1;var xl=function(){function t(){(0,z.Z)(this,t)}return(0,H.Z)(t,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length,u="";u.length<20;)for(var l=Gs(40),f=0;f<l.length;++f)u.length<20&&l[f]<i&&(u+=e.charAt(l[f]%e.length));return u}}]),t}();function gr(t,r){return t<r?-1:t>r?1:0}function El(t,r,e){return t.length===r.length&&t.every(function(i,u){return e(i,r[u])})}function jl(t){return t+"\0"}var Er=function(){function t(r,e){if((0,z.Z)(this,t),this.seconds=r,this.nanoseconds=e,e<0)throw new Et(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Et(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(r<-62135596800)throw new Et(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r);if(r>=253402300800)throw new Et(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r)}return(0,H.Z)(t,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?gr(this.nanoseconds,e.nanoseconds):gr(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return t.fromMillis(Date.now())}},{key:"fromDate",value:function(e){return t.fromMillis(e.getTime())}},{key:"fromMillis",value:function(e){var i=Math.floor(e/1e3);return new t(i,Math.floor(1e6*(e-1e3*i)))}}]),t}(),tr=function(){function t(r){(0,z.Z)(this,t),this.timestamp=r}return(0,H.Z)(t,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(e){return new t(e)}},{key:"min",value:function(){return new t(new Er(0,0))}},{key:"max",value:function(){return new t(new Er(253402300799,999999999))}}]),t}();function Ju(t){var r=0;for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r++;return r}function Xu(t,r){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&r(e,t[e])}function rl(t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}var Zo=function(){function t(r,e,i){(0,z.Z)(this,t),void 0===e?e=0:e>r.length&&pe(),void 0===i?i=r.length-e:i>r.length-e&&pe(),this.segments=r,this.offset=e,this.len=i}return(0,H.Z)(t,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(e){return 0===t.comparator(this,e)}},{key:"child",value:function(e){var i=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(u){i.push(u)}):i.push(e),this.construct(i)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}},{key:"forEach",value:function(e){for(var i=this.offset,u=this.limit();i<u;i++)e(this.segments[i])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,i){for(var u=Math.min(e.length,i.length),l=0;l<u;l++){var f=e.get(l),v=i.get(l);if(f<v)return-1;if(f>v)return 1}return e.length<i.length?-1:e.length>i.length?1:0}}]),t}(),Fr=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(){return(0,z.Z)(this,e),r.apply(this,arguments)}return(0,H.Z)(e,[{key:"construct",value:function(u,l,f){return new e(u,l,f)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var u=[],l=arguments.length,f=new Array(l),v=0;v<l;v++)f[v]=arguments[v];for(var b=0,Z=f;b<Z.length;b++){var K=Z[b];if(K.indexOf("//")>=0)throw new Et(Ke.INVALID_ARGUMENT,"Invalid segment (".concat(K,"). Paths must not contain // in them."));u.push.apply(u,(0,x.Z)(K.split("/").filter(function(re){return re.length>0})))}return new e(u)}},{key:"emptyPath",value:function(){return new e([])}}]),e}(Zo),Lc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ka=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(){return(0,z.Z)(this,e),r.apply(this,arguments)}return(0,H.Z)(e,[{key:"construct",value:function(u,l,f){return new e(u,l,f)}},{key:"canonicalString",value:function(){return this.toArray().map(function(u){return u=u.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(u)||(u="`"+u+"`"),u}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(u){return Lc.test(u)}},{key:"keyField",value:function(){return new e(["__name__"])}},{key:"fromServerFormat",value:function(u){for(var l=[],f="",v=0,b=function(){if(0===f.length)throw new Et(Ke.INVALID_ARGUMENT,"Invalid field path (".concat(u,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));l.push(f),f=""},Z=!1;v<u.length;){var K=u[v];if("\\"===K){if(v+1===u.length)throw new Et(Ke.INVALID_ARGUMENT,"Path has trailing escape character: "+u);var re=u[v+1];if("\\"!==re&&"."!==re&&"`"!==re)throw new Et(Ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+u);f+=re,v+=2}else"`"===K?(Z=!Z,v++):"."!==K||Z?(f+=K,v++):(b(),v++)}if(b(),Z)throw new Et(Ke.INVALID_ARGUMENT,"Unterminated ` in path: "+u);return new e(l)}},{key:"emptyPath",value:function(){return new e([])}}]),e}(Zo),ko=function(){function t(r){(0,z.Z)(this,t),this.fields=r,r.sort(Ka.comparator)}return(0,H.Z)(t,[{key:"covers",value:function(e){var u,i=(0,Ce.Z)(this.fields);try{for(i.s();!(u=i.n()).done;)if(u.value.isPrefixOf(e))return!0}catch(f){i.e(f)}finally{i.f()}return!1}},{key:"isEqual",value:function(e){return El(this.fields,e.fields,function(i,u){return i.isEqual(u)})}}]),t}(),ta=function(t){function r(e){(0,z.Z)(this,r),this.binaryString=e}return(0,H.Z)(r,[{key:t,value:function(){var i=this,u=0;return{next:function(){return u<i.binaryString.length?{value:i.binaryString.charCodeAt(u++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return btoa(this.binaryString)}},{key:"toUint8Array",value:function(){return function(i){for(var u=new Uint8Array(i.length),l=0;l<i.length;l++)u[l]=i.charCodeAt(l);return u}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(i){return gr(this.binaryString,i.binaryString)}},{key:"isEqual",value:function(i){return this.binaryString===i.binaryString}}],[{key:"fromBase64String",value:function(i){return new r(atob(i))}},{key:"fromUint8Array",value:function(i){return new r(function(l){for(var f="",v=0;v<l.length;++v)f+=String.fromCharCode(l[v]);return f}(i))}}]),r}(Symbol.iterator);ta.EMPTY_BYTE_STRING=new ta("");var il=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(t){if(Ue(!!t),"string"==typeof t){var r=0,e=il.exec(t);if(Ue(!!e),e[1]){var i=e[1];i=(i+"000000000").substr(0,9),r=Number(i)}var u=new Date(t);return{seconds:Math.floor(u.getTime()/1e3),nanos:r}}return{seconds:ji(t.seconds),nanos:ji(t.nanos)}}function ji(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Hi(t){return"string"==typeof t?ta.fromBase64String(t):ta.fromUint8Array(t)}function is(t){var r,e;return"server_timestamp"===(null===(e=((null===(r=null==t?void 0:t.mapValue)||void 0===r?void 0:r.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function _o(t){var r=t.mapValue.fields.__previous_value__;return is(r)?_o(r):r}function Mu(t){var r=Qs(t.mapValue.fields.__local_write_time__.timestampValue);return new Er(r.seconds,r.nanos)}var Uo=(0,H.Z)(function t(r,e,i,u,l,f,v,b){(0,z.Z)(this,t),this.databaseId=r,this.appId=e,this.persistenceKey=i,this.host=u,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=v,this.useFetchStreams=b}),bs=function(){function t(r,e){(0,z.Z)(this,t),this.projectId=r,this.database=e||"(default)"}return(0,H.Z)(t,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}}],[{key:"empty",value:function(){return new t("","")}}]),t}();function hs(t){return null==t}function Ou(t){return 0===t&&1/t==-1/0}function Hl(t){return"number"==typeof t&&Number.isInteger(t)&&!Ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var hn=function(){function t(r){(0,z.Z)(this,t),this.path=r}return(0,H.Z)(t,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Fr.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(e){return new t(Fr.fromString(e))}},{key:"fromName",value:function(e){return new t(Fr.fromString(e).popFirst(5))}},{key:"empty",value:function(){return new t(Fr.emptyPath())}},{key:"comparator",value:function(e,i){return Fr.comparator(e.path,i.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(e){return new t(new Fr(e.slice()))}}]),t}(),Bo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sa={nullValue:"NULL_VALUE"};function Ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?is(t)?4:sl(t)?9:10:pe()}function ds(t,r){if(t===r)return!0;var u,e=Ts(t);if(e!==Ts(r))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===r.booleanValue;case 4:return Mu(t).isEqual(Mu(r));case 3:return function(i,u){if("string"==typeof i.timestampValue&&"string"==typeof u.timestampValue&&i.timestampValue.length===u.timestampValue.length)return i.timestampValue===u.timestampValue;var l=Qs(i.timestampValue),f=Qs(u.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(t,r);case 5:return t.stringValue===r.stringValue;case 6:return u=r,Hi(t.bytesValue).isEqual(Hi(u.bytesValue));case 7:return t.referenceValue===r.referenceValue;case 8:return function(i,u){return ji(i.geoPointValue.latitude)===ji(u.geoPointValue.latitude)&&ji(i.geoPointValue.longitude)===ji(u.geoPointValue.longitude)}(t,r);case 2:return function(i,u){if("integerValue"in i&&"integerValue"in u)return ji(i.integerValue)===ji(u.integerValue);if("doubleValue"in i&&"doubleValue"in u){var l=ji(i.doubleValue),f=ji(u.doubleValue);return l===f?Ou(l)===Ou(f):isNaN(l)&&isNaN(f)}return!1}(t,r);case 9:return El(t.arrayValue.values||[],r.arrayValue.values||[],ds);case 10:return function(i,u){var l=i.mapValue.fields||{},f=u.mapValue.fields||{};if(Ju(l)!==Ju(f))return!1;for(var v in l)if(l.hasOwnProperty(v)&&(void 0===f[v]||!ds(l[v],f[v])))return!1;return!0}(t,r);default:return pe()}}function Gl(t,r){return void 0!==(t.values||[]).find(function(e){return ds(e,r)})}function pu(t,r){if(t===r)return 0;var u,l,f,v,e=Ts(t),i=Ts(r);if(e!==i)return gr(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return gr(t.booleanValue,r.booleanValue);case 2:return l=r,(f=ji((u=t).integerValue||u.doubleValue))<(v=ji(l.integerValue||l.doubleValue))?-1:f>v?1:f===v?0:isNaN(f)?isNaN(v)?0:-1:1;case 3:return oc(t.timestampValue,r.timestampValue);case 4:return oc(Mu(t),Mu(r));case 5:return gr(t.stringValue,r.stringValue);case 6:return function(u,l){var f=Hi(u),v=Hi(l);return f.compareTo(v)}(t.bytesValue,r.bytesValue);case 7:return function(u,l){for(var f=u.split("/"),v=l.split("/"),b=0;b<f.length&&b<v.length;b++){var Z=gr(f[b],v[b]);if(0!==Z)return Z}return gr(f.length,v.length)}(t.referenceValue,r.referenceValue);case 8:return function(u,l){var f=gr(ji(u.latitude),ji(l.latitude));return 0!==f?f:gr(ji(u.longitude),ji(l.longitude))}(t.geoPointValue,r.geoPointValue);case 9:return function(u,l){for(var f=u.values||[],v=l.values||[],b=0;b<f.length&&b<v.length;++b){var Z=pu(f[b],v[b]);if(Z)return Z}return gr(f.length,v.length)}(t.arrayValue,r.arrayValue);case 10:return function(u,l){var f=u.fields||{},v=Object.keys(f),b=l.fields||{},Z=Object.keys(b);v.sort(),Z.sort();for(var K=0;K<v.length&&K<Z.length;++K){var re=gr(v[K],Z[K]);if(0!==re)return re;var de=pu(f[v[K]],b[Z[K]]);if(0!==de)return de}return gr(v.length,Z.length)}(t.mapValue,r.mapValue);default:throw pe()}}function oc(t,r){if("string"==typeof t&&"string"==typeof r&&t.length===r.length)return gr(t,r);var e=Qs(t),i=Qs(r),u=gr(e.seconds,i.seconds);return 0!==u?u:gr(e.nanos,i.nanos)}function eo(t){return Nu(t)}function Nu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(u=Qs(t.timestampValue),"time(".concat(u.seconds,",").concat(u.nanos,")")):"stringValue"in t?t.stringValue:"bytesValue"in t?Hi(t.bytesValue).toBase64():"referenceValue"in t?hn.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo(".concat((r=t.geoPointValue).latitude,",").concat(r.longitude,")"):"arrayValue"in t?function(i){var v,u="[",l=!0,f=(0,Ce.Z)(i.values||[]);try{for(f.s();!(v=f.n()).done;)l?l=!1:u+=",",u+=Nu(v.value)}catch(Z){f.e(Z)}finally{f.f()}return u+"]"}(t.arrayValue):"mapValue"in t?function(i){var b,u=Object.keys(i.fields||{}).sort(),l="{",f=!0,v=(0,Ce.Z)(u);try{for(v.s();!(b=v.n()).done;){var Z=b.value;f?f=!1:l+=",",l+="".concat(Z,":").concat(Nu(i.fields[Z]))}}catch(K){v.e(K)}finally{v.f()}return l+"}"}(t.mapValue):pe();var u,r}function Lu(t,r){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(r.path.canonicalString())}}function al(t){return!!t&&"integerValue"in t}function wo(t){return!!t&&"arrayValue"in t}function Ds(t){return!!t&&"nullValue"in t}function Eo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gu(t){return!!t&&"mapValue"in t}function mu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var r={mapValue:{fields:{}}};return Xu(t.mapValue.fields,function(u,l){return r.mapValue.fields[u]=mu(l)}),r}if(t.arrayValue){for(var e={arrayValue:{values:[]}},i=0;i<(t.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=mu(t.arrayValue.values[i]);return e}return Object.assign({},t)}function sl(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function to(t,r){return void 0===t?r:void 0===r||pu(t,r)>0?t:r}function zl(t,r){return void 0===t?r:void 0===r||pu(t,r)<0?t:r}var vs=function(){function t(r){(0,z.Z)(this,t),this.value=r}return(0,H.Z)(t,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var i=this.value,u=0;u<e.length-1;++u)if(!gu(i=(i.mapValue.fields||{})[e.get(u)]))return null;return(i=(i.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(i)}},{key:"setAll",value:function(e){var i=this,u=Ka.emptyPath(),l={},f=[];e.forEach(function(b,Z){if(!u.isImmediateParentOf(Z)){var K=i.getFieldsMap(u);i.applyChanges(K,l,f),l={},f=[],u=Z.popLast()}b?l[Z.lastSegment()]=mu(b):f.push(Z.lastSegment())});var v=this.getFieldsMap(u);this.applyChanges(v,l,f)}},{key:"delete",value:function(e){var i=this.field(e.popLast());gu(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return ds(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(var u=0;u<e.length;++u){var l=i.mapValue.fields[e.get(u)];gu(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[e.get(u)]=l),i=l}return i.mapValue.fields}},{key:"applyChanges",value:function(e,i,u){Xu(i,function(b,Z){return e[b]=Z});var f,l=(0,Ce.Z)(u);try{for(l.s();!(f=l.n()).done;)delete e[f.value]}catch(b){l.e(b)}finally{l.f()}}},{key:"clone",value:function(){return new t(mu(this.value))}}],[{key:"empty",value:function(){return new t({mapValue:{}})}}]),t}();function ps(t){var r=[];return Xu(t.fields,function(e,i){var u=new Ka([e]);if(gu(i)){var l=ps(i.mapValue).fields;if(0===l.length)r.push(u);else{var v,f=(0,Ce.Z)(l);try{for(f.s();!(v=f.n()).done;)r.push(u.child(v.value))}catch(Z){f.e(Z)}finally{f.f()}}}else r.push(u)}),new ko(r)}var G=function(){function t(r,e,i,u,l,f){(0,z.Z)(this,t),this.key=r,this.documentType=e,this.version=i,this.readTime=u,this.data=l,this.documentState=f}return(0,H.Z)(t,[{key:"convertToFoundDocument",value:function(e,i){return this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=vs.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=vs.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}},{key:"mutableCopy",value:function(){return new t(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(e){return new t(e,0,tr.min(),tr.min(),vs.empty(),0)}},{key:"newFoundDocument",value:function(e,i,u){return new t(e,1,i,tr.min(),u,0)}},{key:"newNoDocument",value:function(e,i){return new t(e,2,i,tr.min(),vs.empty(),0)}},{key:"newUnknownDocument",value:function(e,i){return new t(e,3,i,tr.min(),vs.empty(),2)}}]),t}(),W=(0,H.Z)(function t(r,e,i,u){(0,z.Z)(this,t),this.indexId=r,this.collectionGroup=e,this.fields=i,this.indexState=u});function ee(t){return t.fields.find(function(r){return 2===r.kind})}function ne(t){return t.fields.filter(function(r){return 2!==r.kind})}W.UNKNOWN_ID=-1;var me=(0,H.Z)(function t(r,e){(0,z.Z)(this,t),this.fieldPath=r,this.kind=e}),ge=function(){function t(r,e){(0,z.Z)(this,t),this.sequenceNumber=r,this.offset=e}return(0,H.Z)(t,null,[{key:"empty",value:function(){return new t(0,bt.min())}}]),t}();function Re(t,r){var e=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,u=tr.fromTimestamp(1e9===i?new Er(e+1,0):new Er(e,i));return new bt(u,hn.empty(),r)}function Oe(t){return new bt(t.readTime,t.key,-1)}var bt=function(){function t(r,e,i){(0,z.Z)(this,t),this.readTime=r,this.documentKey=e,this.largestBatchId=i}return(0,H.Z)(t,null,[{key:"min",value:function(){return new t(tr.min(),hn.empty(),-1)}},{key:"max",value:function(){return new t(tr.max(),hn.empty(),-1)}}]),t}();function Rt(t,r){var e=t.readTime.compareTo(r.readTime);return 0!==e||0!==(e=hn.comparator(t.documentKey,r.documentKey))?e:gr(t.largestBatchId,r.largestBatchId)}var Ht=(0,H.Z)(function t(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,v=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,z.Z)(this,t),this.path=r,this.collectionGroup=e,this.orderBy=i,this.filters=u,this.limit=l,this.startAt=f,this.endAt=v,this.P=null});function Pt(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Ht(t,r,e,i,u,l,f)}function bn(t){var r=vt(t);if(null===r.P){var e=r.path.canonicalString();null!==r.collectionGroup&&(e+="|cg:"+r.collectionGroup),e+="|f:",e+=r.filters.map(function(i){return(u=i).field.canonicalString()+u.op.toString()+eo(u.value);var u}).join(","),e+="|ob:",e+=r.orderBy.map(function(i){return(u=i).field.canonicalString()+u.dir;var u}).join(","),hs(r.limit)||(e+="|l:",e+=r.limit),r.startAt&&(e+="|lb:",e+=r.startAt.inclusive?"b:":"a:",e+=r.startAt.position.map(function(i){return eo(i)}).join(",")),r.endAt&&(e+="|ub:",e+=r.endAt.inclusive?"a:":"b:",e+=r.endAt.position.map(function(i){return eo(i)}).join(",")),r.P=e}return r.P}function Jt(t,r){if(t.limit!==r.limit||t.orderBy.length!==r.orderBy.length)return!1;for(var e=0;e<t.orderBy.length;e++)if(!Fc(t.orderBy[e],r.orderBy[e]))return!1;if(t.filters.length!==r.filters.length)return!1;for(var i=0;i<t.filters.length;i++)if((u=t.filters[i]).op!==(l=r.filters[i]).op||!u.field.isEqual(l.field)||!ds(u.value,l.value))return!1;var u,l;return t.collectionGroup===r.collectionGroup&&!!t.path.isEqual(r.path)&&!!Kl(t.startAt,r.startAt)&&Kl(t.endAt,r.endAt)}function Fn(t){return hn.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function ur(t,r){return t.filters.filter(function(e){return e instanceof nr&&e.field.isEqual(r)})}var nr=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l){var f;return(0,z.Z)(this,e),(f=r.call(this)).field=i,f.op=u,f.value=l,f}return(0,H.Z)(e,[{key:"matches",value:function(u){var l=u.data.field(this.field);return"!="===this.op?null!==l&&this.v(pu(l,this.value)):null!==l&&Ts(this.value)===Ts(l)&&this.v(pu(l,this.value))}},{key:"v",value:function(u){switch(this.op){case"<":return u<0;case"<=":return u<=0;case"==":return 0===u;case"!=":return 0!==u;case">":return u>0;case">=":return u>=0;default:return pe()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(u,l,f){return u.isKeyField()?"in"===l||"not-in"===l?this.V(u,l,f):new bi(u,l,f):"array-contains"===l?new vf(u,f):"in"===l?new ti(u,f):"not-in"===l?new ul(u,f):"array-contains-any"===l?new no(u,f):new e(u,l,f)}},{key:"V",value:function(u,l,f){return"in"===l?new Aa(u,f):new Cs(u,f)}}]),e}(function(){return(0,H.Z)(function t(){(0,z.Z)(this,t)})}()),bi=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l){var f;return(0,z.Z)(this,e),(f=r.call(this,i,u,l)).key=hn.fromName(l.referenceValue),f}return(0,H.Z)(e,[{key:"matches",value:function(u){var l=hn.comparator(u.key,this.key);return this.v(l)}}]),e}(nr),Aa=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this,i,"in",u)).keys=Ai(0,u),l}return(0,H.Z)(e,[{key:"matches",value:function(u){return this.keys.some(function(l){return l.isEqual(u.key)})}}]),e}(nr),Cs=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this,i,"not-in",u)).keys=Ai(0,u),l}return(0,H.Z)(e,[{key:"matches",value:function(u){return!this.keys.some(function(l){return l.isEqual(u.key)})}}]),e}(nr);function Ai(t,r){var e;return((null===(e=r.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(i){return hn.fromName(i.referenceValue)})}var vf=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){return(0,z.Z)(this,e),r.call(this,i,"array-contains",u)}return(0,H.Z)(e,[{key:"matches",value:function(u){var l=u.data.field(this.field);return wo(l)&&Gl(l.arrayValue,this.value)}}]),e}(nr),ti=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){return(0,z.Z)(this,e),r.call(this,i,"in",u)}return(0,H.Z)(e,[{key:"matches",value:function(u){var l=u.data.field(this.field);return null!==l&&Gl(this.value.arrayValue,l)}}]),e}(nr),ul=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){return(0,z.Z)(this,e),r.call(this,i,"not-in",u)}return(0,H.Z)(e,[{key:"matches",value:function(u){if(Gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var l=u.data.field(this.field);return null!==l&&!Gl(this.value.arrayValue,l)}}]),e}(nr),no=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){return(0,z.Z)(this,e),r.call(this,i,"array-contains-any",u)}return(0,H.Z)(e,[{key:"matches",value:function(u){var l=this,f=u.data.field(this.field);return!(!wo(f)||!f.arrayValue.values)&&f.arrayValue.values.some(function(v){return Gl(l.value.arrayValue,v)})}}]),e}(nr),Fu=(0,H.Z)(function t(r,e){(0,z.Z)(this,t),this.position=r,this.inclusive=e}),Wl=(0,H.Z)(function t(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";(0,z.Z)(this,t),this.field=r,this.dir=e});function Fc(t,r){return t.dir===r.dir&&t.field.isEqual(r.field)}function pf(t,r,e){for(var i=0,u=0;u<t.position.length;u++){var l=r[u],f=t.position[u];if(i=l.field.isKeyField()?hn.comparator(hn.fromName(f.referenceValue),e.key):pu(f,e.data.field(l.field)),"desc"===l.dir&&(i*=-1),0!==i)break}return i}function Kl(t,r){if(null===t)return null===r;if(null===r||t.inclusive!==r.inclusive||t.position.length!==r.position.length)return!1;for(var e=0;e<t.position.length;e++)if(!ds(t.position[e],r.position[e]))return!1;return!0}var yu=(0,H.Z)(function t(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",v=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,z.Z)(this,t),this.path=r,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=u,this.limit=l,this.limitType=f,this.startAt=v,this.endAt=b,this.D=null,this.C=null});function Zc(t,r,e,i,u,l,f,v){return new yu(t,r,e,i,u,l,f,v)}function bl(t){return new yu(t)}function Vo(t){return!hs(t.limit)&&"F"===t.limitType}function Tl(t){return!hs(t.limit)&&"L"===t.limitType}function xo(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Uc(t){var e,r=(0,Ce.Z)(t.filters);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.S())return i.field}}catch(u){r.e(u)}finally{r.f()}return null}function Bc(t){return null!==t.collectionGroup}function ol(t){var r=vt(t);if(null===r.D){r.D=[];var e=Uc(r),i=xo(r);if(null!==e&&null===i)e.isKeyField()||r.D.push(new Wl(e)),r.D.push(new Wl(Ka.keyField(),"asc"));else{var f,u=!1,l=(0,Ce.Z)(r.explicitOrderBy);try{for(l.s();!(f=l.n()).done;){var v=f.value;r.D.push(v),v.field.isKeyField()&&(u=!0)}}catch(Z){l.e(Z)}finally{l.f()}if(!u){var b=r.explicitOrderBy.length>0?r.explicitOrderBy[r.explicitOrderBy.length-1].dir:"asc";r.D.push(new Wl(Ka.keyField(),b))}}}return r.D}function Is(t){var r=vt(t);if(!r.C)if("F"===r.limitType)r.C=Pt(r.path,r.collectionGroup,ol(r),r.filters,r.limit,r.startAt,r.endAt);else{var u,e=[],i=(0,Ce.Z)(ol(r));try{for(i.s();!(u=i.n()).done;){var l=u.value;e.push(new Wl(l.field,"desc"===l.dir?"asc":"desc"))}}catch(Z){i.e(Z)}finally{i.f()}var v=r.endAt?new Fu(r.endAt.position,!r.endAt.inclusive):null,b=r.startAt?new Fu(r.startAt.position,!r.startAt.inclusive):null;r.C=Pt(r.path,r.collectionGroup,e,r.filters,r.limit,v,b)}return r.C}function $l(t,r,e){return new yu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),r,e,t.startAt,t.endAt)}function ll(t,r){return Jt(Is(t),Is(r))&&t.limitType===r.limitType}function lc(t){return"".concat(bn(Is(t)),"|lt:").concat(t.limitType)}function cc(t){return"Query(target=".concat(function fr(t){var r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=", filters: [".concat(t.filters.map(function(e){return"".concat((i=e).field.canonicalString()," ").concat(i.op," ").concat(eo(i.value));var i}).join(", "),"]")),hs(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=", orderBy: [".concat(t.orderBy.map(function(e){return"".concat((i=e).field.canonicalString()," (").concat(i.dir,")");var i}).join(", "),"]")),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(function(e){return eo(e)}).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(function(e){return eo(e)}).join(",")),"Target(".concat(r,")")}(Is(t)),"; limitType=").concat(t.limitType,")")}function ql(t,r){return r.isFoundDocument()&&(u=(i=r).key.path,null!==(e=t).collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(u):hn.isDocumentKey(e.path)?e.path.isEqual(u):e.path.isImmediateParentOf(u))&&function(e,i){var l,u=(0,Ce.Z)(e.explicitOrderBy);try{for(u.s();!(l=u.n()).done;){var f=l.value;if(!f.field.isKeyField()&&null===i.data.field(f.field))return!1}}catch(v){u.e(v)}finally{u.f()}return!0}(t,r)&&function(e,i){var l,u=(0,Ce.Z)(e.filters);try{for(u.s();!(l=u.n()).done;)if(!l.value.matches(i))return!1}catch(v){u.e(v)}finally{u.f()}return!0}(t,r)&&function(e,i){return!(e.startAt&&!function(u,l,f){var v=pf(u,l,f);return u.inclusive?v<=0:v<0}(e.startAt,ol(e),i)||e.endAt&&!function(u,l,f){var v=pf(u,l,f);return u.inclusive?v>=0:v>0}(e.endAt,ol(e),i))}(t,r);var e,i,u}function Kf(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gf(t){return function(r,e){var l,i=!1,u=(0,Ce.Z)(ol(t));try{for(u.s();!(l=u.n()).done;){var f=l.value,v=$f(f,r,e);if(0!==v)return v;i=i||f.field.isKeyField()}}catch(b){u.e(b)}finally{u.f()}return 0}}function $f(t,r,e){var u,f,v,b,i=t.field.isKeyField()?hn.comparator(r.key,e.key):(f=e,v=r.data.field(u=t.field),b=f.data.field(u),null!==v&&null!==b?pu(v,b):pe());switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return pe()}}function T(t,r){if(t.N){if(isNaN(r))return{doubleValue:"NaN"};if(r===1/0)return{doubleValue:"Infinity"};if(r===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(r)?"-0":r}}function E(t){return{integerValue:""+t}}function h(t,r){return Hl(r)?E(r):T(t,r)}var m=(0,H.Z)(function t(){(0,z.Z)(this,t),this._=void 0});function R(t,r,e){return t instanceof he?(l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(i=e).seconds,nanos:i.nanoseconds}}}},(u=r)&&(l.fields.__previous_value__=u),{mapValue:l}):t instanceof Ie?We(t,r):t instanceof tt?Zt(t,r):function(i,u){var l=X(i,u),f=gn(l)+gn(i.k);return al(l)&&al(i.k)?E(f):T(i.M,f)}(t,r);var i,u,l}function V(t,r,e){return t instanceof Ie?We(t,r):t instanceof tt?Zt(t,r):e}function X(t,r){return t instanceof Bt?al(e=r)||(i=e)&&"doubleValue"in i?r:{integerValue:0}:null;var i,e}var he=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(){return(0,z.Z)(this,e),r.apply(this,arguments)}return(0,H.Z)(e)}(m),Ie=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i){var u;return(0,z.Z)(this,e),(u=r.call(this)).elements=i,u}return(0,H.Z)(e)}(m);function We(t,r){var u,e=In(r),i=(0,Ce.Z)(t.elements);try{var l=function(){var v=u.value;e.some(function(b){return ds(b,v)})||e.push(v)};for(i.s();!(u=i.n()).done;)l()}catch(f){i.e(f)}finally{i.f()}return{arrayValue:{values:e}}}var tt=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i){var u;return(0,z.Z)(this,e),(u=r.call(this)).elements=i,u}return(0,H.Z)(e)}(m);function Zt(t,r){var u,e=In(r),i=(0,Ce.Z)(t.elements);try{var l=function(){var v=u.value;e=e.filter(function(b){return!ds(b,v)})};for(i.s();!(u=i.n()).done;)l()}catch(f){i.e(f)}finally{i.f()}return{arrayValue:{values:e}}}var Bt=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this)).M=i,l.k=u,l}return(0,H.Z)(e)}(m);function gn(t){return ji(t.integerValue||t.doubleValue)}function In(t){return wo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var $n=(0,H.Z)(function t(r,e){(0,z.Z)(this,t),this.field=r,this.transform=e}),br=(0,H.Z)(function t(r,e){(0,z.Z)(this,t),this.version=r,this.transformResults=e}),Zn=function(){function t(r,e){(0,z.Z)(this,t),this.updateTime=r,this.exists=e}return(0,H.Z)(t,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new t}},{key:"exists",value:function(e){return new t(void 0,e)}},{key:"updateTime",value:function(e){return new t(e)}}]),t}();function rr(t,r){return void 0!==t.updateTime?r.isFoundDocument()&&r.version.isEqual(t.updateTime):void 0===t.exists||t.exists===r.isFoundDocument()}var Jn=(0,H.Z)(function t(){(0,z.Z)(this,t)});function Gi(t,r,e){var i,u,l,f,v;t instanceof va?(u=r,l=e,f=(i=t).value.clone(),v=Dl(i.fieldTransforms,u,l.transformResults),f.setAll(v),u.convertToFoundDocument(l.version,f).setHasCommittedMutations()):t instanceof Ra?function(i,u,l){if(rr(i.precondition,u)){var f=Dl(i.fieldTransforms,u,l.transformResults),v=u.data;v.setAll(jo(i)),v.setAll(f),u.convertToFoundDocument(l.version,v).setHasCommittedMutations()}else u.convertToUnknownDocument(l.version)}(t,r,e):function(i,u,l){u.convertToNoDocument(l.version).setHasCommittedMutations()}(0,r,e)}function vi(t,r,e){var u;t instanceof va?function(i,u,l){if(rr(i.precondition,u)){var f=i.value.clone(),v=cl(i.fieldTransforms,l,u);f.setAll(v),u.convertToFoundDocument(ro(u),f).setHasLocalMutations()}}(t,r,e):t instanceof Ra?function(i,u,l){if(rr(i.precondition,u)){var f=cl(i.fieldTransforms,l,u),v=u.data;v.setAll(jo(i)),v.setAll(f),u.convertToFoundDocument(ro(u),v).setHasLocalMutations()}}(t,r,e):rr(t.precondition,u=r)&&u.convertToNoDocument(tr.min())}function Ti(t,r){var u,e=null,i=(0,Ce.Z)(t.fieldTransforms);try{for(i.s();!(u=i.n()).done;){var l=u.value,f=r.data.field(l.field),v=X(l.transform,f||null);null!=v&&(null==e&&(e=vs.empty()),e.set(l.field,v))}}catch(b){i.e(b)}finally{i.f()}return e||null}function gs(t,r){return t.type===r.type&&!!t.key.isEqual(r.key)&&!!t.precondition.isEqual(r.precondition)&&(i=r.fieldTransforms,!!(void 0===(e=t.fieldTransforms)&&void 0===i||e&&i&&El(e,i,function(u,l){return function or(t,r){return t.field.isEqual(r.field)&&(i=r.transform,(e=t.transform)instanceof Ie&&i instanceof Ie||e instanceof tt&&i instanceof tt?El(e.elements,i.elements,ds):e instanceof Bt&&i instanceof Bt?ds(e.k,i.k):e instanceof he&&i instanceof he);var e,i}(u,l)})))&&(0===t.type?t.value.isEqual(r.value):1!==t.type||t.data.isEqual(r.data)&&t.fieldMask.isEqual(r.fieldMask));var e,i}function ro(t){return t.isFoundDocument()?t.version:tr.min()}var va=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l){var f,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,z.Z)(this,e),(f=r.call(this)).key=i,f.value=u,f.precondition=l,f.fieldTransforms=v,f.type=0,f}return(0,H.Z)(e)}(Jn),Ra=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l,f){var v,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,z.Z)(this,e),(v=r.call(this)).key=i,v.data=u,v.fieldMask=l,v.precondition=f,v.fieldTransforms=b,v.type=1,v}return(0,H.Z)(e)}(Jn);function jo(t){var r=new Map;return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var i=t.data.field(e);r.set(e,i)}}),r}function Dl(t,r,e){var i=new Map;Ue(t.length===e.length);for(var u=0;u<e.length;u++){var l=t[u],f=l.transform,v=r.data.field(l.field);i.set(l.field,V(f,v,e[u]))}return i}function cl(t,r,e){var l,i=new Map,u=(0,Ce.Z)(t);try{for(u.s();!(l=u.n()).done;){var f=l.value,v=f.transform,b=e.data.field(f.field);i.set(f.field,R(v,b,r))}}catch(Z){u.e(Z)}finally{u.f()}return i}var na,Wr,fl=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this)).key=i,l.precondition=u,l.type=2,l.fieldTransforms=[],l}return(0,H.Z)(e)}(Jn),Ho=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this)).key=i,l.precondition=u,l.type=3,l.fieldTransforms=[],l}return(0,H.Z)(e)}(Jn),fc=(0,H.Z)(function t(r){(0,z.Z)(this,t),this.count=r});function Cl(t){switch(t){default:return pe();case Ke.CANCELLED:case Ke.UNKNOWN:case Ke.DEADLINE_EXCEEDED:case Ke.RESOURCE_EXHAUSTED:case Ke.INTERNAL:case Ke.UNAVAILABLE:case Ke.UNAUTHENTICATED:return!1;case Ke.INVALID_ARGUMENT:case Ke.NOT_FOUND:case Ke.ALREADY_EXISTS:case Ke.PERMISSION_DENIED:case Ke.FAILED_PRECONDITION:case Ke.ABORTED:case Ke.OUT_OF_RANGE:case Ke.UNIMPLEMENTED:case Ke.DATA_LOSS:return!0}}function hl(t){if(void 0===t)return N("GRPC error has no .code"),Ke.UNKNOWN;switch(t){case na.OK:return Ke.OK;case na.CANCELLED:return Ke.CANCELLED;case na.UNKNOWN:return Ke.UNKNOWN;case na.DEADLINE_EXCEEDED:return Ke.DEADLINE_EXCEEDED;case na.RESOURCE_EXHAUSTED:return Ke.RESOURCE_EXHAUSTED;case na.INTERNAL:return Ke.INTERNAL;case na.UNAVAILABLE:return Ke.UNAVAILABLE;case na.UNAUTHENTICATED:return Ke.UNAUTHENTICATED;case na.INVALID_ARGUMENT:return Ke.INVALID_ARGUMENT;case na.NOT_FOUND:return Ke.NOT_FOUND;case na.ALREADY_EXISTS:return Ke.ALREADY_EXISTS;case na.PERMISSION_DENIED:return Ke.PERMISSION_DENIED;case na.FAILED_PRECONDITION:return Ke.FAILED_PRECONDITION;case na.ABORTED:return Ke.ABORTED;case na.OUT_OF_RANGE:return Ke.OUT_OF_RANGE;case na.UNIMPLEMENTED:return Ke.UNIMPLEMENTED;case na.DATA_LOSS:return Ke.DATA_LOSS;default:return pe()}}(Wr=na||(na={}))[Wr.OK=0]="OK",Wr[Wr.CANCELLED=1]="CANCELLED",Wr[Wr.UNKNOWN=2]="UNKNOWN",Wr[Wr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wr[Wr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wr[Wr.NOT_FOUND=5]="NOT_FOUND",Wr[Wr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wr[Wr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wr[Wr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wr[Wr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wr[Wr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wr[Wr.ABORTED=10]="ABORTED",Wr[Wr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wr[Wr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wr[Wr.INTERNAL=13]="INTERNAL",Wr[Wr.UNAVAILABLE=14]="UNAVAILABLE",Wr[Wr.DATA_LOSS=15]="DATA_LOSS";var ku=function(){function t(r,e){(0,z.Z)(this,t),this.mapKeyFn=r,this.equalsFn=e,this.inner={},this.innerSize=0}return(0,H.Z)(t,[{key:"get",value:function(e){var i=this.mapKeyFn(e),u=this.inner[i];if(void 0!==u){var f,l=(0,Ce.Z)(u);try{for(l.s();!(f=l.n()).done;){var v=(0,F.Z)(f.value,2),Z=v[1];if(this.equalsFn(v[0],e))return Z}}catch(K){l.e(K)}finally{l.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,i){var u=this.mapKeyFn(e),l=this.inner[u];if(void 0===l)return this.inner[u]=[[e,i]],void this.innerSize++;for(var f=0;f<l.length;f++)if(this.equalsFn(l[f][0],e))return void(l[f]=[e,i]);l.push([e,i]),this.innerSize++}},{key:"delete",value:function(e){var i=this.mapKeyFn(e),u=this.inner[i];if(void 0===u)return!1;for(var l=0;l<u.length;l++)if(this.equalsFn(u[l][0],e))return 1===u.length?delete this.inner[i]:u.splice(l,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Xu(this.inner,function(i,u){var f,l=(0,Ce.Z)(u);try{for(l.s();!(f=l.n()).done;){var v=(0,F.Z)(f.value,2);e(v[0],v[1])}}catch(K){l.e(K)}finally{l.f()}})}},{key:"isEmpty",value:function(){return rl(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),t}(),Pa=function(){function t(r,e){(0,z.Z)(this,t),this.comparator=r,this.root=e||Js.EMPTY}return(0,H.Z)(t,[{key:"insert",value:function(e,i){return new t(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Js.BLACK,null,null))}},{key:"remove",value:function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Js.BLACK,null,null))}},{key:"get",value:function(e){for(var i=this.root;!i.isEmpty();){var u=this.comparator(e,i.key);if(0===u)return i.value;u<0?i=i.left:u>0&&(i=i.right)}return null}},{key:"indexOf",value:function(e){for(var i=0,u=this.root;!u.isEmpty();){var l=this.comparator(e,u.key);if(0===l)return i+u.left.size;l<0?u=u.left:(i+=u.left.size+1,u=u.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(i,u){return e(i,u),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(i,u){return e.push("".concat(i,":").concat(u)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Zu(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Zu(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Zu(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Zu(this.root,e,this.comparator,!0)}}]),t}(),Zu=function(){function t(r,e,i,u){(0,z.Z)(this,t),this.isReverse=u,this.nodeStack=[];for(var l=1;!r.isEmpty();)if(l=e?i(r.key,e):1,e&&u&&(l*=-1),l<0)r=this.isReverse?r.left:r.right;else{if(0===l){this.nodeStack.push(r);break}this.nodeStack.push(r),r=this.isReverse?r.right:r.left}}return(0,H.Z)(t,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),t}(),Js=function(){function t(r,e,i,u,l){(0,z.Z)(this,t),this.key=r,this.value=e,this.color=null!=i?i:t.RED,this.left=null!=u?u:t.EMPTY,this.right=null!=l?l:t.EMPTY,this.size=this.left.size+1+this.right.size}return(0,H.Z)(t,[{key:"copy",value:function(e,i,u,l,f){return new t(null!=e?e:this.key,null!=i?i:this.value,null!=u?u:this.color,null!=l?l:this.left,null!=f?f:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,i,u){var l=this,f=u(e,l.key);return(l=f<0?l.copy(null,null,null,l.left.insert(e,i,u),null):0===f?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,u))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(e,i){var u,l=this;if(i(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===i(e,l.key)){if(l.right.isEmpty())return t.EMPTY;u=l.right.min(),l=l.copy(u.key,u.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,i))}return l.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}},{key:"rotateRight",value:function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();var e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}]),t}();Js.EMPTY=null,Js.RED=!0,Js.BLACK=!1,Js.EMPTY=new(function(){function t(){(0,z.Z)(this,t),this.size=0}return(0,H.Z)(t,[{key:"key",get:function(){throw pe()}},{key:"value",get:function(){throw pe()}},{key:"color",get:function(){throw pe()}},{key:"left",get:function(){throw pe()}},{key:"right",get:function(){throw pe()}},{key:"copy",value:function(e,i,u,l,f){return this}},{key:"insert",value:function(e,i,u){return new Js(e,i)}},{key:"remove",value:function(e,i){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),t}());var Tr=function(){function t(r){(0,z.Z)(this,t),this.comparator=r,this.data=new Pa(this.comparator)}return(0,H.Z)(t,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(i,u){return e(i),!1})}},{key:"forEachInRange",value:function(e,i){for(var u=this.data.getIteratorFrom(e[0]);u.hasNext();){var l=u.getNext();if(this.comparator(l.key,e[1])>=0)return;i(l.key)}}},{key:"forEachWhile",value:function(e,i){var u;for(u=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();u.hasNext();)if(!e(u.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}},{key:"getIterator",value:function(){return new Il(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Il(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var i=this;return i.size<e.size&&(i=e,e=this),e.forEach(function(u){i=i.add(u)}),i}},{key:"isEqual",value:function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var i=this.data.getIterator(),u=e.data.getIterator();i.hasNext();){var l=i.getNext().key,f=u.getNext().key;if(0!==this.comparator(l,f))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(i){e.push(i)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(i){return e.push(i)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(e){var i=new t(this.comparator);return i.data=e,i}}]),t}(),Il=function(){function t(r){(0,z.Z)(this,t),this.iter=r}return(0,H.Z)(t,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),t}();function bo(t){return t.hasNext()?t.getNext():void 0}var hc=new Pa(hn.comparator);function Ss(){return hc}var Vc=new Pa(hn.comparator);function dc(){return Vc}function mn(){return new ku(function(t){return t.toString()},function(t,r){return t.isEqual(r)})}var hr=new Pa(hn.comparator),mr=new Tr(hn.comparator);function Xn(){for(var t=mr,r=arguments.length,e=new Array(r),i=0;i<r;i++)e[i]=arguments[i];for(var u=0,l=e;u<l.length;u++){var f=l[u];t=t.add(f)}return t}var Yl=new Tr(gr);function As(){return Yl}var $a=function(){function t(r,e,i,u,l){(0,z.Z)(this,t),this.snapshotVersion=r,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=u,this.resolvedLimboDocuments=l}return(0,H.Z)(t,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(e,i){var u=new Map;return u.set(e,To.createSynthesizedTargetChangeForCurrentChange(e,i)),new t(tr.min(),u,As(),Ss(),Xn())}}]),t}(),To=function(){function t(r,e,i,u,l){(0,z.Z)(this,t),this.resumeToken=r,this.current=e,this.addedDocuments=i,this.modifiedDocuments=u,this.removedDocuments=l}return(0,H.Z)(t,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(e,i){return new t(ta.EMPTY_BYTE_STRING,i,Xn(),Xn(),Xn())}}]),t}(),Do=(0,H.Z)(function t(r,e,i,u){(0,z.Z)(this,t),this.O=r,this.removedTargetIds=e,this.key=i,this.F=u}),ua=(0,H.Z)(function t(r,e){(0,z.Z)(this,t),this.targetId=r,this.$=e}),pa=(0,H.Z)(function t(r,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ta.EMPTY_BYTE_STRING,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,z.Z)(this,t),this.state=r,this.targetIds=e,this.resumeToken=i,this.cause=u}),Sl=function(){function t(){(0,z.Z)(this,t),this.B=0,this.L=as(),this.U=ta.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}return(0,H.Z)(t,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"K",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.G}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}},{key:"H",value:function(){var e=Xn(),i=Xn(),u=Xn();return this.L.forEach(function(l,f){switch(f){case 0:e=e.add(l);break;case 2:i=i.add(l);break;case 1:u=u.add(l);break;default:pe()}}),new To(this.U,this.q,e,i,u)}},{key:"J",value:function(){this.G=!1,this.L=as()}},{key:"Y",value:function(e,i){this.G=!0,this.L=this.L.insert(e,i)}},{key:"X",value:function(e){this.G=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.G=!0,this.q=!0}}]),t}(),Xs=function(){function t(r){(0,z.Z)(this,t),this.nt=r,this.st=new Map,this.it=Ss(),this.rt=Al(),this.ot=new Tr(gr)}return(0,H.Z)(t,[{key:"ut",value:function(e){var u,i=(0,Ce.Z)(e.O);try{for(i.s();!(u=i.n()).done;){var l=u.value;e.F&&e.F.isFoundDocument()?this.at(l,e.F):this.ct(l,e.key,e.F)}}catch(Z){i.e(Z)}finally{i.f()}var v,f=(0,Ce.Z)(e.removedTargetIds);try{for(f.s();!(v=f.n()).done;)this.ct(v.value,e.key,e.F)}catch(Z){f.e(Z)}finally{f.f()}}},{key:"ht",value:function(e){var i=this;this.forEachTarget(e,function(u){var l=i.lt(u);switch(e.state){case 0:i.ft(u)&&l.W(e.resumeToken);break;case 1:l.tt(),l.K||l.J(),l.W(e.resumeToken);break;case 2:l.tt(),l.K||i.removeTarget(u);break;case 3:i.ft(u)&&(l.et(),l.W(e.resumeToken));break;case 4:i.ft(u)&&(i.dt(u),l.W(e.resumeToken));break;default:pe()}})}},{key:"forEachTarget",value:function(e,i){var u=this;e.targetIds.length>0?e.targetIds.forEach(i):this.st.forEach(function(l,f){u.ft(f)&&i(f)})}},{key:"_t",value:function(e){var i=e.targetId,u=e.$.count,l=this.wt(i);if(l){var f=l.target;if(Fn(f))if(0===u){var v=new hn(f.path);this.ct(i,v,G.newNoDocument(v,tr.min()))}else Ue(1===u);else this.gt(i)!==u&&(this.dt(i),this.ot=this.ot.add(i))}}},{key:"yt",value:function(e){var i=this,u=new Map;this.st.forEach(function(v,b){var Z=i.wt(b);if(Z){if(v.current&&Fn(Z.target)){var K=new hn(Z.target.path);null!==i.it.get(K)||i.It(b,K)||i.ct(b,K,G.newNoDocument(K,e))}v.j&&(u.set(b,v.H()),v.J())}});var l=Xn();this.rt.forEach(function(v,b){var Z=!0;b.forEachWhile(function(K){var re=i.wt(K);return!re||2===re.purpose||(Z=!1,!1)}),Z&&(l=l.add(v))}),this.it.forEach(function(v,b){return b.setReadTime(e)});var f=new $a(e,u,this.ot,this.it,l);return this.it=Ss(),this.rt=Al(),this.ot=new Tr(gr),f}},{key:"at",value:function(e,i){if(this.ft(e)){var u=this.It(e,i.key)?2:0;this.lt(e).Y(i.key,u),this.it=this.it.insert(i.key,i),this.rt=this.rt.insert(i.key,this.Tt(i.key).add(e))}}},{key:"ct",value:function(e,i,u){if(this.ft(e)){var l=this.lt(e);this.It(e,i)?l.Y(i,1):l.X(i),this.rt=this.rt.insert(i,this.Tt(i).delete(e)),u&&(this.it=this.it.insert(i,u))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var i=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var i=this.st.get(e);return i||(i=new Sl,this.st.set(e,i)),i}},{key:"Tt",value:function(e){var i=this.rt.get(e);return i||(i=new Tr(gr),this.rt=this.rt.insert(e,i)),i}},{key:"ft",value:function(e){var i=null!==this.wt(e);return i||D("WatchChangeAggregator","Detected inactive target",e),i}},{key:"wt",value:function(e){var i=this.st.get(e);return i&&i.K?null:this.nt.Et(e)}},{key:"dt",value:function(e){var i=this;this.st.set(e,new Sl),this.nt.getRemoteKeysForTarget(e).forEach(function(u){i.ct(e,u,null)})}},{key:"It",value:function(e,i){return this.nt.getRemoteKeysForTarget(e).has(i)}}]),t}();function Al(){return new Pa(hn.comparator)}function as(){return new Pa(hn.comparator)}var _u={asc:"ASCENDING",desc:"DESCENDING"},vc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fh=(0,H.Z)(function t(r,e){(0,z.Z)(this,t),this.databaseId=r,this.N=e});function Ql(t,r){return t.N?"".concat(new Date(1e3*r.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+r.nanoseconds).slice(-9),"Z"):{seconds:""+r.seconds,nanos:r.nanoseconds}}function xc(t,r){return t.N?r.toBase64():r.toUint8Array()}function Jd(t,r){return Ql(t,r.toTimestamp())}function ss(t){return Ue(!!t),tr.fromTimestamp((e=Qs(t),new Er(e.seconds,e.nanos)));var e}function jc(t,r){return(e=t,new Fr(["projects",e.projectId,"databases",e.database])).child("documents").child(r).canonicalString();var e}function dl(t){var r=Fr.fromString(t);return Ue(P(r)),r}function pc(t,r){return jc(t.databaseId,r.path)}function io(t,r){var e=dl(r);if(e.get(1)!==t.databaseId.projectId)throw new Et(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new Et(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new hn(eu(e))}function qf(t,r){return jc(t.databaseId,r)}function Zh(t){var r=dl(t);return 4===r.length?Fr.emptyPath():eu(r)}function vl(t){return new Fr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eu(t){return Ue(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function mf(t,r,e){return{name:pc(t,r),fields:e.value.mapValue.fields}}function yf(t,r,e){var i=io(t,r.name),u=ss(r.updateTime),l=new vs({mapValue:{fields:r.fields}}),f=G.newFoundDocument(i,u,l);return e&&f.setHasCommittedMutations(),e?f.setHasCommittedMutations():f}function Xd(t,r){return"found"in r?function(e,i){Ue(!!i.found);var u=io(e,i.found.name),l=ss(i.found.updateTime),f=new vs({mapValue:{fields:i.found.fields}});return G.newFoundDocument(u,l,f)}(t,r):"missing"in r?function(e,i){Ue(!!i.missing),Ue(!!i.readTime);var u=io(e,i.missing),l=ss(i.readTime);return G.newNoDocument(u,l)}(t,r):pe()}function Go(t,r){var e,u;if(r instanceof va)e={update:mf(t,r.key,r.value)};else if(r instanceof fl)e={delete:pc(t,r.key)};else if(r instanceof Ra)e={update:mf(t,r.key,r.data),updateMask:I(r.fieldMask)};else{if(!(r instanceof Ho))return pe();e={verify:pc(t,r.key)}}return r.fieldTransforms.length>0&&(e.updateTransforms=r.fieldTransforms.map(function(i){return function(u,l){var f=l.transform;if(f instanceof he)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ie)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof tt)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Bt)return{fieldPath:l.field.canonicalString(),increment:f.k};throw pe()}(0,i)})),r.precondition.isNone||(e.currentDocument=void 0!==(u=r.precondition).updateTime?{updateTime:Jd(t,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:pe()),e}function _f(t,r){var Z,e=r.currentDocument?void 0!==(Z=r.currentDocument).updateTime?Zn.updateTime(ss(Z.updateTime)):void 0!==Z.exists?Zn.exists(Z.exists):Zn.none():Zn.none(),i=r.updateTransforms?r.updateTransforms.map(function(Z){return function(K,re){var de=null;"setToServerValue"in re?(Ue("REQUEST_TIME"===re.setToServerValue),de=new he):"appendMissingElements"in re?de=new Ie(re.appendMissingElements.values||[]):"removeAllFromArray"in re?de=new tt(re.removeAllFromArray.values||[]):"increment"in re?de=new Bt(K,re.increment):pe();var st=Ka.fromServerFormat(re.fieldPath);return new $n(st,de)}(t,Z)}):[];if(r.update){var u=io(t,r.update.name),l=new vs({mapValue:{fields:r.update.fields}});if(r.updateMask){var f=function(Z){return new ko((Z.fieldPaths||[]).map(function(re){return Ka.fromServerFormat(re)}))}(r.updateMask);return new Ra(u,l,f,e,i)}return new va(u,l,e,i)}if(r.delete){var v=io(t,r.delete);return new fl(v,e)}if(r.verify){var b=io(t,r.verify);return new Ho(b,e)}return pe()}function Bh(t,r){return{documents:[qf(t,r.path)]}}function wf(t,r){var e={structuredQuery:{}},i=r.path;null!==r.collectionGroup?(e.parent=qf(t,i),e.structuredQuery.from=[{collectionId:r.collectionGroup,allDescendants:!0}]):(e.parent=qf(t,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);var u=function(b){if(0!==b.length){var Z=b.map(function(K){return function(re){if("=="===re.op){if(Eo(re.value))return{unaryFilter:{field:y(re.field),op:"IS_NAN"}};if(Ds(re.value))return{unaryFilter:{field:y(re.field),op:"IS_NULL"}}}else if("!="===re.op){if(Eo(re.value))return{unaryFilter:{field:y(re.field),op:"IS_NOT_NAN"}};if(Ds(re.value))return{unaryFilter:{field:y(re.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:y(re.field),op:_(re.op),value:re.value}}}(K)});return 1===Z.length?Z[0]:{compositeFilter:{op:"AND",filters:Z}}}}(r.filters);u&&(e.structuredQuery.where=u);var l=function(b){if(0!==b.length)return b.map(function(Z){return{field:y((K=Z).field),direction:tv(K.dir)};var K})}(r.orderBy);l&&(e.structuredQuery.orderBy=l);var v,Z,b,f=(Z=r.limit,t.N||hs(Z)?Z:{value:Z});return null!==f&&(e.structuredQuery.limit=f),r.startAt&&(e.structuredQuery.startAt={before:(v=r.startAt).inclusive,values:v.position}),r.endAt&&(e.structuredQuery.endAt={before:!(b=r.endAt).inclusive,values:b.position}),e}function Vh(t){var r=Zh(t.parent),e=t.structuredQuery,i=e.from?e.from.length:0,u=null;if(i>0){Ue(1===i);var l=e.from[0];l.allDescendants?u=l.collectionId:r=r.child(l.collectionId)}var f=[];e.where&&(f=xh(e.where));var v=[];e.orderBy&&(v=e.orderBy.map(function(re){return new Wl(p((de=re).field),function(Be){switch(Be){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(de.direction));var de}));var re,de,b=null;e.limit&&(b=hs(de="object"==typeof(re=e.limit)?re.value:re)?null:de);var Z=null;e.startAt&&(Z=function(re){return new Fu(re.values||[],!!re.before)}(e.startAt));var K=null;return e.endAt&&(K=function(re){return new Fu(re.values||[],!re.before)}(e.endAt)),Zc(r,u,v,f,b,"F",Z,K)}function xh(t){return t?void 0!==t.unaryFilter?[g(t)]:void 0!==t.fieldFilter?[k(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(r){return xh(r)}).reduce(function(r,e){return r.concat(e)}):pe():[]}function tv(t){return _u[t]}function _(t){return vc[t]}function y(t){return{fieldPath:t.canonicalString()}}function p(t){return Ka.fromServerFormat(t.fieldPath)}function k(t){return nr.create(p(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(t.fieldFilter.op),t.fieldFilter.value)}function g(t){switch(t.unaryFilter.op){case"IS_NAN":var r=p(t.unaryFilter.field);return nr.create(r,"==",{doubleValue:NaN});case"IS_NULL":var e=p(t.unaryFilter.field);return nr.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var i=p(t.unaryFilter.field);return nr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var u=p(t.unaryFilter.field);return nr.create(u,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}function I(t){var r=[];return t.fields.forEach(function(e){return r.push(e.canonicalString())}),{fieldPaths:r}}function P(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function B(t){for(var r="",e=0;e<t.length;e++)r.length>0&&(r=ue(r)),r=Y(t.get(e),r);return ue(r)}function Y(t,r){for(var e=r,i=t.length,u=0;u<i;u++){var l=t.charAt(u);switch(l){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=l}}return e}function ue(t){return t+"\x01\x01"}function Ye(t){var r=t.length;if(Ue(r>=2),2===r)return Ue("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Fr.emptyPath();for(var e=r-2,i=[],u="",l=0;l<r;){var f=t.indexOf("\x01",l);switch((f<0||f>e)&&pe(),t.charAt(f+1)){case"\x01":var v=t.substring(l,f),b=void 0;0===u.length?b=v:(b=u+=v,u=""),i.push(b);break;case"\x10":u+=t.substring(l,f),u+="\0";break;case"\x11":u+=t.substring(l,f+1);break;default:pe()}l=f+2}return new Fr(i)}var nt=["userId","batchId"];function cn(t,r){return[t,B(r)]}function Vt(t,r,e){return[t,B(r),e]}var rn={},an=["prefixPath","collectionGroup","readTime","documentId"],pi=["prefixPath","collectionGroup","documentId"],Ri=["collectionGroup","readTime","prefixPath","documentId"],Ma=["canonicalId","targetId"],Sr=["targetId","path"],Oa=["path","targetId"],Rl=["collectionId","parent"],zo=["indexId","uid"],Hc=["uid","sequenceNumber"],Da=["indexId","uid","arrayValue","directionalValue","documentKey"],nv=["indexId","uid","documentKey"],Yf=["userId","collectionPath","documentId"],rv=["userId","collectionPath","largestBatchId"],Qm=["userId","collectionGroup","largestBatchId"],iv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),av=[].concat((0,x.Z)(iv),["documentOverlays"]),sv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uv=[].concat(sv,["indexConfiguration","indexState","indexEntries"]),rg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ig=function(){function t(){(0,z.Z)(this,t),this.onCommittedListeners=[]}return(0,H.Z)(t,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),t}(),Ut=function(){function t(r){var e=this;(0,z.Z)(this,t),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,r(function(i){e.isDone=!0,e.result=i,e.nextCallback&&e.nextCallback(i)},function(i){e.isDone=!0,e.error=i,e.catchCallback&&e.catchCallback(i)})}return(0,H.Z)(t,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(e,i){var u=this;return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new t(function(l,f){u.nextCallback=function(v){u.wrapSuccess(e,v).next(l,f)},u.catchCallback=function(v){u.wrapFailure(i,v).next(l,f)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(i,u){e.next(i,u)})}},{key:"wrapUserFunction",value:function(e){try{var i=e();return i instanceof t?i:t.resolve(i)}catch(u){return t.reject(u)}}},{key:"wrapSuccess",value:function(e,i){return e?this.wrapUserFunction(function(){return e(i)}):t.resolve(i)}},{key:"wrapFailure",value:function(e,i){return e?this.wrapUserFunction(function(){return e(i)}):t.reject(i)}}],[{key:"resolve",value:function(e){return new t(function(i,u){i(e)})}},{key:"reject",value:function(e){return new t(function(i,u){u(e)})}},{key:"waitFor",value:function(e){return new t(function(i,u){var l=0,f=0,v=!1;e.forEach(function(b){++l,b.next(function(){++f,v&&f===l&&i()},function(Z){return u(Z)})}),v=!0,f===l&&i()})}},{key:"or",value:function(e){var l,i=t.resolve(!1),u=(0,Ce.Z)(e);try{var f=function(){var b=l.value;i=i.next(function(Z){return Z?t.resolve(Z):b()})};for(u.s();!(l=u.n()).done;)f()}catch(v){u.e(v)}finally{u.f()}return i}},{key:"forEach",value:function(e,i){var u=this,l=[];return e.forEach(function(f,v){l.push(i.call(u,f,v))}),this.waitFor(l)}}]),t}(),ov=function(){function t(r,e){var i=this;(0,z.Z)(this,t),this.action=r,this.transaction=e,this.aborted=!1,this.At=new Vn,this.transaction.oncomplete=function(){i.At.resolve()},this.transaction.onabort=function(){e.error?i.At.reject(new Ef(r,e.error)):i.At.resolve()},this.transaction.onerror=function(u){var l=Hh(u.target.error);i.At.reject(new Ef(r,l))}}return(0,H.Z)(t,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(D("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var i=this.transaction.objectStore(e);return new jh(i)}}],[{key:"open",value:function(e,i,u,l){try{return new t(i,e.transaction(l,u))}catch(f){throw new Ef(i,f)}}}]),t}(),Wo=function(){function t(r,e,i){(0,z.Z)(this,t),this.name=r,this.version=e,this.Pt=i,12.2===t.Vt((0,on.z$)())&&N("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return(0,H.Z)(t,[{key:"Nt",value:(r=(0,Se.Z)(te().mark(function i(u){var l=this;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(v.t0=this.db,v.t0){v.next=6;break}return D("SimpleDb","Opening database:",this.name),v.next=5,new Promise(function(b,Z){var K=indexedDB.open(l.name,l.version);K.onsuccess=function(re){b(re.target.result)},K.onblocked=function(){Z(new Ef(u,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},K.onerror=function(re){var de=re.target.error;Z("VersionError"===de.name?new Et(Ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===de.name?new Et(Ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+de):new Ef(u,de))},K.onupgradeneeded=function(re){D("SimpleDb",'Database "'+l.name+'" requires upgrade from version:',re.oldVersion),l.Pt.kt(re.target.result,K.transaction,re.oldVersion,l.version).next(function(){D("SimpleDb","Database upgrade to version "+l.version+" complete")})}});case 5:this.db=v.sent;case 6:return this.Mt&&(this.db.onversionchange=function(b){return l.Mt(b)}),v.abrupt("return",this.db);case 8:case"end":return v.stop()}},i,this)})),function e(i){return r.apply(this,arguments)})},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(i){return e(i)})}},{key:"runTransaction",value:function(){var r=(0,Se.Z)(te().mark(function i(u,l,f,v){var Z,K,re,de,b=this;return te().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:Z="readonly"===l,K=0;case 2:return++K,we.prev=3,we.delegateYield(te().mark(function st(){var pt,Nt;return te().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return Yt.next=2,b.Nt(u);case 2:return b.db=Yt.sent,pt=ov.open(b.db,u,Z?"readonly":"readwrite",f),(Nt=v(pt).next(function(dn){return pt.bt(),dn}).catch(function(dn){return pt.abort(dn),Ut.reject(dn)}).toPromise()).catch(function(){}),Yt.next=7,pt.Rt;case 7:return Yt.t0=Nt,Yt.abrupt("return",{v:Yt.t0});case 9:case"end":return Yt.stop()}},st)})(),"t0",5);case 5:if("object"!=typeof(re=we.t0)){we.next=8;break}return we.abrupt("return",re.v);case 8:we.next=15;break;case 10:if(we.prev=10,we.t1=we.catch(3),D("SimpleDb","Transaction failed with error:",we.t1.message,"Retrying:",de="FirebaseError"!==we.t1.name&&K<3),this.close(),de){we.next=15;break}return we.abrupt("return",Promise.reject(we.t1));case 15:we.next=2;break;case 17:case"end":return we.stop()}},i,this,[[3,10]])}));return function e(i,u,l,f){return r.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return D("SimpleDb","Removing database:",e),zc(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!(0,on.hl)())return!1;if(t.St())return!0;var e=(0,on.z$)(),i=t.Vt(e),u=0<i&&i<10,l=t.Dt(e),f=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||u||f)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,i){return e.store(i)}},{key:"Vt",value:function(e){var i=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),u=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(u)}},{key:"Dt",value:function(e){var i=e.match(/Android ([\d.]+)/i),u=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(u)}}]),t;var r}(),ag=function(){function t(r){(0,z.Z)(this,t),this.Ft=r,this.$t=!1,this.Bt=null}return(0,H.Z)(t,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return zc(this.Ft.delete())}}]),t}(),Ef=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this,Ke.UNAVAILABLE,"IndexedDB transaction '".concat(i,"' failed: ").concat(u))).name="IndexedDbTransactionError",l}return(0,H.Z)(e)}(Et);function Gc(t){return"IndexedDbTransactionError"===t.name}var jh=function(){function t(r){(0,z.Z)(this,t),this.store=r}return(0,H.Z)(t,[{key:"put",value:function(e,i){var u;return void 0!==i?(D("SimpleDb","PUT",this.store.name,e,i),u=this.store.put(i,e)):(D("SimpleDb","PUT",this.store.name,"<auto-key>",e),u=this.store.put(e)),zc(u)}},{key:"add",value:function(e){return D("SimpleDb","ADD",this.store.name,e,e),zc(this.store.add(e))}},{key:"get",value:function(e){var i=this;return zc(this.store.get(e)).next(function(u){return void 0===u&&(u=null),D("SimpleDb","GET",i.store.name,e,u),u})}},{key:"delete",value:function(e){return D("SimpleDb","DELETE",this.store.name,e),zc(this.store.delete(e))}},{key:"count",value:function(){return D("SimpleDb","COUNT",this.store.name),zc(this.store.count())}},{key:"qt",value:function(e,i){var u=this.options(e,i);if(u.index||"function"!=typeof this.store.getAll){var l=this.cursor(u),f=[];return this.Gt(l,function(b,Z){f.push(Z)}).next(function(){return f})}var v=this.store.getAll(u.range);return new Ut(function(b,Z){v.onerror=function(K){Z(K.target.error)},v.onsuccess=function(K){b(K.target.result)}})}},{key:"Kt",value:function(e,i){var u=this.store.getAll(e,null===i?void 0:i);return new Ut(function(l,f){u.onerror=function(v){f(v.target.error)},u.onsuccess=function(v){l(v.target.result)}})}},{key:"Qt",value:function(e,i){D("SimpleDb","DELETE ALL",this.store.name);var u=this.options(e,i);u.jt=!1;var l=this.cursor(u);return this.Gt(l,function(f,v,b){return b.delete()})}},{key:"Wt",value:function(e,i){var u;i?u=e:(u={},i=e);var l=this.cursor(u);return this.Gt(l,i)}},{key:"zt",value:function(e){var i=this.cursor({});return new Ut(function(u,l){i.onerror=function(f){var v=Hh(f.target.error);l(v)},i.onsuccess=function(f){var v=f.target.result;v?e(v.primaryKey,v.value).next(function(b){b?v.continue():u()}):u()}})}},{key:"Gt",value:function(e,i){var u=[];return new Ut(function(l,f){e.onerror=function(v){f(v.target.error)},e.onsuccess=function(v){var b=v.target.result;if(b){var Z=new ag(b),K=i(b.primaryKey,b.value,Z);if(K instanceof Ut){var re=K.catch(function(de){return Z.done(),Ut.reject(de)});u.push(re)}Z.isDone?l():null===Z.Lt?b.continue():b.continue(Z.Lt)}else l()}}).next(function(){return Ut.waitFor(u)})}},{key:"options",value:function(e,i){var u;return void 0!==e&&("string"==typeof e?u=e:i=e),{index:u,range:i}}},{key:"cursor",value:function(e){var i="next";if(e.reverse&&(i="prev"),e.index){var u=this.store.index(e.index);return e.jt?u.openKeyCursor(e.range,i):u.openCursor(e.range,i)}return this.store.openCursor(e.range,i)}}]),t}();function zc(t){return new Ut(function(r,e){t.onsuccess=function(i){r(i.target.result)},t.onerror=function(i){var u=Hh(i.target.error);e(u)}})}var lv=!1;function Hh(t){var r=Wo.Vt((0,on.z$)());if(r>=12.2&&r<13){var e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){var i=new Et("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(e,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return lv||(lv=!0,setTimeout(function(){throw i},0)),i}}return t}var cv=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this)).Ht=i,l.currentSequenceNumber=u,l}return(0,H.Z)(e)}(ig);function ms(t,r){var e=vt(t);return Wo.xt(e.Ht,r)}var Gh=function(){function t(r,e,i,u){(0,z.Z)(this,t),this.batchId=r,this.localWriteTime=e,this.baseMutations=i,this.mutations=u}return(0,H.Z)(t,[{key:"applyToRemoteDocument",value:function(e,i){for(var u=i.mutationResults,l=0;l<this.mutations.length;l++){var f=this.mutations[l];f.key.isEqual(e.key)&&Gi(f,e,u[l])}}},{key:"applyToLocalView",value:function(e){var u,i=(0,Ce.Z)(this.baseMutations);try{for(i.s();!(u=i.n()).done;){var l=u.value;l.key.isEqual(e.key)&&vi(l,e,this.localWriteTime)}}catch(Z){i.e(Z)}finally{i.f()}var v,f=(0,Ce.Z)(this.mutations);try{for(f.s();!(v=f.n()).done;){var b=v.value;b.key.isEqual(e.key)&&vi(b,e,this.localWriteTime)}}catch(Z){f.e(Z)}finally{f.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var i=this;this.mutations.forEach(function(u){var l=e.get(u.key),f=l;i.applyToLocalView(f),l.isValidDocument()||f.convertToNoDocument(tr.min())})}},{key:"keys",value:function(){return this.mutations.reduce(function(e,i){return e.add(i.key)},Xn())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,function(i,u){return gs(i,u)})&&El(this.baseMutations,e.baseMutations,function(i,u){return gs(i,u)})}}]),t}(),zh=function(){function t(r,e,i,u){(0,z.Z)(this,t),this.batch=r,this.commitVersion=e,this.mutationResults=i,this.docVersions=u}return(0,H.Z)(t,null,[{key:"from",value:function(e,i,u){Ue(e.mutations.length===u.length);for(var l=hr,f=e.mutations,v=0;v<f.length;v++)l=l.insert(f[v].key,u[v].version);return new t(e,i,u,l)}}]),t}(),bf=function(){function t(r,e){(0,z.Z)(this,t),this.largestBatchId=r,this.mutation=e}return(0,H.Z)(t,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),t}(),Qf=function(){function t(r,e,i,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tr.min(),f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:tr.min(),v=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ta.EMPTY_BYTE_STRING;(0,z.Z)(this,t),this.target=r,this.targetId=e,this.purpose=i,this.sequenceNumber=u,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=v}return(0,H.Z)(t,[{key:"withSequenceNumber",value:function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(e,i){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e)}},{key:"withLastLimboFreeSnapshotVersion",value:function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}]),t}(),Wh=(0,H.Z)(function t(r){(0,z.Z)(this,t),this.Jt=r});function Kh(t,r){var u,l,e=r.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:gc(r.readTime),hasCommittedMutations:r.hasCommittedMutations};if(r.isFoundDocument())i.document={name:pc(u=t.Jt,(l=r).key),fields:l.data.value.mapValue.fields,updateTime:Ql(u,l.version.toTimestamp())};else if(r.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Wc(r.version)};else{if(!r.isUnknownDocument())return pe();i.unknownDocument={path:e.path.toArray(),version:Wc(r.version)}}return i}function gc(t){var r=t.toTimestamp();return[r.seconds,r.nanoseconds]}function Wc(t){var r=t.toTimestamp();return{seconds:r.seconds,nanoseconds:r.nanoseconds}}function mc(t){var r=new Er(t.seconds,t.nanoseconds);return tr.fromTimestamp(r)}function Tf(t,r){for(var e=(r.baseMutations||[]).map(function(b){return _f(t.Jt,b)}),i=0;i<r.mutations.length-1;++i)i+1<r.mutations.length&&void 0!==r.mutations[i+1].transform&&(r.mutations[i].updateTransforms=r.mutations[i+1].transform.fieldTransforms,r.mutations.splice(i+1,1),++i);var f=r.mutations.map(function(b){return _f(t.Jt,b)}),v=Er.fromMillis(r.localWriteTimeMs);return new Gh(r.batchId,v,e,f)}function Jf(t){var i,u,r=mc(t.readTime),e=void 0!==t.lastLimboFreeSnapshotVersion?mc(t.lastLimboFreeSnapshotVersion):tr.min();return void 0!==t.query.documents?(Ue(1===(u=t.query).documents.length),i=Is(bl(Zh(u.documents[0])))):i=Is(Vh(t.query)),new Qf(i,t.targetId,0,t.lastListenSequenceNumber,r,e,ta.fromBase64String(t.resumeToken))}function fv(t,r){var u,e=Wc(r.snapshotVersion),i=Wc(r.lastLimboFreeSnapshotVersion);u=Fn(r.target)?Bh(t.Jt,r.target):wf(t.Jt,r.target);var l=r.resumeToken.toBase64();return{targetId:r.targetId,canonicalId:bn(r.target),readTime:e,resumeToken:l,lastListenSequenceNumber:r.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:u}}function Xf(t){var r=Vh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?$l(r,r.limit,"L"):r}function $h(t,r){return new bf(r.largestBatchId,_f(t.Jt,r.overlayMutation))}function Jm(t,r){var e=r.path.lastSegment();return[t,B(r.path.popLast()),e]}var ug=function(){function t(){(0,z.Z)(this,t)}return(0,H.Z)(t,[{key:"getBundleMetadata",value:function(e,i){return og(e).get(i).next(function(u){if(u)return{id:(l=u).bundleId,createTime:mc(l.createTime),version:l.version};var l})}},{key:"saveBundleMetadata",value:function(e,i){return og(e).put({bundleId:(u=i).id,createTime:Wc(ss(u.createTime)),version:u.version});var u}},{key:"getNamedQuery",value:function(e,i){return hv(e).get(i).next(function(u){if(u)return{name:(l=u).name,query:Xf(l.bundledQuery),readTime:mc(l.readTime)};var l})}},{key:"saveNamedQuery",value:function(e,i){return hv(e).put({name:(u=i).name,readTime:Wc(ss(u.readTime)),bundledQuery:u.bundledQuery});var u}}]),t}();function og(t){return ms(t,"bundles")}function hv(t){return ms(t,"namedQueries")}var Xm=function(){function t(r,e){(0,z.Z)(this,t),this.M=r,this.userId=e}return(0,H.Z)(t,[{key:"getOverlay",value:function(e,i){var u=this;return eh(e).get(Jm(this.userId,i)).next(function(l){return l?$h(u.M,l):null})}},{key:"saveOverlays",value:function(e,i,u){var l=this,f=[];return u.forEach(function(v,b){var Z=new bf(i,b);f.push(l.Xt(e,Z))}),Ut.waitFor(f)}},{key:"removeOverlaysForBatchId",value:function(e,i,u){var l=this,f=new Set;i.forEach(function(b){return f.add(B(b.getCollectionPath()))});var v=[];return f.forEach(function(b){var Z=IDBKeyRange.bound([l.userId,b,u],[l.userId,b,u+1],!1,!0);v.push(eh(e).Qt("collectionPathOverlayIndex",Z))}),Ut.waitFor(v)}},{key:"getOverlaysForCollection",value:function(e,i,u){var l=this,f=mn(),v=B(i),b=IDBKeyRange.bound([this.userId,v,u],[this.userId,v,Number.POSITIVE_INFINITY],!0);return eh(e).qt("collectionPathOverlayIndex",b).next(function(Z){var re,K=(0,Ce.Z)(Z);try{for(K.s();!(re=K.n()).done;){var Be=$h(l.M,re.value);f.set(Be.getKey(),Be)}}catch(we){K.e(we)}finally{K.f()}return f})}},{key:"getOverlaysForCollectionGroup",value:function(e,i,u,l){var b,f=this,v=mn(),Z=IDBKeyRange.bound([this.userId,i,u],[this.userId,i,Number.POSITIVE_INFINITY],!0);return eh(e).Wt({index:"collectionGroupOverlayIndex",range:Z},function(K,re,de){var Be=$h(f.M,re);v.size()<l||Be.largestBatchId===b?(v.set(Be.getKey(),Be),b=Be.largestBatchId):de.done()}).next(function(){return v})}},{key:"Xt",value:function(e,i){return eh(e).put((u=this.M,v=Jm(l=this.userId,(f=i).mutation.key),{userId:l,collectionPath:(b=(0,F.Z)(v,3))[1],documentId:b[2],collectionGroup:f.mutation.key.getCollectionGroup(),largestBatchId:f.largestBatchId,overlayMutation:Go(u.Jt,f.mutation)}));var u,l,f,v,b}}],[{key:"Yt",value:function(e,i){return new t(e,i.uid||"")}}]),t}();function eh(t){return ms(t,"documentOverlays")}var wu=function(){function t(){(0,z.Z)(this,t)}return(0,H.Z)(t,[{key:"Zt",value:function(e,i){this.te(e,i),i.ee()}},{key:"te",value:function(e,i){if("nullValue"in e)this.ne(i,5);else if("booleanValue"in e)this.ne(i,10),i.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(i,15),i.se(ji(e.integerValue));else if("doubleValue"in e){var u=ji(e.doubleValue);isNaN(u)?this.ne(i,13):(this.ne(i,15),Ou(u)?i.se(0):i.se(u))}else if("timestampValue"in e){var l=e.timestampValue;this.ne(i,20),"string"==typeof l?i.ie(l):(i.ie("".concat(l.seconds||"")),i.se(l.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,i),this.oe(i);else if("bytesValue"in e)this.ne(i,30),i.ue(Hi(e.bytesValue)),this.oe(i);else if("referenceValue"in e)this.ae(e.referenceValue,i);else if("geoPointValue"in e){var f=e.geoPointValue;this.ne(i,45),i.se(f.latitude||0),i.se(f.longitude||0)}else"mapValue"in e?sl(e)?this.ne(i,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,i),this.oe(i)):"arrayValue"in e?(this.he(e.arrayValue,i),this.oe(i)):pe()}},{key:"re",value:function(e,i){this.ne(i,25),this.le(e,i)}},{key:"le",value:function(e,i){i.ie(e)}},{key:"ce",value:function(e,i){var u=e.fields||{};this.ne(i,55);for(var l=0,f=Object.keys(u);l<f.length;l++){var v=f[l];this.re(v,i),this.te(u[v],i)}}},{key:"he",value:function(e,i){var u=e.values||[];this.ne(i,50);var f,l=(0,Ce.Z)(u);try{for(l.s();!(f=l.n()).done;)this.te(f.value,i)}catch(b){l.e(b)}finally{l.f()}}},{key:"ae",value:function(e,i){var u=this;this.ne(i,37),hn.fromName(e).path.forEach(function(l){u.ne(i,60),u.le(l,i)})}},{key:"ne",value:function(e,i){e.se(i)}},{key:"oe",value:function(e){e.se(2)}}]),t}();function ey(t){if(0===t)return 8;var r=0;return t>>4==0&&(r+=4,t<<=4),t>>6==0&&(r+=2,t<<=2),t>>7==0&&(r+=1),r}function dv(t){var r=64-function(e){for(var i=0,u=0;u<8;++u){var l=ey(255&e[u]);if(i+=l,8!==l)break}return i}(t);return Math.ceil(r/8)}wu.fe=new wu;var ty=function(){function t(){(0,z.Z)(this,t),this.buffer=new Uint8Array(1024),this.position=0}return(0,H.Z)(t,[{key:"de",value:function(e){for(var i=e[Symbol.iterator](),u=i.next();!u.done;)this._e(u.value),u=i.next();this.we()}},{key:"me",value:function(e){for(var i=e[Symbol.iterator](),u=i.next();!u.done;)this.ge(u.value),u=i.next();this.ye()}},{key:"pe",value:function(e){var u,i=(0,Ce.Z)(e);try{for(i.s();!(u=i.n()).done;){var l=u.value,f=l.charCodeAt(0);if(f<128)this._e(f);else if(f<2048)this._e(960|f>>>6),this._e(128|63&f);else if(l<"\ud800"||"\udbff"<l)this._e(480|f>>>12),this._e(128|63&f>>>6),this._e(128|63&f);else{var v=l.codePointAt(0);this._e(240|v>>>18),this._e(128|63&v>>>12),this._e(128|63&v>>>6),this._e(128|63&v)}}}catch(b){i.e(b)}finally{i.f()}this.we()}},{key:"Ie",value:function(e){var u,i=(0,Ce.Z)(e);try{for(i.s();!(u=i.n()).done;){var l=u.value,f=l.charCodeAt(0);if(f<128)this.ge(f);else if(f<2048)this.ge(960|f>>>6),this.ge(128|63&f);else if(l<"\ud800"||"\udbff"<l)this.ge(480|f>>>12),this.ge(128|63&f>>>6),this.ge(128|63&f);else{var v=l.codePointAt(0);this.ge(240|v>>>18),this.ge(128|63&v>>>12),this.ge(128|63&v>>>6),this.ge(128|63&v)}}}catch(b){i.e(b)}finally{i.f()}this.ye()}},{key:"Te",value:function(e){var i=this.Ee(e),u=dv(i);this.Ae(1+u),this.buffer[this.position++]=255&u;for(var l=i.length-u;l<i.length;++l)this.buffer[this.position++]=255&i[l]}},{key:"Re",value:function(e){var i=this.Ee(e),u=dv(i);this.Ae(1+u),this.buffer[this.position++]=~(255&u);for(var l=i.length-u;l<i.length;++l)this.buffer[this.position++]=~(255&i[l])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var f,v,i=(f=e,(v=new DataView(new ArrayBuffer(8))).setFloat64(0,f,!1),new Uint8Array(v.buffer)),u=0!=(128&i[0]);i[0]^=u?255:128;for(var l=1;l<i.length;++l)i[l]^=u?255:0;return i}},{key:"_e",value:function(e){var i=255&e;0===i?(this.Pe(0),this.Pe(255)):255===i?(this.Pe(255),this.Pe(0)):this.Pe(i)}},{key:"ge",value:function(e){var i=255&e;0===i?(this.ve(0),this.ve(255)):255===i?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var i=e+this.position;if(!(i<=this.buffer.length)){var u=2*this.buffer.length;u<i&&(u=i);var l=new Uint8Array(u);l.set(this.buffer),this.buffer=l}}}]),t}(),ny=function(){function t(r){(0,z.Z)(this,t),this.De=r}return(0,H.Z)(t,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),t}(),ry=function(){function t(r){(0,z.Z)(this,t),this.De=r}return(0,H.Z)(t,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),t}(),qh=function(){function t(){(0,z.Z)(this,t),this.De=new ty,this.Ce=new ny(this.De),this.xe=new ry(this.De)}return(0,H.Z)(t,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),t}(),Kc=function(){function t(r,e,i,u){(0,z.Z)(this,t),this.indexId=r,this.documentKey=e,this.arrayValue=i,this.directionalValue=u}return(0,H.Z)(t,[{key:"ke",value:function(){var e=this.directionalValue.length,i=0===e||255===this.directionalValue[e-1]?e+1:e,u=new Uint8Array(i);return u.set(this.directionalValue,0),i!==e?u.set([0],this.directionalValue.length):++u[u.length-1],new t(this.indexId,this.documentKey,this.arrayValue,u)}}]),t}();function $c(t,r){var e=t.indexId-r.indexId;return 0!==e||0!==(e=lg(t.arrayValue,r.arrayValue))||0!==(e=lg(t.directionalValue,r.directionalValue))?e:hn.comparator(t.documentKey,r.documentKey)}function lg(t,r){for(var e=0;e<t.length&&e<r.length;++e){var i=t[e]-r[e];if(0!==i)return i}return t.length-r.length}var iy=function(){function t(r){(0,z.Z)(this,t),this.collectionId=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment(),this.Me=r.orderBy,this.Oe=[];var i,e=(0,Ce.Z)(r.filters);try{for(e.s();!(i=e.n()).done;){var l=i.value;l.S()?this.Fe=l:this.Oe.push(l)}}catch(f){e.e(f)}finally{e.f()}}return(0,H.Z)(t,[{key:"$e",value:function(e){var i=ee(e);if(void 0!==i&&!this.Be(i))return!1;for(var u=ne(e),l=0,f=0;l<u.length&&this.Be(u[l]);++l);if(l===u.length)return!0;if(void 0!==this.Fe){var v=u[l];if(!this.Le(this.Fe,v)||!this.Ue(this.Me[f++],v))return!1;++l}for(;l<u.length;++l)if(f>=this.Me.length||!this.Ue(this.Me[f++],u[l]))return!1;return!0}},{key:"Be",value:function(e){var u,i=(0,Ce.Z)(this.Oe);try{for(i.s();!(u=i.n()).done;)if(this.Le(u.value,e))return!0}catch(f){i.e(f)}finally{i.f()}return!1}},{key:"Le",value:function(e,i){return!(void 0===e||!e.field.isEqual(i.fieldPath))&&2===i.kind==("array-contains"===e.op||"array-contains-any"===e.op)}},{key:"Ue",value:function(e,i){return!!e.field.isEqual(i.fieldPath)&&(0===i.kind&&"asc"===e.dir||1===i.kind&&"desc"===e.dir)}}]),t}(),Ar=function(){function t(){(0,z.Z)(this,t),this.qe=new Yh}return(0,H.Z)(t,[{key:"addToCollectionParentIndex",value:function(e,i){return this.qe.add(i),Ut.resolve()}},{key:"getCollectionParents",value:function(e,i){return Ut.resolve(this.qe.getEntries(i))}},{key:"addFieldIndex",value:function(e,i){return Ut.resolve()}},{key:"deleteFieldIndex",value:function(e,i){return Ut.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,i){return Ut.resolve(null)}},{key:"getFieldIndex",value:function(e,i){return Ut.resolve(null)}},{key:"getFieldIndexes",value:function(e,i){return Ut.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ut.resolve(null)}},{key:"updateCollectionGroup",value:function(e,i,u){return Ut.resolve()}},{key:"updateIndexEntries",value:function(e,i){return Ut.resolve()}}]),t}(),Yh=function(){function t(){(0,z.Z)(this,t),this.index={}}return(0,H.Z)(t,[{key:"add",value:function(e){var i=e.lastSegment(),u=e.popLast(),l=this.index[i]||new Tr(Fr.comparator),f=!l.has(u);return this.index[i]=l.add(u),f}},{key:"has",value:function(e){var i=e.lastSegment(),u=e.popLast(),l=this.index[i];return l&&l.has(u)}},{key:"getEntries",value:function(e){return(this.index[e]||new Tr(Fr.comparator)).toArray()}}]),t}(),th=new Uint8Array(0),cg=function(){function t(r){(0,z.Z)(this,t),this.user=r,this.Ge=new Yh,this.Ke=new ku(function(e){return bn(e)},function(e,i){return Jt(e,i)}),this.uid=r.uid||""}return(0,H.Z)(t,[{key:"addToCollectionParentIndex",value:function(e,i){var u=this;if(!this.Ge.has(i)){var l=i.lastSegment(),f=i.popLast();e.addOnCommittedListener(function(){u.Ge.add(i)});var v={collectionId:l,parent:B(f)};return nh(e).put(v)}return Ut.resolve()}},{key:"getCollectionParents",value:function(e,i){var u=[],l=IDBKeyRange.bound([i,""],[jl(i),""],!1,!0);return nh(e).qt(l).next(function(f){var b,v=(0,Ce.Z)(f);try{for(v.s();!(b=v.n()).done;){var Z=b.value;if(Z.collectionId!==i)break;u.push(Ye(Z.parent))}}catch(K){v.e(K)}finally{v.f()}return u})}},{key:"addFieldIndex",value:function(e,i){var f,u=rh(e),l={indexId:(f=i).indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(function(v){return[v.fieldPath.canonicalString(),v.kind]})};return delete l.indexId,u.add(l).next()}},{key:"deleteFieldIndex",value:function(e,i){var u=rh(e),l=Qh(e),f=Uu(e);return u.delete(i.indexId).next(function(){return l.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0))}).next(function(){return f.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0))})}},{key:"getDocumentsMatchingTarget",value:function(e,i){var u=this,l=Uu(e),f=!0,v=new Map;return Ut.forEach(this.Qe(i),function(b){return u.getFieldIndex(e,b).next(function(Z){f&&(f=!!Z),v.set(b,Z)})}).next(function(){if(f){var b=Xn();return Ut.forEach(v,function(Z,K){var re;D("IndexedDbIndexManager","Using index ".concat((re=Z,"id=".concat(re.indexId,"|cg=").concat(re.collectionGroup,"|f=").concat(re.fields.map(function(dn){return"".concat(dn.fieldPath,":").concat(dn.kind)}).join(",")))," to execute ").concat(bn(i)));var de=function(dn,jn){var lr=ee(jn);if(void 0===lr)return null;var Tn,Hn=(0,Ce.Z)(ur(dn,lr.fieldPath));try{for(Hn.s();!(Tn=Hn.n()).done;){var Wi=Tn.value;switch(Wi.op){case"array-contains-any":return Wi.value.arrayValue.values||[];case"array-contains":return[Wi.value]}}}catch(Jr){Hn.e(Jr)}finally{Hn.f()}return null}(K,Z),Be=function(dn,jn){var Tn,lr=new Map,Hn=(0,Ce.Z)(ne(jn));try{for(Hn.s();!(Tn=Hn.n()).done;){var qr,Wi=Tn.value,Jr=(0,Ce.Z)(ur(dn,Wi.fieldPath));try{for(Jr.s();!(qr=Jr.n()).done;){var ga=qr.value;switch(ga.op){case"==":case"in":lr.set(Wi.fieldPath.canonicalString(),ga.value);break;case"not-in":case"!=":return lr.set(Wi.fieldPath.canonicalString(),ga.value),Array.from(lr.values())}}}catch(Eu){Jr.e(Eu)}finally{Jr.f()}}}catch(Eu){Hn.e(Eu)}finally{Hn.f()}return null}(K,Z),we=function(dn,jn){var Wi,Ca,lr=[],Hn=!0,Tn=(0,Ce.Z)(ne(jn));try{for(Tn.s();!(Wi=Tn.n()).done;){var Yo,Jr=Wi.value,qr=void 0,ga=!0,Eu=(0,Ce.Z)(ur(dn,Jr.fieldPath));try{for(Eu.s();!(Yo=Eu.n()).done;){var sc=Yo.value,bu=void 0,Gf=!0;switch(sc.op){case"<":case"<=":bu="nullValue"in(Ca=sc.value)?sa:"booleanValue"in Ca?{booleanValue:!1}:"integerValue"in Ca||"doubleValue"in Ca?{doubleValue:NaN}:"timestampValue"in Ca?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Ca?{stringValue:""}:"bytesValue"in Ca?{bytesValue:""}:"referenceValue"in Ca?Lu(bs.empty(),hn.empty()):"geoPointValue"in Ca?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Ca?{arrayValue:{}}:"mapValue"in Ca?{mapValue:{}}:pe();break;case"==":case"in":case">=":bu=sc.value;break;case">":bu=sc.value,Gf=!1;break;case"!=":case"not-in":bu=sa}to(qr,bu)===bu&&(qr=bu,ga=Gf)}}catch(df){Eu.e(df)}finally{Eu.f()}if(null!==dn.startAt)for(var Zl=0;Zl<dn.orderBy.length;++Zl)if(dn.orderBy[Zl].field.isEqual(Jr.fieldPath)){var hf=dn.startAt.position[Zl];to(qr,hf)===hf&&(qr=hf,ga=dn.startAt.inclusive);break}if(void 0===qr)return null;lr.push(qr),Hn&&(Hn=ga)}}catch(df){Tn.e(df)}finally{Tn.f()}return new Fu(lr,Hn)}(K,Z),st=function(dn,jn){var Wi,Ca,lr=[],Hn=!0,Tn=(0,Ce.Z)(ne(jn));try{for(Tn.s();!(Wi=Tn.n()).done;){var Yo,Jr=Wi.value,qr=void 0,ga=!0,Eu=(0,Ce.Z)(ur(dn,Jr.fieldPath));try{for(Eu.s();!(Yo=Eu.n()).done;){var sc=Yo.value,bu=void 0,Gf=!0;switch(sc.op){case">=":case">":bu="nullValue"in(Ca=sc.value)?{booleanValue:!1}:"booleanValue"in Ca?{doubleValue:NaN}:"integerValue"in Ca||"doubleValue"in Ca?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Ca?{stringValue:""}:"stringValue"in Ca?{bytesValue:""}:"bytesValue"in Ca?Lu(bs.empty(),hn.empty()):"referenceValue"in Ca?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Ca?{arrayValue:{}}:"arrayValue"in Ca?{mapValue:{}}:"mapValue"in Ca?Bo:pe(),Gf=!1;break;case"==":case"in":case"<=":bu=sc.value;break;case"<":bu=sc.value,Gf=!1;break;case"!=":case"not-in":bu=Bo}zl(qr,bu)===bu&&(qr=bu,ga=Gf)}}catch(df){Eu.e(df)}finally{Eu.f()}if(null!==dn.endAt)for(var Zl=0;Zl<dn.orderBy.length;++Zl)if(dn.orderBy[Zl].field.isEqual(Jr.fieldPath)){var hf=dn.endAt.position[Zl];zl(qr,hf)===hf&&(qr=hf,ga=dn.endAt.inclusive);break}if(void 0===qr)return null;lr.push(qr),Hn&&(Hn=ga)}}catch(df){Tn.e(df)}finally{Tn.f()}return new Fu(lr,Hn)}(K,Z),pt=u.je(Z,K,we),Nt=u.je(Z,K,st),sn=u.We(Z,K,Be),Yt=u.ze(Z.indexId,de,pt,!!we&&we.inclusive,Nt,!!st&&st.inclusive,sn);return Ut.forEach(Yt,function(dn){return l.Kt(dn,i.limit).next(function(jn){jn.forEach(function(lr){b=b.add(new hn(Ye(lr.documentKey)))})})})}).next(function(){return b})}return Ut.resolve(null)})}},{key:"Qe",value:function(e){var i=this.Ke.get(e);return i||(this.Ke.set(e,i=[e]),i)}},{key:"ze",value:function(e,i,u,l,f,v,b){for(var Z=this,K=(null!=i?i.length:1)*Math.max(null!=u?u.length:1,null!=f?f.length:1),re=K/(null!=i?i.length:1),de=[],Be=function(pt){var Nt=i?Z.He(i[pt/re]):th,sn=u?Z.Je(e,Nt,u[pt%re],l):Z.Ye(e),Yt=f?Z.Xe(e,Nt,f[pt%re],v):Z.Ye(e+1);de.push.apply(de,(0,x.Z)(Z.createRange(sn,Yt,b.map(function(dn){return Z.Je(e,Nt,dn,!0)}))))},we=0;we<K;++we)Be(we);return de}},{key:"Je",value:function(e,i,u,l){var f=new Kc(e,hn.empty(),i,u);return l?f:f.ke()}},{key:"Xe",value:function(e,i,u,l){var f=new Kc(e,hn.empty(),i,u);return l?f.ke():f}},{key:"Ye",value:function(e){return new Kc(e,hn.empty(),th,th)}},{key:"getFieldIndex",value:function(e,i){var u=new iy(i),l=null!=i.collectionGroup?i.collectionGroup:i.path.lastSegment();return this.getFieldIndexes(e,l).next(function(f){var v=f.filter(function(b){return u.$e(b)});return v.sort(function(b,Z){return Z.fields.length-b.fields.length}),v.length>0?v[0]:null})}},{key:"Ze",value:function(e,i){var f,u=new qh,l=(0,Ce.Z)(ne(e));try{for(l.s();!(f=l.n()).done;){var v=f.value,b=i.data.field(v.fieldPath);if(null==b)return null;var Z=u.Ne(v.kind);wu.fe.Zt(b,Z)}}catch(K){l.e(K)}finally{l.f()}return u.Se()}},{key:"He",value:function(e){var i=new qh;return wu.fe.Zt(e,i.Ne(0)),i.Se()}},{key:"We",value:function(e,i,u){if(null===u)return[];var l=[];l.push(new qh);var b,f=0,v=(0,Ce.Z)(ne(e));try{for(v.s();!(b=v.n()).done;){var de,Z=b.value,K=u[f++],re=(0,Ce.Z)(l);try{for(re.s();!(de=re.n()).done;){var Be=de.value;if(this.tn(i,Z.fieldPath)&&wo(K))l=this.en(l,Z,K);else{var we=Be.Ne(Z.kind);wu.fe.Zt(K,we)}}}catch(st){re.e(st)}finally{re.f()}}}catch(st){v.e(st)}finally{v.f()}return this.nn(l)}},{key:"je",value:function(e,i,u){return null==u?null:this.We(e,i,u.position)}},{key:"nn",value:function(e){for(var i=[],u=0;u<e.length;++u)i[u]=e[u].Se();return i}},{key:"en",value:function(e,i,u){var b,l=(0,x.Z)(e),f=[],v=(0,Ce.Z)(u.arrayValue.values||[]);try{for(v.s();!(b=v.n()).done;){var re,Z=b.value,K=(0,Ce.Z)(l);try{for(K.s();!(re=K.n()).done;){var de=re.value,Be=new qh;Be.seed(de.Se()),wu.fe.Zt(Z,Be.Ne(i.kind)),f.push(Be)}}catch(we){K.e(we)}finally{K.f()}}}catch(we){v.e(we)}finally{v.f()}return f}},{key:"tn",value:function(e,i){return!!e.filters.find(function(u){return u instanceof nr&&u.field.isEqual(i)&&("in"===u.op||"not-in"===u.op)})}},{key:"getFieldIndexes",value:function(e,i){var u=this,l=rh(e),f=Qh(e);return(i?l.qt("collectionGroupIndex",IDBKeyRange.bound(i,i)):l.qt()).next(function(v){var b=[];return Ut.forEach(v,function(Z){return f.get([Z.indexId,u.uid]).next(function(K){var re,de,Be,we;b.push((re=Z,Be=(de=K)?new ge(de.sequenceNumber,new bt(mc(de.readTime),new hn(Ye(de.documentKey)),de.largestBatchId)):ge.empty(),we=re.fields.map(function(st){var pt=(0,F.Z)(st,2),sn=pt[1];return new me(Ka.fromServerFormat(pt[0]),sn)}),new W(re.indexId,re.collectionGroup,we,Be)))})}).next(function(){return b})})}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next(function(i){return 0===i.length?null:(i.sort(function(u,l){var f=u.indexState.sequenceNumber-l.indexState.sequenceNumber;return 0!==f?f:gr(u.collectionGroup,l.collectionGroup)}),i[0].collectionGroup)})}},{key:"updateCollectionGroup",value:function(e,i,u){var l=this,f=rh(e),v=Qh(e);return this.sn(e).next(function(b){return f.qt("collectionGroupIndex",IDBKeyRange.bound(i,i)).next(function(Z){return Ut.forEach(Z,function(K){return v.put({indexId:K.indexId,uid:l.user.uid||"",sequenceNumber:b,readTime:Wc((we=u).readTime),documentKey:B(we.documentKey.path),largestBatchId:we.largestBatchId});var we})})})}},{key:"updateIndexEntries",value:function(e,i){var u=this,l=new Map;return Ut.forEach(i,function(f,v){var b=l.get(f.collectionGroup);return(b?Ut.resolve(b):u.getFieldIndexes(e,f.collectionGroup)).next(function(Z){return l.set(f.collectionGroup,Z),Ut.forEach(Z,function(K){return u.rn(e,f,K).next(function(re){var de=u.on(v,K);return re.isEqual(de)?Ut.resolve():u.un(e,v,re,de)})})})})}},{key:"an",value:function(e,i,u){return Uu(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,documentKey:B(i.key.path)})}},{key:"cn",value:function(e,i,u){return Uu(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,B(i.key.path)])}},{key:"rn",value:function(e,i,u){var l=Uu(e),f=new Tr($c);return l.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([u.indexId,this.uid,B(i.path)])},function(v,b){f=f.add(new Kc(u.indexId,i,b.arrayValue,b.directionalValue))}).next(function(){return f})}},{key:"on",value:function(e,i){var u=new Tr($c),l=this.Ze(i,e);if(null==l)return u;var f=ee(i);if(null!=f){var v=e.data.field(f.fieldPath);if(wo(v)){var Z,b=(0,Ce.Z)(v.arrayValue.values||[]);try{for(b.s();!(Z=b.n()).done;)u=u.add(new Kc(i.indexId,e.key,this.He(Z.value),l))}catch(re){b.e(re)}finally{b.f()}}}else u=u.add(new Kc(i.indexId,e.key,th,l));return u}},{key:"un",value:function(e,i,u,l){var f=this;D("IndexedDbIndexManager","Updating index entries for document '%s'",i.key);var v=[];return function(b,Z,K,re,de){for(var Be=b.getIterator(),we=Z.getIterator(),st=bo(Be),pt=bo(we);st||pt;){var Nt=!1,sn=!1;if(st&&pt){var Yt=K(st,pt);Yt<0?sn=!0:Yt>0&&(Nt=!0)}else null!=st?sn=!0:Nt=!0;Nt?(re(pt),pt=bo(we)):sn?(de(st),st=bo(Be)):(st=bo(Be),pt=bo(we))}}(u,l,$c,function(b){v.push(f.an(e,i,b))},function(b){v.push(f.cn(e,i,b))}),Ut.waitFor(v)}},{key:"sn",value:function(e){var i=1;return Qh(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},function(u,l,f){f.done(),i=l.sequenceNumber+1}).next(function(){return i})}},{key:"createRange",value:function(e,i,u){u=u.sort(function(Be,we){return $c(Be,we)}).filter(function(Be,we,st){return!we||0!==$c(Be,st[we-1])});var l=[];l.push(e);var v,f=(0,Ce.Z)(u);try{for(f.s();!(v=f.n()).done;){var b=v.value,Z=$c(b,e),K=$c(b,i);if(0===Z)l[0]=e.ke();else if(Z>0&&K<0)l.push(b),l.push(b.ke());else if(K>0)break}}catch(Be){f.e(Be)}finally{f.f()}l.push(i);for(var re=[],de=0;de<l.length;de+=2)re.push(IDBKeyRange.bound([l[de].indexId,this.uid,l[de].arrayValue,l[de].directionalValue,""],[l[de+1].indexId,this.uid,l[de+1].arrayValue,l[de+1].directionalValue,""]));return re}}]),t}();function nh(t){return ms(t,"collectionParents")}function Uu(t){return ms(t,"indexEntries")}function rh(t){return ms(t,"indexConfiguration")}function Qh(t){return ms(t,"indexState")}var Jh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zs=function(){function t(r,e,i){(0,z.Z)(this,t),this.cacheSizeCollectionThreshold=r,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}return(0,H.Z)(t,null,[{key:"withCacheSize",value:function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),t}();function Xh(t,r,e){var i=t.store("mutations"),u=t.store("documentMutations"),l=[],f=IDBKeyRange.only(e.batchId),v=0,b=i.Wt({range:f},function(we,st,pt){return v++,pt.delete()});l.push(b.next(function(){Ue(1===v)}));var re,Z=[],K=(0,Ce.Z)(e.mutations);try{for(K.s();!(re=K.n()).done;){var de=re.value,Be=Vt(r,de.key.path,e.batchId);l.push(u.delete(Be)),Z.push(de.key)}}catch(we){K.e(we)}finally{K.f()}return Ut.waitFor(l).next(function(){return Z})}function ih(t){if(!t)return 0;var r;if(t.document)r=t.document;else if(t.unknownDocument)r=t.unknownDocument;else{if(!t.noDocument)throw pe();r=t.noDocument}return JSON.stringify(r).length}zs.DEFAULT_COLLECTION_PERCENTILE=10,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zs.DEFAULT=new zs(41943040,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zs.DISABLED=new zs(-1,0,0);var vv=function(){function t(r,e,i,u){(0,z.Z)(this,t),this.userId=r,this.M=e,this.indexManager=i,this.referenceDelegate=u,this.hn={}}return(0,H.Z)(t,[{key:"checkEmpty",value:function(e){var i=!0,u=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jl(e).Wt({index:"userMutationsIndex",range:u},function(l,f,v){i=!1,v.done()}).next(function(){return i})}},{key:"addMutationBatch",value:function(e,i,u,l){var f=this,v=ah(e),b=Jl(e);return b.add({}).next(function(Z){Ue("number"==typeof Z);var st,sn,Yt,dn,jn,lr,K=new Gh(Z,i,u,l),re=(sn=f.M,Yt=f.userId,jn=(dn=K).baseMutations.map(function(Hn){return Go(sn.Jt,Hn)}),lr=dn.mutations.map(function(Hn){return Go(sn.Jt,Hn)}),{userId:Yt,batchId:dn.batchId,localWriteTimeMs:dn.localWriteTime.toMillis(),baseMutations:jn,mutations:lr}),de=[],Be=new Tr(function(sn,Yt){return gr(sn.canonicalString(),Yt.canonicalString())}),we=(0,Ce.Z)(l);try{for(we.s();!(st=we.n()).done;){var pt=st.value,Nt=Vt(f.userId,pt.key.path,Z);Be=Be.add(pt.key.path.popLast()),de.push(b.put(re)),de.push(v.put(Nt,rn))}}catch(sn){we.e(sn)}finally{we.f()}return Be.forEach(function(sn){de.push(f.indexManager.addToCollectionParentIndex(e,sn))}),e.addOnCommittedListener(function(){f.hn[Z]=K.keys()}),Ut.waitFor(de).next(function(){return K})})}},{key:"lookupMutationBatch",value:function(e,i){var u=this;return Jl(e).get(i).next(function(l){return l?(Ue(l.userId===u.userId),Tf(u.M,l)):null})}},{key:"ln",value:function(e,i){var u=this;return this.hn[i]?Ut.resolve(this.hn[i]):this.lookupMutationBatch(e,i).next(function(l){if(l){var f=l.keys();return u.hn[i]=f,f}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,i){var u=this,l=i+1,f=IDBKeyRange.lowerBound([this.userId,l]),v=null;return Jl(e).Wt({index:"userMutationsIndex",range:f},function(b,Z,K){Z.userId===u.userId&&(Ue(Z.batchId>=l),v=Tf(u.M,Z)),K.done()}).next(function(){return v})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),u=-1;return Jl(e).Wt({index:"userMutationsIndex",range:i,reverse:!0},function(l,f,v){u=f.batchId,v.done()}).next(function(){return u})}},{key:"getAllMutationBatches",value:function(e){var i=this,u=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jl(e).qt("userMutationsIndex",u).next(function(l){return l.map(function(f){return Tf(i.M,f)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,i){var u=this,l=cn(this.userId,i.path),f=IDBKeyRange.lowerBound(l),v=[];return ah(e).Wt({range:f},function(b,Z,K){var re=(0,F.Z)(b,3),de=re[0],we=re[2],st=Ye(re[1]);if(de===u.userId&&i.path.isEqual(st))return Jl(e).get(we).next(function(pt){if(!pt)throw pe();Ue(pt.userId===u.userId),v.push(Tf(u.M,pt))});K.done()}).next(function(){return v})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,i){var u=this,l=new Tr(gr),f=[];return i.forEach(function(v){var b=cn(u.userId,v.path),Z=IDBKeyRange.lowerBound(b),K=ah(e).Wt({range:Z},function(re,de,Be){var we=(0,F.Z)(re,3),st=we[0],Nt=we[2],sn=Ye(we[1]);st===u.userId&&v.path.isEqual(sn)?l=l.add(Nt):Be.done()});f.push(K)}),Ut.waitFor(f).next(function(){return u.fn(e,l)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,i){var u=this,l=i.path,f=l.length+1,v=cn(this.userId,l),b=IDBKeyRange.lowerBound(v),Z=new Tr(gr);return ah(e).Wt({range:b},function(K,re,de){var Be=(0,F.Z)(K,3),we=Be[0],pt=Be[2],Nt=Ye(Be[1]);we===u.userId&&l.isPrefixOf(Nt)?Nt.length===f&&(Z=Z.add(pt)):de.done()}).next(function(){return u.fn(e,Z)})}},{key:"fn",value:function(e,i){var u=this,l=[],f=[];return i.forEach(function(v){f.push(Jl(e).get(v).next(function(b){if(null===b)throw pe();Ue(b.userId===u.userId),l.push(Tf(u.M,b))}))}),Ut.waitFor(f).next(function(){return l})}},{key:"removeMutationBatch",value:function(e,i){var u=this;return Xh(e.Ht,this.userId,i).next(function(l){return e.addOnCommittedListener(function(){u.dn(i.batchId)}),Ut.forEach(l,function(f){return u.referenceDelegate.markPotentiallyOrphaned(e,f)})})}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var i=this;return this.checkEmpty(e).next(function(u){if(!u)return Ut.resolve();var l=IDBKeyRange.lowerBound([i.userId]),f=[];return ah(e).Wt({range:l},function(v,b,Z){if(v[0]===i.userId){var K=Ye(v[1]);f.push(K)}else Z.done()}).next(function(){Ue(0===f.length)})})}},{key:"containsKey",value:function(e,i){return ay(e,this.userId,i)}},{key:"_n",value:function(e){var i=this;return sh(e).get(this.userId).next(function(u){return u||{userId:i.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}})}}],[{key:"Yt",value:function(e,i,u,l){return Ue(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",i,u,l)}}]),t}();function ay(t,r,e){var i=cn(r,e.path),u=i[1],l=IDBKeyRange.lowerBound(i),f=!1;return ah(t).Wt({range:l,jt:!0},function(v,b,Z){var K=(0,F.Z)(v,3);K[0]===r&&K[1]===u&&(f=!0),Z.done()}).next(function(){return f})}function Jl(t){return ms(t,"mutations")}function ah(t){return ms(t,"documentMutations")}function sh(t){return ms(t,"mutationQueues")}var qc=function(){function t(r){(0,z.Z)(this,t),this.wn=r}return(0,H.Z)(t,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new t(0)}},{key:"gn",value:function(){return new t(-1)}}]),t}(),pv=function(){function t(r,e){(0,z.Z)(this,t),this.referenceDelegate=r,this.M=e}return(0,H.Z)(t,[{key:"allocateTargetId",value:function(e){var i=this;return this.yn(e).next(function(u){var l=new qc(u.highestTargetId);return u.highestTargetId=l.next(),i.pn(e,u).next(function(){return u.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next(function(i){return tr.fromTimestamp(new Er(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next(function(i){return i.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,i,u){var l=this;return this.yn(e).next(function(f){return f.highestListenSequenceNumber=i,u&&(f.lastRemoteSnapshotVersion=u.toTimestamp()),i>f.highestListenSequenceNumber&&(f.highestListenSequenceNumber=i),l.pn(e,f)})}},{key:"addTargetData",value:function(e,i){var u=this;return this.In(e,i).next(function(){return u.yn(e).next(function(l){return l.targetCount+=1,u.Tn(i,l),u.pn(e,l)})})}},{key:"updateTargetData",value:function(e,i){return this.In(e,i)}},{key:"removeTargetData",value:function(e,i){var u=this;return this.removeMatchingKeysForTargetId(e,i.targetId).next(function(){return yc(e).delete(i.targetId)}).next(function(){return u.yn(e)}).next(function(l){return Ue(l.targetCount>0),l.targetCount-=1,u.pn(e,l)})}},{key:"removeTargets",value:function(e,i,u){var l=this,f=0,v=[];return yc(e).Wt(function(b,Z){var K=Jf(Z);K.sequenceNumber<=i&&null===u.get(K.targetId)&&(f++,v.push(l.removeTargetData(e,K)))}).next(function(){return Ut.waitFor(v)}).next(function(){return f})}},{key:"forEachTarget",value:function(e,i){return yc(e).Wt(function(u,l){var f=Jf(l);i(f)})}},{key:"yn",value:function(e){return ed(e).get("targetGlobalKey").next(function(i){return Ue(null!==i),i})}},{key:"pn",value:function(e,i){return ed(e).put("targetGlobalKey",i)}},{key:"In",value:function(e,i){return yc(e).put(fv(this.M,i))}},{key:"Tn",value:function(e,i){var u=!1;return e.targetId>i.highestTargetId&&(i.highestTargetId=e.targetId,u=!0),e.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e.sequenceNumber,u=!0),u}},{key:"getTargetCount",value:function(e){return this.yn(e).next(function(i){return i.targetCount})}},{key:"getTargetData",value:function(e,i){var u=bn(i),l=IDBKeyRange.bound([u,Number.NEGATIVE_INFINITY],[u,Number.POSITIVE_INFINITY]),f=null;return yc(e).Wt({range:l,index:"queryTargetsIndex"},function(v,b,Z){var K=Jf(b);Jt(i,K.target)&&(f=K,Z.done())}).next(function(){return f})}},{key:"addMatchingKeys",value:function(e,i,u){var l=this,f=[],v=Yc(e);return i.forEach(function(b){var Z=B(b.path);f.push(v.put({targetId:u,path:Z})),f.push(l.referenceDelegate.addReference(e,u,b))}),Ut.waitFor(f)}},{key:"removeMatchingKeys",value:function(e,i,u){var l=this,f=Yc(e);return Ut.forEach(i,function(v){var b=B(v.path);return Ut.waitFor([f.delete([u,b]),l.referenceDelegate.removeReference(e,u,v)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,i){var u=Yc(e),l=IDBKeyRange.bound([i],[i+1],!1,!0);return u.delete(l)}},{key:"getMatchingKeysForTargetId",value:function(e,i){var u=IDBKeyRange.bound([i],[i+1],!1,!0),l=Yc(e),f=Xn();return l.Wt({range:u,jt:!0},function(v,b,Z){var K=Ye(v[1]),re=new hn(K);f=f.add(re)}).next(function(){return f})}},{key:"containsKey",value:function(e,i){var u=B(i.path),l=IDBKeyRange.bound([u],[jl(u)],!1,!0),f=0;return Yc(e).Wt({index:"documentTargetsIndex",jt:!0,range:l},function(v,b,Z){0!==(0,F.Z)(v,2)[0]&&(f++,Z.done())}).next(function(){return f>0})}},{key:"Et",value:function(e,i){return yc(e).get(i).next(function(u){return u?Jf(u):null})}}]),t}();function yc(t){return ms(t,"targets")}function ed(t){return ms(t,"targetGlobal")}function Yc(t){return ms(t,"targetDocuments")}function Qc(t){return gv.apply(this,arguments)}function gv(){return gv=(0,Se.Z)(te().mark(function t(r){return te().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r.code===Ke.FAILED_PRECONDITION&&r.message===rg){i.next=2;break}throw r;case 2:D("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return i.stop()}},t)})),gv.apply(this,arguments)}function fg(t,r){var e=(0,F.Z)(t,2),i=e[0],u=e[1],l=(0,F.Z)(r,2),v=l[1],b=gr(i,l[0]);return 0===b?gr(u,v):b}var sy=function(){function t(r){(0,z.Z)(this,t),this.En=r,this.buffer=new Tr(fg),this.An=0}return(0,H.Z)(t,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var i=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(i);else{var u=this.buffer.last();fg(i,u)<0&&(this.buffer=this.buffer.delete(u).add(i))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),t}(),hg=function(){function t(r,e){(0,z.Z)(this,t),this.garbageCollector=r,this.asyncQueue=e,this.Pn=!1,this.Vn=null}return(0,H.Z)(t,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"started",get:function(){return null!==this.Vn}},{key:"vn",value:function(e){var i=this,u=this.Pn?3e5:6e4;D("LruGarbageCollector","Garbage collection scheduled in ".concat(u,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",u,(0,Se.Z)(te().mark(function l(){return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return i.Vn=null,i.Pn=!0,v.prev=1,v.next=4,e.collectGarbage(i.garbageCollector);case 4:v.next=14;break;case 6:if(v.prev=6,v.t0=v.catch(1),!Gc(v.t0)){v.next=12;break}D("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",v.t0),v.next=14;break;case 12:return v.next=14,Qc(v.t0);case 14:return v.next=16,i.vn(e);case 16:case"end":return v.stop()}},l,null,[[1,6]])})))}}]),t}(),rk=function(){function t(r,e){(0,z.Z)(this,t),this.Sn=r,this.params=e}return(0,H.Z)(t,[{key:"calculateTargetCount",value:function(e,i){return this.Sn.Dn(e).next(function(u){return Math.floor(i/100*u)})}},{key:"nthSequenceNumber",value:function(e,i){var u=this;if(0===i)return Ut.resolve(Li.A);var l=new sy(i);return this.Sn.forEachTarget(e,function(f){return l.bn(f.sequenceNumber)}).next(function(){return u.Sn.Cn(e,function(f){return l.bn(f)})}).next(function(){return l.maxValue})}},{key:"removeTargets",value:function(e,i,u){return this.Sn.removeTargets(e,i,u)}},{key:"removeOrphanedDocuments",value:function(e,i){return this.Sn.removeOrphanedDocuments(e,i)}},{key:"collect",value:function(e,i){var u=this;return-1===this.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector","Garbage collection skipped; disabled"),Ut.resolve(Jh)):this.getCacheSize(e).next(function(l){return l<u.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(l," is lower than threshold ").concat(u.params.cacheSizeCollectionThreshold)),Jh):u.xn(e,i)})}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,i){var l,f,v,b,Z,K,re,u=this,de=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(Be){return Be>u.params.maximumSequenceNumbersToCollect?(D("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(u.params.maximumSequenceNumbersToCollect," from ").concat(Be)),f=u.params.maximumSequenceNumbersToCollect):f=Be,b=Date.now(),u.nthSequenceNumber(e,f)}).next(function(Be){return l=Be,Z=Date.now(),u.removeTargets(e,l,i)}).next(function(Be){return v=Be,K=Date.now(),u.removeOrphanedDocuments(e,l)}).next(function(Be){return re=Date.now(),U()<=kn.in.DEBUG&&D("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(b-de,"ms\n\tDetermined least recently used ").concat(f," in ")+(Z-b)+"ms\n"+"\tRemoved ".concat(v," targets in ")+(K-Z)+"ms\n"+"\tRemoved ".concat(Be," documents in ")+(re-K)+"ms\n"+"Total Duration: ".concat(re-de,"ms")),Ut.resolve({didRun:!0,sequenceNumbersCollected:f,targetsRemoved:v,documentsRemoved:Be})})}}]),t}(),uy=function(){function t(r,e){(0,z.Z)(this,t),this.db=r,this.garbageCollector=new rk(this,e)}return(0,H.Z)(t,[{key:"Dn",value:function(e){var i=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(function(u){return i.next(function(l){return u+l})})}},{key:"Nn",value:function(e){var i=0;return this.Cn(e,function(u){i++}).next(function(){return i})}},{key:"forEachTarget",value:function(e,i){return this.db.getTargetCache().forEachTarget(e,i)}},{key:"Cn",value:function(e,i){return this.kn(e,function(u,l){return i(l)})}},{key:"addReference",value:function(e,i,u){return mv(e,u)}},{key:"removeReference",value:function(e,i,u){return mv(e,u)}},{key:"removeTargets",value:function(e,i,u){return this.db.getTargetCache().removeTargets(e,i,u)}},{key:"markPotentiallyOrphaned",value:function(e,i){return mv(e,i)}},{key:"Mn",value:function(e,i){return l=i,f=!1,sh(u=e).zt(function(v){return ay(u,v,l).next(function(b){return b&&(f=!0),Ut.resolve(!b)})}).next(function(){return f});var u,l,f}},{key:"removeOrphanedDocuments",value:function(e,i){var u=this,l=this.db.getRemoteDocumentCache().newChangeBuffer(),f=[],v=0;return this.kn(e,function(b,Z){if(Z<=i){var K=u.Mn(e,b).next(function(re){if(!re)return v++,l.getEntry(e,b).next(function(){return l.removeEntry(b,tr.min()),Yc(e).delete([0,B(b.path)])})});f.push(K)}}).next(function(){return Ut.waitFor(f)}).next(function(){return l.apply(e)}).next(function(){return v})}},{key:"removeTarget",value:function(e,i){var u=i.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,u)}},{key:"updateLimboDocument",value:function(e,i){return mv(e,i)}},{key:"kn",value:function(e,i){var l,u=Yc(e),f=Li.A;return u.Wt({index:"documentTargetsIndex"},function(v,b){var Z=(0,F.Z)(v,2),de=b.path,Be=b.sequenceNumber;0===Z[0]?(f!==Li.A&&i(new hn(Ye(l)),f),f=Be,l=de):f=Li.A}).next(function(){f!==Li.A&&i(new hn(Ye(l)),f)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),t}();function mv(t,r){return Yc(t).put((i=t.currentSequenceNumber,{targetId:0,path:B(r.path),sequenceNumber:i}));var i}var yv=function(){function t(){(0,z.Z)(this,t),this.changes=new ku(function(r){return r.toString()},function(r,e){return r.isEqual(e)}),this.changesApplied=!1}return(0,H.Z)(t,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,i){this.assertNotApplied(),this.changes.set(e,G.newInvalidDocument(e).setReadTime(i))}},{key:"getEntry",value:function(e,i){this.assertNotApplied();var u=this.changes.get(i);return void 0!==u?Ut.resolve(u):this.getFromCache(e,i)}},{key:"getEntries",value:function(e,i){return this.getAllFromCache(e,i)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),t}(),dg=function(){function t(r){(0,z.Z)(this,t),this.M=r}return(0,H.Z)(t,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,i,u){return Df(e).put(u)}},{key:"removeEntry",value:function(e,i,u){return Df(e).delete((f=u,[(v=i.path.toArray()).slice(0,v.length-2),v[v.length-2],gc(f),v[v.length-1]]));var f,v}},{key:"updateMetadata",value:function(e,i){var u=this;return this.getMetadata(e).next(function(l){return l.byteSize+=i,u.On(e,l)})}},{key:"getEntry",value:function(e,i){var u=this,l=G.newInvalidDocument(i);return Df(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(nd(i))},function(f,v){l=u.Fn(i,v)}).next(function(){return l})}},{key:"$n",value:function(e,i){var u=this,l={size:0,document:G.newInvalidDocument(i)};return Df(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(nd(i))},function(f,v){l={document:u.Fn(i,v),size:ih(v)}}).next(function(){return l})}},{key:"getEntries",value:function(e,i){var u=this,l=Ss();return this.Bn(e,i,function(f,v){var b=u.Fn(f,v);l=l.insert(f,b)}).next(function(){return l})}},{key:"Ln",value:function(e,i){var u=this,l=Ss(),f=new Pa(hn.comparator);return this.Bn(e,i,function(v,b){var Z=u.Fn(v,b);l=l.insert(v,Z),f=f.insert(v,ih(b))}).next(function(){return{documents:l,Un:f}})}},{key:"Bn",value:function(e,i,u){if(i.isEmpty())return Ut.resolve();var l=new Tr(cy);i.forEach(function(Z){return l=l.add(Z)});var f=IDBKeyRange.bound(nd(l.first()),nd(l.last())),v=l.getIterator(),b=v.getNext();return Df(e).Wt({index:"documentKeyIndex",range:f},function(Z,K,re){for(var de=hn.fromSegments([].concat((0,x.Z)(K.prefixPath),[K.collectionGroup,K.documentId]));b&&cy(b,de)<0;)u(b,null),b=v.getNext();b&&b.isEqual(de)&&(u(b,K),b=v.hasNext()?v.getNext():null),b?re.Ut(nd(b)):re.done()}).next(function(){for(;b;)u(b,null),b=v.hasNext()?v.getNext():null})}},{key:"getAllFromCollection",value:function(e,i,u){var l=this,f=[i.popLast().toArray(),i.lastSegment(),gc(u.readTime),u.documentKey.path.isEmpty()?"":u.documentKey.path.lastSegment()],v=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Df(e).qt(IDBKeyRange.bound(f,v,!0)).next(function(b){var re,Z=Ss(),K=(0,Ce.Z)(b);try{for(K.s();!(re=K.n()).done;){var de=re.value,Be=l.Fn(hn.fromSegments(de.prefixPath.concat(de.collectionGroup,de.documentId)),de);Z=Z.insert(Be.key,Be)}}catch(we){K.e(we)}finally{K.f()}return Z})}},{key:"getAllFromCollectionGroup",value:function(e,i,u,l){var f=this,v=Ss(),b=ly(i,u),Z=ly(i,bt.max());return Df(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(b,Z,!0)},function(K,re,de){var Be=f.Fn(hn.fromSegments(re.prefixPath.concat(re.collectionGroup,re.documentId)),re);(v=v.insert(Be.key,Be)).size===l&&de.done()}).next(function(){return v})}},{key:"newChangeBuffer",value:function(e){return new oy(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(i){return i.byteSize})}},{key:"getMetadata",value:function(e){return td(e).get("remoteDocumentGlobalKey").next(function(i){return Ue(!!i),i})}},{key:"On",value:function(e,i){return td(e).put("remoteDocumentGlobalKey",i)}},{key:"Fn",value:function(e,i){if(i){var u=function sg(t,r){var e,v,b;if(r.document)e=yf(t.Jt,r.document,!!r.hasCommittedMutations);else if(r.noDocument){var i=hn.fromSegments(r.noDocument.path),u=mc(r.noDocument.readTime);e=G.newNoDocument(i,u),r.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!r.unknownDocument)return pe();var l=hn.fromSegments(r.unknownDocument.path),f=mc(r.unknownDocument.version);e=G.newUnknownDocument(l,f)}return r.readTime&&e.setReadTime((b=new Er((v=r.readTime)[0],v[1]),tr.fromTimestamp(b))),e}(this.M,i);if(!u.isNoDocument()||!u.version.isEqual(tr.min()))return u}return G.newInvalidDocument(e)}}]),t}(),oy=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this)).qn=i,l.trackRemovals=u,l.Gn=new ku(function(f){return f.toString()},function(f,v){return f.isEqual(v)}),l}return(0,H.Z)(e,[{key:"applyChanges",value:function(u){var l=this,f=[],v=0,b=new Tr(function(Z,K){return gr(Z.canonicalString(),K.canonicalString())});return this.changes.forEach(function(Z,K){var re=l.Gn.get(Z);if(f.push(l.qn.removeEntry(u,Z,re.readTime)),K.isValidDocument()){var de=Kh(l.qn.M,K);b=b.add(Z.path.popLast());var Be=ih(de);v+=Be-re.size,f.push(l.qn.addEntry(u,Z,de))}else if(v-=re.size,l.trackRemovals){var we=Kh(l.qn.M,K.convertToNoDocument(tr.min()));f.push(l.qn.addEntry(u,Z,we))}}),b.forEach(function(Z){f.push(l.qn.indexManager.addToCollectionParentIndex(u,Z))}),f.push(this.qn.updateMetadata(u,v)),Ut.waitFor(f)}},{key:"getFromCache",value:function(u,l){var f=this;return this.qn.$n(u,l).next(function(v){return f.Gn.set(l,{size:v.size,readTime:v.document.readTime}),v.document})}},{key:"getAllFromCache",value:function(u,l){var f=this;return this.qn.Ln(u,l).next(function(v){var b=v.documents;return v.Un.forEach(function(K,re){f.Gn.set(K,{size:re,readTime:b.get(K).readTime})}),b})}}]),e}(yv);function td(t){return ms(t,"remoteDocumentGlobal")}function Df(t){return ms(t,"remoteDocumentsV14")}function nd(t){var r=t.path.toArray();return[r.slice(0,r.length-2),r[r.length-2],r[r.length-1]]}function ly(t,r){var e=r.documentKey.path.toArray();return[t,gc(r.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function cy(t,r){var e=t.path.length-r.path.length;return 0!==e?e:hn.comparator(t,r)}var ik=function(){function t(r){(0,z.Z)(this,t),this.M=r}return(0,H.Z)(t,[{key:"kt",value:function(e,i,u,l){var Z,f=this,v=new ov("createOrUpgrade",i);u<1&&l>=1&&(e.createObjectStore("owner"),(Z=e).createObjectStore("mutationQueues",{keyPath:"userId"}),Z.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nt,{unique:!0}),Z.createObjectStore("documentMutations"),fy(e),function(Z){Z.createObjectStore("remoteDocuments")}(e));var b=Ut.resolve();return u<3&&l>=3&&(0!==u&&(function(Z){Z.deleteObjectStore("targetDocuments"),Z.deleteObjectStore("targets"),Z.deleteObjectStore("targetGlobal")}(e),fy(e)),b=b.next(function(){return function(Z){var K=Z.store("targetGlobal"),re={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:tr.min().toTimestamp(),targetCount:0};return K.put("targetGlobalKey",re)}(v)})),u<4&&l>=4&&(0!==u&&(b=b.next(function(){return function(Z,K){return K.store("mutations").qt().next(function(re){Z.deleteObjectStore("mutations"),Z.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nt,{unique:!0});var de=K.store("mutations"),Be=re.map(function(we){return de.put(we)});return Ut.waitFor(Be)})}(e,v)})),b=b.next(function(){!function(Z){Z.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),u<5&&l>=5&&(b=b.next(function(){return f.Kn(v)})),u<6&&l>=6&&(b=b.next(function(){return function(Z){Z.createObjectStore("remoteDocumentGlobal")}(e),f.Qn(v)})),u<7&&l>=7&&(b=b.next(function(){return f.jn(v)})),u<8&&l>=8&&(b=b.next(function(){return f.Wn(e,v)})),u<9&&l>=9&&(b=b.next(function(){!function(Z){Z.objectStoreNames.contains("remoteDocumentChanges")&&Z.deleteObjectStore("remoteDocumentChanges")}(e)})),u<10&&l>=10&&(b=b.next(function(){return f.zn(v)})),u<11&&l>=11&&(b=b.next(function(){(function(Z){Z.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(Z){Z.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),u<12&&l>=12&&(b=b.next(function(){!function(Z){var K=Z.createObjectStore("documentOverlays",{keyPath:Yf});K.createIndex("collectionPathOverlayIndex",rv,{unique:!1}),K.createIndex("collectionGroupOverlayIndex",Qm,{unique:!1})}(e)})),u<13&&l>=13&&(b=b.next(function(){return function(Z){var K=Z.createObjectStore("remoteDocumentsV14",{keyPath:an});K.createIndex("documentKeyIndex",pi),K.createIndex("collectionGroupIndex",Ri)}(e)}).next(function(){return f.Hn(e,v)}).next(function(){return e.deleteObjectStore("remoteDocuments")})),u<14&&l>=14&&(b=b.next(function(){!function(Z){Z.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),Z.createObjectStore("indexState",{keyPath:zo}).createIndex("sequenceNumberIndex",Hc,{unique:!1}),Z.createObjectStore("indexEntries",{keyPath:Da}).createIndex("documentKeyIndex",nv,{unique:!1})}(e)})),b}},{key:"Qn",value:function(e){var i=0;return e.store("remoteDocuments").Wt(function(u,l){i+=ih(l)}).next(function(){var u={byteSize:i};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",u)})}},{key:"Kn",value:function(e){var i=this,u=e.store("mutationQueues"),l=e.store("mutations");return u.qt().next(function(f){return Ut.forEach(f,function(v){var b=IDBKeyRange.bound([v.userId,-1],[v.userId,v.lastAcknowledgedBatchId]);return l.qt("userMutationsIndex",b).next(function(Z){return Ut.forEach(Z,function(K){Ue(K.userId===v.userId);var re=Tf(i.M,K);return Xh(e,v.userId,re).next(function(){})})})})})}},{key:"jn",value:function(e){var i=e.store("targetDocuments"),u=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(function(l){var f=[];return u.Wt(function(v,b){var Z=new Fr(v),K=[0,B(Z)];f.push(i.get(K).next(function(re){return re?Ut.resolve():i.put({targetId:0,path:B(Z),sequenceNumber:l.highestListenSequenceNumber})}))}).next(function(){return Ut.waitFor(f)})})}},{key:"Wn",value:function(e,i){e.createObjectStore("collectionParents",{keyPath:Rl});var u=i.store("collectionParents"),l=new Yh,f=function(b){if(l.add(b)){var Z=b.lastSegment(),K=b.popLast();return u.put({collectionId:Z,parent:B(K)})}};return i.store("remoteDocuments").Wt({jt:!0},function(v,b){var Z=new Fr(v);return f(Z.popLast())}).next(function(){return i.store("documentMutations").Wt({jt:!0},function(v,b){var Be=Ye((0,F.Z)(v,3)[1]);return f(Be.popLast())})})}},{key:"zn",value:function(e){var i=this,u=e.store("targets");return u.Wt(function(l,f){var v=Jf(f),b=fv(i.M,v);return u.put(b)})}},{key:"Hn",value:function(e,i){var u=i.store("remoteDocuments"),l=[];return u.Wt(function(f,v){var K,b=i.store("remoteDocumentsV14"),Z=(K=v,K.document?new hn(Fr.fromString(K.document.name).popFirst(5)):K.noDocument?hn.fromSegments(K.noDocument.path):K.unknownDocument?hn.fromSegments(K.unknownDocument.path):pe()).path.toArray(),re={prefixPath:Z.slice(0,Z.length-2),collectionGroup:Z[Z.length-2],documentId:Z[Z.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};l.push(b.put(re))}).next(function(){return Ut.waitFor(l)})}}]),t}();function fy(t){t.createObjectStore("targetDocuments",{keyPath:Sr}).createIndex("documentTargetsIndex",Oa,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ma,{unique:!0}),t.createObjectStore("targetGlobal")}var vg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ak=function(){function t(r,e,i,u,l,f,v,b,Z,K){var re=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if((0,z.Z)(this,t),this.allowTabSynchronization=r,this.persistenceKey=e,this.clientId=i,this.Jn=l,this.window=f,this.document=v,this.Yn=Z,this.Xn=K,this.Zn=re,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=function(de){return Promise.resolve()},!t.vt())throw new Et(Ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uy(this,u),this.cs=e+"main",this.M=new Wh(b),this.hs=new Wo(this.cs,this.Zn,new ik(this.M)),this.ls=new pv(this.referenceDelegate,this.M),this.fs=new dg(this.M),this.ds=new ug,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===K&&N("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return(0,H.Z)(t,[{key:"start",value:function(){var e=this;return this.ws().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Et(Ke.FAILED_PRECONDITION,vg);return e.gs(),e.ys(),e.ps(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(i){return e.ls.getHighestSequenceNumber(i)})}).then(function(i){e.ts=new Li(i,e.Yn)}).then(function(){e.es=!0}).catch(function(i){return e.hs&&e.hs.close(),Promise.reject(i)})}},{key:"Is",value:function(e){var i=this;return this.us=function(){var u=(0,Se.Z)(te().mark(function l(f){return te().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!i.started){b.next=2;break}return b.abrupt("return",e(f));case 2:case"end":return b.stop()}},l)}));return function(l){return u.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.hs.Ot(function(){var i=(0,Se.Z)(te().mark(function u(l){return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(v.t0=null===l.newVersion,!v.t0){v.next=4;break}return v.next=4,e();case 4:case"end":return v.stop()}},u)}));return function(u){return i.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var i=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,Se.Z)(te().mark(function u(){return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(f.t0=i.started,!f.t0){f.next=4;break}return f.next=4,i.ws();case 4:case"end":return f.stop()}},u)}))))}},{key:"ws",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(i){return kv(i).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next(function(){if(e.isPrimary)return e.Ts(i).next(function(u){u||(e.isPrimary=!1,e.Jn.enqueueRetryable(function(){return e.us(!1)}))})}).next(function(){return e.Es(i)}).next(function(u){return e.isPrimary&&!u?e.As(i).next(function(){return!1}):!!u&&e.Rs(i).next(function(){return!0})})}).catch(function(i){if(Gc(i))return D("IndexedDbPersistence","Failed to extend owner lease: ",i),e.isPrimary;if(!e.allowTabSynchronization)throw i;return D("IndexedDbPersistence","Releasing owner lease after error during lease refresh",i),!1}).then(function(i){e.isPrimary!==i&&e.Jn.enqueueRetryable(function(){return e.us(i)}),e.isPrimary=i})}},{key:"Ts",value:function(e){var i=this;return rd(e).get("owner").next(function(u){return Ut.resolve(i.bs(u))})}},{key:"Ps",value:function(e){return kv(e).delete(this.clientId)}},{key:"Vs",value:(r=(0,Se.Z)(te().mark(function i(){var l,f,v,u=this;return te().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this.isPrimary||this.vs(this.os,18e5)){K.next=6;break}return this.os=Date.now(),K.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(re){var de=ms(re,"clientMetadata");return de.qt().next(function(Be){var we=u.Ss(Be,18e5),st=Be.filter(function(pt){return-1===we.indexOf(pt)});return Ut.forEach(st,function(pt){return de.delete(pt.clientId)}).next(function(){return st})})}).catch(function(){return[]});case 4:if(l=K.sent,this._s){f=(0,Ce.Z)(l);try{for(f.s();!(v=f.n()).done;)this._s.removeItem(this.Ds(v.value.clientId))}catch(re){f.e(re)}finally{f.f()}}case 6:case"end":return K.stop()}},i,this)})),function e(){return r.apply(this,arguments)})},{key:"ps",value:function(){var e=this;this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.ws().then(function(){return e.Vs()}).then(function(){return e.ps()})})}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Es",value:function(e){var i=this;return this.Xn?Ut.resolve(!0):rd(e).get("owner").next(function(u){if(null!==u&&i.vs(u.leaseTimestampMs,5e3)&&!i.Cs(u.ownerId)){if(i.bs(u)&&i.networkEnabled)return!0;if(!i.bs(u)){if(!u.allowTabSynchronization)throw new Et(Ke.FAILED_PRECONDITION,vg);return!1}}return!(!i.networkEnabled||!i.inForeground)||kv(e).qt().next(function(l){return void 0===i.Ss(l,5e3).find(function(f){return!(i.clientId===f.clientId||!(!i.networkEnabled&&f.networkEnabled||!i.inForeground&&f.inForeground&&i.networkEnabled===f.networkEnabled))})})}).next(function(u){return i.isPrimary!==u&&D("IndexedDbPersistence","Client ".concat(u?"is":"is not"," eligible for a primary lease.")),u})}},{key:"shutdown",value:function(){var r=(0,Se.Z)(te().mark(function i(){var u=this;return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.es=!1,this.xs(),this.rs&&(this.rs.cancel(),this.rs=null),this.Ns(),this.ks(),f.next=7,this.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],function(v){var b=new cv(v,Li.A);return u.As(b).next(function(){return u.Ps(b)})});case 7:this.hs.close(),this.Ms();case 9:case"end":return f.stop()}},i,this)}));return function e(){return r.apply(this,arguments)}}()},{key:"Ss",value:function(e,i){var u=this;return e.filter(function(l){return u.vs(l.updateTimeMs,i)&&!u.Cs(l.clientId)})}},{key:"Os",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(i){return kv(i).qt().next(function(u){return e.Ss(u,18e5).map(function(l){return l.clientId})})})}},{key:"started",get:function(){return this.es}},{key:"getMutationQueue",value:function(e,i){return vv.Yt(e,this.M,i,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getIndexManager",value:function(e){return new cg(e)}},{key:"getDocumentOverlayCache",value:function(e){return Xm.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,i,u){var l=this;D("IndexedDbPersistence","Starting transaction:",e);var b,Z,f="readonly"===i?"readonly":"readwrite",v=14===(b=this.Zn)?uv:13===b?sv:12===b?av:11===b?iv:void pe();return this.hs.runTransaction(e,f,v,function(K){return Z=new cv(K,l.ts?l.ts.next():Li.A),"readwrite-primary"===i?l.Ts(Z).next(function(re){return!!re||l.Es(Z)}).next(function(re){if(!re)throw N("Failed to obtain primary lease for action '".concat(e,"'.")),l.isPrimary=!1,l.Jn.enqueueRetryable(function(){return l.us(!1)}),new Et(Ke.FAILED_PRECONDITION,rg);return u(Z)}).next(function(re){return l.Rs(Z).next(function(){return re})}):l.Fs(Z).next(function(){return u(Z)})}).then(function(K){return Z.raiseOnCommittedEvent(),K})}},{key:"Fs",value:function(e){var i=this;return rd(e).get("owner").next(function(u){if(null!==u&&i.vs(u.leaseTimestampMs,5e3)&&!i.Cs(u.ownerId)&&!i.bs(u)&&!(i.Xn||i.allowTabSynchronization&&u.allowTabSynchronization))throw new Et(Ke.FAILED_PRECONDITION,vg)})}},{key:"Rs",value:function(e){var i={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rd(e).put("owner",i)}},{key:"As",value:function(e){var i=this,u=rd(e);return u.get("owner").next(function(l){return i.bs(l)?(D("IndexedDbPersistence","Releasing primary lease."),u.delete("owner")):Ut.resolve()})}},{key:"vs",value:function(e,i){var u=Date.now();return!(e<u-i||e>u&&(N("Detected an update time that is in the future: ".concat(e," > ").concat(u)),1))}},{key:"gs",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=function(){e.Jn.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.ws()})},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ns",value:function(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}},{key:"ys",value:function(){var i,e=this;"function"==typeof(null===(i=this.window)||void 0===i?void 0:i.addEventListener)&&(this.ns=function(){e.xs(),(0,on.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&e.Jn.enterRestrictedMode(!0),e.Jn.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.ns))}},{key:"ks",value:function(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}},{key:"Cs",value:function(e){var i;try{var u=null!==(null===(i=this._s)||void 0===i?void 0:i.getItem(this.Ds(e)));return D("IndexedDbPersistence","Client '".concat(e,"' ").concat(u?"is":"is not"," zombied in LocalStorage")),u}catch(l){return N("IndexedDbPersistence","Failed to get zombied client id.",l),!1}}},{key:"xs",value:function(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){N("Failed to set zombie client id.",e)}}},{key:"Ms",value:function(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}},{key:"Ds",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Wo.vt()}}]),t;var r}();function rd(t){return ms(t,"owner")}function kv(t){return ms(t,"clientMetadata")}function Pl(t,r){var e=t.projectId;return t.isDefaultDatabase||(e+="."+t.database),"firestore/"+r+"/"+e+"/"}var _v=function(){function t(r,e,i){(0,z.Z)(this,t),this.fs=r,this.$s=e,this.indexManager=i}return(0,H.Z)(t,[{key:"Bs",value:function(e,i){var u=this;return this.$s.getAllMutationBatchesAffectingDocumentKey(e,i).next(function(l){return u.Ls(e,i,l)})}},{key:"Ls",value:function(e,i,u){return this.fs.getEntry(e,i).next(function(l){var v,f=(0,Ce.Z)(u);try{for(f.s();!(v=f.n()).done;)v.value.applyToLocalView(l)}catch(Z){f.e(Z)}finally{f.f()}return l})}},{key:"Us",value:function(e,i){e.forEach(function(u,l){var v,f=(0,Ce.Z)(i);try{for(f.s();!(v=f.n()).done;)v.value.applyToLocalView(l)}catch(Z){f.e(Z)}finally{f.f()}})}},{key:"qs",value:function(e,i){var u=this;return this.fs.getEntries(e,i).next(function(l){return u.Gs(e,l).next(function(){return l})})}},{key:"Gs",value:function(e,i){var u=this;return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,i).next(function(l){return u.Us(i,l)})}},{key:"Ks",value:function(e,i,u){return hn.isDocumentKey((l=i).path)&&null===l.collectionGroup&&0===l.filters.length?this.Qs(e,i.path):Bc(i)?this.js(e,i,u):this.Ws(e,i,u);var l}},{key:"Qs",value:function(e,i){return this.Bs(e,new hn(i)).next(function(u){var l=dc();return u.isFoundDocument()&&(l=l.insert(u.key,u)),l})}},{key:"js",value:function(e,i,u){var l=this,f=i.collectionGroup,v=dc();return this.indexManager.getCollectionParents(e,f).next(function(b){return Ut.forEach(b,function(Z){var re,de,K=(re=i,de=Z.child(f),new yu(de,null,re.explicitOrderBy.slice(),re.filters.slice(),re.limit,re.limitType,re.startAt,re.endAt));return l.Ws(e,K,u).next(function(re){re.forEach(function(de,Be){v=v.insert(de,Be)})})}).next(function(){return v})})}},{key:"Ws",value:function(e,i,u){var f,l=this;return this.fs.getAllFromCollection(e,i.path,u).next(function(v){return f=v,l.$s.getAllMutationBatchesAffectingQuery(e,i)}).next(function(v){var Z,b=(0,Ce.Z)(v);try{for(b.s();!(Z=b.n()).done;){var de,K=Z.value,re=(0,Ce.Z)(K.mutations);try{for(re.s();!(de=re.n()).done;){var Be=de.value,we=Be.key,st=f.get(we);null==st&&(st=G.newInvalidDocument(we),f=f.insert(we,st)),vi(Be,st,K.localWriteTime),st.isFoundDocument()||(f=f.remove(we))}}catch(pt){re.e(pt)}finally{re.f()}}}catch(pt){b.e(pt)}finally{b.f()}}).next(function(){return f.forEach(function(v,b){ql(i,b)||(f=f.remove(v))}),f})}}]),t}(),hy=function(){function t(r,e,i,u){(0,z.Z)(this,t),this.targetId=r,this.fromCache=e,this.zs=i,this.Hs=u}return(0,H.Z)(t,null,[{key:"Js",value:function(e,i){var v,u=Xn(),l=Xn(),f=(0,Ce.Z)(i.docChanges);try{for(f.s();!(v=f.n()).done;){var b=v.value;switch(b.type){case 0:u=u.add(b.doc.key);break;case 1:l=l.add(b.doc.key)}}}catch(Z){f.e(Z)}finally{f.f()}return new t(e,i.fromCache,u,l)}}]),t}(),wv=function(){function t(){(0,z.Z)(this,t)}return(0,H.Z)(t,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Ks",value:function(e,i,u,l){var v,f=this;return 0===(v=i).filters.length&&null===v.limit&&null==v.startAt&&null==v.endAt&&(0===v.explicitOrderBy.length||1===v.explicitOrderBy.length&&v.explicitOrderBy[0].field.isKeyField())||u.isEqual(tr.min())?this.Zs(e,i):this.Xs.qs(e,l).next(function(v){var b=f.ti(i,v);return(Vo(i)||Tl(i))&&f.ei(i.limitType,b,l,u)?f.Zs(e,i):(U()<=kn.in.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),cc(i)),f.Xs.Ks(e,i,Re(u,-1)).next(function(Z){return b.forEach(function(K){Z=Z.insert(K.key,K)}),Z}))})}},{key:"ti",value:function(e,i){var u=new Tr(gf(e));return i.forEach(function(l,f){ql(e,f)&&(u=u.add(f))}),u}},{key:"ei",value:function(e,i,u,l){if(u.size!==i.size)return!0;var f="F"===e?i.last():i.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(l)>0)}},{key:"Zs",value:function(e,i){return U()<=kn.in.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",cc(i)),this.Xs.Ks(e,i,bt.min())}}]),t}(),Ev=function(){function t(r,e,i,u){(0,z.Z)(this,t),this.persistence=r,this.ni=e,this.M=u,this.si=new Pa(gr),this.ii=new ku(function(l){return bn(l)},Jt),this.ri=new Map,this.oi=r.getRemoteDocumentCache(),this.ls=r.getTargetCache(),this.ds=r.getBundleCache(),this.ui(i)}return(0,H.Z)(t,[{key:"ui",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new _v(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}},{key:"collectGarbage",value:function(e){var i=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(u){return e.collect(u,i.si)})}}]),t}();function bv(t,r,e,i){return new Ev(t,r,e,i)}function id(t,r){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,Se.Z)(te().mark(function t(r,e){var i;return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=vt(r),l.next=3,i.persistence.runTransaction("Handle user change","readonly",function(f){var v;return i.$s.getAllMutationBatches(f).next(function(b){return v=b,i.ui(e),i.$s.getAllMutationBatches(f)}).next(function(b){var Be,Z=[],K=[],re=Xn(),de=(0,Ce.Z)(v);try{for(de.s();!(Be=de.n()).done;){var we=Be.value;Z.push(we.batchId);var pt,st=(0,Ce.Z)(we.mutations);try{for(st.s();!(pt=st.n()).done;)re=re.add(pt.value.key)}catch(Tn){st.e(Tn)}finally{st.f()}}}catch(Tn){de.e(Tn)}finally{de.f()}var Yt,sn=(0,Ce.Z)(b);try{for(sn.s();!(Yt=sn.n()).done;){var dn=Yt.value;K.push(dn.batchId);var lr,jn=(0,Ce.Z)(dn.mutations);try{for(jn.s();!(lr=jn.n()).done;)re=re.add(lr.value.key)}catch(Tn){jn.e(Tn)}finally{jn.f()}}}catch(Tn){sn.e(Tn)}finally{sn.f()}return i.ai.qs(f,re).next(function(Tn){return{ci:Tn,removedBatchIds:Z,addedBatchIds:K}})})});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},t)})),Tv.apply(this,arguments)}function kc(t,r){var e=vt(t);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(i){var f,v,b,Z,K,re,de,u=r.batch.keys(),l=e.oi.newChangeBuffer({trackRemovals:!0});return(f=e,v=i,b=r,Z=l,K=b.batch,re=K.keys(),de=Ut.resolve(),re.forEach(function(Be){de=de.next(function(){return Z.getEntry(v,Be)}).next(function(we){var st=b.docVersions.get(Be);Ue(null!==st),we.version.compareTo(st)<0&&(K.applyToRemoteDocument(we,b),we.isValidDocument()&&(we.setReadTime(b.commitVersion),Z.addEntry(we)))})}),de.next(function(){return f.$s.removeMutationBatch(v,K)})).next(function(){return l.apply(i)}).next(function(){return e.$s.performConsistencyCheck(i)}).next(function(){return e.ai.qs(i,u)})})}function Dv(t){var r=vt(t);return r.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return r.ls.getLastRemoteSnapshotVersion(e)})}function dy(t,r){var e=vt(t),i=r.snapshotVersion,u=e.si;return e.persistence.runTransaction("Apply remote event","readwrite-primary",function(l){var f=e.oi.newChangeBuffer({trackRemovals:!0});u=e.si;var v=[];r.targetChanges.forEach(function(K,re){var we,st,pt,de=u.get(re);if(de){v.push(e.ls.removeMatchingKeys(l,K.removedDocuments,re).next(function(){return e.ls.addMatchingKeys(l,K.addedDocuments,re)}));var Be=de.withSequenceNumber(l.currentSequenceNumber);r.targetMismatches.has(re)?Be=Be.withResumeToken(ta.EMPTY_BYTE_STRING,tr.min()).withLastLimboFreeSnapshotVersion(tr.min()):K.resumeToken.approximateByteSize()>0&&(Be=Be.withResumeToken(K.resumeToken,i)),u=u.insert(re,Be),st=Be,pt=K,(0===(we=de).resumeToken.approximateByteSize()||st.snapshotVersion.toMicroseconds()-we.snapshotVersion.toMicroseconds()>=3e8||pt.addedDocuments.size+pt.modifiedDocuments.size+pt.removedDocuments.size>0)&&v.push(e.ls.updateTargetData(l,Be))}});var b=Ss();if(r.documentUpdates.forEach(function(K){r.resolvedLimboDocuments.has(K)&&v.push(e.persistence.referenceDelegate.updateLimboDocument(l,K))}),v.push(ad(l,f,r.documentUpdates).next(function(K){b=K})),!i.isEqual(tr.min())){var Z=e.ls.getLastRemoteSnapshotVersion(l).next(function(K){return e.ls.setTargetsMetadata(l,l.currentSequenceNumber,i)});v.push(Z)}return Ut.waitFor(v).next(function(){return f.apply(l)}).next(function(){return e.ai.Gs(l,b)}).next(function(){return b})}).then(function(l){return e.si=u,l})}function ad(t,r,e){var i=Xn();return e.forEach(function(u){return i=i.add(u)}),r.getEntries(t,i).next(function(u){var l=Ss();return e.forEach(function(f,v){var b=u.get(f);v.isNoDocument()&&v.version.isEqual(tr.min())?(r.removeEntry(f,v.readTime),l=l.insert(f,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||0===v.version.compareTo(b.version)&&b.hasPendingWrites?(r.addEntry(v),l=l.insert(f,v)):D("LocalStore","Ignoring outdated watch update for ",f,". Current version:",b.version," Watch version:",v.version)}),l})}function vy(t,r){var e=vt(t);return e.persistence.runTransaction("Get next mutation batch","readonly",function(i){return void 0===r&&(r=-1),e.$s.getNextMutationBatchAfterBatchId(i,r)})}function Jc(t,r){var e=vt(t);return e.persistence.runTransaction("Allocate target","readwrite",function(i){var u;return e.ls.getTargetData(i,r).next(function(l){return l?Ut.resolve(u=l):e.ls.allocateTargetId(i).next(function(f){return u=new Qf(r,f,0,i.currentSequenceNumber),e.ls.addTargetData(i,u).next(function(){return u})})})}).then(function(i){var u=e.si.get(i.targetId);return(null===u||i.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(e.si=e.si.insert(i.targetId,i),e.ii.set(r,i.targetId)),i})}function Cf(t,r,e){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,Se.Z)(te().mark(function t(r,e,i){var u,l,f;return te().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(u=vt(r),l=u.si.get(e),f=i?"readwrite":"readwrite-primary",b.prev=1,b.t0=i,b.t0){b.next=6;break}return b.next=6,u.persistence.runTransaction("Release target",f,function(Z){return u.persistence.referenceDelegate.removeTarget(Z,l)});case 6:b.next=13;break;case 8:if(b.prev=8,b.t1=b.catch(1),Gc(b.t1)){b.next=12;break}throw b.t1;case 12:D("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(b.t1));case 13:u.si=u.si.remove(e),u.ii.delete(l.target);case 14:case"end":return b.stop()}},t,null,[[1,8]])})),Cv.apply(this,arguments)}function _c(t,r,e){var i=vt(t),u=tr.min(),l=Xn();return i.persistence.runTransaction("Execute query","readonly",function(f){return(v=i,b=f,Z=Is(r),K=vt(v),re=K.ii.get(Z),void 0!==re?Ut.resolve(K.si.get(re)):K.ls.getTargetData(b,Z)).next(function(v){if(v)return u=v.lastLimboFreeSnapshotVersion,i.ls.getMatchingKeysForTargetId(f,v.targetId).next(function(b){l=b})}).next(function(){return i.ni.Ks(f,r,e?u:tr.min(),e?l:Xn())}).next(function(v){return ef(i,Kf(r),v),{documents:v,hi:l}});var v,b,Z,K,re})}function Xc(t,r){var e=vt(t),i=vt(e.ls),u=e.si.get(r);return u?Promise.resolve(u.target):e.persistence.runTransaction("Get target data","readonly",function(l){return i.Et(l,r).next(function(f){return f?f.target:null})})}function sd(t,r){var e=vt(t),i=e.ri.get(r)||tr.min();return e.persistence.runTransaction("Get new document changes","readonly",function(u){return e.oi.getAllFromCollectionGroup(u,r,Re(i,-1),Number.MAX_SAFE_INTEGER)}).then(function(u){return ef(e,r,u),u})}function ef(t,r,e){var i=tr.min();e.forEach(function(u,l){l.readTime.compareTo(i)>0&&(i=l.readTime)}),t.ri.set(r,i)}function uh(t,r,e,i){return wc.apply(this,arguments)}function wc(){return wc=(0,Se.Z)(te().mark(function t(r,e,i,u){var l,f,v,b,Z,K,re,de,Be,we;return te().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:l=vt(r),f=Xn(),v=Ss(),b=(0,Ce.Z)(i);try{for(b.s();!(Z=b.n()).done;)re=e.li((K=Z.value).metadata.name),K.document&&(f=f.add(re)),(de=e.fi(K)).setReadTime(e.di(K.metadata.readTime)),v=v.insert(re,de)}catch(Nt){b.e(Nt)}finally{b.f()}return Be=l.oi.newChangeBuffer({trackRemovals:!0}),pt.next=7,Jc(l,Is(bl(Fr.fromString("__bundle__/docs/".concat(Nt=u)))));case 7:return we=pt.sent,pt.abrupt("return",l.persistence.runTransaction("Apply bundle documents","readwrite",function(Nt){return ad(Nt,Be,v).next(function(sn){return Be.apply(Nt),sn}).next(function(sn){return l.ls.removeMatchingKeysForTargetId(Nt,we.targetId).next(function(){return l.ls.addMatchingKeys(Nt,f,we.targetId)}).next(function(){return l.ai.Gs(Nt,sn)}).next(function(){return sn})})}));case 9:case"end":return pt.stop()}var Nt},t)})),wc.apply(this,arguments)}function py(t,r){return ud.apply(this,arguments)}function ud(){return ud=(0,Se.Z)(te().mark(function t(r,e){var i,u,l,f=arguments;return te().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return i=f.length>2&&void 0!==f[2]?f[2]:Xn(),b.next=3,Jc(r,Is(Xf(e.bundledQuery)));case 3:return u=b.sent,l=vt(r),b.abrupt("return",l.persistence.runTransaction("Save named query","readwrite",function(Z){var K=ss(e.readTime);if(u.snapshotVersion.compareTo(K)>=0)return l.ds.saveNamedQuery(Z,e);var re=u.withResumeToken(ta.EMPTY_BYTE_STRING,K);return l.si=l.si.insert(re.targetId,re),l.ls.updateTargetData(Z,re).next(function(){return l.ls.removeMatchingKeysForTargetId(Z,u.targetId)}).next(function(){return l.ls.addMatchingKeys(Z,i,u.targetId)}).next(function(){return l.ds.saveNamedQuery(Z,e)})}));case 6:case"end":return b.stop()}},t)})),ud.apply(this,arguments)}var pg=function(){function t(r){(0,z.Z)(this,t),this.M=r,this._i=new Map,this.wi=new Map}return(0,H.Z)(t,[{key:"getBundleMetadata",value:function(e,i){return Ut.resolve(this._i.get(i))}},{key:"saveBundleMetadata",value:function(e,i){var u;return this._i.set(i.id,{id:(u=i).id,version:u.version,createTime:ss(u.createTime)}),Ut.resolve()}},{key:"getNamedQuery",value:function(e,i){return Ut.resolve(this.wi.get(i))}},{key:"saveNamedQuery",value:function(e,i){return this.wi.set(i.name,{name:(u=i).name,query:Xf(u.bundledQuery),readTime:ss(u.readTime)}),Ut.resolve();var u}}]),t}(),Iv=function(){function t(){(0,z.Z)(this,t),this.overlays=new Pa(hn.comparator),this.mi=new Map}return(0,H.Z)(t,[{key:"getOverlay",value:function(e,i){return Ut.resolve(this.overlays.get(i))}},{key:"saveOverlays",value:function(e,i,u){var l=this;return u.forEach(function(f,v){l.Xt(e,i,v)}),Ut.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,i,u){var l=this,f=this.mi.get(u);return void 0!==f&&(f.forEach(function(v){return l.overlays=l.overlays.remove(v)}),this.mi.delete(u)),Ut.resolve()}},{key:"getOverlaysForCollection",value:function(e,i,u){for(var l=mn(),f=i.length+1,v=new hn(i.child("")),b=this.overlays.getIteratorFrom(v);b.hasNext();){var Z=b.getNext().value,K=Z.getKey();if(!i.isPrefixOf(K.path))break;K.path.length===f&&Z.largestBatchId>u&&l.set(Z.getKey(),Z)}return Ut.resolve(l)}},{key:"getOverlaysForCollectionGroup",value:function(e,i,u,l){for(var f=new Pa(function(de,Be){return de-Be}),v=this.overlays.getIterator();v.hasNext();){var b=v.getNext().value;if(b.getKey().getCollectionGroup()===i&&b.largestBatchId>u){var Z=f.get(b.largestBatchId);null===Z&&(Z=mn(),f=f.insert(b.largestBatchId,Z)),Z.set(b.getKey(),b)}}for(var K=mn(),re=f.getIterator();re.hasNext()&&(re.getNext().value.forEach(function(de,Be){return K.set(de,Be)}),!(K.size()>=l)););return Ut.resolve(K)}},{key:"Xt",value:function(e,i,u){if(null!==u){var l=this.overlays.get(u.key);if(null!==l){var f=this.mi.get(l.largestBatchId).delete(u.key);this.mi.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(u.key,new bf(i,u));var v=this.mi.get(i);void 0===v&&(v=Xn(),this.mi.set(i,v)),this.mi.set(i,v.add(u.key))}}}]),t}(),oh=function(){function t(){(0,z.Z)(this,t),this.gi=new Tr(Rs.yi),this.pi=new Tr(Rs.Ii)}return(0,H.Z)(t,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,i){var u=new Rs(e,i);this.gi=this.gi.add(u),this.pi=this.pi.add(u)}},{key:"Ti",value:function(e,i){var u=this;e.forEach(function(l){return u.addReference(l,i)})}},{key:"removeReference",value:function(e,i){this.Ei(new Rs(e,i))}},{key:"Ai",value:function(e,i){var u=this;e.forEach(function(l){return u.removeReference(l,i)})}},{key:"Ri",value:function(e){var i=this,u=new hn(new Fr([])),l=new Rs(u,e),f=new Rs(u,e+1),v=[];return this.pi.forEachInRange([l,f],function(b){i.Ei(b),v.push(b.key)}),v}},{key:"bi",value:function(){var e=this;this.gi.forEach(function(i){return e.Ei(i)})}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var i=new hn(new Fr([])),u=new Rs(i,e),l=new Rs(i,e+1),f=Xn();return this.pi.forEachInRange([u,l],function(v){f=f.add(v.key)}),f}},{key:"containsKey",value:function(e){var i=new Rs(e,0),u=this.gi.firstAfterOrEqual(i);return null!==u&&e.isEqual(u.key)}}]),t}(),Rs=function(){function t(r,e){(0,z.Z)(this,t),this.key=r,this.Vi=e}return(0,H.Z)(t,null,[{key:"yi",value:function(e,i){return hn.comparator(e.key,i.key)||gr(e.Vi,i.Vi)}},{key:"Ii",value:function(e,i){return gr(e.Vi,i.Vi)||hn.comparator(e.key,i.key)}}]),t}(),od=function(){function t(r,e){(0,z.Z)(this,t),this.indexManager=r,this.referenceDelegate=e,this.$s=[],this.vi=1,this.Si=new Tr(Rs.yi)}return(0,H.Z)(t,[{key:"checkEmpty",value:function(e){return Ut.resolve(0===this.$s.length)}},{key:"addMutationBatch",value:function(e,i,u,l){var f=this.vi;this.vi++;var v=new Gh(f,i,u,l);this.$s.push(v);var Z,b=(0,Ce.Z)(l);try{for(b.s();!(Z=b.n()).done;){var K=Z.value;this.Si=this.Si.add(new Rs(K.key,f)),this.indexManager.addToCollectionParentIndex(e,K.key.path.popLast())}}catch(re){b.e(re)}finally{b.f()}return Ut.resolve(v)}},{key:"lookupMutationBatch",value:function(e,i){return Ut.resolve(this.Di(i))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,i){var l=this.Ci(i+1),f=l<0?0:l;return Ut.resolve(this.$s.length>f?this.$s[f]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ut.resolve(0===this.$s.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return Ut.resolve(this.$s.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,i){var u=this,l=new Rs(i,0),f=new Rs(i,Number.POSITIVE_INFINITY),v=[];return this.Si.forEachInRange([l,f],function(b){var Z=u.Di(b.Vi);v.push(Z)}),Ut.resolve(v)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,i){var u=this,l=new Tr(gr);return i.forEach(function(f){var v=new Rs(f,0),b=new Rs(f,Number.POSITIVE_INFINITY);u.Si.forEachInRange([v,b],function(Z){l=l.add(Z.Vi)})}),Ut.resolve(this.xi(l))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,i){var u=i.path,l=u.length+1,f=u;hn.isDocumentKey(f)||(f=f.child(""));var v=new Rs(new hn(f),0),b=new Tr(gr);return this.Si.forEachWhile(function(Z){var K=Z.key.path;return!!u.isPrefixOf(K)&&(K.length===l&&(b=b.add(Z.Vi)),!0)},v),Ut.resolve(this.xi(b))}},{key:"xi",value:function(e){var i=this,u=[];return e.forEach(function(l){var f=i.Di(l);null!==f&&u.push(f)}),u}},{key:"removeMutationBatch",value:function(e,i){var u=this;Ue(0===this.Ni(i.batchId,"removed")),this.$s.shift();var l=this.Si;return Ut.forEach(i.mutations,function(f){var v=new Rs(f.key,i.batchId);return l=l.delete(v),u.referenceDelegate.markPotentiallyOrphaned(e,f.key)}).next(function(){u.Si=l})}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,i){var u=new Rs(i,0),l=this.Si.firstAfterOrEqual(u);return Ut.resolve(i.isEqual(l&&l.key))}},{key:"performConsistencyCheck",value:function(e){return Ut.resolve()}},{key:"Ni",value:function(e,i){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.$s.length?0:e-this.$s[0].batchId}},{key:"Di",value:function(e){var i=this.Ci(e);return i<0||i>=this.$s.length?null:this.$s[i]}}]),t}(),gy=function(){function t(r){(0,z.Z)(this,t),this.ki=r,this.docs=new Pa(hn.comparator),this.size=0}return(0,H.Z)(t,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,i){var u=i.key,l=this.docs.get(u),f=l?l.size:0,v=this.ki(i);return this.docs=this.docs.insert(u,{document:i.mutableCopy(),size:v}),this.size+=v-f,this.indexManager.addToCollectionParentIndex(e,u.path.popLast())}},{key:"removeEntry",value:function(e){var i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}},{key:"getEntry",value:function(e,i){var u=this.docs.get(i);return Ut.resolve(u?u.document.mutableCopy():G.newInvalidDocument(i))}},{key:"getEntries",value:function(e,i){var u=this,l=Ss();return i.forEach(function(f){var v=u.docs.get(f);l=l.insert(f,v?v.document.mutableCopy():G.newInvalidDocument(f))}),Ut.resolve(l)}},{key:"getAllFromCollection",value:function(e,i,u){for(var l=Ss(),f=new hn(i.child("")),v=this.docs.getIteratorFrom(f);v.hasNext();){var b=v.getNext(),Z=b.key,K=b.value.document;if(!i.isPrefixOf(Z.path))break;Z.path.length>i.length+1||Rt(Oe(K),u)<=0||(l=l.insert(K.key,K.mutableCopy()))}return Ut.resolve(l)}},{key:"getAllFromCollectionGroup",value:function(e,i,u,l){pe()}},{key:"Mi",value:function(e,i){return Ut.forEach(this.docs,function(u){return i(u)})}},{key:"newChangeBuffer",value:function(e){return new gg(this)}},{key:"getSize",value:function(e){return Ut.resolve(this.size)}}]),t}(),gg=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i){var u;return(0,z.Z)(this,e),(u=r.call(this)).qn=i,u}return(0,H.Z)(e,[{key:"applyChanges",value:function(u){var l=this,f=[];return this.changes.forEach(function(v,b){b.isValidDocument()?f.push(l.qn.addEntry(u,b)):l.qn.removeEntry(v)}),Ut.waitFor(f)}},{key:"getFromCache",value:function(u,l){return this.qn.getEntry(u,l)}},{key:"getAllFromCache",value:function(u,l){return this.qn.getEntries(u,l)}}]),e}(yv),sk=function(){function t(r){(0,z.Z)(this,t),this.persistence=r,this.Oi=new ku(function(e){return bn(e)},Jt),this.lastRemoteSnapshotVersion=tr.min(),this.highestTargetId=0,this.Fi=0,this.$i=new oh,this.targetCount=0,this.Bi=qc.mn()}return(0,H.Z)(t,[{key:"forEachTarget",value:function(e,i){return this.Oi.forEach(function(u,l){return i(l)}),Ut.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ut.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ut.resolve(this.Fi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),Ut.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,i,u){return u&&(this.lastRemoteSnapshotVersion=u),i>this.Fi&&(this.Fi=i),Ut.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var i=e.targetId;i>this.highestTargetId&&(this.Bi=new qc(i),this.highestTargetId=i),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,i){return this.In(i),this.targetCount+=1,Ut.resolve()}},{key:"updateTargetData",value:function(e,i){return this.In(i),Ut.resolve()}},{key:"removeTargetData",value:function(e,i){return this.Oi.delete(i.target),this.$i.Ri(i.targetId),this.targetCount-=1,Ut.resolve()}},{key:"removeTargets",value:function(e,i,u){var l=this,f=0,v=[];return this.Oi.forEach(function(b,Z){Z.sequenceNumber<=i&&null===u.get(Z.targetId)&&(l.Oi.delete(b),v.push(l.removeMatchingKeysForTargetId(e,Z.targetId)),f++)}),Ut.waitFor(v).next(function(){return f})}},{key:"getTargetCount",value:function(e){return Ut.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,i){var u=this.Oi.get(i)||null;return Ut.resolve(u)}},{key:"addMatchingKeys",value:function(e,i,u){return this.$i.Ti(i,u),Ut.resolve()}},{key:"removeMatchingKeys",value:function(e,i,u){this.$i.Ai(i,u);var l=this.persistence.referenceDelegate,f=[];return l&&i.forEach(function(v){f.push(l.markPotentiallyOrphaned(e,v))}),Ut.waitFor(f)}},{key:"removeMatchingKeysForTargetId",value:function(e,i){return this.$i.Ri(i),Ut.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,i){var u=this.$i.Pi(i);return Ut.resolve(u)}},{key:"containsKey",value:function(e,i){return Ut.resolve(this.$i.containsKey(i))}}]),t}(),mg=function(){function t(r,e){var i=this;(0,z.Z)(this,t),this.Li={},this.overlays={},this.ts=new Li(0),this.es=!1,this.es=!0,this.referenceDelegate=r(this),this.ls=new sk(this),this.indexManager=new Ar,this.fs=new gy(function(u){return i.referenceDelegate.Ui(u)}),this.M=new Wh(e),this.ds=new pg(this.M)}return(0,H.Z)(t,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.es=!1,Promise.resolve()}},{key:"started",get:function(){return this.es}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var i=this.overlays[e.toKey()];return i||(i=new Iv,this.overlays[e.toKey()]=i),i}},{key:"getMutationQueue",value:function(e,i){var u=this.Li[e.toKey()];return u||(u=new od(i,this.referenceDelegate),this.Li[e.toKey()]=u),u}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,i,u){var l=this;D("MemoryPersistence","Starting transaction:",e);var f=new yg(this.ts.next());return this.referenceDelegate.qi(),u(f).next(function(v){return l.referenceDelegate.Gi(f).next(function(){return v})}).toPromise().then(function(v){return f.raiseOnCommittedEvent(),v})}},{key:"Ki",value:function(e,i){return Ut.or(Object.values(this.Li).map(function(u){return function(){return u.containsKey(e,i)}}))}}]),t}(),yg=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i){var u;return(0,z.Z)(this,e),(u=r.call(this)).currentSequenceNumber=i,u}return(0,H.Z)(e)}(ig),my=function(){function t(r){(0,z.Z)(this,t),this.persistence=r,this.Qi=new oh,this.ji=null}return(0,H.Z)(t,[{key:"zi",get:function(){if(this.ji)return this.ji;throw pe()}},{key:"addReference",value:function(e,i,u){return this.Qi.addReference(u,i),this.zi.delete(u.toString()),Ut.resolve()}},{key:"removeReference",value:function(e,i,u){return this.Qi.removeReference(u,i),this.zi.add(u.toString()),Ut.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,i){return this.zi.add(i.toString()),Ut.resolve()}},{key:"removeTarget",value:function(e,i){var u=this;this.Qi.Ri(i.targetId).forEach(function(f){return u.zi.add(f.toString())});var l=this.persistence.getTargetCache();return l.getMatchingKeysForTargetId(e,i.targetId).next(function(f){f.forEach(function(v){return u.zi.add(v.toString())})}).next(function(){return l.removeTargetData(e,i)})}},{key:"qi",value:function(){this.ji=new Set}},{key:"Gi",value:function(e){var i=this,u=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ut.forEach(this.zi,function(l){var f=hn.fromPath(l);return i.Hi(e,f).next(function(v){v||u.removeEntry(f,tr.min())})}).next(function(){return i.ji=null,u.apply(e)})}},{key:"updateLimboDocument",value:function(e,i){var u=this;return this.Hi(e,i).next(function(l){l?u.zi.delete(i.toString()):u.zi.add(i.toString())})}},{key:"Ui",value:function(e){return 0}},{key:"Hi",value:function(e,i){var u=this;return Ut.or([function(){return Ut.resolve(u.Qi.containsKey(i))},function(){return u.persistence.getTargetCache().containsKey(e,i)},function(){return u.persistence.Ki(e,i)}])}}],[{key:"Wi",value:function(e){return new t(e)}}]),t}();function Sv(t,r){return"firestore_clients_".concat(t,"_").concat(r)}function kg(t,r,e){var i="firestore_mutations_".concat(t,"_").concat(e);return r.isAuthenticated()&&(i+="_".concat(r.uid)),i}function Av(t,r){return"firestore_targets_".concat(t,"_").concat(r)}var ao=function(){function t(r,e,i,u){(0,z.Z)(this,t),this.user=r,this.batchId=e,this.state=i,this.error=u}return(0,H.Z)(t,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(e,i,u){var f,l=JSON.parse(u),v="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return v&&l.error&&(v="string"==typeof l.error.message&&"string"==typeof l.error.code)&&(f=new Et(l.error.code,l.error.message)),v?new t(e,i,l.state,f):(N("SharedClientState","Failed to parse mutation state for ID '".concat(i,"': ").concat(u)),null)}}]),t}(),Rv=function(){function t(r,e,i){(0,z.Z)(this,t),this.targetId=r,this.state=e,this.error=i}return(0,H.Z)(t,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(e,i){var l,u=JSON.parse(i),f="object"==typeof u&&-1!==["not-current","current","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return f&&u.error&&(f="string"==typeof u.error.message&&"string"==typeof u.error.code)&&(l=new Et(u.error.code,u.error.message)),f?new t(e,u.state,l):(N("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(i)),null)}}]),t}(),_g=function(){function t(r,e){(0,z.Z)(this,t),this.clientId=r,this.activeTargetIds=e}return(0,H.Z)(t,null,[{key:"Ji",value:function(e,i){for(var u=JSON.parse(i),l="object"==typeof u&&u.activeTargetIds instanceof Array,f=As(),v=0;l&&v<u.activeTargetIds.length;++v)l=Hl(u.activeTargetIds[v]),f=f.add(u.activeTargetIds[v]);return l?new t(e,f):(N("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(i)),null)}}]),t}(),uk=function(){function t(r,e){(0,z.Z)(this,t),this.clientId=r,this.onlineState=e}return(0,H.Z)(t,null,[{key:"Ji",value:function(e){var i=JSON.parse(e);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new t(i.clientId,i.onlineState):(N("SharedClientState","Failed to parse online state: ".concat(e)),null)}}]),t}(),wg=function(){function t(){(0,z.Z)(this,t),this.activeTargetIds=As()}return(0,H.Z)(t,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),t}(),ld=function(){function t(r,e,i,u,l){(0,z.Z)(this,t),this.window=r,this.Jn=e,this.persistenceKey=i,this.tr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Pa(gr),this.started=!1,this.ir=[];var f=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=Sv(this.persistenceKey,this.tr),this.ur="firestore_sequence_number_".concat(this.persistenceKey),this.sr=this.sr.insert(this.tr,new wg),this.ar=new RegExp("^firestore_clients_".concat(f,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(f,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(f,"_(\\d+)$")),this.lr="firestore_online_state_".concat(this.persistenceKey),this.dr=function(v){return"firestore_bundle_loaded_v2_".concat(v)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return(0,H.Z)(t,[{key:"start",value:(r=(0,Se.Z)(te().mark(function i(){var f,v,b,Z,K,re,de,Be,we,u=this;return te().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.next=2,this.syncEngine.Os();case 2:f=(0,Ce.Z)(Nt.sent),Nt.prev=4,f.s();case 6:if((v=f.n()).done){Nt.next=14;break}if((b=v.value)!==this.tr){Nt.next=10;break}return Nt.abrupt("continue",12);case 10:(Z=this.getItem(Sv(this.persistenceKey,b)))&&(K=_g.Ji(b,Z))&&(this.sr=this.sr.insert(K.clientId,K));case 12:Nt.next=6;break;case 14:Nt.next=19;break;case 16:Nt.prev=16,Nt.t0=Nt.catch(4),f.e(Nt.t0);case 19:return Nt.prev=19,f.f(),Nt.finish(19);case 22:this._r(),(re=this.storage.getItem(this.lr))&&(de=this.wr(re))&&this.mr(de),Be=(0,Ce.Z)(this.ir);try{for(Be.s();!(we=Be.n()).done;)this.nr(we.value)}catch(sn){Be.e(sn)}finally{Be.f()}this.ir=[],this.window.addEventListener("pagehide",function(){return u.shutdown()}),this.started=!0;case 28:case"end":return Nt.stop()}},i,this,[[4,16,19,22]])})),function e(){return r.apply(this,arguments)})},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var i=!1;return this.sr.forEach(function(u,l){l.activeTargetIds.has(e)&&(i=!0)}),i}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,i,u){this.yr(e,i,u),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var i="not-current";if(this.isActiveQueryTarget(e)){var u=this.storage.getItem(Av(this.persistenceKey,e));if(u){var l=Rv.Ji(e,u);l&&(i=l.state)}}return this.Ir.Xi(e),this._r(),i}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Av(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,i,u){this.Tr(e,i,u)}},{key:"handleUserChange",value:function(e,i,u){var l=this;i.forEach(function(f){l.pr(f)}),this.currentUser=e,u.forEach(function(f){l.addPendingMutation(f)})}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var i=this.storage.getItem(e);return D("SharedClientState","READ",e,i),i}},{key:"setItem",value:function(e,i){D("SharedClientState","SET",e,i),this.storage.setItem(e,i)}},{key:"removeItem",value:function(e){D("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var i=this,u=e;if(u.storageArea===this.storage){if(D("SharedClientState","EVENT",u.key,u.newValue),u.key===this.rr)return void N("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,Se.Z)(te().mark(function l(){var f,v,b,Z,K,re,de;return te().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(!i.started){we.next=43;break}if(null===u.key){we.next=41;break}if(!i.ar.test(u.key)){we.next=11;break}if(null!=u.newValue){we.next=6;break}return f=i.Rr(u.key),we.abrupt("return",i.br(f,null));case 6:if(!(v=i.Pr(u.key,u.newValue))){we.next=9;break}return we.abrupt("return",i.br(v.clientId,v));case 9:we.next=41;break;case 11:if(!i.cr.test(u.key)){we.next=18;break}if(null===u.newValue){we.next=16;break}if(!(b=i.Vr(u.key,u.newValue))){we.next=16;break}return we.abrupt("return",i.vr(b));case 16:we.next=41;break;case 18:if(!i.hr.test(u.key)){we.next=25;break}if(null===u.newValue){we.next=23;break}if(!(Z=i.Sr(u.key,u.newValue))){we.next=23;break}return we.abrupt("return",i.Dr(Z));case 23:we.next=41;break;case 25:if(u.key!==i.lr){we.next=32;break}if(null===u.newValue){we.next=30;break}if(!(K=i.wr(u.newValue))){we.next=30;break}return we.abrupt("return",i.mr(K));case 30:we.next=41;break;case 32:if(u.key!==i.ur){we.next=37;break}(re=function(st){var pt=Li.A;if(null!=st)try{var Nt=JSON.parse(st);Ue("number"==typeof Nt),pt=Nt}catch(sn){N("SharedClientState","Failed to read sequence number from WebStorage",sn)}return pt}(u.newValue))!==Li.A&&i.sequenceNumberHandler(re),we.next=41;break;case 37:if(u.key!==i.dr){we.next=41;break}return de=i.Cr(u.newValue),we.next=41,Promise.all(de.map(function(st){return i.syncEngine.Nr(st)}));case 41:we.next=44;break;case 43:i.ir.push(u);case 44:case"end":return we.stop()}},l)})))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,i,u){var l=new ao(this.currentUser,e,i,u),f=kg(this.persistenceKey,this.currentUser,e);this.setItem(f,l.Yi())}},{key:"pr",value:function(e){var i=kg(this.persistenceKey,this.currentUser,e);this.removeItem(i)}},{key:"Er",value:function(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}},{key:"Tr",value:function(e,i,u){var l=Av(this.persistenceKey,e),f=new Rv(e,i,u);this.setItem(l,f.Yi())}},{key:"Ar",value:function(e){var i=JSON.stringify(Array.from(e));this.setItem(this.dr,i)}},{key:"Rr",value:function(e){var i=this.ar.exec(e);return i?i[1]:null}},{key:"Pr",value:function(e,i){var u=this.Rr(e);return _g.Ji(u,i)}},{key:"Vr",value:function(e,i){var u=this.cr.exec(e),l=Number(u[1]);return ao.Ji(new Ei(void 0!==u[2]?u[2]:null),l,i)}},{key:"Sr",value:function(e,i){var u=this.hr.exec(e),l=Number(u[1]);return Rv.Ji(l,i)}},{key:"wr",value:function(e){return uk.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"vr",value:function(){var r=(0,Se.Z)(te().mark(function i(u){return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(u.user.uid!==this.currentUser.uid){f.next=2;break}return f.abrupt("return",this.syncEngine.kr(u.batchId,u.state,u.error));case 2:D("SharedClientState","Ignoring mutation for non-active user ".concat(u.user.uid));case 3:case"end":return f.stop()}},i,this)}));return function e(i){return r.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,i){var u=this,l=i?this.sr.insert(e,i):this.sr.remove(e),f=this.gr(this.sr),v=this.gr(l),b=[],Z=[];return v.forEach(function(K){f.has(K)||b.push(K)}),f.forEach(function(K){v.has(K)||Z.push(K)}),this.syncEngine.Or(b,Z).then(function(){u.sr=l})}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var i=As();return e.forEach(function(u,l){i=i.unionWith(l.activeTargetIds)}),i}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),t;var r}(),yy=function(){function t(){(0,z.Z)(this,t),this.Fr=new wg,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,H.Z)(t,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,i,u){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,i,u){this.$r[e]=i}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new wg,Promise.resolve()}},{key:"handleUserChange",value:function(e,i,u){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),t}(),ky=function(){function t(){(0,z.Z)(this,t)}return(0,H.Z)(t,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),t}(),cd=function(){function t(){var r=this;(0,z.Z)(this,t),this.Lr=function(){return r.Ur()},this.qr=function(){return r.Gr()},this.Kr=[],this.Qr()}return(0,H.Z)(t,[{key:"Br",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var i,e=(0,Ce.Z)(this.Kr);try{for(e.s();!(i=e.n()).done;)(0,i.value)(0)}catch(l){e.e(l)}finally{e.f()}}},{key:"Gr",value:function(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var i,e=(0,Ce.Z)(this.Kr);try{for(e.s();!(i=e.n()).done;)(0,i.value)(1)}catch(l){e.e(l)}finally{e.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),t}(),Eg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},_y=function(){function t(r){(0,z.Z)(this,t),this.jr=r.jr,this.Wr=r.Wr}return(0,H.Z)(t,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),t}(),wy=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i){var u;return(0,z.Z)(this,e),(u=r.call(this,i)).forceLongPolling=i.forceLongPolling,u.autoDetectLongPolling=i.autoDetectLongPolling,u.useFetchStreams=i.useFetchStreams,u}return(0,H.Z)(e,[{key:"ao",value:function(u,l,f,v){return new Promise(function(b,Z){var K=new mo;K.listenOnce(zr.COMPLETE,function(){try{switch(K.getLastErrorCode()){case ws.NO_ERROR:var de=K.getResponseJson();D("Connection","XHR received:",JSON.stringify(de)),b(de);break;case ws.TIMEOUT:D("Connection",'RPC "'+u+'" timed out'),Z(new Et(Ke.DEADLINE_EXCEEDED,"Request time out"));break;case ws.HTTP_ERROR:var Be=K.getStatus();if(D("Connection",'RPC "'+u+'" failed with status:',Be,"response text:",K.getResponseText()),Be>0){var we=K.getResponseJson().error;if(we&&we.status&&we.message){var st=(Nt=we.status.toLowerCase().replace(/_/g,"-"),Object.values(Ke).indexOf(Nt)>=0?Nt:Ke.UNKNOWN);Z(new Et(st,we.message))}else Z(new Et(Ke.UNKNOWN,"Server responded with status "+K.getStatus()))}else Z(new Et(Ke.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{D("Connection",'RPC "'+u+'" completed.')}var Nt});var re=JSON.stringify(v);K.send(l,"POST",re,f,15)})}},{key:"ho",value:function(u,l,f){var v=[this.so,"/","google.firestore.v1.Firestore","/",u,"/channel"],b=qs(),Z=Ys(),K={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(K.xmlHttpFactory=new Qu({})),this.uo(K.initMessageHeaders,l,f),(0,on.uI)()||(0,on.b$)()||(0,on.d)()||(0,on.w1)()||(0,on.Mn)()||(0,on.ru)()||(K.httpHeadersOverwriteParam="$httpHeaders");var re=v.join("");D("Connection","Creating WebChannel: "+re,K);var de=b.createWebChannel(re,K),Be=!1,we=!1,st=new _y({jr:function(sn){we?D("Connection","Not sending because WebChannel is closed:",sn):(Be||(D("Connection","Opening WebChannel transport."),de.open(),Be=!0),D("Connection","WebChannel sending:",sn),de.send(sn))},Wr:function(){return de.close()}}),pt=function(sn,Yt,dn){sn.listen(Yt,function(jn){try{dn(jn)}catch(lr){setTimeout(function(){throw lr},0)}})};return pt(de,du.EventType.OPEN,function(){we||D("Connection","WebChannel transport opened.")}),pt(de,du.EventType.CLOSE,function(){we||(we=!0,D("Connection","WebChannel transport closed"),st.eo())}),pt(de,du.EventType.ERROR,function(Nt){we||(we=!0,J("Connection","WebChannel transport errored:",Nt),st.eo(new Et(Ke.UNAVAILABLE,"The operation could not be completed")))}),pt(de,du.EventType.MESSAGE,function(Nt){var sn;if(!we){var Yt=Nt.data[0];Ue(!!Yt);var jn=Yt.error||(null===(sn=Yt[0])||void 0===sn?void 0:sn.error);if(jn){D("Connection","WebChannel received error:",jn);var lr=jn.status,Hn=function(Wi){var Jr=na[Wi];if(void 0!==Jr)return hl(Jr)}(lr),Tn=jn.message;void 0===Hn&&(Hn=Ke.INTERNAL,Tn="Unknown error status: "+lr+" with message "+jn.message),we=!0,st.eo(new Et(Hn,Tn)),de.close()}else D("Connection","WebChannel received:",Yt),st.no(Yt)}}),pt(Z,fs.STAT_EVENT,function(Nt){Nt.stat===js.PROXY?D("Connection","Detected buffering proxy"):Nt.stat===js.NOPROXY&&D("Connection","Detected no buffering proxy")}),setTimeout(function(){st.Zr()},0),st}}]),e}(function(){function t(r){(0,z.Z)(this,t),this.databaseInfo=r,this.databaseId=r.databaseId,this.so=(r.ssl?"https":"http")+"://"+r.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,H.Z)(t,[{key:"ro",value:function(e,i,u,l,f){var v=this.oo(e,i);D("RestConnection","Sending: ",v,u);var b={};return this.uo(b,l,f),this.ao(e,v,b,u).then(function(Z){return D("RestConnection","Received: ",Z),Z},function(Z){throw J("RestConnection","".concat(e," failed with error: "),Z,"url: ",v,"request:",u),Z})}},{key:"co",value:function(e,i,u,l,f){return this.ro(e,i,u,l,f)}},{key:"uo",value:function(e,i,u){e["X-Goog-Api-Client"]="gl-js/ fire/"+yo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(function(l,f){return e[f]=l}),u&&u.headers.forEach(function(l,f){return e[f]=l})}},{key:"oo",value:function(e,i){var u=Eg[e];return"".concat(this.so,"/v1/").concat(i,":").concat(u)}}]),t}());function bg(){return"undefined"!=typeof window?window:null}function lh(){return"undefined"!=typeof document?document:null}function ch(t){return new Fh(t,!0)}var fd=function(){function t(r,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;(0,z.Z)(this,t),this.Jn=r,this.timerId=e,this.lo=i,this.fo=u,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return(0,H.Z)(t,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var i=this;this.cancel();var u=Math.floor(this.wo+this.To()),l=Math.max(0,Date.now()-this.yo),f=Math.max(0,u-l);f>0&&D("ExponentialBackoff","Backing off for ".concat(f," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(u," ms, last attempt: ").concat(l," ms ago)")),this.mo=this.Jn.enqueueAfterDelay(this.timerId,f,function(){return i.yo=Date.now(),e()}),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),t}(),Tg=function(){function t(r,e,i,u,l,f,v,b){(0,z.Z)(this,t),this.Jn=r,this.Ao=i,this.Ro=u,this.bo=l,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=v,this.listener=b,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new fd(r,e)}return(0,H.Z)(t,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:(r=(0,Se.Z)(te().mark(function i(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(l.t0=this.Do(),!l.t0){l.next=4;break}return l.next=4,this.close(0);case 4:case"end":return l.stop()}},i,this)})),function e(){return r.apply(this,arguments)})},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,function(){return e.Mo()}))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var r=(0,Se.Z)(te().mark(function i(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.Co()){l.next=2;break}return l.abrupt("return",this.close(0));case 2:case"end":return l.stop()}},i,this)}));return function e(){return r.apply(this,arguments)}}()},{key:"Fo",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"close",value:function(){var r=(0,Se.Z)(te().mark(function i(u,l){return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==u?this.So.reset():l&&l.code===Ke.RESOURCE_EXHAUSTED?(N(l.toString()),N("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):l&&l.code===Ke.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=u,v.next=9,this.listener.Jr(l);case 9:case"end":return v.stop()}},i,this)}));return function e(i,u){return r.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var i=this.Lo(this.Po),u=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(function(l){var f=(0,F.Z)(l,2);e.Po===u&&e.Uo(f[0],f[1])},function(l){i(function(){var f=new Et(Ke.UNKNOWN,"Fetching auth token failed: "+l.message);return e.qo(f)})})}},{key:"Uo",value:function(e,i){var u=this,l=this.Lo(this.Po);this.stream=this.Go(e,i),this.stream.zr(function(){l(function(){return u.state=2,u.vo=u.Jn.enqueueAfterDelay(u.Ro,1e4,function(){return u.Co()&&(u.state=3),Promise.resolve()}),u.listener.zr()})}),this.stream.Jr(function(f){l(function(){return u.qo(f)})}),this.stream.onMessage(function(f){l(function(){return u.onMessage(f)})})}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io((0,Se.Z)(te().mark(function i(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:e.state=0,e.start();case 1:case"end":return l.stop()}},i)})))}},{key:"qo",value:function(e){return D("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var i=this;return function(u){i.Jn.enqueueAndForget(function(){return i.Po===e?u():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),t;var r}(),Ey=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l,f,v,b){var Z;return(0,z.Z)(this,e),(Z=r.call(this,i,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",u,l,f,b)).M=v,Z}return(0,H.Z)(e,[{key:"Go",value:function(u,l){return this.bo.ho("Listen",u,l)}},{key:"onMessage",value:function(u){this.So.reset();var l=function kf(t,r){var e,qr;if("targetChange"in r){var i="NO_CHANGE"===(qr=r.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===qr?1:"REMOVE"===qr?2:"CURRENT"===qr?3:"RESET"===qr?4:pe(),u=r.targetChange.targetIds||[],l=function(qr,ga){return qr.N?(Ue(void 0===ga||"string"==typeof ga),ta.fromBase64String(ga||"")):(Ue(void 0===ga||ga instanceof Uint8Array),ta.fromUint8Array(ga||new Uint8Array))}(t,r.targetChange.resumeToken),f=r.targetChange.cause,v=f&&function(qr){var ga=void 0===qr.code?Ke.UNKNOWN:hl(qr.code);return new Et(ga,qr.message||"")}(f);e=new pa(i,u,l,v||null)}else if("documentChange"in r){var b=r.documentChange,Z=io(t,b.document.name),K=ss(b.document.updateTime),re=new vs({mapValue:{fields:b.document.fields}}),de=G.newFoundDocument(Z,K,re);e=new Do(b.targetIds||[],b.removedTargetIds||[],de.key,de)}else if("documentDelete"in r){var st=r.documentDelete,pt=io(t,st.document),Nt=st.readTime?ss(st.readTime):tr.min(),sn=G.newNoDocument(pt,Nt);e=new Do([],st.removedTargetIds||[],sn.key,sn)}else if("documentRemove"in r){var dn=r.documentRemove,jn=io(t,dn.document);e=new Do([],dn.removedTargetIds||[],jn,null)}else{if(!("filter"in r))return pe();var Hn=r.filter,Wi=new fc(Hn.count||0);e=new ua(Hn.targetId,Wi)}return e}(this.M,u),f=function(v){if(!("targetChange"in v))return tr.min();var b=v.targetChange;return b.targetIds&&b.targetIds.length?tr.min():b.readTime?ss(b.readTime):tr.min()}(u);return this.listener.Ko(l,f)}},{key:"Qo",value:function(u){var v,b,Z,K,l={};l.database=vl(this.M),l.addTarget=(v=this.M,(Z=Fn(K=(b=u).target)?{documents:Bh(v,K)}:{query:wf(v,K)}).targetId=b.targetId,b.resumeToken.approximateByteSize()>0?Z.resumeToken=xc(v,b.resumeToken):b.snapshotVersion.compareTo(tr.min())>0&&(Z.readTime=Ql(v,b.snapshotVersion.toTimestamp())),Z);var f=function ev(t,r){var e=function(i,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pe()}}(0,r.purpose);return null==e?null:{"goog-listen-tags":e}}(0,u);f&&(l.labels=f),this.Oo(l)}},{key:"jo",value:function(u){var l={};l.database=vl(this.M),l.removeTarget=u,this.Oo(l)}}]),e}(Tg),Dg=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l,f,v,b){var Z;return(0,z.Z)(this,e),(Z=r.call(this,i,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",u,l,f,b)).M=v,Z.Wo=!1,Z}return(0,H.Z)(e,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,(0,be.Z)((0,Ge.Z)(e.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Go",value:function(u,l){return this.bo.ho("Write",u,l)}},{key:"onMessage",value:function(u){if(Ue(!!u.streamToken),this.lastStreamToken=u.streamToken,this.Wo){this.So.reset();var l=function Uh(t,r){return t&&t.length>0?(Ue(void 0!==r),t.map(function(e){return u=r,(l=ss((i=e).updateTime?i.updateTime:u)).isEqual(tr.min())&&(l=ss(u)),new br(l,i.transformResults||[]);var i,u,l})):[]}(u.writeResults,u.commitTime),f=ss(u.commitTime);return this.listener.Jo(f,l)}return Ue(!u.writeResults||0===u.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var u={};u.database=vl(this.M),this.Oo(u)}},{key:"Ho",value:function(u){var l=this,f={streamToken:this.lastStreamToken,writes:u.map(function(v){return Go(l.M,v)})};this.Oo(f)}}]),e}(Tg),Cg=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l,f){var v;return(0,z.Z)(this,e),(v=r.call(this)).authCredentials=i,v.appCheckCredentials=u,v.bo=l,v.M=f,v.Zo=!1,v}return(0,H.Z)(e,[{key:"tu",value:function(){if(this.Zo)throw new Et(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(u,l,f){var v=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(b){var Z=(0,F.Z)(b,2);return v.bo.ro(u,l,f,Z[0],Z[1])}).catch(function(b){throw"FirebaseError"===b.name?(b.code===Ke.UNAUTHENTICATED&&(v.authCredentials.invalidateToken(),v.appCheckCredentials.invalidateToken()),b):new Et(Ke.UNKNOWN,b.toString())})}},{key:"co",value:function(u,l,f){var v=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(b){var Z=(0,F.Z)(b,2);return v.bo.co(u,l,f,Z[0],Z[1])}).catch(function(b){throw"FirebaseError"===b.name?(b.code===Ke.UNAUTHENTICATED&&(v.authCredentials.invalidateToken(),v.appCheckCredentials.invalidateToken()),b):new Et(Ke.UNKNOWN,b.toString())})}},{key:"terminate",value:function(){this.Zo=!0}}]),e}(function(){return(0,H.Z)(function t(){(0,z.Z)(this,t)})}()),by=function(){function t(r,e){(0,z.Z)(this,t),this.asyncQueue=r,this.onlineStateHandler=e,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return(0,H.Z)(t,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()}))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var i="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(N(i),this.su=!1):D("OnlineStateTracker",i)}},{key:"au",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),t}(),Ml=(0,H.Z)(function t(r,e,i,u,l){var f=this;(0,z.Z)(this,t),this.localStore=r,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(function(v){i.enqueueAndForget((0,Se.Z)(te().mark(function b(){return te().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(K.t0=Ec(f),!K.t0){K.next=5;break}return D("RemoteStore","Restarting streams for network reachability change."),K.next=5,function(){var re=(0,Se.Z)(te().mark(function de(Be){var we;return te().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return(we=vt(Be)).lu.add(4),pt.next=4,If(we);case 4:return we._u.set("Unknown"),we.lu.delete(4),pt.next=8,tf(we);case 8:case"end":return pt.stop()}},de)}));return function(de){return re.apply(this,arguments)}}()(f);case 5:case"end":return K.stop()}},b)})))}),this._u=new by(i,u)});function tf(t){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,Se.Z)(te().mark(function t(r){var e,i,u;return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!Ec(r)){f.next=18;break}e=(0,Ce.Z)(r.fu),f.prev=2,e.s();case 4:if((i=e.n()).done){f.next=10;break}return u=i.value,f.next=8,u(!0);case 8:f.next=4;break;case 10:f.next=15;break;case 12:f.prev=12,f.t0=f.catch(2),e.e(f.t0);case 15:return f.prev=15,e.f(),f.finish(15);case 18:case"end":return f.stop()}},t,null,[[2,12,15,18]])})),Pv.apply(this,arguments)}function If(t){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,Se.Z)(te().mark(function t(r){var e,i,u;return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:e=(0,Ce.Z)(r.fu),f.prev=1,e.s();case 3:if((i=e.n()).done){f.next=9;break}return u=i.value,f.next=7,u(!1);case 7:f.next=3;break;case 9:f.next=14;break;case 11:f.prev=11,f.t0=f.catch(1),e.e(f.t0);case 14:return f.prev=14,e.f(),f.finish(14);case 17:case"end":return f.stop()}},t,null,[[1,11,14,17]])})),Ig.apply(this,arguments)}function fh(t,r){var e=vt(t);e.hu.has(r.targetId)||(e.hu.set(r.targetId,r),Ov(e)?dh(e):nf(e).Co()&&Mv(e,r))}function hh(t,r){var e=vt(t),i=nf(e);e.hu.delete(r),i.Co()&&Sg(e,r),0===e.hu.size&&(i.Co()?i.ko():Ec(e)&&e._u.set("Unknown"))}function Mv(t,r){t.wu.Z(r.targetId),nf(t).Qo(r)}function Sg(t,r){t.wu.Z(r),nf(t).jo(r)}function dh(t){t.wu=new Xs({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},Et:function(e){return t.hu.get(e)||null}}),nf(t).start(),t._u.iu()}function Ov(t){return Ec(t)&&!nf(t).Do()&&t.hu.size>0}function Ec(t){return 0===vt(t).lu.size}function vh(t){t.wu=void 0}function Nv(t){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,Se.Z)(te().mark(function t(r){return te().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:r.hu.forEach(function(u,l){Mv(r,u)});case 1:case"end":return i.stop()}},t)})),Lv.apply(this,arguments)}function Fv(t,r){return ph.apply(this,arguments)}function ph(){return ph=(0,Se.Z)(te().mark(function t(r,e){return te().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:vh(r),Ov(r)?(r._u.uu(e),dh(r)):r._u.set("Unknown");case 1:case"end":return u.stop()}},t)})),ph.apply(this,arguments)}function Ag(t,r,e){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,Se.Z)(te().mark(function t(r,e,i){return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(r._u.set("Online"),!(e instanceof pa&&2===e.state&&e.cause)){f.next=13;break}return f.prev=1,f.next=4,function(){var v=(0,Se.Z)(te().mark(function b(Z,K){var re,de,Be,we;return te().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:re=K.cause,de=(0,Ce.Z)(K.targetIds),pt.prev=2,de.s();case 4:if((Be=de.n()).done){pt.next=14;break}if(pt.t0=Z.hu.has(we=Be.value),!pt.t0){pt.next=12;break}return pt.next=10,Z.remoteSyncer.rejectListen(we,re);case 10:Z.hu.delete(we),Z.wu.removeTarget(we);case 12:pt.next=4;break;case 14:pt.next=19;break;case 16:pt.prev=16,pt.t1=pt.catch(2),de.e(pt.t1);case 19:return pt.prev=19,de.f(),pt.finish(19);case 22:case"end":return pt.stop()}},b,null,[[2,16,19,22]])}));return function(b,Z){return v.apply(this,arguments)}}()(r,e);case 4:f.next=11;break;case 6:return f.prev=6,f.t0=f.catch(1),D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),f.t0),f.next=11,hd(r,f.t0);case 11:case 22:f.next=29;break;case 13:if(e instanceof Do?r.wu.ut(e):e instanceof ua?r.wu._t(e):r.wu.ht(e),i.isEqual(tr.min())){f.next=29;break}return f.prev=14,f.next=17,Dv(r.localStore);case 17:if(f.t1=i.compareTo(f.sent)>=0,!f.t1){f.next=22;break}return f.next=22,function(v,b){var Z=v.wu.yt(b);return Z.targetChanges.forEach(function(K,re){if(K.resumeToken.approximateByteSize()>0){var de=v.hu.get(re);de&&v.hu.set(re,de.withResumeToken(K.resumeToken,b))}}),Z.targetMismatches.forEach(function(K){var re=v.hu.get(K);if(re){v.hu.set(K,re.withResumeToken(ta.EMPTY_BYTE_STRING,re.snapshotVersion)),Sg(v,K);var de=new Qf(re.target,K,1,re.sequenceNumber);Mv(v,de)}}),v.remoteSyncer.applyRemoteEvent(Z)}(r,i);case 24:return f.prev=24,f.t2=f.catch(14),D("RemoteStore","Failed to raise snapshot:",f.t2),f.next=29,hd(r,f.t2);case 29:case"end":return f.stop()}},t,null,[[1,6],[14,24]])})),Zv.apply(this,arguments)}function hd(t,r,e){return gh.apply(this,arguments)}function gh(){return gh=(0,Se.Z)(te().mark(function t(r,e,i){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(Gc(e)){l.next=2;break}throw e;case 2:return r.lu.add(1),l.next=5,If(r);case 5:r._u.set("Offline"),i||(i=function(){return Dv(r.localStore)}),r.asyncQueue.enqueueRetryable((0,Se.Z)(te().mark(function f(){return te().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return D("RemoteStore","Retrying IndexedDB access"),b.next=3,i();case 3:return r.lu.delete(1),b.next=6,tf(r);case 6:case"end":return b.stop()}},f)})));case 8:case"end":return l.stop()}},t)})),gh.apply(this,arguments)}function Ty(t,r){return r().catch(function(e){return hd(t,e,r)})}function Sf(t){return dd.apply(this,arguments)}function dd(){return dd=(0,Se.Z)(te().mark(function t(r){var e,i,u,l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:e=vt(r),i=ec(e),u=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;case 2:if(!Rg(e)){v.next=19;break}return v.prev=3,v.next=6,vy(e.localStore,u);case 6:if(null!==(l=v.sent)){v.next=10;break}return 0===e.cu.length&&i.ko(),v.abrupt("break",19);case 10:u=l.batchId,Pg(e,l),v.next=17;break;case 13:return v.prev=13,v.t0=v.catch(3),v.next=17,hd(e,v.t0);case 17:v.next=2;break;case 19:Uv(e)&&Bv(e);case 20:case"end":return v.stop()}},t,null,[[3,13]])})),dd.apply(this,arguments)}function Rg(t){return Ec(t)&&t.cu.length<10}function Pg(t,r){t.cu.push(r);var e=ec(t);e.Co()&&e.zo&&e.Ho(r.mutations)}function Uv(t){return Ec(t)&&!ec(t).Do()&&t.cu.length>0}function Bv(t){ec(t).start()}function Xl(t){return Af.apply(this,arguments)}function Af(){return Af=(0,Se.Z)(te().mark(function t(r){return te().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:ec(r).Xo();case 1:case"end":return i.stop()}},t)})),Af.apply(this,arguments)}function Dy(t){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,Se.Z)(te().mark(function t(r){var e,i,u;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:e=ec(r),i=(0,Ce.Z)(r.cu);try{for(i.s();!(u=i.n()).done;)e.Ho(u.value.mutations)}catch(b){i.e(b)}finally{i.f()}case 3:case"end":return v.stop()}},t)})),Vv.apply(this,arguments)}function ok(t,r,e){return mh.apply(this,arguments)}function mh(){return mh=(0,Se.Z)(te().mark(function t(r,e,i){var u,l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u=r.cu.shift(),l=zh.from(u,e,i),v.next=3,Ty(r,function(){return r.remoteSyncer.applySuccessfulWrite(l)});case 3:return v.next=5,Sf(r);case 5:case"end":return v.stop()}},t)})),mh.apply(this,arguments)}function Mg(t,r){return yh.apply(this,arguments)}function yh(){return yh=(0,Se.Z)(te().mark(function t(r,e){return te().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.t0=e&&ec(r).zo,!u.t0){u.next=4;break}return u.next=4,function(){var l=(0,Se.Z)(te().mark(function f(v,b){var Z,K;return te().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(!Cl(K=b.code)||K===Ke.ABORTED){de.next=7;break}return Z=v.cu.shift(),ec(v).No(),de.next=5,Ty(v,function(){return v.remoteSyncer.rejectFailedWrite(Z.batchId,b)});case 5:return de.next=7,Sf(v);case 7:case"end":return de.stop()}},f)}));return function(f,v){return l.apply(this,arguments)}}()(r,e);case 4:Uv(r)&&Bv(r);case 5:case"end":return u.stop()}},t)})),yh.apply(this,arguments)}function Rf(t,r){return xv.apply(this,arguments)}function xv(){return xv=(0,Se.Z)(te().mark(function t(r,e){var i,u;return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return(i=vt(r)).asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials"),u=Ec(i),i.lu.add(3),f.next=6,If(i);case 6:return u&&i._u.set("Unknown"),f.next=9,i.remoteSyncer.handleCredentialChange(e);case 9:return i.lu.delete(3),f.next=12,tf(i);case 12:case"end":return f.stop()}},t)})),xv.apply(this,arguments)}function kh(t,r){return vd.apply(this,arguments)}function vd(){return vd=(0,Se.Z)(te().mark(function t(r,e){var i;return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(i=vt(r),!e){l.next=7;break}return i.lu.delete(2),l.next=5,tf(i);case 5:l.next=13;break;case 7:if(l.t0=e,l.t0){l.next=13;break}return i.lu.add(2),l.next=12,If(i);case 12:i._u.set("Unknown");case 13:case"end":return l.stop()}},t)})),vd.apply(this,arguments)}function nf(t){return t.mu||(t.mu=(r=t.datastore,e=t.asyncQueue,i={zr:Nv.bind(null,t),Jr:Fv.bind(null,t),Ko:Ag.bind(null,t)},(u=vt(r)).tu(),new Ey(e,u.bo,u.authCredentials,u.appCheckCredentials,u.M,i)),t.fu.push(function(){var r=(0,Se.Z)(te().mark(function e(i){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!i){l.next=4;break}t.mu.No(),Ov(t)?dh(t):t._u.set("Unknown"),l.next=7;break;case 4:return l.next=6,t.mu.stop();case 6:vh(t);case 7:case"end":return l.stop()}},e)}));return function(e){return r.apply(this,arguments)}}())),t.mu;var r,e,i,u}function ec(t){return t.gu||(t.gu=(r=t.datastore,e=t.asyncQueue,i={zr:Xl.bind(null,t),Jr:Mg.bind(null,t),Yo:Dy.bind(null,t),Jo:ok.bind(null,t)},(u=vt(r)).tu(),new Dg(e,u.bo,u.authCredentials,u.appCheckCredentials,u.M,i)),t.fu.push(function(){var r=(0,Se.Z)(te().mark(function e(i){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!i){l.next=6;break}return t.gu.No(),l.next=4,Sf(t);case 4:l.next=9;break;case 6:return l.next=8,t.gu.stop();case 8:t.cu.length>0&&(D("RemoteStore","Stopping write stream with ".concat(t.cu.length," pending writes")),t.cu=[]);case 9:case"end":return l.stop()}},e)}));return function(e){return r.apply(this,arguments)}}())),t.gu;var r,e,i,u}var Cy=function(){function t(r,e,i,u,l){(0,z.Z)(this,t),this.asyncQueue=r,this.timerId=e,this.targetTimeMs=i,this.op=u,this.removalCallback=l,this.deferred=new Vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(f){})}return(0,H.Z)(t,[{key:"start",value:function(e){var i=this;this.timerHandle=setTimeout(function(){return i.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Et(Ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(i){return e.deferred.resolve(i)})):Promise.resolve()})}},{key:"clearTimeout",value:function(r){function e(){return r.apply(this,arguments)}return e.toString=function(){return r.toString()},e}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(e,i,u,l,f){var b=new t(e,i,Date.now()+u,l,f);return b.start(u),b}}]),t}();function bc(t,r){if(N("AsyncQueue","".concat(r,": ").concat(t)),Gc(t))return new Et(Ke.UNAVAILABLE,"".concat(r,": ").concat(t));throw t}var Og=function(){function t(r){(0,z.Z)(this,t),this.comparator=r?function(e,i){return r(e,i)||hn.comparator(e.key,i.key)}:function(e,i){return hn.comparator(e.key,i.key)},this.keyedMap=dc(),this.sortedSet=new Pa(this.comparator)}return(0,H.Z)(t,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(i,u){return e(i),!1})}},{key:"add",value:function(e){var i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}},{key:"isEqual",value:function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var i=this.sortedSet.getIterator(),u=e.sortedSet.getIterator();i.hasNext();){var l=i.getNext().key,f=u.getNext().key;if(!l.isEqual(f))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(i){e.push(i.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(e,i){var u=new t;return u.comparator=this.comparator,u.keyedMap=e,u.sortedSet=i,u}}],[{key:"emptySet",value:function(e){return new t(e.comparator)}}]),t}(),Ng=function(){function t(){(0,z.Z)(this,t),this.yu=new Pa(hn.comparator)}return(0,H.Z)(t,[{key:"track",value:function(e){var i=e.doc.key,u=this.yu.get(i);u?0!==e.type&&3===u.type?this.yu=this.yu.insert(i,e):3===e.type&&1!==u.type?this.yu=this.yu.insert(i,{type:u.type,doc:e.doc}):2===e.type&&2===u.type?this.yu=this.yu.insert(i,{type:2,doc:e.doc}):2===e.type&&0===u.type?this.yu=this.yu.insert(i,{type:0,doc:e.doc}):1===e.type&&0===u.type?this.yu=this.yu.remove(i):1===e.type&&2===u.type?this.yu=this.yu.insert(i,{type:1,doc:u.doc}):0===e.type&&1===u.type?this.yu=this.yu.insert(i,{type:2,doc:e.doc}):pe():this.yu=this.yu.insert(i,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal(function(i,u){e.push(u)}),e}}]),t}(),_h=function(){function t(r,e,i,u,l,f,v,b){(0,z.Z)(this,t),this.query=r,this.docs=e,this.oldDocs=i,this.docChanges=u,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=v,this.excludesMetadataChanges=b}return(0,H.Z)(t,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ll(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var i=this.docChanges,u=e.docChanges;if(i.length!==u.length)return!1;for(var l=0;l<i.length;l++)if(i[l].type!==u[l].type||!i[l].doc.isEqual(u[l].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(e,i,u,l){var f=[];return i.forEach(function(v){f.push({type:0,doc:v})}),new t(e,i,Og.emptySet(i),f,u,l,!0,!1)}}]),t}(),Pf=(0,H.Z)(function t(){(0,z.Z)(this,t),this.Iu=void 0,this.listeners=[]}),Lg=(0,H.Z)(function t(){(0,z.Z)(this,t),this.queries=new ku(function(r){return lc(r)},ll),this.onlineState="Unknown",this.Tu=new Set});function jv(t,r){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,Se.Z)(te().mark(function t(r,e){var i,u,l,f,v;return te().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(i=vt(r),l=!1,(f=i.queries.get(u=e.query))||(l=!0,f=new Pf),!l){Z.next=13;break}return Z.prev=3,Z.next=6,i.onListen(u);case 6:f.Iu=Z.sent,Z.next=13;break;case 9:return Z.prev=9,Z.t0=Z.catch(3),v=bc(Z.t0,"Initialization of query '".concat(cc(e.query),"' failed")),Z.abrupt("return",void e.onError(v));case 13:i.queries.set(u,f),f.listeners.push(e),e.Eu(i.onlineState),f.Iu&&e.Au(f.Iu)&&zv(i);case 14:case"end":return Z.stop()}},t,null,[[3,9]])})),Hv.apply(this,arguments)}function Tc(t,r){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,Se.Z)(te().mark(function t(r,e){var i,u,l,f,v;return te().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(i=vt(r),l=!1,(f=i.queries.get(u=e.query))&&(v=f.listeners.indexOf(e))>=0&&(f.listeners.splice(v,1),l=0===f.listeners.length),!l){Z.next=6;break}return Z.abrupt("return",(i.queries.delete(u),i.onUnlisten(u)));case 6:case"end":return Z.stop()}},t)})),Gv.apply(this,arguments)}function Iy(t,r){var l,e=vt(t),i=!1,u=(0,Ce.Z)(r);try{for(u.s();!(l=u.n()).done;){var f=l.value,b=e.queries.get(f.query);if(b){var K,Z=(0,Ce.Z)(b.listeners);try{for(Z.s();!(K=Z.n()).done;)K.value.Au(f)&&(i=!0)}catch(de){Z.e(de)}finally{Z.f()}b.Iu=f}}}catch(de){u.e(de)}finally{u.f()}i&&zv(e)}function Sy(t,r,e){var i=vt(t),u=i.queries.get(r);if(u){var f,l=(0,Ce.Z)(u.listeners);try{for(l.s();!(f=l.n()).done;)f.value.onError(e)}catch(b){l.e(b)}finally{l.f()}}i.queries.delete(r)}function zv(t){t.Tu.forEach(function(r){r.next()})}var Co=function(){function t(r,e,i){(0,z.Z)(this,t),this.query=r,this.Ru=e,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}return(0,H.Z)(t,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var l,i=[],u=(0,Ce.Z)(e.docChanges);try{for(u.s();!(l=u.n()).done;){var f=l.value;3!==f.type&&i.push(f)}}catch(b){u.e(b)}finally{u.f()}e=new _h(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var v=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),v=!0):this.vu(e,this.onlineState)&&(this.Su(e),v=!0),this.Pu=e,v}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var i=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),i=!0),i}},{key:"vu",value:function(e,i){return!e.fromCache||!(this.options.Du&&"Offline"!==i||e.docs.isEmpty()&&"Offline"!==i)}},{key:"Vu",value:function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=_h.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),t}(),Ay=function(){function t(r,e){(0,z.Z)(this,t),this.payload=r,this.byteLength=e}return(0,H.Z)(t,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),t}(),Fg=function(){function t(r){(0,z.Z)(this,t),this.M=r}return(0,H.Z)(t,[{key:"li",value:function(e){return io(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?yf(this.M,e.document,!1):G.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return ss(e)}}]),t}(),Ry=function(){function t(r,e,i){(0,z.Z)(this,t),this.xu=r,this.localStore=e,this.M=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Wv(r)}return(0,H.Z)(t,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var i=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++i;var u=Fr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(u.get(u.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++i);return i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var f,i=new Map,u=new Fg(this.M),l=(0,Ce.Z)(e);try{for(l.s();!(f=l.n()).done;){var v=f.value;if(v.metadata.queries){var K,b=u.li(v.metadata.name),Z=(0,Ce.Z)(v.metadata.queries);try{for(Z.s();!(K=Z.n()).done;){var re=K.value,de=(i.get(re)||Xn()).add(b);i.set(re,de)}}catch(Be){Z.e(Be)}finally{Z.f()}}}}catch(Be){l.e(Be)}finally{l.f()}return i}},{key:"complete",value:(r=(0,Se.Z)(te().mark(function i(){var u,l,f,v,b;return te().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,uh(this.localStore,new Fg(this.M),this.documents,this.xu.id);case 2:u=K.sent,l=this.ku(this.documents),f=(0,Ce.Z)(this.queries),K.prev=5,f.s();case 7:if((v=f.n()).done){K.next=13;break}return b=v.value,K.next=11,py(this.localStore,b,l.get(b.name));case 11:K.next=7;break;case 13:K.next=18;break;case 15:K.prev=15,K.t0=K.catch(5),f.e(K.t0);case 18:return K.prev=18,f.f(),K.finish(18);case 21:return K.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:u}));case 22:case"end":return K.stop()}},i,this,[[5,15,18,21]])})),function e(){return r.apply(this,arguments)})}]),t;var r}();function Wv(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Zg=(0,H.Z)(function t(r){(0,z.Z)(this,t),this.key=r}),Py=(0,H.Z)(function t(r){(0,z.Z)(this,t),this.key=r}),Ug=function(){function t(r,e){(0,z.Z)(this,t),this.query=r,this.Fu=e,this.$u=null,this.current=!1,this.Bu=Xn(),this.mutatedKeys=Xn(),this.Lu=gf(r),this.Uu=new Og(this.Lu)}return(0,H.Z)(t,[{key:"qu",get:function(){return this.Fu}},{key:"Gu",value:function(e,i){var u=this,l=i?i.Ku:new Ng,f=i?i.Uu:this.Uu,v=i?i.mutatedKeys:this.mutatedKeys,b=f,Z=!1,K=Vo(this.query)&&f.size===this.query.limit?f.last():null,re=Tl(this.query)&&f.size===this.query.limit?f.first():null;if(e.inorderTraversal(function(Be,we){var st=f.get(Be),pt=ql(u.query,we)?we:null,Nt=!!st&&u.mutatedKeys.has(st.key),sn=!!pt&&(pt.hasLocalMutations||u.mutatedKeys.has(pt.key)&&pt.hasCommittedMutations),Yt=!1;st&&pt?st.data.isEqual(pt.data)?Nt!==sn&&(l.track({type:3,doc:pt}),Yt=!0):u.Qu(st,pt)||(l.track({type:2,doc:pt}),Yt=!0,(K&&u.Lu(pt,K)>0||re&&u.Lu(pt,re)<0)&&(Z=!0)):!st&&pt?(l.track({type:0,doc:pt}),Yt=!0):st&&!pt&&(l.track({type:1,doc:st}),Yt=!0,(K||re)&&(Z=!0)),Yt&&(pt?(b=b.add(pt),v=sn?v.add(Be):v.delete(Be)):(b=b.delete(Be),v=v.delete(Be)))}),Vo(this.query)||Tl(this.query))for(;b.size>this.query.limit;){var de=Vo(this.query)?b.last():b.first();b=b.delete(de.key),v=v.delete(de.key),l.track({type:1,doc:de})}return{Uu:b,Ku:l,ei:Z,mutatedKeys:v}}},{key:"Qu",value:function(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}},{key:"applyChanges",value:function(e,i,u){var l=this,f=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var v=e.Ku.pu();v.sort(function(re,de){return we=de.type,(st=function(Nt){switch(Nt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}})(re.type)-st(we)||l.Lu(re.doc,de.doc);var we,st}),this.ju(u);var b=i?this.Wu():[],Z=0===this.Bu.size&&this.current?1:0,K=Z!==this.$u;return this.$u=Z,0!==v.length||K?{snapshot:new _h(this.query,e.Uu,f,v,e.mutatedKeys,0===Z,K,!1),zu:b}:{zu:b}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new Ng,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var i=this;e&&(e.addedDocuments.forEach(function(u){return i.Fu=i.Fu.add(u)}),e.modifiedDocuments.forEach(function(u){}),e.removedDocuments.forEach(function(u){return i.Fu=i.Fu.delete(u)}),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var i=this.Bu;this.Bu=Xn(),this.Uu.forEach(function(l){e.Hu(l.key)&&(e.Bu=e.Bu.add(l.key))});var u=[];return i.forEach(function(l){e.Bu.has(l)||u.push(new Py(l))}),this.Bu.forEach(function(l){i.has(l)||u.push(new Zg(l))}),u}},{key:"Ju",value:function(e){this.Fu=e.hi,this.Bu=Xn();var i=this.Gu(e.documents);return this.applyChanges(i,!0)}},{key:"Yu",value:function(){return _h.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),t}(),My=(0,H.Z)(function t(r,e,i){(0,z.Z)(this,t),this.query=r,this.targetId=e,this.view=i}),lk=(0,H.Z)(function t(r){(0,z.Z)(this,t),this.key=r,this.Xu=!1}),Bg=function(){function t(r,e,i,u,l,f){(0,z.Z)(this,t),this.localStore=r,this.remoteStore=e,this.eventManager=i,this.sharedClientState=u,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.Zu={},this.ta=new ku(function(v){return lc(v)},ll),this.ea=new Map,this.na=new Set,this.sa=new Pa(hn.comparator),this.ia=new Map,this.ra=new oh,this.oa={},this.ua=new Map,this.aa=qc.gn(),this.onlineState="Unknown",this.ca=void 0}return(0,H.Z)(t,[{key:"isPrimaryClient",get:function(){return!0===this.ca}}]),t}();function ck(t,r){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,Se.Z)(te().mark(function t(r,e){var i,u,l,f,v,b;return te().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(i=Sc(r),!(f=i.ta.get(e))){K.next=6;break}i.sharedClientState.addLocalQueryTarget(u=f.targetId),l=f.view.Yu(),K.next=15;break;case 6:return K.next=8,Jc(i.localStore,Is(e));case 8:return v=K.sent,i.isPrimaryClient&&fh(i.remoteStore,v),b=i.sharedClientState.addLocalQueryTarget(v.targetId),u=v.targetId,K.next=14,$v(i,e,u,"current"===b);case 14:l=K.sent;case 15:return K.abrupt("return",l);case 16:case"end":return K.stop()}},t)})),Kv.apply(this,arguments)}function $v(t,r,e,i){return qv.apply(this,arguments)}function qv(){return qv=(0,Se.Z)(te().mark(function t(r,e,i,u){var l,f,v,b,Z,K;return te().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return r.ha=function(Be,we,st){return(pt=(0,Se.Z)(te().mark(function Nt(sn,Yt,dn,jn){var lr,Hn,Tn;return te().wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:if(lr=Yt.view.Gu(dn),Jr.t0=lr.ei,!Jr.t0){Jr.next=6;break}return Jr.next=5,_c(sn.localStore,Yt.query,!1).then(function(qr){return Yt.view.Gu(qr.documents,lr)});case 5:lr=Jr.sent;case 6:return Hn=jn&&jn.targetChanges.get(Yt.targetId),Tn=Yt.view.applyChanges(lr,sn.isPrimaryClient,Hn),Jr.abrupt("return",(Xv(sn,Yt.targetId,Tn.zu),Tn.snapshot));case 8:case"end":return Jr.stop()}},Nt)})),function(Nt,sn,Yt,dn){return pt.apply(this,arguments)})(r,Be,we,st);var pt},de.next=3,_c(r.localStore,e,!0);case 3:return f=new Ug(e,(l=de.sent).hi),v=f.Gu(l.documents),b=To.createSynthesizedTargetChangeForCurrentChange(i,u&&"Offline"!==r.onlineState),Z=f.applyChanges(v,r.isPrimaryClient,b),Xv(r,i,Z.zu),K=new My(e,i,f),de.abrupt("return",(r.ta.set(e,K),r.ea.has(i)?r.ea.get(i).push(e):r.ea.set(i,[e]),Z.snapshot));case 11:case"end":return de.stop()}},t)})),qv.apply(this,arguments)}function fk(t,r){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,Se.Z)(te().mark(function t(r,e){var i,u,l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(i=vt(r),u=i.ta.get(e),!((l=i.ea.get(u.targetId)).length>1)){v.next=3;break}return v.abrupt("return",(i.ea.set(u.targetId,l.filter(function(b){return!ll(b,e)})),void i.ta.delete(e)));case 3:if(!i.isPrimaryClient){v.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(u.targetId),v.t0=i.sharedClientState.isActiveQueryTarget(u.targetId),v.t0){v.next=9;break}return v.next=9,Cf(i.localStore,u.targetId,!1).then(function(){i.sharedClientState.clearQueryState(u.targetId),hh(i.remoteStore,u.targetId),Mf(i,u.targetId)}).catch(Qc);case 9:v.next=14;break;case 11:return Mf(i,u.targetId),v.next=14,Cf(i.localStore,u.targetId,!0);case 14:case"end":return v.stop()}},t)})),Vg.apply(this,arguments)}function Yv(t,r,e){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,Se.Z)(te().mark(function t(r,e,i){var u,l,f;return te().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return u=Ac(r),b.prev=1,b.next=4,function(Z,K){var we,re=vt(Z),de=Er.now(),Be=K.reduce(function(st,pt){return st.add(pt.key)},Xn());return re.persistence.runTransaction("Locally write mutations","readwrite",function(st){return re.ai.qs(st,Be).next(function(pt){we=pt;var Yt,Nt=[],sn=(0,Ce.Z)(K);try{for(sn.s();!(Yt=sn.n()).done;){var dn=Yt.value,jn=Ti(dn,we.get(dn.key));null!=jn&&Nt.push(new Ra(dn.key,jn,ps(jn.value.mapValue),Zn.exists(!0)))}}catch(lr){sn.e(lr)}finally{sn.f()}return re.$s.addMutationBatch(st,de,Nt,K)})}).then(function(st){return st.applyToLocalDocumentSet(we),{batchId:st.batchId,changes:we}})}(u.localStore,e);case 4:return u.sharedClientState.addPendingMutation((l=b.sent).batchId),K=l.batchId,re=i,de=void 0,(de=(Z=u).oa[Z.currentUser.toKey()])||(de=new Pa(gr)),de=de.insert(K,re),Z.oa[Z.currentUser.toKey()]=de,b.next=9,tc(u,l.changes);case 9:return b.next=11,Sf(u.remoteStore);case 11:b.next=17;break;case 13:b.prev=13,b.t0=b.catch(1),f=bc(b.t0,"Failed to persist write"),i.reject(f);case 17:case"end":return b.stop()}var Z,K,re,de},t,null,[[1,13]])})),Qv.apply(this,arguments)}function Jv(t,r){return pd.apply(this,arguments)}function pd(){return pd=(0,Se.Z)(te().mark(function t(r,e){var i,u;return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return i=vt(r),f.prev=1,f.next=4,dy(i.localStore,e);case 4:return u=f.sent,e.targetChanges.forEach(function(v,b){var Z=i.ia.get(b);Z&&(Ue(v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size<=1),v.addedDocuments.size>0?Z.Xu=!0:v.modifiedDocuments.size>0?Ue(Z.Xu):v.removedDocuments.size>0&&(Ue(Z.Xu),Z.Xu=!1))}),f.next=8,tc(i,u,e);case 8:f.next=14;break;case 10:return f.prev=10,f.t0=f.catch(1),f.next=14,Qc(f.t0);case 14:case"end":return f.stop()}},t,null,[[1,10]])})),pd.apply(this,arguments)}function Oy(t,r,e){var i=vt(t);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){var u=[];i.ta.forEach(function(l,f){var v=f.view.Eu(r);v.snapshot&&u.push(v.snapshot)}),function(l,f){var v=vt(l);v.onlineState=f;var b=!1;v.queries.forEach(function(Z,K){var de,re=(0,Ce.Z)(K.listeners);try{for(re.s();!(de=re.n()).done;)de.value.Eu(f)&&(b=!0)}catch(we){re.e(we)}finally{re.f()}}),b&&zv(v)}(i.eventManager,r),u.length&&i.Zu.Ko(u),i.onlineState=r,i.isPrimaryClient&&i.sharedClientState.setOnlineState(r)}}function pl(t,r,e){return xg.apply(this,arguments)}function xg(){return xg=(0,Se.Z)(te().mark(function t(r,e,i){var u,l,f,v,b,Z;return te().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if((u=vt(r)).sharedClientState.updateQueryState(e,"rejected",i),l=u.ia.get(e),!(f=l&&l.key)){re.next=14;break}return v=(v=new Pa(hn.comparator)).insert(f,G.newNoDocument(f,tr.min())),b=Xn().add(f),Z=new $a(tr.min(),new Map,new Tr(gr),v,b),re.next=9,Jv(u,Z);case 9:u.sa=u.sa.remove(f),u.ia.delete(e),ep(u),re.next=16;break;case 14:return re.next=16,Cf(u.localStore,e,!1).then(function(){return Mf(u,e,i)}).catch(Qc);case 16:case"end":return re.stop()}},t)})),xg.apply(this,arguments)}function hk(t,r){return gd.apply(this,arguments)}function gd(){return gd=(0,Se.Z)(te().mark(function t(r,e){var i,u,l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return i=vt(r),u=e.batch.batchId,v.prev=1,v.next=4,kc(i.localStore,e);case 4:return l=v.sent,wh(i,u,null),yd(i,u),i.sharedClientState.updateMutationState(u,"acknowledged"),v.next=10,tc(i,l);case 10:v.next=16;break;case 12:return v.prev=12,v.t0=v.catch(1),v.next=16,Qc(v.t0);case 16:case"end":return v.stop()}},t,null,[[1,12]])})),gd.apply(this,arguments)}function jg(t,r,e){return md.apply(this,arguments)}function md(){return md=(0,Se.Z)(te().mark(function t(r,e,i){var u,l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u=vt(r),v.prev=1,v.next=4,function(b,Z){var K=vt(b);return K.persistence.runTransaction("Reject batch","readwrite-primary",function(re){var de;return K.$s.lookupMutationBatch(re,Z).next(function(Be){return Ue(null!==Be),de=Be.keys(),K.$s.removeMutationBatch(re,Be)}).next(function(){return K.$s.performConsistencyCheck(re)}).next(function(){return K.ai.qs(re,de)})})}(u.localStore,e);case 4:return l=v.sent,wh(u,e,i),yd(u,e),u.sharedClientState.updateMutationState(e,"rejected",i),v.next=10,tc(u,l);case 10:v.next=16;break;case 12:return v.prev=12,v.t0=v.catch(1),v.next=16,Qc(v.t0);case 16:case"end":return v.stop()}},t,null,[[1,12]])})),md.apply(this,arguments)}function Ny(t,r){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,Se.Z)(te().mark(function t(r,e){var i,u,l,f;return te().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return Ec((i=vt(r)).remoteStore)||D("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),b.prev=2,b.next=5,function(Z){var K=vt(Z);return K.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(re){return K.$s.getHighestUnacknowledgedBatchId(re)})}(i.localStore);case 5:if(-1!==(u=b.sent)){b.next=8;break}return b.abrupt("return",void e.resolve());case 8:(l=i.ua.get(u)||[]).push(e),i.ua.set(u,l),b.next=16;break;case 12:b.prev=12,b.t0=b.catch(2),f=bc(b.t0,"Initialization of waitForPendingWrites() operation failed"),e.reject(f);case 16:case"end":return b.stop()}},t,null,[[2,12]])})),Hg.apply(this,arguments)}function yd(t,r){(t.ua.get(r)||[]).forEach(function(e){e.resolve()}),t.ua.delete(r)}function wh(t,r,e){var i=vt(t),u=i.oa[i.currentUser.toKey()];if(u){var l=u.get(r);l&&(e?l.reject(e):l.resolve(),u=u.remove(r)),i.oa[i.currentUser.toKey()]=u}}function Mf(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(r);var u,i=(0,Ce.Z)(t.ea.get(r));try{for(i.s();!(u=i.n()).done;){var l=u.value;t.ta.delete(l),e&&t.Zu.la(l,e)}}catch(f){i.e(f)}finally{i.f()}t.ea.delete(r),t.isPrimaryClient&&t.ra.Ri(r).forEach(function(f){t.ra.containsKey(f)||kd(t,f)})}function kd(t,r){t.na.delete(r.path.canonicalString());var e=t.sa.get(r);null!==e&&(hh(t.remoteStore,e),t.sa=t.sa.remove(r),t.ia.delete(e),ep(t))}function Xv(t,r,e){var u,i=(0,Ce.Z)(e);try{for(i.s();!(u=i.n()).done;){var l=u.value;l instanceof Zg?(t.ra.addReference(l.key,r),Ly(t,l)):l instanceof Py?(D("SyncEngine","Document no longer in limbo: "+l.key),t.ra.removeReference(l.key,r),t.ra.containsKey(l.key)||kd(t,l.key)):pe()}}catch(f){i.e(f)}finally{i.f()}}function Ly(t,r){var e=r.key,i=e.path.canonicalString();t.sa.get(e)||t.na.has(i)||(D("SyncEngine","New document in limbo: "+e),t.na.add(i),ep(t))}function ep(t){for(;t.na.size>0&&t.sa.size<t.maxConcurrentLimboResolutions;){var r=t.na.values().next().value;t.na.delete(r);var e=new hn(Fr.fromString(r)),i=t.aa.next();t.ia.set(i,new lk(e)),t.sa=t.sa.insert(e,i),fh(t.remoteStore,new Qf(Is(bl(e.path)),i,2,Li.A))}}function tc(t,r,e){return tp.apply(this,arguments)}function tp(){return tp=(0,Se.Z)(te().mark(function t(r,e,i){var u,l,f,v;return te().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(u=vt(r),l=[],f=[],v=[],Z.t0=u.ta.isEmpty(),Z.t0){Z.next=9;break}return u.ta.forEach(function(K,re){v.push(u.ha(re,e,i).then(function(de){if(de){u.isPrimaryClient&&u.sharedClientState.updateQueryState(re.targetId,de.fromCache?"not-current":"current"),l.push(de);var Be=hy.Js(re.targetId,de);f.push(Be)}}))}),Z.next=6,Promise.all(v);case 6:return u.Zu.Ko(l),Z.next=9,function(){var K=(0,Se.Z)(te().mark(function re(de,Be){var we,st,pt,Nt,sn,Yt,jn;return te().wrap(function(Hn){for(;;)switch(Hn.prev=Hn.next){case 0:return we=vt(de),Hn.prev=1,Hn.next=4,we.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(Tn){return Ut.forEach(Be,function(Wi){return Ut.forEach(Wi.zs,function(Jr){return we.persistence.referenceDelegate.addReference(Tn,Wi.targetId,Jr)}).next(function(){return Ut.forEach(Wi.Hs,function(Jr){return we.persistence.referenceDelegate.removeReference(Tn,Wi.targetId,Jr)})})})});case 4:Hn.next=11;break;case 6:if(Hn.prev=6,Hn.t0=Hn.catch(1),Gc(Hn.t0)){Hn.next=10;break}throw Hn.t0;case 10:D("LocalStore","Failed to update sequence numbers: "+Hn.t0);case 11:st=(0,Ce.Z)(Be);try{for(st.s();!(pt=st.n()).done;)sn=(Nt=pt.value).targetId,Nt.fromCache||(Yt=we.si.get(sn),jn=Yt.withLastLimboFreeSnapshotVersion(Yt.snapshotVersion),we.si=we.si.insert(sn,jn))}catch(Tn){st.e(Tn)}finally{st.f()}case 13:case"end":return Hn.stop()}},re,null,[[1,6]])}));return function(re,de){return K.apply(this,arguments)}}()(u.localStore,f);case 9:case"end":return Z.stop()}},t)})),tp.apply(this,arguments)}function Fy(t,r){return Of.apply(this,arguments)}function Of(){return Of=(0,Se.Z)(te().mark(function t(r,e){var i,u;return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if((i=vt(r)).currentUser.isEqual(e)){f.next=11;break}return D("SyncEngine","User change. New user:",e.toKey()),f.next=5,id(i.localStore,e);case 5:return u=f.sent,i.currentUser=e,(v=i).ua.forEach(function(Z){Z.forEach(function(K){K.reject(new Et(Ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),v.ua.clear(),i.sharedClientState.handleUserChange(e,u.removedBatchIds,u.addedBatchIds),f.next=11,tc(i,u.ci);case 11:case"end":return f.stop()}var v},t)})),Of.apply(this,arguments)}function Nf(t,r){var e=vt(t),i=e.ia.get(r);if(i&&i.Xu)return Xn().add(i.key);var u=Xn(),l=e.ea.get(r);if(!l)return u;var v,f=(0,Ce.Z)(l);try{for(f.s();!(v=f.n()).done;){var Z=e.ta.get(v.value);u=u.unionWith(Z.view.qu)}}catch(K){f.e(K)}finally{f.f()}return u}function Zy(t,r){return rf.apply(this,arguments)}function rf(){return rf=(0,Se.Z)(te().mark(function t(r,e){var i,l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return i=vt(r),v.next=3,_c(i.localStore,e.query,!0);case 3:return l=e.view.Ju(v.sent),v.abrupt("return",(i.isPrimaryClient&&Xv(i,e.targetId,l.zu),l));case 6:case"end":return v.stop()}},t)})),rf.apply(this,arguments)}function Uy(t,r){return np.apply(this,arguments)}function np(){return np=(0,Se.Z)(te().mark(function t(r,e){var i;return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=vt(r),l.abrupt("return",sd(i.localStore,e).then(function(f){return tc(i,f)}));case 2:case"end":return l.stop()}},t)})),np.apply(this,arguments)}function rp(t,r,e,i){return Ko.apply(this,arguments)}function Ko(){return Ko=(0,Se.Z)(te().mark(function t(r,e,i,u){var l,f;return te().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return l=vt(r),b.next=3,function(Z,K){var re=vt(Z),de=vt(re.$s);return re.persistence.runTransaction("Lookup mutation documents","readonly",function(Be){return de.ln(Be,K).next(function(we){return we?re.ai.qs(Be,we):Ut.resolve(null)})})}(l.localStore,e);case 3:if(null===(f=b.sent)){b.next=15;break}if("pending"!==i){b.next=10;break}return b.next=8,Sf(l.remoteStore);case 8:b.next=11;break;case 10:"acknowledged"===i||"rejected"===i?(wh(l,e,u||null),yd(l,e),K=e,vt(vt(l.localStore).$s).dn(K)):pe();case 11:return b.next=13,tc(l,f);case 13:b.next=16;break;case 15:D("SyncEngine","Cannot apply mutation batch with id: "+e);case 16:case"end":return b.stop()}var K},t)})),Ko.apply(this,arguments)}function Eh(t,r){return Ws.apply(this,arguments)}function Ws(){return Ws=(0,Se.Z)(te().mark(function t(r,e){var i,u,l,f,v,Z,K;return te().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(Sc(i=vt(r)),Ac(i),!0!==e||!0===i.ca){de.next=13;break}return u=i.sharedClientState.getAllActiveQueryTargets(),de.next=5,Dc(i,u.toArray());case 5:return l=de.sent,i.ca=!0,de.next=9,kh(i.remoteStore,!0);case 9:f=(0,Ce.Z)(l);try{for(f.s();!(v=f.n()).done;)fh(i.remoteStore,v.value)}catch(Be){f.e(Be)}finally{f.f()}de.next=25;break;case 13:if(!1!==e||!1===i.ca){de.next=25;break}return Z=[],K=Promise.resolve(),i.ea.forEach(function(Be,we){i.sharedClientState.isLocalQueryTarget(we)?Z.push(we):K=K.then(function(){return Mf(i,we),Cf(i.localStore,we,!0)}),hh(i.remoteStore,we)}),de.next=19,K;case 19:return de.next=21,Dc(i,Z);case 21:return function(Be){var we=vt(Be);we.ia.forEach(function(st,pt){hh(we.remoteStore,pt)}),we.ra.bi(),we.ia=new Map,we.sa=new Pa(hn.comparator)}(i),i.ca=!1,de.next=25,kh(i.remoteStore,!1);case 25:case"end":return de.stop()}},t)})),Ws.apply(this,arguments)}function Dc(t,r,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,Se.Z)(te().mark(function t(r,e,i){var u,l,f,v,b,Z,K,re,de,Be,st,pt,Nt;return te().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:u=vt(r),l=[],f=[],v=(0,Ce.Z)(e),Yt.prev=2,v.s();case 4:if((b=v.n()).done){Yt.next=45;break}if(K=void 0,!(re=u.ea.get(Z=b.value))||0===re.length){Yt.next=34;break}return Yt.next=11,Jc(u.localStore,Is(re[0]));case 11:K=Yt.sent,de=(0,Ce.Z)(re),Yt.prev=13,de.s();case 15:if((Be=de.n()).done){Yt.next=24;break}return st=u.ta.get(Be.value),Yt.next=20,Zy(u,st);case 20:(pt=Yt.sent).snapshot&&f.push(pt.snapshot);case 22:Yt.next=15;break;case 24:Yt.next=29;break;case 26:Yt.prev=26,Yt.t0=Yt.catch(13),de.e(Yt.t0);case 29:return Yt.prev=29,de.f(),Yt.finish(29);case 32:Yt.next=42;break;case 34:return Yt.next=36,Xc(u.localStore,Z);case 36:return Nt=Yt.sent,Yt.next=39,Jc(u.localStore,Nt);case 39:return K=Yt.sent,Yt.next=42,$v(u,Io(Nt),Z,!1);case 42:l.push(K);case 43:Yt.next=4;break;case 45:Yt.next=50;break;case 47:Yt.prev=47,Yt.t1=Yt.catch(2),v.e(Yt.t1);case 50:return Yt.prev=50,v.f(),Yt.finish(50);case 53:return Yt.abrupt("return",(u.Zu.Ko(f),l));case 54:case"end":return Yt.stop()}},t,null,[[2,47,50,53],[13,26,29,32]])})),Lf.apply(this,arguments)}function Io(t){return Zc(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ip(t){var r=vt(t);return vt(vt(r.localStore).persistence).Os()}function Ff(t,r,e,i){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,Se.Z)(te().mark(function t(r,e,i,u){var l,f,v,b;return te().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!(l=vt(r)).ca){K.next=3;break}return K.abrupt("return",void D("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((f=l.ea.get(e))&&f.length>0)){K.next=20;break}K.t0=i,K.next="current"===K.t0||"not-current"===K.t0?8:"rejected"===K.t0?15:19;break;case 8:return K.next=10,sd(l.localStore,Kf(f[0]));case 10:return v=K.sent,b=$a.createSynthesizedRemoteEventForCurrentChange(e,"current"===i),K.next=14,tc(l,v,b);case 14:return K.abrupt("break",20);case 15:return K.next=17,Cf(l.localStore,e,!0);case 17:return Mf(l,e,u),K.abrupt("break",20);case 19:pe();case 20:case"end":return K.stop()}},t)})),Cc.apply(this,arguments)}function Zf(t,r,e){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,Se.Z)(te().mark(function t(r,e,i){var u,l,f,v,b,Z,K,re,de;return te().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(!(u=Sc(r)).ca){we.next=45;break}l=(0,Ce.Z)(e),we.prev=3,l.s();case 5:if((f=l.n()).done){we.next=21;break}if(!u.ea.has(v=f.value)){we.next=10;break}return D("SyncEngine","Adding an already active target "+v),we.abrupt("continue",19);case 10:return we.next=12,Xc(u.localStore,v);case 12:return b=we.sent,we.next=15,Jc(u.localStore,b);case 15:return Z=we.sent,we.next=18,$v(u,Io(b),Z.targetId,!1);case 18:fh(u.remoteStore,Z);case 19:we.next=5;break;case 21:we.next=26;break;case 23:we.prev=23,we.t0=we.catch(3),l.e(we.t0);case 26:return we.prev=26,l.f(),we.finish(26);case 29:K=(0,Ce.Z)(i),we.prev=30,de=te().mark(function st(){var pt;return te().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:if(sn.t0=u.ea.has(pt=re.value),!sn.t0){sn.next=5;break}return sn.next=5,Cf(u.localStore,pt,!1).then(function(){hh(u.remoteStore,pt),Mf(u,pt)}).catch(Qc);case 5:case"end":return sn.stop()}},st)}),K.s();case 33:if((re=K.n()).done){we.next=37;break}return we.delegateYield(de(),"t1",35);case 35:we.next=33;break;case 37:we.next=42;break;case 39:we.prev=39,we.t2=we.catch(30),K.e(we.t2);case 42:return we.prev=42,K.f(),we.finish(42);case 45:case"end":return we.stop()}},t,null,[[3,23,26,29],[30,39,42,45]])})),Ic.apply(this,arguments)}function Sc(t){var r=vt(t);return r.remoteStore.remoteSyncer.applyRemoteEvent=Jv.bind(null,r),r.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nf.bind(null,r),r.remoteStore.remoteSyncer.rejectListen=pl.bind(null,r),r.Zu.Ko=Iy.bind(null,r.eventManager),r.Zu.la=Sy.bind(null,r.eventManager),r}function Ac(t){var r=vt(t);return r.remoteStore.remoteSyncer.applySuccessfulWrite=hk.bind(null,r),r.remoteStore.remoteSyncer.rejectFailedWrite=jg.bind(null,r),r}function Uf(t,r,e){var u,i=vt(t);(u=(0,Se.Z)(te().mark(function l(f,v,b){var Z,K,re,de,Be;return te().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return st.prev=0,st.next=3,v.getMetadata();case 3:return Z=st.sent,st.next=6,function(pt,Nt){var sn=vt(pt),Yt=ss(Nt.createTime);return sn.persistence.runTransaction("hasNewerBundle","readonly",function(dn){return sn.ds.getBundleMetadata(dn,Nt.id)}).then(function(dn){return!!dn&&dn.createTime.compareTo(Yt)>=0})}(f.localStore,Z);case 6:if(!st.sent){st.next=11;break}return st.next=9,v.close();case 9:return b._completeWith({taskState:"Success",documentsLoaded:(pt=Z).totalDocuments,bytesLoaded:pt.totalBytes,totalDocuments:pt.totalDocuments,totalBytes:pt.totalBytes}),st.abrupt("return",Promise.resolve(new Set));case 11:return b._updateProgress(Wv(Z)),K=new Ry(Z,f.localStore,v.M),st.next=15,v.fa();case 15:re=st.sent;case 16:if(!re){st.next=26;break}return st.next=19,K.Nu(re);case 19:return(de=st.sent)&&b._updateProgress(de),st.next=23,v.fa();case 23:re=st.sent;case 24:st.next=16;break;case 26:return st.next=28,K.complete();case 28:return Be=st.sent,st.next=31,tc(f,Be.Ou,void 0);case 31:return st.next=33,function(pt,Nt){var sn=vt(pt);return sn.persistence.runTransaction("Save bundle","readwrite",function(Yt){return sn.ds.saveBundleMetadata(Yt,Nt)})}(f.localStore,Z);case 33:return b._completeWith(Be.progress),st.abrupt("return",Promise.resolve(Be.Mu));case 37:return st.prev=37,st.t0=st.catch(0),st.abrupt("return",(J("SyncEngine","Loading bundle failed with ".concat(st.t0)),b._failWith(st.t0),Promise.resolve(new Set)));case 40:case"end":return st.stop()}var pt},l,null,[[0,37]])})),function(l,f,v){return u.apply(this,arguments)})(i,r,e).then(function(u){i.sharedClientState.notifyBundleLoaded(u)})}var af=function(){function t(){(0,z.Z)(this,t),this.synchronizeTabs=!1}return(0,H.Z)(t,[{key:"initialize",value:(r=(0,Se.Z)(te().mark(function i(u){return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.M=ch(u.databaseInfo.databaseId),this.sharedClientState=this.da(u),this.persistence=this._a(u),f.next=5,this.persistence.start();case 5:this.gcScheduler=this.wa(u),this.localStore=this.ma(u);case 7:case"end":return f.stop()}},i,this)})),function e(i){return r.apply(this,arguments)})},{key:"wa",value:function(e){return null}},{key:"ma",value:function(e){return bv(this.persistence,new wv,e.initialUser,this.M)}},{key:"_a",value:function(e){return new mg(my.Wi,this.M)}},{key:"da",value:function(e){return new yy}},{key:"terminate",value:function(){var r=(0,Se.Z)(te().mark(function i(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),l.next=3,this.sharedClientState.shutdown();case 3:return l.next=5,this.persistence.shutdown();case 5:case"end":return l.stop()}},i,this)}));return function e(){return r.apply(this,arguments)}}()}]),t;var r}(),sf=function(t){(0,Fe.Z)(e,t);var i,r=(0,Pe.Z)(e);function e(i,u,l){var f;return(0,z.Z)(this,e),(f=r.call(this)).ga=i,f.cacheSizeBytes=u,f.forceOwnership=l,f.synchronizeTabs=!1,f}return(0,H.Z)(e,[{key:"initialize",value:(i=(0,Se.Z)(te().mark(function l(f){var v=this;return te().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,be.Z)((0,Ge.Z)(e.prototype),"initialize",this).call(this,f);case 2:return Z.next=4,this.ga.initialize(this,f);case 4:return Z.next=6,Ac(this.ga.syncEngine);case 6:return Z.next=8,Sf(this.ga.remoteStore);case 8:return Z.next=10,this.persistence.Is(function(){return v.gcScheduler&&!v.gcScheduler.started&&v.gcScheduler.start(v.localStore),Promise.resolve()});case 10:case"end":return Z.stop()}},l,this)})),function u(l){return i.apply(this,arguments)})},{key:"ma",value:function(u){return bv(this.persistence,new wv,u.initialUser,this.M)}},{key:"wa",value:function(u){return new hg(this.persistence.referenceDelegate.garbageCollector,u.asyncQueue)}},{key:"_a",value:function(u){var l=Pl(u.databaseInfo.databaseId,u.databaseInfo.persistenceKey),f=void 0!==this.cacheSizeBytes?zs.withCacheSize(this.cacheSizeBytes):zs.DEFAULT;return new ak(this.synchronizeTabs,l,u.clientId,f,u.asyncQueue,bg(),lh(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"da",value:function(u){return new yy}}]),e}(af),Gg=function(t){(0,Fe.Z)(e,t);var i,r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this,i,u,!1)).ga=i,l.cacheSizeBytes=u,l.synchronizeTabs=!0,l}return(0,H.Z)(e,[{key:"initialize",value:(i=(0,Se.Z)(te().mark(function l(f){var b,v=this;return te().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,be.Z)((0,Ge.Z)(e.prototype),"initialize",this).call(this,f);case 2:if(b=this.ga.syncEngine,K.t0=this.sharedClientState instanceof ld,!K.t0){K.next=8;break}return this.sharedClientState.syncEngine={kr:rp.bind(null,b),Mr:Ff.bind(null,b),Or:Zf.bind(null,b),Os:ip.bind(null,b),Nr:Uy.bind(null,b)},K.next=8,this.sharedClientState.start();case 8:return K.next=10,this.persistence.Is(function(){var re=(0,Se.Z)(te().mark(function de(Be){return te().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return st.next=2,Eh(v.ga.syncEngine,Be);case 2:v.gcScheduler&&(Be&&!v.gcScheduler.started?v.gcScheduler.start(v.localStore):Be||v.gcScheduler.stop());case 3:case"end":return st.stop()}},de)}));return function(de){return re.apply(this,arguments)}}());case 10:case"end":return K.stop()}},l,this)})),function u(l){return i.apply(this,arguments)})},{key:"da",value:function(u){var l=bg();if(!ld.vt(l))throw new Et(Ke.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var f=Pl(u.databaseInfo.databaseId,u.databaseInfo.persistenceKey);return new ld(l,u.asyncQueue,f,u.clientId,u.initialUser)}}]),e}(sf),_d=function(){function t(){(0,z.Z)(this,t)}return(0,H.Z)(t,[{key:"initialize",value:(r=(0,Se.Z)(te().mark(function i(u,l){var f=this;return te().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(b.t0=this.localStore,b.t0){b.next=12;break}return this.localStore=u.localStore,this.sharedClientState=u.sharedClientState,this.datastore=this.createDatastore(l),this.remoteStore=this.createRemoteStore(l),this.eventManager=this.createEventManager(l),this.syncEngine=this.createSyncEngine(l,!u.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(Z){return Oy(f.syncEngine,Z,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Fy.bind(null,this.syncEngine),b.next=12,kh(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return b.stop()}},i,this)})),function e(i,u){return r.apply(this,arguments)})},{key:"createEventManager",value:function(e){return new Lg}},{key:"createDatastore",value:function(e){var i=ch(e.databaseInfo.databaseId),u=new wy(e.databaseInfo);return new Cg(e.authCredentials,e.appCheckCredentials,u,i)}},{key:"createRemoteStore",value:function(e){var u,l,f,v,b,i=this;return u=this.localStore,l=this.datastore,f=e.asyncQueue,v=function(K){return Oy(i.syncEngine,K,0)},b=cd.vt()?new cd:new ky,new Ml(u,l,f,v,b)}},{key:"createSyncEngine",value:function(e,i){return K=i,re=new Bg(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions),K&&(re.ca=!0),re;var K,re}},{key:"terminate",value:function(){return(e=(0,Se.Z)(te().mark(function i(u){var l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=vt(u),D("RemoteStore","RemoteStore shutting down."),l.lu.add(5),v.next=5,If(l);case 5:l.du.shutdown(),l._u.set("Unknown");case 7:case"end":return v.stop()}},i)})),function(i){return e.apply(this,arguments)})(this.remoteStore);var e}}]),t;var r}();function ap(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,e=0;return{read:function(){return(0,Se.Z)(te().mark(function u(){var l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(e<t.byteLength)){v.next=3;break}return l={value:t.slice(e,e+r),done:!1},v.abrupt("return",(e+=r,l));case 3:return v.abrupt("return",{done:!0});case 4:case"end":return v.stop()}},u)}))()},cancel:function(){return(0,Se.Z)(te().mark(function u(){return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:case"end":return f.stop()}},u)}))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var bh=function(){function t(r){(0,z.Z)(this,t),this.observer=r,this.muted=!1}return(0,H.Z)(t,[{key:"next",value:function(e){this.observer.next&&this.ya(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"pa",value:function(){this.muted=!0}},{key:"ya",value:function(e,i){var u=this;this.muted||setTimeout(function(){u.muted||e(i)},0)}}]),t}(),zg=function(){function t(r,e){var i=this;(0,z.Z)(this,t),this.Ia=r,this.M=e,this.metadata=new Vn,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(function(u){u&&u.Cu()?i.metadata.resolve(u.payload.metadata):i.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==u?void 0:u.payload))))},function(u){return i.metadata.reject(u)})}return(0,H.Z)(t,[{key:"close",value:function(){return this.Ia.cancel()}},{key:"getMetadata",value:(r=(0,Se.Z)(te().mark(function i(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.metadata.promise);case 1:case"end":return l.stop()}},i,this)})),function e(){return r.apply(this,arguments)})},{key:"fa",value:function(){var r=(0,Se.Z)(te().mark(function i(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.getMetadata();case 2:return l.abrupt("return",this.Ea());case 3:case"end":return l.stop()}},i,this)}));return function e(){return r.apply(this,arguments)}}()},{key:"Ea",value:function(){var r=(0,Se.Z)(te().mark(function i(){var u,l,f;return te().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.Aa();case 2:if(null!==(u=Z.sent)){Z.next=5;break}return Z.abrupt("return",null);case 5:return l=this.Ta.decode(u),f=Number(l),isNaN(f)&&this.Ra("length string (".concat(l,") is not valid number")),Z.next=9,this.ba(f);case 9:return Z.abrupt("return",new Ay(JSON.parse(Z.sent),u.length+f));case 11:case"end":return Z.stop()}},i,this)}));return function e(){return r.apply(this,arguments)}}()},{key:"Pa",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"Aa",value:function(){var r=(0,Se.Z)(te().mark(function i(){var u,l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(this.Pa()<0)){v.next=7;break}return v.next=3,this.Va();case 3:if(!v.sent){v.next=5;break}return v.abrupt("break",7);case 5:v.next=0;break;case 7:if(0!==this.buffer.length){v.next=9;break}return v.abrupt("return",null);case 9:return(u=this.Pa())<0&&this.Ra("Reached the end of bundle when a length string is expected."),l=this.buffer.slice(0,u),v.abrupt("return",(this.buffer=this.buffer.slice(u),l));case 13:case"end":return v.stop()}},i,this)}));return function e(){return r.apply(this,arguments)}}()},{key:"ba",value:function(){var r=(0,Se.Z)(te().mark(function i(u){var l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(this.buffer.length<u)){v.next=8;break}return v.next=3,this.Va();case 3:if(v.t0=v.sent,!v.t0){v.next=6;break}this.Ra("Reached the end of bundle when more is expected.");case 6:v.next=0;break;case 8:return l=this.Ta.decode(this.buffer.slice(0,u)),v.abrupt("return",(this.buffer=this.buffer.slice(u),l));case 10:case"end":return v.stop()}},i,this)}));return function e(i){return r.apply(this,arguments)}}()},{key:"Ra",value:function(e){throw this.Ia.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Va",value:function(){var r=(0,Se.Z)(te().mark(function i(){var u,l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.Ia.read();case 2:return(u=v.sent).done||((l=new Uint8Array(this.buffer.length+u.value.length)).set(this.buffer),l.set(u.value,this.buffer.length),this.buffer=l),v.abrupt("return",u.done);case 5:case"end":return v.stop()}},i,this)}));return function e(){return r.apply(this,arguments)}}()}]),t;var r}(),Wg=function(){function t(r){(0,z.Z)(this,t),this.datastore=r,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return(0,H.Z)(t,[{key:"lookup",value:(r=(0,Se.Z)(te().mark(function i(u){var f,l=this;return te().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){b.next=2;break}throw new Et(Ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return b.next=4,function(){var Z=(0,Se.Z)(te().mark(function K(re,de){var Be,we,st,pt,Nt,sn;return te().wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:return Be=vt(re),we=vl(Be.M)+"/documents",st={documents:de.map(function(jn){return pc(Be.M,jn)})},dn.next=5,Be.co("BatchGetDocuments",we,st);case 5:return pt=dn.sent,Nt=new Map,pt.forEach(function(jn){var lr=Xd(Be.M,jn);Nt.set(lr.key.toString(),lr)}),sn=[],dn.abrupt("return",(de.forEach(function(jn){var lr=Nt.get(jn.toString());Ue(!!lr),sn.push(lr)}),sn));case 10:case"end":return dn.stop()}},K)}));return function(K,re){return Z.apply(this,arguments)}}()(this.datastore,u);case 4:return b.abrupt("return",((f=b.sent).forEach(function(Z){return l.recordVersion(Z)}),f));case 6:case"end":return b.stop()}},i,this)})),function e(i){return r.apply(this,arguments)})},{key:"set",value:function(e,i){this.write(i.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,i){try{this.write(i.toMutation(e,this.preconditionForUpdate(e)))}catch(u){this.lastWriteError=u}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new fl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var r=(0,Se.Z)(te().mark(function i(){var l,u=this;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){v.next=2;break}throw this.lastWriteError;case 2:return l=this.readVersions,this.mutations.forEach(function(b){l.delete(b.key.toString())}),l.forEach(function(b,Z){var K=hn.fromPath(Z);u.mutations.push(new Ho(K,u.precondition(K)))}),v.next=7,function(){var b=(0,Se.Z)(te().mark(function Z(K,re){var de,Be,we;return te().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return de=vt(K),Be=vl(de.M)+"/documents",we={writes:re.map(function(Nt){return Go(de.M,Nt)})},pt.next=3,de.ro("Commit",Be,we);case 3:case"end":return pt.stop()}},Z)}));return function(Z,K){return b.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return v.stop()}},i,this)}));return function e(){return r.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var i;if(e.isFoundDocument())i=e.version;else{if(!e.isNoDocument())throw pe();i=tr.min()}var u=this.readVersions.get(e.key.toString());if(u){if(!i.isEqual(u))throw new Et(Ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),i)}},{key:"precondition",value:function(e){var i=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&i?Zn.updateTime(i):Zn.none()}},{key:"preconditionForUpdate",value:function(e){var i=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&i){if(i.isEqual(tr.min()))throw new Et(Ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zn.updateTime(i)}return Zn.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),t;var r}(),Kg=function(){function t(r,e,i,u){(0,z.Z)(this,t),this.asyncQueue=r,this.datastore=e,this.updateFunction=i,this.deferred=u,this.va=5,this.So=new fd(this.asyncQueue,"transaction_retry")}return(0,H.Z)(t,[{key:"run",value:function(){this.va-=1,this.Sa()}},{key:"Sa",value:function(){var e=this;this.So.Io((0,Se.Z)(te().mark(function i(){var u,l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:u=new Wg(e.datastore),(l=e.Da(u))&&l.then(function(b){e.asyncQueue.enqueueAndForget(function(){return u.commit().then(function(){e.deferred.resolve(b)}).catch(function(Z){e.Ca(Z)})})}).catch(function(b){e.Ca(b)});case 2:case"end":return v.stop()}},i)})))}},{key:"Da",value:function(e){try{var i=this.updateFunction(e);return!hs(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(u){return this.deferred.reject(u),null}}},{key:"Ca",value:function(e){var i=this;this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(function(){return i.Sa(),Promise.resolve()})):this.deferred.reject(e)}},{key:"xa",value:function(e){if("FirebaseError"===e.name){var i=e.code;return"aborted"===i||"failed-precondition"===i||!Cl(i)}return!1}}]),t}(),$g=function(){function t(r,e,i,u){var l=this;(0,z.Z)(this,t),this.authCredentials=r,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=u,this.user=Ei.UNAUTHENTICATED,this.clientId=xl.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(i,function(){var f=(0,Se.Z)(te().mark(function v(b){return te().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return D("FirestoreClient","Received user=",b.uid),K.next=3,l.authCredentialListener(b);case 3:l.user=b;case 4:case"end":return K.stop()}},v)}));return function(v){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(i,function(f){return D("FirestoreClient","Received new app check token=",f),l.appCheckCredentialListener(f,l.user)})}return(0,H.Z)(t,[{key:"getConfiguration",value:(r=(0,Se.Z)(te().mark(function i(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return l.stop()}},i,this)})),function e(){return r.apply(this,arguments)})},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Et(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var i=new Vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(te().mark(function u(){var l;return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(v.prev=0,v.t0=e.onlineComponents,!v.t0){v.next=5;break}return v.next=5,e.onlineComponents.terminate();case 5:if(v.t1=e.offlineComponents,!v.t1){v.next=9;break}return v.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),i.resolve(),v.next=18;break;case 14:v.prev=14,v.t2=v.catch(0),l=bc(v.t2,"Failed to shutdown persistence"),i.reject(l);case 18:case"end":return v.stop()}},u,null,[[0,14]])}))),i.promise}}]),t;var r}();function sp(t,r){return up.apply(this,arguments)}function up(){return up=(0,Se.Z)(te().mark(function t(r,e){var i,u;return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider"),f.next=3,r.getConfiguration();case 3:return i=f.sent,f.next=6,e.initialize(i);case 6:u=i.initialUser,r.setCredentialChangeListener(function(){var v=(0,Se.Z)(te().mark(function b(Z){return te().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(re.t0=u.isEqual(Z),re.t0){re.next=5;break}return re.next=4,id(e.localStore,Z);case 4:u=Z;case 5:case"end":return re.stop()}},b)}));return function(b){return v.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(function(){return r.terminate()}),r.offlineComponents=e;case 8:case"end":return f.stop()}},t)})),up.apply(this,arguments)}function op(t,r){return lp.apply(this,arguments)}function lp(){return lp=(0,Se.Z)(te().mark(function t(r,e){var i,u;return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r.asyncQueue.verifyOperationInProgress(),f.next=3,wd(r);case 3:return i=f.sent,D("FirestoreClient","Initializing OnlineComponentProvider"),f.next=7,r.getConfiguration();case 7:return u=f.sent,f.next=10,e.initialize(i,u);case 10:r.setCredentialChangeListener(function(v){return Rf(e.remoteStore,v)}),r.setAppCheckTokenChangeListener(function(v,b){return Rf(e.remoteStore,b)}),r.onlineComponents=e;case 13:case"end":return f.stop()}},t)})),lp.apply(this,arguments)}function wd(t){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,Se.Z)(te().mark(function t(r){return te().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.t0=r.offlineComponents,i.t0){i.next=5;break}return D("FirestoreClient","Using default OfflineComponentProvider"),i.next=5,sp(r,new af);case 5:return i.abrupt("return",r.offlineComponents);case 6:case"end":return i.stop()}},t)})),Ed.apply(this,arguments)}function bd(t){return cp.apply(this,arguments)}function cp(){return cp=(0,Se.Z)(te().mark(function t(r){return te().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.t0=r.onlineComponents,i.t0){i.next=5;break}return D("FirestoreClient","Using default OnlineComponentProvider"),i.next=5,op(r,new _d);case 5:return i.abrupt("return",r.onlineComponents);case 6:case"end":return i.stop()}},t)})),cp.apply(this,arguments)}function fp(t){return wd(t).then(function(r){return r.persistence})}function hp(t){return wd(t).then(function(r){return r.localStore})}function dp(t){return bd(t).then(function(r){return r.remoteStore})}function vp(t){return bd(t).then(function(r){return r.syncEngine})}function Bf(t){return qg.apply(this,arguments)}function qg(){return qg=(0,Se.Z)(te().mark(function t(r){var e,i;return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,bd(r);case 2:return l.abrupt("return",((i=(e=l.sent).eventManager).onListen=ck.bind(null,e.syncEngine),i.onUnlisten=fk.bind(null,e.syncEngine),i));case 5:case"end":return l.stop()}},t)})),qg.apply(this,arguments)}function Yg(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Vn;return t.asyncQueue.enqueueAndForget((0,Se.Z)(te().mark(function u(){return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.t0=function(v,b,Z,K,re){var de=new bh({next:function(st){b.enqueueAndForget(function(){return Tc(v,Be)});var pt=st.docs.has(Z);!pt&&st.fromCache?re.reject(new Et(Ke.UNAVAILABLE,"Failed to get document because the client is offline.")):pt&&st.fromCache&&K&&"server"===K.source?re.reject(new Et(Ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):re.resolve(st)},error:function(st){return re.reject(st)}}),Be=new Co(bl(Z.path),de,{includeMetadataChanges:!0,Du:!0});return jv(v,Be)},f.next=3,Bf(t);case 3:return f.t1=f.sent,f.t2=t.asyncQueue,f.t3=r,f.t4=e,f.t5=i,f.abrupt("return",(0,f.t0)(f.t1,f.t2,f.t3,f.t4,f.t5));case 9:case"end":return f.stop()}},u)}))),i.promise}function Vy(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Vn;return t.asyncQueue.enqueueAndForget((0,Se.Z)(te().mark(function u(){return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.t0=function(v,b,Z,K,re){var de=new bh({next:function(st){b.enqueueAndForget(function(){return Tc(v,Be)}),st.fromCache&&"server"===K.source?re.reject(new Et(Ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):re.resolve(st)},error:function(st){return re.reject(st)}}),Be=new Co(Z,de,{includeMetadataChanges:!0,Du:!0});return jv(v,Be)},f.next=3,Bf(t);case 3:return f.t1=f.sent,f.t2=t.asyncQueue,f.t3=r,f.t4=e,f.t5=i,f.abrupt("return",(0,f.t0)(f.t1,f.t2,f.t3,f.t4,f.t5));case 9:case"end":return f.stop()}},u)}))),i.promise}var Jg=new Map;function Rc(t,r,e){if(!e)throw new Et(Ke.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(r,"."))}function Xg(t,r,e,i){if(!0===r&&!0===i)throw new Et(Ke.INVALID_ARGUMENT,"".concat(t," and ").concat(e," cannot be used together."))}function mp(t){if(!hn.isDocumentKey(t))throw new Et(Ke.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function em(t){if(hn.isDocumentKey(t))throw new Et(Ke.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function Th(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var r=(e=t).constructor?e.constructor.name:null;return r?"a custom ".concat(r," object"):"an object"}var e;return"function"==typeof t?"a function":pe()}function $r(t,r){if("_delegate"in t&&(t=t._delegate),!(t instanceof r)){if(r.name===t.constructor.name)throw new Et(Ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var e=Th(t);throw new Et(Ke.INVALID_ARGUMENT,"Expected type '".concat(r.name,"', but it was: ").concat(e))}return t}function tm(t,r){if(r<=0)throw new Et(Ke.INVALID_ARGUMENT,"Function ".concat(t,"() requires a positive number, but it was: ").concat(r,"."))}var yp=function(){function t(r){var e;if((0,z.Z)(this,t),void 0===r.host){if(void 0!==r.ssl)throw new Et(Ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=r.host,this.ssl=null===(e=r.ssl)||void 0===e||e;if(this.credentials=r.credentials,this.ignoreUndefinedProperties=!!r.ignoreUndefinedProperties,void 0===r.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==r.cacheSizeBytes&&r.cacheSizeBytes<1048576)throw new Et(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=r.cacheSizeBytes}this.experimentalForceLongPolling=!!r.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!r.experimentalAutoDetectLongPolling,this.useFetchStreams=!!r.useFetchStreams,Xg("experimentalForceLongPolling",r.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",r.experimentalAutoDetectLongPolling)}return(0,H.Z)(t,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),t}(),Dh=function(){function t(r,e,i){(0,z.Z)(this,t),this._authCredentials=e,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yp({}),this._settingsFrozen=!1,r instanceof bs?this._databaseId=r:(this._app=r,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Et(Ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bs(u.options.projectId)}(r))}return(0,H.Z)(t,[{key:"app",get:function(){if(!this._app)throw new Et(Ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Et(Ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yp(e),void 0!==e.credentials&&(this._authCredentials=function(i){if(!i)return new xi;switch(i.type){case"gapi":var u=i.client;return Ue(!("object"!=typeof u||null===u||!u.auth||!u.auth.getAuthHeaderValueForFirstParty)),new vu(u,i.sessionIndex||"0",i.iamToken||null);case"provider":return i.client;default:throw new Et(Ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return(i=Jg.get(this))&&(D("ComponentProvider","Removing Datastore"),Jg.delete(this),i.terminate()),Promise.resolve();var i}}]),t}();function jy(t,r,e){var u,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=(t=$r(t,Dh))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==r&&J("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},l),{host:"".concat(r,":").concat(e),ssl:!1})),i.mockUserToken){var f,v;if("string"==typeof i.mockUserToken)f=i.mockUserToken,v=Ei.MOCK_USER;else{f=(0,on.Sg)(i.mockUserToken,null===(u=t._app)||void 0===u?void 0:u.options.projectId);var b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new Et(Ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Ei(b)}t._authCredentials=new ea(new sr(f,v))}}var Na=function(){function t(r,e,i){(0,z.Z)(this,t),this.converter=e,this._key=i,this.type="document",this.firestore=r}return(0,H.Z)(t,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Pc(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._key)}}]),t}(),So=function(){function t(r,e,i){(0,z.Z)(this,t),this.converter=e,this._query=i,this.type="query",this.firestore=r}return(0,H.Z)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._query)}}]),t}(),Pc=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l){var f;return(0,z.Z)(this,e),(f=r.call(this,i,u,bl(l)))._path=l,f.type="collection",f}return(0,H.Z)(e,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var u=this._path.popLast();return u.isEmpty()?null:new Na(this.firestore,null,new hn(u))}},{key:"withConverter",value:function(u){return new e(this.firestore,u,this._path)}}]),e}(So);function kp(t,r){for(var e=arguments.length,i=new Array(e>2?e-2:0),u=2;u<e;u++)i[u-2]=arguments[u];if(t=(0,on.m9)(t),Rc("collection","path",r),t instanceof Dh){var l=Fr.fromString.apply(Fr,[r].concat(i));return em(l),new Pc(t,null,l)}if(!(t instanceof Na||t instanceof Pc))throw new Et(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var f=t._path.child(Fr.fromString.apply(Fr,[r].concat(i)));return em(f),new Pc(t.firestore,null,f)}function Ch(t,r){for(var e=arguments.length,i=new Array(e>2?e-2:0),u=2;u<e;u++)i[u-2]=arguments[u];if(t=(0,on.m9)(t),1===arguments.length&&(r=xl.R()),Rc("doc","path",r),t instanceof Dh){var l=Fr.fromString.apply(Fr,[r].concat(i));return mp(l),new Na(t,null,new hn(l))}if(!(t instanceof Na||t instanceof Pc))throw new Et(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var f=t._path.child(Fr.fromString.apply(Fr,[r].concat(i)));return mp(f),new Na(t.firestore,t instanceof Pc?t.converter:null,new hn(f))}function _p(t,r){return t=(0,on.m9)(t),r=(0,on.m9)(r),(t instanceof Na||t instanceof Pc)&&(r instanceof Na||r instanceof Pc)&&t.firestore===r.firestore&&t.path===r.path&&t.converter===r.converter}function Td(t,r){return t=(0,on.m9)(t),r=(0,on.m9)(r),t instanceof So&&r instanceof So&&t.firestore===r.firestore&&ll(t._query,r._query)&&t.converter===r.converter}var gk=function(){function t(){var r=this;(0,z.Z)(this,t),this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new fd(this,"async_queue_retry"),this.Ua=function(){var i=lh();i&&D("AsyncQueue","Visibility state changed to "+i.visibilityState),r.So.Eo()};var e=lh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}return(0,H.Z)(t,[{key:"isShuttingDown",get:function(){return this.Ma}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.qa(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;var i=lh();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Ua)}}},{key:"enqueue",value:function(e){var i=this;if(this.qa(),this.Ma)return new Promise(function(){});var u=new Vn;return this.Ga(function(){return i.Ma&&i.Ba?Promise.resolve():(e().then(u.resolve,u.reject),u.promise)}).then(function(){return u.promise})}},{key:"enqueueRetryable",value:function(e){var i=this;this.enqueueAndForget(function(){return i.ka.push(e),i.Ka()})}},{key:"Ka",value:(r=(0,Se.Z)(te().mark(function i(){var u=this;return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(0===this.ka.length){f.next=14;break}return f.prev=1,f.next=4,this.ka[0]();case 4:this.ka.shift(),this.So.reset(),f.next=13;break;case 8:if(f.prev=8,f.t0=f.catch(1),Gc(f.t0)){f.next=12;break}throw f.t0;case 12:D("AsyncQueue","Operation failed with retryable error: "+f.t0);case 13:this.ka.length>0&&this.So.Io(function(){return u.Ka()});case 14:case"end":return f.stop()}},i,this,[[1,8]])})),function e(){return r.apply(this,arguments)})},{key:"Ga",value:function(e){var i=this,u=this.Na.then(function(){return i.$a=!0,e().catch(function(l){var v,b;throw i.Fa=l,i.$a=!1,N("INTERNAL UNHANDLED ERROR: ",(b=(v=l).message||"",v.stack&&(b=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),b)),l}).then(function(l){return i.$a=!1,l})});return this.Na=u,u}},{key:"enqueueAfterDelay",value:function(e,i,u){var l=this;this.qa(),this.La.indexOf(e)>-1&&(i=0);var f=Cy.createAndSchedule(this,e,i,u,function(v){return l.Qa(v)});return this.Oa.push(f),f}},{key:"qa",value:function(){this.Fa&&pe()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ja",value:function(){var r=(0,Se.Z)(te().mark(function i(){var u;return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return u=this.Na,f.next=3,u;case 3:if(u!==this.Na){f.next=0;break}case 4:case"end":return f.stop()}},i,this)}));return function e(){return r.apply(this,arguments)}}()},{key:"Wa",value:function(e){var u,i=(0,Ce.Z)(this.Oa);try{for(i.s();!(u=i.n()).done;)if(u.value.timerId===e)return!0}catch(f){i.e(f)}finally{i.f()}return!1}},{key:"za",value:function(e){var i=this;return this.ja().then(function(){i.Oa.sort(function(v,b){return v.targetTimeMs-b.targetTimeMs});var l,u=(0,Ce.Z)(i.Oa);try{for(u.s();!(l=u.n()).done;){var f=l.value;if(f.skipDelay(),"all"!==e&&f.timerId===e)break}}catch(v){u.e(v)}finally{u.f()}return i.ja()})}},{key:"Ha",value:function(e){this.La.push(e)}},{key:"Qa",value:function(e){var i=this.Oa.indexOf(e);this.Oa.splice(i,1)}}]),t;var r}();function nm(t){return function(r,e){if("object"!=typeof r||null===r)return!1;var l,i=r,u=(0,Ce.Z)(["next","error","complete"]);try{for(u.s();!(l=u.n()).done;){var f=l.value;if(f in i&&"function"==typeof i[f])return!0}}catch(v){u.e(v)}finally{u.f()}return!1}(t)}var mk=function(){function t(){(0,z.Z)(this,t),this._progressObserver={},this._taskCompletionResolver=new Vn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return(0,H.Z)(t,[{key:"onProgress",value:function(e,i,u){this._progressObserver={next:e,error:i,complete:u}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,i){return this._taskCompletionResolver.promise.then(e,i)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),t}(),zi=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l){var f;return(0,z.Z)(this,e),(f=r.call(this,i,u,l)).type="firestore",f._queue=new gk,f._persistenceKey="name"in i?i.name:"[DEFAULT]",f}return(0,H.Z)(e,[{key:"_terminate",value:function(){return this._firestoreClient||im(this),this._firestoreClient.terminate()}}]),e}(Dh);function qa(t){return t._firestoreClient||im(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function im(t){var r,l,v,e=t._freezeSettings(),i=(l=(null===(r=t._app)||void 0===r?void 0:r.options.appId)||"",new Uo(t._databaseId,l,t._persistenceKey,(v=e).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,v.useFetchStreams));t._firestoreClient=new $g(t._authCredentials,t._appCheckCredentials,t._queue,i)}function Id(t,r,e){var i=new Vn;return t.asyncQueue.enqueue((0,Se.Z)(te().mark(function u(){return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,sp(t,e);case 3:return f.next=5,op(t,r);case 5:i.resolve(),f.next=13;break;case 8:if(f.prev=8,f.t0=f.catch(0),"FirebaseError"===(v=f.t0).name?v.code===Ke.FAILED_PRECONDITION||v.code===Ke.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&v instanceof DOMException)||22===v.code||20===v.code||11===v.code){f.next=12;break}throw f.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+f.t0),i.reject(f.t0);case 13:case"end":return f.stop()}var v},u,null,[[0,8]])}))).then(function(){return i.promise})}function Ep(t){if(t._initialized||t._terminated)throw new Et(Ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ol=function(){function t(){(0,z.Z)(this,t);for(var r=arguments.length,e=new Array(r),i=0;i<r;i++)e[i]=arguments[i];for(var u=0;u<e.length;++u)if(0===e[u].length)throw new Et(Ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ka(e)}return(0,H.Z)(t,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),t}(),Mc=function(){function t(r){(0,z.Z)(this,t),this._byteString=r}return(0,H.Z)(t,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(e){try{return new t(ta.fromBase64String(e))}catch(i){throw new Et(Ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}},{key:"fromUint8Array",value:function(e){return new t(ta.fromUint8Array(e))}}]),t}(),uf=(0,H.Z)(function t(r){(0,z.Z)(this,t),this._methodName=r}),Ih=function(){function t(r,e){if((0,z.Z)(this,t),!isFinite(r)||r<-90||r>90)throw new Et(Ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+r);if(!isFinite(e)||e<-180||e>180)throw new Et(Ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=r,this._long=e}return(0,H.Z)(t,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return gr(this._lat,e._lat)||gr(this._long,e._long)}}]),t}(),um=/^__.*__$/,bp=function(){function t(r,e,i){(0,z.Z)(this,t),this.data=r,this.fieldMask=e,this.fieldTransforms=i}return(0,H.Z)(t,[{key:"toMutation",value:function(e,i){return null!==this.fieldMask?new Ra(e,this.data,this.fieldMask,i,this.fieldTransforms):new va(e,this.data,i,this.fieldTransforms)}}]),t}(),Tp=function(){function t(r,e,i){(0,z.Z)(this,t),this.data=r,this.fieldMask=e,this.fieldTransforms=i}return(0,H.Z)(t,[{key:"toMutation",value:function(e,i){return new Ra(e,this.data,this.fieldMask,i,this.fieldTransforms)}}]),t}();function om(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}var lm=function(){function t(r,e,i,u,l,f){(0,z.Z)(this,t),this.settings=r,this.databaseId=e,this.M=i,this.ignoreUndefinedProperties=u,void 0===l&&this.Ja(),this.fieldTransforms=l||[],this.fieldMask=f||[]}return(0,H.Z)(t,[{key:"path",get:function(){return this.settings.path}},{key:"Ya",get:function(){return this.settings.Ya}},{key:"Xa",value:function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Za",value:function(e){var i,u=null===(i=this.path)||void 0===i?void 0:i.child(e),l=this.Xa({path:u,tc:!1});return l.ec(e),l}},{key:"nc",value:function(e){var i,u=null===(i=this.path)||void 0===i?void 0:i.child(e),l=this.Xa({path:u,tc:!1});return l.Ja(),l}},{key:"sc",value:function(e){return this.Xa({path:void 0,tc:!0})}},{key:"ic",value:function(e){return Nd(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(i){return e.isPrefixOf(i)})||void 0!==this.fieldTransforms.find(function(i){return e.isPrefixOf(i.field)})}},{key:"Ja",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ec(this.path.get(e))}},{key:"ec",value:function(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(om(this.Ya)&&um.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}]),t}(),Ky=function(){function t(r,e,i){(0,z.Z)(this,t),this.databaseId=r,this.ignoreUndefinedProperties=e,this.M=i||ch(r)}return(0,H.Z)(t,[{key:"uc",value:function(e,i,u){var l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new lm({Ya:e,methodName:i,oc:u,path:Ka.emptyPath(),tc:!1,rc:l},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),t}();function Oc(t){var r=t._freezeSettings(),e=ch(t._databaseId);return new Ky(t._databaseId,!!r.ignoreUndefinedProperties,e)}function Vf(t,r,e,i,u){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},f=t.uc(l.merge||l.mergeFields?2:0,r,e,u);Ip("Data must be an object, but it was:",f,i);var b,Z,v=vm(i,f);if(l.merge)b=new ko(f.fieldMask),Z=f.fieldTransforms;else if(l.mergeFields){var de,K=[],re=(0,Ce.Z)(l.mergeFields);try{for(re.s();!(de=re.n()).done;){var Be=de.value,we=us(r,Be,e);if(!f.contains(we))throw new Et(Ke.INVALID_ARGUMENT,"Field '".concat(we,"' is specified in your field mask but missing from your input data."));Sp(K,we)||K.push(we)}}catch(st){re.e(st)}finally{re.f()}b=new ko(K),Z=f.fieldTransforms.filter(function(st){return b.covers(st.field)})}else b=null,Z=f.fieldTransforms;return new bp(new vs(v),b,Z)}var Rd=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(){return(0,z.Z)(this,e),r.apply(this,arguments)}return(0,H.Z)(e,[{key:"_toFieldTransform",value:function(u){if(2!==u.Ya)throw u.ic("".concat(this._methodName,1===u.Ya?"() can only appear at the top level of your update data":"() cannot be used with set() unless you pass {merge:true}"));return u.fieldMask.push(u.path),null}},{key:"isEqual",value:function(u){return u instanceof e}}]),e}(uf);function Dp(t,r,e){return new lm({Ya:3,oc:r.settings.oc,methodName:t._methodName,tc:e},r.databaseId,r.M,r.ignoreUndefinedProperties)}var cm=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(){return(0,z.Z)(this,e),r.apply(this,arguments)}return(0,H.Z)(e,[{key:"_toFieldTransform",value:function(u){return new $n(u.path,new he)}},{key:"isEqual",value:function(u){return u instanceof e}}]),e}(uf),fm=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this,i)).ac=u,l}return(0,H.Z)(e,[{key:"_toFieldTransform",value:function(u){var l=Dp(this,u,!0),f=this.ac.map(function(b){return lf(b,l)}),v=new Ie(f);return new $n(u.path,v)}},{key:"isEqual",value:function(u){return this===u}}]),e}(uf),hm=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this,i)).ac=u,l}return(0,H.Z)(e,[{key:"_toFieldTransform",value:function(u){var l=Dp(this,u,!0),f=this.ac.map(function(b){return lf(b,l)}),v=new tt(f);return new $n(u.path,v)}},{key:"isEqual",value:function(u){return this===u}}]),e}(uf),dm=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this,i)).cc=u,l}return(0,H.Z)(e,[{key:"_toFieldTransform",value:function(u){var l=new Bt(u.M,h(u.M,this.cc));return new $n(u.path,l)}},{key:"isEqual",value:function(u){return this===u}}]),e}(uf);function Pd(t,r,e,i){var u=t.uc(1,r,e);Ip("Data must be an object, but it was:",u,i);var l=[],f=vs.empty();Xu(i,function(b,Z){var K=Od(r,b,e);Z=(0,on.m9)(Z);var re=u.nc(K);if(Z instanceof Rd)l.push(K);else{var de=lf(Z,re);null!=de&&(l.push(K),f.set(K,de))}});var v=new ko(l);return new Tp(f,v,u.fieldTransforms)}function Md(t,r,e,i,u,l){var f=t.uc(1,r,e),v=[us(r,i,e)],b=[u];if(l.length%2!=0)throw new Et(Ke.INVALID_ARGUMENT,"Function ".concat(r,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var Z=0;Z<l.length;Z+=2)v.push(us(r,l[Z])),b.push(l[Z+1]);for(var K=[],re=vs.empty(),de=v.length-1;de>=0;--de)if(!Sp(K,v[de])){var Be=v[de],we=b[de];we=(0,on.m9)(we);var st=f.nc(Be);if(we instanceof Rd)K.push(Be);else{var pt=lf(we,st);null!=pt&&(K.push(Be),re.set(Be,pt))}}var Nt=new ko(K);return new Tp(re,Nt,f.fieldTransforms)}function $y(t,r,e){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return lf(e,t.uc(i?4:3,r))}function lf(t,r){if(Cp(t=(0,on.m9)(t)))return Ip("Unsupported field value:",r,t),vm(t,r);if(t instanceof uf)return function(e,i){if(!om(i.Ya))throw i.ic("".concat(e._methodName,"() can only be used with update() and set()"));if(!i.path)throw i.ic("".concat(e._methodName,"() is not currently supported inside arrays"));var u=e._toFieldTransform(i);u&&i.fieldTransforms.push(u)}(t,r),null;if(void 0===t&&r.ignoreUndefinedProperties)return null;if(r.path&&r.fieldMask.push(r.path),t instanceof Array){if(r.settings.tc&&4!==r.Ya)throw r.ic("Nested arrays are not supported");return function(e,i){var v,u=[],l=0,f=(0,Ce.Z)(e);try{for(f.s();!(v=f.n()).done;){var Z=lf(v.value,i.sc(l));null==Z&&(Z={nullValue:"NULL_VALUE"}),u.push(Z),l++}}catch(K){f.e(K)}finally{f.f()}return{arrayValue:{values:u}}}(t,r)}return function(e,i){if(null===(e=(0,on.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return h(i.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var u=Er.fromDate(e);return{timestampValue:Ql(i.M,u)}}if(e instanceof Er){var l=new Er(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ql(i.M,l)}}if(e instanceof Ih)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Mc)return{bytesValue:xc(i.M,e._byteString)};if(e instanceof Na){var f=i.databaseId,v=e.firestore._databaseId;if(!v.isEqual(f))throw i.ic("Document reference is for database ".concat(v.projectId,"/").concat(v.database," but should be for database ").concat(f.projectId,"/").concat(f.database));return{referenceValue:jc(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ic("Unsupported field value: ".concat(Th(e)))}(t,r)}function vm(t,r){var e={};return rl(t)?r.path&&r.path.length>0&&r.fieldMask.push(r.path):Xu(t,function(i,u){var l=lf(u,r.Za(i));null!=l&&(e[i]=l)}),{mapValue:{fields:e}}}function Cp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Er||t instanceof Ih||t instanceof Mc||t instanceof Na||t instanceof uf)}function Ip(t,r,e){if(!Cp(e)||"object"!=typeof(u=e)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){var i=Th(e);throw r.ic("an object"===i?t+" a custom object":t+" "+i)}var u}function us(t,r,e){if((r=(0,on.m9)(r))instanceof Ol)return r._internalPath;if("string"==typeof r)return Od(t,r);throw Nd("Field path arguments must be of type string or ",t,!1,void 0,e)}var pm=new RegExp("[~\\*/\\[\\]]");function Od(t,r,e){if(r.search(pm)>=0)throw Nd("Invalid field path (".concat(r,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,e);try{return(0,$e.Z)(Ol,(0,x.Z)(r.split(".")))._internalPath}catch(i){throw Nd("Invalid field path (".concat(r,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,e)}}function Nd(t,r,e,i,u){var l=i&&!i.isEmpty(),f=void 0!==u,v="Function ".concat(r,"() called with invalid data");e&&(v+=" (via `toFirestore()`)"),v+=". ";var b="";return(l||f)&&(b+=" (found",l&&(b+=" in field ".concat(i)),f&&(b+=" in document ".concat(u)),b+=")"),new Et(Ke.INVALID_ARGUMENT,v+t+b)}function Sp(t,r){return t.some(function(e){return e.isEqual(r)})}var Sh=function(){function t(r,e,i,u,l){(0,z.Z)(this,t),this._firestore=r,this._userDataWriter=e,this._key=i,this._document=u,this._converter=l}return(0,H.Z)(t,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Na(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new gm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var i=this._document.data.field(Ah("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i)}}}]),t}(),gm=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(){return(0,z.Z)(this,e),r.apply(this,arguments)}return(0,H.Z)(e,[{key:"data",value:function(){return(0,be.Z)((0,Ge.Z)(e.prototype),"data",this).call(this)}}]),e}(Sh);function Ah(t,r){return"string"==typeof r?Od(t,r):r instanceof Ol?r._internalPath:r._delegate._internalPath}var $o=function(){function t(r,e){(0,z.Z)(this,t),this.hasPendingWrites=r,this.fromCache=e}return(0,H.Z)(t,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),t}(),nc=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l,f,v,b){var Z;return(0,z.Z)(this,e),(Z=r.call(this,i,u,l,f,b))._firestore=i,Z._firestoreImpl=i,Z.metadata=v,Z}return(0,H.Z)(e,[{key:"exists",value:function(){return(0,be.Z)((0,Ge.Z)(e.prototype),"exists",this).call(this)}},{key:"data",value:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var l=new Rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(l,u)}return this._userDataWriter.convertValue(this._document.data.value,u.serverTimestamps)}}},{key:"get",value:function(u){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var f=this._document.data.field(Ah("DocumentSnapshot.get",u));if(null!==f)return this._userDataWriter.convertValue(f,l.serverTimestamps)}}}]),e}(Sh),Rh=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(){return(0,z.Z)(this,e),r.apply(this,arguments)}return(0,H.Z)(e,[{key:"data",value:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,be.Z)((0,Ge.Z)(e.prototype),"data",this).call(this,u)}}]),e}(nc),rc=function(){function t(r,e,i,u){(0,z.Z)(this,t),this._firestore=r,this._userDataWriter=e,this._snapshot=u,this.metadata=new $o(u.hasPendingWrites,u.fromCache),this.query=i}return(0,H.Z)(t,[{key:"docs",get:function(){var e=[];return this.forEach(function(i){return e.push(i)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,i){var u=this;this._snapshot.docs.forEach(function(l){e.call(i,new Rh(u._firestore,u._userDataWriter,l.key,l,new $o(u._snapshot.mutatedKeys.has(l.key),u._snapshot.fromCache),u.query.converter))})}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Et(Ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(u,l){if(u._snapshot.oldDocs.isEmpty()){var f=0;return u._snapshot.docChanges.map(function(b){return{type:"added",doc:new Rh(u._firestore,u._userDataWriter,b.doc.key,b.doc,new $o(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:f++}})}var v=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(function(b){return l||3!==b.type}).map(function(b){var Z=new Rh(u._firestore,u._userDataWriter,b.doc.key,b.doc,new $o(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter),K=-1,re=-1;return 0!==b.type&&(K=v.indexOf(b.doc.key),v=v.delete(b.doc.key)),1!==b.type&&(re=(v=v.add(b.doc)).indexOf(b.doc.key)),{type:qy(b.type),doc:Z,oldIndex:K,newIndex:re}})}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}]),t}();function qy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}function Ap(t,r){return t instanceof nc&&r instanceof nc?t._firestore===r._firestore&&t._key.isEqual(r._key)&&(null===t._document?null===r._document:t._document.isEqual(r._document))&&t._converter===r._converter:t instanceof rc&&r instanceof rc&&t._firestore===r._firestore&&Td(t.query,r.query)&&t.metadata.isEqual(r.metadata)&&t._snapshot.isEqual(r._snapshot)}function Yy(t){if(Tl(t)&&0===t.explicitOrderBy.length)throw new Et(Ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xf=(0,H.Z)(function t(){(0,z.Z)(this,t)});function Nl(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),i=1;i<r;i++)e[i-1]=arguments[i];for(var u=0,l=e;u<l.length;u++){var f=l[u];t=f._apply(t)}return t}var Ll=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l){var f;return(0,z.Z)(this,e),(f=r.call(this)).hc=i,f.lc=u,f.fc=l,f.type="where",f}return(0,H.Z)(e,[{key:"_apply",value:function(u){var v,Z,l=Oc(u.firestore),f=function(v,b,Z,K,re,de,Be){var we;if(re.isKeyField()){if("array-contains"===de||"array-contains-any"===de)throw new Et(Ke.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(de,"' queries on documentId()."));if("in"===de||"not-in"===de){Mp(Be,de);var Nt,st=[],pt=(0,Ce.Z)(Be);try{for(pt.s();!(Nt=pt.n()).done;)st.push(km(K,v,Nt.value))}catch(dn){pt.e(dn)}finally{pt.f()}we={arrayValue:{values:st}}}else we=km(K,v,Be)}else"in"!==de&&"not-in"!==de&&"array-contains-any"!==de||Mp(Be,de),we=$y(Z,"where",Be,"in"===de||"not-in"===de);var Yt=nr.create(re,de,we);return function(dn,jn){if(jn.S()){var lr=Uc(dn);if(null!==lr&&!lr.isEqual(jn.field))throw new Et(Ke.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(lr.toString(),"' and '").concat(jn.field.toString(),"'"));var Hn=xo(dn);null!==Hn&&_m(0,jn.field,Hn)}var Tn=function(Wi,Jr){var ga,qr=(0,Ce.Z)(Wi.filters);try{for(qr.s();!(ga=qr.n()).done;){var Eu=ga.value;if(Jr.indexOf(Eu.op)>=0)return Eu.op}}catch(Yo){qr.e(Yo)}finally{qr.f()}return null}(dn,function(Wi){switch(Wi){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(jn.op));if(null!==Tn)throw new Et(Ke.INVALID_ARGUMENT,Tn===jn.op?"Invalid query. You cannot use more than one '".concat(jn.op.toString(),"' filter."):"Invalid query. You cannot use '".concat(jn.op.toString(),"' filters with '").concat(Tn.toString(),"' filters."))}(v,Yt),Yt}(u._query,0,l,u.firestore._databaseId,this.hc,this.lc,this.fc);return new So(u.firestore,u.converter,(Z=(v=u._query).filters.concat([f]),new yu(v.path,v.collectionGroup,v.explicitOrderBy.slice(),Z,v.limit,v.limitType,v.startAt,v.endAt)))}}]),e}(xf),Jy=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this)).hc=i,l.dc=u,l.type="orderBy",l}return(0,H.Z)(e,[{key:"_apply",value:function(u){var f,b,l=function(f,v,b){if(null!==f.startAt)throw new Et(Ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==f.endAt)throw new Et(Ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var Z=new Wl(v,b);return function(K,re){if(null===xo(K)){var de=Uc(K);null!==de&&_m(0,de,re.field)}}(f,Z),Z}(u._query,this.hc,this.dc);return new So(u.firestore,u.converter,(b=(f=u._query).explicitOrderBy.concat([l]),new yu(f.path,f.collectionGroup,b,f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)))}}]),e}(xf),qo=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l){var f;return(0,z.Z)(this,e),(f=r.call(this)).type=i,f._c=u,f.wc=l,f}return(0,H.Z)(e,[{key:"_apply",value:function(u){return new So(u.firestore,u.converter,$l(u._query,this._c,this.wc))}}]),e}(xf),Rp=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l){var f;return(0,z.Z)(this,e),(f=r.call(this)).type=i,f.mc=u,f.gc=l,f}return(0,H.Z)(e,[{key:"_apply",value:function(u){var f,v,l=jf(u,this.type,this.mc,this.gc);return new So(u.firestore,u.converter,(v=l,new yu((f=u._query).path,f.collectionGroup,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,v,f.endAt)))}}]),e}(xf);function Xy(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return new Rp("startAt",r,!0)}function e0(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return new Rp("startAfter",r,!1)}var ym=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u,l){var f;return(0,z.Z)(this,e),(f=r.call(this)).type=i,f.mc=u,f.gc=l,f}return(0,H.Z)(e,[{key:"_apply",value:function(u){var f,v,l=jf(u,this.type,this.mc,this.gc);return new So(u.firestore,u.converter,(v=l,new yu((f=u._query).path,f.collectionGroup,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,v)))}}]),e}(xf);function t0(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return new ym("endBefore",r,!1)}function Pp(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return new ym("endAt",r,!0)}function jf(t,r,e,i){if(e[0]=(0,on.m9)(e[0]),e[0]instanceof Sh)return function(l,f,v,b,Z){if(!b)throw new Et(Ke.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(v,"()."));var de,K=[],re=(0,Ce.Z)(ol(l));try{for(re.s();!(de=re.n()).done;){var Be=de.value;if(Be.field.isKeyField())K.push(Lu(f,b.key));else{var we=b.data.field(Be.field);if(is(we))throw new Et(Ke.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Be.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===we){var st=Be.field.canonicalString();throw new Et(Ke.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(st,"' (used as the orderBy) does not exist."))}K.push(we)}}}catch(pt){re.e(pt)}finally{re.f()}return new Fu(K,Z)}(t._query,t.firestore._databaseId,r,e[0]._document,i);var u=Oc(t.firestore);return function(l,f,v,b,Z,K){var re=l.explicitOrderBy;if(Z.length>re.length)throw new Et(Ke.INVALID_ARGUMENT,"Too many arguments provided to ".concat(b,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var de=[],Be=0;Be<Z.length;Be++){var we=Z[Be];if(re[Be].field.isKeyField()){if("string"!=typeof we)throw new Et(Ke.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(b,"(), but got a ").concat(typeof we));if(!Bc(l)&&-1!==we.indexOf("/"))throw new Et(Ke.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(b,"() must be a plain document ID, but '").concat(we,"' contains a slash."));var st=l.path.child(Fr.fromString(we));if(!hn.isDocumentKey(st))throw new Et(Ke.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(b,"() must result in a valid document path, but '").concat(st,"' is not because it contains an odd number of segments."));var pt=new hn(st);de.push(Lu(f,pt))}else{var Nt=$y(v,b,we);de.push(Nt)}}return new Fu(de,K)}(t._query,t.firestore._databaseId,u,r,e,i)}function km(t,r,e){if("string"==typeof(e=(0,on.m9)(e))){if(""===e)throw new Et(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bc(r)&&-1!==e.indexOf("/"))throw new Et(Ke.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(e,"' contains a '/' character."));var i=r.path.child(Fr.fromString(e));if(!hn.isDocumentKey(i))throw new Et(Ke.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return Lu(t,new hn(i))}if(e instanceof Na)return Lu(t,e._key);throw new Et(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Th(e),"."))}function Mp(t,r){if(!Array.isArray(t)||0===t.length)throw new Et(Ke.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(r.toString(),"' filters."));if(t.length>10)throw new Et(Ke.INVALID_ARGUMENT,"Invalid Query. '".concat(r.toString(),"' filters support a maximum of 10 elements in the value array."))}function _m(t,r,e){if(!e.isEqual(r))throw new Et(Ke.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(r.toString(),"' and so you must also use '").concat(r.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(e.toString(),"' instead."))}var Ld=function(){function t(){(0,z.Z)(this,t)}return(0,H.Z)(t,[{key:"convertValue",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ji(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw pe()}}},{key:"convertObject",value:function(e,i){var u=this,l={};return Xu(e.fields,function(f,v){l[f]=u.convertValue(v,i)}),l}},{key:"convertGeoPoint",value:function(e){return new Ih(ji(e.latitude),ji(e.longitude))}},{key:"convertArray",value:function(e,i){var u=this;return(e.values||[]).map(function(l){return u.convertValue(l,i)})}},{key:"convertServerTimestamp",value:function(e,i){switch(i){case"previous":var u=_o(e);return null==u?null:this.convertValue(u,i);case"estimate":return this.convertTimestamp(Mu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var i=Qs(e);return new Er(i.seconds,i.nanos)}},{key:"convertDocumentKey",value:function(e,i){var u=Fr.fromString(e);Ue(P(u));var l=new bs(u.get(1),u.get(3)),f=new hn(u.popFirst(5));return l.isEqual(i)||N("Document ".concat(f," contains a document reference within a different database (").concat(l.projectId,"/").concat(l.database,") which is not supported. It will be treated as a reference in the current database (").concat(i.projectId,"/").concat(i.database,") instead.")),f}}]),t}();function Ph(t,r,e){return t?e&&(e.merge||e.mergeFields)?t.toFirestore(r,e):t.toFirestore(r):r}var Fd=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i){var u;return(0,z.Z)(this,e),(u=r.call(this)).firestore=i,u}return(0,H.Z)(e,[{key:"convertBytes",value:function(u){return new Mc(u)}},{key:"convertReference",value:function(u){var l=this.convertDocumentKey(u,this.firestore._databaseId);return new Na(this.firestore,null,l)}}]),e}(Ld),wm=function(){function t(r,e){(0,z.Z)(this,t),this._firestore=r,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Oc(r)}return(0,H.Z)(t,[{key:"set",value:function(e,i,u){this._verifyNotCommitted();var l=ic(e,this._firestore),f=Ph(l.converter,i,u),v=Vf(this._dataReader,"WriteBatch.set",l._key,f,null!==l.converter,u);return this._mutations.push(v.toMutation(l._key,Zn.none())),this}},{key:"update",value:function(e,i,u){this._verifyNotCommitted();for(var f,l=ic(e,this._firestore),v=arguments.length,b=new Array(v>3?v-3:0),Z=3;Z<v;Z++)b[Z-3]=arguments[Z];return f="string"==typeof(i=(0,on.m9)(i))||i instanceof Ol?Md(this._dataReader,"WriteBatch.update",l._key,i,u,b):Pd(this._dataReader,"WriteBatch.update",l._key,i),this._mutations.push(f.toMutation(l._key,Zn.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var i=ic(e,this._firestore);return this._mutations=this._mutations.concat(new fl(i._key,Zn.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Et(Ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),t}();function ic(t,r){if((t=(0,on.m9)(t)).firestore!==r)throw new Et(Ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ac=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i){var u;return(0,z.Z)(this,e),(u=r.call(this)).firestore=i,u}return(0,H.Z)(e,[{key:"convertBytes",value:function(u){return new Mc(u)}},{key:"convertReference",value:function(u){var l=this.convertDocumentKey(u,this.firestore._databaseId);return new Na(this.firestore,null,l)}}]),e}(Ld);function Op(t,r,e){t=$r(t,Na);var i=$r(t.firestore,zi),u=Ph(t.converter,r,e);return Hf(i,[Vf(Oc(i),"setDoc",t._key,u,null!==t.converter,e).toMutation(t._key,Zn.none())])}function Np(t,r,e){t=$r(t,Na);for(var i=$r(t.firestore,zi),u=Oc(i),f=arguments.length,v=new Array(f>3?f-3:0),b=3;b<f;b++)v[b-3]=arguments[b];return Hf(i,[("string"==typeof(r=(0,on.m9)(r))||r instanceof Ol?Md(u,"updateDoc",t._key,r,e,v):Pd(u,"updateDoc",t._key,r)).toMutation(t._key,Zn.exists(!0))])}function Am(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),i=1;i<r;i++)e[i-1]=arguments[i];var u,l,f;t=(0,on.m9)(t);var v={includeMetadataChanges:!1},b=0;"object"!=typeof e[b]||nm(e[b])||(v=e[b],b++);var re,de,Be,pt,Nt,sn,dn,jn,Z={includeMetadataChanges:v.includeMetadataChanges};if(nm(e[b])){var K=e[b];e[b]=null===(u=K.next)||void 0===u?void 0:u.bind(K),e[b+1]=null===(l=K.error)||void 0===l?void 0:l.bind(K),e[b+2]=null===(f=K.complete)||void 0===f?void 0:f.bind(K)}if(t instanceof Na)de=$r(t.firestore,zi),Be=bl(t._key.path),re={next:function(Nt){e[b]&&e[b](Lp(de,t,Nt))},error:e[b+1],complete:e[b+2]};else{var we=$r(t,So);de=$r(we.firestore,zi),Be=we._query;var st=new ac(de);re={next:function(Nt){e[b]&&e[b](new rc(de,st,we,Nt))},error:e[b+1],complete:e[b+2]},Yy(t._query)}return pt=qa(de),Nt=Be,sn=Z,dn=new bh(re),jn=new Co(Nt,dn,sn),pt.asyncQueue.enqueueAndForget((0,Se.Z)(te().mark(function lr(){return te().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return Tn.t0=jv,Tn.next=3,Bf(pt);case 3:return Tn.t1=Tn.sent,Tn.t2=jn,Tn.abrupt("return",(0,Tn.t0)(Tn.t1,Tn.t2));case 6:case"end":return Tn.stop()}},lr)}))),function(){dn.pa(),pt.asyncQueue.enqueueAndForget((0,Se.Z)(te().mark(function lr(){return te().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return Tn.t0=Tc,Tn.next=3,Bf(pt);case 3:return Tn.t1=Tn.sent,Tn.t2=jn,Tn.abrupt("return",(0,Tn.t0)(Tn.t1,Tn.t2));case 6:case"end":return Tn.stop()}},lr)})))}}function Hf(t,r){return e=qa(t),i=r,u=new Vn,e.asyncQueue.enqueueAndForget((0,Se.Z)(te().mark(function l(){return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.t0=Yv,v.next=3,vp(e);case 3:return v.t1=v.sent,v.t2=i,v.t3=u,v.abrupt("return",(0,v.t0)(v.t1,v.t2,v.t3));case 7:case"end":return v.stop()}},l)}))),u.promise;var e,i,u}function Lp(t,r,e){var i=e.docs.get(r._key),u=new ac(t);return new nc(t,u,r._key,i,new $o(e.hasPendingWrites,e.fromCache),r.converter)}var r0=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this,i,u))._firestore=i,l}return(0,H.Z)(e,[{key:"get",value:function(u){var l=this,f=ic(u,this._firestore),v=new ac(this._firestore);return(0,be.Z)((0,Ge.Z)(e.prototype),"get",this).call(this,u).then(function(b){return new nc(l._firestore,v,f._key,b._document,new $o(!1,!1),f.converter)})}}]),e}(function(){function t(r,e){(0,z.Z)(this,t),this._firestore=r,this._transaction=e,this._dataReader=Oc(r)}return(0,H.Z)(t,[{key:"get",value:function(e){var i=this,u=ic(e,this._firestore),l=new Fd(this._firestore);return this._transaction.lookup([u._key]).then(function(f){if(!f||1!==f.length)return pe();var v=f[0];if(v.isFoundDocument())return new Sh(i._firestore,l,v.key,v,u.converter);if(v.isNoDocument())return new Sh(i._firestore,l,u._key,null,u.converter);throw pe()})}},{key:"set",value:function(e,i,u){var l=ic(e,this._firestore),f=Ph(l.converter,i,u),v=Vf(this._dataReader,"Transaction.set",l._key,f,null!==l.converter,u);return this._transaction.set(l._key,v),this}},{key:"update",value:function(e,i,u){for(var f,l=ic(e,this._firestore),v=arguments.length,b=new Array(v>3?v-3:0),Z=3;Z<v;Z++)b[Z-3]=arguments[Z];return f="string"==typeof(i=(0,on.m9)(i))||i instanceof Ol?Md(this._dataReader,"Transaction.update",l._key,i,u,b):Pd(this._dataReader,"Transaction.update",l._key,i),this._transaction.update(l._key,f),this}},{key:"delete",value:function(e){var i=ic(e,this._firestore);return this._transaction.delete(i._key),this}}]),t}());function o0(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return new fm("arrayUnion",r)}function l0(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return new hm("arrayRemove",r)}function Fp(t,r){if(void 0===r)return{merge:!1};if(void 0!==r.mergeFields&&void 0!==r.merge)throw new Et("invalid-argument","Invalid options passed to function ".concat(t,"(): You cannot ")+'specify both "merge" and "mergeFields".');return r}function Pm(){if("undefined"==typeof Uint8Array)throw new Et("unimplemented","Uint8Arrays are not available in this environment.")}function Zp(){if(!function da(){return"undefined"!=typeof atob}())throw new Et("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];yo=Tt.SDK_VERSION,(0,Tt._registerComponent)(new jt.wA("firestore",function(e,i){var u=i.options,l=e.getProvider("app").getImmediate(),f=new zi(l,new ha(e.getProvider("auth-internal")),new ei(e.getProvider("app-check-internal")));return u=Object.assign({useFetchStreams:r},u),f._setSettings(u),f},"PUBLIC")),(0,Tt.registerVersion)(Pu,"3.4.7",t),(0,Tt.registerVersion)(Pu,"3.4.7","esm2017")}();var Up=function(){function t(r){(0,z.Z)(this,t),this._delegate=r}return(0,H.Z)(t,[{key:"toBase64",value:function(){return Zp(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Pm(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(e){return Zp(),new t(Mc.fromBase64String(e))}},{key:"fromUint8Array",value:function(e){return Pm(),new t(Mc.fromUint8Array(e))}}]),t}();function Ud(t){return function Mm(t,r){if("object"!=typeof t||null===t)return!1;var u,e=t,i=(0,Ce.Z)(r);try{for(i.s();!(u=i.n()).done;){var l=u.value;if(l in e&&"function"==typeof e[l])return!0}}catch(f){i.e(f)}finally{i.f()}return!1}(t,["next","error","complete"])}var Om=function(){function t(){(0,z.Z)(this,t)}return(0,H.Z)(t,[{key:"enableIndexedDbPersistence",value:function(e,i){return function Dd(t,r){Ep(t=$r(t,zi));var e=qa(t),i=t._freezeSettings(),u=new _d;return Id(e,u,new sf(u,i.cacheSizeBytes,null==r?void 0:r.forceOwnership))}(e._delegate,{forceOwnership:i})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function Cd(t){Ep(t=$r(t,zi));var r=qa(t),e=t._freezeSettings(),i=new _d;return Id(r,i,new Gg(i,e.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function kk(t){if(t._initialized&&!t._terminated)throw new Et(Ke.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new Vn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(te().mark(function e(){return te().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,function(){var l=(0,Se.Z)(te().mark(function f(v){var b;return te().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(Wo.vt()){K.next=2;break}return K.abrupt("return",Promise.resolve());case 2:return b=v+"main",K.next=5,Wo.delete(b);case 5:case"end":return K.stop()}},f)}));return function(f){return l.apply(this,arguments)}}()(Pl(t._databaseId,t._persistenceKey));case 3:r.resolve(),u.next=9;break;case 6:u.prev=6,u.t0=u.catch(0),r.reject(u.t0);case 9:case"end":return u.stop()}},e,null,[[0,6]])}))),r.promise}(e._delegate)}}]),t}(),Bp=function(){function t(r,e,i){var u=this;(0,z.Z)(this,t),this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:function(){return u.terminate()}},r instanceof bs||(this._appCompat=r)}return(0,H.Z)(t,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var i=this._delegate._getSettings();!e.merge&&i.host!==e.host&&J("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},i),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,i){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jy(this._delegate,e,i,u)}},{key:"enableNetwork",value:function(){return function Sd(t){return function By(t){return t.asyncQueue.enqueue((0,Se.Z)(te().mark(function r(){var e,i;return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fp(t);case 2:return e=l.sent,l.next=5,dp(t);case 5:return i=l.sent,l.abrupt("return",(e.setNetworkEnabled(!0),v=void 0,(v=vt(i)).lu.delete(0),tf(v)));case 7:case"end":return l.stop()}var v},r)})))}(qa(t=$r(t,zi)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function Ad(t){return function pp(t){return t.asyncQueue.enqueue((0,Se.Z)(te().mark(function r(){var e,i;return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fp(t);case 2:return e=l.sent,l.next=5,dp(t);case 5:return i=l.sent,l.abrupt("return",(e.setNetworkEnabled(!1),function(){var f=(0,Se.Z)(te().mark(function v(b){var Z;return te().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return(Z=vt(b)).lu.add(0),re.next=4,If(Z);case 4:Z._u.set("Offline");case 5:case"end":return re.stop()}},v)}));return function(v){return f.apply(this,arguments)}}()(i)));case 7:case"end":return l.stop()}},r)})))}(qa(t=$r(t,zi)))}(this._delegate)}},{key:"enablePersistence",value:function(e){var i=!1,u=!1;return e&&Xg("synchronizeTabs",i=!!e.synchronizeTabs,"experimentalForceOwningTab",u=!!e.experimentalForceOwningTab),i?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,u)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function zy(t){return r=qa(t=$r(t,zi)),e=new Vn,r.asyncQueue.enqueueAndForget((0,Se.Z)(te().mark(function i(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=Ny,l.next=3,vp(r);case 3:return l.t1=l.sent,l.t2=e,l.abrupt("return",(0,l.t0)(l.t1,l.t2));case 6:case"end":return l.stop()}},i)}))),e.promise;var r,e}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return function n0(t,r){return function vk(t,r){var e=new bh(r);return t.asyncQueue.enqueueAndForget((0,Se.Z)(te().mark(function i(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=function(f,v){vt(f).Tu.add(v),v.next()},l.next=3,Bf(t);case 3:return l.t1=l.sent,l.t2=e,l.abrupt("return",(0,l.t0)(l.t1,l.t2));case 6:case"end":return l.stop()}},i)}))),function(){e.pa(),t.asyncQueue.enqueueAndForget((0,Se.Z)(te().mark(function i(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=function(f,v){vt(f).Tu.delete(v)},l.next=3,Bf(t);case 3:return l.t1=l.sent,l.t2=e,l.abrupt("return",(0,l.t0)(l.t1,l.t2));case 6:case"end":return l.stop()}},i)})))}}(qa(t=$r(t,zi)),nm(r)?r:{next:r})}(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Et("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new jp(this,kp(this._delegate,e))}catch(i){throw Bu(i,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new so(this,Ch(this._delegate,e))}catch(i){throw Bu(i,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Vd(this,function Hy(t,r){if(t=$r(t,Dh),Rc("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new Et(Ke.INVALID_ARGUMENT,"Invalid collection ID '".concat(r,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new So(t,null,(e=r,new yu(Fr.emptyPath(),e)));var e}(this._delegate,e))}catch(i){throw Bu(i,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var i=this;return function a0(t,r){return function xy(t,r){var e=new Vn;return t.asyncQueue.enqueueAndForget((0,Se.Z)(te().mark(function i(){return te().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,bd(t).then(function(b){return b.datastore});case 2:new Kg(t.asyncQueue,f.sent,r,e).run();case 4:case"end":return f.stop()}},i)}))),e.promise}(qa(t=$r(t,zi)),function(e){return r(new r0(t,e))})}(this._delegate,function(u){return e(new Vp(i,u))})}},{key:"batch",value:function(){var e=this;return qa(this._delegate),new xp(new wm(this._delegate,function(i){return Hf(e._delegate,i)}))}},{key:"loadBundle",value:function(e){return function am(t,r){var e=qa(t=$r(t,zi)),i=new mk;return function Qg(t,r,e,i){var l,f,b,u=(l=e,f=ch(r),b=function(b,Z){if(b instanceof Uint8Array)return ap(b,Z);if(b instanceof ArrayBuffer)return ap(new Uint8Array(b),Z);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof l?(new TextEncoder).encode(l):l),new zg(b,f));t.asyncQueue.enqueueAndForget((0,Se.Z)(te().mark(function l(){return te().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.t0=Uf,v.next=3,vp(t);case 3:v.t1=v.sent,v.t2=u,v.t3=i,(0,v.t0)(v.t1,v.t2,v.t3);case 7:case"end":return v.stop()}},l)})))}(e,t._databaseId,r,i),i}(this._delegate,e)}},{key:"namedQuery",value:function(e){var i=this;return function wp(t,r){return function pk(t,r){return t.asyncQueue.enqueue((0,Se.Z)(te().mark(function e(){return te().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.t0=function(l,f){var v=vt(l);return v.persistence.runTransaction("Get named query","readonly",function(b){return v.ds.getNamedQuery(b,f)})},u.next=3,hp(t);case 3:return u.t1=u.sent,u.t2=r,u.abrupt("return",(0,u.t0)(u.t1,u.t2));case 6:case"end":return u.stop()}},e)})))}(qa(t=$r(t,zi)),r).then(function(e){return e?new So(t,null,e.query):null})}(this._delegate,e).then(function(u){return u?new Vd(i,u):null})}}]),t}(),Mh=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i){var u;return(0,z.Z)(this,e),(u=r.call(this)).firestore=i,u}return(0,H.Z)(e,[{key:"convertBytes",value:function(u){return new Up(new Mc(u))}},{key:"convertReference",value:function(u){var l=this.convertDocumentKey(u,this.firestore._databaseId);return so.forKey(l,this.firestore,null)}}]),e}(Ld),Vp=function(){function t(r,e){(0,z.Z)(this,t),this._firestore=r,this._delegate=e,this._userDataWriter=new Mh(r)}return(0,H.Z)(t,[{key:"get",value:function(e){var i=this,u=zn(e);return this._delegate.get(u).then(function(l){return new Bd(i._firestore,new nc(i._firestore._delegate,i._userDataWriter,l._key,l._document,l.metadata,u.converter))})}},{key:"set",value:function(e,i,u){var l=zn(e);return u?(Fp("Transaction.set",u),this._delegate.set(l,i,u)):this._delegate.set(l,i),this}},{key:"update",value:function(e,i,u){for(var l=arguments.length,f=new Array(l>3?l-3:0),v=3;v<l;v++)f[v-3]=arguments[v];var Z,b=zn(e);return 2===arguments.length?this._delegate.update(b,i):(Z=this._delegate).update.apply(Z,[b,i,u].concat(f)),this}},{key:"delete",value:function(e){var i=zn(e);return this._delegate.delete(i),this}}]),t}(),xp=function(){function t(r){(0,z.Z)(this,t),this._delegate=r}return(0,H.Z)(t,[{key:"set",value:function(e,i,u){var l=zn(e);return u?(Fp("WriteBatch.set",u),this._delegate.set(l,i,u)):this._delegate.set(l,i),this}},{key:"update",value:function(e,i,u){for(var l=arguments.length,f=new Array(l>3?l-3:0),v=3;v<l;v++)f[v-3]=arguments[v];var Z,b=zn(e);return 2===arguments.length?this._delegate.update(b,i):(Z=this._delegate).update.apply(Z,[b,i,u].concat(f)),this}},{key:"delete",value:function(e){var i=zn(e);return this._delegate.delete(i),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),t}(),Oh=function(){function t(r,e,i){(0,z.Z)(this,t),this._firestore=r,this._userDataWriter=e,this._delegate=i}return(0,H.Z)(t,[{key:"fromFirestore",value:function(e,i){var u=new Rh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ff(this._firestore,u),null!=i?i:{})}},{key:"toFirestore",value:function(e,i){return i?this._delegate.toFirestore(e,i):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(e,i){var u=t.INSTANCES,l=u.get(e);l||u.set(e,l=new WeakMap);var f=l.get(i);return f||(f=new t(e,new Mh(e),i),l.set(i,f)),f}}]),t}();Oh.INSTANCES=new WeakMap;var so=function(){function t(r,e){(0,z.Z)(this,t),this.firestore=r,this._delegate=e,this._userDataWriter=new Mh(r)}return(0,H.Z)(t,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new jp(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new jp(this.firestore,kp(this._delegate,e))}catch(i){throw Bu(i,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=(0,on.m9)(e))instanceof Na&&_p(this._delegate,e)}},{key:"set",value:function(e,i){i=Fp("DocumentReference.set",i);try{return i?Op(this._delegate,e,i):Op(this._delegate,e)}catch(u){throw Bu(u,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,i){for(var u=arguments.length,l=new Array(u>2?u-2:0),f=2;f<u;f++)l[f-2]=arguments[f];try{return 1===arguments.length?Np(this._delegate,e):Np.apply(void 0,[this._delegate,e,i].concat(l))}catch(v){throw Bu(v,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function Im(t){return Hf($r(t.firestore,zi),[new fl(t._key,Zn.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];var f=Lm(u),v=cf(u,function(b){return new Bd(e.firestore,new nc(e.firestore._delegate,e._userDataWriter,b._key,b._document,b.metadata,e._delegate.converter))});return Am(this._delegate,f,v)}},{key:"get",value:function(e){var u,i=this;return u="cache"===(null==e?void 0:e.source)?function Zd(t){t=$r(t,Na);var r=$r(t.firestore,zi),e=qa(r),i=new ac(r);return function gp(t,r){var e=new Vn;return t.asyncQueue.enqueueAndForget((0,Se.Z)(te().mark(function i(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=function(){var f=(0,Se.Z)(te().mark(function v(b,Z,K){var re,de;return te().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.prev=0,we.next=3,function(st,pt){var Nt=vt(st);return Nt.persistence.runTransaction("read document","readonly",function(sn){return Nt.ai.Bs(sn,pt)})}(b,Z);case 3:(re=we.sent).isFoundDocument()?K.resolve(re):re.isNoDocument()?K.resolve(null):K.reject(new Et(Ke.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),we.next=11;break;case 7:we.prev=7,we.t0=we.catch(0),de=bc(we.t0,"Failed to get document '".concat(Z," from cache")),K.reject(de);case 11:case"end":return we.stop()}},v,null,[[0,7]])}));return function(v,b,Z){return f.apply(this,arguments)}}(),l.next=3,hp(t);case 3:return l.t1=l.sent,l.t2=r,l.t3=e,l.abrupt("return",(0,l.t0)(l.t1,l.t2,l.t3));case 7:case"end":return l.stop()}},i)}))),e.promise}(e,t._key).then(function(u){return new nc(r,i,t._key,u,new $o(null!==u&&u.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function bm(t){t=$r(t,Na);var r=$r(t.firestore,zi);return Yg(qa(r),t._key,{source:"server"}).then(function(e){return Lp(r,t,e)})}(this._delegate):function Em(t){t=$r(t,Na);var r=$r(t.firestore,zi);return Yg(qa(r),t._key).then(function(e){return Lp(r,t,e)})}(this._delegate),u.then(function(l){return new Bd(i.firestore,new nc(i.firestore._delegate,i._userDataWriter,l._key,l._document,l.metadata,i._delegate.converter))})}},{key:"withConverter",value:function(e){return new t(this.firestore,this._delegate.withConverter(e?Oh.getInstance(this.firestore,e):null))}}],[{key:"forPath",value:function(e,i,u){if(e.length%2!=0)throw new Et("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new t(i,new Na(i._delegate,u,new hn(e)))}},{key:"forKey",value:function(e,i,u){return new t(i,new Na(i._delegate,u,e))}}]),t}();function Bu(t,r,e){return t.message=t.message.replace(r,e),t}function Lm(t){var e,r=(0,Ce.Z)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;if("object"==typeof i&&!Ud(i))return i}}catch(u){r.e(u)}finally{r.f()}return{}}function cf(t,r){var e,i,u;return{next:function(f){u.next&&u.next(r(f))},error:null===(e=(u=Ud(t[0])?t[0]:Ud(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===e?void 0:e.bind(u),complete:null===(i=u.complete)||void 0===i?void 0:i.bind(u)}}var Bd=function(){function t(r,e){(0,z.Z)(this,t),this._firestore=r,this._delegate=e}return(0,H.Z)(t,[{key:"ref",get:function(){return new so(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,i){return this._delegate.get(e,i)}},{key:"isEqual",value:function(e){return Ap(this._delegate,e._delegate)}}]),t}(),ff=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(){return(0,z.Z)(this,e),r.apply(this,arguments)}return(0,H.Z)(e,[{key:"data",value:function(u){var l=this._delegate.data(u);return function He(t,r){t||pe()}(void 0!==l),l}}]),e}(Bd),Vd=function(){function t(r,e){(0,z.Z)(this,t),this.firestore=r,this._delegate=e,this._userDataWriter=new Mh(r)}return(0,H.Z)(t,[{key:"where",value:function(e,i,u){try{return new t(this.firestore,Nl(this._delegate,function Qy(t,r,e){var i=r,u=Ah("where",t);return new Ll(u,i,e)}(e,i,u)))}catch(l){throw Bu(l,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(e,i){try{return new t(this.firestore,Nl(this._delegate,function Fl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",i=Ah("orderBy",t);return new Jy(i,e)}(e,i)))}catch(u){throw Bu(u,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(e){try{return new t(this.firestore,Nl(this._delegate,function gl(t){return tm("limit",t),new qo("limit",t,"F")}(e)))}catch(i){throw Bu(i,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(e){try{return new t(this.firestore,Nl(this._delegate,function mm(t){return tm("limitToLast",t),new qo("limitToLast",t,"L")}(e)))}catch(i){throw Bu(i,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new t(this.firestore,Nl(this._delegate,Xy.apply(void 0,arguments)))}catch(e){throw Bu(e,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new t(this.firestore,Nl(this._delegate,e0.apply(void 0,arguments)))}catch(e){throw Bu(e,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new t(this.firestore,Nl(this._delegate,t0.apply(void 0,arguments)))}catch(e){throw Bu(e,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new t(this.firestore,Nl(this._delegate,Pp.apply(void 0,arguments)))}catch(e){throw Bu(e,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Td(this._delegate,e._delegate)}},{key:"get",value:function(e){var u,i=this;return u="cache"===(null==e?void 0:e.source)?function Dm(t){t=$r(t,So);var r=$r(t.firestore,zi),e=qa(r),i=new ac(r);return function dk(t,r){var e=new Vn;return t.asyncQueue.enqueueAndForget((0,Se.Z)(te().mark(function i(){return te().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=function(){var f=(0,Se.Z)(te().mark(function v(b,Z,K){var re,de,Be,we,st;return te().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.prev=0,Nt.next=3,_c(b,Z,!0);case 3:de=new Ug(Z,(re=Nt.sent).hi),Be=de.Gu(re.documents),we=de.applyChanges(Be,!1),K.resolve(we.snapshot),Nt.next=14;break;case 10:Nt.prev=10,Nt.t0=Nt.catch(0),st=bc(Nt.t0,"Failed to execute query '".concat(Z," against cache")),K.reject(st);case 14:case"end":return Nt.stop()}},v,null,[[0,10]])}));return function(v,b,Z){return f.apply(this,arguments)}}(),l.next=3,hp(t);case 3:return l.t1=l.sent,l.t2=r,l.t3=e,l.abrupt("return",(0,l.t0)(l.t1,l.t2,l.t3));case 7:case"end":return l.stop()}},i)}))),e.promise}(e,t._query).then(function(u){return new rc(r,i,t,u)})}(this._delegate):"server"===(null==e?void 0:e.source)?function Cm(t){t=$r(t,So);var r=$r(t.firestore,zi),e=qa(r),i=new ac(r);return Vy(e,t._query,{source:"server"}).then(function(u){return new rc(r,i,t,u)})}(this._delegate):function Tm(t){t=$r(t,So);var r=$r(t.firestore,zi),e=qa(r),i=new ac(r);return Yy(t._query),Vy(e,t._query).then(function(u){return new rc(r,i,t,u)})}(this._delegate),u.then(function(l){return new xd(i.firestore,new rc(i.firestore._delegate,i._userDataWriter,i._delegate,l._snapshot))})}},{key:"onSnapshot",value:function(){for(var e=this,i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];var f=Lm(u),v=cf(u,function(b){return new xd(e.firestore,new rc(e.firestore._delegate,e._userDataWriter,e._delegate,b._snapshot))});return Am(this._delegate,f,v)}},{key:"withConverter",value:function(e){return new t(this.firestore,this._delegate.withConverter(e?Oh.getInstance(this.firestore,e):null))}}]),t}(),Fm=function(){function t(r,e){(0,z.Z)(this,t),this._firestore=r,this._delegate=e}return(0,H.Z)(t,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new ff(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),t}(),xd=function(){function t(r,e){(0,z.Z)(this,t),this._firestore=r,this._delegate=e}return(0,H.Z)(t,[{key:"query",get:function(){return new Vd(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map(function(i){return new ff(e._firestore,i)})}},{key:"docChanges",value:function(e){var i=this;return this._delegate.docChanges(e).map(function(u){return new Fm(i._firestore,u)})}},{key:"forEach",value:function(e,i){var u=this;this._delegate.forEach(function(l){e.call(i,new ff(u._firestore,l))})}},{key:"isEqual",value:function(e){return Ap(this._delegate,e._delegate)}}]),t}(),jp=function(t){(0,Fe.Z)(e,t);var r=(0,Pe.Z)(e);function e(i,u){var l;return(0,z.Z)(this,e),(l=r.call(this,i,u)).firestore=i,l._delegate=u,l}return(0,H.Z)(e,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var u=this._delegate.parent;return u?new so(this.firestore,u):null}},{key:"doc",value:function(u){try{return new so(this.firestore,void 0===u?Ch(this._delegate):Ch(this._delegate,u))}catch(l){throw Bu(l,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(u){var l=this;return function Sm(t,r){var e=$r(t.firestore,zi),i=Ch(t),u=Ph(t.converter,r);return Hf(e,[Vf(Oc(t.firestore),"addDoc",i._key,u,null!==t.converter,{}).toMutation(i._key,Zn.exists(!1))]).then(function(){return i})}(this._delegate,u).then(function(f){return new so(l.firestore,f)})}},{key:"isEqual",value:function(u){return _p(this._delegate,u._delegate)}},{key:"withConverter",value:function(u){return new e(this.firestore,this._delegate.withConverter(u?Oh.getInstance(this.firestore,u):null))}}]),e}(Vd);function zn(t){return $r(t,Na)}var d0=function(){function t(){(0,z.Z)(this,t);for(var r=arguments.length,e=new Array(r),i=0;i<r;i++)e[i]=arguments[i];this._delegate=(0,$e.Z)(Ol,e)}return(0,H.Z)(t,[{key:"isEqual",value:function(e){return(e=(0,on.m9)(e))instanceof Ol&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new t(Ka.keyField().canonicalString())}}]),t}(),v0=function(){function t(r){(0,z.Z)(this,t),this._delegate=r}return(0,H.Z)(t,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var e=function u0(){return new cm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new t(e)}},{key:"delete",value:function(){var e=function s0(){return new Rd("deleteField")}();return e._methodName="FieldValue.delete",new t(e)}},{key:"arrayUnion",value:function(){var e=o0.apply(void 0,arguments);return e._methodName="FieldValue.arrayUnion",new t(e)}},{key:"arrayRemove",value:function(){var e=l0.apply(void 0,arguments);return e._methodName="FieldValue.arrayRemove",new t(e)}},{key:"increment",value:function(e){var i=function c0(t){return new dm("increment",t)}(e);return i._methodName="FieldValue.increment",new t(i)}}]),t}(),p0={Firestore:Bp,GeoPoint:Ih,Timestamp:Er,Blob:Up,Transaction:Vp,WriteBatch:xp,DocumentReference:so,DocumentSnapshot:Bd,Query:Vd,QueryDocumentSnapshot:ff,QuerySnapshot:xd,CollectionReference:jp,FieldPath:d0,FieldValue:v0,setLogLevel:function Nm(t){!function C(t){A.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};!function g0(t){(function jd(t,r){t.INTERNAL.registerComponent(new jt.wA("firestore-compat",function(e){var i=e.getProvider("app-compat").getImmediate(),u=e.getProvider("firestore").getImmediate();return r(i,u)},"PUBLIC").setServiceProps(Object.assign({},p0)))})(t,function(r,e){return new Bp(r,e,new Om)}),t.registerVersion("@firebase/firestore-compat","0.1.16")}(at.Z);var Hd=O(40440);function m0(t,r){return function Ya(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke.z;return new Ee.y(function(e){var i;return null!=r?r.schedule(function(){i=t.onSnapshot({includeMetadataChanges:!0},e)}):i=t.onSnapshot({includeMetadataChanges:!0},e),function(){null!=i&&i()}})}(t,r)}function Gp(t,r){return m0(t,r).pipe((0,qe.U)(function(e){return{payload:e,type:"query"}}))}function Gd(t,r){return Gp(t,r).pipe((0,rt.O)(void 0),ve(),(0,qe.U)(function(e){var i=(0,F.Z)(e,2),u=i[0],l=i[1],f=l.payload.docChanges(),v=f.map(function(b){return{type:b.type,payload:b}});return u&&JSON.stringify(u.payload.metadata)!==JSON.stringify(l.payload.metadata)&&l.payload.docs.forEach(function(b,Z){var K=f.find(function(de){return de.doc.ref.isEqual(b.ref)}),re=null==u?void 0:u.payload.docs.find(function(de){return de.ref.isEqual(b.ref)});K&&JSON.stringify(K.doc.metadata)===JSON.stringify(b.metadata)||!K&&re&&JSON.stringify(re.metadata)===JSON.stringify(b.metadata)||v.push({type:"modified",payload:{oldIndex:Z,newIndex:Z,type:"modified",doc:b}})}),v}))}function zp(t,r,e){return Gd(t,e).pipe((0,wt.R)(function(i,u){return function Um(t,r,e){return r.forEach(function(i){e.indexOf(i.type)>-1&&(t=function Bm(t,r){switch(r.type){case"added":if(!t[r.newIndex]||!t[r.newIndex].doc.ref.isEqual(r.doc.ref))return zd(t,r.newIndex,0,r);break;case"modified":if(null==t[r.oldIndex]||t[r.oldIndex].doc.ref.isEqual(r.doc.ref)){if(r.oldIndex!==r.newIndex){var e=t.slice();return e.splice(r.oldIndex,1),e.splice(r.newIndex,0,r),e}return zd(t,r.newIndex,1,r)}break;case"removed":if(t[r.oldIndex]&&t[r.oldIndex].doc.ref.isEqual(r.doc.ref))return zd(t,r.oldIndex,1)}return t}(t,i))}),t}(i,u.map(function(l){return l.payload}),r)},[]),function it(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ht.y;return t=null!=t?t:Me,(0,Ve.e)(function(e,i){var u,l=!0;e.subscribe((0,fe.x)(i,function(f){var v=r(f);(l||!t(u,v))&&(l=!1,u=v,i.next(f))}))})}(),(0,qe.U)(function(i){return i.map(function(u){return{type:u.type,payload:u}})}))}function zd(t,r,e){for(var i=t.slice(),u=arguments.length,l=new Array(u>3?u-3:0),f=3;f<u;f++)l[f-3]=arguments[f];return i.splice.apply(i,[r,e].concat(l)),i}function Vm(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}O(70127);var xm=function(){function t(r,e,i){(0,z.Z)(this,t),this.ref=r,this.query=e,this.afs=i}return(0,H.Z)(t,[{key:"stateChanges",value:function(e){var i=Gd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(i=i.pipe((0,qe.U)(function(u){return u.filter(function(l){return e.indexOf(l.type)>-1})}))),i.pipe((0,rt.O)(void 0),ve(),(0,ct.h)(function(u){var l=(0,F.Z)(u,2);return l[1].length>0||!l[0]}),(0,qe.U)(function(u){return(0,F.Z)(u,2)[1]}),Je.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe((0,wt.R)(function(i,u){return[].concat((0,x.Z)(i),(0,x.Z)(u))},[]))}},{key:"snapshotChanges",value:function(e){var i=Vm(e);return zp(this.query,i,this.afs.schedulers.outsideAngular).pipe(Je.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Gp(this.query,this.afs.schedulers.outsideAngular).pipe((0,qe.U)(function(i){return i.payload.docs.map(function(u){return e.idField?Object.assign(Object.assign({},u.data()),(0,ce.Z)({},e.idField,u.id)):u.data()})}),Je.iC)}},{key:"get",value:function(e){return(0,Te.D)(this.query.get(e)).pipe(Je.iC)}},{key:"add",value:function(e){return this.ref.add(e)}},{key:"doc",value:function(e){return new jm(this.ref.doc(e),this.afs)}}]),t}(),jm=function(){function t(r,e){(0,z.Z)(this,t),this.ref=r,this.afs=e}return(0,H.Z)(t,[{key:"set",value:function(e,i){return this.ref.set(e,i)}},{key:"update",value:function(e){return this.ref.update(e)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(e,i){var l=Wp(this.ref.collection(e),i);return new xm(l.ref,l.query,this.afs)}},{key:"snapshotChanges",value:function(){var e=function Zm(t,r){return m0(t,r).pipe((0,rt.O)(void 0),ve(),(0,qe.U)(function(e){var i=(0,F.Z)(e,2),u=i[0],l=i[1];return l.exists?(null==u?void 0:u.exists)?{payload:l,type:"modified"}:{payload:l,type:"added"}:{payload:l,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular);return e.pipe(Je.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe((0,qe.U)(function(i){var u=i.payload;return e.idField?Object.assign(Object.assign({},u.data()),(0,ce.Z)({},e.idField,u.id)):u.data()}))}},{key:"get",value:function(e){return(0,Te.D)(this.ref.get(e)).pipe(Je.iC)}}]),t}(),Nh=function(){function t(r,e){(0,z.Z)(this,t),this.query=r,this.afs=e}return(0,H.Z)(t,[{key:"stateChanges",value:function(e){return e&&0!==e.length?Gd(this.query,this.afs.schedulers.outsideAngular).pipe((0,qe.U)(function(i){return i.filter(function(u){return e.indexOf(u.type)>-1})}),(0,ct.h)(function(i){return i.length>0}),Je.iC):Gd(this.query,this.afs.schedulers.outsideAngular).pipe(Je.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe((0,wt.R)(function(i,u){return[].concat((0,x.Z)(i),(0,x.Z)(u))},[]))}},{key:"snapshotChanges",value:function(e){var i=Vm(e);return zp(this.query,i,this.afs.schedulers.outsideAngular).pipe(Je.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=Gp(this.query,this.afs.schedulers.outsideAngular);return i.pipe((0,qe.U)(function(u){return u.payload.docs.map(function(l){return e.idField?Object.assign((0,ce.Z)({},e.idField,l.id),l.data()):l.data()})}),Je.iC)}},{key:"get",value:function(e){return(0,Te.D)(this.query.get(e)).pipe(Je.iC)}}]),t}(),y0=new j.OlP("angularfire2.enableFirestorePersistence"),k0=new j.OlP("angularfire2.firestore.persistenceSettings"),_0=new j.OlP("angularfire2.firestore.settings"),Wd=new j.OlP("angularfire2.firestore.use-emulator");function Wp(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(u){return u},e=r(t);return{query:e,ref:t}}var Hm=function(){var t=function(){function r(e,i,u,l,f,v,b,Z,K,re,de,Be,we,st,pt,Nt,sn){(0,z.Z)(this,r),this.schedulers=b;var Yt=(0,gt.on)(e,v,i),dn=K;re&&(0,le.nw)(Yt,v,de,we,st,pt,Be,Nt);var jn=(0,gt.cc)("".concat(Yt.name,".firestore"),"AngularFirestore",Yt.name,function(){var Hn=v.runOutsideAngular(function(){return Yt.firestore()});return l&&Hn.settings(l),dn&&Hn.useEmulator.apply(Hn,(0,x.Z)(dn)),u&&!(0,kt.PM)(f)?[Hn,v.runOutsideAngular(function(){try{return(0,Te.D)(Hn.enablePersistence(Z||void 0).then(function(){return!0},function(){return!1}))}catch(Jr){return"undefined"!=typeof console&&console.warn(Jr),(0,et.of)(!1)}})]:[Hn,(0,et.of)(!1)]},[l,dn,u]),lr=(0,F.Z)(jn,2);this.firestore=lr[0],this.persistenceEnabled$=lr[1]}return(0,H.Z)(r,[{key:"collection",value:function(i,u){var f=Wp("string"==typeof i?this.firestore.collection(i):i,u),v=f.ref,b=f.query,Z=this.schedulers.ngZone.run(function(){return v});return new xm(Z,b,this)}},{key:"collectionGroup",value:function(i,u){var l=u||function(v){return v},f=this.firestore.collectionGroup(i);return new Nh(l(f),this)}},{key:"doc",value:function(i){var u;u="string"==typeof i?this.firestore.doc(i):i;var l=this.schedulers.ngZone.run(function(){return u});return new jm(l,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),r}();return t.\u0275fac=function(e){return new(e||t)(j.LFG(gt.Dh),j.LFG(gt.xv,8),j.LFG(y0,8),j.LFG(_0,8),j.LFG(j.Lbi),j.LFG(j.R0b),j.LFG(Je.HU),j.LFG(k0,8),j.LFG(Wd,8),j.LFG(le.zQ,8),j.LFG(le.Qv,8),j.LFG(le.L6,8),j.LFG(le._Q,8),j.LFG(le.rT,8),j.LFG(le.lh,8),j.LFG(le.f7,8),j.LFG(Hd.nm,8))},t.\u0275prov=j.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t}(),E0=function(){var t=function(){function r(e,i,u){var l=this;(0,z.Z)(this,r),this.auth=e,this.router=i,this.store=u,this.auth.onAuthStateChanged(function(f){l._user=f})}return(0,H.Z)(r,[{key:"isLoggedIn",get:function(){return!!this._user}},{key:"userId",get:function(){return this._user.uid}},{key:"userEmail",get:function(){return this._user.email}},{key:"SignIn",value:function(i){return this.auth.signInWithEmailAndPassword(i.email,i.password)}},{key:"SignUp",value:function(i){return this.auth.createUserWithEmailAndPassword(i.email,i.password)}},{key:"SignOut",value:function(){return this.auth.signOut()}}]),r}();return t.\u0275fac=function(e){return new(e||t)(j.LFG(le.zQ),j.LFG(M.F0),j.LFG(Hm))},t.\u0275prov=j.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},25973:function(Wt,Qe,O){"use strict";var Je,z=O(73237),H=O(61120),j=O(43144),le=O(15671),M=O(60136),ce=O(57777),x=O(69808),F=O(5e3),ke=function(T){(0,M.Z)(h,T);var E=(0,ce.Z)(h);function h(){var m;return(0,le.Z)(this,h),(m=E.apply(this,arguments)).supportsDOMEvents=!0,m}return(0,j.Z)(h)}(x.w_),Ee=function(T){(0,M.Z)(h,T);var E=(0,ce.Z)(h);function h(){return(0,le.Z)(this,h),E.apply(this,arguments)}return(0,j.Z)(h,[{key:"onAndCancel",value:function(R,V,X){return R.addEventListener(V,X,!1),function(){R.removeEventListener(V,X,!1)}}},{key:"dispatchEvent",value:function(R,V){R.dispatchEvent(V)}},{key:"remove",value:function(R){R.parentNode&&R.parentNode.removeChild(R)}},{key:"createElement",value:function(R,V){return(V=V||this.getDefaultDocument()).createElement(R)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(R){return R.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(R){return R instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(R,V){return"window"===V?window:"document"===V?R:"body"===V?R.body:null}},{key:"getBaseHref",value:function(R){var V=function et(){return(Te=Te||document.querySelector("base"))?Te.getAttribute("href"):null}();return null==V?null:function rt(T){(Je=Je||document.createElement("a")).setAttribute("href",T);var E=Je.pathname;return"/"===E.charAt(0)?E:"/".concat(E)}(V)}},{key:"resetBaseElement",value:function(){Te=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(R){return(0,x.Mx)(document.cookie,R)}}],[{key:"makeCurrent",value:function(){(0,x.HT)(new h)}}]),h}(ke),Te=null,Ve=new F.OlP("TRANSITION_ID"),ve=[{provide:F.ip1,useFactory:function fe(T,E,h){return function(){h.get(F.CZH).donePromise.then(function(){for(var m=(0,x.q)(),R=E.querySelectorAll('style[ng-transition="'.concat(T,'"]')),V=0;V<R.length;V++)m.remove(R[V])})}},deps:[Ve,x.K0,F.zs3],multi:!0}],qe=function(){function T(){(0,le.Z)(this,T)}return(0,j.Z)(T,[{key:"addToWindow",value:function(h){F.dqk.getAngularTestability=function(R){var V=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],X=h.findTestabilityInTree(R,V);if(null==X)throw new Error("Could not find testability for element.");return X},F.dqk.getAllAngularTestabilities=function(){return h.getAllTestabilities()},F.dqk.getAllAngularRootElements=function(){return h.getAllRootElements()},F.dqk.frameworkStabilizers||(F.dqk.frameworkStabilizers=[]),F.dqk.frameworkStabilizers.push(function(V){var X=F.dqk.getAllAngularTestabilities(),he=X.length,Ie=!1,We=function(Zt){Ie=Ie||Zt,0==--he&&V(Ie)};X.forEach(function(tt){tt.whenStable(We)})})}},{key:"findTestabilityInTree",value:function(h,m,R){if(null==m)return null;var V=h.getTestability(m);return null!=V?V:R?(0,x.q)().isShadowRoot(m)?this.findTestabilityInTree(h,m.host,!0):this.findTestabilityInTree(h,m.parentElement,!0):null}}],[{key:"init",value:function(){(0,F.VLi)(new T)}}]),T}(),wt=function(){var T=function(){function E(){(0,le.Z)(this,E)}return(0,j.Z)(E,[{key:"build",value:function(){return new XMLHttpRequest}}]),E}();return T.\u0275fac=function(h){return new(h||T)},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),ht=new F.OlP("EventManagerPlugins"),it=function(){var T=function(){function E(h,m){var R=this;(0,le.Z)(this,E),this._zone=m,this._eventNameToPlugin=new Map,h.forEach(function(V){return V.manager=R}),this._plugins=h.slice().reverse()}return(0,j.Z)(E,[{key:"addEventListener",value:function(m,R,V){return this._findPluginFor(R).addEventListener(m,R,V)}},{key:"addGlobalEventListener",value:function(m,R,V){return this._findPluginFor(R).addGlobalEventListener(m,R,V)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(m){var R=this._eventNameToPlugin.get(m);if(R)return R;for(var V=this._plugins,X=0;X<V.length;X++){var he=V[X];if(he.supports(m))return this._eventNameToPlugin.set(m,he),he}throw new Error("No event manager plugin found for event ".concat(m))}}]),E}();return T.\u0275fac=function(h){return new(h||T)(F.LFG(ht),F.LFG(F.R0b))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),Me=function(){function T(E){(0,le.Z)(this,T),this._doc=E}return(0,j.Z)(T,[{key:"addGlobalEventListener",value:function(h,m,R){var V=(0,x.q)().getGlobalEventTarget(this._doc,h);if(!V)throw new Error("Unsupported event target ".concat(V," for event ").concat(m));return this.addEventListener(V,m,R)}}]),T}(),ct=function(){var T=function(){function E(){(0,le.Z)(this,E),this._stylesSet=new Set}return(0,j.Z)(E,[{key:"addStyles",value:function(m){var R=this,V=new Set;m.forEach(function(X){R._stylesSet.has(X)||(R._stylesSet.add(X),V.add(X))}),this.onStylesAdded(V)}},{key:"onStylesAdded",value:function(m){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),E}();return T.\u0275fac=function(h){return new(h||T)},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),gt=function(){var T=function(E){(0,M.Z)(m,E);var h=(0,ce.Z)(m);function m(R){var V;return(0,le.Z)(this,m),(V=h.call(this))._doc=R,V._hostNodes=new Map,V._hostNodes.set(R.head,[]),V}return(0,j.Z)(m,[{key:"_addStylesToHost",value:function(V,X,he){var Ie=this;V.forEach(function(We){var tt=Ie._doc.createElement("style");tt.textContent=We,he.push(X.appendChild(tt))})}},{key:"addHost",value:function(V){var X=[];this._addStylesToHost(this._stylesSet,V,X),this._hostNodes.set(V,X)}},{key:"removeHost",value:function(V){var X=this._hostNodes.get(V);X&&X.forEach(kt),this._hostNodes.delete(V)}},{key:"onStylesAdded",value:function(V){var X=this;this._hostNodes.forEach(function(he,Ie){X._addStylesToHost(V,Ie,he)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(V){return V.forEach(kt)})}}]),m}(ct);return T.\u0275fac=function(h){return new(h||T)(F.LFG(x.K0))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}();function kt(T){(0,x.q)().remove(T)}var dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$e=/%COMP%/g,Ce="_nghost-".concat("%COMP%"),at="_ngcontent-".concat("%COMP%");function Se(T,E,h){for(var m=0;m<E.length;m++){var R=E[m];Array.isArray(R)?Se(T,R,h):(R=R.replace($e,T),h.push(R))}return h}function Mt(T){return function(E){if("__ngUnwrap__"===E)return T;!1===T(E)&&(E.preventDefault(),E.returnValue=!1)}}var Tt=function(){var T=function(){function E(h,m,R){(0,le.Z)(this,E),this.eventManager=h,this.sharedStylesHost=m,this.appId=R,this.rendererByCompId=new Map,this.defaultRenderer=new jt(h)}return(0,j.Z)(E,[{key:"createRenderer",value:function(m,R){if(!m||!R)return this.defaultRenderer;switch(R.encapsulation){case F.ifc.Emulated:var V=this.rendererByCompId.get(R.id);return V||(V=new Ze(this.eventManager,this.sharedStylesHost,R,this.appId),this.rendererByCompId.set(R.id,V)),V.applyToHost(m),V;case 1:case F.ifc.ShadowDom:return new Kt(this.eventManager,this.sharedStylesHost,m,R);default:if(!this.rendererByCompId.has(R.id)){var X=Se(R.id,R.styles,[]);this.sharedStylesHost.addStyles(X),this.rendererByCompId.set(R.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),E}();return T.\u0275fac=function(h){return new(h||T)(F.LFG(it),F.LFG(gt),F.LFG(F.AFp))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),jt=function(){function T(E){(0,le.Z)(this,T),this.eventManager=E,this.data=Object.create(null),this.destroyNode=null}return(0,j.Z)(T,[{key:"destroy",value:function(){}},{key:"createElement",value:function(h,m){return m?document.createElementNS(dt[m]||m,h):document.createElement(h)}},{key:"createComment",value:function(h){return document.createComment(h)}},{key:"createText",value:function(h){return document.createTextNode(h)}},{key:"appendChild",value:function(h,m){h.appendChild(m)}},{key:"insertBefore",value:function(h,m,R){h&&h.insertBefore(m,R)}},{key:"removeChild",value:function(h,m){h&&h.removeChild(m)}},{key:"selectRootElement",value:function(h,m){var R="string"==typeof h?document.querySelector(h):h;if(!R)throw new Error('The selector "'.concat(h,'" did not match any elements'));return m||(R.textContent=""),R}},{key:"parentNode",value:function(h){return h.parentNode}},{key:"nextSibling",value:function(h){return h.nextSibling}},{key:"setAttribute",value:function(h,m,R,V){if(V){m=V+":"+m;var X=dt[V];X?h.setAttributeNS(X,m,R):h.setAttribute(m,R)}else h.setAttribute(m,R)}},{key:"removeAttribute",value:function(h,m,R){if(R){var V=dt[R];V?h.removeAttributeNS(V,m):h.removeAttribute("".concat(R,":").concat(m))}else h.removeAttribute(m)}},{key:"addClass",value:function(h,m){h.classList.add(m)}},{key:"removeClass",value:function(h,m){h.classList.remove(m)}},{key:"setStyle",value:function(h,m,R,V){V&(F.JOm.DashCase|F.JOm.Important)?h.style.setProperty(m,R,V&F.JOm.Important?"important":""):h.style[m]=R}},{key:"removeStyle",value:function(h,m,R){R&F.JOm.DashCase?h.style.removeProperty(m):h.style[m]=""}},{key:"setProperty",value:function(h,m,R){h[m]=R}},{key:"setValue",value:function(h,m){h.nodeValue=m}},{key:"listen",value:function(h,m,R){return"string"==typeof h?this.eventManager.addGlobalEventListener(h,m,Mt(R)):this.eventManager.addEventListener(h,m,Mt(R))}}]),T}(),Ze=function(T){(0,M.Z)(h,T);var E=(0,ce.Z)(h);function h(m,R,V,X){var he;(0,le.Z)(this,h),(he=E.call(this,m)).component=V;var Ie=Se(X+"-"+V.id,V.styles,[]);return R.addStyles(Ie),he.contentAttr=function be(T){return at.replace($e,T)}(X+"-"+V.id),he.hostAttr=function Ge(T){return Ce.replace($e,T)}(X+"-"+V.id),he}return(0,j.Z)(h,[{key:"applyToHost",value:function(R){(0,z.Z)((0,H.Z)(h.prototype),"setAttribute",this).call(this,R,this.hostAttr,"")}},{key:"createElement",value:function(R,V){var X=(0,z.Z)((0,H.Z)(h.prototype),"createElement",this).call(this,R,V);return(0,z.Z)((0,H.Z)(h.prototype),"setAttribute",this).call(this,X,this.contentAttr,""),X}}]),h}(jt),Kt=function(T){(0,M.Z)(h,T);var E=(0,ce.Z)(h);function h(m,R,V,X){var he;(0,le.Z)(this,h),(he=E.call(this,m)).sharedStylesHost=R,he.hostEl=V,he.shadowRoot=V.attachShadow({mode:"open"}),he.sharedStylesHost.addHost(he.shadowRoot);for(var Ie=Se(X.id,X.styles,[]),We=0;We<Ie.length;We++){var tt=document.createElement("style");tt.textContent=Ie[We],he.shadowRoot.appendChild(tt)}return he}return(0,j.Z)(h,[{key:"nodeOrShadowRoot",value:function(R){return R===this.hostEl?this.shadowRoot:R}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(R,V){return(0,z.Z)((0,H.Z)(h.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(R),V)}},{key:"insertBefore",value:function(R,V,X){return(0,z.Z)((0,H.Z)(h.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(R),V,X)}},{key:"removeChild",value:function(R,V){return(0,z.Z)((0,H.Z)(h.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(R),V)}},{key:"parentNode",value:function(R){return this.nodeOrShadowRoot((0,z.Z)((0,H.Z)(h.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(R)))}}]),h}(jt),ot=function(){var T=function(E){(0,M.Z)(m,E);var h=(0,ce.Z)(m);function m(R){return(0,le.Z)(this,m),h.call(this,R)}return(0,j.Z)(m,[{key:"supports",value:function(V){return!0}},{key:"addEventListener",value:function(V,X,he){var Ie=this;return V.addEventListener(X,he,!1),function(){return Ie.removeEventListener(V,X,he)}}},{key:"removeEventListener",value:function(V,X,he){return V.removeEventListener(X,he)}}]),m}(Me);return T.\u0275fac=function(h){return new(h||T)(F.LFG(x.K0))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),je=["alt","control","meta","shift"],Ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$t={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Xt={alt:function(E){return E.altKey},control:function(E){return E.ctrlKey},meta:function(E){return E.metaKey},shift:function(E){return E.shiftKey}},qn=function(){var T=function(E){(0,M.Z)(m,E);var h=(0,ce.Z)(m);function m(R){return(0,le.Z)(this,m),h.call(this,R)}return(0,j.Z)(m,[{key:"supports",value:function(V){return null!=m.parseEventName(V)}},{key:"addEventListener",value:function(V,X,he){var Ie=m.parseEventName(X),We=m.eventCallback(Ie.fullKey,he,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return(0,x.q)().onAndCancel(V,Ie.domEventName,We)})}}],[{key:"parseEventName",value:function(V){var X=V.toLowerCase().split("."),he=X.shift();if(0===X.length||"keydown"!==he&&"keyup"!==he)return null;var Ie=m._normalizeKey(X.pop()),We="";if(je.forEach(function(Zt){var Bt=X.indexOf(Zt);Bt>-1&&(X.splice(Bt,1),We+=Zt+".")}),We+=Ie,0!=X.length||0===Ie.length)return null;var tt={};return tt.domEventName=he,tt.fullKey=We,tt}},{key:"getEventFullKey",value:function(V){var X="",he=function Rn(T){var E=T.key;if(null==E){if(null==(E=T.keyIdentifier))return"Unidentified";E.startsWith("U+")&&(E=String.fromCharCode(parseInt(E.substring(2),16)),3===T.location&&$t.hasOwnProperty(E)&&(E=$t[E]))}return Ft[E]||E}(V);return" "===(he=he.toLowerCase())?he="space":"."===he&&(he="dot"),je.forEach(function(Ie){Ie!=he&&(0,Xt[Ie])(V)&&(X+=Ie+".")}),X+=he}},{key:"eventCallback",value:function(V,X,he){return function(Ie){m.getEventFullKey(Ie)===V&&he.runGuarded(function(){return X(Ie)})}}},{key:"_normalizeKey",value:function(V){return"esc"===V?"escape":V}}]),m}(Me);return T.\u0275fac=function(h){return new(h||T)(F.LFG(x.K0))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),yn=(0,F.eFA)(F._c5,"browser",[{provide:F.Lbi,useValue:x.bD},{provide:F.g9A,useValue:function Sn(){Ee.makeCurrent(),qe.init()},multi:!0},{provide:x.K0,useFactory:function Ir(){return(0,F.RDi)(document),document},deps:[]}]),Yn=[{provide:F.zSh,useValue:"root"},{provide:F.qLn,useFactory:function Yr(){return new F.qLn},deps:[]},{provide:ht,useClass:ot,multi:!0,deps:[x.K0,F.R0b,F.Lbi]},{provide:ht,useClass:qn,multi:!0,deps:[x.K0]},{provide:Tt,useClass:Tt,deps:[it,gt,F.AFp]},{provide:F.FYo,useExisting:Tt},{provide:ct,useExisting:gt},{provide:gt,useClass:gt,deps:[x.K0]},{provide:F.dDg,useClass:F.dDg,deps:[F.R0b]},{provide:it,useClass:it,deps:[ht,F.R0b]},{provide:x.JF,useClass:wt,deps:[]}],Mr=function(){var T=function(){function E(h){if((0,le.Z)(this,E),h)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return(0,j.Z)(E,null,[{key:"withServerTransition",value:function(m){return{ngModule:E,providers:[{provide:F.AFp,useValue:m.appId},{provide:Ve,useExisting:F.AFp},ve]}}}]),E}();return T.\u0275fac=function(h){return new(h||T)(F.LFG(T,12))},T.\u0275mod=F.oAB({type:T}),T.\u0275inj=F.cJS({providers:Yn,imports:[x.ez,F.hGG]}),T}();"undefined"!=typeof window&&window;var Le_firebase={apiKey:"AIzaSyBnqCcGfFVOLQheod3buHfek8UZ-c0eG-g",authDomain:"skateboard-ecf80.firebaseapp.com",projectId:"skateboard-ecf80",storageBucket:"skateboard-ecf80.appspot.com",messagingSenderId:"1053805359074",appId:"1:1053805359074:web:ed81428b82098634d553bb"},lt=O(12011),_t=O(24473),Dt=O(18995),pn=function(){var T=function(){function E(){(0,le.Z)(this,E)}return(0,j.Z)(E,[{key:"ngOnInit",value:function(){}}]),E}();return T.\u0275fac=function(h){return new(h||T)},T.\u0275cmp=F.Xpm({type:T,selectors:[["app-skate"]],decls:51,vars:21,consts:[[1,"py-5","text-center","middle"],[1,"col-lg-6","col-md-8","mx-auto"],[1,"py-5","direction"],[1,"skate"],[1,"skate-txt","item"],["src","../assets/img/item1.png","alt","","width","64"],[1,"headline-txt"],["src","./assets/img/item2.png","alt","","width","64"],["src","../../assets/img/item3.png","alt","","width","64"],["src","./assets/img/item4.png","alt","","width","64"],["src","./assets/img/item5.png","alt","","width","64"],["src","/assets/img/item6.png","alt","","width","64"]],template:function(h,m){1&h&&(F.TgZ(0,"main")(1,"section",0)(2,"div",1)(3,"h2"),F._uU(4),F.ALo(5,"translate"),F.qZA()()(),F.TgZ(6,"section",2)(7,"div",3)(8,"div",4),F._UZ(9,"img",5),F.TgZ(10,"div",6),F._uU(11),F.ALo(12,"translate"),F.qZA(),F.TgZ(13,"p"),F._uU(14,"$100.00"),F.qZA()(),F.TgZ(15,"div",4),F._UZ(16,"img",7),F.TgZ(17,"div",6),F._uU(18),F.ALo(19,"translate"),F.qZA(),F.TgZ(20,"p"),F._uU(21,"$100.00"),F.qZA()(),F.TgZ(22,"div",4),F._UZ(23,"img",8),F.TgZ(24,"div",6),F._uU(25),F.ALo(26,"translate"),F.qZA(),F.TgZ(27,"p"),F._uU(28,"$100.00"),F.qZA()()(),F.TgZ(29,"div",3)(30,"div",4),F._UZ(31,"img",9),F.TgZ(32,"div",6),F._uU(33),F.ALo(34,"translate"),F.qZA(),F.TgZ(35,"p"),F._uU(36,"$100.00"),F.qZA()(),F.TgZ(37,"div",4),F._UZ(38,"img",10),F.TgZ(39,"div",6),F._uU(40),F.ALo(41,"translate"),F.qZA(),F.TgZ(42,"p"),F._uU(43,"$100.00"),F.qZA()(),F.TgZ(44,"div",4),F._UZ(45,"img",11),F.TgZ(46,"div",6),F._uU(47),F.ALo(48,"translate"),F.qZA(),F.TgZ(49,"p"),F._uU(50,"$100.00"),F.qZA()()()()()),2&h&&(F.xp6(4),F.Oqu(F.lcZ(5,7,"SKATE_COLLECTION")),F.xp6(7),F.Oqu(F.lcZ(12,9,"PRODUCT_HEADLINE")),F.xp6(7),F.Oqu(F.lcZ(19,11,"PRODUCT_HEADLINE")),F.xp6(7),F.Oqu(F.lcZ(26,13,"PRODUCT_HEADLINE")),F.xp6(8),F.Oqu(F.lcZ(34,15,"PRODUCT_HEADLINE")),F.xp6(7),F.Oqu(F.lcZ(41,17,"PRODUCT_HEADLINE")),F.xp6(7),F.Oqu(F.lcZ(48,19,"PRODUCT_HEADLINE")))},pipes:[Dt.X$],styles:["main[_ngcontent-%COMP%]{margin:0 auto;width:600px;background-color:#fff}h2[_ngcontent-%COMP%]{font-family:helvetica;color:#75786f}.headline-txt[_ngcontent-%COMP%]{font-family:helvetica;color:#7e8177;font-size:15px;font-weight:bolder;text-align:center}p[_ngcontent-%COMP%]{color:#ff8c00;font-weight:bolder;font-size:25px;font-family:Arial,Helvetica,sans-serif}.skate[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;gap:120px}.skate-txt[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px}.item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:10px;width:80px}.direction[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:10px}img[_ngcontent-%COMP%]{max-width:128px}@media only screen and (max-width: 480px){main[_ngcontent-%COMP%]{width:100%}img[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{width:100%}.skate[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:20px}.skate-txt[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px}.item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:10px;width:100%}.direction[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:10px}}"]}),T}(),An=O(89635),nn=O(54004),Hr=O(95698),ni=O(73385),hi=(O(70127),(0,nn.U)(function(T){return!!T})),Rr=function(){var T=(0,j.Z)(function E(h,m){var R=this;(0,le.Z)(this,E),this.router=h,this.auth=m,this.canActivate=function(V,X){var he=V.data.authGuardPipe||function(){return hi};return R.auth.user.pipe((0,Hr.q)(1),he(V,X),(0,nn.U)(function(Ie){return"boolean"==typeof Ie?Ie:Array.isArray(Ie)?R.router.createUrlTree(Ie):R.router.parseUrl(Ie)}))}});return T.\u0275fac=function(h){return new(h||T)(F.LFG(_t.F0),F.LFG(ni.zQ))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac,providedIn:"any"}),T}(),fn=[{path:"",canActivate:[Rr],data:{authGuardPipe:function(){return E=["skate"],(0,An.z)(hi,(0,nn.U)(function(h){return h&&E||!0}));var E}},loadChildren:function(){return O.e(154).then(O.bind(O,9154)).then(function(E){return E.AuthModule})}},{path:"skate",canActivate:[Rr],data:{authGuardPipe:function(){return E=["sign-in"],(0,An.z)(hi,(0,nn.U)(function(h){return h||E}));var E}},component:pn}],Dn=function(){var T=(0,j.Z)(function E(){(0,le.Z)(this,E)});return T.\u0275fac=function(h){return new(h||T)},T.\u0275mod=F.oAB({type:T}),T.\u0275inj=F.cJS({imports:[[_t.Bz.forRoot(fn)],_t.Bz]}),T}(),er=O(54322);function Wn(T,E){if(1&T){var h=F.EpF();F.ynx(0),F.TgZ(1,"button",6),F.NdJ("click",function(){return F.CHM(h),F.oxw().goToSignIn()}),F._uU(2),F.ALo(3,"translate"),F.qZA(),F.TgZ(4,"button",6),F.NdJ("click",function(){return F.CHM(h),F.oxw().goToSignUp()}),F._uU(5),F.ALo(6,"translate"),F.qZA(),F.BQk()}2&T&&(F.xp6(2),F.Oqu(F.lcZ(3,2,"SIGN_IN")),F.xp6(3),F.Oqu(F.lcZ(6,4,"SIGN_UP")))}function oa(T,E){if(1&T){var h=F.EpF();F.TgZ(0,"button",6),F.NdJ("click",function(){return F.CHM(h),F.oxw().SignOut()}),F._uU(1),F.ALo(2,"translate"),F.qZA()}2&T&&(F.xp6(1),F.Oqu(F.lcZ(2,1,"SIGN_OUT")))}var gi=function(){var T=function(){function E(h,m,R){(0,le.Z)(this,E),this.translateService=h,this.router=m,this.auth=R}return(0,j.Z)(E,[{key:"isEn",get:function(){return this.isLanguage("en")}},{key:"isKa",get:function(){return this.isLanguage("ka")}},{key:"isLoggedIn",get:function(){return this.auth.isLoggedIn}},{key:"goToSignIn",value:function(){this.router.navigate(["sign-in"])}},{key:"goToSignUp",value:function(){this.router.navigate(["sign-up"])}},{key:"SignOut",value:function(){var m=this;this.auth.SignOut().then(function(){m.router.navigate(["sign-in"])})}},{key:"isLanguage",value:function(m){var V=this.translateService.currentLang;return V?V===m:this.translateService.defaultLang===m}},{key:"useKa",value:function(){this.translateService.use("ka")}},{key:"useEn",value:function(){this.translateService.use("en")}},{key:"ngOnInit",value:function(){}}]),E}();return T.\u0275fac=function(h){return new(h||T)(F.Y36(Dt.sK),F.Y36(_t.F0),F.Y36(er.e))},T.\u0275cmp=F.Xpm({type:T,selectors:[["app-header"]],decls:8,vars:6,consts:[[1,"nav-1"],[1,"user-flex"],[4,"ngIf"],["class","btn  me-2",3,"click",4,"ngIf"],[1,"lang","en","ms-2",3,"click"],[1,"lang","ka","ms-2",3,"click"],[1,"btn","me-2",3,"click"]],template:function(h,m){1&h&&(F.TgZ(0,"header")(1,"div",0)(2,"div")(3,"div",1),F.YNc(4,Wn,7,6,"ng-container",2),F.YNc(5,oa,3,3,"button",3),F.TgZ(6,"button",4),F.NdJ("click",function(){return m.useEn()}),F.qZA(),F.TgZ(7,"button",5),F.NdJ("click",function(){return m.useKa()}),F.qZA()()()()()),2&h&&(F.xp6(4),F.Q6J("ngIf",!m.isLoggedIn),F.xp6(1),F.Q6J("ngIf",m.isLoggedIn),F.xp6(1),F.ekj("inactive",m.isEn),F.xp6(1),F.ekj("inactive",m.isKa))},directives:[x.O5],pipes:[Dt.X$],styles:["img[_ngcontent-%COMP%]{height:35px;width:35px}.lang[_ngcontent-%COMP%]{border:none;outline:none;width:32px;height:32px}.lang.ka[_ngcontent-%COMP%]{background:url(geo.418ebe2578b228a9.png)}.lang.en[_ngcontent-%COMP%]{background:url(eng.6c12bd7dd4e3f6fa.png)}.lang.inactive[_ngcontent-%COMP%]{filter:grayscale(100%)}header[_ngcontent-%COMP%]{margin:0 auto;width:600px;background-color:#e3e6de}.nav-1[_ngcontent-%COMP%]{padding:20px}button[_ngcontent-%COMP%]{cursor:pointer}.user-flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.me-2[_ngcontent-%COMP%]{margin-right:20px}.ms-2[_ngcontent-%COMP%]{margin-right:8px}.btn[_ngcontent-%COMP%]{text-decoration:none;color:#000;padding:5px 20px;border:1px solid transparent;transition:.6s ease;font-size:15px;font-family:helvetica}.btn[_ngcontent-%COMP%]:hover{background-color:#576058;color:#fff}.btn[_ngcontent-%COMP%]:active{background-color:#7b8f7d;color:#fff}@media only screen and (max-width: 480px){header[_ngcontent-%COMP%]{width:100%}}"]}),T}(),ys=function(){var T=function(){function E(h){(0,le.Z)(this,E),this.translateService=h,this.title="skateboard"}return(0,j.Z)(E,[{key:"useKa",value:function(){this.translateService.use("ka")}},{key:"useEn",value:function(){this.translateService.use("en")}}]),E}();return T.\u0275fac=function(h){return new(h||T)(F.Y36(Dt.sK))},T.\u0275cmp=F.Xpm({type:T,selectors:[["app-root"]],decls:3,vars:0,template:function(h,m){1&h&&(F.TgZ(0,"body"),F._UZ(1,"app-header")(2,"router-outlet"),F.qZA())},directives:[gi,_t.lC],styles:["body[_ngcontent-%COMP%]{margin:0;padding:0 0 170px;background-color:#e3e6de}"]}),T}(),ii=function(){function T(E){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/assets/i18n/",m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".json";(0,le.Z)(this,T),this.http=E,this.prefix=h,this.suffix=m}return(0,j.Z)(T,[{key:"getTranslation",value:function(h){return this.http.get("".concat(this.prefix).concat(h).concat(this.suffix))}}]),T}(),Ui=O(97685),$i=O(74902),Gn=O(39646),Ua=O(69751),di=O(24351),_a=O(39300),la=(0,j.Z)(function T(){(0,le.Z)(this,T)}),mi=(0,j.Z)(function T(){(0,le.Z)(this,T)}),Ba=function(){function T(E){var h=this;(0,le.Z)(this,T),this.normalizedNames=new Map,this.lazyUpdate=null,E?this.lazyInit="string"==typeof E?function(){h.headers=new Map,E.split("\n").forEach(function(m){var R=m.indexOf(":");if(R>0){var V=m.slice(0,R),X=V.toLowerCase(),he=m.slice(R+1).trim();h.maybeSetNormalizedName(V,X),h.headers.has(X)?h.headers.get(X).push(he):h.headers.set(X,[he])}})}:function(){h.headers=new Map,Object.keys(E).forEach(function(m){var R=E[m],V=m.toLowerCase();"string"==typeof R&&(R=[R]),R.length>0&&(h.headers.set(V,R),h.maybeSetNormalizedName(m,V))})}:this.headers=new Map}return(0,j.Z)(T,[{key:"has",value:function(h){return this.init(),this.headers.has(h.toLowerCase())}},{key:"get",value:function(h){this.init();var m=this.headers.get(h.toLowerCase());return m&&m.length>0?m[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(h){return this.init(),this.headers.get(h.toLowerCase())||null}},{key:"append",value:function(h,m){return this.clone({name:h,value:m,op:"a"})}},{key:"set",value:function(h,m){return this.clone({name:h,value:m,op:"s"})}},{key:"delete",value:function(h,m){return this.clone({name:h,value:m,op:"d"})}},{key:"maybeSetNormalizedName",value:function(h,m){this.normalizedNames.has(m)||this.normalizedNames.set(m,h)}},{key:"init",value:function(){var h=this;this.lazyInit&&(this.lazyInit instanceof T?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(m){return h.applyUpdate(m)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(h){var m=this;h.init(),Array.from(h.headers.keys()).forEach(function(R){m.headers.set(R,h.headers.get(R)),m.normalizedNames.set(R,h.normalizedNames.get(R))})}},{key:"clone",value:function(h){var m=new T;return m.lazyInit=this.lazyInit&&this.lazyInit instanceof T?this.lazyInit:this,m.lazyUpdate=(this.lazyUpdate||[]).concat([h]),m}},{key:"applyUpdate",value:function(h){var m=h.name.toLowerCase();switch(h.op){case"a":case"s":var R=h.value;if("string"==typeof R&&(R=[R]),0===R.length)return;this.maybeSetNormalizedName(h.name,m);var V=("a"===h.op?this.headers.get(m):void 0)||[];V.push.apply(V,(0,$i.Z)(R)),this.headers.set(m,V);break;case"d":var X=h.value;if(X){var he=this.headers.get(m);if(!he)return;0===(he=he.filter(function(Ie){return-1===X.indexOf(Ie)})).length?(this.headers.delete(m),this.normalizedNames.delete(m)):this.headers.set(m,he)}else this.headers.delete(m),this.normalizedNames.delete(m)}}},{key:"forEach",value:function(h){var m=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(R){return h(m.normalizedNames.get(R),m.headers.get(R))})}}]),T}(),qi=function(){function T(){(0,le.Z)(this,T)}return(0,j.Z)(T,[{key:"encodeKey",value:function(h){return Vu(h)}},{key:"encodeValue",value:function(h){return Vu(h)}},{key:"decodeKey",value:function(h){return decodeURIComponent(h)}},{key:"decodeValue",value:function(h){return decodeURIComponent(h)}}]),T}();function Bi(T,E){var h=new Map;return T.length>0&&T.replace(/^\?/,"").split("&").forEach(function(R){var V=R.indexOf("="),X=-1==V?[E.decodeKey(R),""]:[E.decodeKey(R.slice(0,V)),E.decodeValue(R.slice(V+1))],he=(0,Ui.Z)(X,2),Ie=he[0],We=he[1],tt=h.get(Ie)||[];tt.push(We),h.set(Ie,tt)}),h}var Gr=/%(\d[a-f0-9])/gi,Ja={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Vu(T){return encodeURIComponent(T).replace(Gr,function(E,h){var m;return null!==(m=Ja[h])&&void 0!==m?m:E})}function Oi(T){return"".concat(T)}var Br=function(){function T(){var E=this,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,le.Z)(this,T),this.updates=null,this.cloneFrom=null,this.encoder=h.encoder||new qi,h.fromString){if(h.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Bi(h.fromString,this.encoder)}else h.fromObject?(this.map=new Map,Object.keys(h.fromObject).forEach(function(m){var R=h.fromObject[m];E.map.set(m,Array.isArray(R)?R:[R])})):this.map=null}return(0,j.Z)(T,[{key:"has",value:function(h){return this.init(),this.map.has(h)}},{key:"get",value:function(h){this.init();var m=this.map.get(h);return m?m[0]:null}},{key:"getAll",value:function(h){return this.init(),this.map.get(h)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(h,m){return this.clone({param:h,value:m,op:"a"})}},{key:"appendAll",value:function(h){var m=[];return Object.keys(h).forEach(function(R){var V=h[R];Array.isArray(V)?V.forEach(function(X){m.push({param:R,value:X,op:"a"})}):m.push({param:R,value:V,op:"a"})}),this.clone(m)}},{key:"set",value:function(h,m){return this.clone({param:h,value:m,op:"s"})}},{key:"delete",value:function(h,m){return this.clone({param:h,value:m,op:"d"})}},{key:"toString",value:function(){var h=this;return this.init(),this.keys().map(function(m){var R=h.encoder.encodeKey(m);return h.map.get(m).map(function(V){return R+"="+h.encoder.encodeValue(V)}).join("&")}).filter(function(m){return""!==m}).join("&")}},{key:"clone",value:function(h){var m=new T({encoder:this.encoder});return m.cloneFrom=this.cloneFrom||this,m.updates=(this.updates||[]).concat(h),m}},{key:"init",value:function(){var h=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(m){return h.map.set(m,h.cloneFrom.map.get(m))}),this.updates.forEach(function(m){switch(m.op){case"a":case"s":var R=("a"===m.op?h.map.get(m.param):void 0)||[];R.push(Oi(m.value)),h.map.set(m.param,R);break;case"d":if(void 0===m.value){h.map.delete(m.param);break}var V=h.map.get(m.param)||[],X=V.indexOf(Oi(m.value));-1!==X&&V.splice(X,1),V.length>0?h.map.set(m.param,V):h.map.delete(m.param)}}),this.cloneFrom=this.updates=null)}}]),T}(),Ms=function(){function T(){(0,le.Z)(this,T),this.map=new Map}return(0,j.Z)(T,[{key:"set",value:function(h,m){return this.map.set(h,m),this}},{key:"get",value:function(h){return this.map.has(h)||this.map.set(h,h.defaultValue()),this.map.get(h)}},{key:"delete",value:function(h){return this.map.delete(h),this}},{key:"has",value:function(h){return this.map.has(h)}},{key:"keys",value:function(){return this.map.keys()}}]),T}();function ze(T){return"undefined"!=typeof ArrayBuffer&&T instanceof ArrayBuffer}function ut(T){return"undefined"!=typeof Blob&&T instanceof Blob}function yt(T){return"undefined"!=typeof FormData&&T instanceof FormData}var St=function(){function T(E,h,m,R){var V;if((0,le.Z)(this,T),this.url=h,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=E.toUpperCase(),function cs(T){switch(T){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||R?(this.body=void 0!==m?m:null,V=R):V=m,V&&(this.reportProgress=!!V.reportProgress,this.withCredentials=!!V.withCredentials,V.responseType&&(this.responseType=V.responseType),V.headers&&(this.headers=V.headers),V.context&&(this.context=V.context),V.params&&(this.params=V.params)),this.headers||(this.headers=new Ba),this.context||(this.context=new Ms),this.params){var X=this.params.toString();if(0===X.length)this.urlWithParams=h;else{var he=h.indexOf("?");this.urlWithParams=h+(-1===he?"?":he<h.length-1?"&":"")+X}}else this.params=new Br,this.urlWithParams=h}return(0,j.Z)(T,[{key:"serializeBody",value:function(){return null===this.body?null:ze(this.body)||ut(this.body)||yt(this.body)||function It(T){return"undefined"!=typeof URLSearchParams&&T instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Br?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||yt(this.body)?null:ut(this.body)?this.body.type||null:ze(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Br?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}},{key:"clone",value:function(){var m,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},R=h.method||this.method,V=h.url||this.url,X=h.responseType||this.responseType,he=void 0!==h.body?h.body:this.body,Ie=void 0!==h.withCredentials?h.withCredentials:this.withCredentials,We=void 0!==h.reportProgress?h.reportProgress:this.reportProgress,tt=h.headers||this.headers,Zt=h.params||this.params,Bt=null!==(m=h.context)&&void 0!==m?m:this.context;return void 0!==h.setHeaders&&(tt=Object.keys(h.setHeaders).reduce(function(gn,In){return gn.set(In,h.setHeaders[In])},tt)),h.setParams&&(Zt=Object.keys(h.setParams).reduce(function(gn,In){return gn.set(In,h.setParams[In])},Zt)),new T(R,V,he,{params:Zt,headers:tt,context:Bt,reportProgress:We,responseType:X,withCredentials:Ie})}}]),T}(),At=function(){return(At=At||{})[At.Sent=0]="Sent",At[At.UploadProgress=1]="UploadProgress",At[At.ResponseHeader=2]="ResponseHeader",At[At.DownloadProgress=3]="DownloadProgress",At[At.Response=4]="Response",At[At.User=5]="User",At}(),ln=(0,j.Z)(function T(E){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";(0,le.Z)(this,T),this.headers=E.headers||new Ba,this.status=void 0!==E.status?E.status:h,this.statusText=E.statusText||m,this.url=E.url||null,this.ok=this.status>=200&&this.status<300}),Vr=function(T){(0,M.Z)(h,T);var E=(0,ce.Z)(h);function h(){var m,R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,le.Z)(this,h),(m=E.call(this,R)).type=At.ResponseHeader,m}return(0,j.Z)(h,[{key:"clone",value:function(){var R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new h({headers:R.headers||this.headers,status:void 0!==R.status?R.status:this.status,statusText:R.statusText||this.statusText,url:R.url||this.url||void 0})}}]),h}(ln),Nr=function(T){(0,M.Z)(h,T);var E=(0,ce.Z)(h);function h(){var m,R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,le.Z)(this,h),(m=E.call(this,R)).type=At.Response,m.body=void 0!==R.body?R.body:null,m}return(0,j.Z)(h,[{key:"clone",value:function(){var R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new h({body:void 0!==R.body?R.body:this.body,headers:R.headers||this.headers,status:void 0!==R.status?R.status:this.status,statusText:R.statusText||this.statusText,url:R.url||this.url||void 0})}}]),h}(ln),yi=function(T){(0,M.Z)(h,T);var E=(0,ce.Z)(h);function h(m){var R;return(0,le.Z)(this,h),(R=E.call(this,m,0,"Unknown Error")).name="HttpErrorResponse",R.ok=!1,R.message=R.status>=200&&R.status<300?"Http failure during parsing for ".concat(m.url||"(unknown url)"):"Http failure response for ".concat(m.url||"(unknown url)",": ").concat(m.status," ").concat(m.statusText),R.error=m.error||null,R}return(0,j.Z)(h)}(ln);function ai(T,E){return{body:E,headers:T.headers,context:T.context,observe:T.observe,params:T.params,reportProgress:T.reportProgress,responseType:T.responseType,withCredentials:T.withCredentials}}var wr=function(){var T=function(){function E(h){(0,le.Z)(this,E),this.handler=h}return(0,j.Z)(E,[{key:"request",value:function(m,R){var he,V=this,X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(m instanceof St)he=m;else{var Ie=void 0;Ie=X.headers instanceof Ba?X.headers:new Ba(X.headers);var We=void 0;X.params&&(We=X.params instanceof Br?X.params:new Br({fromObject:X.params})),he=new St(m,R,void 0!==X.body?X.body:null,{headers:Ie,context:X.context,params:We,reportProgress:X.reportProgress,responseType:X.responseType||"json",withCredentials:X.withCredentials})}var tt=(0,Gn.of)(he).pipe((0,di.b)(function(Bt){return V.handler.handle(Bt)}));if(m instanceof St||"events"===X.observe)return tt;var Zt=tt.pipe((0,_a.h)(function(Bt){return Bt instanceof Nr}));switch(X.observe||"body"){case"body":switch(he.responseType){case"arraybuffer":return Zt.pipe((0,nn.U)(function(Bt){if(null!==Bt.body&&!(Bt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Bt.body}));case"blob":return Zt.pipe((0,nn.U)(function(Bt){if(null!==Bt.body&&!(Bt.body instanceof Blob))throw new Error("Response is not a Blob.");return Bt.body}));case"text":return Zt.pipe((0,nn.U)(function(Bt){if(null!==Bt.body&&"string"!=typeof Bt.body)throw new Error("Response is not a string.");return Bt.body}));default:return Zt.pipe((0,nn.U)(function(Bt){return Bt.body}))}case"response":return Zt;default:throw new Error("Unreachable: unhandled observe type ".concat(X.observe,"}"))}}},{key:"delete",value:function(m){var R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",m,R)}},{key:"get",value:function(m){var R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",m,R)}},{key:"head",value:function(m){var R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",m,R)}},{key:"jsonp",value:function(m,R){return this.request("JSONP",m,{params:(new Br).append(R,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(m){var R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",m,R)}},{key:"patch",value:function(m,R){var V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",m,ai(V,R))}},{key:"post",value:function(m,R){var V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",m,ai(V,R))}},{key:"put",value:function(m,R){var V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",m,ai(V,R))}}]),E}();return T.\u0275fac=function(h){return new(h||T)(F.LFG(la))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),Va=function(){function T(E,h){(0,le.Z)(this,T),this.next=E,this.interceptor=h}return(0,j.Z)(T,[{key:"handle",value:function(h){return this.interceptor.intercept(h,this.next)}}]),T}(),Bn=new F.OlP("HTTP_INTERCEPTORS"),wa=function(){var T=function(){function E(){(0,le.Z)(this,E)}return(0,j.Z)(E,[{key:"intercept",value:function(m,R){return R.handle(m)}}]),E}();return T.\u0275fac=function(h){return new(h||T)},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),iu=/^\)\]\}',?\n/,ca=function(){var T=function(){function E(h){(0,le.Z)(this,E),this.xhrFactory=h}return(0,j.Z)(E,[{key:"handle",value:function(m){var R=this;if("JSONP"===m.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ua.y(function(V){var X=R.xhrFactory.build();if(X.open(m.method,m.urlWithParams),m.withCredentials&&(X.withCredentials=!0),m.headers.forEach(function(br,Zn){return X.setRequestHeader(br,Zn.join(","))}),m.headers.has("Accept")||X.setRequestHeader("Accept","application/json, text/plain, */*"),!m.headers.has("Content-Type")){var he=m.detectContentTypeHeader();null!==he&&X.setRequestHeader("Content-Type",he)}if(m.responseType){var Ie=m.responseType.toLowerCase();X.responseType="json"!==Ie?Ie:"text"}var We=m.serializeBody(),tt=null,Zt=function(){if(null!==tt)return tt;var Zn=X.statusText||"OK",rr=new Ba(X.getAllResponseHeaders()),Jn=function ki(T){return"responseURL"in T&&T.responseURL?T.responseURL:/^X-Request-URL:/m.test(T.getAllResponseHeaders())?T.getResponseHeader("X-Request-URL"):null}(X)||m.url;return tt=new Vr({headers:rr,status:X.status,statusText:Zn,url:Jn})},Bt=function(){var Zn=Zt(),rr=Zn.headers,Jn=Zn.status,Gi=Zn.statusText,vi=Zn.url,Ti=null;204!==Jn&&(Ti=void 0===X.response?X.responseText:X.response),0===Jn&&(Jn=Ti?200:0);var gs=Jn>=200&&Jn<300;if("json"===m.responseType&&"string"==typeof Ti){var ro=Ti;Ti=Ti.replace(iu,"");try{Ti=""!==Ti?JSON.parse(Ti):null}catch(va){Ti=ro,gs&&(gs=!1,Ti={error:va,text:Ti})}}gs?(V.next(new Nr({body:Ti,headers:rr,status:Jn,statusText:Gi,url:vi||void 0})),V.complete()):V.error(new yi({error:Ti,headers:rr,status:Jn,statusText:Gi,url:vi||void 0}))},gn=function(Zn){var rr=Zt(),Gi=new yi({error:Zn,status:X.status||0,statusText:X.statusText||"Unknown Error",url:rr.url||void 0});V.error(Gi)},In=!1,$n=function(Zn){In||(V.next(Zt()),In=!0);var rr={type:At.DownloadProgress,loaded:Zn.loaded};Zn.lengthComputable&&(rr.total=Zn.total),"text"===m.responseType&&!!X.responseText&&(rr.partialText=X.responseText),V.next(rr)},or=function(Zn){var rr={type:At.UploadProgress,loaded:Zn.loaded};Zn.lengthComputable&&(rr.total=Zn.total),V.next(rr)};return X.addEventListener("load",Bt),X.addEventListener("error",gn),X.addEventListener("timeout",gn),X.addEventListener("abort",gn),m.reportProgress&&(X.addEventListener("progress",$n),null!==We&&X.upload&&X.upload.addEventListener("progress",or)),X.send(We),V.next({type:At.Sent}),function(){X.removeEventListener("error",gn),X.removeEventListener("abort",gn),X.removeEventListener("load",Bt),X.removeEventListener("timeout",gn),m.reportProgress&&(X.removeEventListener("progress",$n),null!==We&&X.upload&&X.upload.removeEventListener("progress",or)),X.readyState!==X.DONE&&X.abort()}})}}]),E}();return T.\u0275fac=function(h){return new(h||T)(F.LFG(x.JF))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),Tu=new F.OlP("XSRF_COOKIE_NAME"),Yi=new F.OlP("XSRF_HEADER_NAME"),Ea=(0,j.Z)(function T(){(0,le.Z)(this,T)}),oo=function(){var T=function(){function E(h,m,R){(0,le.Z)(this,E),this.doc=h,this.platform=m,this.cookieName=R,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return(0,j.Z)(E,[{key:"getToken",value:function(){if("server"===this.platform)return null;var m=this.doc.cookie||"";return m!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,x.Mx)(m,this.cookieName),this.lastCookieString=m),this.lastToken}}]),E}();return T.\u0275fac=function(h){return new(h||T)(F.LFG(x.K0),F.LFG(F.Lbi),F.LFG(Tu))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),au=function(){var T=function(){function E(h,m){(0,le.Z)(this,E),this.tokenService=h,this.headerName=m}return(0,j.Z)(E,[{key:"intercept",value:function(m,R){var V=m.url.toLowerCase();if("GET"===m.method||"HEAD"===m.method||V.startsWith("http://")||V.startsWith("https://"))return R.handle(m);var X=this.tokenService.getToken();return null!==X&&!m.headers.has(this.headerName)&&(m=m.clone({headers:m.headers.set(this.headerName,X)})),R.handle(m)}}]),E}();return T.\u0275fac=function(h){return new(h||T)(F.LFG(Ea),F.LFG(Yi))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),ju=function(){var T=function(){function E(h,m){(0,le.Z)(this,E),this.backend=h,this.injector=m,this.chain=null}return(0,j.Z)(E,[{key:"handle",value:function(m){if(null===this.chain){var R=this.injector.get(Bn,[]);this.chain=R.reduceRight(function(V,X){return new Va(V,X)},this.backend)}return this.chain.handle(m)}}]),E}();return T.\u0275fac=function(h){return new(h||T)(F.LFG(mi),F.LFG(F.zs3))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),ks=function(){var T=function(){function E(){(0,le.Z)(this,E)}return(0,j.Z)(E,null,[{key:"disable",value:function(){return{ngModule:E,providers:[{provide:au,useClass:wa}]}}},{key:"withOptions",value:function(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:E,providers:[m.cookieName?{provide:Tu,useValue:m.cookieName}:[],m.headerName?{provide:Yi,useValue:m.headerName}:[]]}}}]),E}();return T.\u0275fac=function(h){return new(h||T)},T.\u0275mod=F.oAB({type:T}),T.\u0275inj=F.cJS({providers:[au,{provide:Bn,useExisting:au,multi:!0},{provide:Ea,useClass:oo},{provide:Tu,useValue:"XSRF-TOKEN"},{provide:Yi,useValue:"X-XSRF-TOKEN"}]}),T}(),Vi=function(){var T=(0,j.Z)(function E(){(0,le.Z)(this,E)});return T.\u0275fac=function(h){return new(h||T)},T.\u0275mod=F.oAB({type:T}),T.\u0275inj=F.cJS({providers:[wr,{provide:la,useClass:ju},ca,{provide:mi,useExisting:ca}],imports:[[ks.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),T}(),$=(0,j.Z)(function T(){(0,le.Z)(this,T)}),Q=(0,j.Z)(function T(){(0,le.Z)(this,T)}),se="*";function mt(T){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:T,options:E}}function Ot(T){return{type:6,styles:T,offset:null}}function Si(T){Promise.resolve(null).then(T)}var vr=function(){function T(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,le.Z)(this,T),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=E+h}return(0,j.Z)(T,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(h){return h()}),this._onDoneFns=[])}},{key:"onStart",value:function(h){this._onStartFns.push(h)}},{key:"onDone",value:function(h){this._onDoneFns.push(h)}},{key:"onDestroy",value:function(h){this._onDestroyFns.push(h)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var h=this;Si(function(){return h._onFinish()})}},{key:"_onStart",value:function(){this._onStartFns.forEach(function(h){return h()}),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(h){return h()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this._started=!1}},{key:"setPosition",value:function(h){this._position=this.totalTime?h*this.totalTime:1}},{key:"getPosition",value:function(){return this.totalTime?this._position/this.totalTime:1}},{key:"triggerCallback",value:function(h){var m="start"==h?this._onStartFns:this._onDoneFns;m.forEach(function(R){return R()}),m.length=0}}]),T}(),li=function(){function T(E){var h=this;(0,le.Z)(this,T),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=E;var m=0,R=0,V=0,X=this.players.length;0==X?Si(function(){return h._onFinish()}):this.players.forEach(function(he){he.onDone(function(){++m==X&&h._onFinish()}),he.onDestroy(function(){++R==X&&h._onDestroy()}),he.onStart(function(){++V==X&&h._onStart()})}),this.totalTime=this.players.reduce(function(he,Ie){return Math.max(he,Ie.totalTime)},0)}return(0,j.Z)(T,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(h){return h()}),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach(function(h){return h.init()})}},{key:"onStart",value:function(h){this._onStartFns.push(h)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(h){return h()}),this._onStartFns=[])}},{key:"onDone",value:function(h){this._onDoneFns.push(h)}},{key:"onDestroy",value:function(h){this._onDestroyFns.push(h)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(h){return h.play()})}},{key:"pause",value:function(){this.players.forEach(function(h){return h.pause()})}},{key:"restart",value:function(){this.players.forEach(function(h){return h.restart()})}},{key:"finish",value:function(){this._onFinish(),this.players.forEach(function(h){return h.finish()})}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(h){return h.destroy()}),this._onDestroyFns.forEach(function(h){return h()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach(function(h){return h.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(h){var m=h*this.totalTime;this.players.forEach(function(R){var V=R.totalTime?Math.min(1,m/R.totalTime):1;R.setPosition(V)})}},{key:"getPosition",value:function(){var h=this.players.reduce(function(m,R){return null===m||R.totalTime>m.totalTime?R:m},null);return null!=h?h.getPosition():0}},{key:"beforeDestroy",value:function(){this.players.forEach(function(h){h.beforeDestroy&&h.beforeDestroy()})}},{key:"triggerCallback",value:function(h){var m="start"==h?this._onStartFns:this._onDoneFns;m.forEach(function(R){return R()}),m.length=0}}]),T}(),ba=O(37762),ar=!1;function lo(T){return new F.vHH(3e3,ar)}function ts(T){return new F.vHH(3502,ar)}function Fs(){return new F.vHH(3300,ar)}function Sa(T){return new F.vHH(3504,ar)}function Bl(){return"undefined"!=typeof window&&void 0!==window.document}function Oo(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Ga(T){switch(T.length){case 0:return new vr;case 1:return T[0];default:return new li(T)}}function cu(T,E,h,m){var R=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},V=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},X=[],he=[],Ie=-1,We=null;if(m.forEach(function(tt){var Zt=tt.offset,Bt=Zt==Ie,gn=Bt&&We||{};Object.keys(tt).forEach(function(In){var $n=In,or=tt[In];if("offset"!==In)switch($n=E.normalizePropertyName($n,X),or){case"!":or=R[In];break;case se:or=V[In];break;default:or=E.normalizeStyleValue(In,$n,or,X)}gn[$n]=or}),Bt||he.push(gn),We=gn,Ie=Zt}),X.length)throw ts();return he}function $u(T,E,h,m){switch(E){case"start":T.onStart(function(){return m(h&&za(h,"start",T))});break;case"done":T.onDone(function(){return m(h&&za(h,"done",T))});break;case"destroy":T.onDestroy(function(){return m(h&&za(h,"destroy",T))})}}function za(T,E,h){var m=h.totalTime,V=fu(T.element,T.triggerName,T.fromState,T.toState,E||T.phaseName,null==m?T.totalTime:m,!!h.disabled),X=T._data;return null!=X&&(V._data=X),V}function fu(T,E,h,m){var R=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",V=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,X=arguments.length>6?arguments[6]:void 0;return{element:T,triggerName:E,fromState:h,toState:m,phaseName:R,totalTime:V,disabled:!!X}}function _i(T,E,h){var m;return T instanceof Map?(m=T.get(E))||T.set(E,m=h):(m=T[E])||(m=T[E]=h),m}function wl(T){var E=T.indexOf(":");return[T.substring(1,E),T.substr(E+1)]}var vo=function(E,h){return!1},Xi=function(E,h,m){return[]},ns=null;function Pr(T){var E=T.parentNode||T.host;return E===ns?null:E}(Oo()||"undefined"!=typeof Element)&&(Bl()?(ns=function(){return document.documentElement}(),vo=function(E,h){for(;h;){if(h===E)return!0;h=Pr(h)}return!1}):vo=function(E,h){return E.contains(h)},Xi=function(E,h,m){if(m)return Array.from(E.querySelectorAll(h));var R=E.querySelector(h);return R?[R]:[]});var Au=null,No=!1;function Lo(T){Au||(Au=function Vl(){return"undefined"!=typeof document?document.body:null}()||{},No=!!Au.style&&"WebkitAppearance"in Au.style);var E=!0;return Au.style&&!function el(T){return"ebkit"==T.substring(1,6)}(T)&&!(E=T in Au.style)&&No&&(E="Webkit"+T.charAt(0).toUpperCase()+T.substr(1)in Au.style),E}var Cr=vo,_s=Xi,Ru=function(){var T=function(){function E(){(0,le.Z)(this,E)}return(0,j.Z)(E,[{key:"validateStyleProperty",value:function(m){return Lo(m)}},{key:"matchesElement",value:function(m,R){return!1}},{key:"containsElement",value:function(m,R){return Cr(m,R)}},{key:"getParentElement",value:function(m){return Pr(m)}},{key:"query",value:function(m,R,V){return _s(m,R,V)}},{key:"computeStyle",value:function(m,R,V){return V||""}},{key:"animate",value:function(m,R,V,X,he){return new vr(V,X)}}]),E}();return T.\u0275fac=function(h){return new(h||T)},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),hu=function(){var T=(0,j.Z)(function E(){(0,le.Z)(this,E)});return T.NOOP=new Ru,T}(),qu="ng-enter",Fo="ng-leave",aa="ng-trigger",$s=".ng-trigger",fa="ng-animating",tl=".ng-animating";function rs(T){if("number"==typeof T)return T;var E=T.match(/^(-?[\.\d]+)(m?s)/);return!E||E.length<2?0:Yu(parseFloat(E[1]),E[2])}function Yu(T,E){return"s"===E?1e3*T:T}function wi(T,E,h){return T.hasOwnProperty("duration")?T:function nl(T,E,h){var R,V=0,X="";if("string"==typeof T){var he=T.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===he)return E.push(lo()),{duration:0,delay:0,easing:""};R=Yu(parseFloat(he[1]),he[2]);var Ie=he[3];null!=Ie&&(V=Yu(parseFloat(Ie),he[4]));var We=he[5];We&&(X=We)}else R=T;if(!h){var tt=!1,Zt=E.length;R<0&&(E.push(function co(){return new F.vHH(3100,ar)}()),tt=!0),V<0&&(E.push(function Kn(){return new F.vHH(3101,ar)}()),tt=!0),tt&&E.splice(Zt,0,lo())}return{duration:R,delay:V,easing:X}}(T,E,h)}function Ta(T){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(T).forEach(function(h){E[h]=T[h]}),E}function qs(T,E){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(E)for(var m in T)h[m]=T[m];else Ta(T,h);return h}function Ys(T,E,h){return h?E+":"+h+";":""}function ws(T){for(var E="",h=0;h<T.style.length;h++){var m=T.style.item(h);E+=Ys(0,m,T.style.getPropertyValue(m))}for(var R in T.style)T.style.hasOwnProperty(R)&&!R.startsWith("_")&&(E+=Ys(0,U(R),T.style[R]));T.setAttribute("style",E)}function zr(T,E,h){T.style&&(Object.keys(E).forEach(function(m){var R=A(m);h&&!h.hasOwnProperty(m)&&(h[m]=T.style[R]),T.style[R]=E[m]}),Oo()&&ws(T))}function fs(T,E){T.style&&(Object.keys(E).forEach(function(h){var m=A(h);T.style[m]=""}),Oo()&&ws(T))}function js(T){return Array.isArray(T)?1==T.length?T[0]:mt(T):T}var du=new RegExp("".concat("{{","\\s*(.+?)\\s*").concat("}}"),"g");function mo(T){var E=[];if("string"==typeof T){for(var h;h=du.exec(T);)E.push(h[1]);du.lastIndex=0}return E}function Pu(T,E,h){var m=T.toString(),R=m.replace(du,function(V,X){var he=E[X];return E.hasOwnProperty(X)||(h.push(function fo(T){return new F.vHH(3003,ar)}()),he=""),he.toString()});return R==m?T:R}function Ei(T){for(var E=[],h=T.next();!h.done;)E.push(h.value),h=T.next();return E}var yo=/-+([a-z0-9])/g;function A(T){return T.replace(yo,function(){for(var E=arguments.length,h=new Array(E),m=0;m<E;m++)h[m]=arguments[m];return h[1].toUpperCase()})}function U(T){return T.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function C(T,E){return 0===T||0===E}function D(T,E,h){var m=Object.keys(h);if(m.length&&E.length){var R=E[0],V=[];if(m.forEach(function(Ie){R.hasOwnProperty(Ie)||V.push(Ie),R[Ie]=h[Ie]}),V.length)for(var X=function(){var We=E[he];V.forEach(function(tt){We[tt]=J(T,tt)})},he=1;he<E.length;he++)X()}return E}function N(T,E,h){switch(E.type){case 7:return T.visitTrigger(E,h);case 0:return T.visitState(E,h);case 1:return T.visitTransition(E,h);case 2:return T.visitSequence(E,h);case 3:return T.visitGroup(E,h);case 4:return T.visitAnimate(E,h);case 5:return T.visitKeyframes(E,h);case 6:return T.visitStyle(E,h);case 8:return T.visitReference(E,h);case 9:return T.visitAnimateChild(E,h);case 10:return T.visitAnimateRef(E,h);case 11:return T.visitQuery(E,h);case 12:return T.visitStagger(E,h);default:throw function Ha(T){return new F.vHH(3004,ar)}()}}function J(T,E){return window.getComputedStyle(T)[E]}function sr(T,E){var h=[];return"string"==typeof T?T.split(/\s*,\s*/).forEach(function(m){return function xi(T,E,h){if(":"==T[0]){var m=function ea(T,E){switch(T){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(h,m){return parseFloat(m)>parseFloat(h)};case":decrement":return function(h,m){return parseFloat(m)<parseFloat(h)};default:return E.push(function zu(T){return new F.vHH(3016,ar)}()),"* => *"}}(T,h);if("function"==typeof m)return void E.push(m);T=m}var R=T.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==R||R.length<4)return h.push(function Ul(T){return new F.vHH(3015,ar)}()),E;var V=R[1],X=R[2],he=R[3];E.push(vu(V,he)),"<"==X[0]&&!("*"==V&&"*"==he)&&E.push(vu(he,V))}(m,h,E)}):h.push(T),h}var ha=new Set(["true","1"]),Wa=new Set(["false","0"]);function vu(T,E){var h=ha.has(T)||Wa.has(T),m=ha.has(E)||Wa.has(E);return function(R,V){var X="*"==T||T==R,he="*"==E||E==V;return!X&&h&&"boolean"==typeof R&&(X=R?ha.has(T):Wa.has(T)),!he&&m&&"boolean"==typeof V&&(he=V?ha.has(E):Wa.has(E)),X&&he}}var ei=new RegExp("s*".concat(":self","s*,?"),"g");function Hs(T,E,h,m){return new Gs(T).build(E,h,m)}var Gs=function(){function T(E){(0,le.Z)(this,T),this._driver=E}return(0,j.Z)(T,[{key:"build",value:function(h,m,R){var V=new El(m);this._resetContextStyleTimingState(V);var X=N(this,js(h),V);return V.unsupportedCSSPropertiesFound.size&&(0,$i.Z)(V.unsupportedCSSPropertiesFound.keys()),X}},{key:"_resetContextStyleTimingState",value:function(h){h.currentQuerySelector="",h.collectedStyles={},h.collectedStyles[""]={},h.currentTime=0}},{key:"visitTrigger",value:function(h,m){var R=this,V=m.queryCount=0,X=m.depCount=0,he=[],Ie=[];return"@"==h.name.charAt(0)&&m.errors.push(function Cu(){return new F.vHH(3006,ar)}()),h.definitions.forEach(function(We){if(R._resetContextStyleTimingState(m),0==We.type){var tt=We,Zt=tt.name;Zt.toString().split(/\s*,\s*/).forEach(function(gn){tt.name=gn,he.push(R.visitState(tt,m))}),tt.name=Zt}else if(1==We.type){var Bt=R.visitTransition(We,m);V+=Bt.queryCount,X+=Bt.depCount,Ie.push(Bt)}else m.errors.push(function yl(){return new F.vHH(3007,ar)}())}),{type:7,name:h.name,states:he,transitions:Ie,queryCount:V,depCount:X,options:null}}},{key:"visitState",value:function(h,m){var R=this.visitStyle(h.styles,m),V=h.options&&h.options.params||null;if(R.containsDynamicStyles){var X=new Set,he=V||{};R.styles.forEach(function(We){if(Er(We)){var tt=We;Object.keys(tt).forEach(function(Zt){mo(tt[Zt]).forEach(function(Bt){he.hasOwnProperty(Bt)||X.add(Bt)})})}}),X.size&&(Ei(X.values()),m.errors.push(function Xa(T,E){return new F.vHH(3008,ar)}()))}return{type:0,name:h.name,style:R,options:V?{params:V}:null}}},{key:"visitTransition",value:function(h,m){m.queryCount=0,m.depCount=0;var R=N(this,js(h.animation),m);return{type:1,matchers:sr(h.expr,m.errors),animation:R,queryCount:m.queryCount,depCount:m.depCount,options:Ju(h.options)}}},{key:"visitSequence",value:function(h,m){var R=this;return{type:2,steps:h.steps.map(function(V){return N(R,V,m)}),options:Ju(h.options)}}},{key:"visitGroup",value:function(h,m){var R=this,V=m.currentTime,X=0,he=h.steps.map(function(Ie){m.currentTime=V;var We=N(R,Ie,m);return X=Math.max(X,m.currentTime),We});return m.currentTime=X,{type:3,steps:he,options:Ju(h.options)}}},{key:"visitAnimate",value:function(h,m){var R=function tr(T,E){var h=null;if(T.hasOwnProperty("duration"))h=T;else if("number"==typeof T)return Xu(wi(T,E).duration,0,"");var R=T,V=R.split(/\s+/).some(function(he){return"{"==he.charAt(0)&&"{"==he.charAt(1)});if(V){var X=Xu(0,0,"");return X.dynamic=!0,X.strValue=R,X}return Xu((h=h||wi(R,E)).duration,h.delay,h.easing)}(h.timings,m.errors);m.currentAnimateTimings=R;var V,X=h.styles?h.styles:Ot({});if(5==X.type)V=this.visitKeyframes(X,m);else{var he=h.styles,Ie=!1;if(!he){Ie=!0;var We={};R.easing&&(We.easing=R.easing),he=Ot(We)}m.currentTime+=R.duration+R.delay;var tt=this.visitStyle(he,m);tt.isEmptyStep=Ie,V=tt}return m.currentAnimateTimings=null,{type:4,timings:R,style:V,options:null}}},{key:"visitStyle",value:function(h,m){var R=this._makeStyleAst(h,m);return this._validateStyleAst(R,m),R}},{key:"_makeStyleAst",value:function(h,m){var R=[];Array.isArray(h.styles)?h.styles.forEach(function(he){"string"==typeof he?he==se?R.push(he):m.errors.push(function Gt(T){return new F.vHH(3002,ar)}()):R.push(he)}):R.push(h.styles);var V=!1,X=null;return R.forEach(function(he){if(Er(he)){var Ie=he,We=Ie.easing;if(We&&(X=We,delete Ie.easing),!V)for(var tt in Ie)if(Ie[tt].toString().indexOf("{{")>=0){V=!0;break}}}),{type:6,styles:R,easing:X,offset:h.offset,containsDynamicStyles:V,options:null}}},{key:"_validateStyleAst",value:function(h,m){var R=this,V=m.currentAnimateTimings,X=m.currentTime,he=m.currentTime;V&&he>0&&(he-=V.duration+V.delay),h.styles.forEach(function(Ie){"string"!=typeof Ie&&Object.keys(Ie).forEach(function(We){if(!R._driver.validateStyleProperty(We))return delete Ie[We],void m.unsupportedCSSPropertiesFound.add(We);var tt=m.collectedStyles[m.currentQuerySelector],Zt=tt[We],Bt=!0;Zt&&(he!=X&&he>=Zt.startTime&&X<=Zt.endTime&&(m.errors.push(function Mo(T,E,h,m,R){return new F.vHH(3010,ar)}()),Bt=!1),he=Zt.startTime),Bt&&(tt[We]={startTime:he,endTime:X}),m.options&&function Qu(T,E,h){var m=E.params||{},R=mo(T);R.length&&R.forEach(function(V){m.hasOwnProperty(V)||h.push(function Du(T){return new F.vHH(3001,ar)}())})}(Ie[We],m.options,m.errors)})})}},{key:"visitKeyframes",value:function(h,m){var R=this,V={type:5,styles:[],options:null};if(!m.currentAnimateTimings)return m.errors.push(function Ni(){return new F.vHH(3011,ar)}()),V;var he=0,Ie=[],We=!1,tt=!1,Zt=0,Bt=h.steps.map(function(rr){var Jn=R._makeStyleAst(rr,m),Gi=null!=Jn.offset?Jn.offset:function jl(T){if("string"==typeof T)return null;var E=null;if(Array.isArray(T))T.forEach(function(m){if(Er(m)&&m.hasOwnProperty("offset")){var R=m;E=parseFloat(R.offset),delete R.offset}});else if(Er(T)&&T.hasOwnProperty("offset")){var h=T;E=parseFloat(h.offset),delete h.offset}return E}(Jn.styles),vi=0;return null!=Gi&&(he++,vi=Jn.offset=Gi),tt=tt||vi<0||vi>1,We=We||vi<Zt,Zt=vi,Ie.push(vi),Jn});tt&&m.errors.push(function Iu(){return new F.vHH(3012,ar)}()),We&&m.errors.push(function ou(){return new F.vHH(3200,ar)}());var gn=h.steps.length,In=0;he>0&&he<gn?m.errors.push(function es(){return new F.vHH(3202,ar)}()):0==he&&(In=1/(gn-1));var $n=gn-1,or=m.currentTime,br=m.currentAnimateTimings,Zn=br.duration;return Bt.forEach(function(rr,Jn){var Gi=In>0?Jn==$n?1:In*Jn:Ie[Jn],vi=Gi*Zn;m.currentTime=or+br.delay+vi,br.duration=vi,R._validateStyleAst(rr,m),rr.offset=Gi,V.styles.push(rr)}),V}},{key:"visitReference",value:function(h,m){return{type:8,animation:N(this,js(h.animation),m),options:Ju(h.options)}}},{key:"visitAnimateChild",value:function(h,m){return m.depCount++,{type:9,options:Ju(h.options)}}},{key:"visitAnimateRef",value:function(h,m){return{type:10,animation:this.visitReference(h.animation,m),options:Ju(h.options)}}},{key:"visitQuery",value:function(h,m){var R=m.currentQuerySelector,V=h.options||{};m.queryCount++,m.currentQuery=h;var X=function xl(T){var E=!!T.split(/\s*,\s*/).find(function(h){return":self"==h});return E&&(T=T.replace(ei,"")),T=T.replace(/@\*/g,$s).replace(/@\w+/g,function(h){return $s+"-"+h.substr(1)}).replace(/:animating/g,tl),[T,E]}(h.selector),he=(0,Ui.Z)(X,2),Ie=he[0],We=he[1];m.currentQuerySelector=R.length?R+" "+Ie:Ie,_i(m.collectedStyles,m.currentQuerySelector,{});var tt=N(this,js(h.animation),m);return m.currentQuery=null,m.currentQuerySelector=R,{type:11,selector:Ie,limit:V.limit||0,optional:!!V.optional,includeSelf:We,animation:tt,originalSelector:h.selector,options:Ju(h.options)}}},{key:"visitStagger",value:function(h,m){m.currentQuery||m.errors.push(function Su(){return new F.vHH(3013,ar)}());var R="full"===h.timings?{duration:0,delay:0,easing:"full"}:wi(h.timings,m.errors,!0);return{type:12,animation:N(this,js(h.animation),m),timings:R,options:null}}}]),T}(),El=(0,j.Z)(function T(E){(0,le.Z)(this,T),this.errors=E,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set});function Er(T){return!Array.isArray(T)&&"object"==typeof T}function Ju(T){return T?(T=Ta(T)).params&&(T.params=function gr(T){return T?Ta(T):null}(T.params)):T={},T}function Xu(T,E,h){return{duration:T,delay:E,easing:h}}function rl(T,E,h,m,R,V){var X=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,he=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:T,keyframes:E,preStyleProps:h,postStyleProps:m,duration:R,delay:V,totalTime:R+V,easing:X,subTimeline:he}}var Zo=function(){function T(){(0,le.Z)(this,T),this._map=new Map}return(0,j.Z)(T,[{key:"get",value:function(h){return this._map.get(h)||[]}},{key:"append",value:function(h,m){var R,V=this._map.get(h);V||this._map.set(h,V=[]),(R=V).push.apply(R,(0,$i.Z)(m))}},{key:"has",value:function(h){return this._map.has(h)}},{key:"clear",value:function(){this._map.clear()}}]),T}(),Ka=new RegExp(":enter","g"),da=new RegExp(":leave","g");function ta(T,E,h,m,R){var V=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},X=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},he=arguments.length>7?arguments[7]:void 0,Ie=arguments.length>8?arguments[8]:void 0,We=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new il).buildKeyframes(T,E,h,m,R,V,X,he,Ie,We)}var il=function(){function T(){(0,le.Z)(this,T)}return(0,j.Z)(T,[{key:"buildKeyframes",value:function(h,m,R,V,X,he,Ie,We,tt){var Zt=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];tt=tt||new Zo;var Bt=new ji(h,m,tt,V,X,Zt,[]);Bt.options=We,Bt.currentTimeline.setStyles([he],null,Bt.errors,We),N(this,R,Bt);var gn=Bt.timelines.filter(function(br){return br.containsAnimation()});if(Object.keys(Ie).length){for(var In,$n=gn.length-1;$n>=0;$n--){var or=gn[$n];if(or.element===m){In=or;break}}In&&!In.allowOnlyTimelineStyles()&&In.setStyles([Ie],null,Bt.errors,We)}return gn.length?gn.map(function(br){return br.buildKeyframes()}):[rl(m,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(h,m){}},{key:"visitState",value:function(h,m){}},{key:"visitTransition",value:function(h,m){}},{key:"visitAnimateChild",value:function(h,m){var R=m.subInstructions.get(m.element);if(R){var V=m.createSubContext(h.options),X=m.currentTimeline.currentTime,he=this._visitSubInstructions(R,V,V.options);X!=he&&m.transformIntoNewTimeline(he)}m.previousNode=h}},{key:"visitAnimateRef",value:function(h,m){var R=m.createSubContext(h.options);R.transformIntoNewTimeline(),this.visitReference(h.animation,R),m.transformIntoNewTimeline(R.currentTimeline.currentTime),m.previousNode=h}},{key:"_visitSubInstructions",value:function(h,m,R){var X=m.currentTimeline.currentTime,he=null!=R.duration?rs(R.duration):null,Ie=null!=R.delay?rs(R.delay):null;return 0!==he&&h.forEach(function(We){var tt=m.appendInstructionToTimeline(We,he,Ie);X=Math.max(X,tt.duration+tt.delay)}),X}},{key:"visitReference",value:function(h,m){m.updateOptions(h.options,!0),N(this,h.animation,m),m.previousNode=h}},{key:"visitSequence",value:function(h,m){var R=this,V=m.subContextCount,X=m,he=h.options;if(he&&(he.params||he.delay)&&((X=m.createSubContext(he)).transformIntoNewTimeline(),null!=he.delay)){6==X.previousNode.type&&(X.currentTimeline.snapshotCurrentStyles(),X.previousNode=Qs);var Ie=rs(he.delay);X.delayNextStep(Ie)}h.steps.length&&(h.steps.forEach(function(We){return N(R,We,X)}),X.currentTimeline.applyStylesToKeyframe(),X.subContextCount>V&&X.transformIntoNewTimeline()),m.previousNode=h}},{key:"visitGroup",value:function(h,m){var R=this,V=[],X=m.currentTimeline.currentTime,he=h.options&&h.options.delay?rs(h.options.delay):0;h.steps.forEach(function(Ie){var We=m.createSubContext(h.options);he&&We.delayNextStep(he),N(R,Ie,We),X=Math.max(X,We.currentTimeline.currentTime),V.push(We.currentTimeline)}),V.forEach(function(Ie){return m.currentTimeline.mergeTimelineCollectedStyles(Ie)}),m.transformIntoNewTimeline(X),m.previousNode=h}},{key:"_visitTiming",value:function(h,m){if(h.dynamic){var R=h.strValue;return wi(m.params?Pu(R,m.params,m.errors):R,m.errors)}return{duration:h.duration,delay:h.delay,easing:h.easing}}},{key:"visitAnimate",value:function(h,m){var R=m.currentAnimateTimings=this._visitTiming(h.timings,m),V=m.currentTimeline;R.delay&&(m.incrementTime(R.delay),V.snapshotCurrentStyles());var X=h.style;5==X.type?this.visitKeyframes(X,m):(m.incrementTime(R.duration),this.visitStyle(X,m),V.applyStylesToKeyframe()),m.currentAnimateTimings=null,m.previousNode=h}},{key:"visitStyle",value:function(h,m){var R=m.currentTimeline,V=m.currentAnimateTimings;!V&&R.getCurrentStyleProperties().length&&R.forwardFrame();var X=V&&V.easing||h.easing;h.isEmptyStep?R.applyEmptyStep(X):R.setStyles(h.styles,X,m.errors,m.options),m.previousNode=h}},{key:"visitKeyframes",value:function(h,m){var R=m.currentAnimateTimings,V=m.currentTimeline.duration,X=R.duration,Ie=m.createSubContext().currentTimeline;Ie.easing=R.easing,h.styles.forEach(function(We){Ie.forwardTime((We.offset||0)*X),Ie.setStyles(We.styles,We.easing,m.errors,m.options),Ie.applyStylesToKeyframe()}),m.currentTimeline.mergeTimelineCollectedStyles(Ie),m.transformIntoNewTimeline(V+X),m.previousNode=h}},{key:"visitQuery",value:function(h,m){var R=this,V=m.currentTimeline.currentTime,X=h.options||{},he=X.delay?rs(X.delay):0;he&&(6===m.previousNode.type||0==V&&m.currentTimeline.getCurrentStyleProperties().length)&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=Qs);var Ie=V,We=m.invokeQuery(h.selector,h.originalSelector,h.limit,h.includeSelf,!!X.optional,m.errors);m.currentQueryTotal=We.length;var tt=null;We.forEach(function(Zt,Bt){m.currentQueryIndex=Bt;var gn=m.createSubContext(h.options,Zt);he&&gn.delayNextStep(he),Zt===m.element&&(tt=gn.currentTimeline),N(R,h.animation,gn),gn.currentTimeline.applyStylesToKeyframe(),Ie=Math.max(Ie,gn.currentTimeline.currentTime)}),m.currentQueryIndex=0,m.currentQueryTotal=0,m.transformIntoNewTimeline(Ie),tt&&(m.currentTimeline.mergeTimelineCollectedStyles(tt),m.currentTimeline.snapshotCurrentStyles()),m.previousNode=h}},{key:"visitStagger",value:function(h,m){var R=m.parentContext,V=m.currentTimeline,X=h.timings,he=Math.abs(X.duration),Ie=he*(m.currentQueryTotal-1),We=he*m.currentQueryIndex;switch(X.duration<0?"reverse":X.easing){case"reverse":We=Ie-We;break;case"full":We=R.currentStaggerTime}var Zt=m.currentTimeline;We&&Zt.delayNextStep(We);var Bt=Zt.currentTime;N(this,h.animation,m),m.previousNode=h,R.currentStaggerTime=V.currentTime-Bt+(V.startTime-R.currentTimeline.startTime)}}]),T}(),Qs={},ji=function(){function T(E,h,m,R,V,X,he,Ie){(0,le.Z)(this,T),this._driver=E,this.element=h,this.subInstructions=m,this._enterClassName=R,this._leaveClassName=V,this.errors=X,this.timelines=he,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Qs,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Ie||new Hi(this._driver,h,0),he.push(this.currentTimeline)}return(0,j.Z)(T,[{key:"params",get:function(){return this.options.params}},{key:"updateOptions",value:function(h,m){var R=this;if(h){var V=h,X=this.options;null!=V.duration&&(X.duration=rs(V.duration)),null!=V.delay&&(X.delay=rs(V.delay));var he=V.params;if(he){var Ie=X.params;Ie||(Ie=this.options.params={}),Object.keys(he).forEach(function(We){(!m||!Ie.hasOwnProperty(We))&&(Ie[We]=Pu(he[We],Ie,R.errors))})}}}},{key:"_copyOptions",value:function(){var h={};if(this.options){var m=this.options.params;if(m){var R=h.params={};Object.keys(m).forEach(function(V){R[V]=m[V]})}}return h}},{key:"createSubContext",value:function(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,m=arguments.length>1?arguments[1]:void 0,R=arguments.length>2?arguments[2]:void 0,V=m||this.element,X=new T(this._driver,V,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(V,R||0));return X.previousNode=this.previousNode,X.currentAnimateTimings=this.currentAnimateTimings,X.options=this._copyOptions(),X.updateOptions(h),X.currentQueryIndex=this.currentQueryIndex,X.currentQueryTotal=this.currentQueryTotal,X.parentContext=this,this.subContextCount++,X}},{key:"transformIntoNewTimeline",value:function(h){return this.previousNode=Qs,this.currentTimeline=this.currentTimeline.fork(this.element,h),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(h,m,R){var V={duration:null!=m?m:h.duration,delay:this.currentTimeline.currentTime+(null!=R?R:0)+h.delay,easing:""},X=new is(this._driver,h.element,h.keyframes,h.preStyleProps,h.postStyleProps,V,h.stretchStartingKeyframe);return this.timelines.push(X),V}},{key:"incrementTime",value:function(h){this.currentTimeline.forwardTime(this.currentTimeline.duration+h)}},{key:"delayNextStep",value:function(h){h>0&&this.currentTimeline.delayNextStep(h)}},{key:"invokeQuery",value:function(h,m,R,V,X,he){var Ie=[];if(V&&Ie.push(this.element),h.length>0){h=(h=h.replace(Ka,"."+this._enterClassName)).replace(da,"."+this._leaveClassName);var tt=this._driver.query(this.element,h,1!=R);0!==R&&(tt=R<0?tt.slice(tt.length+R,tt.length):tt.slice(0,R)),Ie.push.apply(Ie,(0,$i.Z)(tt))}return!X&&0==Ie.length&&he.push(function Gu(T){return new F.vHH(3014,ar)}()),Ie}}]),T}(),Hi=function(){function T(E,h,m,R){(0,le.Z)(this,T),this._driver=E,this.element=h,this.startTime=m,this._elementTimelineStylesLookup=R,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(h),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(h,this._localTimelineStyles)),this._loadKeyframe()}return(0,j.Z)(T,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"delayNextStep",value:function(h){var m=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||m?(this.forwardTime(this.currentTime+h),m&&this.snapshotCurrentStyles()):this.startTime+=h}},{key:"fork",value:function(h,m){return this.applyStylesToKeyframe(),new T(this._driver,h,m||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(h){this.applyStylesToKeyframe(),this.duration=h,this._loadKeyframe()}},{key:"_updateStyle",value:function(h,m){this._localTimelineStyles[h]=m,this._globalTimelineStyles[h]=m,this._styleSummary[h]={time:this.currentTime,value:m}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(h){var m=this;h&&(this._previousKeyframe.easing=h),Object.keys(this._globalTimelineStyles).forEach(function(R){m._backFill[R]=m._globalTimelineStyles[R]||se,m._currentKeyframe[R]=se}),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(h,m,R,V){var X=this;m&&(this._previousKeyframe.easing=m);var he=V&&V.params||{},Ie=function Mu(T,E){var m,h={};return T.forEach(function(R){"*"===R?(m=m||Object.keys(E)).forEach(function(V){h[V]=se}):qs(R,!1,h)}),h}(h,this._globalTimelineStyles);Object.keys(Ie).forEach(function(We){var tt=Pu(Ie[We],he,R);X._pendingStyles[We]=tt,X._localTimelineStyles.hasOwnProperty(We)||(X._backFill[We]=X._globalTimelineStyles.hasOwnProperty(We)?X._globalTimelineStyles[We]:se),X._updateStyle(We,tt)})}},{key:"applyStylesToKeyframe",value:function(){var h=this,m=this._pendingStyles,R=Object.keys(m);0!=R.length&&(this._pendingStyles={},R.forEach(function(V){h._currentKeyframe[V]=m[V]}),Object.keys(this._localTimelineStyles).forEach(function(V){h._currentKeyframe.hasOwnProperty(V)||(h._currentKeyframe[V]=h._localTimelineStyles[V])}))}},{key:"snapshotCurrentStyles",value:function(){var h=this;Object.keys(this._localTimelineStyles).forEach(function(m){var R=h._localTimelineStyles[m];h._pendingStyles[m]=R,h._updateStyle(m,R)})}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"properties",get:function(){var h=[];for(var m in this._currentKeyframe)h.push(m);return h}},{key:"mergeTimelineCollectedStyles",value:function(h){var m=this;Object.keys(h._styleSummary).forEach(function(R){var V=m._styleSummary[R],X=h._styleSummary[R];(!V||X.time>V.time)&&m._updateStyle(R,X.value)})}},{key:"buildKeyframes",value:function(){var h=this;this.applyStylesToKeyframe();var m=new Set,R=new Set,V=1===this._keyframes.size&&0===this.duration,X=[];this._keyframes.forEach(function(Zt,Bt){var gn=qs(Zt,!0);Object.keys(gn).forEach(function(In){var $n=gn[In];"!"==$n?m.add(In):$n==se&&R.add(In)}),V||(gn.offset=Bt/h.duration),X.push(gn)});var he=m.size?Ei(m.values()):[],Ie=R.size?Ei(R.values()):[];if(V){var We=X[0],tt=Ta(We);We.offset=0,tt.offset=1,X=[We,tt]}return rl(this.element,X,he,Ie,this.duration,this.startTime,this.easing,!1)}}]),T}(),is=function(T){(0,M.Z)(h,T);var E=(0,ce.Z)(h);function h(m,R,V,X,he,Ie){var We,tt=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return(0,le.Z)(this,h),(We=E.call(this,m,R,Ie.delay)).keyframes=V,We.preStyleProps=X,We.postStyleProps=he,We._stretchStartingKeyframe=tt,We.timings={duration:Ie.duration,delay:Ie.delay,easing:Ie.easing},We}return(0,j.Z)(h,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var R=this.keyframes,V=this.timings,X=V.delay,he=V.duration,Ie=V.easing;if(this._stretchStartingKeyframe&&X){var We=[],tt=he+X,Zt=X/tt,Bt=qs(R[0],!1);Bt.offset=0,We.push(Bt);var gn=qs(R[0],!1);gn.offset=_o(Zt),We.push(gn);for(var In=R.length-1,$n=1;$n<=In;$n++){var or=qs(R[$n],!1);or.offset=_o((X+or.offset*he)/tt),We.push(or)}he=tt,X=0,Ie="",R=We}return rl(this.element,R,this.preStyleProps,this.postStyleProps,he,X,Ie,!0)}}]),h}(Hi);function _o(T){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,h=Math.pow(10,E-1);return Math.round(T*h)/h}var bs=(0,j.Z)(function T(){(0,le.Z)(this,T)}),Ou=function(T){(0,M.Z)(h,T);var E=(0,ce.Z)(h);function h(){return(0,le.Z)(this,h),E.apply(this,arguments)}return(0,j.Z)(h,[{key:"normalizePropertyName",value:function(R,V){return A(R)}},{key:"normalizeStyleValue",value:function(R,V,X,he){var Ie="",We=X.toString().trim();if(Hl[V]&&0!==X&&"0"!==X)if("number"==typeof X)Ie="px";else{var tt=X.match(/^[+-]?[\d\.]+([a-z]*)$/);tt&&0==tt[1].length&&he.push(function Hu(T,E){return new F.vHH(3005,ar)}())}return We+Ie}}]),h}(bs),Hl=function(){return function hn(T){var E={};return T.forEach(function(h){return E[h]=!0}),E}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","))}();function Bo(T,E,h,m,R,V,X,he,Ie,We,tt,Zt,Bt){return{type:0,element:T,triggerName:E,isRemovalTransition:R,fromState:h,fromStyles:V,toState:m,toStyles:X,timelines:he,queriedElements:Ie,preStyleProps:We,postStyleProps:tt,totalTime:Zt,errors:Bt}}var sa={},Ts=function(){function T(E,h,m){(0,le.Z)(this,T),this._triggerName=E,this.ast=h,this._stateStyles=m}return(0,j.Z)(T,[{key:"match",value:function(h,m,R,V){return function ds(T,E,h,m,R){return T.some(function(V){return V(E,h,m,R)})}(this.ast.matchers,h,m,R,V)}},{key:"buildStyles",value:function(h,m,R){var V=this._stateStyles["*"],X=this._stateStyles[h],he=V?V.buildStyles(m,R):{};return X?X.buildStyles(m,R):he}},{key:"build",value:function(h,m,R,V,X,he,Ie,We,tt,Zt){var Bt=[],gn=this.ast.options&&this.ast.options.params||sa,$n=this.buildStyles(R,Ie&&Ie.params||sa,Bt),or=We&&We.params||sa,br=this.buildStyles(V,or,Bt),Zn=new Set,rr=new Map,Jn=new Map,Gi="void"===V,vi={params:Object.assign(Object.assign({},gn),or)},Ti=Zt?[]:ta(h,m,this.ast.animation,X,he,$n,br,vi,tt,Bt),gs=0;if(Ti.forEach(function(va){gs=Math.max(va.duration+va.delay,gs)}),Bt.length)return Bo(m,this._triggerName,R,V,Gi,$n,br,[],[],rr,Jn,gs,Bt);Ti.forEach(function(va){var Ra=va.element,jo=_i(rr,Ra,{});va.preStyleProps.forEach(function(cl){return jo[cl]=!0});var Dl=_i(Jn,Ra,{});va.postStyleProps.forEach(function(cl){return Dl[cl]=!0}),Ra!==m&&Zn.add(Ra)});var ro=Ei(Zn.values());return Bo(m,this._triggerName,R,V,Gi,$n,br,Ti,ro,rr,Jn,gs)}}]),T}(),Gl=function(){function T(E,h,m){(0,le.Z)(this,T),this.styles=E,this.defaultParams=h,this.normalizer=m}return(0,j.Z)(T,[{key:"buildStyles",value:function(h,m){var R=this,V={},X=Ta(this.defaultParams);return Object.keys(h).forEach(function(he){var Ie=h[he];null!=Ie&&(X[he]=Ie)}),this.styles.styles.forEach(function(he){if("string"!=typeof he){var Ie=he;Object.keys(Ie).forEach(function(We){var tt=Ie[We];tt.length>1&&(tt=Pu(tt,X,m));var Zt=R.normalizer.normalizePropertyName(We,m);tt=R.normalizer.normalizeStyleValue(We,Zt,tt,m),V[Zt]=tt})}}),V}}]),T}(),oc=function(){function T(E,h,m){var R=this;(0,le.Z)(this,T),this.name=E,this.ast=h,this._normalizer=m,this.transitionFactories=[],this.states={},h.states.forEach(function(V){R.states[V.name]=new Gl(V.style,V.options&&V.options.params||{},m)}),Nu(this.states,"true","1"),Nu(this.states,"false","0"),h.transitions.forEach(function(V){R.transitionFactories.push(new Ts(E,V,R.states))}),this.fallbackTransition=function eo(T,E,h){return new Ts(T,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(X,he){return!0}],options:null,queryCount:0,depCount:0},E)}(E,this.states)}return(0,j.Z)(T,[{key:"containsQueries",get:function(){return this.ast.queryCount>0}},{key:"matchTransition",value:function(h,m,R,V){return this.transitionFactories.find(function(he){return he.match(h,m,R,V)})||null}},{key:"matchStyles",value:function(h,m,R){return this.fallbackTransition.buildStyles(h,m,R)}}]),T}();function Nu(T,E,h){T.hasOwnProperty(E)?T.hasOwnProperty(h)||(T[h]=T[E]):T.hasOwnProperty(h)&&(T[E]=T[h])}var Lu=new Zo,al=function(){function T(E,h,m){(0,le.Z)(this,T),this.bodyNode=E,this._driver=h,this._normalizer=m,this._animations={},this._playersById={},this.players=[]}return(0,j.Z)(T,[{key:"register",value:function(h,m){var R=[],X=Hs(this._driver,m,R,[]);if(R.length)throw function Ls(T){return new F.vHH(3503,ar)}();this._animations[h]=X}},{key:"_buildPlayer",value:function(h,m,R){var V=h.element,X=cu(this._driver,this._normalizer,V,h.keyframes,m,R);return this._driver.animate(V,X,h.duration,h.delay,h.easing,[],!0)}},{key:"create",value:function(h,m){var Ie,R=this,V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},X=[],he=this._animations[h],We=new Map;if(he?(Ie=ta(this._driver,m,he,qu,Fo,{},{},V,Lu,X)).forEach(function(Bt){var gn=_i(We,Bt.element,{});Bt.postStyleProps.forEach(function(In){return gn[In]=null})}):(X.push(Fs()),Ie=[]),X.length)throw Sa();We.forEach(function(Bt,gn){Object.keys(Bt).forEach(function(In){Bt[In]=R._driver.computeStyle(gn,In,se)})});var tt=Ie.map(function(Bt){var gn=We.get(Bt.element);return R._buildPlayer(Bt,{},gn)}),Zt=Ga(tt);return this._playersById[h]=Zt,Zt.onDestroy(function(){return R.destroy(h)}),this.players.push(Zt),Zt}},{key:"destroy",value:function(h){var m=this._getPlayer(h);m.destroy(),delete this._playersById[h];var R=this.players.indexOf(m);R>=0&&this.players.splice(R,1)}},{key:"_getPlayer",value:function(h){var m=this._playersById[h];if(!m)throw function kl(T){return new F.vHH(3301,ar)}();return m}},{key:"listen",value:function(h,m,R,V){var X=fu(m,"","","");return $u(this._getPlayer(h),R,X,V),function(){}}},{key:"command",value:function(h,m,R,V){if("register"!=R)if("create"!=R){var he=this._getPlayer(h);switch(R){case"play":he.play();break;case"pause":he.pause();break;case"reset":he.reset();break;case"restart":he.restart();break;case"finish":he.finish();break;case"init":he.init();break;case"setPosition":he.setPosition(parseFloat(V[0]));break;case"destroy":this.destroy(h)}}else this.create(h,m,V[0]||{});else this.register(h,V[0])}}]),T}(),wo="ng-animate-queued",Eo="ng-animate-disabled",mu="ng-star-inserted",to=[],zl={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},vs={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ps="__ng_removed",G=function(){function T(E){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,le.Z)(this,T),this.namespaceId=h;var m=E&&E.hasOwnProperty("value"),R=m?E.value:E;if(this.value=Oe(R),m){var V=Ta(E);delete V.value,this.options=V}else this.options={};this.options.params||(this.options.params={})}return(0,j.Z)(T,[{key:"params",get:function(){return this.options.params}},{key:"absorbOptions",value:function(h){var m=h.params;if(m){var R=this.options.params;Object.keys(m).forEach(function(V){null==R[V]&&(R[V]=m[V])})}}}]),T}(),W="void",ee=new G(W),ne=function(){function T(E,h,m){(0,le.Z)(this,T),this.id=E,this.hostElement=h,this._engine=m,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+E,fr(h,this._hostClassName)}return(0,j.Z)(T,[{key:"listen",value:function(h,m,R,V){var X=this;if(!this._triggers.hasOwnProperty(m))throw function Zs(T,E){return new F.vHH(3302,ar)}();if(null==R||0==R.length)throw function Wu(T){return new F.vHH(3303,ar)}();if(!function Rt(T){return"start"==T||"done"==T}(R))throw function _l(T,E){return new F.vHH(3400,ar)}();var he=_i(this._elementListeners,h,[]),Ie={name:m,phase:R,callback:V};he.push(Ie);var We=_i(this._engine.statesByElement,h,{});return We.hasOwnProperty(m)||(fr(h,aa),fr(h,aa+"-"+m),We[m]=ee),function(){X._engine.afterFlush(function(){var tt=he.indexOf(Ie);tt>=0&&he.splice(tt,1),X._triggers[m]||delete We[m]})}}},{key:"register",value:function(h,m){return!this._triggers[h]&&(this._triggers[h]=m,!0)}},{key:"_getTrigger",value:function(h){var m=this._triggers[h];if(!m)throw function ci(T){return new F.vHH(3401,ar)}();return m}},{key:"trigger",value:function(h,m,R){var V=this,X=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],he=this._getTrigger(m),Ie=new ge(this.id,m,h),We=this._engine.statesByElement.get(h);We||(fr(h,aa),fr(h,aa+"-"+m),this._engine.statesByElement.set(h,We={}));var tt=We[m],Zt=new G(R,this.id),Bt=R&&R.hasOwnProperty("value");!Bt&&tt&&Zt.absorbOptions(tt.options),We[m]=Zt,tt||(tt=ee);var gn=Zt.value===W;if(gn||tt.value!==Zt.value){var br=_i(this._engine.playersByElement,h,[]);br.forEach(function(Jn){Jn.namespaceId==V.id&&Jn.triggerName==m&&Jn.queued&&Jn.destroy()});var Zn=he.matchTransition(tt.value,Zt.value,h,Zt.params),rr=!1;if(!Zn){if(!X)return;Zn=he.fallbackTransition,rr=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:m,transition:Zn,fromState:tt,toState:Zt,player:Ie,isFallbackTransition:rr}),rr||(fr(h,wo),Ie.onStart(function(){Jt(h,wo)})),Ie.onDone(function(){var Jn=V.players.indexOf(Ie);Jn>=0&&V.players.splice(Jn,1);var Gi=V._engine.playersByElement.get(h);if(Gi){var vi=Gi.indexOf(Ie);vi>=0&&Gi.splice(vi,1)}}),this.players.push(Ie),br.push(Ie),Ie}if(!bi(tt.params,Zt.params)){var In=[],$n=he.matchStyles(tt.value,tt.params,In),or=he.matchStyles(Zt.value,Zt.params,In);In.length?this._engine.reportError(In):this._engine.afterFlush(function(){fs(h,$n),zr(h,or)})}}},{key:"deregister",value:function(h){var m=this;delete this._triggers[h],this._engine.statesByElement.forEach(function(R,V){delete R[h]}),this._elementListeners.forEach(function(R,V){m._elementListeners.set(V,R.filter(function(X){return X.name!=h}))})}},{key:"clearElementCache",value:function(h){this._engine.statesByElement.delete(h),this._elementListeners.delete(h);var m=this._engine.playersByElement.get(h);m&&(m.forEach(function(R){return R.destroy()}),this._engine.playersByElement.delete(h))}},{key:"_signalRemovalForInnerTriggers",value:function(h,m){var R=this,V=this._engine.driver.query(h,$s,!0);V.forEach(function(X){if(!X[ps]){var he=R._engine.fetchNamespacesByElement(X);he.size?he.forEach(function(Ie){return Ie.triggerLeaveAnimation(X,m,!1,!0)}):R.clearElementCache(X)}}),this._engine.afterFlushAnimationsDone(function(){return V.forEach(function(X){return R.clearElementCache(X)})})}},{key:"triggerLeaveAnimation",value:function(h,m,R,V){var X=this,he=this._engine.statesByElement.get(h),Ie=new Map;if(he){var We=[];if(Object.keys(he).forEach(function(tt){if(Ie.set(tt,he[tt].value),X._triggers[tt]){var Zt=X.trigger(h,tt,W,V);Zt&&We.push(Zt)}}),We.length)return this._engine.markElementAsRemoved(this.id,h,!0,m,Ie),R&&Ga(We).onDone(function(){return X._engine.processLeaveNode(h)}),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(h){var m=this,R=this._elementListeners.get(h),V=this._engine.statesByElement.get(h);if(R&&V){var X=new Set;R.forEach(function(he){var Ie=he.name;if(!X.has(Ie)){X.add(Ie);var tt=m._triggers[Ie].fallbackTransition,Zt=V[Ie]||ee,Bt=new G(W),gn=new ge(m.id,Ie,h);m._engine.totalQueuedPlayers++,m._queue.push({element:h,triggerName:Ie,transition:tt,fromState:Zt,toState:Bt,player:gn,isFallbackTransition:!0})}})}}},{key:"removeNode",value:function(h,m){var R=this,V=this._engine;if(h.childElementCount&&this._signalRemovalForInnerTriggers(h,m),!this.triggerLeaveAnimation(h,m,!0)){var X=!1;if(V.totalAnimations){var he=V.players.length?V.playersByQueriedElement.get(h):[];if(he&&he.length)X=!0;else for(var Ie=h;Ie=Ie.parentNode;)if(V.statesByElement.get(Ie)){X=!0;break}}if(this.prepareLeaveAnimationListeners(h),X)V.markElementAsRemoved(this.id,h,!1,m);else{var tt=h[ps];(!tt||tt===zl)&&(V.afterFlush(function(){return R.clearElementCache(h)}),V.destroyInnerAnimations(h),V._onRemovalComplete(h,m))}}}},{key:"insertNode",value:function(h,m){fr(h,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(h){var m=this,R=[];return this._queue.forEach(function(V){var X=V.player;if(!X.destroyed){var he=V.element,Ie=m._elementListeners.get(he);Ie&&Ie.forEach(function(We){if(We.name==V.triggerName){var tt=fu(he,V.triggerName,V.fromState.value,V.toState.value);tt._data=h,$u(V.player,We.phase,tt,We.callback)}}),X.markedForDestroy?m._engine.afterFlush(function(){X.destroy()}):R.push(V)}}),this._queue=[],R.sort(function(V,X){var he=V.transition.ast.depCount,Ie=X.transition.ast.depCount;return 0==he||0==Ie?he-Ie:m._engine.driver.containsElement(V.element,X.element)?1:-1})}},{key:"destroy",value:function(h){this.players.forEach(function(m){return m.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,h)}},{key:"elementContainsData",value:function(h){var m=!1;return this._elementListeners.has(h)&&(m=!0),!!this._queue.find(function(R){return R.element===h})||m}}]),T}(),me=function(){function T(E,h,m){(0,le.Z)(this,T),this.bodyNode=E,this.driver=h,this._normalizer=m,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(R,V){}}return(0,j.Z)(T,[{key:"_onRemovalComplete",value:function(h,m){this.onRemovalComplete(h,m)}},{key:"queuedPlayers",get:function(){var h=[];return this._namespaceList.forEach(function(m){m.players.forEach(function(R){R.queued&&h.push(R)})}),h}},{key:"createNamespace",value:function(h,m){var R=new ne(h,m,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,m)?this._balanceNamespaceList(R,m):(this.newHostElements.set(m,R),this.collectEnterElement(m)),this._namespaceLookup[h]=R}},{key:"_balanceNamespaceList",value:function(h,m){var R=this._namespaceList,V=this.namespacesByHostElement,X=R.length-1;if(X>=0){var he=!1;if(void 0!==this.driver.getParentElement)for(var Ie=this.driver.getParentElement(m);Ie;){var We=V.get(Ie);if(We){var tt=R.indexOf(We);R.splice(tt+1,0,h),he=!0;break}Ie=this.driver.getParentElement(Ie)}else for(var Zt=X;Zt>=0;Zt--)if(this.driver.containsElement(R[Zt].hostElement,m)){R.splice(Zt+1,0,h),he=!0;break}he||R.unshift(h)}else R.push(h);return V.set(m,h),h}},{key:"register",value:function(h,m){var R=this._namespaceLookup[h];return R||(R=this.createNamespace(h,m)),R}},{key:"registerTrigger",value:function(h,m,R){var V=this._namespaceLookup[h];V&&V.register(m,R)&&this.totalAnimations++}},{key:"destroy",value:function(h,m){var R=this;if(h){var V=this._fetchNamespace(h);this.afterFlush(function(){R.namespacesByHostElement.delete(V.hostElement),delete R._namespaceLookup[h];var X=R._namespaceList.indexOf(V);X>=0&&R._namespaceList.splice(X,1)}),this.afterFlushAnimationsDone(function(){return V.destroy(m)})}}},{key:"_fetchNamespace",value:function(h){return this._namespaceLookup[h]}},{key:"fetchNamespacesByElement",value:function(h){var m=new Set,R=this.statesByElement.get(h);if(R)for(var V=Object.keys(R),X=0;X<V.length;X++){var he=R[V[X]].namespaceId;if(he){var Ie=this._fetchNamespace(he);Ie&&m.add(Ie)}}return m}},{key:"trigger",value:function(h,m,R,V){if(bt(m)){var X=this._fetchNamespace(h);if(X)return X.trigger(m,R,V),!0}return!1}},{key:"insertNode",value:function(h,m,R,V){if(bt(m)){var X=m[ps];if(X&&X.setForRemoval){X.setForRemoval=!1,X.setForMove=!0;var he=this.collectedLeaveElements.indexOf(m);he>=0&&this.collectedLeaveElements.splice(he,1)}if(h){var Ie=this._fetchNamespace(h);Ie&&Ie.insertNode(m,R)}V&&this.collectEnterElement(m)}}},{key:"collectEnterElement",value:function(h){this.collectedEnterElements.push(h)}},{key:"markElementAsDisabled",value:function(h,m){m?this.disabledNodes.has(h)||(this.disabledNodes.add(h),fr(h,Eo)):this.disabledNodes.has(h)&&(this.disabledNodes.delete(h),Jt(h,Eo))}},{key:"removeNode",value:function(h,m,R,V){if(bt(m)){var X=h?this._fetchNamespace(h):null;if(X?X.removeNode(m,V):this.markElementAsRemoved(h,m,!1,V),R){var he=this.namespacesByHostElement.get(m);he&&he.id!==h&&he.removeNode(m,V)}}else this._onRemovalComplete(m,V)}},{key:"markElementAsRemoved",value:function(h,m,R,V,X){this.collectedLeaveElements.push(m),m[ps]={namespaceId:h,setForRemoval:V,hasAnimation:R,removedBeforeQueried:!1,previousTriggersValues:X}}},{key:"listen",value:function(h,m,R,V,X){return bt(m)?this._fetchNamespace(h).listen(m,R,V,X):function(){}}},{key:"_buildInstruction",value:function(h,m,R,V,X){return h.transition.build(this.driver,h.element,h.fromState.value,h.toState.value,R,V,h.fromState.options,h.toState.options,m,X)}},{key:"destroyInnerAnimations",value:function(h){var m=this,R=this.driver.query(h,$s,!0);R.forEach(function(V){return m.destroyActiveAnimationsForElement(V)}),0!=this.playersByQueriedElement.size&&(R=this.driver.query(h,tl,!0)).forEach(function(V){return m.finishActiveQueriedAnimationOnElement(V)})}},{key:"destroyActiveAnimationsForElement",value:function(h){var m=this.playersByElement.get(h);m&&m.forEach(function(R){R.queued?R.markedForDestroy=!0:R.destroy()})}},{key:"finishActiveQueriedAnimationOnElement",value:function(h){var m=this.playersByQueriedElement.get(h);m&&m.forEach(function(R){return R.finish()})}},{key:"whenRenderingDone",value:function(){var h=this;return new Promise(function(m){if(h.players.length)return Ga(h.players).onDone(function(){return m()});m()})}},{key:"processLeaveNode",value:function(h){var R,m=this,V=h[ps];if(V&&V.setForRemoval){if(h[ps]=zl,V.namespaceId){this.destroyInnerAnimations(h);var X=this._fetchNamespace(V.namespaceId);X&&X.clearElementCache(h)}this._onRemovalComplete(h,V.setForRemoval)}(null===(R=h.classList)||void 0===R?void 0:R.contains(Eo))&&this.markElementAsDisabled(h,!1),this.driver.query(h,".ng-animate-disabled",!0).forEach(function(he){m.markElementAsDisabled(he,!1)})}},{key:"flush",value:function(){var h=this,m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,R=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(Bt,gn){return h._balanceNamespaceList(Bt,gn)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var V=0;V<this.collectedEnterElements.length;V++){var X=this.collectedEnterElements[V];fr(X,mu)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var he=[];try{R=this._flushAnimations(he,m)}finally{for(var Ie=0;Ie<he.length;Ie++)he[Ie]()}}else for(var We=0;We<this.collectedLeaveElements.length;We++){var tt=this.collectedLeaveElements[We];this.processLeaveNode(tt)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(Bt){return Bt()}),this._flushFns=[],this._whenQuietFns.length){var Zt=this._whenQuietFns;this._whenQuietFns=[],R.length?Ga(R).onDone(function(){Zt.forEach(function(Bt){return Bt()})}):Zt.forEach(function(Bt){return Bt()})}}},{key:"reportError",value:function(h){throw function lu(T){return new F.vHH(3402,ar)}()}},{key:"_flushAnimations",value:function(h,m){var R=this,V=new Zo,X=[],he=new Map,Ie=[],We=new Map,tt=new Map,Zt=new Map,Bt=new Set;this.disabledNodes.forEach(function(mn){Bt.add(mn);for(var hr=R.driver.query(mn,".ng-animate-queued",!0),mr=0;mr<hr.length;mr++)Bt.add(hr[mr])});var gn=this.bodyNode,In=Array.from(this.statesByElement.keys()),$n=bn(In,this.collectedEnterElements),or=new Map,br=0;$n.forEach(function(mn,hr){var mr=qu+br++;or.set(hr,mr),mn.forEach(function(Xn){return fr(Xn,mr)})});for(var Zn=[],rr=new Set,Jn=new Set,Gi=0;Gi<this.collectedLeaveElements.length;Gi++){var vi=this.collectedLeaveElements[Gi],Ti=vi[ps];Ti&&Ti.setForRemoval&&(Zn.push(vi),rr.add(vi),Ti.hasAnimation?this.driver.query(vi,".ng-star-inserted",!0).forEach(function(mn){return rr.add(mn)}):Jn.add(vi))}var gs=new Map,ro=bn(In,Array.from(rr));ro.forEach(function(mn,hr){var mr=Fo+br++;gs.set(hr,mr),mn.forEach(function(Xn){return fr(Xn,mr)})}),h.push(function(){$n.forEach(function(mn,hr){var mr=or.get(hr);mn.forEach(function(Xn){return Jt(Xn,mr)})}),ro.forEach(function(mn,hr){var mr=gs.get(hr);mn.forEach(function(Xn){return Jt(Xn,mr)})}),Zn.forEach(function(mn){R.processLeaveNode(mn)})});for(var va=[],Ra=[],jo=this._namespaceList.length-1;jo>=0;jo--)this._namespaceList[jo].drainQueuedTransitions(m).forEach(function(mn){var hr=mn.player,mr=mn.element;if(va.push(hr),R.collectedEnterElements.length){var Xn=mr[ps];if(Xn&&Xn.setForMove){if(Xn.previousTriggersValues&&Xn.previousTriggersValues.has(mn.triggerName)){var Yl=Xn.previousTriggersValues.get(mn.triggerName),As=R.statesByElement.get(mn.element);As&&As[mn.triggerName]&&(As[mn.triggerName].value=Yl)}return void hr.destroy()}}var $a=!gn||!R.driver.containsElement(gn,mr),To=gs.get(mr),Do=or.get(mr),ua=R._buildInstruction(mn,V,Do,To,$a);if(ua.errors&&ua.errors.length)Ra.push(ua);else{if($a)return hr.onStart(function(){return fs(mr,ua.fromStyles)}),hr.onDestroy(function(){return zr(mr,ua.toStyles)}),void X.push(hr);if(mn.isFallbackTransition)return hr.onStart(function(){return fs(mr,ua.fromStyles)}),hr.onDestroy(function(){return zr(mr,ua.toStyles)}),void X.push(hr);var pa=[];ua.timelines.forEach(function(Xs){Xs.stretchStartingKeyframe=!0,R.disabledNodes.has(Xs.element)||pa.push(Xs)}),ua.timelines=pa,V.append(mr,ua.timelines),Ie.push({instruction:ua,player:hr,element:mr}),ua.queriedElements.forEach(function(Xs){return _i(We,Xs,[]).push(hr)}),ua.preStyleProps.forEach(function(Xs,Al){var as=Object.keys(Xs);if(as.length){var _u=tt.get(Al);_u||tt.set(Al,_u=new Set),as.forEach(function(vc){return _u.add(vc)})}}),ua.postStyleProps.forEach(function(Xs,Al){var as=Object.keys(Xs),_u=Zt.get(Al);_u||Zt.set(Al,_u=new Set),as.forEach(function(vc){return _u.add(vc)})})}});if(Ra.length){var cl=[];Ra.forEach(function(mn){cl.push(function Ku(T,E){return new F.vHH(3505,ar)}())}),va.forEach(function(mn){return mn.destroy()}),this.reportError(cl)}var fl=new Map,Ho=new Map;Ie.forEach(function(mn){var hr=mn.element;V.has(hr)&&(Ho.set(hr,hr),R._beforeAnimationBuild(mn.player.namespaceId,mn.instruction,fl))}),X.forEach(function(mn){var hr=mn.element;R._getPreviousPlayers(hr,!1,mn.namespaceId,mn.triggerName,null).forEach(function(Xn){_i(fl,hr,[]).push(Xn),Xn.destroy()})});var fc=Zn.filter(function(mn){return Aa(mn,tt,Zt)}),na=new Map;Pt(na,this.driver,Jn,Zt,se).forEach(function(mn){Aa(mn,tt,Zt)&&fc.push(mn)});var Cl=new Map;$n.forEach(function(mn,hr){Pt(Cl,R.driver,new Set(mn),tt,"!")}),fc.forEach(function(mn){var hr=na.get(mn),mr=Cl.get(mn);na.set(mn,Object.assign(Object.assign({},hr),mr))});var hl=[],ku=[],Pa={};Ie.forEach(function(mn){var hr=mn.element,mr=mn.player,Xn=mn.instruction;if(V.has(hr)){if(Bt.has(hr))return mr.onDestroy(function(){return zr(hr,Xn.toStyles)}),mr.disabled=!0,mr.overrideTotalTime(Xn.totalTime),void X.push(mr);var Yl=Pa;if(Ho.size>1){for(var As=hr,$a=[];As=As.parentNode;){var To=Ho.get(As);if(To){Yl=To;break}$a.push(As)}$a.forEach(function(pa){return Ho.set(pa,Yl)})}var Do=R._buildAnimation(mr.namespaceId,Xn,fl,he,Cl,na);if(mr.setRealPlayer(Do),Yl===Pa)hl.push(mr);else{var ua=R.playersByElement.get(Yl);ua&&ua.length&&(mr.parentPlayer=Ga(ua)),X.push(mr)}}else fs(hr,Xn.fromStyles),mr.onDestroy(function(){return zr(hr,Xn.toStyles)}),ku.push(mr),Bt.has(hr)&&X.push(mr)}),ku.forEach(function(mn){var hr=he.get(mn.element);if(hr&&hr.length){var mr=Ga(hr);mn.setRealPlayer(mr)}}),X.forEach(function(mn){mn.parentPlayer?mn.syncPlayerEvents(mn.parentPlayer):mn.destroy()});for(var Zu=0;Zu<Zn.length;Zu++){var Js=Zn[Zu],Tr=Js[ps];if(Jt(Js,Fo),!Tr||!Tr.hasAnimation){var Il=[];if(We.size){var bo=We.get(Js);bo&&bo.length&&Il.push.apply(Il,(0,$i.Z)(bo));for(var hc=this.driver.query(Js,tl,!0),Ss=0;Ss<hc.length;Ss++){var Vc=We.get(hc[Ss]);Vc&&Vc.length&&Il.push.apply(Il,(0,$i.Z)(Vc))}}var dc=Il.filter(function(mn){return!mn.destroyed});dc.length?Fn(this,Js,dc):this.processLeaveNode(Js)}}return Zn.length=0,hl.forEach(function(mn){R.players.push(mn),mn.onDone(function(){mn.destroy();var hr=R.players.indexOf(mn);R.players.splice(hr,1)}),mn.play()}),hl}},{key:"elementContainsData",value:function(h,m){var R=!1,V=m[ps];return V&&V.setForRemoval&&(R=!0),this.playersByElement.has(m)&&(R=!0),this.playersByQueriedElement.has(m)&&(R=!0),this.statesByElement.has(m)&&(R=!0),this._fetchNamespace(h).elementContainsData(m)||R}},{key:"afterFlush",value:function(h){this._flushFns.push(h)}},{key:"afterFlushAnimationsDone",value:function(h){this._whenQuietFns.push(h)}},{key:"_getPreviousPlayers",value:function(h,m,R,V,X){var he=[];if(m){var Ie=this.playersByQueriedElement.get(h);Ie&&(he=Ie)}else{var We=this.playersByElement.get(h);if(We){var tt=!X||X==W;We.forEach(function(Zt){Zt.queued||!tt&&Zt.triggerName!=V||he.push(Zt)})}}return(R||V)&&(he=he.filter(function(Zt){return!(R&&R!=Zt.namespaceId||V&&V!=Zt.triggerName)})),he}},{key:"_beforeAnimationBuild",value:function(h,m,R){var Zt,V=this,he=m.element,Ie=m.isRemovalTransition?void 0:h,We=m.isRemovalTransition?void 0:m.triggerName,tt=(0,ba.Z)(m.timelines);try{var Bt=function(){var $n=Zt.value.element,or=$n!==he,br=_i(R,$n,[]);V._getPreviousPlayers($n,or,Ie,We,m.toState).forEach(function(rr){var Jn=rr.getRealPlayer();Jn.beforeDestroy&&Jn.beforeDestroy(),rr.destroy(),br.push(rr)})};for(tt.s();!(Zt=tt.n()).done;)Bt()}catch(gn){tt.e(gn)}finally{tt.f()}fs(he,m.fromStyles)}},{key:"_buildAnimation",value:function(h,m,R,V,X,he){var Ie=this,We=m.triggerName,tt=m.element,Zt=[],Bt=new Set,gn=new Set,In=m.timelines.map(function(or){var br=or.element;Bt.add(br);var Zn=br[ps];if(Zn&&Zn.removedBeforeQueried)return new vr(or.duration,or.delay);var rr=br!==tt,Jn=function ur(T){var E=[];return nr(T,E),E}((R.get(br)||to).map(function(va){return va.getRealPlayer()})).filter(function(va){return!!va.element&&va.element===br}),Gi=X.get(br),vi=he.get(br),Ti=cu(Ie.driver,Ie._normalizer,br,or.keyframes,Gi,vi),gs=Ie._buildPlayer(or,Ti,Jn);if(or.subTimeline&&V&&gn.add(br),rr){var ro=new ge(h,We,br);ro.setRealPlayer(gs),Zt.push(ro)}return gs});Zt.forEach(function(or){_i(Ie.playersByQueriedElement,or.element,[]).push(or),or.onDone(function(){return function Re(T,E,h){var m;if(T instanceof Map){if(m=T.get(E)){if(m.length){var R=m.indexOf(h);m.splice(R,1)}0==m.length&&T.delete(E)}}else if(m=T[E]){if(m.length){var V=m.indexOf(h);m.splice(V,1)}0==m.length&&delete T[E]}return m}(Ie.playersByQueriedElement,or.element,or)})}),Bt.forEach(function(or){return fr(or,fa)});var $n=Ga(In);return $n.onDestroy(function(){Bt.forEach(function(or){return Jt(or,fa)}),zr(tt,m.toStyles)}),gn.forEach(function(or){_i(V,or,[]).push($n)}),$n}},{key:"_buildPlayer",value:function(h,m,R){return m.length>0?this.driver.animate(h.element,m,h.duration,h.delay,h.easing,R):new vr(h.duration,h.delay)}}]),T}(),ge=function(){function T(E,h,m){(0,le.Z)(this,T),this.namespaceId=E,this.triggerName=h,this.element=m,this._player=new vr,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return(0,j.Z)(T,[{key:"setRealPlayer",value:function(h){var m=this;this._containsRealPlayer||(this._player=h,Object.keys(this._queuedCallbacks).forEach(function(R){m._queuedCallbacks[R].forEach(function(V){return $u(h,R,void 0,V)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(h.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(h){this.totalTime=h}},{key:"syncPlayerEvents",value:function(h){var m=this,R=this._player;R.triggerCallback&&h.onStart(function(){return R.triggerCallback("start")}),h.onDone(function(){return m.finish()}),h.onDestroy(function(){return m.destroy()})}},{key:"_queueEvent",value:function(h,m){_i(this._queuedCallbacks,h,[]).push(m)}},{key:"onDone",value:function(h){this.queued&&this._queueEvent("done",h),this._player.onDone(h)}},{key:"onStart",value:function(h){this.queued&&this._queueEvent("start",h),this._player.onStart(h)}},{key:"onDestroy",value:function(h){this.queued&&this._queueEvent("destroy",h),this._player.onDestroy(h)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(h){this.queued||this._player.setPosition(h)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(h){var m=this._player;m.triggerCallback&&m.triggerCallback(h)}}]),T}();function Oe(T){return null!=T?T:null}function bt(T){return T&&1===T.nodeType}function Ht(T,E){var h=T.style.display;return T.style.display=null!=E?E:"none",h}function Pt(T,E,h,m,R){var V=[];h.forEach(function(Ie){return V.push(Ht(Ie))});var X=[];m.forEach(function(Ie,We){var tt={};Ie.forEach(function(Zt){var Bt=tt[Zt]=E.computeStyle(We,Zt,R);(!Bt||0==Bt.length)&&(We[ps]=vs,X.push(We))}),T.set(We,tt)});var he=0;return h.forEach(function(Ie){return Ht(Ie,V[he++])}),X}function bn(T,E){var h=new Map;if(T.forEach(function(he){return h.set(he,[])}),0==E.length)return h;var R=new Set(E),V=new Map;function X(he){if(!he)return 1;var Ie=V.get(he);if(Ie)return Ie;var We=he.parentNode;return Ie=h.has(We)?We:R.has(We)?1:X(We),V.set(he,Ie),Ie}return E.forEach(function(he){var Ie=X(he);1!==Ie&&h.get(Ie).push(he)}),h}function fr(T,E){var h;null===(h=T.classList)||void 0===h||h.add(E)}function Jt(T,E){var h;null===(h=T.classList)||void 0===h||h.remove(E)}function Fn(T,E,h){Ga(h).onDone(function(){return T.processLeaveNode(E)})}function nr(T,E){for(var h=0;h<T.length;h++){var m=T[h];m instanceof li?nr(m.players,E):E.push(m)}}function bi(T,E){var h=Object.keys(T),m=Object.keys(E);if(h.length!=m.length)return!1;for(var R=0;R<h.length;R++){var V=h[R];if(!E.hasOwnProperty(V)||T[V]!==E[V])return!1}return!0}function Aa(T,E,h){var m=h.get(T);if(!m)return!1;var R=E.get(T);return R?m.forEach(function(V){return R.add(V)}):E.set(T,m),h.delete(T),!0}var Cs=function(){function T(E,h,m){var R=this;(0,le.Z)(this,T),this.bodyNode=E,this._driver=h,this._normalizer=m,this._triggerCache={},this.onRemovalComplete=function(V,X){},this._transitionEngine=new me(E,h,m),this._timelineEngine=new al(E,h,m),this._transitionEngine.onRemovalComplete=function(V,X){return R.onRemovalComplete(V,X)}}return(0,j.Z)(T,[{key:"registerTrigger",value:function(h,m,R,V,X){var he=h+"-"+V,Ie=this._triggerCache[he];if(!Ie){var We=[],Zt=Hs(this._driver,X,We,[]);if(We.length)throw function Ji(T,E){return new F.vHH(3404,ar)}();Ie=function pu(T,E,h){return new oc(T,E,h)}(V,Zt,this._normalizer),this._triggerCache[he]=Ie}this._transitionEngine.registerTrigger(m,V,Ie)}},{key:"register",value:function(h,m){this._transitionEngine.register(h,m)}},{key:"destroy",value:function(h,m){this._transitionEngine.destroy(h,m)}},{key:"onInsert",value:function(h,m,R,V){this._transitionEngine.insertNode(h,m,R,V)}},{key:"onRemove",value:function(h,m,R,V){this._transitionEngine.removeNode(h,m,V||!1,R)}},{key:"disableAnimations",value:function(h,m){this._transitionEngine.markElementAsDisabled(h,m)}},{key:"process",value:function(h,m,R,V){if("@"==R.charAt(0)){var X=wl(R),he=(0,Ui.Z)(X,2);this._timelineEngine.command(he[0],m,he[1],V)}else this._transitionEngine.trigger(h,m,R,V)}},{key:"listen",value:function(h,m,R,V,X){if("@"==R.charAt(0)){var he=wl(R),Ie=(0,Ui.Z)(he,2);return this._timelineEngine.listen(Ie[0],m,Ie[1],X)}return this._transitionEngine.listen(h,m,R,V,X)}},{key:"flush",value:function(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(h)}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}}]),T}();function Ai(T,E){var h=null,m=null;return Array.isArray(E)&&E.length?(h=ti(E[0]),E.length>1&&(m=ti(E[E.length-1]))):E&&(h=ti(E)),h||m?new vf(T,h,m):null}var vf=function(){var T=function(){function E(h,m,R){(0,le.Z)(this,E),this._element=h,this._startStyles=m,this._endStyles=R,this._state=0;var V=E.initialStylesByElement.get(h);V||E.initialStylesByElement.set(h,V={}),this._initialStyles=V}return(0,j.Z)(E,[{key:"start",value:function(){this._state<1&&(this._startStyles&&zr(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(zr(this._element,this._initialStyles),this._endStyles&&(zr(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(E.initialStylesByElement.delete(this._element),this._startStyles&&(fs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fs(this._element,this._endStyles),this._endStyles=null),zr(this._element,this._initialStyles),this._state=3)}}]),E}();return T.initialStylesByElement=new WeakMap,T}();function ti(T){for(var E=null,h=Object.keys(T),m=0;m<h.length;m++){var R=h[m];ul(R)&&((E=E||{})[R]=T[R])}return E}function ul(T){return"display"===T||"position"===T}var no=function(){function T(E,h,m,R){(0,le.Z)(this,T),this.element=E,this.keyframes=h,this.options=m,this._specialStyles=R,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=m.duration,this._delay=m.delay||0,this.time=this._duration+this._delay}return(0,j.Z)(T,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(h){return h()}),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var h=this;if(!this._initialized){this._initialized=!0;var m=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,m,this.options),this._finalKeyframe=m.length?m[m.length-1]:{},this.domPlayer.addEventListener("finish",function(){return h._onFinish()})}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(h,m,R){return h.animate(m,R)}},{key:"onStart",value:function(h){this._onStartFns.push(h)}},{key:"onDone",value:function(h){this._onDoneFns.push(h)}},{key:"onDestroy",value:function(h){this._onDestroyFns.push(h)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(h){return h()}),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(h){return h()}),this._onDestroyFns=[])}},{key:"setPosition",value:function(h){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=h*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"totalTime",get:function(){return this._delay+this._duration}},{key:"beforeDestroy",value:function(){var h=this,m={};if(this.hasStarted()){var R=this._finalKeyframe;Object.keys(R).forEach(function(V){"offset"!=V&&(m[V]=h._finished?R[V]:J(h.element,V))})}this.currentSnapshot=m}},{key:"triggerCallback",value:function(h){var m="start"==h?this._onStartFns:this._onDoneFns;m.forEach(function(R){return R()}),m.length=0}}]),T}(),Fu=function(){function T(){(0,le.Z)(this,T)}return(0,j.Z)(T,[{key:"validateStyleProperty",value:function(h){return Lo(h)}},{key:"matchesElement",value:function(h,m){return!1}},{key:"containsElement",value:function(h,m){return Cr(h,m)}},{key:"getParentElement",value:function(h){return Pr(h)}},{key:"query",value:function(h,m,R){return _s(h,m,R)}},{key:"computeStyle",value:function(h,m,R){return window.getComputedStyle(h)[m]}},{key:"animate",value:function(h,m,R,V,X){var he=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],Ie=0==V?"both":"forwards",We={duration:R,delay:V,fill:Ie};X&&(We.easing=X);var tt={},Zt=he.filter(function(gn){return gn instanceof no});C(R,V)&&Zt.forEach(function(gn){var In=gn.currentSnapshot;Object.keys(In).forEach(function($n){return tt[$n]=In[$n]})});var Bt=Ai(h,m=D(h,m=m.map(function(gn){return qs(gn,!1)}),tt));return new no(h,m,We,Bt)}}]),T}(),Wl=function(){var T=function(E){(0,M.Z)(m,E);var h=(0,ce.Z)(m);function m(R,V){var X;return(0,le.Z)(this,m),(X=h.call(this))._nextAnimationId=0,X._renderer=R.createRenderer(V.body,{id:"0",encapsulation:F.ifc.None,styles:[],data:{animation:[]}}),X}return(0,j.Z)(m,[{key:"build",value:function(V){var X=this._nextAnimationId.toString();this._nextAnimationId++;var he=Array.isArray(V)?mt(V):V;return Kl(this._renderer,null,X,"register",[he]),new Fc(X,this._renderer)}}]),m}($);return T.\u0275fac=function(h){return new(h||T)(F.LFG(F.FYo),F.LFG(x.K0))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),Fc=function(T){(0,M.Z)(h,T);var E=(0,ce.Z)(h);function h(m,R){var V;return(0,le.Z)(this,h),(V=E.call(this))._id=m,V._renderer=R,V}return(0,j.Z)(h,[{key:"create",value:function(R,V){return new pf(this._id,R,V||{},this._renderer)}}]),h}(Q),pf=function(){function T(E,h,m,R){(0,le.Z)(this,T),this.id=E,this.element=h,this._renderer=R,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",m)}return(0,j.Z)(T,[{key:"_listen",value:function(h,m){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(h),m)}},{key:"_command",value:function(h){for(var m=arguments.length,R=new Array(m>1?m-1:0),V=1;V<m;V++)R[V-1]=arguments[V];return Kl(this._renderer,this.element,this.id,h,R)}},{key:"onDone",value:function(h){this._listen("done",h)}},{key:"onStart",value:function(h){this._listen("start",h)}},{key:"onDestroy",value:function(h){this._listen("destroy",h)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset"),this._started=!1}},{key:"setPosition",value:function(h){this._command("setPosition",h)}},{key:"getPosition",value:function(){var h,m;return null!==(m=null===(h=this._renderer.engine.players[+this.id])||void 0===h?void 0:h.getPosition())&&void 0!==m?m:0}}]),T}();function Kl(T,E,h,m,R){return T.setProperty(E,"@@".concat(h,":").concat(m),R)}var Zc="@.disabled",bl=function(){var T=function(){function E(h,m,R){(0,le.Z)(this,E),this.delegate=h,this.engine=m,this._zone=R,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),m.onRemovalComplete=function(V,X){var he=null==X?void 0:X.parentNode(V);he&&X.removeChild(he,V)}}return(0,j.Z)(E,[{key:"createRenderer",value:function(m,R){var V=this,he=this.delegate.createRenderer(m,R);if(!(m&&R&&R.data&&R.data.animation)){var Ie=this._rendererCache.get(he);return Ie||(Ie=new Vo("",he,this.engine),this._rendererCache.set(he,Ie)),Ie}var We=R.id,tt=R.id+"-"+this._currentId;return this._currentId++,this.engine.register(tt,m),R.data.animation.forEach(function gn(In){Array.isArray(In)?In.forEach(gn):V.engine.registerTrigger(We,tt,m,In.name,In)}),new Tl(this,tt,he,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var m=this;this.promise.then(function(){m._microtaskId++})}},{key:"scheduleListenerCallback",value:function(m,R,V){var X=this;m>=0&&m<this._microtaskId?this._zone.run(function(){return R(V)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){X._zone.run(function(){X._animationCallbacksBuffer.forEach(function(he){var Ie=(0,Ui.Z)(he,2);(0,Ie[0])(Ie[1])}),X._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([R,V]))}},{key:"end",value:function(){var m=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){m._scheduleCountTask(),m.engine.flush(m._microtaskId)}),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),E}();return T.\u0275fac=function(h){return new(h||T)(F.LFG(F.FYo),F.LFG(Cs),F.LFG(F.R0b))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),Vo=function(){function T(E,h,m){(0,le.Z)(this,T),this.namespaceId=E,this.delegate=h,this.engine=m,this.destroyNode=this.delegate.destroyNode?function(R){return h.destroyNode(R)}:null}return(0,j.Z)(T,[{key:"data",get:function(){return this.delegate.data}},{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(h,m){return this.delegate.createElement(h,m)}},{key:"createComment",value:function(h){return this.delegate.createComment(h)}},{key:"createText",value:function(h){return this.delegate.createText(h)}},{key:"appendChild",value:function(h,m){this.delegate.appendChild(h,m),this.engine.onInsert(this.namespaceId,m,h,!1)}},{key:"insertBefore",value:function(h,m,R){var V=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.delegate.insertBefore(h,m,R),this.engine.onInsert(this.namespaceId,m,h,V)}},{key:"removeChild",value:function(h,m,R){this.engine.onRemove(this.namespaceId,m,this.delegate,R)}},{key:"selectRootElement",value:function(h,m){return this.delegate.selectRootElement(h,m)}},{key:"parentNode",value:function(h){return this.delegate.parentNode(h)}},{key:"nextSibling",value:function(h){return this.delegate.nextSibling(h)}},{key:"setAttribute",value:function(h,m,R,V){this.delegate.setAttribute(h,m,R,V)}},{key:"removeAttribute",value:function(h,m,R){this.delegate.removeAttribute(h,m,R)}},{key:"addClass",value:function(h,m){this.delegate.addClass(h,m)}},{key:"removeClass",value:function(h,m){this.delegate.removeClass(h,m)}},{key:"setStyle",value:function(h,m,R,V){this.delegate.setStyle(h,m,R,V)}},{key:"removeStyle",value:function(h,m,R){this.delegate.removeStyle(h,m,R)}},{key:"setProperty",value:function(h,m,R){"@"==m.charAt(0)&&m==Zc?this.disableAnimations(h,!!R):this.delegate.setProperty(h,m,R)}},{key:"setValue",value:function(h,m){this.delegate.setValue(h,m)}},{key:"listen",value:function(h,m,R){return this.delegate.listen(h,m,R)}},{key:"disableAnimations",value:function(h,m){this.engine.disableAnimations(h,m)}}]),T}(),Tl=function(T){(0,M.Z)(h,T);var E=(0,ce.Z)(h);function h(m,R,V,X){var he;return(0,le.Z)(this,h),(he=E.call(this,R,V,X)).factory=m,he.namespaceId=R,he}return(0,j.Z)(h,[{key:"setProperty",value:function(R,V,X){"@"==V.charAt(0)?"."==V.charAt(1)&&V==Zc?this.disableAnimations(R,X=void 0===X||!!X):this.engine.process(this.namespaceId,R,V.substr(1),X):this.delegate.setProperty(R,V,X)}},{key:"listen",value:function(R,V,X){var he=this;if("@"==V.charAt(0)){var Ie=function xo(T){switch(T){case"body":return document.body;case"document":return document;case"window":return window;default:return T}}(R),We=V.substr(1),tt="";if("@"!=We.charAt(0)){var Zt=function Uc(T){var E=T.indexOf(".");return[T.substring(0,E),T.substr(E+1)]}(We),Bt=(0,Ui.Z)(Zt,2);We=Bt[0],tt=Bt[1]}return this.engine.listen(this.namespaceId,Ie,We,tt,function(gn){he.factory.scheduleListenerCallback(gn._data||-1,X,gn)})}return this.delegate.listen(R,V,X)}}]),h}(Vo),Bc=function(){var T=function(E){(0,M.Z)(m,E);var h=(0,ce.Z)(m);function m(R,V,X){return(0,le.Z)(this,m),h.call(this,R.body,V,X)}return(0,j.Z)(m,[{key:"ngOnDestroy",value:function(){this.flush()}}]),m}(Cs);return T.\u0275fac=function(h){return new(h||T)(F.LFG(x.K0),F.LFG(hu),F.LFG(bs))},T.\u0275prov=F.Yz7({token:T,factory:T.\u0275fac}),T}(),$l=new F.OlP("AnimationModuleType"),ll=[{provide:$,useClass:Wl},{provide:bs,useFactory:function ol(){return new Ou}},{provide:Cs,useClass:Bc},{provide:F.FYo,useFactory:function Is(T,E,h){return new bl(T,E,h)},deps:[Tt,Cs,F.R0b]}],lc=[{provide:hu,useFactory:function(){return new Fu}},{provide:$l,useValue:"BrowserAnimations"}].concat(ll),cc=[{provide:hu,useClass:Ru},{provide:$l,useValue:"NoopAnimations"}].concat(ll),ql=function(){var T=function(){function E(){(0,le.Z)(this,E)}return(0,j.Z)(E,null,[{key:"withConfig",value:function(m){return{ngModule:E,providers:m.disableAnimations?cc:lc}}}]),E}();return T.\u0275fac=function(h){return new(h||T)},T.\u0275mod=F.oAB({type:T}),T.\u0275inj=F.cJS({providers:lc,imports:[Mr]}),T}();function gf(T){return new ii(T,"assets/i18n/")}var $f=function(){var T=(0,j.Z)(function E(){(0,le.Z)(this,E)});return T.\u0275fac=function(h){return new(h||T)},T.\u0275mod=F.oAB({type:T,bootstrap:[ys]}),T.\u0275inj=F.cJS({providers:[wr],imports:[[Mr,Vi,Dn,ql,lt.hO.initializeApp(Le_firebase),Dt.aw.forRoot({loader:{provide:Dt.Zw,useFactory:gf,deps:[wr]},defaultLanguage:"ka"})]]}),T}();(0,F.G48)(),yn().bootstrapModule($f).catch(function(T){return console.error(T)})},40440:function(Wt,Qe,O){"use strict";O.d(Qe,{nm:function(){return Ua}});var z=O(43144),H=O(15671),j=O(75813);O(5e3),O(15867);var be,ct=O(37762),gt=O(74902),kt=O(4942),dt=O(15861),$e=O(87757),Fe=O(49681),Pe=O(34859),Ce=O(42090),at=O(41877),Ge=new Map,Se={activated:!1,tokenObservers:[]},Mt={initialized:!1,enabled:!1};function te(ze){return Ge.get(ze)||Se}function Tt(ze,ut){Ge.set(ze,ut)}function jt(){return Mt}var ft=function(){function ze(ut,yt,It,St,At){if((0,H.Z)(this,ze),this.operation=ut,this.retryPolicy=yt,this.getWaitDuration=It,this.lowerBound=St,this.upperBound=At,this.pending=null,this.nextErrorWaitInterval=St,St>At)throw new Error("Proactive refresh lower bound greater than upper bound!")}return(0,z.Z)(ze,[{key:"start",value:function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})}},{key:"stop",value:function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}},{key:"isRunning",value:function(){return!!this.pending}},{key:"process",value:(ut=(0,dt.Z)($e.mark(function It(St){return $e.wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:return this.stop(),ln.prev=1,this.pending=new Ce.BH,ln.next=5,Ft(this.getNextRun(St));case 5:return this.pending.resolve(),ln.next=8,this.pending.promise;case 8:return this.pending=new Ce.BH,ln.next=11,this.operation();case 11:return this.pending.resolve(),ln.next=14,this.pending.promise;case 14:this.process(!0).catch(function(){}),ln.next=20;break;case 17:ln.prev=17,ln.t0=ln.catch(1),this.retryPolicy(ln.t0)?this.process(!1).catch(function(){}):this.stop();case 20:case"end":return ln.stop()}},It,this,[[1,17]])})),function yt(It){return ut.apply(this,arguments)})},{key:"getNextRun",value:function(yt){if(yt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var It=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),It}}]),ze;var ut}();function Ft(ze){return new Promise(function(ut){setTimeout(ut,ze)})}var $t=((0,kt.Z)(be={},"already-initialized","You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance."),(0,kt.Z)(be,"use-before-activation","App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services."),(0,kt.Z)(be,"fetch-network-error","Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}."),(0,kt.Z)(be,"fetch-parse-error","Fetch client could not parse response. Original error: {$originalErrorMessage}."),(0,kt.Z)(be,"fetch-status-error","Fetch server returned an HTTP error status. HTTP status: {$httpStatus}."),(0,kt.Z)(be,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,kt.Z)(be,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,kt.Z)(be,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,kt.Z)(be,"recaptcha-error","ReCAPTCHA error."),(0,kt.Z)(be,"throttled","Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"),be),Xt=new Ce.LL("appCheck","AppCheck",$t);function Rn(ze){if(!te(ze).activated)throw Xt.create("use-before-activation",{appName:ze.name})}function yr(ze,ut){return yn.apply(this,arguments)}function yn(){return(yn=(0,dt.Z)($e.mark(function ze(ut,yt){var It,St,At,ln,Vr,Nr,yi,ai,wr,Va,Bn;return $e.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:if(It=ut.url,St=ut.body,At={"Content-Type":"application/json"},!(ln=yt.getImmediate({optional:!0}))){xr.next=8;break}return xr.next=6,ln.getHeartbeatsHeader();case 6:(Vr=xr.sent)&&(At["X-Firebase-Client"]=Vr);case 8:return Nr={method:"POST",body:JSON.stringify(St),headers:At},xr.prev=9,xr.next=12,fetch(It,Nr);case 12:yi=xr.sent,xr.next=18;break;case 15:throw xr.prev=15,xr.t0=xr.catch(9),Xt.create("fetch-network-error",{originalErrorMessage:xr.t0.message});case 18:if(200===yi.status){xr.next=20;break}throw Xt.create("fetch-status-error",{httpStatus:yi.status});case 20:return xr.prev=20,xr.next=23,yi.json();case 23:ai=xr.sent,xr.next=29;break;case 26:throw xr.prev=26,xr.t1=xr.catch(20),Xt.create("fetch-parse-error",{originalErrorMessage:xr.t1.message});case 29:if((wr=ai.ttl.match(/^([\d.]+)(s)$/))&&wr[2]&&!isNaN(Number(wr[1]))){xr.next=32;break}throw Xt.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration "+"format: ".concat(ai.ttl)});case 32:return Va=1e3*Number(wr[1]),Bn=Date.now(),xr.abrupt("return",{token:ai.attestationToken,expireTimeMillis:Bn+Va,issuedAtTimeMillis:Bn});case 35:case"end":return xr.stop()}},ze,null,[[9,15],[20,26]])}))).apply(this,arguments)}function cr(ze,ut){var yt=ze.options,It=yt.projectId,St=yt.appId,At=yt.apiKey;return{url:"".concat("https://content-firebaseappcheck.googleapis.com/v1beta","/projects/").concat(It,"/apps/").concat(St,":").concat("exchangeDebugToken","?key=").concat(At),body:{debug_token:ut}}}var jr="firebase-app-check-store",Xr=null;function ra(){return Xr||(Xr=new Promise(function(ze,ut){try{var yt=indexedDB.open("firebase-app-check-database",1);yt.onsuccess=function(It){ze(It.target.result)},yt.onerror=function(It){var St;ut(Xt.create("storage-open",{originalErrorMessage:null===(St=It.target.error)||void 0===St?void 0:St.message}))},yt.onupgradeneeded=function(It){0===It.oldVersion&&It.target.result.createObjectStore(jr,{keyPath:"compositeKey"})}}catch(It){ut(Xt.create("storage-open",{originalErrorMessage:It.message}))}}))}function _n(){return(_n=(0,dt.Z)($e.mark(function ze(ut,yt){var St,At,ln;return $e.wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return Nr.next=2,ra();case 2:return St=Nr.sent.transaction(jr,"readwrite"),At=St.objectStore(jr),ln=At.put({compositeKey:ut,value:yt}),Nr.abrupt("return",new Promise(function(yi,ai){ln.onsuccess=function(wr){yi()},St.onerror=function(wr){var Va;ai(Xt.create("storage-set",{originalErrorMessage:null===(Va=wr.target.error)||void 0===Va?void 0:Va.message}))}}));case 7:case"end":return Nr.stop()}},ze)}))).apply(this,arguments)}var Dr=new at.Yd("@firebase/app-check");function Pi(ze,ut){return(0,Ce.hl)()?function ls(ze,ut){return function Qn(ze,ut){return _n.apply(this,arguments)}(function Pn(ze){return"".concat(ze.options.appId,"-").concat(ze.name)}(ze),ut)}(ze,ut).catch(function(yt){Dr.warn("Failed to write token to IndexedDB. Error: ".concat(yt))}):Promise.resolve()}function Or(){return jt().enabled}function Ur(){return dr.apply(this,arguments)}function dr(){return(dr=(0,dt.Z)($e.mark(function ze(){var ut;return $e.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(!(ut=jt()).enabled||!ut.token){It.next=5;break}return It.abrupt("return",ut.token.promise);case 5:throw Error("\n            Can't get debug token in production mode.\n        ");case 6:case"end":return It.stop()}},ze)}))).apply(this,arguments)}var Qt={error:"UNKNOWN_ERROR"};function vn(ze){return Ce.US.encodeString(JSON.stringify(ze),!1)}function zt(ze){return qt.apply(this,arguments)}function qt(){return qt=(0,dt.Z)($e.mark(function ze(ut){var yt,It,St,At,ln,Vr,Nr,yi,ai,wr=arguments;return $e.wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:if(yt=wr.length>1&&void 0!==wr[1]&&wr[1],Rn(It=ut.app),St=te(It),ln=void 0,At=St.token){Bn.next=11;break}return Bn.next=9,St.cachedTokenPromise;case 9:(Vr=Bn.sent)&&Le(Vr)&&(At=Vr);case 11:if(yt||!At||!Le(At)){Bn.next=13;break}return Bn.abrupt("return",{token:At.token});case 13:if(Nr=!1,!Or()){Bn.next=33;break}if(St.exchangeTokenPromise){Bn.next=26;break}return Bn.t0=yr,Bn.t1=cr,Bn.t2=It,Bn.next=21,Ur();case 21:Bn.t3=Bn.sent,Bn.t4=(0,Bn.t1)(Bn.t2,Bn.t3),Bn.t5=ut.heartbeatServiceProvider,St.exchangeTokenPromise=(0,Bn.t0)(Bn.t4,Bn.t5).then(function(wa){return St.exchangeTokenPromise=void 0,wa}),Nr=!0;case 26:return Bn.next=28,St.exchangeTokenPromise;case 28:return yi=Bn.sent,Bn.next=31,Pi(It,yi);case 31:return Tt(It,Object.assign(Object.assign({},St),{token:yi})),Bn.abrupt("return",{token:yi.token});case 33:return Bn.prev=33,St.exchangeTokenPromise||(St.exchangeTokenPromise=St.provider.getToken().then(function(wa){return St.exchangeTokenPromise=void 0,wa}),Nr=!0),Bn.next=37,St.exchangeTokenPromise;case 37:At=Bn.sent,Bn.next=44;break;case 40:Bn.prev=40,Bn.t6=Bn.catch(33),Bn.t6.code==="appCheck/".concat("throttled")?Dr.warn(Bn.t6.message):Dr.error(Bn.t6),ln=Bn.t6;case 44:if(At){Bn.next=48;break}ai=lt(ln),Bn.next=52;break;case 48:return ai={token:At.token},Tt(It,Object.assign(Object.assign({},St),{token:At})),Bn.next=52,Pi(It,At);case 52:return Nr&&Ne(It,ai),Bn.abrupt("return",ai);case 54:case"end":return Bn.stop()}},ze,null,[[33,40]])})),qt.apply(this,arguments)}function kr(ze,ut){var yt=te(ze),It=yt.tokenObservers.filter(function(St){return St.next!==ut});0===It.length&&yt.tokenRefresher&&yt.tokenRefresher.isRunning()&&yt.tokenRefresher.stop(),Tt(ze,Object.assign(Object.assign({},yt),{tokenObservers:It}))}function On(ze){var ut=ze.app,yt=te(ut),It=yt.tokenRefresher;It||(It=function Xe(ze){var ut=ze.app;return new ft((0,dt.Z)($e.mark(function yt(){var St;return $e.wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:if(te(ut).token){ln.next=7;break}return ln.next=4,zt(ze);case 4:St=ln.sent,ln.next=10;break;case 7:return ln.next=9,zt(ze,!0);case 9:St=ln.sent;case 10:if(!St.error){ln.next=12;break}throw St.error;case 12:case"end":return ln.stop()}},yt)})),function(){return!0},function(){var yt=te(ut);if(yt.token){var It=yt.token.issuedAtTimeMillis+.5*(yt.token.expireTimeMillis-yt.token.issuedAtTimeMillis)+3e5;return It=Math.min(It,yt.token.expireTimeMillis-3e5),Math.max(0,It-Date.now())}return 0},3e4,96e4)}(ze),Tt(ut,Object.assign(Object.assign({},yt),{tokenRefresher:It}))),!It.isRunning()&&yt.isTokenAutoRefreshEnabled&&It.start()}function Ne(ze,ut){var St,yt=te(ze).tokenObservers,It=(0,ct.Z)(yt);try{for(It.s();!(St=It.n()).done;){var At=St.value;try{"EXTERNAL"===At.type&&null!=ut.error?At.error(ut.error):At.next(ut)}catch(ln){}}}catch(ln){It.e(ln)}finally{It.f()}}function Le(ze){return ze.expireTimeMillis-Date.now()>0}function lt(ze){return{token:vn(Qt),error:ze}}var _t=function(){function ze(ut,yt){(0,H.Z)(this,ze),this.app=ut,this.heartbeatServiceProvider=yt}return(0,z.Z)(ze,[{key:"_delete",value:function(){var At,yt=te(this.app),St=(0,ct.Z)(yt.tokenObservers);try{for(St.s();!(At=St.n()).done;)kr(this.app,At.value.next)}catch(Vr){St.e(Vr)}finally{St.f()}return Promise.resolve()}}]),ze}(),ii="app-check-internal";!function Ui(){(0,Fe._registerComponent)(new Pe.wA("app-check",function(ze){return function Dt(ze,ut){return new _t(ze,ut)}(ze.getProvider("app").getImmediate(),ze.getProvider("heartbeat"))},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(ze,ut,yt){ze.getProvider(ii).initialize()})),(0,Fe._registerComponent)(new Pe.wA(ii,function(ze){return function pn(ze){return{getToken:function(yt){return zt(ze,yt)},addTokenListener:function(yt){return function Mn(ze,ut,yt,It){var St=ze.app,At=te(St),ln={next:yt,error:It,type:ut};if(Tt(St,Object.assign(Object.assign({},At),{tokenObservers:[].concat((0,gt.Z)(At.tokenObservers),[ln])})),At.token&&Le(At.token)){var Vr=At.token;Promise.resolve().then(function(){yt({token:Vr.token}),On(ze)}).catch(function(){})}At.cachedTokenPromise.then(function(){return On(ze)})}(ze,"INTERNAL",yt)},removeTokenListener:function(yt){return kr(ze.app,yt)}}}(ze.getProvider("app-check").getImmediate())},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Fe.registerVersion)("@firebase/app-check","0.5.5")}();var Ua=(0,z.Z)(function ze(){return(0,H.Z)(this,ze),(0,j.vb)("app-check")});"undefined"!=typeof window&&window},73385:function(Wt,Qe,O){"use strict";O.d(Qe,{zQ:function(){return Ge},rT:function(){return Pe},f7:function(){return at},L6:function(){return $e},_Q:function(){return Fe},lh:function(){return Ce},Qv:function(){return dt},nw:function(){return be}});var z=O(43144),H=O(15671),j=O(97685),le=O(74902),M=O(5e3),ce=O(77579),x=O(39646),F=O(69751),ke=O(88996),Ee=O(56451),Te=O(63900),et=O(30576);function Je(Mt,te){return(0,et.m)(te)?(0,Te.w)(function(){return Mt},te):(0,Te.w)(function(){return Mt})}var rt=O(85363),Ve=O(54004),fe=O(23151),ve=O(50590),qe=O(49468),wt=O(39300),ht=O(75813),it=O(12011),Me=O(69808),ct=O(40440),dt=(O(70127),new M.OlP("angularfire2.auth.use-emulator")),$e=new M.OlP("angularfire2.auth.settings"),Fe=new M.OlP("angularfire2.auth.tenant-id"),Pe=new M.OlP("angularfire2.auth.langugage-code"),Ce=new M.OlP("angularfire2.auth.use-device-language"),at=new M.OlP("angularfire.auth.persistence"),be=function(te,Tt,jt,kn,on,Ze,Kt,ot){return(0,it.cc)("".concat(te.name,".auth"),"AngularFireAuth",te.name,function(){var je=Tt.runOutsideAngular(function(){return te.auth()});if(jt&&je.useEmulator.apply(je,(0,le.Z)(jt)),kn&&(je.tenantId=kn),je.languageCode=on,Ze&&je.useDeviceLanguage(),Kt)for(var ft=0,Ft=Object.entries(Kt);ft<Ft.length;ft++){var $t=(0,j.Z)(Ft[ft],2);je.settings[$t[0]]=$t[1]}return ot&&je.setPersistence(ot),je},[jt,kn,on,Ze,Kt,ot])},Ge=function(){var Mt=(0,z.Z)(function te(Tt,jt,kn,on,Ze,Kt,ot,je,ft,Ft,$t,Xt){(0,H.Z)(this,te);var qn=new ce.x,Rn=(0,x.of)(void 0).pipe((0,rt.Q)(Ze.outsideAngular),(0,Te.w)(function(){return on.runOutsideAngular(function(){return Promise.resolve().then(O.bind(O,4087))})}),(0,Ve.U)(function(){return(0,it.on)(Tt,on,jt)}),(0,Ve.U)(function(yn){return be(yn,on,Kt,je,ft,Ft,ot,$t)}),(0,fe.d)({bufferSize:1,refCount:!1}));if((0,Me.PM)(kn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,x.of)(null);else{Rn.pipe((0,ve.P)()).subscribe();var Yr=Rn.pipe((0,Te.w)(function(yn){return yn.getRedirectResult().then(function(Yn){return Yn},function(){return null})}),ht.iC,(0,fe.d)({bufferSize:1,refCount:!1})),Ir=Rn.pipe((0,Te.w)(function(yn){return new F.y(function(Yn){return{unsubscribe:on.runOutsideAngular(function(){return yn.onAuthStateChanged(function(Mr){return Yn.next(Mr)},function(Mr){return Yn.error(Mr)},function(){return Yn.complete()})})}})})),yr=Rn.pipe((0,Te.w)(function(yn){return new F.y(function(Yn){return{unsubscribe:on.runOutsideAngular(function(){return yn.onIdTokenChanged(function(Mr){return Yn.next(Mr)},function(Mr){return Yn.error(Mr)},function(){return Yn.complete()})})}})}));this.authState=Yr.pipe(Je(Ir),(0,qe.R)(Ze.outsideAngular),(0,rt.Q)(Ze.insideAngular)),this.user=Yr.pipe(Je(yr),(0,qe.R)(Ze.outsideAngular),(0,rt.Q)(Ze.insideAngular)),this.idToken=this.user.pipe((0,Te.w)(function(yn){return yn?(0,ke.D)(yn.getIdToken()):(0,x.of)(null)})),this.idTokenResult=this.user.pipe((0,Te.w)(function(yn){return yn?(0,ke.D)(yn.getIdTokenResult()):(0,x.of)(null)})),this.credential=(0,Ee.T)(Yr,qn,this.authState.pipe((0,wt.h)(function(yn){return!yn}))).pipe((0,Ve.U)(function(yn){return(null==yn?void 0:yn.user)?yn:null}),(0,qe.R)(Ze.outsideAngular),(0,rt.Q)(Ze.insideAngular))}return(0,it.pX)(this,Rn,on,{spy:{apply:function(Yn,Mr,cr){(Yn.startsWith("signIn")||Yn.startsWith("createUser"))&&cr.then(function(Lr){return qn.next(Lr)})}}})});return Mt.\u0275fac=function(Tt){return new(Tt||Mt)(M.LFG(it.Dh),M.LFG(it.xv,8),M.LFG(M.Lbi),M.LFG(M.R0b),M.LFG(ht.HU),M.LFG(dt,8),M.LFG($e,8),M.LFG(Fe,8),M.LFG(Pe,8),M.LFG(Ce,8),M.LFG(at,8),M.LFG(ct.nm,8))},Mt.\u0275prov=M.Yz7({token:Mt,factory:Mt.\u0275fac,providedIn:"any"}),Mt}()},12011:function(Wt,Qe,O){"use strict";O.d(Qe,{hO:function(){return ve},xv:function(){return Je},Dh:function(){return et},GT:function(){return Ee},cc:function(){return qe},on:function(){return rt},pX:function(){return ke}});var z=O(97685),H=O(43144),j=O(15671),le=O(74902),M=O(5e3),ce=O(70127),x=O(75813);Wt=O.hmd(Wt);var F=["ngOnDestroy"],ke=function(ct,gt,kt){var dt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(ct,{get:function(Fe,Pe){return kt.runOutsideAngular(function(){var Ce;if(ct[Pe])return(null===(Ce=null==dt?void 0:dt.spy)||void 0===Ce?void 0:Ce.get)&&dt.spy.get(Pe,ct[Pe]),ct[Pe];if(F.indexOf(Pe)>-1)return function(){};var at=gt.toPromise().then(function(be){var Ge=be&&be[Pe];return"function"==typeof Ge?Ge.bind(be):Ge&&Ge.then?Ge.then(function(Se){return kt.run(function(){return Se})}):kt.run(function(){return Ge})});return new Proxy(function(){},{get:function(Ge,Se){return at[Se]},apply:function(Ge,Se,Mt){return at.then(function(te){var Tt,jt=te&&te.apply(void 0,(0,le.Z)(Mt));return(null===(Tt=null==dt?void 0:dt.spy)||void 0===Tt?void 0:Tt.apply)&&dt.spy.apply(Pe,Mt,jt),jt})}})})}})},Ee=function(ct,gt){gt.forEach(function(kt){Object.getOwnPropertyNames(kt.prototype||kt).forEach(function(dt){Object.defineProperty(ct.prototype,dt,Object.getOwnPropertyDescriptor(kt.prototype||kt,dt))})})},Te=(0,H.Z)(function Me(ct){return(0,j.Z)(this,Me),ct}),et=new M.OlP("angularfire2.app.options"),Je=new M.OlP("angularfire2.app.name");function rt(Me,ct,gt){var dt="object"==typeof gt&&gt||{};dt.name=dt.name||"string"==typeof gt&&gt||"[DEFAULT]";var Fe=ce.Z.apps.filter(function(Ce){return Ce&&Ce.name===dt.name})[0]||ct.runOutsideAngular(function(){return ce.Z.initializeApp(Me,dt)});try{if(JSON.stringify(Me)!==JSON.stringify(Fe.options)){var Pe=!!Wt.hot;Ve("error","".concat(Fe.name," Firebase App already initialized with different options").concat(Pe?", you may need to reload as Firebase is not HMR aware.":"."))}}catch(Ce){}return new Te(Fe)}var Ve=function(ct){if((0,M.X6Q)()&&"undefined"!=typeof console){for(var gt,kt=arguments.length,dt=new Array(kt>1?kt-1:0),$e=1;$e<kt;$e++)dt[$e-1]=arguments[$e];(gt=console)[ct].apply(gt,dt)}},fe={provide:Te,useFactory:rt,deps:[et,M.R0b,[new M.FiY,Je]]},ve=function(){var Me=function(){function ct(gt){(0,j.Z)(this,ct),ce.Z.registerVersion("angularfire",x.q4.full,"core"),ce.Z.registerVersion("angularfire",x.q4.full,"app-compat"),ce.Z.registerVersion("angular",M.q4F.full,gt.toString())}return(0,H.Z)(ct,null,[{key:"initializeApp",value:function(kt,dt){return{ngModule:ct,providers:[{provide:et,useValue:kt},{provide:Je,useValue:dt}]}}}]),ct}();return Me.\u0275fac=function(gt){return new(gt||Me)(M.LFG(M.Lbi))},Me.\u0275mod=M.oAB({type:Me}),Me.\u0275inj=M.cJS({providers:[fe]}),Me}();function qe(Me,ct,gt,kt,dt){var $e=globalThis.\u0275AngularfireInstanceCache.find(function(be){return be[0]===Me})||[],Fe=(0,z.Z)($e,3),Pe=Fe[1],Ce=Fe[2];if(Pe)return function wt(Me,ct){try{return Me.toString()===ct.toString()}catch(gt){return Me===ct}}(dt,Ce)||(it("error","".concat(ct," was already initialized on the ").concat(gt," Firebase App with different settings.").concat(ht?" You may need to reload as Firebase is not HMR aware.":"")),it("warn",{is:dt,was:Ce})),Pe;var at=kt();return globalThis.\u0275AngularfireInstanceCache.push([Me,at,dt]),at}var ht=!!Wt.hot,it=function(ct){if((0,M.X6Q)()&&"undefined"!=typeof console){for(var gt,kt=arguments.length,dt=new Array(kt>1?kt-1:0),$e=1;$e<kt;$e++)dt[$e-1]=arguments[$e];(gt=console)[ct].apply(gt,dt)}};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},75813:function(Wt,Qe,O){"use strict";O.d(Qe,{q4:function(){return bs},iC:function(){return to},HU:function(){return wo},vb:function(){return eo},JM:function(){return oc},u3:function(){return ps}});var Ve,z=O(15671),H=O(43144),j=O(5e3),le=O(15867),M=O(97685),ce=O(15861),x=O(4942),F=O(87757),ke=O(49681),Ee=O(42090),Te=O(34859),et=O(41877),Je=O(37762),rt=O(74902),fe="@firebase/installations",ve="0.5.7",wt="w:".concat(ve),ht="FIS_v2",kt=((0,x.Z)(Ve={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,x.Z)(Ve,"not-registered","Firebase Installation is not registered."),(0,x.Z)(Ve,"installation-not-found","Firebase Installation not found."),(0,x.Z)(Ve,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),(0,x.Z)(Ve,"app-offline","Could not process request. Application offline."),(0,x.Z)(Ve,"delete-pending-registration","Can't delete installation while there is a pending registration request."),Ve),dt=new Ee.LL("installations","Installations",kt);function $e(G){return G instanceof Ee.ZR&&G.code.includes("request-failed")}function Fe(G){var W=G.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(W,"/installations")}function Pe(G){return{token:G.token,requestStatus:2,expiresIn:te(G.expiresIn),creationTime:Date.now()}}function Ce(G,W){return at.apply(this,arguments)}function at(){return(at=(0,ce.Z)(F.mark(function G(W,ee){var me;return F.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,ee.json();case 2:return Re.abrupt("return",dt.create("request-failed",{requestName:W,serverCode:(me=Re.sent.error).code,serverMessage:me.message,serverStatus:me.status}));case 5:case"end":return Re.stop()}},G)}))).apply(this,arguments)}function be(G){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":G.apiKey})}function Ge(G,W){var ee=W.refreshToken,ne=be(G);return ne.append("Authorization",function Tt(G){return"".concat(ht," ").concat(G)}(ee)),ne}function Se(G){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,ce.Z)(F.mark(function G(W){var ee;return F.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,W();case 2:if(!((ee=me.sent).status>=500&&ee.status<600)){me.next=5;break}return me.abrupt("return",W());case 5:return me.abrupt("return",ee);case 6:case"end":return me.stop()}},G)}))).apply(this,arguments)}function te(G){return Number(G.replace("s","000"))}function jt(G,W){return kn.apply(this,arguments)}function kn(){return(kn=(0,ce.Z)(F.mark(function G(W,ee){var ne,me,ge,Re,Oe,bt,Rt,Pt,bn,fr,Jt;return F.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(me=W.heartbeatServiceProvider,ge=ee.fid,Re=Fe(ne=W.appConfig),Oe=be(ne),!(bt=me.getImmediate({optional:!0}))){ur.next=10;break}return ur.next=8,bt.getHeartbeatsHeader();case 8:(Rt=ur.sent)&&Oe.append("x-firebase-client",Rt);case 10:return Pt={method:"POST",headers:Oe,body:JSON.stringify({fid:ge,authVersion:ht,appId:ne.appId,sdkVersion:wt})},ur.next=14,Se(function(){return fetch(Re,Pt)});case 14:if(!(bn=ur.sent).ok){ur.next=23;break}return ur.next=18,bn.json();case 18:return Jt={fid:(fr=ur.sent).fid||ge,registrationStatus:2,refreshToken:fr.refreshToken,authToken:Pe(fr.authToken)},ur.abrupt("return",Jt);case 23:return ur.next=25,Ce("Create Installation",bn);case 25:throw ur.sent;case 26:case"end":return ur.stop()}},G)}))).apply(this,arguments)}function on(G){return new Promise(function(W){setTimeout(W,G)})}var Kt=/^[cdef][\w-]{21}$/;function je(){try{var G=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(G),G[0]=112+G[0]%16;var ee=function ft(G){return function Ze(G){return btoa(String.fromCharCode.apply(String,(0,rt.Z)(G))).replace(/\+/g,"-").replace(/\//g,"_")}(G).substr(0,22)}(G);return Kt.test(ee)?ee:""}catch(ne){return""}}function Ft(G){return"".concat(G.appName,"!").concat(G.appId)}var $t=new Map;function Xt(G,W){var ee=Ft(G);Sn(ee,W),function Yr(G,W){var ee=function yr(){return!Ir&&"BroadcastChannel"in self&&((Ir=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(G){Sn(G.data.key,G.data.fid)}),Ir}();ee&&ee.postMessage({key:G,fid:W}),function yn(){0===$t.size&&Ir&&(Ir.close(),Ir=null)}()}(ee,W)}function Sn(G,W){var ee=$t.get(G);if(ee){var me,ne=(0,Je.Z)(ee);try{for(ne.s();!(me=ne.n()).done;)(0,me.value)(W)}catch(Re){ne.e(Re)}finally{ne.f()}}}var Ir=null;var cr="firebase-installations-store",Lr=null;function os(){return Lr||(Lr=(0,Ee.X3)("firebase-installations-database",1,function(G,W){0===W&&G.createObjectStore(cr)})),Lr}function jr(G,W){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,ce.Z)(F.mark(function G(W,ee){var ne,ge,Re,Oe;return F.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return ne=Ft(W),Rt.next=3,os();case 3:return ge=Rt.sent.transaction(cr,"readwrite"),Re=ge.objectStore(cr),Rt.next=8,Re.get(ne);case 8:return Oe=Rt.sent,Rt.next=11,Re.put(ee,ne);case 11:return Rt.next=13,ge.complete;case 13:return(!Oe||Oe.fid!==ee.fid)&&Xt(W,ee.fid),Rt.abrupt("return",ee);case 15:case"end":return Rt.stop()}},G)}))).apply(this,arguments)}function Xr(G){return ra.apply(this,arguments)}function ra(){return(ra=(0,ce.Z)(F.mark(function G(W){var ee,me;return F.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return ee=Ft(W),Re.next=3,os();case 3:return me=Re.sent.transaction(cr,"readwrite"),Re.next=7,me.objectStore(cr).delete(ee);case 7:return Re.next=9,me.complete;case 9:case"end":return Re.stop()}},G)}))).apply(this,arguments)}function ma(G,W){return ls.apply(this,arguments)}function ls(){return(ls=(0,ce.Z)(F.mark(function G(W,ee){var ne,ge,Re,Oe,bt;return F.wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return ne=Ft(W),Ht.next=3,os();case 3:return ge=Ht.sent.transaction(cr,"readwrite"),Re=ge.objectStore(cr),Ht.next=8,Re.get(ne);case 8:if(void 0!==(bt=ee(Oe=Ht.sent))){Ht.next=15;break}return Ht.next=13,Re.delete(ne);case 13:Ht.next=17;break;case 15:return Ht.next=17,Re.put(bt,ne);case 17:return Ht.next=19,ge.complete;case 19:return bt&&(!Oe||Oe.fid!==bt.fid)&&Xt(W,bt.fid),Ht.abrupt("return",bt);case 21:case"end":return Ht.stop()}},G)}))).apply(this,arguments)}function tn(G){return ia.apply(this,arguments)}function ia(){return(ia=(0,ce.Z)(F.mark(function G(W){var ee,ne;return F.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,ma(W.appConfig,function(Re){var Oe=Qn(Re),bt=_n(W,Oe);return ee=bt.registrationPromise,bt.installationEntry});case 2:if(""!==(ne=ge.sent).fid){ge.next=8;break}return ge.next=6,ee;case 6:return ge.t0=ge.sent,ge.abrupt("return",{installationEntry:ge.t0});case 8:return ge.abrupt("return",{installationEntry:ne,registrationPromise:ee});case 9:case"end":return ge.stop()}},G)}))).apply(this,arguments)}function Qn(G){return fi(G||{fid:je(),registrationStatus:0})}function _n(G,W){if(0===W.registrationStatus){if(!navigator.onLine)return{installationEntry:W,registrationPromise:Promise.reject(dt.create("app-offline"))};var ne={fid:W.fid,registrationStatus:1,registrationTime:Date.now()},me=function Un(G,W){return ya.apply(this,arguments)}(G,ne);return{installationEntry:ne,registrationPromise:me}}return 1===W.registrationStatus?{installationEntry:W,registrationPromise:Pn(G)}:{installationEntry:W}}function ya(){return(ya=(0,ce.Z)(F.mark(function G(W,ee){return F.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.prev=0,ge.next=3,jt(W,ee);case 3:return ge.abrupt("return",jr(W.appConfig,ge.sent));case 7:if(ge.prev=7,ge.t0=ge.catch(0),!$e(ge.t0)||409!==ge.t0.customData.serverCode){ge.next=14;break}return ge.next=12,Xr(W.appConfig);case 12:ge.next=16;break;case 14:return ge.next=16,jr(W.appConfig,{fid:ee.fid,registrationStatus:0});case 16:throw ge.t0;case 17:case"end":return ge.stop()}},G,null,[[0,7]])}))).apply(this,arguments)}function Pn(G){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,ce.Z)(F.mark(function G(W){var ee,ne,me,ge;return F.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,ka(W.appConfig);case 2:ee=Oe.sent;case 3:if(1!==ee.registrationStatus){Oe.next=11;break}return Oe.next=6,on(100);case 6:return Oe.next=8,ka(W.appConfig);case 8:ee=Oe.sent,Oe.next=3;break;case 11:if(0!==ee.registrationStatus){Oe.next=22;break}return Oe.next=14,tn(W);case 14:if(me=(ne=Oe.sent).installationEntry,!(ge=ne.registrationPromise)){Oe.next=21;break}return Oe.abrupt("return",ge);case 21:return Oe.abrupt("return",me);case 22:return Oe.abrupt("return",ee);case 23:case"end":return Oe.stop()}},G)}))).apply(this,arguments)}function ka(G){return ma(G,function(W){if(!W)throw dt.create("installation-not-found");return fi(W)})}function fi(G){return function Pi(G){return 1===G.registrationStatus&&G.registrationTime+1e4<Date.now()}(G)?{fid:G.fid,registrationStatus:0}:G}function Zr(G,W){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,ce.Z)(F.mark(function G(W,ee){var ne,me,ge,Re,Oe,bt,Ht,Pt,fr;return F.wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:if(me=W.heartbeatServiceProvider,ge=Or(ne=W.appConfig,ee),Re=Ge(ne,ee),!(Oe=me.getImmediate({optional:!0}))){Fn.next=9;break}return Fn.next=7,Oe.getHeartbeatsHeader();case 7:(bt=Fn.sent)&&Re.append("x-firebase-client",bt);case 9:return Ht={method:"POST",headers:Re,body:JSON.stringify({installation:{sdkVersion:wt,appId:ne.appId}})},Fn.next=13,Se(function(){return fetch(ge,Ht)});case 13:if(!(Pt=Fn.sent).ok){Fn.next=22;break}return Fn.next=17,Pt.json();case 17:return fr=Pe(Fn.sent),Fn.abrupt("return",fr);case 22:return Fn.next=24,Ce("Generate Auth Token",Pt);case 24:throw Fn.sent;case 25:case"end":return Fn.stop()}},G)}))).apply(this,arguments)}function Or(G,W){var ee=W.fid;return"".concat(Fe(G),"/").concat(ee,"/authTokens:generate")}function Ur(G){return dr.apply(this,arguments)}function dr(){return dr=(0,ce.Z)(F.mark(function G(W){var ee,ne,me,Re=arguments;return F.wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return ee=Re.length>1&&void 0!==Re[1]&&Re[1],bt.next=3,ma(W.appConfig,function(Rt){if(!Mn(Rt))throw dt.create("not-registered");var Ht=Rt.authToken;if(!ee&&kr(Ht))return Rt;if(1===Ht.requestStatus)return ne=un(W,ee),Rt;if(!navigator.onLine)throw dt.create("app-offline");var Pt=Xe(Rt);return ne=zt(W,Pt),Pt});case 3:if(me=bt.sent,!ne){bt.next=10;break}return bt.next=7,ne;case 7:bt.t0=bt.sent,bt.next=11;break;case 10:bt.t0=me.authToken;case 11:return bt.abrupt("return",bt.t0);case 13:case"end":return bt.stop()}},G)})),dr.apply(this,arguments)}function un(G,W){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,ce.Z)(F.mark(function G(W,ee){var ne,me;return F.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,vn(W.appConfig);case 2:ne=Re.sent;case 3:if(1!==ne.authToken.requestStatus){Re.next=11;break}return Re.next=6,on(100);case 6:return Re.next=8,vn(W.appConfig);case 8:ne=Re.sent,Re.next=3;break;case 11:if(0!==(me=ne.authToken).requestStatus){Re.next=16;break}return Re.abrupt("return",Ur(W,ee));case 16:return Re.abrupt("return",me);case 17:case"end":return Re.stop()}},G)}))).apply(this,arguments)}function vn(G){return ma(G,function(W){if(!Mn(W))throw dt.create("not-registered");return function Ne(G){return 1===G.requestStatus&&G.requestTime+1e4<Date.now()}(W.authToken)?Object.assign(Object.assign({},W),{authToken:{requestStatus:0}}):W})}function zt(G,W){return qt.apply(this,arguments)}function qt(){return(qt=(0,ce.Z)(F.mark(function G(W,ee){var ne,me,ge;return F.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.prev=0,Oe.next=3,Zr(W,ee);case 3:return ne=Oe.sent,me=Object.assign(Object.assign({},ee),{authToken:ne}),Oe.next=7,jr(W.appConfig,me);case 7:return Oe.abrupt("return",ne);case 10:if(Oe.prev=10,Oe.t0=Oe.catch(0),!$e(Oe.t0)||401!==Oe.t0.customData.serverCode&&404!==Oe.t0.customData.serverCode){Oe.next=17;break}return Oe.next=15,Xr(W.appConfig);case 15:Oe.next=20;break;case 17:return ge=Object.assign(Object.assign({},ee),{authToken:{requestStatus:0}}),Oe.next=20,jr(W.appConfig,ge);case 20:throw Oe.t0;case 21:case"end":return Oe.stop()}},G,null,[[0,10]])}))).apply(this,arguments)}function Mn(G){return void 0!==G&&2===G.registrationStatus}function kr(G){return 2===G.requestStatus&&!function On(G){var W=Date.now();return W<G.creationTime||G.creationTime+G.expiresIn<W+36e5}(G)}function Xe(G){var W={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},G),{authToken:W})}function lt(){return(lt=(0,ce.Z)(F.mark(function G(W){var ee,ne,me,ge;return F.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return ee=W,Oe.next=3,tn(ee);case 3:return me=(ne=Oe.sent).installationEntry,(ge=ne.registrationPromise)?ge.catch(console.error):Ur(ee).catch(console.error),Oe.abrupt("return",me.fid);case 8:case"end":return Oe.stop()}},G)}))).apply(this,arguments)}function Dt(){return Dt=(0,ce.Z)(F.mark(function G(W){var ee,ne,ge=arguments;return F.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return ee=ge.length>1&&void 0!==ge[1]&&ge[1],ne=W,Oe.next=4,pn(ne);case 4:return Oe.next=6,Ur(ne,ee);case 6:return Oe.abrupt("return",Oe.sent.token);case 8:case"end":return Oe.stop()}},G)})),Dt.apply(this,arguments)}function pn(G){return An.apply(this,arguments)}function An(){return(An=(0,ce.Z)(F.mark(function G(W){var ne;return F.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,tn(W);case 2:if(!(ne=ge.sent.registrationPromise)){ge.next=7;break}return ge.next=7,ne;case 7:case"end":return ge.stop()}},G)}))).apply(this,arguments)}function ri(G){return dt.create("missing-app-config-values",{valueName:G})}var Ia="installations",Fa=function(W){var ee=W.getProvider("app").getImmediate(),ne=function Zi(G){if(!G||!G.options)throw ri("App Configuration");if(!G.name)throw ri("App Name");for(var ee=0,ne=["projectId","apiKey","appId"];ee<ne.length;ee++){var me=ne[ee];if(!G.options[me])throw ri(me)}return{appName:G.name,projectId:G.options.projectId,apiKey:G.options.apiKey,appId:G.options.appId}}(ee);return{app:ee,appConfig:ne,heartbeatServiceProvider:(0,ke._getProvider)(ee,"heartbeat"),_delete:function(){return Promise.resolve()}}},nu=function(W){var ee=W.getProvider("app").getImmediate(),ne=(0,ke._getProvider)(ee,Ia).getImmediate(),me={getId:function(){return function Le(G){return lt.apply(this,arguments)}(ne)},getToken:function(Re){return function _t(G){return Dt.apply(this,arguments)}(ne,Re)}};return me};(function Za(){(0,ke._registerComponent)(new Te.wA(Ia,Fa,"PUBLIC")),(0,ke._registerComponent)(new Te.wA("installations-internal",nu,"PRIVATE"))})(),(0,ke.registerVersion)(fe,ve),(0,ke.registerVersion)(fe,ve,"esm2017");var _r,Ks="@firebase/remote-config",er=((0,x.Z)(_r={},"registration-window","Undefined window object. This SDK only supports usage in a browser environment."),(0,x.Z)(_r,"registration-project-id","Undefined project identifier. Check Firebase app initialization."),(0,x.Z)(_r,"registration-api-key","Undefined API key. Check Firebase app initialization."),(0,x.Z)(_r,"registration-app-id","Undefined app identifier. Check Firebase app initialization."),(0,x.Z)(_r,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,x.Z)(_r,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,x.Z)(_r,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,x.Z)(_r,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),(0,x.Z)(_r,"fetch-client-network","Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}."),(0,x.Z)(_r,"fetch-timeout",'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.'),(0,x.Z)(_r,"fetch-throttle",'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.'),(0,x.Z)(_r,"fetch-client-parse","Fetch client could not parse response. Original error: {$originalErrorMessage}."),(0,x.Z)(_r,"fetch-status","Fetch server returned an HTTP error status. HTTP status: {$httpStatus}."),(0,x.Z)(_r,"indexed-db-unavailable","Indexed DB is not supported by current browser"),_r),Wn=new Ee.LL("remoteconfig","Remote Config",er),Br=function(){function G(W,ee,ne,me){(0,z.Z)(this,G),this.client=W,this.storage=ee,this.storageCache=ne,this.logger=me}return(0,H.Z)(G,[{key:"isCachedDataFresh",value:function(ee,ne){if(!ne)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var me=Date.now()-ne,ge=me<=ee;return this.logger.debug("Config fetch cache check."+" Cache age millis: ".concat(me,".")+" Cache max age millis (minimumFetchIntervalMillis setting): ".concat(ee,".")+" Is cache hit: ".concat(ge,".")),ge}},{key:"fetch",value:(W=(0,ce.Z)(F.mark(function ne(me){var Re,Oe,bt,Rt,Ht;return F.wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:return bn.next=2,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);case 2:if(Re=(0,M.Z)(bn.sent,2),Oe=Re[0],!(bt=Re[1])||!this.isCachedDataFresh(me.cacheMaxAgeMillis,Oe)){bn.next=8;break}return bn.abrupt("return",bt);case 8:return me.eTag=bt&&bt.eTag,bn.next=11,this.client.fetch(me);case 11:return Rt=bn.sent,Ht=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===Rt.status&&Ht.push(this.storage.setLastSuccessfulFetchResponse(Rt)),bn.next=16,Promise.all(Ht);case 16:return bn.abrupt("return",Rt);case 17:case"end":return bn.stop()}},ne,this)})),function ee(ne){return W.apply(this,arguments)})}]),G;var W}();function Ps(){var G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return G.languages&&G.languages[0]||G.language}var Ms=function(){function G(W,ee,ne,me,ge,Re){(0,z.Z)(this,G),this.firebaseInstallations=W,this.sdkVersion=ee,this.namespace=ne,this.projectId=me,this.apiKey=ge,this.appId=Re}return(0,H.Z)(G,[{key:"fetch",value:function(W){function ee(ne){return W.apply(this,arguments)}return ee.toString=function(){return W.toString()},ee}(function(){var W=(0,ce.Z)(F.mark(function ee(ne){var ge,Re,Oe,bt,Rt,Ht,Pt,bn,fr,Jt,Fn,ur,nr,bi,Aa,Cs,Ai;return F.wrap(function(ti){for(;;)switch(ti.prev=ti.next){case 0:return ti.next=2,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]);case 2:return ge=(0,M.Z)(ti.sent,2),Re=ge[0],Oe=ge[1],bt=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",Rt="".concat(bt,"/v1/projects/").concat(this.projectId,"/namespaces/").concat(this.namespace,":fetch?key=").concat(this.apiKey),Ht={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":ne.eTag||"*"},Pt={sdk_version:this.sdkVersion,app_instance_id:Re,app_instance_id_token:Oe,app_id:this.appId,language_code:Ps()},bn={method:"POST",headers:Ht,body:JSON.stringify(Pt)},fr=fetch(Rt,bn),Jt=new Promise(function(ul,no){ne.signal.addEventListener(function(){var Fu=new Error("The operation was aborted.");Fu.name="AbortError",no(Fu)})}),ti.prev=13,ti.next=16,Promise.race([fr,Jt]);case 16:return ti.next=18,fr;case 18:Fn=ti.sent,ti.next=26;break;case 21:throw ti.prev=21,ti.t0=ti.catch(13),ur="fetch-client-network","AbortError"===ti.t0.name&&(ur="fetch-timeout"),Wn.create(ur,{originalErrorMessage:ti.t0.message});case 26:if(nr=Fn.status,bi=Fn.headers.get("ETag")||void 0,200!==Fn.status){ti.next=40;break}return ti.prev=29,ti.next=32,Fn.json();case 32:Ai=ti.sent,ti.next=38;break;case 35:throw ti.prev=35,ti.t1=ti.catch(29),Wn.create("fetch-client-parse",{originalErrorMessage:ti.t1.message});case 38:Aa=Ai.entries,Cs=Ai.state;case 40:if("INSTANCE_STATE_UNSPECIFIED"===Cs?nr=500:"NO_CHANGE"===Cs?nr=304:("NO_TEMPLATE"===Cs||"EMPTY_CONFIG"===Cs)&&(Aa={}),304===nr||200===nr){ti.next=43;break}throw Wn.create("fetch-status",{httpStatus:nr});case 43:return ti.abrupt("return",{status:nr,eTag:bi,config:Aa});case 44:case"end":return ti.stop()}},ee,this,[[13,21],[29,35]])}));return function(ee){return W.apply(this,arguments)}}())}]),G}();function cs(G,W){return new Promise(function(ee,ne){var me=Math.max(W-Date.now(),0),ge=setTimeout(ee,me);G.addEventListener(function(){clearTimeout(ge),ne(Wn.create("fetch-throttle",{throttleEndTimeMillis:W}))})})}function ze(G){if(!(G instanceof Ee.ZR&&G.customData))return!1;var W=Number(G.customData.httpStatus);return 429===W||500===W||503===W||504===W}var ut=function(){function G(W,ee){(0,z.Z)(this,G),this.client=W,this.storage=ee}return(0,H.Z)(G,[{key:"fetch",value:(W=(0,ce.Z)(F.mark(function ne(me){return F.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,this.storage.getThrottleMetadata();case 2:if(Oe.t0=Oe.sent,Oe.t0){Oe.next=5;break}Oe.t0={backoffCount:0,throttleEndTimeMillis:Date.now()};case 5:return Oe.abrupt("return",this.attemptFetch(me,Oe.t0));case 7:case"end":return Oe.stop()}},ne,this)})),function ee(ne){return W.apply(this,arguments)})},{key:"attemptFetch",value:function(){var W=(0,ce.Z)(F.mark(function ne(me,ge){var Re,Oe,bt,Rt;return F.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Re=ge.throttleEndTimeMillis,Oe=ge.backoffCount,Pt.next=3,cs(me.signal,Re);case 3:return Pt.prev=3,Pt.next=6,this.client.fetch(me);case 6:return bt=Pt.sent,Pt.next=9,this.storage.deleteThrottleMetadata();case 9:return Pt.abrupt("return",bt);case 12:if(Pt.prev=12,Pt.t0=Pt.catch(3),ze(Pt.t0)){Pt.next=16;break}throw Pt.t0;case 16:return Rt={throttleEndTimeMillis:Date.now()+(0,Ee.$s)(Oe),backoffCount:Oe+1},Pt.next=19,this.storage.setThrottleMetadata(Rt);case 19:return Pt.abrupt("return",this.attemptFetch(me,Rt));case 20:case"end":return Pt.stop()}},ne,this,[[3,12]])}));return function ee(ne,me){return W.apply(this,arguments)}}()}]),G;var W}(),St=function(){function G(W,ee,ne,me,ge){(0,z.Z)(this,G),this.app=W,this._client=ee,this._storageCache=ne,this._storage=me,this._logger=ge,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return(0,H.Z)(G,[{key:"fetchTimeMillis",get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}},{key:"lastFetchStatus",get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}]),G}();function At(G,W){var ee=G.target.error||void 0;return Wn.create(W,{originalErrorMessage:ee&&ee.message})}var ln="app_namespace_store";function yi(){return new Promise(function(G,W){try{var ee=indexedDB.open("firebase_remote_config",1);ee.onerror=function(ne){W(At(ne,"storage-open"))},ee.onsuccess=function(ne){G(ne.target.result)},ee.onupgradeneeded=function(ne){0===ne.oldVersion&&ne.target.result.createObjectStore(ln,{keyPath:"compositeKey"})}}catch(ne){W(Wn.create("storage-open",{originalErrorMessage:ne}))}})}var si,ai=function(){function G(W,ee,ne){var me=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yi();(0,z.Z)(this,G),this.appId=W,this.appName=ee,this.namespace=ne,this.openDbPromise=me}return(0,H.Z)(G,[{key:"getLastFetchStatus",value:function(){return this.get("last_fetch_status")}},{key:"setLastFetchStatus",value:function(ee){return this.set("last_fetch_status",ee)}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.get("last_successful_fetch_timestamp_millis")}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(ee){return this.set("last_successful_fetch_timestamp_millis",ee)}},{key:"getLastSuccessfulFetchResponse",value:function(){return this.get("last_successful_fetch_response")}},{key:"setLastSuccessfulFetchResponse",value:function(ee){return this.set("last_successful_fetch_response",ee)}},{key:"getActiveConfig",value:function(){return this.get("active_config")}},{key:"setActiveConfig",value:function(ee){return this.set("active_config",ee)}},{key:"getActiveConfigEtag",value:function(){return this.get("active_config_etag")}},{key:"setActiveConfigEtag",value:function(ee){return this.set("active_config_etag",ee)}},{key:"getThrottleMetadata",value:function(){return this.get("throttle_metadata")}},{key:"setThrottleMetadata",value:function(ee){return this.set("throttle_metadata",ee)}},{key:"deleteThrottleMetadata",value:function(){return this.delete("throttle_metadata")}},{key:"get",value:(W=(0,ce.Z)(F.mark(function ne(me){var Re,ge=this;return F.wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return bt.next=2,this.openDbPromise;case 2:return Re=bt.sent,bt.abrupt("return",new Promise(function(Rt,Ht){var bn=Re.transaction([ln],"readonly").objectStore(ln),fr=ge.createCompositeKey(me);try{var Jt=bn.get(fr);Jt.onerror=function(Fn){Ht(At(Fn,"storage-get"))},Jt.onsuccess=function(Fn){var ur=Fn.target.result;Rt(ur?ur.value:void 0)}}catch(Fn){Ht(Wn.create("storage-get",{originalErrorMessage:Fn&&Fn.message}))}}));case 4:case"end":return bt.stop()}},ne,this)})),function ee(ne){return W.apply(this,arguments)})},{key:"set",value:function(){var W=(0,ce.Z)(F.mark(function ne(me,ge){var Oe,Re=this;return F.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.next=2,this.openDbPromise;case 2:return Oe=Rt.sent,Rt.abrupt("return",new Promise(function(Ht,Pt){var fr=Oe.transaction([ln],"readwrite").objectStore(ln),Jt=Re.createCompositeKey(me);try{var Fn=fr.put({compositeKey:Jt,value:ge});Fn.onerror=function(ur){Pt(At(ur,"storage-set"))},Fn.onsuccess=function(){Ht()}}catch(ur){Pt(Wn.create("storage-set",{originalErrorMessage:ur&&ur.message}))}}));case 4:case"end":return Rt.stop()}},ne,this)}));return function ee(ne,me){return W.apply(this,arguments)}}()},{key:"delete",value:function(){var W=(0,ce.Z)(F.mark(function ne(me){var Re,ge=this;return F.wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return bt.next=2,this.openDbPromise;case 2:return Re=bt.sent,bt.abrupt("return",new Promise(function(Rt,Ht){var bn=Re.transaction([ln],"readwrite").objectStore(ln),fr=ge.createCompositeKey(me);try{var Jt=bn.delete(fr);Jt.onerror=function(Fn){Ht(At(Fn,"storage-delete"))},Jt.onsuccess=function(){Rt()}}catch(Fn){Ht(Wn.create("storage-delete",{originalErrorMessage:Fn&&Fn.message}))}}));case 4:case"end":return bt.stop()}},ne,this)}));return function ee(ne){return W.apply(this,arguments)}}()},{key:"createCompositeKey",value:function(ee){return[this.appId,this.appName,this.namespace,ee].join()}}]),G;var W}(),wr=function(){function G(W){(0,z.Z)(this,G),this.storage=W}return(0,H.Z)(G,[{key:"getLastFetchStatus",value:function(){return this.lastFetchStatus}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.lastSuccessfulFetchTimestampMillis}},{key:"getActiveConfig",value:function(){return this.activeConfig}},{key:"loadFromStorage",value:(W=(0,ce.Z)(F.mark(function ne(){var me,ge,Re,Oe,bt,Rt;return F.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return me=this.storage.getLastFetchStatus(),ge=this.storage.getLastSuccessfulFetchTimestampMillis(),Re=this.storage.getActiveConfig(),Pt.next=5,me;case 5:return(Oe=Pt.sent)&&(this.lastFetchStatus=Oe),Pt.next=9,ge;case 9:return(bt=Pt.sent)&&(this.lastSuccessfulFetchTimestampMillis=bt),Pt.next=13,Re;case 13:(Rt=Pt.sent)&&(this.activeConfig=Rt);case 15:case"end":return Pt.stop()}},ne,this)})),function ee(){return W.apply(this,arguments)})},{key:"setLastFetchStatus",value:function(ee){return this.lastFetchStatus=ee,this.storage.setLastFetchStatus(ee)}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(ee){return this.lastSuccessfulFetchTimestampMillis=ee,this.storage.setLastSuccessfulFetchTimestampMillis(ee)}},{key:"setActiveConfig",value:function(ee){return this.activeConfig=ee,this.storage.setActiveConfig(ee)}}]),G;var W}();function xr(){return uo.apply(this,arguments)}function uo(){return(uo=(0,ce.Z)(F.mark(function G(){return F.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if((0,Ee.hl)()){ne.next=2;break}return ne.abrupt("return",!1);case 2:return ne.prev=2,ne.next=5,(0,Ee.eu)();case 5:return ne.abrupt("return",ne.sent);case 9:return ne.prev=9,ne.t0=ne.catch(2),ne.abrupt("return",!1);case 12:case"end":return ne.stop()}},G,null,[[2,9]])}))).apply(this,arguments)}!function Va(){(0,ke._registerComponent)(new Te.wA("remote-config",function G(W,ee){var ne=ee.instanceIdentifier,me=W.getProvider("app").getImmediate(),ge=W.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Wn.create("registration-window");if(!(0,Ee.hl)())throw Wn.create("indexed-db-unavailable");var Re=me.options,Oe=Re.projectId,bt=Re.apiKey,Rt=Re.appId;if(!Oe)throw Wn.create("registration-project-id");if(!bt)throw Wn.create("registration-api-key");if(!Rt)throw Wn.create("registration-app-id");var Ht=new ai(Rt,me.name,ne=ne||"firebase"),Pt=new wr(Ht),bn=new et.Yd(Ks);bn.logLevel=et.in.ERROR;var fr=new Ms(ge,ke.SDK_VERSION,ne,Oe,bt,Rt),Jt=new ut(fr,Ht),Fn=new Br(Jt,Ht,Pt,bn),ur=new St(me,Fn,Pt,Ht,bn);return function _a(G){var W=(0,Ee.m9)(G);W._initializePromise||(W._initializePromise=W._storageCache.loadFromStorage().then(function(){W._isInitializationComplete=!0}))}(ur),ur},"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(Ks,"0.3.6"),(0,ke.registerVersion)(Ks,"0.3.6","esm2017")}();var xu="/firebase-messaging-sw.js",Os="/firebase-cloud-messaging-push-scope",ru="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qo="google.c.a.c_id",iu="google.c.a.c_l",ki="google.c.a.ts",ca="google.c.a.e",Yi=function(){return(G=Yi||(Yi={})).PUSH_RECEIVED="push-received",G.NOTIFICATION_CLICKED="notification-clicked",Yi;var G}();function Ea(G){var W=new Uint8Array(G);return btoa(String.fromCharCode.apply(String,(0,rt.Z)(W))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function oo(G){for(var ee=(G+"=".repeat((4-G.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ne=atob(ee),me=new Uint8Array(ne.length),ge=0;ge<ne.length;++ge)me[ge]=ne.charCodeAt(ge);return me}var au="fcm_token_details_db",su="fcm_token_object_Store";function uu(G){return ks.apply(this,arguments)}function ks(){return ks=(0,ce.Z)(F.mark(function G(W){var me;return F.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(!("databases"in indexedDB)){Oe.next=7;break}return Oe.next=3,indexedDB.databases();case 3:if(Oe.sent.map(function(bt){return bt.name}).includes(au)){Oe.next=7;break}return Oe.abrupt("return",null);case 7:return me=null,Oe.next=10,(0,Ee.X3)(au,5,function(){var bt=(0,ce.Z)(F.mark(function Rt(Ht,Pt,bn,fr){var Jt,Fn,ur,nr,bi,Aa;return F.wrap(function(Ai){for(;;)switch(Ai.prev=Ai.next){case 0:if(!(Pt<2)){Ai.next=2;break}return Ai.abrupt("return");case 2:if(Ht.objectStoreNames.contains(su)){Ai.next=4;break}return Ai.abrupt("return");case 4:return Fn=fr.objectStore(su),Ai.next=7,Fn.index("fcmSenderId").get(W);case 7:return ur=Ai.sent,Ai.next=10,Fn.clear();case 10:if(ur){Ai.next=12;break}return Ai.abrupt("return");case 12:if(2!==Pt){Ai.next=19;break}if((nr=ur).auth&&nr.p256dh&&nr.endpoint){Ai.next=16;break}return Ai.abrupt("return");case 16:me={token:nr.fcmToken,createTime:null!==(Jt=nr.createTime)&&void 0!==Jt?Jt:Date.now(),subscriptionOptions:{auth:nr.auth,p256dh:nr.p256dh,endpoint:nr.endpoint,swScope:nr.swScope,vapidKey:"string"==typeof nr.vapidKey?nr.vapidKey:Ea(nr.vapidKey)}},Ai.next=20;break;case 19:3===Pt?me={token:(bi=ur).fcmToken,createTime:bi.createTime,subscriptionOptions:{auth:Ea(bi.auth),p256dh:Ea(bi.p256dh),endpoint:bi.endpoint,swScope:bi.swScope,vapidKey:Ea(bi.vapidKey)}}:4===Pt&&(me={token:(Aa=ur).fcmToken,createTime:Aa.createTime,subscriptionOptions:{auth:Ea(Aa.auth),p256dh:Ea(Aa.p256dh),endpoint:Aa.endpoint,swScope:Aa.swScope,vapidKey:Ea(Aa.vapidKey)}});case 20:case"end":return Ai.stop()}},Rt)}));return function(Rt,Ht,Pt,bn){return bt.apply(this,arguments)}}());case 10:return Oe.sent.close(),Oe.next=14,(0,Ee.Lj)(au);case 14:return Oe.next=16,(0,Ee.Lj)("fcm_vapid_details_db");case 16:return Oe.next=18,(0,Ee.Lj)("undefined");case 18:return Oe.abrupt("return",Vi(me)?me:null);case 19:case"end":return Oe.stop()}},G)})),ks.apply(this,arguments)}function Vi(G){if(!G||!G.subscriptionOptions)return!1;var W=G.subscriptionOptions;return"number"==typeof G.createTime&&G.createTime>0&&"string"==typeof G.token&&G.token.length>0&&"string"==typeof W.auth&&W.auth.length>0&&"string"==typeof W.p256dh&&W.p256dh.length>0&&"string"==typeof W.endpoint&&W.endpoint.length>0&&"string"==typeof W.swScope&&W.swScope.length>0&&"string"==typeof W.vapidKey&&W.vapidKey.length>0}var $="firebase-messaging-store",Q=null;function se(){return Q||(Q=(0,Ee.X3)("firebase-messaging-database",1,function(G,W){0===W&&G.createObjectStore($)})),Q}function ie(G){return _e.apply(this,arguments)}function _e(){return(_e=(0,ce.Z)(F.mark(function G(W){var ee,ne,me,ge;return F.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return ee=En(W),Oe.next=3,se();case 3:return ne=Oe.sent,Oe.next=6,ne.transaction($).objectStore($).get(ee);case 6:if(!(me=Oe.sent)){Oe.next=11;break}return Oe.abrupt("return",me);case 11:return Oe.next=13,uu(W.appConfig.senderId);case 13:if(!(ge=Oe.sent)){Oe.next=18;break}return Oe.next=17,Ae(W,ge);case 17:return Oe.abrupt("return",ge);case 18:case"end":return Oe.stop()}},G)}))).apply(this,arguments)}function Ae(G,W){return mt.apply(this,arguments)}function mt(){return(mt=(0,ce.Z)(F.mark(function G(W,ee){var ne,ge;return F.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return ne=En(W),Oe.next=3,se();case 3:return ge=Oe.sent.transaction($,"readwrite"),Oe.next=7,ge.objectStore($).put(ee,ne);case 7:return Oe.next=9,ge.complete;case 9:return Oe.abrupt("return",ee);case 10:case"end":return Oe.stop()}},G)}))).apply(this,arguments)}function Ot(G){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,ce.Z)(F.mark(function G(W){var ee,me;return F.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return ee=En(W),Re.next=3,se();case 3:return me=Re.sent.transaction($,"readwrite"),Re.next=7,me.objectStore($).delete(ee);case 7:return Re.next=9,me.complete;case 9:case"end":return Re.stop()}},G)}))).apply(this,arguments)}function En(G){return G.appConfig.appId}var Cn=((0,x.Z)(si={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,x.Z)(si,"only-available-in-window","This method is available in a Window context."),(0,x.Z)(si,"only-available-in-sw","This method is available in a service worker context."),(0,x.Z)(si,"permission-default","The notification permission was not granted and dismissed instead."),(0,x.Z)(si,"permission-blocked","The notification permission was not granted and blocked instead."),(0,x.Z)(si,"unsupported-browser","This browser doesn't support the API's required to use the Firebase SDK."),(0,x.Z)(si,"indexed-db-unsupported","This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)"),(0,x.Z)(si,"failed-service-worker-registration","We are unable to register the default service worker. {$browserErrorMessage}"),(0,x.Z)(si,"token-subscribe-failed","A problem occurred while subscribing the user to FCM: {$errorInfo}"),(0,x.Z)(si,"token-subscribe-no-token","FCM returned no token when subscribing the user to push."),(0,x.Z)(si,"token-unsubscribe-failed","A problem occurred while unsubscribing the user from FCM: {$errorInfo}"),(0,x.Z)(si,"token-update-failed","A problem occurred while updating the user from FCM: {$errorInfo}"),(0,x.Z)(si,"token-update-no-token","FCM returned no token when updating the user to push."),(0,x.Z)(si,"use-sw-after-get-token","The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used."),(0,x.Z)(si,"invalid-sw-registration","The input to useServiceWorker() must be a ServiceWorkerRegistration."),(0,x.Z)(si,"invalid-bg-handler","The input to setBackgroundMessageHandler() must be a function."),(0,x.Z)(si,"invalid-vapid-key","The public VAPID key must be a string."),(0,x.Z)(si,"use-vapid-key-after-get-token","The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."),si),xn=new Ee.LL("messaging","Messaging",Cn);function ui(G,W){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,ce.Z)(F.mark(function G(W,ee){var ne,me,ge,Re,Oe;return F.wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return Ht.next=2,Qi(W);case 2:return ne=Ht.sent,me=ar(ee),ge={method:"POST",headers:ne,body:JSON.stringify(me)},Ht.prev=5,Ht.next=8,fetch(li(W.appConfig),ge);case 8:return Oe=Ht.sent,Ht.next=11,Oe.json();case 11:Re=Ht.sent,Ht.next=17;break;case 14:throw Ht.prev=14,Ht.t0=Ht.catch(5),xn.create("token-subscribe-failed",{errorInfo:Ht.t0});case 17:if(!Re.error){Ht.next=20;break}throw xn.create("token-subscribe-failed",{errorInfo:Re.error.message});case 20:if(Re.token){Ht.next=22;break}throw xn.create("token-subscribe-no-token");case 22:return Ht.abrupt("return",Re.token);case 23:case"end":return Ht.stop()}},G,null,[[5,14]])}))).apply(this,arguments)}function oi(G,W){return ir.apply(this,arguments)}function ir(){return(ir=(0,ce.Z)(F.mark(function G(W,ee){var ne,me,ge,Re,Oe;return F.wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return Ht.next=2,Qi(W);case 2:return ne=Ht.sent,me=ar(ee.subscriptionOptions),ge={method:"PATCH",headers:ne,body:JSON.stringify(me)},Ht.prev=5,Ht.next=8,fetch("".concat(li(W.appConfig),"/").concat(ee.token),ge);case 8:return Oe=Ht.sent,Ht.next=11,Oe.json();case 11:Re=Ht.sent,Ht.next=17;break;case 14:throw Ht.prev=14,Ht.t0=Ht.catch(5),xn.create("token-update-failed",{errorInfo:Ht.t0});case 17:if(!Re.error){Ht.next=20;break}throw xn.create("token-update-failed",{errorInfo:Re.error.message});case 20:if(Re.token){Ht.next=22;break}throw xn.create("token-update-no-token");case 22:return Ht.abrupt("return",Re.token);case 23:case"end":return Ht.stop()}},G,null,[[5,14]])}))).apply(this,arguments)}function Si(G,W){return vr.apply(this,arguments)}function vr(){return(vr=(0,ce.Z)(F.mark(function G(W,ee){var me,ge,Re;return F.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.next=2,Qi(W);case 2:return me={method:"DELETE",headers:Rt.sent},Rt.prev=4,Rt.next=7,fetch("".concat(li(W.appConfig),"/").concat(ee),me);case 7:return ge=Rt.sent,Rt.next=10,ge.json();case 10:if(!(Re=Rt.sent).error){Rt.next=14;break}throw xn.create("token-unsubscribe-failed",{errorInfo:Re.error.message});case 14:Rt.next=19;break;case 16:throw Rt.prev=16,Rt.t0=Rt.catch(4),xn.create("token-unsubscribe-failed",{errorInfo:Rt.t0});case 19:case"end":return Rt.stop()}},G,null,[[4,16]])}))).apply(this,arguments)}function li(G){var W=G.projectId;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(W,"/registrations")}function Qi(G){return ba.apply(this,arguments)}function ba(){return(ba=(0,ce.Z)(F.mark(function G(W){var ee,ne;return F.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return ee=W.appConfig,ne=W.installations,Re.next=3,ne.getToken();case 3:return Re.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":ee.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(Re.sent)}));case 5:case"end":return Re.stop()}},G)}))).apply(this,arguments)}function ar(G){var me=G.vapidKey,ge={web:{endpoint:G.endpoint,auth:G.auth,p256dh:G.p256dh}};return me!==ru&&(ge.web.applicationPubKey=me),ge}var ja=6048e5;function lo(G){return co.apply(this,arguments)}function co(){return(co=(0,ce.Z)(F.mark(function G(W){var ee,ne,me;return F.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,yl(W.swRegistration,W.vapidKey);case 2:return ne={vapidKey:W.vapidKey,swScope:W.swRegistration.scope,endpoint:(ee=Re.sent).endpoint,auth:Ea(ee.getKey("auth")),p256dh:Ea(ee.getKey("p256dh"))},Re.next=6,ie(W.firebaseDependencies);case 6:if(me=Re.sent){Re.next=11;break}return Re.abrupt("return",Hu(W.firebaseDependencies,ne));case 11:if(Gt(me.subscriptionOptions,ne)){Re.next=23;break}return Re.prev=12,Re.next=15,Si(W.firebaseDependencies,me.token);case 15:Re.next=20;break;case 17:Re.prev=17,Re.t0=Re.catch(12),console.warn(Re.t0);case 20:return Re.abrupt("return",Hu(W.firebaseDependencies,ne));case 23:if(!(Date.now()>=me.createTime+ja)){Re.next=27;break}return Re.abrupt("return",fo(W,{token:me.token,createTime:Date.now(),subscriptionOptions:ne}));case 27:return Re.abrupt("return",me.token);case 28:case"end":return Re.stop()}},G,null,[[12,17]])}))).apply(this,arguments)}function Kn(G){return Du.apply(this,arguments)}function Du(){return(Du=(0,ce.Z)(F.mark(function G(W){var ee,ne;return F.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,ie(W.firebaseDependencies);case 2:if(!(ee=ge.sent)){ge.next=8;break}return ge.next=6,Si(W.firebaseDependencies,ee.token);case 6:return ge.next=8,Ot(W.firebaseDependencies);case 8:return ge.next=10,W.swRegistration.pushManager.getSubscription();case 10:if(!(ne=ge.sent)){ge.next=13;break}return ge.abrupt("return",ne.unsubscribe());case 13:return ge.abrupt("return",!0);case 14:case"end":return ge.stop()}},G)}))).apply(this,arguments)}function fo(G,W){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,ce.Z)(F.mark(function G(W,ee){var ne,me;return F.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.prev=0,Re.next=3,oi(W.firebaseDependencies,ee);case 3:return ne=Re.sent,me=Object.assign(Object.assign({},ee),{token:ne,createTime:Date.now()}),Re.next=7,Ae(W.firebaseDependencies,me);case 7:return Re.abrupt("return",ne);case 10:return Re.prev=10,Re.t0=Re.catch(0),Re.next=14,Kn(W);case 14:throw Re.t0;case 15:case"end":return Re.stop()}},G,null,[[0,10]])}))).apply(this,arguments)}function Hu(G,W){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,ce.Z)(F.mark(function G(W,ee){var me;return F.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,ui(W,ee);case 2:return me={token:Re.sent,createTime:Date.now(),subscriptionOptions:ee},Re.next=6,Ae(W,me);case 6:return Re.abrupt("return",me.token);case 7:case"end":return Re.stop()}},G)}))).apply(this,arguments)}function yl(G,W){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,ce.Z)(F.mark(function G(W,ee){var ne;return F.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,W.pushManager.getSubscription();case 2:if(!(ne=ge.sent)){ge.next=5;break}return ge.abrupt("return",ne);case 5:return ge.abrupt("return",W.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:oo(ee)}));case 6:case"end":return ge.stop()}},G)}))).apply(this,arguments)}function Gt(G,W){return W.vapidKey===G.vapidKey&&W.endpoint===G.endpoint&&W.auth===G.auth&&W.p256dh===G.p256dh}function pr(G){var W={from:G.from,collapseKey:G.collapse_key,messageId:G.fcmMessageId};return function Mo(G,W){if(W.notification){G.notification={};var ee=W.notification.title;ee&&(G.notification.title=ee);var ne=W.notification.body;ne&&(G.notification.body=ne);var me=W.notification.image;me&&(G.notification.image=me)}}(W,G),function Ni(G,W){!W.data||(G.data=W.data)}(W,G),function Iu(G,W){if(W.fcmOptions){G.fcmOptions={};var ee=W.fcmOptions.link;ee&&(G.fcmOptions.link=ee);var ne=W.fcmOptions.analytics_label;ne&&(G.fcmOptions.analyticsLabel=ne)}}(W,G),W}function ou(G){return"object"==typeof G&&!!G&&Qo in G}function es(G,W){for(var ee=[],ne=0;ne<G.length;ne++)ee.push(G.charAt(ne)),ne<W.length&&ee.push(W.charAt(ne));return ee.join("")}function Gu(G){return xn.create("missing-app-config-values",{valueName:G})}es("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),es("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var Ul=function(){function G(W,ee,ne){(0,z.Z)(this,G),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var me=function Su(G){if(!G||!G.options)throw Gu("App Configuration Object");if(!G.name)throw Gu("App Name");for(var ee=G.options,ne=0,me=["projectId","apiKey","appId","messagingSenderId"];ne<me.length;ne++){var ge=me[ne];if(!ee[ge])throw Gu(ge)}return{appName:G.name,projectId:ee.projectId,apiKey:ee.apiKey,appId:ee.appId,senderId:ee.messagingSenderId}}(W);this.firebaseDependencies={app:W,appConfig:me,installations:ee,analyticsProvider:ne}}return(0,H.Z)(G,[{key:"_delete",value:function(){return Promise.resolve()}}]),G}();function zu(G){return ho.apply(this,arguments)}function ho(){return(ho=(0,ce.Z)(F.mark(function G(W){return F.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.prev=0,ne.next=3,navigator.serviceWorker.register(xu,{scope:Os});case 3:W.swRegistration=ne.sent,W.swRegistration.update().catch(function(){}),ne.next=10;break;case 7:throw ne.prev=7,ne.t0=ne.catch(0),xn.create("failed-service-worker-registration",{browserErrorMessage:ne.t0.message});case 10:case"end":return ne.stop()}},G,null,[[0,7]])}))).apply(this,arguments)}function Jo(G,W){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,ce.Z)(F.mark(function G(W,ee){return F.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(ee||W.swRegistration){me.next=3;break}return me.next=3,zu(W);case 3:if(ee||!W.swRegistration){me.next=5;break}return me.abrupt("return");case 5:if(ee instanceof ServiceWorkerRegistration){me.next=7;break}throw xn.create("invalid-sw-registration");case 7:W.swRegistration=ee;case 8:case"end":return me.stop()}},G)}))).apply(this,arguments)}function ts(G,W){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,ce.Z)(F.mark(function G(W,ee){return F.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:ee?W.vapidKey=ee:W.vapidKey||(W.vapidKey=ru);case 1:case"end":return me.stop()}},G)}))).apply(this,arguments)}function Sa(){return(Sa=(0,ce.Z)(F.mark(function G(W,ee){return F.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(navigator){me.next=2;break}throw xn.create("only-available-in-window");case 2:if("default"!==Notification.permission){me.next=5;break}return me.next=5,Notification.requestPermission();case 5:if("granted"===Notification.permission){me.next=7;break}throw xn.create("permission-blocked");case 7:return me.next=9,ts(W,null==ee?void 0:ee.vapidKey);case 9:return me.next=11,Jo(W,null==ee?void 0:ee.serviceWorkerRegistration);case 11:return me.abrupt("return",lo(W));case 12:case"end":return me.stop()}},G)}))).apply(this,arguments)}function kl(G,W,ee){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,ce.Z)(F.mark(function G(W,ee,ne){var me;return F.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return me=Wu(ee),Oe.next=3,W.firebaseDependencies.analyticsProvider.get();case 3:Oe.sent.logEvent(me,{message_id:ne[Qo],message_name:ne[iu],message_time:ne[ki],message_device_time:Math.floor(Date.now()/1e3)});case 5:case"end":return Oe.stop()}},G)}))).apply(this,arguments)}function Wu(G){switch(G){case Yi.NOTIFICATION_CLICKED:return"notification_open";case Yi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ci(){return(ci=(0,ce.Z)(F.mark(function G(W,ee){var ne,me;return F.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if((ne=ee.data).isFirebaseMessaging){Re.next=3;break}return Re.abrupt("return");case 3:if(W.onMessageHandler&&ne.messageType===Yi.PUSH_RECEIVED&&("function"==typeof W.onMessageHandler?W.onMessageHandler(pr(ne)):W.onMessageHandler.next(pr(ne))),!ou(me=ne.data)||"1"!==me[ca]){Re.next=8;break}return Re.next=8,kl(W,ne.messageType,me);case 8:case"end":return Re.stop()}},G)}))).apply(this,arguments)}var Pr,lu="@firebase/messaging",Ku=function(W){var ee=new Ul(W.getProvider("app").getImmediate(),W.getProvider("installations-internal").getImmediate(),W.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",function(ne){return function _l(G,W){return ci.apply(this,arguments)}(ee,ne)}),ee},Bl=function(W){var ee=W.getProvider("messaging").getImmediate();return{getToken:function(ge){return function Fs(G,W){return Sa.apply(this,arguments)}(ee,ge)}}};function Ga(){return cu.apply(this,arguments)}function cu(){return(cu=(0,ce.Z)(F.mark(function G(){return F.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.prev=0,ee.next=3,(0,Ee.eu)();case 3:ee.next=8;break;case 5:return ee.prev=5,ee.t0=ee.catch(0),ee.abrupt("return",!1);case 8:return ee.abrupt("return","undefined"!=typeof window&&(0,Ee.hl)()&&(0,Ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"));case 9:case"end":return ee.stop()}},G,null,[[0,5]])}))).apply(this,arguments)}!function Oo(){(0,ke._registerComponent)(new Te.wA("messaging",Ku,"PUBLIC")),(0,ke._registerComponent)(new Te.wA("messaging-internal",Bl,"PRIVATE")),(0,ke.registerVersion)(lu,"0.9.11"),(0,ke.registerVersion)(lu,"0.9.11","esm2017")}();var po="analytics",el="firebase_id",No=6e4,Lo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vl="https://www.googletagmanager.com/gtag/js",Cr=new et.Yd("@firebase/analytics");function _s(G){return Promise.all(G.map(function(W){return W.catch(function(ee){return ee})}))}function go(G,W){var ee=document.createElement("script");ee.src="".concat(Vl,"?l=").concat(G,"&id=").concat(W),ee.async=!0,document.head.appendChild(ee)}function hu(G,W,ee,ne,me,ge){return Us.apply(this,arguments)}function Us(){return(Us=(0,ce.Z)(F.mark(function G(W,ee,ne,me,ge,Re){var Oe,Rt;return F.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(Oe=me[ge],Pt.prev=1,!Oe){Pt.next=7;break}return Pt.next=5,ee[Oe];case 5:Pt.next=14;break;case 7:return Pt.next=9,_s(ne);case 9:if(!(Rt=Pt.sent.find(function(bn){return bn.measurementId===ge}))){Pt.next=14;break}return Pt.next=14,ee[Rt.appId];case 14:Pt.next=19;break;case 16:Pt.prev=16,Pt.t0=Pt.catch(1),Cr.error(Pt.t0);case 19:W("config",ge,Re);case 20:case"end":return Pt.stop()}},G,null,[[1,16]])}))).apply(this,arguments)}function Bs(G,W,ee,ne,me){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,ce.Z)(F.mark(function G(W,ee,ne,me,ge){var Re,Oe,bt,Rt,Ht,Pt;return F.wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:if(Jt.prev=0,Re=[],!ge||!ge.send_to){Jt.next=26;break}return Oe=ge.send_to,Array.isArray(Oe)||(Oe=[Oe]),Jt.next=7,_s(ne);case 7:bt=Jt.sent,Rt=(0,Je.Z)(Oe),Jt.prev=9,Pt=function(){var ur=Ht.value,nr=bt.find(function(Aa){return Aa.measurementId===ur}),bi=nr&&ee[nr.appId];if(!bi)return Re=[],"break";Re.push(bi)},Rt.s();case 12:if((Ht=Rt.n()).done){Jt.next=18;break}if("break"!==Pt()){Jt.next=16;break}return Jt.abrupt("break",18);case 16:Jt.next=12;break;case 18:Jt.next=23;break;case 20:Jt.prev=20,Jt.t0=Jt.catch(9),Rt.e(Jt.t0);case 23:return Jt.prev=23,Rt.f(),Jt.finish(23);case 26:return 0===Re.length&&(Re=Object.values(ee)),Jt.next=29,Promise.all(Re);case 29:W("event",me,ge||{}),Jt.next=35;break;case 32:Jt.prev=32,Jt.t1=Jt.catch(0),Cr.error(Jt.t1);case 35:case"end":return Jt.stop()}},G,null,[[0,32],[9,20,23,26]])}))).apply(this,arguments)}function aa(){for(var G=window.document.getElementsByTagName("script"),W=0,ee=Object.values(G);W<ee.length;W++){var ne=ee[W];if(ne.src&&ne.src.includes(Vl))return ne}return null}var $s=((0,x.Z)(Pr={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),(0,x.Z)(Pr,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),(0,x.Z)(Pr,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),(0,x.Z)(Pr,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),(0,x.Z)(Pr,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),(0,x.Z)(Pr,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),(0,x.Z)(Pr,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),(0,x.Z)(Pr,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),(0,x.Z)(Pr,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),(0,x.Z)(Pr,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),Pr),fa=new Ee.LL("analytics","Analytics",$s),Yu=function(){function G(){var W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;(0,z.Z)(this,G),this.throttleMetadata=W,this.intervalMillis=ee}return(0,H.Z)(G,[{key:"getThrottleMetadata",value:function(ee){return this.throttleMetadata[ee]}},{key:"setThrottleMetadata",value:function(ee,ne){this.throttleMetadata[ee]=ne}},{key:"deleteThrottleMetadata",value:function(ee){delete this.throttleMetadata[ee]}}]),G}(),wi=new Yu;function nl(G){return new Headers({Accept:"application/json","x-goog-api-key":G})}function Ta(G){return xs.apply(this,arguments)}function xs(){return(xs=(0,ce.Z)(F.mark(function G(W){var ee,ne,ge,Re,Oe,bt,Rt;return F.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return ne=W.appId,ge={method:"GET",headers:nl(W.apiKey)},Re=Lo.replace("{app-id}",ne),Pt.next=5,fetch(Re,ge);case 5:if(200===(Oe=Pt.sent).status||304===Oe.status){Pt.next=18;break}return bt="",Pt.prev=8,Pt.next=11,Oe.json();case 11:(null===(ee=(Rt=Pt.sent).error)||void 0===ee?void 0:ee.message)&&(bt=Rt.error.message),Pt.next=17;break;case 15:Pt.prev=15,Pt.t0=Pt.catch(8);case 17:throw fa.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:bt});case 18:return Pt.abrupt("return",Oe.json());case 19:case"end":return Pt.stop()}},G,null,[[8,15]])}))).apply(this,arguments)}function qs(G){return Ys.apply(this,arguments)}function Ys(){return Ys=(0,ce.Z)(F.mark(function G(W){var ee,ne,me,ge,Re,Oe,bt,Rt,Ht=arguments;return F.wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:if(ee=Ht.length>1&&void 0!==Ht[1]?Ht[1]:wi,ne=Ht.length>2?Ht[2]:void 0,Re=(me=W.options).apiKey,Oe=me.measurementId,ge=me.appId){bn.next=5;break}throw fa.create("no-app-id");case 5:if(Re){bn.next=9;break}if(!Oe){bn.next=8;break}return bn.abrupt("return",{measurementId:Oe,appId:ge});case 8:throw fa.create("no-api-key");case 9:return bt=ee.getThrottleMetadata(ge)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Rt=new Qu,setTimeout((0,ce.Z)(F.mark(function fr(){return F.wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:Rt.abort();case 1:case"end":return Fn.stop()}},fr)})),void 0!==ne?ne:No),bn.abrupt("return",ws({appId:ge,apiKey:Re,measurementId:Oe},bt,Rt,ee));case 13:case"end":return bn.stop()}},G)})),Ys.apply(this,arguments)}function ws(G,W,ee){return zr.apply(this,arguments)}function zr(){return zr=(0,ce.Z)(F.mark(function G(W,ee,ne){var me,ge,Re,Oe,bt,Rt,Ht,Pt,bn=arguments;return F.wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return me=ee.throttleEndTimeMillis,ge=ee.backoffCount,Re=bn.length>3&&void 0!==bn[3]?bn[3]:wi,Oe=W.appId,bt=W.measurementId,Jt.prev=3,Jt.next=6,fs(ne,me);case 6:Jt.next=14;break;case 8:if(Jt.prev=8,Jt.t0=Jt.catch(3),!bt){Jt.next=13;break}return Cr.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(bt)+' provided in the "measurementId" field in the local Firebase config. ['.concat(Jt.t0.message,"]")),Jt.abrupt("return",{appId:Oe,measurementId:bt});case 13:throw Jt.t0;case 14:return Jt.prev=14,Jt.next=17,Ta(W);case 17:return Rt=Jt.sent,Re.deleteThrottleMetadata(Oe),Jt.abrupt("return",Rt);case 22:if(Jt.prev=22,Jt.t1=Jt.catch(14),js(Jt.t1)){Jt.next=32;break}if(Re.deleteThrottleMetadata(Oe),!bt){Jt.next=31;break}return Cr.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(bt)+' provided in the "measurementId" field in the local Firebase config. ['.concat(Jt.t1.message,"]")),Jt.abrupt("return",{appId:Oe,measurementId:bt});case 31:throw Jt.t1;case 32:return Ht=503===Number(Jt.t1.customData.httpStatus)?(0,Ee.$s)(ge,Re.intervalMillis,30):(0,Ee.$s)(ge,Re.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+Ht,backoffCount:ge+1},Re.setThrottleMetadata(Oe,Pt),Cr.debug("Calling attemptFetch again in ".concat(Ht," millis")),Jt.abrupt("return",ws(W,Pt,ne,Re));case 37:case"end":return Jt.stop()}},G,null,[[3,8],[14,22]])})),zr.apply(this,arguments)}function fs(G,W){return new Promise(function(ee,ne){var me=Math.max(W-Date.now(),0),ge=setTimeout(ee,me);G.addEventListener(function(){clearTimeout(ge),ne(fa.create("fetch-throttle",{throttleEndTimeMillis:W}))})})}function js(G){if(!(G instanceof Ee.ZR&&G.customData))return!1;var W=Number(G.customData.httpStatus);return 429===W||500===W||503===W||504===W}var Qu=function(){function G(){(0,z.Z)(this,G),this.listeners=[]}return(0,H.Z)(G,[{key:"addEventListener",value:function(ee){this.listeners.push(ee)}},{key:"abort",value:function(){this.listeners.forEach(function(ee){return ee()})}}]),G}();function du(){return mo.apply(this,arguments)}function mo(){return(mo=(0,ce.Z)(F.mark(function G(){return F.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if((0,Ee.hl)()){ee.next=5;break}return Cr.warn(fa.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),ee.abrupt("return",!1);case 5:return ee.prev=5,ee.next=8,(0,Ee.eu)();case 8:ee.next=14;break;case 10:return ee.prev=10,ee.t0=ee.catch(5),Cr.warn(fa.create("indexeddb-unavailable",{errorInfo:ee.t0}).message),ee.abrupt("return",!1);case 14:return ee.abrupt("return",!0);case 15:case"end":return ee.stop()}},G,null,[[5,10]])}))).apply(this,arguments)}function Ei(){return(Ei=(0,ce.Z)(F.mark(function G(W,ee,ne,me,ge,Re,Oe){var bt,Rt,Ht,bn,fr,Jt,Fn;return F.wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:return(Rt=qs(W)).then(function(bi){ne[bi.measurementId]=bi.appId,W.options.measurementId&&bi.measurementId!==W.options.measurementId&&Cr.warn("The measurement ID in the local Firebase config (".concat(W.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(bi.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(bi){return Cr.error(bi)}),ee.push(Rt),Ht=du().then(function(bi){if(bi)return me.getId()}),nr.next=6,Promise.all([Rt,Ht]);case 6:return bn=(0,M.Z)(nr.sent,2),fr=bn[0],Jt=bn[1],aa()||go(Re,fr.measurementId),ge("js",new Date),(Fn=null!==(bt=null==Oe?void 0:Oe.config)&&void 0!==bt?bt:{}).origin="firebase",Fn.update=!0,null!=Jt&&(Fn[el]=Jt),ge("config",fr.measurementId,Fn),nr.abrupt("return",fr.measurementId);case 18:case"end":return nr.stop()}},G)}))).apply(this,arguments)}var J,oe,yo=function(){function G(W){(0,z.Z)(this,G),this.app=W}return(0,H.Z)(G,[{key:"_delete",value:function(){return delete A[this.app.options.appId],Promise.resolve()}}]),G}(),A={},U=[],C={},D="dataLayer",pe=!1;function vt(G,W,ee){!function He(){var G=[];if((0,Ee.ru)()&&G.push("This is a browser extension environment."),(0,Ee.zI)()||G.push("Cookies are not available."),G.length>0){var W=G.map(function(ne,me){return"(".concat(me+1,") ").concat(ne)}).join(" "),ee=fa.create("invalid-analytics-context",{errorInfo:W});Cr.warn(ee.message)}}();var ne=G.options.appId;if(!ne)throw fa.create("no-app-id");if(!G.options.apiKey){if(!G.options.measurementId)throw fa.create("no-api-key");Cr.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(G.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=A[ne])throw fa.create("already-exists",{id:ne});if(!pe){!function Ru(G){var W=[];Array.isArray(window[G])?W=window[G]:window[G]=W}(D);var me=function Fo(G,W,ee,ne,me){var ge=function(){for(var Oe=arguments.length,bt=new Array(Oe),Rt=0;Rt<Oe;Rt++)bt[Rt]=arguments[Rt];window[ne].push(arguments)};return window[me]&&"function"==typeof window[me]&&(ge=window[me]),window[me]=function qu(G,W,ee,ne){function ge(){return(ge=(0,ce.Z)(F.mark(function Re(Oe,bt,Rt){return F.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(Pt.prev=0,"event"!==Oe){Pt.next=6;break}return Pt.next=4,Bs(G,W,ee,bt,Rt);case 4:Pt.next=12;break;case 6:if("config"!==Oe){Pt.next=11;break}return Pt.next=9,hu(G,W,ee,ne,bt,Rt);case 9:Pt.next=12;break;case 11:G("set",bt);case 12:Pt.next=17;break;case 14:Pt.prev=14,Pt.t0=Pt.catch(0),Cr.error(Pt.t0);case 17:case"end":return Pt.stop()}},Re,null,[[0,14]])}))).apply(this,arguments)}return function me(Re,Oe,bt){return ge.apply(this,arguments)}}(ge,G,W,ee),{gtagCore:ge,wrappedGtag:window[me]}}(A,U,C,D,"gtag");oe=me.wrappedGtag,J=me.gtagCore,pe=!0}return A[ne]=function Pu(G,W,ee,ne,me,ge,Re){return Ei.apply(this,arguments)}(G,U,C,W,J,D,ee),new yo(G)}function Et(){return(Et=(0,ce.Z)(F.mark(function G(W,ee,ne,me,ge){var Re,Oe;return F.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:if(!ge||!ge.global){Rt.next=5;break}return W("event",ne,me),Rt.abrupt("return");case 5:return Rt.next=7,ee;case 7:Re=Rt.sent,Oe=Object.assign(Object.assign({},me),{send_to:Re}),W("event",ne,Oe);case 10:case"end":return Rt.stop()}},G)}))).apply(this,arguments)}function Li(){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,ce.Z)(F.mark(function G(){return F.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!(0,Ee.ru)()){ne.next=2;break}return ne.abrupt("return",!1);case 2:if((0,Ee.zI)()){ne.next=4;break}return ne.abrupt("return",!1);case 4:if((0,Ee.hl)()){ne.next=6;break}return ne.abrupt("return",!1);case 6:return ne.prev=6,ne.next=9,(0,Ee.eu)();case 9:return ne.abrupt("return",ne.sent);case 13:return ne.prev=13,ne.t0=ne.catch(6),ne.abrupt("return",!1);case 16:case"end":return ne.stop()}},G,null,[[6,13]])}))).apply(this,arguments)}var tr="@firebase/analytics";!function Xu(){(0,ke._registerComponent)(new Te.wA(po,function(W,ee){var ne=ee.options;return vt(W.getProvider("app").getImmediate(),W.getProvider("installations-internal").getImmediate(),ne)},"PUBLIC")),(0,ke._registerComponent)(new Te.wA("analytics-internal",function G(W){try{var ee=W.getProvider(po).getImmediate();return{logEvent:function(me,ge,Re){return function Er(G,W,ee,ne){G=(0,Ee.m9)(G),function Ke(G,W,ee,ne,me){return Et.apply(this,arguments)}(oe,A[G.app.options.appId],W,ee,ne).catch(function(me){return Cr.error(me)})}(ee,me,ge,Re)}}}catch(ne){throw fa.create("interop-component-reg-failed",{reason:ne})}},"PRIVATE")),(0,ke.registerVersion)(tr,"0.7.7"),(0,ke.registerVersion)(tr,"0.7.7","esm2017")}();var rl=O(73237),Zo=O(61120),Fr=O(60136),Lc=O(57777),ko=function(G){(0,Fr.Z)(ee,G);var W=(0,Lc.Z)(ee);function ee(ne,me){var ge;return(0,z.Z)(this,ee),(ge=W.call(this,ne,me)).scheduler=ne,ge.work=me,ge}return(0,H.Z)(ee,[{key:"schedule",value:function(me){var ge=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return ge>0?(0,rl.Z)((0,Zo.Z)(ee.prototype),"schedule",this).call(this,me,ge):(this.delay=ge,this.state=me,this.scheduler.flush(this),this)}},{key:"execute",value:function(me,ge){return ge>0||this.closed?(0,rl.Z)((0,Zo.Z)(ee.prototype),"execute",this).call(this,me,ge):this._execute(me,ge)}},{key:"requestAsyncId",value:function(me,ge){var Re=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!=Re&&Re>0||null==Re&&this.delay>0?(0,rl.Z)((0,Zo.Z)(ee.prototype),"requestAsyncId",this).call(this,me,ge,Re):me.flush(this)}}]),ee}(O(84408).o),ta=function(G){(0,Fr.Z)(ee,G);var W=(0,Lc.Z)(ee);function ee(){return(0,z.Z)(this,ee),W.apply(this,arguments)}return(0,H.Z)(ee)}(O(97565).v),il=new ta(ko),ji=O(34986),Hi=O(69751),is=O(18505),_o=O(49468),Mu=O(85363),bs=new j.GfV("7.3.0"),hs="__angularfire_symbol__analyticsIsSupportedValue",Ou="__angularfire_symbol__analyticsIsSupported",Hl="__angularfire_symbol__remoteConfigIsSupportedValue",hn="__angularfire_symbol__remoteConfigIsSupported",Bo="__angularfire_symbol__messagingIsSupportedValue",sa="__angularfire_symbol__messagingIsSupported";function oc(G,W,ee){if(W){if(1===W.length)return W[0];var ne=W.filter(function(Re){return Re.app===ee});if(1===ne.length)return ne[0]}return ee.container.getProvider(G).getImmediate({optional:!0})}globalThis[Ou]||(globalThis[Ou]=Li().then(function(G){return globalThis[hs]=G}).catch(function(){return globalThis[hs]=!1})),globalThis[sa]||(globalThis[sa]=Ga().then(function(G){return globalThis[Bo]=G}).catch(function(){return globalThis[Bo]=!1})),globalThis[hn]||(globalThis[hn]=xr().then(function(G){return globalThis[Hl]=G}).catch(function(){return globalThis[Hl]=!1}));var eo=function(W,ee){var ne=ee?[ee]:(0,le.C6)(),me=[];return ne.forEach(function(ge){ge.container.getProvider(W).instances.forEach(function(Oe){me.includes(Oe)||me.push(Oe)})}),me};function Nu(){}var Lu=function(){function G(W){var ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:il;(0,z.Z)(this,G),this.zone=W,this.delegate=ee}return(0,H.Z)(G,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(ee,ne,me){var ge=this.zone;return this.delegate.schedule(function(bt){var Rt=this;ge.runGuarded(function(){ee.apply(Rt,[bt])})},ne,me)}}]),G}(),al=function(){function G(W){(0,z.Z)(this,G),this.zone=W,this.task=null}return(0,H.Z)(G,[{key:"call",value:function(ee,ne){var me=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",Nu,{},Nu,Nu)}),ne.pipe((0,is.b)({next:me,complete:me,error:me})).subscribe(ee).add(me)}},{key:"unscheduleTask",value:function(){var ee=this;setTimeout(function(){null!=ee.task&&"scheduled"===ee.task.state&&(ee.task.invoke(),ee.task=null)},10)}}]),G}(),wo=function(){var G=(0,H.Z)(function W(ee){(0,z.Z)(this,W),this.ngZone=ee,this.outsideAngular=ee.runOutsideAngular(function(){return new Lu(Zone.current)}),this.insideAngular=ee.run(function(){return new Lu(Zone.current,ji.z)}),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)});return G.\u0275fac=function(ee){return new(ee||G)(j.LFG(j.R0b))},G.\u0275prov=j.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"}),G}();function Ds(){var G=globalThis.\u0275AngularFireScheduler;if(!G)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return G}function Eo(G){return Ds().ngZone.runOutsideAngular(function(){return G()})}function gu(G){return Ds().ngZone.run(function(){return G()})}function to(G){return Ds(),function zl(G){return function(ee){return(ee=ee.lift(new al(G.ngZone))).pipe((0,_o.R)(G.outsideAngular),(0,Mu.Q)(G.insideAngular))}}(Ds())(G)}var vs=function(W,ee){return function(){var me=arguments;return ee&&setTimeout(function(){"scheduled"===ee.state&&ee.invoke()},10),gu(function(){return W.apply(void 0,me)})}},ps=function(W,ee){return function(){for(var me,ne=this,ge=arguments,Re=0;Re<arguments.length;Re++)"function"==typeof ge[Re]&&(ee&&(me||(me=gu(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",Nu,{},Nu,Nu)}))),ge[Re]=vs(ge[Re],me));var Oe=Eo(function(){return W.apply(ne,ge)});if(!ee){if(Oe instanceof Hi.y){var bt=Ds();return Oe.pipe((0,_o.R)(bt.outsideAngular),(0,Mu.Q)(bt.insideAngular))}return gu(function(){return Oe})}return Oe instanceof Hi.y?Oe.pipe(to):Oe instanceof Promise?gu(function(){return new Promise(function(Rt,Ht){return Oe.then(function(Pt){return gu(function(){return Rt(Pt)})},function(Pt){return gu(function(){return Ht(Pt)})})})}):"function"==typeof Oe&&me?function(){return setTimeout(function(){me&&"scheduled"===me.state&&me.invoke()},10),Oe.apply(this,arguments)}:gu(function(){return Oe})}}},42090:function(Wt,Qe,O){"use strict";O.d(Qe,{BH:function(){return gt},LL:function(){return ot},ZR:function(){return Kt},zI:function(){return kn},US:function(){return ve},tV:function(){return ht},L:function(){return wt},$s:function(){return Fi},r3:function(){return Ir},Sg:function(){return kt},ne:function(){return Xr},vZ:function(){return Mr},ZB:function(){return Me},Lj:function(){return kr},pd:function(){return jr},Rd:function(){return on},m9:function(){return dr},z$:function(){return dt},jU:function(){return Pe},ru:function(){return Ce},d:function(){return be},xb:function(){return yn},w1:function(){return Ge},hl:function(){return Tt},uI:function(){return $e},UG:function(){return Fe},b$:function(){return at},G6:function(){return te},Mn:function(){return Se},X3:function(){return Mn},xO:function(){return Lr},zd:function(){return os},eu:function(){return jt}});var z=O(15861),H=O(37762),j=O(97685),le=O(97326),M=O(60136),ce=O(57777),x=O(35724),F=O(15671),ke=O(43144),Ee=O(87757),Te=O.n(Ee),Ve=function(Ne){for(var Le=[],lt=0,_t=0;_t<Ne.length;_t++){var Dt=Ne.charCodeAt(_t);Dt<128?Le[lt++]=Dt:Dt<2048?(Le[lt++]=Dt>>6|192,Le[lt++]=63&Dt|128):55296==(64512&Dt)&&_t+1<Ne.length&&56320==(64512&Ne.charCodeAt(_t+1))?(Dt=65536+((1023&Dt)<<10)+(1023&Ne.charCodeAt(++_t)),Le[lt++]=Dt>>18|240,Le[lt++]=Dt>>12&63|128,Le[lt++]=Dt>>6&63|128,Le[lt++]=63&Dt|128):(Le[lt++]=Dt>>12|224,Le[lt++]=Dt>>6&63|128,Le[lt++]=63&Dt|128)}return Le},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(Ne,Le){if(!Array.isArray(Ne))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var lt=Le?this.byteToCharMapWebSafe_:this.byteToCharMap_,_t=[],Dt=0;Dt<Ne.length;Dt+=3){var pn=Ne[Dt],An=Dt+1<Ne.length,nn=An?Ne[Dt+1]:0,Hr=Dt+2<Ne.length,ni=Hr?Ne[Dt+2]:0,Rr=(15&nn)<<2|ni>>6,Mi=63&ni;Hr||(Mi=64,An||(Rr=64)),_t.push(lt[pn>>2],lt[(3&pn)<<4|nn>>4],lt[Rr],lt[Mi])}return _t.join("")},encodeString:function(Ne,Le){return this.HAS_NATIVE_SUPPORT&&!Le?btoa(Ne):this.encodeByteArray(Ve(Ne),Le)},decodeString:function(Ne,Le){return this.HAS_NATIVE_SUPPORT&&!Le?atob(Ne):function(Ne){for(var Le=[],lt=0,_t=0;lt<Ne.length;){var Dt=Ne[lt++];if(Dt<128)Le[_t++]=String.fromCharCode(Dt);else if(Dt>191&&Dt<224){var pn=Ne[lt++];Le[_t++]=String.fromCharCode((31&Dt)<<6|63&pn)}else if(Dt>239&&Dt<365){var ni=((7&Dt)<<18|(63&Ne[lt++])<<12|(63&Ne[lt++])<<6|63&Ne[lt++])-65536;Le[_t++]=String.fromCharCode(55296+(ni>>10)),Le[_t++]=String.fromCharCode(56320+(1023&ni))}else{var Ci=Ne[lt++],hi=Ne[lt++];Le[_t++]=String.fromCharCode((15&Dt)<<12|(63&Ci)<<6|63&hi)}}return Le.join("")}(this.decodeStringToByteArray(Ne,Le))},decodeStringToByteArray:function(Ne,Le){this.init_();for(var lt=Le?this.charToByteMapWebSafe_:this.charToByteMap_,_t=[],Dt=0;Dt<Ne.length;){var pn=lt[Ne.charAt(Dt++)],nn=Dt<Ne.length?lt[Ne.charAt(Dt)]:0,ni=++Dt<Ne.length?lt[Ne.charAt(Dt)]:64,hi=++Dt<Ne.length?lt[Ne.charAt(Dt)]:64;if(++Dt,null==pn||null==nn||null==ni||null==hi)throw Error();_t.push(pn<<2|nn>>4),64!==ni&&(_t.push(nn<<4&240|ni>>2),64!==hi&&_t.push(ni<<6&192|hi))}return _t},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var Ne=0;Ne<this.ENCODED_VALS.length;Ne++)this.byteToCharMap_[Ne]=this.ENCODED_VALS.charAt(Ne),this.charToByteMap_[this.byteToCharMap_[Ne]]=Ne,this.byteToCharMapWebSafe_[Ne]=this.ENCODED_VALS_WEBSAFE.charAt(Ne),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ne]]=Ne,Ne>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ne)]=Ne,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ne)]=Ne)}}},wt=function(Ne){return function(Ne){var Le=Ve(Ne);return ve.encodeByteArray(Le,!0)}(Ne).replace(/\./g,"")},ht=function(Ne){try{return ve.decodeString(Ne,!0)}catch(Le){console.error("base64Decode failed: ",Le)}return null};function Me(Xe,Ne){if(!(Ne instanceof Object))return Ne;switch(Ne.constructor){case Date:return new Date(Ne.getTime());case Object:void 0===Xe&&(Xe={});break;case Array:Xe=[];break;default:return Ne}for(var lt in Ne)!Ne.hasOwnProperty(lt)||!ct(lt)||(Xe[lt]=Me(Xe[lt],Ne[lt]));return Xe}function ct(Xe){return"__proto__"!==Xe}var gt=function(){function Xe(){var Ne=this;(0,F.Z)(this,Xe),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(Le,lt){Ne.resolve=Le,Ne.reject=lt})}return(0,ke.Z)(Xe,[{key:"wrapCallback",value:function(Le){var lt=this;return function(_t,Dt){_t?lt.reject(_t):lt.resolve(Dt),"function"==typeof Le&&(lt.promise.catch(function(){}),1===Le.length?Le(_t):Le(_t,Dt))}}}]),Xe}();function kt(Xe,Ne){if(Xe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var lt=Ne||"demo-project",_t=Xe.iat||0,Dt=Xe.sub||Xe.user_id;if(!Dt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var pn=Object.assign({iss:"https://securetoken.google.com/".concat(lt),aud:lt,iat:_t,exp:_t+3600,auth_time:_t,sub:Dt,user_id:Dt,firebase:{sign_in_provider:"custom",identities:{}}},Xe);return[wt(JSON.stringify({alg:"none",type:"JWT"})),wt(JSON.stringify(pn)),""].join(".")}function dt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $e(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function Fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Xe){return!1}}function Pe(){return"object"==typeof self&&self.self===self}function Ce(){var Xe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Xe&&void 0!==Xe.id}function at(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function be(){return dt().indexOf("Electron/")>=0}function Ge(){var Xe=dt();return Xe.indexOf("MSIE ")>=0||Xe.indexOf("Trident/")>=0}function Se(){return dt().indexOf("MSAppHost/")>=0}function te(){return!Fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tt(){return"object"==typeof indexedDB}function jt(){return new Promise(function(Xe,Ne){try{var Le=!0,lt="validate-browser-context-for-indexeddb-analytics-module",_t=self.indexedDB.open(lt);_t.onsuccess=function(){_t.result.close(),Le||self.indexedDB.deleteDatabase(lt),Xe(!0)},_t.onupgradeneeded=function(){Le=!1},_t.onerror=function(){var Dt;Ne((null===(Dt=_t.error)||void 0===Dt?void 0:Dt.message)||"")}}catch(Dt){Ne(Dt)}})}function kn(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}function on(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}var Kt=function(Xe){(0,M.Z)(Le,Xe);var Ne=(0,ce.Z)(Le);function Le(lt,_t,Dt){var pn;return(0,F.Z)(this,Le),(pn=Ne.call(this,_t)).code=lt,pn.customData=Dt,pn.name="FirebaseError",Object.setPrototypeOf((0,le.Z)(pn),Le.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,le.Z)(pn),ot.prototype.create),pn}return(0,ke.Z)(Le)}((0,x.Z)(Error)),ot=function(){function Xe(Ne,Le,lt){(0,F.Z)(this,Xe),this.service=Ne,this.serviceName=Le,this.errors=lt}return(0,ke.Z)(Xe,[{key:"create",value:function(Le){var lt=(arguments.length<=1?void 0:arguments[1])||{},_t="".concat(this.service,"/").concat(Le),Dt=this.errors[Le],pn=Dt?je(Dt,lt):"Error",An="".concat(this.serviceName,": ").concat(pn," (").concat(_t,")."),nn=new Kt(_t,An,lt);return nn}}]),Xe}();function je(Xe,Ne){return Xe.replace(ft,function(Le,lt){var _t=Ne[lt];return null!=_t?String(_t):"<".concat(lt,"?>")})}var ft=/\{\$([^}]+)}/g;function Ir(Xe,Ne){return Object.prototype.hasOwnProperty.call(Xe,Ne)}function yn(Xe){for(var Ne in Xe)if(Object.prototype.hasOwnProperty.call(Xe,Ne))return!1;return!0}function Mr(Xe,Ne){if(Xe===Ne)return!0;for(var Le=Object.keys(Xe),lt=Object.keys(Ne),_t=0,Dt=Le;_t<Dt.length;_t++){var pn=Dt[_t];if(!lt.includes(pn))return!1;var An=Xe[pn],nn=Ne[pn];if(cr(An)&&cr(nn)){if(!Mr(An,nn))return!1}else if(An!==nn)return!1}for(var Hr=0,ni=lt;Hr<ni.length;Hr++)if(!Le.includes(ni[Hr]))return!1;return!0}function cr(Xe){return null!==Xe&&"object"==typeof Xe}function Lr(Xe){for(var Ne=[],Le=function(){var pn=(0,j.Z)(_t[lt],2),An=pn[0],nn=pn[1];Array.isArray(nn)?nn.forEach(function(Hr){Ne.push(encodeURIComponent(An)+"="+encodeURIComponent(Hr))}):Ne.push(encodeURIComponent(An)+"="+encodeURIComponent(nn))},lt=0,_t=Object.entries(Xe);lt<_t.length;lt++)Le();return Ne.length?"&"+Ne.join("&"):""}function os(Xe){var Ne={};return Xe.replace(/^\?/,"").split("&").forEach(function(lt){if(lt){var _t=lt.split("="),Dt=(0,j.Z)(_t,2),An=Dt[1];Ne[decodeURIComponent(Dt[0])]=decodeURIComponent(An)}}),Ne}function jr(Xe){var Ne=Xe.indexOf("?");if(!Ne)return"";var Le=Xe.indexOf("#",Ne);return Xe.substring(Ne,Le>0?Le:void 0)}function Xr(Xe,Ne){var Le=new ra(Xe,Ne);return Le.subscribe.bind(Le)}var ra=function(){function Xe(Ne,Le){var lt=this;(0,F.Z)(this,Xe),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Le,this.task.then(function(){Ne(lt)}).catch(function(_t){lt.error(_t)})}return(0,ke.Z)(Xe,[{key:"next",value:function(Le){this.forEachObserver(function(lt){lt.next(Le)})}},{key:"error",value:function(Le){this.forEachObserver(function(lt){lt.error(Le)}),this.close(Le)}},{key:"complete",value:function(){this.forEachObserver(function(Le){Le.complete()}),this.close()}},{key:"subscribe",value:function(Le,lt,_t){var pn,Dt=this;if(void 0===Le&&void 0===lt&&void 0===_t)throw new Error("Missing Observer.");pn=function ls(Xe,Ne){if("object"!=typeof Xe||null===Xe)return!1;var lt,Le=(0,H.Z)(Ne);try{for(Le.s();!(lt=Le.n()).done;){var _t=lt.value;if(_t in Xe&&"function"==typeof Xe[_t])return!0}}catch(Dt){Le.e(Dt)}finally{Le.f()}return!1}(Le,["next","error","complete"])?Le:{next:Le,error:lt,complete:_t},void 0===pn.next&&(pn.next=tn),void 0===pn.error&&(pn.error=tn),void 0===pn.complete&&(pn.complete=tn);var An=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{Dt.finalError?pn.error(Dt.finalError):pn.complete()}catch(nn){}}),this.observers.push(pn),An}},{key:"unsubscribeOne",value:function(Le){void 0===this.observers||void 0===this.observers[Le]||(delete this.observers[Le],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(Le){if(!this.finalized)for(var lt=0;lt<this.observers.length;lt++)this.sendOne(lt,Le)}},{key:"sendOne",value:function(Le,lt){var _t=this;this.task.then(function(){if(void 0!==_t.observers&&void 0!==_t.observers[Le])try{lt(_t.observers[Le])}catch(Dt){"undefined"!=typeof console&&console.error&&console.error(Dt)}})}},{key:"close",value:function(Le){var lt=this;this.finalized||(this.finalized=!0,void 0!==Le&&(this.finalError=Le),this.task.then(function(){lt.observers=void 0,lt.onNoObservers=void 0}))}}]),Xe}();function tn(){}function Fi(Xe){var Ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,Le=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,lt=Ne*Math.pow(Le,Xe),_t=Math.round(.5*lt*(Math.random()-.5)*2);return Math.min(144e5,lt+_t)}function dr(Xe){return Xe&&Xe._delegate?Xe._delegate:Xe}function un(Xe,Ne){return new Promise(function(Le,lt){Xe.onsuccess=function(_t){Le(_t.target.result)},Xe.onerror=function(_t){var Dt;lt("".concat(Ne,": ").concat(null===(Dt=_t.target.error)||void 0===Dt?void 0:Dt.message))}})}var Qt=function(){function Xe(Ne){(0,F.Z)(this,Xe),this._db=Ne,this.objectStoreNames=this._db.objectStoreNames}return(0,ke.Z)(Xe,[{key:"transaction",value:function(Le,lt){return new vn(this._db.transaction.call(this._db,Le,lt))}},{key:"createObjectStore",value:function(Le,lt){return new zt(this._db.createObjectStore(Le,lt))}},{key:"close",value:function(){this._db.close()}}]),Xe}(),vn=function(){function Xe(Ne){var Le=this;(0,F.Z)(this,Xe),this._transaction=Ne,this.complete=new Promise(function(lt,_t){Le._transaction.oncomplete=function(){lt()},Le._transaction.onerror=function(){_t(Le._transaction.error)},Le._transaction.onabort=function(){_t(Le._transaction.error)}})}return(0,ke.Z)(Xe,[{key:"objectStore",value:function(Le){return new zt(this._transaction.objectStore(Le))}}]),Xe}(),zt=function(){function Xe(Ne){(0,F.Z)(this,Xe),this._store=Ne}return(0,ke.Z)(Xe,[{key:"index",value:function(Le){return new qt(this._store.index(Le))}},{key:"createIndex",value:function(Le,lt,_t){return new qt(this._store.createIndex(Le,lt,_t))}},{key:"get",value:function(Le){return un(this._store.get(Le),"Error reading from IndexedDB")}},{key:"put",value:function(Le,lt){return un(this._store.put(Le,lt),"Error writing to IndexedDB")}},{key:"delete",value:function(Le){return un(this._store.delete(Le),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return un(this._store.clear(),"Error clearing IndexedDB object store")}}]),Xe}(),qt=function(){function Xe(Ne){(0,F.Z)(this,Xe),this._index=Ne}return(0,ke.Z)(Xe,[{key:"get",value:function(Le){return un(this._index.get(Le),"Error reading from IndexedDB")}}]),Xe}();function Mn(Xe,Ne,Le){return new Promise(function(lt,_t){try{var Dt=indexedDB.open(Xe,Ne);Dt.onsuccess=function(pn){lt(new Qt(pn.target.result))},Dt.onerror=function(pn){var An;_t("Error opening indexedDB: ".concat(null===(An=pn.target.error)||void 0===An?void 0:An.message))},Dt.onupgradeneeded=function(pn){Le(new Qt(Dt.result),pn.oldVersion,pn.newVersion,new vn(Dt.transaction))}}catch(pn){_t("Error opening indexedDB: ".concat(pn.message))}})}function kr(Xe){return On.apply(this,arguments)}function On(){return(On=(0,z.Z)(Te().mark(function Xe(Ne){return Te().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:return lt.abrupt("return",new Promise(function(_t,Dt){try{var pn=indexedDB.deleteDatabase(Ne);pn.onsuccess=function(){_t()},pn.onerror=function(An){var nn;Dt('Error deleting indexedDB database "'.concat(Ne,'": ').concat(null===(nn=An.target.error)||void 0===nn?void 0:nn.message))}}catch(An){Dt('Error deleting indexedDB database "'.concat(Ne,'": ').concat(An.message))}}));case 1:case"end":return lt.stop()}},Xe)}))).apply(this,arguments)}},15867:function(Wt,Qe,O){"use strict";O.d(Qe,{P2:function(){return z.deleteApp},Mq:function(){return z.getApp},C6:function(){return z.getApps},ZF:function(){return z.initializeApp},TP:function(){return z.onLog},KN:function(){return z.registerVersion},Ub:function(){return z.setLogLevel}});var z=O(49681);(0,z.registerVersion)("firebase","9.6.10","app")},70127:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return z.Z}});var z=O(63942);z.Z.registerVersion("firebase","9.6.10","app-compat")},4087:function(Wt,Qe,O){"use strict";O.r(Qe);var Me,z=O(15671),H=O(43144),j=O(15861),le=O(87757),M=O.n(le),ce=O(63942),x=O(84506),F=O(73237),ke=O(61120),Ee=O(60136),Te=O(57777),et=O(97326),Je=O(37762),rt=O(97685),Ve=O(74902),fe=O(4942),ve=O(42090),qe=O(49681),wt=O(70655),ht=O(41877),it=O(34859);function Pe(){return(0,fe.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ce=function Fe(){var _;return(0,fe.Z)(_={},"admin-restricted-operation","This operation is restricted to administrators only."),(0,fe.Z)(_,"argument-error",""),(0,fe.Z)(_,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,fe.Z)(_,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,fe.Z)(_,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,fe.Z)(_,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,fe.Z)(_,"cordova-not-ready","Cordova framework is not ready."),(0,fe.Z)(_,"cors-unsupported","This browser is not supported."),(0,fe.Z)(_,"credential-already-in-use","This credential is already associated with a different user account."),(0,fe.Z)(_,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,fe.Z)(_,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,fe.Z)(_,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,fe.Z)(_,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,fe.Z)(_,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,fe.Z)(_,"email-already-in-use","The email address is already in use by another account."),(0,fe.Z)(_,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,fe.Z)(_,"expired-action-code","The action code has expired."),(0,fe.Z)(_,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,fe.Z)(_,"internal-error","An internal AuthError has occurred."),(0,fe.Z)(_,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,fe.Z)(_,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,fe.Z)(_,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,fe.Z)(_,"invalid-auth-event","An internal AuthError has occurred."),(0,fe.Z)(_,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,fe.Z)(_,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,fe.Z)(_,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,fe.Z)(_,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,fe.Z)(_,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,fe.Z)(_,"invalid-email","The email address is badly formatted."),(0,fe.Z)(_,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,fe.Z)(_,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,fe.Z)(_,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,fe.Z)(_,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,fe.Z)(_,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,fe.Z)(_,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,fe.Z)(_,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,fe.Z)(_,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,fe.Z)(_,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,fe.Z)(_,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,fe.Z)(_,"wrong-password","The password is invalid or the user does not have a password."),(0,fe.Z)(_,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,fe.Z)(_,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,fe.Z)(_,"invalid-provider-id","The specified provider ID is invalid."),(0,fe.Z)(_,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,fe.Z)(_,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,fe.Z)(_,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,fe.Z)(_,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,fe.Z)(_,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,fe.Z)(_,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,fe.Z)(_,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,fe.Z)(_,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,fe.Z)(_,"missing-continue-uri","A continue URL must be provided in the request."),(0,fe.Z)(_,"missing-iframe-start","An internal AuthError has occurred."),(0,fe.Z)(_,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,fe.Z)(_,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,fe.Z)(_,"missing-multi-factor-info","No second factor identifier is provided."),(0,fe.Z)(_,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,fe.Z)(_,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,fe.Z)(_,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,fe.Z)(_,"app-deleted","This instance of FirebaseApp has been deleted."),(0,fe.Z)(_,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,fe.Z)(_,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,fe.Z)(_,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,fe.Z)(_,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,fe.Z)(_,"no-auth-event","An internal AuthError has occurred."),(0,fe.Z)(_,"no-such-provider","User was not linked to an account with the given provider."),(0,fe.Z)(_,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,fe.Z)(_,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,fe.Z)(_,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,fe.Z)(_,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,fe.Z)(_,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,fe.Z)(_,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,fe.Z)(_,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,fe.Z)(_,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,fe.Z)(_,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,fe.Z)(_,"rejected-credential","The request contains malformed or mismatching credentials."),(0,fe.Z)(_,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,fe.Z)(_,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,fe.Z)(_,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,fe.Z)(_,"timeout","The operation has timed out."),(0,fe.Z)(_,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,fe.Z)(_,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,fe.Z)(_,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,fe.Z)(_,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,fe.Z)(_,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,fe.Z)(_,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,fe.Z)(_,"unverified-email","The operation requires a verified email."),(0,fe.Z)(_,"user-cancelled","The user did not grant your application the permissions it requested."),(0,fe.Z)(_,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,fe.Z)(_,"user-disabled","The user account has been disabled by an administrator."),(0,fe.Z)(_,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,fe.Z)(_,"user-signed-out",""),(0,fe.Z)(_,"weak-password","The password must be 6 characters long or more."),(0,fe.Z)(_,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,fe.Z)(_,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),_},at=Pe,be=new ve.LL("auth","Firebase",Pe()),Se=new ht.Yd("@firebase/auth");function Mt(_){if(Se.logLevel<=ht.in.ERROR){for(var y=arguments.length,p=new Array(y>1?y-1:0),k=1;k<y;k++)p[k-1]=arguments[k];Se.error.apply(Se,["Auth (".concat(qe.SDK_VERSION,"): ").concat(_)].concat(p))}}function te(_){for(var y=arguments.length,p=new Array(y>1?y-1:0),k=1;k<y;k++)p[k-1]=arguments[k];throw on.apply(void 0,[_].concat(p))}function Tt(_){for(var y=arguments.length,p=new Array(y>1?y-1:0),k=1;k<y;k++)p[k-1]=arguments[k];return on.apply(void 0,[_].concat(p))}function jt(_,y,p){var k=Object.assign(Object.assign({},at()),(0,fe.Z)({},y,p));return new ve.LL("auth","Firebase",k).create(y,{appName:_.name})}function kn(_,y,p){if(!(y instanceof p))throw p.name!==y.constructor.name&&te(_,"argument-error"),jt(_,"argument-error","Type of ".concat(y.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function on(_){for(var y=arguments.length,p=new Array(y>1?y-1:0),k=1;k<y;k++)p[k-1]=arguments[k];if("string"!=typeof _){var g,I=p[0],P=(0,Ve.Z)(p.slice(1));return P[0]&&(P[0].appName=_.name),(g=_._errorFactory).create.apply(g,[I].concat((0,Ve.Z)(P)))}return be.create.apply(be,[_].concat(p))}function Ze(_,y){if(!_){for(var p=arguments.length,k=new Array(p>2?p-2:0),g=2;g<p;g++)k[g-2]=arguments[g];throw on.apply(void 0,[y].concat(k))}}function Kt(_){var y="INTERNAL ASSERTION FAILED: "+_;throw Mt(y),new Error(y)}function ot(_,y){_||Kt(y)}var je=new Map;function ft(_){ot(_ instanceof Function,"Expected a class definition");var y=je.get(_);return y?(ot(y instanceof _,"Instance stored in cache mismatched with class"),y):(y=new _,je.set(_,y),y)}function Xt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function qn(){return"http:"===Rn()||"https:"===Rn()}function Rn(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}var Ir=function(){function _(y,p){(0,z.Z)(this,_),this.shortDelay=y,this.longDelay=p,ot(p>y,"Short delay should be less than long delay!"),this.isMobile=(0,ve.uI)()||(0,ve.b$)()}return(0,H.Z)(_,[{key:"get",value:function(){return function Sn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(qn()||(0,ve.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),_}();function yr(_,y){ot(_.emulator,"Emulator should always be set here");var p=_.emulator.url;return y?"".concat(p).concat(y.startsWith("/")?y.slice(1):y):p}var yn=function(){function _(){(0,z.Z)(this,_)}return(0,H.Z)(_,null,[{key:"initialize",value:function(p,k,g){this.fetchImpl=p,k&&(this.headersImpl=k),g&&(this.responseImpl=g)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),_}(),Yn=((0,fe.Z)(Me={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,fe.Z)(Me,"MISSING_CUSTOM_TOKEN","internal-error"),(0,fe.Z)(Me,"INVALID_IDENTIFIER","invalid-email"),(0,fe.Z)(Me,"MISSING_CONTINUE_URI","internal-error"),(0,fe.Z)(Me,"INVALID_PASSWORD","wrong-password"),(0,fe.Z)(Me,"MISSING_PASSWORD","internal-error"),(0,fe.Z)(Me,"EMAIL_EXISTS","email-already-in-use"),(0,fe.Z)(Me,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,fe.Z)(Me,"INVALID_IDP_RESPONSE","invalid-credential"),(0,fe.Z)(Me,"INVALID_PENDING_TOKEN","invalid-credential"),(0,fe.Z)(Me,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,fe.Z)(Me,"MISSING_REQ_TYPE","internal-error"),(0,fe.Z)(Me,"EMAIL_NOT_FOUND","user-not-found"),(0,fe.Z)(Me,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,fe.Z)(Me,"EXPIRED_OOB_CODE","expired-action-code"),(0,fe.Z)(Me,"INVALID_OOB_CODE","invalid-action-code"),(0,fe.Z)(Me,"MISSING_OOB_CODE","internal-error"),(0,fe.Z)(Me,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,fe.Z)(Me,"INVALID_ID_TOKEN","invalid-user-token"),(0,fe.Z)(Me,"TOKEN_EXPIRED","user-token-expired"),(0,fe.Z)(Me,"USER_NOT_FOUND","user-token-expired"),(0,fe.Z)(Me,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,fe.Z)(Me,"INVALID_CODE","invalid-verification-code"),(0,fe.Z)(Me,"INVALID_SESSION_INFO","invalid-verification-id"),(0,fe.Z)(Me,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,fe.Z)(Me,"MISSING_SESSION_INFO","missing-verification-id"),(0,fe.Z)(Me,"SESSION_EXPIRED","code-expired"),(0,fe.Z)(Me,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,fe.Z)(Me,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,fe.Z)(Me,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,fe.Z)(Me,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,fe.Z)(Me,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,fe.Z)(Me,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,fe.Z)(Me,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,fe.Z)(Me,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,fe.Z)(Me,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,fe.Z)(Me,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,fe.Z)(Me,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Me),Mr=new Ir(3e4,6e4);function cr(_,y){return _.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:_.tenantId}):y}function Lr(_,y,p,k){return os.apply(this,arguments)}function os(){return os=(0,j.Z)(M().mark(function _(y,p,k,g){var P=arguments;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",jr(y,P.length>4&&void 0!==P[4]?P[4]:{},(0,j.Z)(M().mark(function ue(){var Ye,nt,cn,Vt;return M().wrap(function(an){for(;;)switch(an.prev=an.next){case 0:return Ye={},nt={},g&&("GET"===p?nt=g:Ye={body:JSON.stringify(g)}),cn=(0,ve.xO)(Object.assign({key:y.config.apiKey},nt)).slice(1),an.next=6,y._getAdditionalHeaders();case 6:return(Vt=an.sent)["Content-Type"]="application/json",y.languageCode&&(Vt["X-Firebase-Locale"]=y.languageCode),an.abrupt("return",yn.fetch()(ma(y,y.config.apiHost,k,cn),Object.assign({method:p,headers:Vt,referrerPolicy:"no-referrer"},Ye)));case 10:case"end":return an.stop()}},ue)}))));case 2:case"end":return Y.stop()}},_)})),os.apply(this,arguments)}function jr(_,y,p){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,j.Z)(M().mark(function _(y,p,k){var g,I,P,B,ue,Ye,nt,cn,Vt;return M().wrap(function(an){for(;;)switch(an.prev=an.next){case 0:return y._canInitEmulator=!1,g=Object.assign(Object.assign({},Yn),p),an.prev=2,I=new ls(y),an.next=6,Promise.race([k(),I.promise]);case 6:return P=an.sent,I.clearNetworkTimeout(),an.next=10,P.json();case 10:if(!("needConfirmation"in(B=an.sent))){an.next=13;break}throw tn(y,"account-exists-with-different-credential",B);case 13:if(!P.ok||"errorMessage"in B){an.next=17;break}return an.abrupt("return",B);case 17:if(ue=(P.ok?B.errorMessage:B.error.message).split(" : "),Ye=(0,rt.Z)(ue,2),cn=Ye[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==(nt=Ye[0])){an.next=23;break}throw tn(y,"credential-already-in-use",B);case 23:if("EMAIL_EXISTS"!==nt){an.next=25;break}throw tn(y,"email-already-in-use",B);case 25:if(Vt=g[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-"),!cn){an.next=30;break}throw jt(y,Vt,cn);case 30:te(y,Vt);case 31:an.next=38;break;case 33:if(an.prev=33,an.t0=an.catch(2),!(an.t0 instanceof ve.ZR)){an.next=37;break}throw an.t0;case 37:te(y,"network-request-failed");case 38:case"end":return an.stop()}},_,null,[[2,33]])}))).apply(this,arguments)}function Xr(_,y,p,k){return ra.apply(this,arguments)}function ra(){return ra=(0,j.Z)(M().mark(function _(y,p,k,g){var I,P,B=arguments;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return I=B.length>4&&void 0!==B[4]?B[4]:{},ue.next=3,Lr(y,p,k,g,I);case 3:return"mfaPendingCredential"in(P=ue.sent)&&te(y,"multi-factor-auth-required",{_serverResponse:P}),ue.abrupt("return",P);case 6:case"end":return ue.stop()}},_)})),ra.apply(this,arguments)}function ma(_,y,p,k){var g="".concat(y).concat(p,"?").concat(k);return _.config.emulator?yr(_.config,g):"".concat(_.config.apiScheme,"://").concat(g)}var ls=function(){function _(y){var p=this;(0,z.Z)(this,_),this.auth=y,this.timer=null,this.promise=new Promise(function(k,g){p.timer=setTimeout(function(){return g(Tt(p.auth,"network-request-failed"))},Mr.get())})}return(0,H.Z)(_,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),_}();function tn(_,y,p){var k={appName:_.name};p.email&&(k.email=p.email),p.phoneNumber&&(k.phoneNumber=p.phoneNumber);var g=Tt(_,y,k);return g.customData._tokenResponse=p,g}function ia(_,y){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Lr(y,"POST","/v1/accounts:delete",p));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function _n(_,y){return Un.apply(this,arguments)}function Un(){return(Un=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Lr(y,"POST","/v1/accounts:update",p));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function ya(_,y){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Lr(y,"POST","/v1/accounts:lookup",p));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function Dr(_){if(_)try{var y=new Date(Number(_));if(!isNaN(y.getTime()))return y.toUTCString()}catch(p){}}function Pi(){return Pi=(0,j.Z)(M().mark(function _(y){var p,k,g,I,P,B,Y=arguments;return M().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return p=Y.length>1&&void 0!==Y[1]&&Y[1],k=(0,ve.m9)(y),Ye.next=4,k.getIdToken(p);case 4:return Ze((I=Fi(g=Ye.sent))&&I.exp&&I.auth_time&&I.iat,k.auth,"internal-error"),B=null==(P="object"==typeof I.firebase?I.firebase:void 0)?void 0:P.sign_in_provider,Ye.abrupt("return",{claims:I,token:g,authTime:Dr(Zr(I.auth_time)),issuedAtTime:Dr(Zr(I.iat)),expirationTime:Dr(Zr(I.exp)),signInProvider:B||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null});case 10:case"end":return Ye.stop()}},_)})),Pi.apply(this,arguments)}function Zr(_){return 1e3*Number(_)}function Fi(_){var y=_.split("."),p=(0,rt.Z)(y,3),g=p[1];if(void 0===p[0]||void 0===g||void 0===p[2])return Mt("JWT malformed, contained fewer than 3 sections"),null;try{var P=(0,ve.tV)(g);return P?JSON.parse(P):(Mt("Failed to decode base64 JWT payload"),null)}catch(B){return Mt("Caught error parsing JWT payload as JSON",B),null}}function Ur(_,y){return dr.apply(this,arguments)}function dr(){return dr=(0,j.Z)(M().mark(function _(y,p){var g=arguments;return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!(g.length>2&&void 0!==g[2]&&g[2])){P.next=3;break}return P.abrupt("return",p);case 3:return P.prev=3,P.next=6,p;case 6:return P.abrupt("return",P.sent);case 9:if(P.prev=9,P.t0=P.catch(3),!(P.t0 instanceof ve.ZR&&un(P.t0))){P.next=15;break}if(y.auth.currentUser!==y){P.next=15;break}return P.next=15,y.auth.signOut();case 15:throw P.t0;case 16:case"end":return P.stop()}},_,null,[[3,9]])})),dr.apply(this,arguments)}function un(_){var y=_.code;return y==="auth/".concat("user-disabled")||y==="auth/".concat("user-token-expired")}var Qt=function(){function _(y){(0,z.Z)(this,_),this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return(0,H.Z)(_,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(p){var k;if(p){var g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}this.errorBackoff=3e4;var P=(null!==(k=this.user.stsTokenManager.expirationTime)&&void 0!==k?k:0)-Date.now()-3e5;return Math.max(0,P)}},{key:"schedule",value:function(){var p=this,k=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var g=this.getInterval(k);this.timerId=setTimeout((0,j.Z)(M().mark(function I(){return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,p.iteration();case 2:case"end":return B.stop()}},I)})),g)}}},{key:"iteration",value:(y=(0,j.Z)(M().mark(function k(){return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=3,this.user.getIdToken(!0);case 3:I.next=9;break;case 5:return I.prev=5,I.t0=I.catch(0),I.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),I.abrupt("return");case 9:this.schedule();case 10:case"end":return I.stop()}},k,this,[[0,5]])})),function p(){return y.apply(this,arguments)})}]),_;var y}(),vn=function(){function _(y,p){(0,z.Z)(this,_),this.createdAt=y,this.lastLoginAt=p,this._initializeTime()}return(0,H.Z)(_,[{key:"_initializeTime",value:function(){this.lastSignInTime=Dr(this.lastLoginAt),this.creationTime=Dr(this.createdAt)}},{key:"_copy",value:function(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),_}();function zt(_){return qt.apply(this,arguments)}function qt(){return(qt=(0,j.Z)(M().mark(function _(y){var p,k,g,I,P,B,Y,Ye,nt,cn;return M().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return k=y.auth,rn.next=3,y.getIdToken();case 3:return g=rn.sent,rn.next=6,Ur(y,ya(k,{idToken:g}));case 6:Ze(null==(I=rn.sent)?void 0:I.users.length,k,"internal-error"),y._notifyReloadListener(P=I.users[0]),B=(null===(p=P.providerUserInfo)||void 0===p?void 0:p.length)?Xe(P.providerUserInfo):[],Y=On(y.providerData,B),Ye=!(y.email&&P.passwordHash||(null==Y?void 0:Y.length)),nt=!!y.isAnonymous&&Ye,cn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Y,metadata:new vn(P.createdAt,P.lastLoginAt),isAnonymous:nt},Object.assign(y,cn);case 17:case"end":return rn.stop()}},_)}))).apply(this,arguments)}function kr(){return(kr=(0,j.Z)(M().mark(function _(y){var p;return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return p=(0,ve.m9)(y),g.next=3,zt(p);case 3:return g.next=5,p.auth._persistUserIfCurrent(p);case 5:p.auth._notifyListenersIfCurrent(p);case 6:case"end":return g.stop()}},_)}))).apply(this,arguments)}function On(_,y){var p=_.filter(function(k){return!y.some(function(g){return g.providerId===k.providerId})});return[].concat((0,Ve.Z)(p),(0,Ve.Z)(y))}function Xe(_){return _.map(function(y){var p=y.providerId,k=(0,wt._T)(y,["providerId"]);return{providerId:p,uid:k.rawId||"",displayName:k.displayName||null,email:k.email||null,phoneNumber:k.phoneNumber||null,photoURL:k.photoUrl||null}})}function Ne(_,y){return Le.apply(this,arguments)}function Le(){return(Le=(0,j.Z)(M().mark(function _(y,p){var k;return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,jr(y,{},(0,j.Z)(M().mark(function P(){var B,Y,nt,cn;return M().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return B=(0,ve.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),nt=ma(y,(Y=y.config).tokenApiHost,"/v1/token","key=".concat(Y.apiKey)),rn.next=5,y._getAdditionalHeaders();case 5:return(cn=rn.sent)["Content-Type"]="application/x-www-form-urlencoded",rn.abrupt("return",yn.fetch()(nt,{method:"POST",headers:cn,body:B}));case 8:case"end":return rn.stop()}},P)})));case 2:return I.abrupt("return",{accessToken:(k=I.sent).access_token,expiresIn:k.expires_in,refreshToken:k.refresh_token});case 4:case"end":return I.stop()}},_)}))).apply(this,arguments)}var lt=function(){function _(){(0,z.Z)(this,_),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return(0,H.Z)(_,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(p){Ze(p.idToken,"internal-error"),Ze(void 0!==p.idToken,"internal-error"),Ze(void 0!==p.refreshToken,"internal-error");var k="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function Or(_){var y=Fi(_);return Ze(y,"internal-error"),Ze(void 0!==y.exp,"internal-error"),Ze(void 0!==y.iat,"internal-error"),Number(y.exp)-Number(y.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,k)}},{key:"getToken",value:(y=(0,j.Z)(M().mark(function k(g){var I,P=arguments;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(I=P.length>1&&void 0!==P[1]&&P[1],Ze(!this.accessToken||this.refreshToken,g,"user-token-expired"),I||!this.accessToken||this.isExpired){Y.next=4;break}return Y.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){Y.next=8;break}return Y.next=7,this.refresh(g,this.refreshToken);case 7:return Y.abrupt("return",this.accessToken);case 8:return Y.abrupt("return",null);case 9:case"end":return Y.stop()}},k,this)})),function p(k){return y.apply(this,arguments)})},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var y=(0,j.Z)(M().mark(function k(g,I){var P;return M().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return nt.next=2,Ne(g,I);case 2:this.updateTokensAndExpiration((P=nt.sent).accessToken,P.refreshToken,Number(P.expiresIn));case 7:case"end":return nt.stop()}},k,this)}));return function p(k,g){return y.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(p,k,g){this.refreshToken=k||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*g}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}},{key:"_clone",value:function(){return Object.assign(new _,this.toJSON())}},{key:"_performRefresh",value:function(){return Kt("not implemented")}}],[{key:"fromJSON",value:function(p,k){var g=k.refreshToken,I=k.accessToken,P=k.expirationTime,B=new _;return g&&(Ze("string"==typeof g,"internal-error",{appName:p}),B.refreshToken=g),I&&(Ze("string"==typeof I,"internal-error",{appName:p}),B.accessToken=I),P&&(Ze("number"==typeof P,"internal-error",{appName:p}),B.expirationTime=P),B}}]),_;var y}();function _t(_,y){Ze("string"==typeof _||void 0===_,"internal-error",{appName:y})}var Dt=function(){function _(y){(0,z.Z)(this,_);var p=y.uid,k=y.auth,g=y.stsTokenManager,I=(0,wt._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=k,this.stsTokenManager=g,this.accessToken=g.accessToken,this.displayName=I.displayName||null,this.email=I.email||null,this.emailVerified=I.emailVerified||!1,this.phoneNumber=I.phoneNumber||null,this.photoURL=I.photoURL||null,this.isAnonymous=I.isAnonymous||!1,this.tenantId=I.tenantId||null,this.providerData=I.providerData?(0,Ve.Z)(I.providerData):[],this.metadata=new vn(I.createdAt||void 0,I.lastLoginAt||void 0)}return(0,H.Z)(_,[{key:"getIdToken",value:(y=(0,j.Z)(M().mark(function k(g){var I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Ur(this,this.stsTokenManager.getToken(this.auth,g));case 2:if(Ze(I=B.sent,this.auth,"internal-error"),this.accessToken===I){B.next=9;break}return this.accessToken=I,B.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return B.abrupt("return",I);case 10:case"end":return B.stop()}},k,this)})),function p(k){return y.apply(this,arguments)})},{key:"getIdTokenResult",value:function(p){return function fi(_){return Pi.apply(this,arguments)}(this,p)}},{key:"reload",value:function(){return function Mn(_){return kr.apply(this,arguments)}(this)}},{key:"_assign",value:function(p){this!==p&&(Ze(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(function(k){return Object.assign({},k)}),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}},{key:"_clone",value:function(p){return new _(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(p){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var y=(0,j.Z)(M().mark(function k(g){var I,P,B=arguments;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(I=B.length>1&&void 0!==B[1]&&B[1],P=!1,g.idToken&&g.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(g),P=!0),!I){ue.next=6;break}return ue.next=6,zt(this);case 6:return ue.next=8,this.auth._persistUserIfCurrent(this);case 8:P&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return ue.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"delete",value:function(){var y=(0,j.Z)(M().mark(function k(){var g;return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,this.getIdToken();case 2:return g=P.sent,P.next=5,Ur(this,ia(this.auth,{idToken:g}));case 5:return this.stsTokenManager.clearRefreshToken(),P.abrupt("return",this.auth.signOut());case 7:case"end":return P.stop()}},k,this)}));return function p(){return y.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(p){return Object.assign({},p)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(p,k){var g,I,P,B,Y,ue,Ye,nt,cn=null!==(g=k.displayName)&&void 0!==g?g:void 0,Vt=null!==(I=k.email)&&void 0!==I?I:void 0,rn=null!==(P=k.phoneNumber)&&void 0!==P?P:void 0,an=null!==(B=k.photoURL)&&void 0!==B?B:void 0,pi=null!==(Y=k.tenantId)&&void 0!==Y?Y:void 0,Ri=null!==(ue=k._redirectEventId)&&void 0!==ue?ue:void 0,Ma=null!==(Ye=k.createdAt)&&void 0!==Ye?Ye:void 0,Sr=null!==(nt=k.lastLoginAt)&&void 0!==nt?nt:void 0,Oa=k.uid,Rl=k.emailVerified,zo=k.isAnonymous,Hc=k.providerData,Da=k.stsTokenManager;Ze(Oa&&Da,p,"internal-error");var nv=lt.fromJSON(this.name,Da);Ze("string"==typeof Oa,p,"internal-error"),_t(cn,p.name),_t(Vt,p.name),Ze("boolean"==typeof Rl,p,"internal-error"),Ze("boolean"==typeof zo,p,"internal-error"),_t(rn,p.name),_t(an,p.name),_t(pi,p.name),_t(Ri,p.name),_t(Ma,p.name),_t(Sr,p.name);var Yf=new _({uid:Oa,auth:p,email:Vt,emailVerified:Rl,displayName:cn,isAnonymous:zo,photoURL:an,phoneNumber:rn,tenantId:pi,stsTokenManager:nv,createdAt:Ma,lastLoginAt:Sr});return Hc&&Array.isArray(Hc)&&(Yf.providerData=Hc.map(function(rv){return Object.assign({},rv)})),Ri&&(Yf._redirectEventId=Ri),Yf}},{key:"_fromIdTokenResponse",value:function(){var y=(0,j.Z)(M().mark(function k(g,I){var P,B,Y,ue=arguments;return M().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return P=ue.length>2&&void 0!==ue[2]&&ue[2],(B=new lt).updateFromServerResponse(I),Y=new _({uid:I.localId,auth:g,stsTokenManager:B,isAnonymous:P}),nt.next=6,zt(Y);case 6:return nt.abrupt("return",Y);case 7:case"end":return nt.stop()}},k)}));return function p(k,g){return y.apply(this,arguments)}}()}]),_;var y}(),pn=function(){var _=function(){function y(){(0,z.Z)(this,y),this.type="NONE",this.storage={}}return(0,H.Z)(y,[{key:"_isAvailable",value:(p=(0,j.Z)(M().mark(function g(){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",!0);case 1:case"end":return P.stop()}},g)})),function k(){return p.apply(this,arguments)})},{key:"_set",value:function(){var p=(0,j.Z)(M().mark(function g(I,P){return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:this.storage[I]=P;case 1:case"end":return Y.stop()}},g,this)}));return function k(g,I){return p.apply(this,arguments)}}()},{key:"_get",value:function(){var p=(0,j.Z)(M().mark(function g(I){var P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",void 0===(P=this.storage[I])?null:P);case 2:case"end":return Y.stop()}},g,this)}));return function k(g){return p.apply(this,arguments)}}()},{key:"_remove",value:function(){var p=(0,j.Z)(M().mark(function g(I){return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:delete this.storage[I];case 1:case"end":return B.stop()}},g,this)}));return function k(g){return p.apply(this,arguments)}}()},{key:"_addListener",value:function(k,g){}},{key:"_removeListener",value:function(k,g){}}]),y;var p}();return _.type="NONE",_}(),An=pn;function nn(_,y,p){return"firebase".concat(":",_,":").concat(y,":").concat(p)}var Hr=function(){function _(y,p,k){(0,z.Z)(this,_),this.persistence=y,this.auth=p,this.userKey=k;var g=this.auth,I=g.config,P=g.name;this.fullUserKey=nn(this.userKey,I.apiKey,P),this.fullPersistenceKey=nn("persistence",I.apiKey,P),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return(0,H.Z)(_,[{key:"setCurrentUser",value:function(p){return this.persistence._set(this.fullUserKey,p.toJSON())}},{key:"getCurrentUser",value:(y=(0,j.Z)(M().mark(function k(){var g;return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,this.persistence._get(this.fullUserKey);case 2:return P.abrupt("return",(g=P.sent)?Dt._fromJSON(this.auth,g):null);case 4:case"end":return P.stop()}},k,this)})),function p(){return y.apply(this,arguments)})},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var y=(0,j.Z)(M().mark(function k(g){var I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(this.persistence!==g){B.next=2;break}return B.abrupt("return");case 2:return B.next=4,this.getCurrentUser();case 4:return I=B.sent,B.next=7,this.removeCurrentUser();case 7:if(this.persistence=g,!I){B.next=10;break}return B.abrupt("return",this.setCurrentUser(I));case 10:case"end":return B.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var y=(0,j.Z)(M().mark(function k(g,I){var P,B,Y,ue,Ye,nt,cn,Vt,rn,an,pi,Ri=arguments;return M().wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(P=Ri.length>2&&void 0!==Ri[2]?Ri[2]:"authUser",I.length){Sr.next=3;break}return Sr.abrupt("return",new _(ft(An),g,P));case 3:return Sr.next=5,Promise.all(I.map(function(){var Oa=(0,j.Z)(M().mark(function Rl(zo){return M().wrap(function(Da){for(;;)switch(Da.prev=Da.next){case 0:return Da.next=2,zo._isAvailable();case 2:if(!Da.sent){Da.next=4;break}return Da.abrupt("return",zo);case 4:return Da.abrupt("return",void 0);case 5:case"end":return Da.stop()}},Rl)}));return function(Rl){return Oa.apply(this,arguments)}}()));case 5:B=Sr.sent.filter(function(Oa){return Oa}),Y=B[0]||ft(An),ue=nn(P,g.config.apiKey,g.name),Ye=null,nt=(0,Je.Z)(I),Sr.prev=10,nt.s();case 12:if((cn=nt.n()).done){Sr.next=29;break}return Vt=cn.value,Sr.prev=14,Sr.next=17,Vt._get(ue);case 17:if(!(rn=Sr.sent)){Sr.next=23;break}return an=Dt._fromJSON(g,rn),Vt!==Y&&(Ye=an),Y=Vt,Sr.abrupt("break",29);case 23:Sr.next=27;break;case 25:Sr.prev=25,Sr.t0=Sr.catch(14);case 27:Sr.next=12;break;case 29:Sr.next=34;break;case 31:Sr.prev=31,Sr.t1=Sr.catch(10),nt.e(Sr.t1);case 34:return Sr.prev=34,nt.f(),Sr.finish(34);case 37:if(pi=B.filter(function(Oa){return Oa._shouldAllowMigration}),Y._shouldAllowMigration&&pi.length){Sr.next=40;break}return Sr.abrupt("return",new _(Y,g,P));case 40:if(Y=pi[0],!Ye){Sr.next=44;break}return Sr.next=44,Y._set(ue,Ye.toJSON());case 44:return Sr.next=46,Promise.all(I.map(function(){var Oa=(0,j.Z)(M().mark(function Rl(zo){return M().wrap(function(Da){for(;;)switch(Da.prev=Da.next){case 0:if(zo===Y){Da.next=8;break}return Da.prev=1,Da.next=4,zo._remove(ue);case 4:Da.next=8;break;case 6:Da.prev=6,Da.t0=Da.catch(1);case 8:case"end":return Da.stop()}},Rl,null,[[1,6]])}));return function(Rl){return Oa.apply(this,arguments)}}()));case 46:return Sr.abrupt("return",new _(Y,g,P));case 47:case"end":return Sr.stop()}},k,null,[[10,31,34,37],[14,25]])}));return function p(k,g){return y.apply(this,arguments)}}()}]),_;var y}();function ni(_){var y=_.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(Mi(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(Ci(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(ri(y))return"Blackberry";if(Ia(y))return"Webos";if(hi(y))return"Safari";if((y.includes("chrome/")||Rr(y))&&!y.includes("edge/"))return"Chrome";if(Zi(y))return"Android";var k=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==k?void 0:k.length)?k[1]:"Other"}function Ci(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return/firefox\//i.test(_)}function hi(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)(),y=_.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Rr(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return/crios\//i.test(_)}function Mi(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return/iemobile/i.test(_)}function Zi(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return/android/i.test(_)}function ri(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return/blackberry/i.test(_)}function Ia(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return/webos/i.test(_)}function Qa(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return/iphone|ipad|ipod/i.test(_)}function nu(){var y,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return Qa(_)&&!!(null===(y=window.navigator)||void 0===y?void 0:y.standalone)}function Za(){return(0,ve.w1)()&&10===document.documentMode}function _r(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return Qa(_)||Zi(_)||Ia(_)||ri(_)||/windows phone/i.test(_)||Mi(_)}function Ii(_){var p,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(_){case"Browser":p=ni((0,ve.z$)());break;case"Worker":p="".concat(ni((0,ve.z$)()),"-").concat(_);break;default:p=_}var k=y.length?y.join(","):"FirebaseCore-web";return"".concat(p,"/","JsCore","/").concat(qe.SDK_VERSION,"/").concat(k)}var fn=function(){function _(y,p,k){(0,z.Z)(this,_),this.app=y,this.heartbeatServiceProvider=p,this.config=k,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new er(this),this.idTokenSubscription=new er(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=k.sdkClientVersion}return(0,H.Z)(_,[{key:"_initializeWithPersistence",value:function(p,k){var g=this;return k&&(this._popupRedirectResolver=ft(k)),this._initializationPromise=this.queue((0,j.Z)(M().mark(function I(){var P,B;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(!g._deleted){ue.next=2;break}return ue.abrupt("return");case 2:return ue.next=4,Hr.create(g,p);case 4:if(g.persistenceManager=ue.sent,!g._deleted){ue.next=7;break}return ue.abrupt("return");case 7:if(!(null===(P=g._popupRedirectResolver)||void 0===P?void 0:P._shouldInitProactively)){ue.next=15;break}return ue.prev=8,ue.next=11,g._popupRedirectResolver._initialize(g);case 11:ue.next=15;break;case 13:ue.prev=13,ue.t0=ue.catch(8);case 15:return ue.next=17,g.initializeCurrentUser(k);case 17:if(g.lastNotifiedUid=(null===(B=g.currentUser)||void 0===B?void 0:B.uid)||null,!g._deleted){ue.next=20;break}return ue.abrupt("return");case 20:g._isInitialized=!0;case 21:case"end":return ue.stop()}},I,null,[[8,13]])}))),this._initializationPromise}},{key:"_onStorageEvent",value:(y=(0,j.Z)(M().mark(function k(){var g;return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!this._deleted){P.next=2;break}return P.abrupt("return");case 2:return P.next=4,this.assertedPersistence.getCurrentUser();case 4:if(g=P.sent,this.currentUser||g){P.next=7;break}return P.abrupt("return");case 7:if(!this.currentUser||!g||this.currentUser.uid!==g.uid){P.next=12;break}return this._currentUser._assign(g),P.next=11,this.currentUser.getIdToken();case 11:return P.abrupt("return");case 12:return P.next=14,this._updateCurrentUser(g);case 14:case"end":return P.stop()}},k,this)})),function p(){return y.apply(this,arguments)})},{key:"initializeCurrentUser",value:function(){var y=(0,j.Z)(M().mark(function k(g){var I,P,B,Y,ue;return M().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return nt.next=2,this.assertedPersistence.getCurrentUser();case 2:if(P=nt.sent,!g||!this.config.authDomain){nt.next=12;break}return nt.next=6,this.getOrInitRedirectPersistenceManager();case 6:return B=null===(I=this.redirectUser)||void 0===I?void 0:I._redirectEventId,Y=null==P?void 0:P._redirectEventId,nt.next=10,this.tryRedirectSignIn(g);case 10:ue=nt.sent,(!B||B===Y)&&(null==ue?void 0:ue.user)&&(P=ue.user);case 12:if(P){nt.next=14;break}return nt.abrupt("return",this.directlySetCurrentUser(null));case 14:if(P._redirectEventId){nt.next=16;break}return nt.abrupt("return",this.reloadAndSetCurrentUserOrClear(P));case 16:return Ze(this._popupRedirectResolver,this,"argument-error"),nt.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==P._redirectEventId){nt.next=21;break}return nt.abrupt("return",this.directlySetCurrentUser(P));case 21:return nt.abrupt("return",this.reloadAndSetCurrentUserOrClear(P));case 22:case"end":return nt.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var y=(0,j.Z)(M().mark(function k(g){var I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return I=null,B.prev=1,B.next=4,this._popupRedirectResolver._completeRedirectFn(this,g,!0);case 4:I=B.sent,B.next=11;break;case 7:return B.prev=7,B.t0=B.catch(1),B.next=11,this._setRedirectUser(null);case 11:return B.abrupt("return",I);case 12:case"end":return B.stop()}},k,this,[[1,7]])}));return function p(k){return y.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var y=(0,j.Z)(M().mark(function k(g){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.prev=0,P.next=3,zt(g);case 3:P.next=9;break;case 5:if(P.prev=5,P.t0=P.catch(0),P.t0.code==="auth/".concat("network-request-failed")){P.next=9;break}return P.abrupt("return",this.directlySetCurrentUser(null));case 9:return P.abrupt("return",this.directlySetCurrentUser(g));case 10:case"end":return P.stop()}},k,this,[[0,5]])}));return function p(k){return y.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function Yr(){if("undefined"==typeof navigator)return null;var _=navigator;return _.languages&&_.languages[0]||_.language||null}()}},{key:"_delete",value:function(){var y=(0,j.Z)(M().mark(function k(){return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:this._deleted=!0;case 1:case"end":return I.stop()}},k,this)}));return function p(){return y.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var y=(0,j.Z)(M().mark(function k(g){var I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return(I=g?(0,ve.m9)(g):null)&&Ze(I.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),B.abrupt("return",this._updateCurrentUser(I&&I._clone(this)));case 3:case"end":return B.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var y=(0,j.Z)(M().mark(function k(g){var I=this;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!this._deleted){B.next=2;break}return B.abrupt("return");case 2:return g&&Ze(this.tenantId===g.tenantId,this,"tenant-id-mismatch"),B.abrupt("return",this.queue((0,j.Z)(M().mark(function Y(){return M().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.next=2,I.directlySetCurrentUser(g);case 2:I.notifyAuthListeners();case 3:case"end":return Ye.stop()}},Y)}))));case 4:case"end":return B.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"signOut",value:function(){var y=(0,j.Z)(M().mark(function k(){return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){I.next=3;break}return I.next=3,this._setRedirectUser(null);case 3:return I.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return I.stop()}},k,this)}));return function p(){return y.apply(this,arguments)}}()},{key:"setPersistence",value:function(p){var k=this;return this.queue((0,j.Z)(M().mark(function g(){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,k.assertedPersistence.setPersistence(ft(p));case 2:case"end":return P.stop()}},g)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(p){this._errorFactory=new ve.LL("auth","Firebase",p())}},{key:"onAuthStateChanged",value:function(p,k,g){return this.registerStateListener(this.authStateSubscription,p,k,g)}},{key:"onIdTokenChanged",value:function(p,k,g){return this.registerStateListener(this.idTokenSubscription,p,k,g)}},{key:"toJSON",value:function(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}},{key:"_setRedirectUser",value:function(){var y=(0,j.Z)(M().mark(function k(g,I){var P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,this.getOrInitRedirectPersistenceManager(I);case 2:return P=Y.sent,Y.abrupt("return",null===g?P.removeCurrentUser():P.setCurrentUser(g));case 4:case"end":return Y.stop()}},k,this)}));return function p(k,g){return y.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var y=(0,j.Z)(M().mark(function k(g){var I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(this.redirectPersistenceManager){B.next=9;break}return Ze(I=g&&ft(g)||this._popupRedirectResolver,this,"argument-error"),B.next=5,Hr.create(this,[ft(I._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=B.sent,B.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=B.sent;case 9:return B.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return B.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var y=(0,j.Z)(M().mark(function k(g){var I,P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!this._isInitialized){Y.next=3;break}return Y.next=3,this.queue((0,j.Z)(M().mark(function ue(){return M().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:case"end":return nt.stop()}},ue)})));case 3:if((null===(I=this._currentUser)||void 0===I?void 0:I._redirectEventId)!==g){Y.next=5;break}return Y.abrupt("return",this._currentUser);case 5:if((null===(P=this.redirectUser)||void 0===P?void 0:P._redirectEventId)!==g){Y.next=7;break}return Y.abrupt("return",this.redirectUser);case 7:return Y.abrupt("return",null);case 8:case"end":return Y.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var y=(0,j.Z)(M().mark(function k(g){var I=this;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(g!==this.currentUser){B.next=2;break}return B.abrupt("return",this.queue((0,j.Z)(M().mark(function Y(){return M().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.abrupt("return",I.directlySetCurrentUser(g));case 1:case"end":return Ye.stop()}},Y)}))));case 2:case"end":return B.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(p){p===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var p,k;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var g=null!==(k=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==k?k:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(p,k,g,I){var P=this;if(this._deleted)return function(){};var B="function"==typeof k?k:k.next.bind(k),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return Ze(Y,this,"internal-error"),Y.then(function(){return B(P.currentUser)}),"function"==typeof k?p.addObserver(k,g,I):p.addObserver(k)}},{key:"directlySetCurrentUser",value:function(){var y=(0,j.Z)(M().mark(function k(g){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(this.currentUser&&this.currentUser!==g&&(this._currentUser._stopProactiveRefresh(),g&&this.isProactiveRefreshEnabled&&g._startProactiveRefresh()),this.currentUser=g,!g){P.next=7;break}return P.next=5,this.assertedPersistence.setCurrentUser(g);case 5:P.next=9;break;case 7:return P.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return P.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"queue",value:function(p){return this.operations=this.operations.then(p,p),this.operations}},{key:"assertedPersistence",get:function(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Ii(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var y=(0,j.Z)(M().mark(function k(){var g,I,P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return I=(0,fe.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(I["X-Firebase-gmpid"]=this.app.options.appId),Y.next=4,null===(g=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();case 4:return(P=Y.sent)&&(I["X-Firebase-Client"]=P),Y.abrupt("return",I);case 7:case"end":return Y.stop()}},k,this)}));return function p(){return y.apply(this,arguments)}}()}]),_;var y}();function Dn(_){return(0,ve.m9)(_)}var er=function(){function _(y){var p=this;(0,z.Z)(this,_),this.auth=y,this.observer=null,this.addObserver=(0,ve.ne)(function(k){return p.observer=k})}return(0,H.Z)(_,[{key:"next",get:function(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),_}();function oa(_){var y=_.indexOf(":");return y<0?"":_.substr(0,y+1)}function ys(_){if(!_)return null;var y=Number(_);return isNaN(y)?null:y}var Ui=function(){function _(y,p){(0,z.Z)(this,_),this.providerId=y,this.signInMethod=p}return(0,H.Z)(_,[{key:"toJSON",value:function(){return Kt("not implemented")}},{key:"_getIdTokenResponse",value:function(p){return Kt("not implemented")}},{key:"_linkToIdToken",value:function(p,k){return Kt("not implemented")}},{key:"_getReauthenticationResolver",value:function(p){return Kt("not implemented")}}]),_}();function $i(_,y){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Lr(y,"POST","/v1/accounts:resetPassword",cr(y,p)));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function Ua(_,y){return di.apply(this,arguments)}function di(){return(di=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Lr(y,"POST","/v1/accounts:update",p));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function _a(_,y){return la.apply(this,arguments)}function la(){return(la=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Lr(y,"POST","/v1/accounts:update",cr(y,p)));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function mi(_,y){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Xr(y,"POST","/v1/accounts:signInWithPassword",cr(y,p)));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function qi(_,y){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Lr(y,"POST","/v1/accounts:sendOobCode",cr(y,p)));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function Gr(_,y){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",qi(y,p));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function Vu(_,y){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",qi(y,p));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function Br(_,y){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",qi(y,p));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function Ms(_,y){return cs.apply(this,arguments)}function cs(){return(cs=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",qi(y,p));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function ze(_,y){return ut.apply(this,arguments)}function ut(){return(ut=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Xr(y,"POST","/v1/accounts:signInWithEmailLink",cr(y,p)));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function yt(_,y){return It.apply(this,arguments)}function It(){return(It=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Xr(y,"POST","/v1/accounts:signInWithEmailLink",cr(y,p)));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}var St=function(_){(0,Ee.Z)(p,_);var k,y=(0,Te.Z)(p);function p(k,g,I){var P,B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,z.Z)(this,p),(P=y.call(this,"password",I))._email=k,P._password=g,P._tenantId=B,P}return(0,H.Z)(p,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:(k=(0,j.Z)(M().mark(function I(P){return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:Y.t0=this.signInMethod,Y.next="password"===Y.t0?3:"emailLink"===Y.t0?4:5;break;case 3:return Y.abrupt("return",mi(P,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return Y.abrupt("return",ze(P,{email:this._email,oobCode:this._password}));case 5:te(P,"internal-error");case 6:case"end":return Y.stop()}},I,this)})),function g(I){return k.apply(this,arguments)})},{key:"_linkToIdToken",value:function(){var k=(0,j.Z)(M().mark(function I(P,B){return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:ue.t0=this.signInMethod,ue.next="password"===ue.t0?3:"emailLink"===ue.t0?4:5;break;case 3:return ue.abrupt("return",Ua(P,{idToken:B,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return ue.abrupt("return",yt(P,{idToken:B,email:this._email,oobCode:this._password}));case 5:te(P,"internal-error");case 6:case"end":return ue.stop()}},I,this)}));return function g(I,P){return k.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(g){return this._getIdTokenResponse(g)}}],[{key:"_fromEmailAndPassword",value:function(g,I){return new p(g,I,"password")}},{key:"_fromEmailAndCode",value:function(g,I){var P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new p(g,I,"emailLink",P)}},{key:"fromJSON",value:function(g){var I="string"==typeof g?JSON.parse(g):g;if((null==I?void 0:I.email)&&(null==I?void 0:I.password)){if("password"===I.signInMethod)return this._fromEmailAndPassword(I.email,I.password);if("emailLink"===I.signInMethod)return this._fromEmailAndCode(I.email,I.password,I.tenantId)}return null}}]),p}(Ui);function At(_,y){return ln.apply(this,arguments)}function ln(){return(ln=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Xr(y,"POST","/v1/accounts:signInWithIdp",cr(y,p)));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}var Nr=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(){var k;return(0,z.Z)(this,p),(k=y.apply(this,arguments)).pendingToken=null,k}return(0,H.Z)(p,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(g){return At(g,this.buildRequest())}},{key:"_linkToIdToken",value:function(g,I){var P=this.buildRequest();return P.idToken=I,At(g,P)}},{key:"_getReauthenticationResolver",value:function(g){var I=this.buildRequest();return I.autoCreate=!1,At(g,I)}},{key:"buildRequest",value:function(){var g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{var I={};this.idToken&&(I.id_token=this.idToken),this.accessToken&&(I.access_token=this.accessToken),this.secret&&(I.oauth_token_secret=this.secret),I.providerId=this.providerId,this.nonce&&!this.pendingToken&&(I.nonce=this.nonce),g.postBody=(0,ve.xO)(I)}return g}}],[{key:"_fromParams",value:function(g){var I=new p(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(I.idToken=g.idToken),g.accessToken&&(I.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(I.nonce=g.nonce),g.pendingToken&&(I.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(I.accessToken=g.oauthToken,I.secret=g.oauthTokenSecret):te("argument-error"),I}},{key:"fromJSON",value:function(g){var I="string"==typeof g?JSON.parse(g):g,P=I.providerId,B=I.signInMethod,Y=(0,wt._T)(I,["providerId","signInMethod"]);if(!P||!B)return null;var ue=new p(P,B);return ue.idToken=Y.idToken||void 0,ue.accessToken=Y.accessToken||void 0,ue.secret=Y.secret,ue.nonce=Y.nonce,ue.pendingToken=Y.pendingToken||null,ue}}]),p}(Ui);function yi(_,y){return ai.apply(this,arguments)}function ai(){return(ai=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Lr(y,"POST","/v1/accounts:sendVerificationCode",cr(y,p)));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function Va(){return(Va=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Xr(y,"POST","/v1/accounts:signInWithPhoneNumber",cr(y,p)));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function wa(){return(wa=(0,j.Z)(M().mark(function _(y,p){var k;return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Xr(y,"POST","/v1/accounts:signInWithPhoneNumber",cr(y,p));case 2:if(!(k=I.sent).temporaryProof){I.next=5;break}throw tn(y,"account-exists-with-different-credential",k);case 5:return I.abrupt("return",k);case 6:case"end":return I.stop()}},_)}))).apply(this,arguments)}var xr=(0,fe.Z)({},"USER_NOT_FOUND","user-not-found");function si(){return(si=(0,j.Z)(M().mark(function _(y,p){var k;return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return k=Object.assign(Object.assign({},p),{operation:"REAUTH"}),I.abrupt("return",Xr(y,"POST","/v1/accounts:signInWithPhoneNumber",cr(y,k),xr));case 2:case"end":return I.stop()}},_)}))).apply(this,arguments)}var xu=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(k){var g;return(0,z.Z)(this,p),(g=y.call(this,"phone","phone")).params=k,g}return(0,H.Z)(p,[{key:"_getIdTokenResponse",value:function(g){return function wr(_,y){return Va.apply(this,arguments)}(g,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(g,I){return function Bn(_,y){return wa.apply(this,arguments)}(g,Object.assign({idToken:I},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(g){return function uo(_,y){return si.apply(this,arguments)}(g,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var g=this.params,I=g.temporaryProof,P=g.phoneNumber;return I&&P?{temporaryProof:I,phoneNumber:P}:{sessionInfo:g.verificationId,code:g.verificationCode}}},{key:"toJSON",value:function(){var g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}}],[{key:"_fromVerification",value:function(g,I){return new p({verificationId:g,verificationCode:I})}},{key:"_fromTokenResponse",value:function(g,I){return new p({phoneNumber:g,temporaryProof:I})}},{key:"fromJSON",value:function(g){"string"==typeof g&&(g=JSON.parse(g));var P=g.verificationId,B=g.verificationCode,Y=g.phoneNumber,ue=g.temporaryProof;return B||P||Y||ue?new p({verificationId:P,verificationCode:B,phoneNumber:Y,temporaryProof:ue}):null}}]),p}(Ui),Po=function(){function _(y){(0,z.Z)(this,_);var p,k,g,I,P,B,Y=(0,ve.zd)((0,ve.pd)(y)),ue=null!==(p=Y.apiKey)&&void 0!==p?p:null,Ye=null!==(k=Y.oobCode)&&void 0!==k?k:null,nt=function Os(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(g=Y.mode)&&void 0!==g?g:null);Ze(ue&&Ye&&nt,"argument-error"),this.apiKey=ue,this.operation=nt,this.code=Ye,this.continueUrl=null!==(I=Y.continueUrl)&&void 0!==I?I:null,this.languageCode=null!==(P=Y.languageCode)&&void 0!==P?P:null,this.tenantId=null!==(B=Y.tenantId)&&void 0!==B?B:null}return(0,H.Z)(_,null,[{key:"parseLink",value:function(p){var k=function ru(_){var y=(0,ve.zd)((0,ve.pd)(_)).link,p=y?(0,ve.zd)((0,ve.pd)(y)).deep_link_id:null,k=(0,ve.zd)((0,ve.pd)(_)).deep_link_id;return(k?(0,ve.zd)((0,ve.pd)(k)).link:null)||k||p||y||_}(p);try{return new _(k)}catch(g){return null}}}]),_}(),iu=function(){var _=function(){function y(){(0,z.Z)(this,y),this.providerId=y.PROVIDER_ID}return(0,H.Z)(y,null,[{key:"credential",value:function(k,g){return St._fromEmailAndPassword(k,g)}},{key:"credentialWithLink",value:function(k,g){var I=Po.parseLink(g);return Ze(I,"argument-error"),St._fromEmailAndCode(k,I.code,I.tenantId)}}]),y}();return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_}(),ki=function(){function _(y){(0,z.Z)(this,_),this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}return(0,H.Z)(_,[{key:"setDefaultLanguage",value:function(p){this.defaultLanguageCode=p}},{key:"setCustomParameters",value:function(p){return this.customParameters=p,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),_}(),ca=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(){var k;return(0,z.Z)(this,p),(k=y.apply(this,arguments)).scopes=[],k}return(0,H.Z)(p,[{key:"addScope",value:function(g){return this.scopes.includes(g)||this.scopes.push(g),this}},{key:"getScopes",value:function(){return(0,Ve.Z)(this.scopes)}}]),p}(ki),Tu=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(){return(0,z.Z)(this,p),y.apply(this,arguments)}return(0,H.Z)(p,[{key:"credential",value:function(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}},{key:"_credential",value:function(g){return Ze(g.idToken||g.accessToken,"argument-error"),Nr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(g){var I="string"==typeof g?JSON.parse(g):g;return Ze("providerId"in I&&"signInMethod"in I,"argument-error"),Nr._fromParams(I)}},{key:"credentialFromResult",value:function(g){return p.oauthCredentialFromTaggedObject(g)}},{key:"credentialFromError",value:function(g){return p.oauthCredentialFromTaggedObject(g.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(g){var I=g._tokenResponse;if(!I)return null;var P=I.oauthIdToken,B=I.oauthAccessToken,ue=I.pendingToken,Ye=I.nonce,nt=I.providerId;if(!B&&!I.oauthTokenSecret&&!P&&!ue||!nt)return null;try{return new p(nt)._credential({idToken:P,accessToken:B,nonce:Ye,pendingToken:ue})}catch(cn){return null}}}]),p}(ca),Yi=function(){var _=function(y){(0,Ee.Z)(k,y);var p=(0,Te.Z)(k);function k(){return(0,z.Z)(this,k),p.call(this,"facebook.com")}return(0,H.Z)(k,null,[{key:"credential",value:function(I){return Nr._fromParams({providerId:k.PROVIDER_ID,signInMethod:k.FACEBOOK_SIGN_IN_METHOD,accessToken:I})}},{key:"credentialFromResult",value:function(I){return k.credentialFromTaggedObject(I)}},{key:"credentialFromError",value:function(I){return k.credentialFromTaggedObject(I.customData||{})}},{key:"credentialFromTaggedObject",value:function(I){var P=I._tokenResponse;if(!P||!("oauthAccessToken"in P)||!P.oauthAccessToken)return null;try{return k.credential(P.oauthAccessToken)}catch(B){return null}}}]),k}(ca);return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_}(),Ea=function(){var _=function(y){(0,Ee.Z)(k,y);var p=(0,Te.Z)(k);function k(){var g;return(0,z.Z)(this,k),(g=p.call(this,"google.com")).addScope("profile"),g}return(0,H.Z)(k,null,[{key:"credential",value:function(I,P){return Nr._fromParams({providerId:k.PROVIDER_ID,signInMethod:k.GOOGLE_SIGN_IN_METHOD,idToken:I,accessToken:P})}},{key:"credentialFromResult",value:function(I){return k.credentialFromTaggedObject(I)}},{key:"credentialFromError",value:function(I){return k.credentialFromTaggedObject(I.customData||{})}},{key:"credentialFromTaggedObject",value:function(I){var P=I._tokenResponse;if(!P)return null;var B=P.oauthIdToken,Y=P.oauthAccessToken;if(!B&&!Y)return null;try{return k.credential(B,Y)}catch(ue){return null}}}]),k}(ca);return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_}(),oo=function(){var _=function(y){(0,Ee.Z)(k,y);var p=(0,Te.Z)(k);function k(){return(0,z.Z)(this,k),p.call(this,"github.com")}return(0,H.Z)(k,null,[{key:"credential",value:function(I){return Nr._fromParams({providerId:k.PROVIDER_ID,signInMethod:k.GITHUB_SIGN_IN_METHOD,accessToken:I})}},{key:"credentialFromResult",value:function(I){return k.credentialFromTaggedObject(I)}},{key:"credentialFromError",value:function(I){return k.credentialFromTaggedObject(I.customData||{})}},{key:"credentialFromTaggedObject",value:function(I){var P=I._tokenResponse;if(!P||!("oauthAccessToken"in P)||!P.oauthAccessToken)return null;try{return k.credential(P.oauthAccessToken)}catch(B){return null}}}]),k}(ca);return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_}(),ju=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(k,g){var I;return(0,z.Z)(this,p),(I=y.call(this,k,k)).pendingToken=g,I}return(0,H.Z)(p,[{key:"_getIdTokenResponse",value:function(g){return At(g,this.buildRequest())}},{key:"_linkToIdToken",value:function(g,I){var P=this.buildRequest();return P.idToken=I,At(g,P)}},{key:"_getReauthenticationResolver",value:function(g){var I=this.buildRequest();return I.autoCreate=!1,At(g,I)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(g){var I="string"==typeof g?JSON.parse(g):g,P=I.providerId,B=I.signInMethod,Y=I.pendingToken;return P&&B&&Y&&P===B?new p(P,Y):null}},{key:"_create",value:function(g,I){return new p(g,I)}}]),p}(Ui),uu=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(k){return(0,z.Z)(this,p),Ze(k.startsWith("saml."),"argument-error"),y.call(this,k)}return(0,H.Z)(p,null,[{key:"credentialFromResult",value:function(g){return p.samlCredentialFromTaggedObject(g)}},{key:"credentialFromError",value:function(g){return p.samlCredentialFromTaggedObject(g.customData||{})}},{key:"credentialFromJSON",value:function(g){var I=ju.fromJSON(g);return Ze(I,"argument-error"),I}},{key:"samlCredentialFromTaggedObject",value:function(g){var I=g._tokenResponse;if(!I)return null;var P=I.pendingToken,B=I.providerId;if(!P||!B)return null;try{return ju._create(B,P)}catch(Y){return null}}}]),p}(ki),ks=function(){var _=function(y){(0,Ee.Z)(k,y);var p=(0,Te.Z)(k);function k(){return(0,z.Z)(this,k),p.call(this,"twitter.com")}return(0,H.Z)(k,null,[{key:"credential",value:function(I,P){return Nr._fromParams({providerId:k.PROVIDER_ID,signInMethod:k.TWITTER_SIGN_IN_METHOD,oauthToken:I,oauthTokenSecret:P})}},{key:"credentialFromResult",value:function(I){return k.credentialFromTaggedObject(I)}},{key:"credentialFromError",value:function(I){return k.credentialFromTaggedObject(I.customData||{})}},{key:"credentialFromTaggedObject",value:function(I){var P=I._tokenResponse;if(!P)return null;var B=P.oauthAccessToken,Y=P.oauthTokenSecret;if(!B||!Y)return null;try{return k.credential(B,Y)}catch(ue){return null}}}]),k}(ca);return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_}();function Vi(_,y){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Xr(y,"POST","/v1/accounts:signUp",cr(y,p)));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}var xa=function(){function _(y){(0,z.Z)(this,_),this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}return(0,H.Z)(_,null,[{key:"_fromIdTokenResponse",value:(y=(0,j.Z)(M().mark(function k(g,I,P){var B,Y,ue,Ye,nt=arguments;return M().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return B=nt.length>3&&void 0!==nt[3]&&nt[3],Vt.next=3,Dt._fromIdTokenResponse(g,P,B);case 3:return Y=Vt.sent,ue=$(P),Ye=new _({user:Y,providerId:ue,_tokenResponse:P,operationType:I}),Vt.abrupt("return",Ye);case 7:case"end":return Vt.stop()}},k)})),function p(k,g,I){return y.apply(this,arguments)})},{key:"_forOperation",value:function(){var y=(0,j.Z)(M().mark(function k(g,I,P){var B;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,g._updateTokensIfNecessary(P,!0);case 2:return B=$(P),ue.abrupt("return",new _({user:g,providerId:B,_tokenResponse:P,operationType:I}));case 4:case"end":return ue.stop()}},k)}));return function p(k,g,I){return y.apply(this,arguments)}}()}]),_;var y}();function $(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function se(){return(se=(0,j.Z)(M().mark(function _(y){var p,k,g,I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return k=Dn(y),B.next=3,k._initializationPromise;case 3:if(!(null===(p=k.currentUser)||void 0===p?void 0:p.isAnonymous)){B.next=5;break}return B.abrupt("return",new xa({user:k.currentUser,providerId:null,operationType:"signIn"}));case 5:return B.next=7,Vi(k,{returnSecureToken:!0});case 7:return g=B.sent,B.next=10,xa._fromIdTokenResponse(k,"signIn",g,!0);case 10:return I=B.sent,B.next=13,k._updateCurrentUser(I.user);case 13:return B.abrupt("return",I);case 14:case"end":return B.stop()}},_)}))).apply(this,arguments)}var ie=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(k,g,I,P){var B,Y;return(0,z.Z)(this,p),(B=y.call(this,g.code,g.message)).operationType=I,B.user=P,Object.setPrototypeOf((0,et.Z)(B),p.prototype),B.customData={appName:k.name,tenantId:null!==(Y=k.tenantId)&&void 0!==Y?Y:void 0,_serverResponse:g.customData._serverResponse,operationType:I},B}return(0,H.Z)(p,null,[{key:"_fromErrorAndOperation",value:function(g,I,P,B){return new p(g,I,P,B)}}]),p}(ve.ZR);function _e(_,y,p,k){return("reauthenticate"===y?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(function(I){throw I.code==="auth/".concat("multi-factor-auth-required")?ie._fromErrorAndOperation(_,I,y,k):I})}function Ae(_){return new Set(_.map(function(y){return y.providerId}).filter(function(y){return!!y}))}function mt(_,y){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,j.Z)(M().mark(function _(y,p){var k,P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return k=(0,ve.m9)(y),Y.next=3,Cn(!0,k,p);case 3:return Y.t0=_n,Y.t1=k.auth,Y.next=7,k.getIdToken();case 7:return Y.t2=Y.sent,Y.t3=[p],Y.t4={idToken:Y.t2,deleteProvider:Y.t3},Y.next=12,(0,Y.t0)(Y.t1,Y.t4);case 12:return P=Ae(Y.sent.providerUserInfo||[]),k.providerData=k.providerData.filter(function(ue){return P.has(ue.providerId)}),P.has("phone")||(k.phoneNumber=null),Y.next=19,k.auth._persistUserIfCurrent(k);case 19:return Y.abrupt("return",k);case 20:case"end":return Y.stop()}},_)}))).apply(this,arguments)}function Nn(_,y){return En.apply(this,arguments)}function En(){return En=(0,j.Z)(M().mark(function _(y,p){var k,I=arguments;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return k=I.length>2&&void 0!==I[2]&&I[2],B.t0=Ur,B.t1=y,B.t2=p,B.t3=y.auth,B.next=7,y.getIdToken();case 7:return B.t4=B.sent,B.t5=B.t2._linkToIdToken.call(B.t2,B.t3,B.t4),B.t6=k,B.next=12,(0,B.t0)(B.t1,B.t5,B.t6);case 12:return B.abrupt("return",xa._forOperation(y,"link",B.sent));case 14:case"end":return B.stop()}},_)})),En.apply(this,arguments)}function Cn(_,y,p){return xn.apply(this,arguments)}function xn(){return(xn=(0,j.Z)(M().mark(function _(y,p,k){var g,I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,zt(p);case 2:g=Ae(p.providerData),I=!1===y?"provider-already-linked":"no-such-provider",Ze(g.has(k)===y,p.auth,I);case 5:case"end":return B.stop()}},_)}))).apply(this,arguments)}function ui(_,y){return Qr.apply(this,arguments)}function Qr(){return Qr=(0,j.Z)(M().mark(function _(y,p){var k,g,I,P,B,ue=arguments;return M().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return k=ue.length>2&&void 0!==ue[2]&&ue[2],g=y.auth,I="reauthenticate",nt.prev=3,nt.next=6,Ur(y,_e(g,I,p,y),k);case 6:return Ze((P=nt.sent).idToken,g,"internal-error"),Ze(B=Fi(P.idToken),g,"internal-error"),Ze(y.uid===B.sub,g,"user-mismatch"),nt.abrupt("return",xa._forOperation(y,I,P));case 15:throw nt.prev=15,nt.t0=nt.catch(3),(null==nt.t0?void 0:nt.t0.code)==="auth/".concat("user-not-found")&&te(g,"user-mismatch"),nt.t0;case 19:case"end":return nt.stop()}},_,null,[[3,15]])})),Qr.apply(this,arguments)}function oi(_,y){return ir.apply(this,arguments)}function ir(){return ir=(0,j.Z)(M().mark(function _(y,p){var k,g,I,P,B=arguments;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return k=B.length>2&&void 0!==B[2]&&B[2],g="signIn",ue.next=4,_e(y,g,p);case 4:return I=ue.sent,ue.next=7,xa._fromIdTokenResponse(y,g,I);case 7:if(P=ue.sent,k){ue.next=11;break}return ue.next=11,y._updateCurrentUser(P.user);case 11:return ue.abrupt("return",P);case 12:case"end":return ue.stop()}},_)})),ir.apply(this,arguments)}function Si(_,y){return vr.apply(this,arguments)}function vr(){return(vr=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",oi(Dn(y),p));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function li(_,y){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,j.Z)(M().mark(function _(y,p){var k;return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return k=(0,ve.m9)(y),I.next=3,Cn(!1,k,p.providerId);case 3:return I.abrupt("return",Nn(k,p));case 4:case"end":return I.stop()}},_)}))).apply(this,arguments)}function ba(_,y){return ar.apply(this,arguments)}function ar(){return(ar=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",ui((0,ve.m9)(y),p));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function ja(_,y){return lo.apply(this,arguments)}function lo(){return(lo=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Xr(y,"POST","/v1/accounts:signInWithCustomToken",cr(y,p)));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function Kn(){return(Kn=(0,j.Z)(M().mark(function _(y,p){var k,g,I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return k=Dn(y),B.next=3,ja(k,{token:p,returnSecureToken:!0});case 3:return g=B.sent,B.next=6,xa._fromIdTokenResponse(k,"signIn",g);case 6:return I=B.sent,B.next=9,k._updateCurrentUser(I.user);case 9:return B.abrupt("return",I);case 10:case"end":return B.stop()}},_)}))).apply(this,arguments)}var Du=function(){function _(y,p){(0,z.Z)(this,_),this.factorId=y,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}return(0,H.Z)(_,null,[{key:"_fromServerResponse",value:function(p,k){return"phoneInfo"in k?fo._fromServerResponse(p,k):te(p,"internal-error")}}]),_}(),fo=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(k){var g;return(0,z.Z)(this,p),(g=y.call(this,"phone",k)).phoneNumber=k.phoneInfo,g}return(0,H.Z)(p,null,[{key:"_fromServerResponse",value:function(g,I){return new p(I)}}]),p}(Du);function Ha(_,y,p){var k;Ze((null===(k=p.url)||void 0===k?void 0:k.length)>0,_,"invalid-continue-uri"),Ze(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),y.continueUrl=p.url,y.dynamicLinkDomain=p.dynamicLinkDomain,y.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Ze(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),y.iOSBundleId=p.iOS.bundleId),p.android&&(Ze(p.android.packageName.length>0,_,"missing-android-pkg-name"),y.androidInstallApp=p.android.installApp,y.androidMinimumVersionCode=p.android.minimumVersion,y.androidPackageName=p.android.packageName)}function Cu(){return(Cu=(0,j.Z)(M().mark(function _(y,p,k){var g,I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return g=(0,ve.m9)(y),I={requestType:"PASSWORD_RESET",email:p},k&&Ha(g,I,k),B.next=5,Vu(g,I);case 5:case"end":return B.stop()}},_)}))).apply(this,arguments)}function Xa(){return(Xa=(0,j.Z)(M().mark(function _(y,p,k){return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,$i((0,ve.m9)(y),{oobCode:p,newPassword:k});case 2:case"end":return I.stop()}},_)}))).apply(this,arguments)}function pr(){return(pr=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,_a((0,ve.m9)(y),{oobCode:p});case 2:case"end":return g.stop()}},_)}))).apply(this,arguments)}function Mo(_,y){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,j.Z)(M().mark(function _(y,p){var k,g,I,P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return k=(0,ve.m9)(y),Y.next=3,$i(k,{oobCode:p});case 3:Ze(I=(g=Y.sent).requestType,k,"internal-error"),Y.t0=I,Y.next="EMAIL_SIGNIN"===Y.t0?9:"VERIFY_AND_CHANGE_EMAIL"===Y.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===Y.t0?12:13;break;case 9:return Y.abrupt("break",14);case 10:return Ze(g.newEmail,k,"internal-error"),Y.abrupt("break",14);case 12:Ze(g.mfaInfo,k,"internal-error");case 13:Ze(g.email,k,"internal-error");case 14:return P=null,g.mfaInfo&&(P=Du._fromServerResponse(Dn(k),g.mfaInfo)),Y.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:P},operation:I});case 17:case"end":return Y.stop()}},_)}))).apply(this,arguments)}function ou(){return(ou=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,Mo((0,ve.m9)(y),p);case 2:return P.abrupt("return",P.sent.data.email);case 5:case"end":return P.stop()}},_)}))).apply(this,arguments)}function es(_,y,p){return Su.apply(this,arguments)}function Su(){return(Su=(0,j.Z)(M().mark(function _(y,p,k){var g,I,P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return g=Dn(y),Y.next=3,Vi(g,{returnSecureToken:!0,email:p,password:k});case 3:return I=Y.sent,Y.next=6,xa._fromIdTokenResponse(g,"signIn",I);case 6:return P=Y.sent,Y.next=9,g._updateCurrentUser(P.user);case 9:return Y.abrupt("return",P);case 10:case"end":return Y.stop()}},_)}))).apply(this,arguments)}function zu(){return(zu=(0,j.Z)(M().mark(function _(y,p,k){var g,I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return g=(0,ve.m9)(y),I={requestType:"EMAIL_SIGNIN",email:p},Ze(k.handleCodeInApp,g,"argument-error"),k&&Ha(g,I,k),B.next=6,Br(g,I);case 6:case"end":return B.stop()}},_)}))).apply(this,arguments)}function Ji(){return(Ji=(0,j.Z)(M().mark(function _(y,p,k){var g,I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return g=(0,ve.m9)(y),Ze((I=iu.credentialWithLink(p,k||Xt()))._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),B.abrupt("return",Si(g,I));case 4:case"end":return B.stop()}},_)}))).apply(this,arguments)}function ts(_,y){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Lr(y,"POST","/v1/accounts:createAuthUri",cr(y,p)));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function Sa(){return(Sa=(0,j.Z)(M().mark(function _(y,p){var k,g;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return k=qn()?Xt():"http://localhost",g={identifier:p,continueUri:k},Y.next=4,ts((0,ve.m9)(y),g);case 4:return Y.abrupt("return",Y.sent.signinMethods||[]);case 7:case"end":return Y.stop()}},_)}))).apply(this,arguments)}function Zs(){return(Zs=(0,j.Z)(M().mark(function _(y,p){var k,I;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return k=(0,ve.m9)(y),ue.next=3,y.getIdToken();case 3:return I={requestType:"VERIFY_EMAIL",idToken:ue.sent},p&&Ha(k.auth,I,p),ue.next=8,Gr(k.auth,I);case 8:if(ue.sent.email===y.email){ue.next=13;break}return ue.next=13,y.reload();case 13:case"end":return ue.stop()}},_)}))).apply(this,arguments)}function _l(){return(_l=(0,j.Z)(M().mark(function _(y,p,k){var g,P;return M().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return g=(0,ve.m9)(y),Ye.next=3,y.getIdToken();case 3:return P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:Ye.sent,newEmail:p},k&&Ha(g.auth,P,k),Ye.next=8,Ms(g.auth,P);case 8:if(Ye.sent.email===y.email){Ye.next=13;break}return Ye.next=13,y.reload();case 13:case"end":return Ye.stop()}},_)}))).apply(this,arguments)}function ci(_,y){return lu.apply(this,arguments)}function lu(){return(lu=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Lr(y,"POST","/v1/accounts:update",p));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function Ku(){return(Ku=(0,j.Z)(M().mark(function _(y,p){var k,g,I,B,Y,ue;return M().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(g=p.photoURL,void 0!==(k=p.displayName)||void 0!==g){nt.next=3;break}return nt.abrupt("return");case 3:return I=(0,ve.m9)(y),nt.next=6,I.getIdToken();case 6:return B={idToken:nt.sent,displayName:k,photoUrl:g,returnSecureToken:!0},nt.next=10,Ur(I,ci(I.auth,B));case 10:return I.displayName=(Y=nt.sent).displayName||null,I.photoURL=Y.photoUrl||null,(ue=I.providerData.find(function(cn){return"password"===cn.providerId}))&&(ue.displayName=I.displayName,ue.photoURL=I.photoURL),nt.next=17,I._updateTokensIfNecessary(Y);case 17:case"end":return nt.stop()}},_)}))).apply(this,arguments)}function Ga(_,y,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,j.Z)(M().mark(function _(y,p,k){var g,P,B;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return g=y.auth,ue.next=3,y.getIdToken();case 3:return P={idToken:ue.sent,returnSecureToken:!0},p&&(P.email=p),k&&(P.password=k),ue.next=9,Ur(y,Ua(g,P));case 9:return B=ue.sent,ue.next=12,y._updateTokensIfNecessary(B,!0);case 12:case"end":return ue.stop()}},_)}))).apply(this,arguments)}var za=(0,H.Z)(function _(y,p){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,z.Z)(this,_),this.isNewUser=y,this.providerId=p,this.profile=k}),fu=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(k,g,I,P){var B;return(0,z.Z)(this,p),(B=y.call(this,k,g,I)).username=P,B}return(0,H.Z)(p)}(za),_i=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(k,g){return(0,z.Z)(this,p),y.call(this,k,"facebook.com",g)}return(0,H.Z)(p)}(za),wl=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(k,g){return(0,z.Z)(this,p),y.call(this,k,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}return(0,H.Z)(p)}(fu),vo=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(k,g){return(0,z.Z)(this,p),y.call(this,k,"google.com",g)}return(0,H.Z)(p)}(za),Xi=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(k,g,I){return(0,z.Z)(this,p),y.call(this,k,"twitter.com",g,I)}return(0,H.Z)(p)}(fu);function ns(_){var p=_._tokenResponse;return _.user.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function $u(_){var y,p;if(!_)return null;var k=_.providerId,g=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},I=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!k&&(null==_?void 0:_.idToken)){var P=null===(p=null===(y=Fi(_.idToken))||void 0===y?void 0:y.firebase)||void 0===p?void 0:p.sign_in_provider;if(P)return new za(I,"anonymous"!==P&&"custom"!==P?P:null)}if(!k)return null;switch(k){case"facebook.com":return new _i(I,g);case"github.com":return new wl(I,g);case"google.com":return new vo(I,g);case"twitter.com":return new Xi(I,g,_.screenName||null);case"custom":case"anonymous":return new za(I,null);default:return new za(I,k,g)}}(p)}var _s=function(){function _(y,p){(0,z.Z)(this,_),this.type=y,this.credential=p}return(0,H.Z)(_,[{key:"toJSON",value:function(){return{multiFactorSession:(0,fe.Z)({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(p){return new _("enroll",p)}},{key:"_fromMfaPendingCredential",value:function(p){return new _("signin",p)}},{key:"fromJSON",value:function(p){var k,g;if(null==p?void 0:p.multiFactorSession){if(null===(k=p.multiFactorSession)||void 0===k?void 0:k.pendingCredential)return _._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(g=p.multiFactorSession)||void 0===g?void 0:g.idToken)return _._fromIdtoken(p.multiFactorSession.idToken)}return null}}]),_}(),go=function(){function _(y,p,k){(0,z.Z)(this,_),this.session=y,this.hints=p,this.signInResolver=k}return(0,H.Z)(_,[{key:"resolveSignIn",value:(y=(0,j.Z)(M().mark(function k(g){return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",this.signInResolver(g));case 2:case"end":return B.stop()}},k,this)})),function p(k){return y.apply(this,arguments)})}],[{key:"_fromError",value:function(p,k){var g=Dn(p),I=k.customData._serverResponse,P=(I.mfaInfo||[]).map(function(Y){return Du._fromServerResponse(g,Y)});Ze(I.mfaPendingCredential,g,"internal-error");var B=_s._fromMfaPendingCredential(I.mfaPendingCredential);return new _(B,P,function(){var Y=(0,j.Z)(M().mark(function ue(Ye){var nt,cn,Vt;return M().wrap(function(an){for(;;)switch(an.prev=an.next){case 0:return an.next=2,Ye._process(g,B);case 2:nt=an.sent,delete I.mfaInfo,delete I.mfaPendingCredential,cn=Object.assign(Object.assign({},I),{idToken:nt.idToken,refreshToken:nt.refreshToken}),an.t0=k.operationType,an.next="signIn"===an.t0?9:"reauthenticate"===an.t0?15:17;break;case 9:return an.next=11,xa._fromIdTokenResponse(g,k.operationType,cn);case 11:return Vt=an.sent,an.next=14,g._updateCurrentUser(Vt.user);case 14:return an.abrupt("return",Vt);case 15:return Ze(k.user,g,"internal-error"),an.abrupt("return",xa._forOperation(k.user,k.operationType,cn));case 17:te(g,"internal-error");case 18:case"end":return an.stop()}},ue)}));return function(ue){return Y.apply(this,arguments)}}())}}]),_;var y}();function hu(_,y){return Lr(_,"POST","/v2/accounts/mfaEnrollment:start",cr(_,y))}function Bs(_,y){return Lr(_,"POST","/v2/accounts/mfaEnrollment:withdraw",cr(_,y))}var Vs=function(){function _(y){var p=this;(0,z.Z)(this,_),this.user=y,this.enrolledFactors=[],y._onReload(function(k){k.mfaInfo&&(p.enrolledFactors=k.mfaInfo.map(function(g){return Du._fromServerResponse(y.auth,g)}))})}return(0,H.Z)(_,[{key:"getSession",value:(y=(0,j.Z)(M().mark(function k(){return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.t0=_s,I.next=3,this.user.getIdToken();case 3:return I.t1=I.sent,I.abrupt("return",I.t0._fromIdtoken.call(I.t0,I.t1));case 5:case"end":return I.stop()}},k,this)})),function p(){return y.apply(this,arguments)})},{key:"enroll",value:function(){var y=(0,j.Z)(M().mark(function k(g,I){var P,B,Y;return M().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return P=g,Ye.next=3,this.getSession();case 3:return B=Ye.sent,Ye.next=6,Ur(this.user,P._process(this.user.auth,B,I));case 6:return Y=Ye.sent,Ye.next=9,this.user._updateTokensIfNecessary(Y);case 9:return Ye.abrupt("return",this.user.reload());case 10:case"end":return Ye.stop()}},k,this)}));return function p(k,g){return y.apply(this,arguments)}}()},{key:"unenroll",value:function(){var y=(0,j.Z)(M().mark(function k(g){var I,P,B;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return I="string"==typeof g?g:g.uid,ue.next=3,this.user.getIdToken();case 3:return P=ue.sent,ue.next=6,Ur(this.user,Bs(this.user.auth,{idToken:P,mfaEnrollmentId:I}));case 6:return B=ue.sent,this.enrolledFactors=this.enrolledFactors.filter(function(Ye){return Ye.uid!==I}),ue.next=10,this.user._updateTokensIfNecessary(B);case 10:return ue.prev=10,ue.next=13,this.user.reload();case 13:ue.next=19;break;case 15:if(ue.prev=15,ue.t0=ue.catch(10),ue.t0.code==="auth/".concat("user-token-expired")){ue.next=19;break}throw ue.t0;case 19:case"end":return ue.stop()}},k,this,[[10,15]])}));return function p(k){return y.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(p){return new _(p)}}]),_;var y}(),qu=new WeakMap,aa="__sak",$s=function(){function _(y,p){(0,z.Z)(this,_),this.storageRetriever=y,this.type=p}return(0,H.Z)(_,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(aa,"1"),this.storage.removeItem(aa),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}},{key:"_set",value:function(p,k){return this.storage.setItem(p,JSON.stringify(k)),Promise.resolve()}},{key:"_get",value:function(p){var k=this.storage.getItem(p);return Promise.resolve(k?JSON.parse(k):null)}},{key:"_remove",value:function(p){return this.storage.removeItem(p),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),_}(),Yu=function(){var _=function(y){(0,Ee.Z)(k,y);var g,p=(0,Te.Z)(k);function k(){var g;return(0,z.Z)(this,k),(g=p.call(this,function(){return window.localStorage},"LOCAL")).boundEventHandler=function(I,P){return g.onStorageEvent(I,P)},g.listeners={},g.localCache={},g.pollTimer=null,g.safariLocalStorageNotSynced=function fa(){var _=(0,ve.z$)();return hi(_)||Qa(_)}()&&function Ks(){try{return!(!window||window===window.top)}catch(_){return!1}}(),g.fallbackToPolling=_r(),g._shouldAllowMigration=!0,g}return(0,H.Z)(k,[{key:"forAllChangedKeys",value:function(I){for(var P=0,B=Object.keys(this.listeners);P<B.length;P++){var Y=B[P],ue=this.storage.getItem(Y),Ye=this.localCache[Y];ue!==Ye&&I(Y,Ye,ue)}}},{key:"onStorageEvent",value:function(I){var P=this,B=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(I.key){var Y=I.key;if(B?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var ue=this.storage.getItem(Y);if(I.newValue!==ue)null!==I.newValue?this.storage.setItem(Y,I.newValue):this.storage.removeItem(Y);else if(this.localCache[Y]===I.newValue&&!B)return}var Ye=function(){var Vt=P.storage.getItem(Y);!B&&P.localCache[Y]===Vt||P.notifyListeners(Y,Vt)},nt=this.storage.getItem(Y);Za()&&nt!==I.newValue&&I.newValue!==I.oldValue?setTimeout(Ye,10):Ye()}else this.forAllChangedKeys(function(cn,Vt,rn){P.notifyListeners(cn,rn)})}},{key:"notifyListeners",value:function(I,P){this.localCache[I]=P;var B=this.listeners[I];if(B)for(var Y=0,ue=Array.from(B);Y<ue.length;Y++)(0,ue[Y])(P&&JSON.parse(P))}},{key:"startPolling",value:function(){var I=this;this.stopPolling(),this.pollTimer=setInterval(function(){I.forAllChangedKeys(function(P,B,Y){I.onStorageEvent(new StorageEvent("storage",{key:P,oldValue:B,newValue:Y}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(I,P){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[I]||(this.listeners[I]=new Set,this.localCache[I]=this.storage.getItem(I)),this.listeners[I].add(P)}},{key:"_removeListener",value:function(I,P){this.listeners[I]&&(this.listeners[I].delete(P),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:(g=(0,j.Z)(M().mark(function P(B,Y){return M().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.next=2,(0,F.Z)((0,ke.Z)(k.prototype),"_set",this).call(this,B,Y);case 2:this.localCache[B]=JSON.stringify(Y);case 3:case"end":return Ye.stop()}},P,this)})),function I(P,B){return g.apply(this,arguments)})},{key:"_get",value:function(){var g=(0,j.Z)(M().mark(function P(B){var Y;return M().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.next=2,(0,F.Z)((0,ke.Z)(k.prototype),"_get",this).call(this,B);case 2:return Y=Ye.sent,this.localCache[B]=JSON.stringify(Y),Ye.abrupt("return",Y);case 5:case"end":return Ye.stop()}},P,this)}));return function I(P){return g.apply(this,arguments)}}()},{key:"_remove",value:function(){var g=(0,j.Z)(M().mark(function P(B){return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(0,F.Z)((0,ke.Z)(k.prototype),"_remove",this).call(this,B);case 2:delete this.localCache[B];case 3:case"end":return ue.stop()}},P,this)}));return function I(P){return g.apply(this,arguments)}}()}]),k}($s);return _.type="LOCAL",_}(),wi=Yu,Ta=function(){var _=function(y){(0,Ee.Z)(k,y);var p=(0,Te.Z)(k);function k(){return(0,z.Z)(this,k),p.call(this,function(){return window.sessionStorage},"SESSION")}return(0,H.Z)(k,[{key:"_addListener",value:function(I,P){}},{key:"_removeListener",value:function(I,P){}}]),k}($s);return _.type="SESSION",_}();function xs(_){return Promise.all(_.map(function(){var y=(0,j.Z)(M().mark(function p(k){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.prev=0,P.next=3,k;case 3:return P.abrupt("return",{fulfilled:!0,value:P.sent});case 7:return P.prev=7,P.t0=P.catch(0),P.abrupt("return",{fulfilled:!1,reason:P.t0});case 10:case"end":return P.stop()}},p,null,[[0,7]])}));return function(p){return y.apply(this,arguments)}}()))}var qs=function(){var _=function(){function y(p){(0,z.Z)(this,y),this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return(0,H.Z)(y,[{key:"isListeningto",value:function(k){return this.eventTarget===k}},{key:"handleEvent",value:(p=(0,j.Z)(M().mark(function g(I){var P,B,Y,ue,Ye,nt,cn;return M().wrap(function(an){for(;;)switch(an.prev=an.next){case 0:if(Y=(B=(P=I).data).eventId,Ye=B.data,null==(nt=this.handlersMap[ue=B.eventType])?void 0:nt.size){an.next=5;break}return an.abrupt("return");case 5:return P.ports[0].postMessage({status:"ack",eventId:Y,eventType:ue}),cn=Array.from(nt).map(function(){var pi=(0,j.Z)(M().mark(function Ri(Ma){return M().wrap(function(Oa){for(;;)switch(Oa.prev=Oa.next){case 0:return Oa.abrupt("return",Ma(P.origin,Ye));case 1:case"end":return Oa.stop()}},Ri)}));return function(Ri){return pi.apply(this,arguments)}}()),an.next=9,xs(cn);case 9:P.ports[0].postMessage({status:"done",eventId:Y,eventType:ue,response:an.sent});case 11:case"end":return an.stop()}},g,this)})),function k(g){return p.apply(this,arguments)})},{key:"_subscribe",value:function(k,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[k]||(this.handlersMap[k]=new Set),this.handlersMap[k].add(g)}},{key:"_unsubscribe",value:function(k,g){this.handlersMap[k]&&g&&this.handlersMap[k].delete(g),(!g||0===this.handlersMap[k].size)&&delete this.handlersMap[k],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(k){var g=this.receivers.find(function(P){return P.isListeningto(k)});if(g)return g;var I=new y(k);return this.receivers.push(I),I}}]),y;var p}();return _.receivers=[],_}();function Ys(){for(var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,p="",k=0;k<y;k++)p+=Math.floor(10*Math.random());return _+p}var ws=function(){function _(y){(0,z.Z)(this,_),this.target=y,this.handlers=new Set}return(0,H.Z)(_,[{key:"removeMessageHandler",value:function(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}},{key:"_send",value:(y=(0,j.Z)(M().mark(function k(g,I){var B,Y,ue,Ye,P=this,nt=arguments;return M().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:if(B=nt.length>2&&void 0!==nt[2]?nt[2]:50,Y="undefined"!=typeof MessageChannel?new MessageChannel:null){Vt.next=4;break}throw new Error("connection_unavailable");case 4:return Vt.abrupt("return",new Promise(function(rn,an){var pi=Ys("",20);Y.port1.start();var Ri=setTimeout(function(){an(new Error("unsupported_event"))},B);P.handlers.add(Ye={messageChannel:Y,onMessage:function(Sr){var Oa=Sr;if(Oa.data.eventId===pi)switch(Oa.data.status){case"ack":clearTimeout(Ri),ue=setTimeout(function(){an(new Error("timeout"))},3e3);break;case"done":clearTimeout(ue),rn(Oa.data.response);break;default:clearTimeout(Ri),clearTimeout(ue),an(new Error("invalid_response"))}}}),Y.port1.addEventListener("message",Ye.onMessage),P.target.postMessage({eventType:g,eventId:pi,data:I},[Y.port2])}).finally(function(){Ye&&P.removeMessageHandler(Ye)}));case 5:case"end":return Vt.stop()}},k)})),function p(k,g){return y.apply(this,arguments)})}]),_;var y}();function zr(){return window}function fs(_){zr().location.href=_}function js(){return void 0!==zr().WorkerGlobalScope&&"function"==typeof zr().importScripts}function Qu(){return du.apply(this,arguments)}function du(){return(du=(0,j.Z)(M().mark(function _(){return M().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(null==navigator?void 0:navigator.serviceWorker){k.next=2;break}return k.abrupt("return",null);case 2:return k.prev=2,k.next=5,navigator.serviceWorker.ready;case 5:return k.abrupt("return",k.sent.active);case 9:return k.prev=9,k.t0=k.catch(2),k.abrupt("return",null);case 12:case"end":return k.stop()}},_,null,[[2,9]])}))).apply(this,arguments)}function mo(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}var Ei="firebaseLocalStorageDb",A="firebaseLocalStorage",U="fbase_key",C=function(){function _(y){(0,z.Z)(this,_),this.request=y}return(0,H.Z)(_,[{key:"toPromise",value:function(){var p=this;return new Promise(function(k,g){p.request.addEventListener("success",function(){k(p.request.result)}),p.request.addEventListener("error",function(){g(p.request.error)})})}}]),_}();function D(_,y){return _.transaction([A],y?"readwrite":"readonly").objectStore(A)}function N(){var _=indexedDB.deleteDatabase(Ei);return new C(_).toPromise()}function J(){var _=indexedDB.open(Ei,1);return new Promise(function(y,p){_.addEventListener("error",function(){p(_.error)}),_.addEventListener("upgradeneeded",function(){var k=_.result;try{k.createObjectStore(A,{keyPath:U})}catch(g){p(g)}}),_.addEventListener("success",(0,j.Z)(M().mark(function k(){var g;return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if((g=_.result).objectStoreNames.contains(A)){P.next=12;break}return g.close(),P.next=5,N();case 5:return P.t0=y,P.next=8,J();case 8:P.t1=P.sent,(0,P.t0)(P.t1),P.next=13;break;case 12:y(g);case 13:case"end":return P.stop()}},k)})))})}function oe(_,y,p){return pe.apply(this,arguments)}function pe(){return(pe=(0,j.Z)(M().mark(function _(y,p,k){var g,I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return I=D(y,!0).put(((0,fe.Z)(g={},U,p),(0,fe.Z)(g,"value",k),g)),B.abrupt("return",new C(I).toPromise());case 2:case"end":return B.stop()}},_)}))).apply(this,arguments)}function Ue(_,y){return He.apply(this,arguments)}function He(){return(He=(0,j.Z)(M().mark(function _(y,p){var k,g;return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return k=D(y,!1).get(p),P.next=3,new C(k).toPromise();case 3:return P.abrupt("return",void 0===(g=P.sent)?null:g.value);case 5:case"end":return P.stop()}},_)}))).apply(this,arguments)}function vt(_,y){var p=D(_,!0).delete(y);return new C(p).toPromise()}var Vn=function(){var _=function(){function y(){(0,z.Z)(this,y),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return(0,H.Z)(y,[{key:"_openDb",value:(p=(0,j.Z)(M().mark(function g(){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!this.db){P.next=2;break}return P.abrupt("return",this.db);case 2:return P.next=4,J();case 4:return this.db=P.sent,P.abrupt("return",this.db);case 6:case"end":return P.stop()}},g,this)})),function k(){return p.apply(this,arguments)})},{key:"_withRetries",value:function(){var p=(0,j.Z)(M().mark(function g(I){var P,B;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:P=0;case 1:return ue.prev=2,ue.next=5,this._openDb();case 5:return B=ue.sent,ue.next=8,I(B);case 8:return ue.abrupt("return",ue.sent);case 11:if(ue.prev=11,ue.t0=ue.catch(2),!(P++>3)){ue.next=15;break}throw ue.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:ue.next=1;break;case 18:case"end":return ue.stop()}},g,this,[[2,11]])}));return function k(g){return p.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var p=(0,j.Z)(M().mark(function g(){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",js()?this.initializeReceiver():this.initializeSender());case 1:case"end":return P.stop()}},g,this)}));return function k(){return p.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var p=(0,j.Z)(M().mark(function g(){var I=this;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:this.receiver=qs._getInstance(js()?self:null),this.receiver._subscribe("keyChanged",function(){var Y=(0,j.Z)(M().mark(function ue(Ye,nt){return M().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return rn.next=2,I._poll();case 2:return rn.abrupt("return",{keyProcessed:rn.sent.includes(nt.key)});case 4:case"end":return rn.stop()}},ue)}));return function(ue,Ye){return Y.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var Y=(0,j.Z)(M().mark(function ue(Ye,nt){return M().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return Vt.abrupt("return",["keyChanged"]);case 1:case"end":return Vt.stop()}},ue)}));return function(ue,Ye){return Y.apply(this,arguments)}}());case 3:case"end":return B.stop()}},g,this)}));return function k(){return p.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var p=(0,j.Z)(M().mark(function g(){var I,P,B;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,Qu();case 2:if(this.activeServiceWorker=ue.sent,this.activeServiceWorker){ue.next=5;break}return ue.abrupt("return");case 5:return this.sender=new ws(this.activeServiceWorker),ue.next=8,this.sender._send("ping",{},800);case 8:if(B=ue.sent){ue.next=11;break}return ue.abrupt("return");case 11:(null===(I=B[0])||void 0===I?void 0:I.fulfilled)&&(null===(P=B[0])||void 0===P?void 0:P.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return ue.stop()}},g,this)}));return function k(){return p.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var p=(0,j.Z)(M().mark(function g(I){return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(this.sender&&this.activeServiceWorker&&mo()===this.activeServiceWorker){B.next=2;break}return B.abrupt("return");case 2:return B.prev=2,B.next=5,this.sender._send("keyChanged",{key:I},this.serviceWorkerReceiverAvailable?800:50);case 5:B.next=9;break;case 7:B.prev=7,B.t0=B.catch(2);case 9:case"end":return B.stop()}},g,this,[[2,7]])}));return function k(g){return p.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var p=(0,j.Z)(M().mark(function g(){var I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(B.prev=0,indexedDB){B.next=3;break}return B.abrupt("return",!1);case 3:return B.next=5,J();case 5:return I=B.sent,B.next=8,oe(I,aa,"1");case 8:return B.next=10,vt(I,aa);case 10:return B.abrupt("return",!0);case 13:B.prev=13,B.t0=B.catch(0);case 15:return B.abrupt("return",!1);case 16:case"end":return B.stop()}},g,null,[[0,13]])}));return function k(){return p.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var p=(0,j.Z)(M().mark(function g(I){return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return this.pendingWrites++,B.prev=1,B.next=4,I();case 4:return B.prev=4,this.pendingWrites--,B.finish(4);case 7:case"end":return B.stop()}},g,this,[[1,,4,7]])}));return function k(g){return p.apply(this,arguments)}}()},{key:"_set",value:function(){var p=(0,j.Z)(M().mark(function g(I,P){var B=this;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.abrupt("return",this._withPendingWrite((0,j.Z)(M().mark(function Ye(){return M().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return cn.next=2,B._withRetries(function(Vt){return oe(Vt,I,P)});case 2:return B.localCache[I]=P,cn.abrupt("return",B.notifyServiceWorker(I));case 4:case"end":return cn.stop()}},Ye)}))));case 1:case"end":return ue.stop()}},g,this)}));return function k(g,I){return p.apply(this,arguments)}}()},{key:"_get",value:function(){var p=(0,j.Z)(M().mark(function g(I){var P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,this._withRetries(function(ue){return Ue(ue,I)});case 2:return this.localCache[I]=P=Y.sent,Y.abrupt("return",P);case 5:case"end":return Y.stop()}},g,this)}));return function k(g){return p.apply(this,arguments)}}()},{key:"_remove",value:function(){var p=(0,j.Z)(M().mark(function g(I){var P=this;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",this._withPendingWrite((0,j.Z)(M().mark(function ue(){return M().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return nt.next=2,P._withRetries(function(cn){return vt(cn,I)});case 2:return delete P.localCache[I],nt.abrupt("return",P.notifyServiceWorker(I));case 4:case"end":return nt.stop()}},ue)}))));case 1:case"end":return Y.stop()}},g,this)}));return function k(g){return p.apply(this,arguments)}}()},{key:"_poll",value:function(){var p=(0,j.Z)(M().mark(function g(){var I,P,B,Y,ue,Ye,nt,cn,Vt,rn,an;return M().wrap(function(Ri){for(;;)switch(Ri.prev=Ri.next){case 0:return Ri.next=2,this._withRetries(function(Ma){var Sr=D(Ma,!1).getAll();return new C(Sr).toPromise()});case 2:if(I=Ri.sent){Ri.next=5;break}return Ri.abrupt("return",[]);case 5:if(0===this.pendingWrites){Ri.next=7;break}return Ri.abrupt("return",[]);case 7:P=[],B=new Set,Y=(0,Je.Z)(I);try{for(Y.s();!(ue=Y.n()).done;)cn=(Ye=ue.value).value,B.add(nt=Ye.fbase_key),JSON.stringify(this.localCache[nt])!==JSON.stringify(cn)&&(this.notifyListeners(nt,cn),P.push(nt))}catch(Ma){Y.e(Ma)}finally{Y.f()}for(Vt=0,rn=Object.keys(this.localCache);Vt<rn.length;Vt++)this.localCache[an=rn[Vt]]&&!B.has(an)&&(this.notifyListeners(an,null),P.push(an));return Ri.abrupt("return",P);case 13:case"end":return Ri.stop()}},g,this)}));return function k(){return p.apply(this,arguments)}}()},{key:"notifyListeners",value:function(k,g){this.localCache[k]=g;var I=this.listeners[k];if(I)for(var P=0,B=Array.from(I);P<B.length;P++)(0,B[P])(g)}},{key:"startPolling",value:function(){var k=this;this.stopPolling(),this.pollTimer=setInterval((0,j.Z)(M().mark(function g(){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",k._poll());case 1:case"end":return P.stop()}},g)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(k,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[k]||(this.listeners[k]=new Set,this._get(k)),this.listeners[k].add(g)}},{key:"_removeListener",value:function(k,g){this.listeners[k]&&(this.listeners[k].delete(g),0===this.listeners[k].size&&delete this.listeners[k]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),y;var p}();return _.type="LOCAL",_}(),sr=Vn;function xi(_,y){return Lr(_,"POST","/v2/accounts/mfaSignIn:start",cr(_,y))}function ha(_){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,j.Z)(M().mark(function _(y){return M().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,Lr(y,"GET","/v1/recaptchaParams");case 2:if(k.t0=k.sent.recaptchaSiteKey,k.t0){k.next=5;break}k.t0="";case 5:return k.abrupt("return",k.t0);case 6:case"end":return k.stop()}},_)}))).apply(this,arguments)}function Es(_){return new Promise(function(y,p){var k=document.createElement("script");k.setAttribute("src",_),k.onload=y,k.onerror=function(g){var I=Tt("internal-error");I.customData=g,p(I)},k.type="text/javascript",k.charset="UTF-8",function vu(){var _,y;return null!==(y=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==y?y:document}().appendChild(k)})}function ei(_){return"__".concat(_).concat(Math.floor(1e6*Math.random()))}var Gs=1e12,xl=function(){function _(y){(0,z.Z)(this,_),this.auth=y,this.counter=Gs,this._widgets=new Map}return(0,H.Z)(_,[{key:"render",value:function(p,k){var g=this.counter;return this._widgets.set(g,new gr(p,this.auth.name,k||{})),this.counter++,g}},{key:"reset",value:function(p){var k,g=p||Gs;null===(k=this._widgets.get(g))||void 0===k||k.delete(),this._widgets.delete(g)}},{key:"getResponse",value:function(p){var k;return(null===(k=this._widgets.get(p||Gs))||void 0===k?void 0:k.getResponse())||""}},{key:"execute",value:(y=(0,j.Z)(M().mark(function k(g){var I;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return null===(I=this._widgets.get(g||Gs))||void 0===I||I.execute(),Y.abrupt("return","");case 3:case"end":return Y.stop()}},k,this)})),function p(k){return y.apply(this,arguments)})}]),_;var y}(),gr=function(){function _(y,p,k){var g=this;(0,z.Z)(this,_),this.params=k,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){g.execute()};var I="string"==typeof y?document.getElementById(y):y;Ze(I,"argument-error",{appName:p}),this.container=I,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return(0,H.Z)(_,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var p=this;this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(function(){p.responseToken=function El(_){for(var y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",k=0;k<_;k++)y.push(p.charAt(Math.floor(Math.random()*p.length)));return y.join("")}(50);var k=p.params,g=k.callback,I=k["expired-callback"];if(g)try{g(p.responseToken)}catch(P){}p.timerId=window.setTimeout(function(){if(p.timerId=null,p.responseToken=null,I)try{I()}catch(P){}p.isVisible&&p.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),_}(),jl=ei("rcb"),Er=new Ir(3e4,6e4),tr="https://www.google.com/recaptcha/api.js?",Ju=function(){function _(){(0,z.Z)(this,_),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!zr().grecaptcha}return(0,H.Z)(_,[{key:"load",value:function(p){var k=this,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ze(Xu(g),p,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(zr().grecaptcha):new Promise(function(I,P){var B=zr().setTimeout(function(){P(Tt(p,"network-request-failed"))},Er.get());zr()[jl]=function(){zr().clearTimeout(B),delete zr()[jl];var ue=zr().grecaptcha;if(ue){var Ye=ue.render;ue.render=function(nt,cn){var Vt=Ye(nt,cn);return k.counter++,Vt},k.hostLanguage=g,I(ue)}else P(Tt(p,"internal-error"))},Es("".concat(tr,"?").concat((0,ve.xO)({onload:jl,render:"explicit",hl:g}))).catch(function(){clearTimeout(B),P(Tt(p,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(p){return!!zr().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),_}();function Xu(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}var rl=function(){function _(){(0,z.Z)(this,_)}return(0,H.Z)(_,[{key:"load",value:(y=(0,j.Z)(M().mark(function k(g){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",new xl(g));case 1:case"end":return P.stop()}},k)})),function p(k){return y.apply(this,arguments)})},{key:"clearedOneInstance",value:function(){}}]),_;var y}(),Zo="recaptcha",Fr={theme:"light",type:"image"},Lc=function(){function _(y){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Fr),k=arguments.length>2?arguments[2]:void 0;(0,z.Z)(this,_),this.parameters=p,this.type=Zo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(k),this.isInvisible="invisible"===this.parameters.size,Ze("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var g="string"==typeof y?document.getElementById(y):y;Ze(g,this.auth,"argument-error"),this.container=g,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rl:new Ju,this.validateStartingState()}return(0,H.Z)(_,[{key:"verify",value:(y=(0,j.Z)(M().mark(function k(){var I,P,B,g=this;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return this.assertNotDestroyed(),ue.next=3,this.render();case 3:if(I=ue.sent,P=this.getAssertedRecaptcha(),!(B=P.getResponse(I))){ue.next=8;break}return ue.abrupt("return",B);case 8:return ue.abrupt("return",new Promise(function(Ye){g.tokenChangeListeners.add(function cn(Vt){!Vt||(g.tokenChangeListeners.delete(cn),Ye(Vt))}),g.isInvisible&&P.execute(I)}));case 9:case"end":return ue.stop()}},k,this)})),function p(){return y.apply(this,arguments)})},{key:"render",value:function(){var p=this;try{this.assertNotDestroyed()}catch(k){return Promise.reject(k)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(function(k){throw p.renderPromise=null,k})),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var p=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(k){p.container.removeChild(k)})}},{key:"validateStartingState",value:function(){Ze(!this.parameters.sitekey,this.auth,"argument-error"),Ze(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ze("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(p){var k=this;return function(g){if(k.tokenChangeListeners.forEach(function(P){return P(g)}),"function"==typeof p)p(g);else if("string"==typeof p){var I=zr()[p];"function"==typeof I&&I(g)}}}},{key:"assertNotDestroyed",value:function(){Ze(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var y=(0,j.Z)(M().mark(function k(){var g,I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.init();case 2:return this.widgetId||(g=this.container,this.isInvisible||(I=document.createElement("div"),g.appendChild(I),g=I),this.widgetId=this.getAssertedRecaptcha().render(g,this.parameters)),B.abrupt("return",this.widgetId);case 4:case"end":return B.stop()}},k,this)}));return function p(){return y.apply(this,arguments)}}()},{key:"init",value:function(){var y=(0,j.Z)(M().mark(function k(){var g;return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return Ze(qn()&&!js(),this.auth,"internal-error"),P.next=3,Ka();case 3:return P.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=P.sent,P.next=8,ha(this.auth);case 8:Ze(g=P.sent,this.auth,"internal-error"),this.parameters.sitekey=g;case 11:case"end":return P.stop()}},k,this)}));return function p(){return y.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Ze(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),_;var y}();function Ka(){var _=null;return new Promise(function(y){"complete"!==document.readyState?(_=function(){return y()},window.addEventListener("load",_)):y()}).catch(function(y){throw _&&window.removeEventListener("load",_),y})}var ko=function(){function _(y,p){(0,z.Z)(this,_),this.verificationId=y,this.onConfirmation=p}return(0,H.Z)(_,[{key:"confirm",value:function(p){var k=xu._fromVerification(this.verificationId,p);return this.onConfirmation(k)}}]),_}();function ta(){return(ta=(0,j.Z)(M().mark(function _(y,p,k){var g;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return g=Dn(y),B.next=3,is(g,p,(0,ve.m9)(k));case 3:return B.abrupt("return",new ko(B.sent,function(Y){return Si(g,Y)}));case 5:case"end":return B.stop()}},_)}))).apply(this,arguments)}function il(_,y,p){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,j.Z)(M().mark(function _(y,p,k){var g;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return g=(0,ve.m9)(y),B.next=3,Cn(!1,g,"phone");case 3:return B.next=5,is(g.auth,p,(0,ve.m9)(k));case 5:return B.abrupt("return",new ko(B.sent,function(Y){return li(g,Y)}));case 7:case"end":return B.stop()}},_)}))).apply(this,arguments)}function Hi(){return(Hi=(0,j.Z)(M().mark(function _(y,p,k){var g;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return g=(0,ve.m9)(y),B.next=3,is(g.auth,p,(0,ve.m9)(k));case 3:return B.abrupt("return",new ko(B.sent,function(Y){return ba(g,Y)}));case 5:case"end":return B.stop()}},_)}))).apply(this,arguments)}function is(_,y,p){return _o.apply(this,arguments)}function _o(){return(_o=(0,j.Z)(M().mark(function _(y,p,k){var g,I,P,B,ue;return M().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return rn.next=2,k.verify();case 2:if(I=rn.sent,rn.prev=3,Ze("string"==typeof I,y,"argument-error"),Ze(k.type===Zo,y,"argument-error"),!("session"in(P="string"==typeof p?{phoneNumber:p}:p))){rn.next=26;break}if(B=P.session,!("phoneNumber"in P)){rn.next=17;break}return Ze("enroll"===B.type,y,"internal-error"),rn.next=13,hu(y,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:I}});case 13:return rn.abrupt("return",rn.sent.phoneSessionInfo.sessionInfo);case 17:return Ze("signin"===B.type,y,"internal-error"),Ze(ue=(null===(g=P.multiFactorHint)||void 0===g?void 0:g.uid)||P.multiFactorUid,y,"missing-multi-factor-info"),rn.next=22,xi(y,{mfaPendingCredential:B.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:I}});case 22:return rn.abrupt("return",rn.sent.phoneResponseInfo.sessionInfo);case 24:rn.next=31;break;case 26:return rn.next=28,yi(y,{phoneNumber:P.phoneNumber,recaptchaToken:I});case 28:return rn.abrupt("return",rn.sent.sessionInfo);case 31:return rn.prev=31,k._reset(),rn.finish(31);case 34:case"end":return rn.stop()}},_,null,[[3,,31,34]])}))).apply(this,arguments)}function Uo(){return(Uo=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Nn((0,ve.m9)(y),p);case 2:case"end":return g.stop()}},_)}))).apply(this,arguments)}var bs=function(){var _=function(){function y(p){(0,z.Z)(this,y),this.providerId=y.PROVIDER_ID,this.auth=Dn(p)}return(0,H.Z)(y,[{key:"verifyPhoneNumber",value:function(k,g){return is(this.auth,k,(0,ve.m9)(g))}}],[{key:"credential",value:function(k,g){return xu._fromVerification(k,g)}},{key:"credentialFromResult",value:function(k){return y.credentialFromTaggedObject(k)}},{key:"credentialFromError",value:function(k){return y.credentialFromTaggedObject(k.customData||{})}},{key:"credentialFromTaggedObject",value:function(k){var g=k._tokenResponse;if(!g)return null;var I=g.phoneNumber,P=g.temporaryProof;return I&&P?xu._fromTokenResponse(I,P):null}}]),y}();return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_}();function hs(_,y){return y?ft(y):(Ze(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}var Ou=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(k){var g;return(0,z.Z)(this,p),(g=y.call(this,"custom","custom")).params=k,g}return(0,H.Z)(p,[{key:"_getIdTokenResponse",value:function(g){return At(g,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(g,I){return At(g,this._buildIdpRequest(I))}},{key:"_getReauthenticationResolver",value:function(g){return At(g,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(g){var I={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(I.idToken=g),I}}]),p}(Ui);function Hl(_){return oi(_.auth,new Ou(_),_.bypassAuthState)}function hn(_){var p=_.user;return Ze(p,_.auth,"internal-error"),ui(p,new Ou(_),_.bypassAuthState)}function Bo(_){return sa.apply(this,arguments)}function sa(){return(sa=(0,j.Z)(M().mark(function _(y){var k;return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return Ze(k=y.user,y.auth,"internal-error"),I.abrupt("return",Nn(k,new Ou(y),y.bypassAuthState));case 3:case"end":return I.stop()}},_)}))).apply(this,arguments)}var Ts=function(){function _(y,p,k,g){var I=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,z.Z)(this,_),this.auth=y,this.resolver=k,this.user=g,this.bypassAuthState=I,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}return(0,H.Z)(_,[{key:"execute",value:function(){var p=this;return new Promise(function(){var k=(0,j.Z)(M().mark(function g(I,P){return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return p.pendingPromise={resolve:I,reject:P},Y.prev=1,Y.next=4,p.resolver._initialize(p.auth);case 4:return p.eventManager=Y.sent,Y.next=7,p.onExecution();case 7:p.eventManager.registerConsumer(p),Y.next=13;break;case 10:Y.prev=10,Y.t0=Y.catch(1),p.reject(Y.t0);case 13:case"end":return Y.stop()}},g,null,[[1,10]])}));return function(g,I){return k.apply(this,arguments)}}())}},{key:"onAuthEvent",value:(y=(0,j.Z)(M().mark(function k(g){var I,P,B,Y,ue,Ye,nt;return M().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:if(I=g.urlResponse,P=g.sessionId,B=g.postBody,Y=g.tenantId,Ye=g.type,!(ue=g.error)){Vt.next=4;break}return this.reject(ue),Vt.abrupt("return");case 4:return nt={auth:this.auth,requestUri:I,sessionId:P,tenantId:Y||void 0,postBody:B||void 0,user:this.user,bypassAuthState:this.bypassAuthState},Vt.prev=5,Vt.t0=this,Vt.next=9,this.getIdpTask(Ye)(nt);case 9:Vt.t1=Vt.sent,Vt.t0.resolve.call(Vt.t0,Vt.t1),Vt.next=16;break;case 13:Vt.prev=13,Vt.t2=Vt.catch(5),this.reject(Vt.t2);case 16:case"end":return Vt.stop()}},k,this,[[5,13]])})),function p(k){return y.apply(this,arguments)})},{key:"onError",value:function(p){this.reject(p)}},{key:"getIdpTask",value:function(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Hl;case"linkViaPopup":case"linkViaRedirect":return Bo;case"reauthViaPopup":case"reauthViaRedirect":return hn;default:te(this.auth,"internal-error")}}},{key:"resolve",value:function(p){ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}},{key:"reject",value:function(p){ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),_;var y}(),ds=new Ir(2e3,1e4);function Gl(_,y,p){return pu.apply(this,arguments)}function pu(){return(pu=(0,j.Z)(M().mark(function _(y,p,k){var g,I,P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return g=Dn(y),kn(y,p,ki),I=hs(g,k),P=new al(g,"signInViaPopup",p,I),Y.abrupt("return",P.executeNotNull());case 5:case"end":return Y.stop()}},_)}))).apply(this,arguments)}function eo(){return(eo=(0,j.Z)(M().mark(function _(y,p,k){var g,I,P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return kn((g=(0,ve.m9)(y)).auth,p,ki),I=hs(g.auth,k),P=new al(g.auth,"reauthViaPopup",p,I,g),Y.abrupt("return",P.executeNotNull());case 5:case"end":return Y.stop()}},_)}))).apply(this,arguments)}function Nu(_,y,p){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,j.Z)(M().mark(function _(y,p,k){var g,I,P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return kn((g=(0,ve.m9)(y)).auth,p,ki),I=hs(g.auth,k),P=new al(g.auth,"linkViaPopup",p,I,g),Y.abrupt("return",P.executeNotNull());case 5:case"end":return Y.stop()}},_)}))).apply(this,arguments)}var al=function(){var _=function(y){(0,Ee.Z)(k,y);var g,p=(0,Te.Z)(k);function k(g,I,P,B,Y){var ue;return(0,z.Z)(this,k),(ue=p.call(this,g,I,B,Y)).provider=P,ue.authWindow=null,ue.pollId=null,k.currentPopupAction&&k.currentPopupAction.cancel(),k.currentPopupAction=(0,et.Z)(ue),ue}return(0,H.Z)(k,[{key:"executeNotNull",value:(g=(0,j.Z)(M().mark(function P(){var B;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,this.execute();case 2:return Ze(B=ue.sent,this.auth,"internal-error"),ue.abrupt("return",B);case 5:case"end":return ue.stop()}},P,this)})),function I(){return g.apply(this,arguments)})},{key:"onExecution",value:function(){var g=(0,j.Z)(M().mark(function P(){var Y,B=this;return M().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return ot(1===this.filter.length,"Popup operations only handle one event"),Y=Ys(),Ye.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],Y);case 4:this.authWindow=Ye.sent,this.authWindow.associatedEvent=Y,this.resolver._originValidation(this.auth).catch(function(nt){B.reject(nt)}),this.resolver._isIframeWebStorageSupported(this.auth,function(nt){nt||B.reject(Tt(B.auth,"web-storage-unsupported"))}),this.pollUserCancellation();case 9:case"end":return Ye.stop()}},P,this)}));return function I(){return g.apply(this,arguments)}}()},{key:"eventId",get:function(){var I;return(null===(I=this.authWindow)||void 0===I?void 0:I.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Tt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,k.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var I=this;!function B(){var Y,ue;I.pollId=(null===(ue=null===(Y=I.authWindow)||void 0===Y?void 0:Y.window)||void 0===ue?void 0:ue.closed)?window.setTimeout(function(){I.pollId=null,I.reject(Tt(I.auth,"popup-closed-by-user"))},2e3):window.setTimeout(B,ds.get())}()}}]),k}(Ts);return _.currentPopupAction=null,_}(),Ds=new Map,Eo=function(_){(0,Ee.Z)(p,_);var k,y=(0,Te.Z)(p);function p(k,g){var I,P=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,z.Z)(this,p),(I=y.call(this,k,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,P)).eventId=null,I}return(0,H.Z)(p,[{key:"execute",value:(k=(0,j.Z)(M().mark(function I(){var P,Y;return M().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(P=Ds.get(this.auth._key())){Ye.next=21;break}return Ye.prev=2,Ye.next=5,gu(this.resolver,this.auth);case 5:if(!Ye.sent){Ye.next=12;break}return Ye.next=9,(0,F.Z)((0,ke.Z)(p.prototype),"execute",this).call(this);case 9:Ye.t0=Ye.sent,Ye.next=13;break;case 12:Ye.t0=null;case 13:Y=Ye.t0,P=function(){return Promise.resolve(Y)},Ye.next=20;break;case 17:Ye.prev=17,Ye.t1=Ye.catch(2),P=function(){return Promise.reject(Ye.t1)};case 20:Ds.set(this.auth._key(),P);case 21:return this.bypassAuthState||Ds.set(this.auth._key(),function(){return Promise.resolve(null)}),Ye.abrupt("return",P());case 23:case"end":return Ye.stop()}},I,this,[[2,17]])})),function g(){return k.apply(this,arguments)})},{key:"onAuthEvent",value:function(){var k=(0,j.Z)(M().mark(function I(P){var B;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if("signInViaRedirect"!==P.type){ue.next=4;break}return ue.abrupt("return",(0,F.Z)((0,ke.Z)(p.prototype),"onAuthEvent",this).call(this,P));case 4:if("unknown"!==P.type){ue.next=7;break}return this.resolve(null),ue.abrupt("return");case 7:if(!P.eventId){ue.next=17;break}return ue.next=10,this.auth._redirectUserForId(P.eventId);case 10:if(!(B=ue.sent)){ue.next=16;break}return this.user=B,ue.abrupt("return",(0,F.Z)((0,ke.Z)(p.prototype),"onAuthEvent",this).call(this,P));case 16:this.resolve(null);case 17:case"end":return ue.stop()}},I,this)}));return function g(I){return k.apply(this,arguments)}}()},{key:"onExecution",value:function(){var k=(0,j.Z)(M().mark(function I(){return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:case"end":return B.stop()}},I)}));return function g(){return k.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),p}(Ts);function gu(_,y){return mu.apply(this,arguments)}function mu(){return(mu=(0,j.Z)(M().mark(function _(y,p){var k,g,I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return k=ps(p),g=vs(y),B.next=4,g._isAvailable();case 4:if(B.sent){B.next=6;break}return B.abrupt("return",!1);case 6:return B.next=8,g._get(k);case 8:return B.t0=B.sent,I="true"===B.t0,B.next=12,g._remove(k);case 12:return B.abrupt("return",I);case 13:case"end":return B.stop()}},_)}))).apply(this,arguments)}function sl(_,y){return to.apply(this,arguments)}function to(){return(to=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",vs(y)._set(ps(p),"true"));case 1:case"end":return g.stop()}},_)}))).apply(this,arguments)}function vs(_){return ft(_._redirectPersistence)}function ps(_){return nn("pendingRedirect",_.config.apiKey,_.name)}function G(_,y,p){return function W(_,y,p){return ee.apply(this,arguments)}(_,y,p)}function ee(){return(ee=(0,j.Z)(M().mark(function _(y,p,k){var g,I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return g=Dn(y),kn(y,p,ki),I=hs(g,k),B.next=5,sl(I,g);case 5:return B.abrupt("return",I._openRedirect(g,p,"signInViaRedirect"));case 6:case"end":return B.stop()}},_)}))).apply(this,arguments)}function ne(_,y,p){return function me(_,y,p){return ge.apply(this,arguments)}(_,y,p)}function ge(){return(ge=(0,j.Z)(M().mark(function _(y,p,k){var g,I;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return kn((g=(0,ve.m9)(y)).auth,p,ki),I=hs(g.auth,k),Y.next=5,sl(I,g.auth);case 5:return Y.next=7,fr(g);case 7:return Y.abrupt("return",I._openRedirect(g.auth,p,"reauthViaRedirect",Y.sent));case 9:case"end":return Y.stop()}},_)}))).apply(this,arguments)}function Re(_,y,p){return function Oe(_,y,p){return bt.apply(this,arguments)}(_,y,p)}function bt(){return(bt=(0,j.Z)(M().mark(function _(y,p,k){var g,I;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return kn((g=(0,ve.m9)(y)).auth,p,ki),I=hs(g.auth,k),Y.next=5,Cn(!1,g,p.providerId);case 5:return Y.next=7,sl(I,g.auth);case 7:return Y.next=9,fr(g);case 9:return Y.abrupt("return",I._openRedirect(g.auth,p,"linkViaRedirect",Y.sent));case 11:case"end":return Y.stop()}},_)}))).apply(this,arguments)}function Rt(_,y){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,j.Z)(M().mark(function _(y,p){return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Dn(y)._initializationPromise;case 2:return g.abrupt("return",Pt(y,p,!1));case 3:case"end":return g.stop()}},_)}))).apply(this,arguments)}function Pt(_,y){return bn.apply(this,arguments)}function bn(){return bn=(0,j.Z)(M().mark(function _(y,p){var k,g,I,P,B,Y=arguments;return M().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return k=Y.length>2&&void 0!==Y[2]&&Y[2],g=Dn(y),I=hs(g,p),P=new Eo(g,I,k),Ye.next=6,P.execute();case 6:if(!(B=Ye.sent)||k){Ye.next=13;break}return delete B.user._redirectEventId,Ye.next=11,g._persistUserIfCurrent(B.user);case 11:return Ye.next=13,g._setRedirectUser(null,p);case 13:return Ye.abrupt("return",B);case 14:case"end":return Ye.stop()}},_)})),bn.apply(this,arguments)}function fr(_){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,j.Z)(M().mark(function _(y){var p;return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return p=Ys("".concat(y.uid,":::")),y._redirectEventId=p,g.next=4,y.auth._setRedirectUser(y);case 4:return g.next=6,y.auth._persistUserIfCurrent(y);case 6:return g.abrupt("return",p);case 7:case"end":return g.stop()}},_)}))).apply(this,arguments)}var ur=function(){function _(y){(0,z.Z)(this,_),this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return(0,H.Z)(_,[{key:"registerConsumer",value:function(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(p){this.consumers.delete(p)}},{key:"onEvent",value:function(p){var k=this;if(this.hasEventBeenHandled(p))return!1;var g=!1;return this.consumers.forEach(function(I){k.isEventForConsumer(p,I)&&(g=!0,k.sendToConsumer(p,I),k.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Aa(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bi(_);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}},{key:"sendToConsumer",value:function(p,k){var g;if(p.error&&!bi(p)){var I=(null===(g=p.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";k.onError(Tt(this.auth,I))}else k.onAuthEvent(p)}},{key:"isEventForConsumer",value:function(p,k){var g=null===k.eventId||!!p.eventId&&p.eventId===k.eventId;return k.filter.includes(p.type)&&g}},{key:"hasEventBeenHandled",value:function(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nr(p))}},{key:"saveEventToCache",value:function(p){this.cachedEventUids.add(nr(p)),this.lastProcessedEventTime=Date.now()}}]),_}();function nr(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(function(y){return y}).join("-")}function bi(_){var p=_.error;return"unknown"===_.type&&(null==p?void 0:p.code)==="auth/".concat("no-auth-event")}function Cs(_){return Ai.apply(this,arguments)}function Ai(){return Ai=(0,j.Z)(M().mark(function _(y){var k=arguments;return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",Lr(y,"GET","/v1/projects",k.length>1&&void 0!==k[1]?k[1]:{}));case 2:case"end":return I.stop()}},_)})),Ai.apply(this,arguments)}var vf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ti=/^https?/;function no(){return(no=(0,j.Z)(M().mark(function _(y){var g,I,P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!y.config.emulator){Y.next=2;break}return Y.abrupt("return");case 2:return Y.next=4,Cs(y);case 4:g=(0,Je.Z)(Y.sent.authorizedDomains),Y.prev=7,g.s();case 9:if((I=g.n()).done){Y.next=20;break}if(P=I.value,Y.prev=11,!Fu(P)){Y.next=14;break}return Y.abrupt("return");case 14:Y.next=18;break;case 16:Y.prev=16,Y.t0=Y.catch(11);case 18:Y.next=9;break;case 20:Y.next=25;break;case 22:Y.prev=22,Y.t1=Y.catch(7),g.e(Y.t1);case 25:return Y.prev=25,g.f(),Y.finish(25);case 28:te(y,"unauthorized-domain");case 29:case"end":return Y.stop()}},_,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function Fu(_){var y=Xt(),p=new URL(y),k=p.protocol,g=p.hostname;if(_.startsWith("chrome-extension://")){var I=new URL(_);return""===I.hostname&&""===g?"chrome-extension:"===k&&_.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===k&&I.hostname===g}if(!ti.test(k))return!1;if(vf.test(_))return g===_;var P=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+P+"|"+P+")$","i").test(g)}var Wl=new Ir(3e4,6e4);function Fc(){var _=zr().___jsl;if(null==_?void 0:_.H)for(var y=0,p=Object.keys(_.H);y<p.length;y++){var k=p[y];if(_.H[k].r=_.H[k].r||[],_.H[k].L=_.H[k].L||[],_.H[k].r=(0,Ve.Z)(_.H[k].L),_.CP)for(var g=0;g<_.CP.length;g++)_.CP[g]=null}}var Kl=null;function yu(_){return Kl=Kl||function pf(_){return new Promise(function(y,p){var k,g,I;function P(){Fc(),gapi.load("gapi.iframes",{callback:function(){y(gapi.iframes.getContext())},ontimeout:function(){Fc(),p(Tt(_,"network-request-failed"))},timeout:Wl.get()})}if(null===(g=null===(k=zr().gapi)||void 0===k?void 0:k.iframes)||void 0===g?void 0:g.Iframe)y(gapi.iframes.getContext());else{if(!(null===(I=zr().gapi)||void 0===I?void 0:I.load)){var B=ei("iframefcb");return zr()[B]=function(){gapi.load?P():p(Tt(_,"network-request-failed"))},Es("https://apis.google.com/js/api.js?onload=".concat(B)).catch(function(Y){return p(Y)})}P()}}).catch(function(y){throw Kl=null,y})}(_),Kl}var Zc=new Ir(5e3,15e3),Tl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uc(_){var y=_.config;Ze(y.authDomain,_,"auth-domain-config-required");var p=y.emulator?yr(y,"emulator/auth/iframe"):"https://".concat(_.config.authDomain,"/").concat("__/auth/iframe"),k={apiKey:y.apiKey,appName:_.name,v:qe.SDK_VERSION},g=xo.get(_.config.apiHost);g&&(k.eid=g);var I=_._getFrameworks();return I.length&&(k.fw=I.join(",")),"".concat(p,"?").concat((0,ve.xO)(k).slice(1))}function Bc(_){return ol.apply(this,arguments)}function ol(){return ol=(0,j.Z)(M().mark(function _(y){var p,k;return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,yu(y);case 2:return p=I.sent,Ze(k=zr().gapi,y,"internal-error"),I.abrupt("return",p.open({where:document.body,url:Uc(y),messageHandlersFilter:k.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tl,dontclear:!0},function(P){return new Promise(function(){var B=(0,j.Z)(M().mark(function Y(ue,Ye){var nt,cn,Vt;return M().wrap(function(an){for(;;)switch(an.prev=an.next){case 0:return Vt=function(){zr().clearTimeout(cn),ue(P)},an.next=3,P.restyle({setHideOnLeave:!1});case 3:nt=Tt(y,"network-request-failed"),cn=zr().setTimeout(function(){Ye(nt)},Zc.get()),P.ping(Vt).then(Vt,function(){Ye(nt)});case 6:case"end":return an.stop()}},Y)}));return function(Y,ue){return B.apply(this,arguments)}}())}));case 6:case"end":return I.stop()}},_)})),ol.apply(this,arguments)}var Is={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cc="http://localhost",ql=function(){function _(y){(0,z.Z)(this,_),this.window=y,this.associatedEvent=null}return(0,H.Z)(_,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(p){}}}]),_}();function Kf(_,y,p){var k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,I=Math.max((window.screen.availHeight-g)/2,0).toString(),P=Math.max((window.screen.availWidth-k)/2,0).toString(),B="",Y=Object.assign(Object.assign({},Is),{width:k.toString(),height:g.toString(),top:I,left:P}),ue=(0,ve.z$)().toLowerCase();p&&(B=Rr(ue)?"_blank":p),Ci(ue)&&(y=y||cc,Y.scrollbars="yes");var Ye=Object.entries(Y).reduce(function(cn,Vt){var rn=(0,rt.Z)(Vt,2),an=rn[0],pi=rn[1];return"".concat(cn).concat(an,"=").concat(pi,",")},"");if(nu(ue)&&"_self"!==B)return gf(y||"",B),new ql(null);var nt=window.open(y||"",B,Ye);Ze(nt,_,"popup-blocked");try{nt.focus()}catch(cn){}return new ql(nt)}function gf(_,y){var p=document.createElement("a");p.href=_,p.target=y;var k=document.createEvent("MouseEvent");k.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(k)}function E(_,y,p,k,g,I){Ze(_.config.authDomain,_,"auth-domain-config-required"),Ze(_.config.apiKey,_,"invalid-api-key");var P={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:k,v:qe.SDK_VERSION,eventId:g};if(y instanceof ki){y.setDefaultLanguage(_.languageCode),P.providerId=y.providerId||"",(0,ve.xb)(y.getCustomParameters())||(P.customParameters=JSON.stringify(y.getCustomParameters()));for(var B=0,Y=Object.entries(I||{});B<Y.length;B++){var ue=(0,rt.Z)(Y[B],2);P[ue[0]]=ue[1]}}if(y instanceof ca){var cn=y.getScopes().filter(function(Ri){return""!==Ri});cn.length>0&&(P.scopes=cn.join(","))}_.tenantId&&(P.tid=_.tenantId);for(var Vt=P,rn=0,an=Object.keys(Vt);rn<an.length;rn++){var pi=an[rn];void 0===Vt[pi]&&delete Vt[pi]}return"".concat(function h(_){var y=_.config;return y.emulator?yr(y,"emulator/auth/handler"):"https://".concat(y.authDomain,"/").concat("__/auth/handler")}(_),"?").concat((0,ve.xO)(Vt).slice(1))}var m="webStorageSupport",R=function(){function _(){(0,z.Z)(this,_),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ta,this._completeRedirectFn=Pt}return(0,H.Z)(_,[{key:"_openPopup",value:(y=(0,j.Z)(M().mark(function k(g,I,P,B){var Y,ue;return M().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return ot(null===(Y=this.eventManagers[g._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()"),ue=E(g,I,P,Xt(),B),nt.abrupt("return",Kf(g,ue,Ys()));case 3:case"end":return nt.stop()}},k,this)})),function p(k,g,I,P){return y.apply(this,arguments)})},{key:"_openRedirect",value:function(){var y=(0,j.Z)(M().mark(function k(g,I,P,B){return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,this._originValidation(g);case 2:return fs(E(g,I,P,Xt(),B)),ue.abrupt("return",new Promise(function(){}));case 4:case"end":return ue.stop()}},k,this)}));return function p(k,g,I,P){return y.apply(this,arguments)}}()},{key:"_initialize",value:function(p){var k=this,g=p._key();if(this.eventManagers[g]){var I=this.eventManagers[g],P=I.manager,B=I.promise;return P?Promise.resolve(P):(ot(B,"If manager is not set, promise should be"),B)}var Y=this.initAndGetManager(p);return this.eventManagers[g]={promise:Y},Y.catch(function(){delete k.eventManagers[g]}),Y}},{key:"initAndGetManager",value:function(){var y=(0,j.Z)(M().mark(function k(g){var I,P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,Bc(g);case 2:return I=Y.sent,P=new ur(g),I.register("authEvent",function(ue){return Ze(null==ue?void 0:ue.authEvent,g,"invalid-auth-event"),{status:P.onEvent(ue.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[g._key()]={manager:P},this.iframes[g._key()]=I,Y.abrupt("return",P);case 8:case"end":return Y.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(p,k){this.iframes[p._key()].send(m,{type:m},function(I){var P,B=null===(P=null==I?void 0:I[0])||void 0===P?void 0:P[m];void 0!==B&&k(!!B),te(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(p){var k=p._key();return this.originValidationPromises[k]||(this.originValidationPromises[k]=function ul(_){return no.apply(this,arguments)}(p)),this.originValidationPromises[k]}},{key:"_shouldInitProactively",get:function(){return _r()||hi()||Qa()}}]),_;var y}(),V=R,he=function(_){(0,Ee.Z)(p,_);var y=(0,Te.Z)(p);function p(k){var g;return(0,z.Z)(this,p),(g=y.call(this,"phone")).credential=k,g}return(0,H.Z)(p,[{key:"_finalizeEnroll",value:function(g,I,P){return function Us(_,y){return Lr(_,"POST","/v2/accounts/mfaEnrollment:finalize",cr(_,y))}(g,{idToken:I,displayName:P,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(g,I){return function ea(_,y){return Lr(_,"POST","/v2/accounts/mfaSignIn:finalize",cr(_,y))}(g,{mfaPendingCredential:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(g){return new p(g)}}]),p}(function(){function _(y){(0,z.Z)(this,_),this.factorId=y}return(0,H.Z)(_,[{key:"_process",value:function(p,k,g){switch(k.type){case"enroll":return this._finalizeEnroll(p,k.credential,g);case"signin":return this._finalizeSignIn(p,k.credential);default:return Kt("unexpected MultiFactorSessionType")}}}]),_}()),Ie=function(){var _=function(){function y(){(0,z.Z)(this,y)}return(0,H.Z)(y,null,[{key:"assertion",value:function(k){return he._fromCredential(k)}}]),y}();return _.FACTOR_ID="phone",_}(),We="@firebase/auth",tt="0.19.11",Zt=function(){function _(y){(0,z.Z)(this,_),this.auth=y,this.internalListeners=new Map}return(0,H.Z)(_,[{key:"getUid",value:function(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}},{key:"getToken",value:(y=(0,j.Z)(M().mark(function k(g){return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return this.assertAuthConfigured(),B.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){B.next=5;break}return B.abrupt("return",null);case 5:return B.next=7,this.auth.currentUser.getIdToken(g);case 7:return B.abrupt("return",{accessToken:B.sent});case 9:case"end":return B.stop()}},k,this)})),function p(k){return y.apply(this,arguments)})},{key:"addAuthTokenListener",value:function(p){if(this.assertAuthConfigured(),!this.internalListeners.has(p)){var k=this.auth.onIdTokenChanged(function(g){var I;p((null===(I=g)||void 0===I?void 0:I.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,k),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(p){this.assertAuthConfigured();var k=this.internalListeners.get(p);!k||(this.internalListeners.delete(p),k(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),_;var y}();function $n(){return window}function br(_,y,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,j.Z)(M().mark(function _(y,p,k){var g,I,P,B,Y;return M().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return I=$n(),P=I.BuildInfo,ot(p.sessionId,"AuthEvent did not contain a session ID"),Ye.next=4,ro(p.sessionId);case 4:return B=Ye.sent,Y={},Qa()?Y.ibi=P.packageName:Zi()?Y.apn=P.packageName:te(y,"operation-not-supported-in-this-environment"),P.displayName&&(Y.appDisplayName=P.displayName),Y.sessionId=B,Ye.abrupt("return",E(y,k,p.type,void 0,null!==(g=p.eventId)&&void 0!==g?g:void 0,Y));case 10:case"end":return Ye.stop()}},_)}))).apply(this,arguments)}function Jn(){return(Jn=(0,j.Z)(M().mark(function _(y){var p,k,g;return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return p=$n(),k=p.BuildInfo,g={},Qa()?g.iosBundleId=k.packageName:Zi()?g.androidPackageName=k.packageName:te(y,"operation-not-supported-in-this-environment"),P.next=5,Cs(y,g);case 5:case"end":return P.stop()}},_)}))).apply(this,arguments)}function Gi(_){var p=$n().cordova;return new Promise(function(k){p.plugins.browsertab.isAvailable(function(g){var I=null;g?p.plugins.browsertab.openUrl(_):I=p.InAppBrowser.open(_,function Fa(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),k(I)})})}function vi(_,y,p){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,j.Z)(M().mark(function _(y,p,k){var g,I,P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return g=$n(),I=g.cordova,P=function(){},Y.prev=2,Y.next=5,new Promise(function(ue,Ye){var nt=null;function cn(){var an;ue();var pi=null===(an=I.plugins.browsertab)||void 0===an?void 0:an.close;"function"==typeof pi&&pi(),"function"==typeof(null==k?void 0:k.close)&&k.close()}function Vt(){nt||(nt=window.setTimeout(function(){Ye(Tt(y,"redirect-cancelled-by-user"))},2e3))}function rn(){"visible"===(null==document?void 0:document.visibilityState)&&Vt()}p.addPassiveListener(cn),document.addEventListener("resume",Vt,!1),Zi()&&document.addEventListener("visibilitychange",rn,!1),P=function(){p.removePassiveListener(cn),document.removeEventListener("resume",Vt,!1),document.removeEventListener("visibilitychange",rn,!1),nt&&window.clearTimeout(nt)}});case 5:return Y.prev=5,P(),Y.finish(5);case 8:case"end":return Y.stop()}},_,null,[[2,,5,8]])}))).apply(this,arguments)}function gs(_){var y,p,k,g,I,P,B,Y,ue,Ye,nt=$n();Ze("function"==typeof(null===(y=null==nt?void 0:nt.universalLinks)||void 0===y?void 0:y.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ze(void 0!==(null===(p=null==nt?void 0:nt.BuildInfo)||void 0===p?void 0:p.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ze("function"==typeof(null===(I=null===(g=null===(k=null==nt?void 0:nt.cordova)||void 0===k?void 0:k.plugins)||void 0===g?void 0:g.browsertab)||void 0===I?void 0:I.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ze("function"==typeof(null===(Y=null===(B=null===(P=null==nt?void 0:nt.cordova)||void 0===P?void 0:P.plugins)||void 0===B?void 0:B.browsertab)||void 0===Y?void 0:Y.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ze("function"==typeof(null===(Ye=null===(ue=null==nt?void 0:nt.cordova)||void 0===ue?void 0:ue.InAppBrowser)||void 0===Ye?void 0:Ye.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function ro(_){return va.apply(this,arguments)}function va(){return(va=(0,j.Z)(M().mark(function _(y){var p,g;return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return p=Ra(y),P.next=3,crypto.subtle.digest("SHA-256",p);case 3:return g=Array.from(new Uint8Array(P.sent)),P.abrupt("return",g.map(function(B){return B.toString(16).padStart(2,"0")}).join(""));case 6:case"end":return P.stop()}},_)}))).apply(this,arguments)}function Ra(_){if(ot(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);for(var y=new ArrayBuffer(_.length),p=new Uint8Array(y),k=0;k<_.length;k++)p[k]=_.charCodeAt(k);return p}!function gn(_){(0,qe._registerComponent)(new it.wA("auth",function(y,p){var k=p.options,g=y.getProvider("app").getImmediate(),I=y.getProvider("heartbeat"),P=g.options,B=P.apiKey,Y=P.authDomain;return function(ue,Ye){Ze(B&&!B.includes(":"),"invalid-api-key",{appName:ue.name}),Ze(!(null==Y?void 0:Y.includes(":")),"argument-error",{appName:ue.name});var nt={apiKey:B,authDomain:Y,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ii(_)},cn=new fn(ue,Ye,nt);return function $t(_,y){var p=(null==y?void 0:y.persistence)||[],k=(Array.isArray(p)?p:[p]).map(ft);(null==y?void 0:y.errorMap)&&_._updateErrorMap(y.errorMap),_._initializeWithPersistence(k,null==y?void 0:y.popupRedirectResolver)}(cn,k),cn}(g,I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(y,p,k){y.getProvider("auth-internal").initialize()})),(0,qe._registerComponent)(new it.wA("auth-internal",function(y){var p=Dn(y.getProvider("auth").getImmediate());return new Zt(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,qe.registerVersion)(We,tt,function Bt(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,qe.registerVersion)(We,tt,"esm2017")}("Browser");var Dl=function(_){(0,Ee.Z)(p,_);var k,y=(0,Te.Z)(p);function p(){var k;return(0,z.Z)(this,p),(k=y.apply(this,arguments)).passiveListeners=new Set,k.initPromise=new Promise(function(g){k.resolveInialized=g}),k}return(0,H.Z)(p,[{key:"addPassiveListener",value:function(g){this.passiveListeners.add(g)}},{key:"removePassiveListener",value:function(g){this.passiveListeners.delete(g)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(g){return this.resolveInialized(),this.passiveListeners.forEach(function(I){return I(g)}),(0,F.Z)((0,ke.Z)(p.prototype),"onEvent",this).call(this,g)}},{key:"initialized",value:(k=(0,j.Z)(M().mark(function I(){return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.initPromise;case 2:case"end":return B.stop()}},I,this)})),function g(){return k.apply(this,arguments)})}]),p}(ur);function cl(_,y){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:y,eventId:p,urlResponse:null,sessionId:Wr(),postBody:null,tenantId:_.tenantId,error:Tt(_,"no-auth-event")}}function fl(_,y){return Cl()._set(hl(_),y)}function Ho(_){return fc.apply(this,arguments)}function fc(){return(fc=(0,j.Z)(M().mark(function _(y){var p;return M().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Cl()._get(hl(y));case 2:if(!(p=g.sent)){g.next=6;break}return g.next=6,Cl()._remove(hl(y));case 6:return g.abrupt("return",p);case 7:case"end":return g.stop()}},_)}))).apply(this,arguments)}function na(_,y){var p,k,g=function Pa(_){var y=Zu(_),p=y.link?decodeURIComponent(y.link):void 0,k=Zu(p).link,g=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return Zu(g).link||g||k||p||_}(y);if(g.includes("/__/auth/callback")){var I=Zu(g),P=I.firebaseError?function ku(_){try{return JSON.parse(_)}catch(y){return null}}(decodeURIComponent(I.firebaseError)):null,B=null===(k=null===(p=null==P?void 0:P.code)||void 0===p?void 0:p.split("auth/"))||void 0===k?void 0:k[1],Y=B?Tt(B):null;return Y?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Y,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:g,postBody:null}}return null}function Wr(){for(var _=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",p=0;p<20;p++){var k=Math.floor(Math.random()*y.length);_.push(y.charAt(k))}return _.join("")}function Cl(){return ft(wi)}function hl(_){return nn("authEvent",_.config.apiKey,_.name)}function Zu(_){if(!(null==_?void 0:_.includes("?")))return{};var y=_.split("?"),g=(0,x.Z)(y).slice(1);return(0,ve.zd)(g.join("?"))}var Tr=function(){function _(){(0,z.Z)(this,_),this._redirectPersistence=Ta,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Pt}return(0,H.Z)(_,[{key:"_initialize",value:(y=(0,j.Z)(M().mark(function k(g){var I,P;return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return I=g._key(),(P=this.eventManagers.get(I))||(P=new Dl(g),this.eventManagers.set(I,P),this.attachCallbackListeners(g,P)),Y.abrupt("return",P);case 4:case"end":return Y.stop()}},k,this)})),function p(k){return y.apply(this,arguments)})},{key:"_openPopup",value:function(p){te(p,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var y=(0,j.Z)(M().mark(function k(g,I,P,B){var Y,ue,Ye;return M().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return gs(g),Vt.next=3,this._initialize(g);case 3:return Y=Vt.sent,Vt.next=6,Y.initialized();case 6:return Y.resetRedirect(),Ds.clear(),Vt.next=10,this._originValidation(g);case 10:return ue=cl(g,P,B),Vt.next=13,fl(g,ue);case 13:return Vt.next=15,br(g,ue,I);case 15:return Ye=Vt.sent,Vt.next=18,Gi(Ye);case 18:return Vt.abrupt("return",vi(g,Y,Vt.sent));case 20:case"end":return Vt.stop()}},k,this)}));return function p(k,g,I,P){return y.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(p,k){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(p){var k=p._key();return this.originValidationPromises[k]||(this.originValidationPromises[k]=function rr(_){return Jn.apply(this,arguments)}(p)),this.originValidationPromises[k]}},{key:"attachCallbackListeners",value:function(p,k){var g=$n(),I=g.universalLinks,P=g.handleOpenURL,B=g.BuildInfo,Y=setTimeout((0,j.Z)(M().mark(function cn(){return M().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return rn.next=2,Ho(p);case 2:k.onEvent(bo());case 3:case"end":return rn.stop()}},cn)})),500),ue=function(){var cn=(0,j.Z)(M().mark(function Vt(rn){var an,pi;return M().wrap(function(Ma){for(;;)switch(Ma.prev=Ma.next){case 0:return clearTimeout(Y),Ma.next=3,Ho(p);case 3:pi=null,(an=Ma.sent)&&(null==rn?void 0:rn.url)&&(pi=na(an,rn.url)),k.onEvent(pi||bo());case 7:case"end":return Ma.stop()}},Vt)}));return function(rn){return cn.apply(this,arguments)}}();void 0!==I&&"function"==typeof I.subscribe&&I.subscribe(null,ue);var Ye=P,nt="".concat(B.packageName.toLowerCase(),"://");$n().handleOpenURL=function(){var cn=(0,j.Z)(M().mark(function Vt(rn){return M().wrap(function(pi){for(;;)switch(pi.prev=pi.next){case 0:if(rn.toLowerCase().startsWith(nt)&&ue({url:rn}),"function"==typeof Ye)try{Ye(rn)}catch(Ri){console.error(Ri)}case 2:case"end":return pi.stop()}},Vt)}));return function(Vt){return cn.apply(this,arguments)}}()}}]),_;var y}(),Il=Tr;function bo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Tt("no-auth-event")}}function mn(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function mr(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return!("file:"!==mn()&&"ionic:"!==mn()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yl(){return(0,ve.w1)()&&11===(null==document?void 0:document.documentMode)}function As(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return/Edge\/\d+/.test(_)}function To(){try{var _=self.localStorage,y=Ys();if(_)return _.setItem(y,"1"),_.removeItem(y),!function $a(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,ve.z$)();return Yl()||As(_)}()||(0,ve.hl)()}catch(p){return Do()&&(0,ve.hl)()}return!1}function Do(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ua(){return(function hr(){return"http:"===mn()||"https:"===mn()}()||(0,ve.ru)()||mr())&&!function Xn(){return(0,ve.b$)()||(0,ve.UG)()}()&&To()&&!Do()}function pa(){return mr()&&"undefined"!=typeof document}function Sl(){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,j.Z)(M().mark(function _(){return M().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(pa()){p.next=2;break}return p.abrupt("return",!1);case 2:return p.abrupt("return",new Promise(function(k){var g=setTimeout(function(){k(!1)},1e3);document.addEventListener("deviceready",function(){clearTimeout(g),k(!0)})}));case 3:case"end":return p.stop()}},_)}))).apply(this,arguments)}var as={LOCAL:"local",NONE:"none",SESSION:"session"},_u=Ze,vc="persistence";function Fh(_,y){_u(Object.values(as).includes(y),_,"invalid-persistence-type"),(0,ve.b$)()?_u(y!==as.SESSION,_,"unsupported-persistence-type"):(0,ve.UG)()?_u(y===as.NONE,_,"unsupported-persistence-type"):Do()?_u(y===as.NONE||y===as.LOCAL&&(0,ve.hl)(),_,"unsupported-persistence-type"):_u(y===as.NONE||To(),_,"unsupported-persistence-type")}function Ql(_){return xc.apply(this,arguments)}function xc(){return(xc=(0,j.Z)(M().mark(function _(y){var p,k;return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,y._initializationPromise;case 2:p=ss(),k=nn(vc,y.config.apiKey,y.name),p&&p.setItem(k,y._getPersistence());case 5:case"end":return I.stop()}},_)}))).apply(this,arguments)}function ss(){var _;try{return(null===(_=function Al(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(y){return null}}var jc=Ze,dl=function(){function _(){(0,z.Z)(this,_),this.browserResolver=ft(V),this.cordovaResolver=ft(Il),this.underlyingResolver=null,this._redirectPersistence=Ta,this._completeRedirectFn=Pt}return(0,H.Z)(_,[{key:"_initialize",value:(y=(0,j.Z)(M().mark(function k(g){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,this.selectUnderlyingResolver();case 2:return P.abrupt("return",this.assertedUnderlyingResolver._initialize(g));case 3:case"end":return P.stop()}},k,this)})),function p(k){return y.apply(this,arguments)})},{key:"_openPopup",value:function(){var y=(0,j.Z)(M().mark(function k(g,I,P,B){return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,this.selectUnderlyingResolver();case 2:return ue.abrupt("return",this.assertedUnderlyingResolver._openPopup(g,I,P,B));case 3:case"end":return ue.stop()}},k,this)}));return function p(k,g,I,P){return y.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var y=(0,j.Z)(M().mark(function k(g,I,P,B){return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,this.selectUnderlyingResolver();case 2:return ue.abrupt("return",this.assertedUnderlyingResolver._openRedirect(g,I,P,B));case 3:case"end":return ue.stop()}},k,this)}));return function p(k,g,I,P){return y.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(p,k){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,k)}},{key:"_originValidation",value:function(p){return this.assertedUnderlyingResolver._originValidation(p)}},{key:"_shouldInitProactively",get:function(){return pa()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return jc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var y=(0,j.Z)(M().mark(function k(){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!this.underlyingResolver){P.next=2;break}return P.abrupt("return");case 2:return P.next=4,Sl();case 4:this.underlyingResolver=P.sent?this.cordovaResolver:this.browserResolver;case 6:case"end":return P.stop()}},k,this)}));return function p(){return y.apply(this,arguments)}}()}]),_;var y}();function pc(_){return _.unwrap()}function qf(_){return vl(_)}function vl(_){var p=(_ instanceof ve.ZR?_.customData:_)._tokenResponse;if(!p)return null;if(!(_ instanceof ve.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return bs.credentialFromResult(_);var g,k=p.providerId;if(!k||"password"===k)return null;switch(k){case"google.com":g=Ea;break;case"facebook.com":g=Yi;break;case"github.com":g=oo;break;case"twitter.com":g=ks;break;default:var I=p.oauthIdToken,P=p.oauthAccessToken,Y=p.pendingToken,ue=p.nonce;return P||p.oauthTokenSecret||I||Y?Y?k.startsWith("saml.")?ju._create(k,Y):Nr._fromParams({providerId:k,signInMethod:k,pendingToken:Y,idToken:I,accessToken:P}):new Tu(k).credential({idToken:I,accessToken:P,rawNonce:ue}):null}return _ instanceof ve.ZR?g.credentialFromError(_):g.credentialFromResult(_)}function eu(_,y){return y.catch(function(p){throw p instanceof ve.ZR&&function Zh(_,y){var p,k=null===(p=y.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===y.code)y.resolver=new Xd(_,function Ru(_,y){var p,k=(0,ve.m9)(_),g=y;return Ze(y.customData.operationType,k,"argument-error"),Ze(null===(p=g.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,k,"argument-error"),go._fromError(k,g)}(_,y));else if(k){var I=vl(y),P=y;I&&(P.credential=I,P.tenantId=k.tenantId||void 0,P.email=k.email||void 0,P.phoneNumber=k.phoneNumber||void 0)}}(_,p),p}).then(function(p){var g=p.user;return{operationType:p.operationType,credential:qf(p),additionalUserInfo:ns(p),user:kf.getOrCreate(g)}})}function mf(_,y){return yf.apply(this,arguments)}function yf(){return(yf=(0,j.Z)(M().mark(function _(y,p){var k;return M().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,p;case 2:return I.abrupt("return",{verificationId:(k=I.sent).verificationId,confirm:function(B){return eu(y,k.confirm(B))}});case 4:case"end":return I.stop()}},_)}))).apply(this,arguments)}var Xd=function(){function _(y,p){(0,z.Z)(this,_),this.resolver=p,this.auth=function io(_){return _.wrapped()}(y)}return(0,H.Z)(_,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(p){return eu(pc(this.auth),this.resolver.resolveSignIn(p))}}]),_}(),kf=function(){function _(y){(0,z.Z)(this,_),this._delegate=y,this.multiFactor=function Fo(_){var y=(0,ve.m9)(_);return qu.has(y)||qu.set(y,Vs._fromUser(y)),qu.get(y)}(y)}return(0,H.Z)(_,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(p){return this._delegate.getIdTokenResult(p)}},{key:"getIdToken",value:function(p){return this._delegate.getIdToken(p)}},{key:"linkAndRetrieveDataWithCredential",value:function(p){return this.linkWithCredential(p)}},{key:"linkWithCredential",value:(y=(0,j.Z)(M().mark(function k(g){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",eu(this.auth,li(this._delegate,g)));case 1:case"end":return P.stop()}},k,this)})),function p(k){return y.apply(this,arguments)})},{key:"linkWithPhoneNumber",value:function(){var y=(0,j.Z)(M().mark(function k(g,I){return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",mf(this.auth,il(this._delegate,g,I)));case 1:case"end":return B.stop()}},k,this)}));return function p(k,g){return y.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var y=(0,j.Z)(M().mark(function k(g){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",eu(this.auth,Nu(this._delegate,g,dl)));case 1:case"end":return P.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var y=(0,j.Z)(M().mark(function k(g){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,Ql(Dn(this.auth));case 2:return P.abrupt("return",Re(this._delegate,g,dl));case 3:case"end":return P.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(p){return this.reauthenticateWithCredential(p)}},{key:"reauthenticateWithCredential",value:function(){var y=(0,j.Z)(M().mark(function k(g){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",eu(this.auth,ba(this._delegate,g)));case 1:case"end":return P.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(p,k){return mf(this.auth,function ji(_,y,p){return Hi.apply(this,arguments)}(this._delegate,p,k))}},{key:"reauthenticateWithPopup",value:function(p){return eu(this.auth,function oc(_,y,p){return eo.apply(this,arguments)}(this._delegate,p,dl))}},{key:"reauthenticateWithRedirect",value:function(){var y=(0,j.Z)(M().mark(function k(g){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,Ql(Dn(this.auth));case 2:return P.abrupt("return",ne(this._delegate,g,dl));case 3:case"end":return P.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(p){return function kl(_,y){return Zs.apply(this,arguments)}(this._delegate,p)}},{key:"unlink",value:function(){var y=(0,j.Z)(M().mark(function k(g){return M().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,mt(this._delegate,g);case 2:return P.abrupt("return",this);case 3:case"end":return P.stop()}},k,this)}));return function p(k){return y.apply(this,arguments)}}()},{key:"updateEmail",value:function(p){return function Bl(_,y){return Ga((0,ve.m9)(_),y,null)}(this._delegate,p)}},{key:"updatePassword",value:function(p){return function Oo(_,y){return Ga((0,ve.m9)(_),null,y)}(this._delegate,p)}},{key:"updatePhoneNumber",value:function(p){return function Mu(_,y){return Uo.apply(this,arguments)}(this._delegate,p)}},{key:"updateProfile",value:function(p){return function Xo(_,y){return Ku.apply(this,arguments)}(this._delegate,p)}},{key:"verifyBeforeUpdateEmail",value:function(p,k){return function Wu(_,y,p){return _l.apply(this,arguments)}(this._delegate,p,k)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(p){return _.USER_MAP.has(p)||_.USER_MAP.set(p,new _(p)),_.USER_MAP.get(p)}}]),_;var y}();kf.USER_MAP=new WeakMap;var Go=Ze,_f=function(){var _=function(){function y(p,k){if((0,z.Z)(this,y),this.app=p,k.isInitialized())return this._delegate=k.getImmediate(),void this.linkUnderlyingAuth();var g=p.options.apiKey;Go(g,"invalid-api-key",{appName:p.name}),Go(g,"invalid-api-key",{appName:p.name});var I="undefined"!=typeof window?dl:void 0;this._delegate=k.initialize({options:{persistence:Bh(g,p.name),popupRedirectResolver:I}}),this._delegate._updateErrorMap(Ce),this.linkUnderlyingAuth()}return(0,H.Z)(y,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?kf.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(k){this._delegate.languageCode=k}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(k){this._delegate.tenantId=k}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(k,g){!function Wn(_,y,p){var k=Dn(_);Ze(k._canInitEmulator,k,"emulator-config-failed"),Ze(/^https?:\/\//.test(y),k,"invalid-emulator-scheme");var g=!!(null==p?void 0:p.disableWarnings),I=oa(y),P=function gi(_){var y=oa(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(y.length));if(!p)return{host:"",port:null};var k=p[2].split("@").pop()||"",g=/^(\[[^\]]+\])(:|$)/.exec(k);if(g){var I=g[1];return{host:I,port:ys(k.substr(I.length+1))}}var P=k.split(":"),B=(0,rt.Z)(P,2);return{host:B[0],port:ys(B[1])}}(y),B=P.host,Y=P.port,ue=null===Y?"":":".concat(Y);k.config.emulator={url:"".concat(I,"//").concat(B).concat(ue,"/")},k.settings.appVerificationDisabledForTesting=!0,k.emulatorConfig=Object.freeze({host:B,port:Y,protocol:I.replace(":",""),options:Object.freeze({disableWarnings:g})}),g||function ii(){function _(){var y=document.createElement("p"),p=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,k,g)}},{key:"applyActionCode",value:function(k){return function Gt(_,y){return pr.apply(this,arguments)}(this._delegate,k)}},{key:"checkActionCode",value:function(k){return Mo(this._delegate,k)}},{key:"confirmPasswordReset",value:function(k,g){return function yl(_,y,p){return Xa.apply(this,arguments)}(this._delegate,k,g)}},{key:"createUserWithEmailAndPassword",value:(p=(0,j.Z)(M().mark(function g(I,P){return M().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",eu(this._delegate,es(this._delegate,I,P)));case 1:case"end":return Y.stop()}},g,this)})),function k(g,I){return p.apply(this,arguments)})},{key:"fetchProvidersForEmail",value:function(k){return this.fetchSignInMethodsForEmail(k)}},{key:"fetchSignInMethodsForEmail",value:function(k){return function Fs(_,y){return Sa.apply(this,arguments)}(this._delegate,k)}},{key:"isSignInWithEmailLink",value:function(k){return function ho(_,y){var p=Po.parseLink(y);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,k)}},{key:"getRedirectResult",value:function(){var p=(0,j.Z)(M().mark(function g(){var I;return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return Go(ua(),this._delegate,"operation-not-supported-in-this-environment"),B.next=3,Rt(this._delegate,dl);case 3:if(I=B.sent){B.next=6;break}return B.abrupt("return",{credential:null,user:null});case 6:return B.abrupt("return",eu(this._delegate,Promise.resolve(I)));case 7:case"end":return B.stop()}},g,this)}));return function k(){return p.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(k){!function hc(_,y){Dn(_)._logFramework(y)}(this._delegate,k)}},{key:"onAuthStateChanged",value:function(k,g,I){var P=Uh(k,g,I);return this._delegate.onAuthStateChanged(P.next,P.error,P.complete)}},{key:"onIdTokenChanged",value:function(k,g,I){var P=Uh(k,g,I);return this._delegate.onIdTokenChanged(P.next,P.error,P.complete)}},{key:"sendSignInLinkToEmail",value:function(k,g){return function Ul(_,y,p){return zu.apply(this,arguments)}(this._delegate,k,g)}},{key:"sendPasswordResetEmail",value:function(k,g){return function Hu(_,y,p){return Cu.apply(this,arguments)}(this._delegate,k,g||void 0)}},{key:"setPersistence",value:function(){var p=(0,j.Z)(M().mark(function g(I){var P;return M().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:Fh(this._delegate,I),ue.t0=I,ue.next=ue.t0===as.SESSION?4:ue.t0===as.LOCAL?6:ue.t0===as.NONE?11:13;break;case 4:return P=Ta,ue.abrupt("break",14);case 6:return ue.next=8,ft(sr)._isAvailable();case 8:return P=ue.sent?sr:wi,ue.abrupt("break",14);case 11:return P=An,ue.abrupt("break",14);case 13:return ue.abrupt("return",te("argument-error",{appName:this._delegate.name}));case 14:return ue.abrupt("return",this._delegate.setPersistence(P));case 15:case"end":return ue.stop()}},g,this)}));return function k(g){return p.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(k){return this.signInWithCredential(k)}},{key:"signInAnonymously",value:function(){return eu(this._delegate,function Q(_){return se.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(k){return eu(this._delegate,Si(this._delegate,k))}},{key:"signInWithCustomToken",value:function(k){return eu(this._delegate,function co(_,y){return Kn.apply(this,arguments)}(this._delegate,k))}},{key:"signInWithEmailAndPassword",value:function(k,g){return eu(this._delegate,function Gu(_,y,p){return Si((0,ve.m9)(_),iu.credential(y,p))}(this._delegate,k,g))}},{key:"signInWithEmailLink",value:function(k,g){return eu(this._delegate,function Jo(_,y,p){return Ji.apply(this,arguments)}(this._delegate,k,g))}},{key:"signInWithPhoneNumber",value:function(k,g){return mf(this._delegate,function da(_,y,p){return ta.apply(this,arguments)}(this._delegate,k,g))}},{key:"signInWithPopup",value:function(){var p=(0,j.Z)(M().mark(function g(I){return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return Go(ua(),this._delegate,"operation-not-supported-in-this-environment"),B.abrupt("return",eu(this._delegate,Gl(this._delegate,I,dl)));case 2:case"end":return B.stop()}},g,this)}));return function k(g){return p.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var p=(0,j.Z)(M().mark(function g(I){return M().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return Go(ua(),this._delegate,"operation-not-supported-in-this-environment"),B.next=3,Ql(this._delegate);case 3:return B.abrupt("return",G(this._delegate,I,dl));case 4:case"end":return B.stop()}},g,this)}));return function k(g){return p.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(k){return this._delegate.updateCurrentUser(k)}},{key:"verifyPasswordResetCode",value:function(k){return function Iu(_,y){return ou.apply(this,arguments)}(this._delegate,k)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var k=this;this._delegate.wrapped=function(){return k}}}]),y;var p}();return _.Persistence=as,_}();function Uh(_,y,p){var k=_;"function"!=typeof _&&(k=_.next,y=_.error,p=_.complete);var g=k;return{next:function(B){return g(B&&kf.getOrCreate(B))},error:y,complete:p}}function Bh(_,y){var p=function Jd(_,y){var p=ss();if(!p)return[];var k=nn(vc,_,y);switch(p.getItem(k)){case as.NONE:return[An];case as.LOCAL:return[sr,Ta];case as.SESSION:return[Ta];default:return[]}}(_,y);if("undefined"!=typeof self&&!p.includes(sr)&&p.push(sr),"undefined"!=typeof window)for(var k=0,g=[wi,Ta];k<g.length;k++){var I=g[k];p.includes(I)||p.push(I)}return p.includes(An)||p.push(An),p}var wf=function(){function _(){(0,z.Z)(this,_),this.providerId="phone",this._delegate=new bs(pc(ce.Z.auth()))}return(0,H.Z)(_,[{key:"verifyPhoneNumber",value:function(p,k){return this._delegate.verifyPhoneNumber(p,k)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(p,k){return bs.credential(p,k)}}]),_}();wf.PHONE_SIGN_IN_METHOD=bs.PHONE_SIGN_IN_METHOD,wf.PROVIDER_ID=bs.PROVIDER_ID;var Vh=Ze,ev=function(){function _(y,p){var g,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ce.Z.app();(0,z.Z)(this,_),Vh(null===(g=k.options)||void 0===g?void 0:g.apiKey,"invalid-api-key",{appName:k.name}),this._delegate=new Lc(y,p,k.auth()),this.type=this._delegate.type}return(0,H.Z)(_,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),_}();!function tv(_){_.INTERNAL.registerComponent(new it.wA("auth-compat",function(y){var p=y.getProvider("app-compat").getImmediate(),k=y.getProvider("auth");return new _f(p,k)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:iu,FacebookAuthProvider:Yi,GithubAuthProvider:oo,GoogleAuthProvider:Ea,OAuthProvider:Tu,SAMLAuthProvider:uu,PhoneAuthProvider:wf,PhoneMultiFactorGenerator:Ie,RecaptchaVerifier:ev,TwitterAuthProvider:ks,Auth:_f,AuthCredential:Ui,Error:ve.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.11")}(ce.Z)},67854:function(Wt){var Qe=function(O){"use strict";var j,z=Object.prototype,H=z.hasOwnProperty,le="function"==typeof Symbol?Symbol:{},M=le.iterator||"@@iterator",ce=le.asyncIterator||"@@asyncIterator",x=le.toStringTag||"@@toStringTag";function F(be,Ge,Se){return Object.defineProperty(be,Ge,{value:Se,enumerable:!0,configurable:!0,writable:!0}),be[Ge]}try{F({},"")}catch(be){F=function(Se,Mt,te){return Se[Mt]=te}}function ke(be,Ge,Se,Mt){var Tt=Object.create((Ge&&Ge.prototype instanceof fe?Ge:fe).prototype),jt=new Pe(Mt||[]);return Tt._invoke=function kt(be,Ge,Se){var Mt=Te;return function(Tt,jt){if(Mt===Je)throw new Error("Generator is already running");if(Mt===rt){if("throw"===Tt)throw jt;return at()}for(Se.method=Tt,Se.arg=jt;;){var kn=Se.delegate;if(kn){var on=dt(kn,Se);if(on){if(on===Ve)continue;return on}}if("next"===Se.method)Se.sent=Se._sent=Se.arg;else if("throw"===Se.method){if(Mt===Te)throw Mt=rt,Se.arg;Se.dispatchException(Se.arg)}else"return"===Se.method&&Se.abrupt("return",Se.arg);Mt=Je;var Ze=Ee(be,Ge,Se);if("normal"===Ze.type){if(Mt=Se.done?rt:et,Ze.arg===Ve)continue;return{value:Ze.arg,done:Se.done}}"throw"===Ze.type&&(Mt=rt,Se.method="throw",Se.arg=Ze.arg)}}}(be,Se,jt),Tt}function Ee(be,Ge,Se){try{return{type:"normal",arg:be.call(Ge,Se)}}catch(Mt){return{type:"throw",arg:Mt}}}O.wrap=ke;var Te="suspendedStart",et="suspendedYield",Je="executing",rt="completed",Ve={};function fe(){}function ve(){}function qe(){}var wt={};F(wt,M,function(){return this});var ht=Object.getPrototypeOf,it=ht&&ht(ht(Ce([])));it&&it!==z&&H.call(it,M)&&(wt=it);var Me=qe.prototype=fe.prototype=Object.create(wt);function ct(be){["next","throw","return"].forEach(function(Ge){F(be,Ge,function(Se){return this._invoke(Ge,Se)})})}function gt(be,Ge){function Se(Tt,jt,kn,on){var Ze=Ee(be[Tt],be,jt);if("throw"!==Ze.type){var Kt=Ze.arg,ot=Kt.value;return ot&&"object"==typeof ot&&H.call(ot,"__await")?Ge.resolve(ot.__await).then(function(je){Se("next",je,kn,on)},function(je){Se("throw",je,kn,on)}):Ge.resolve(ot).then(function(je){Kt.value=je,kn(Kt)},function(je){return Se("throw",je,kn,on)})}on(Ze.arg)}var Mt;this._invoke=function te(Tt,jt){function kn(){return new Ge(function(on,Ze){Se(Tt,jt,on,Ze)})}return Mt=Mt?Mt.then(kn,kn):kn()}}function dt(be,Ge){var Se=be.iterator[Ge.method];if(Se===j){if(Ge.delegate=null,"throw"===Ge.method){if(be.iterator.return&&(Ge.method="return",Ge.arg=j,dt(be,Ge),"throw"===Ge.method))return Ve;Ge.method="throw",Ge.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ve}var Mt=Ee(Se,be.iterator,Ge.arg);if("throw"===Mt.type)return Ge.method="throw",Ge.arg=Mt.arg,Ge.delegate=null,Ve;var te=Mt.arg;return te?te.done?(Ge[be.resultName]=te.value,Ge.next=be.nextLoc,"return"!==Ge.method&&(Ge.method="next",Ge.arg=j),Ge.delegate=null,Ve):te:(Ge.method="throw",Ge.arg=new TypeError("iterator result is not an object"),Ge.delegate=null,Ve)}function $e(be){var Ge={tryLoc:be[0]};1 in be&&(Ge.catchLoc=be[1]),2 in be&&(Ge.finallyLoc=be[2],Ge.afterLoc=be[3]),this.tryEntries.push(Ge)}function Fe(be){var Ge=be.completion||{};Ge.type="normal",delete Ge.arg,be.completion=Ge}function Pe(be){this.tryEntries=[{tryLoc:"root"}],be.forEach($e,this),this.reset(!0)}function Ce(be){if(be){var Ge=be[M];if(Ge)return Ge.call(be);if("function"==typeof be.next)return be;if(!isNaN(be.length)){var Se=-1,Mt=function te(){for(;++Se<be.length;)if(H.call(be,Se))return te.value=be[Se],te.done=!1,te;return te.value=j,te.done=!0,te};return Mt.next=Mt}}return{next:at}}function at(){return{value:j,done:!0}}return ve.prototype=qe,F(Me,"constructor",qe),F(qe,"constructor",ve),ve.displayName=F(qe,x,"GeneratorFunction"),O.isGeneratorFunction=function(be){var Ge="function"==typeof be&&be.constructor;return!!Ge&&(Ge===ve||"GeneratorFunction"===(Ge.displayName||Ge.name))},O.mark=function(be){return Object.setPrototypeOf?Object.setPrototypeOf(be,qe):(be.__proto__=qe,F(be,x,"GeneratorFunction")),be.prototype=Object.create(Me),be},O.awrap=function(be){return{__await:be}},ct(gt.prototype),F(gt.prototype,ce,function(){return this}),O.AsyncIterator=gt,O.async=function(be,Ge,Se,Mt,te){void 0===te&&(te=Promise);var Tt=new gt(ke(be,Ge,Se,Mt),te);return O.isGeneratorFunction(Ge)?Tt:Tt.next().then(function(jt){return jt.done?jt.value:Tt.next()})},ct(Me),F(Me,x,"Generator"),F(Me,M,function(){return this}),F(Me,"toString",function(){return"[object Generator]"}),O.keys=function(be){var Ge=[];for(var Se in be)Ge.push(Se);return Ge.reverse(),function Mt(){for(;Ge.length;){var te=Ge.pop();if(te in be)return Mt.value=te,Mt.done=!1,Mt}return Mt.done=!0,Mt}},O.values=Ce,Pe.prototype={constructor:Pe,reset:function(Ge){if(this.prev=0,this.next=0,this.sent=this._sent=j,this.done=!1,this.delegate=null,this.method="next",this.arg=j,this.tryEntries.forEach(Fe),!Ge)for(var Se in this)"t"===Se.charAt(0)&&H.call(this,Se)&&!isNaN(+Se.slice(1))&&(this[Se]=j)},stop:function(){this.done=!0;var Se=this.tryEntries[0].completion;if("throw"===Se.type)throw Se.arg;return this.rval},dispatchException:function(Ge){if(this.done)throw Ge;var Se=this;function Mt(Ze,Kt){return jt.type="throw",jt.arg=Ge,Se.next=Ze,Kt&&(Se.method="next",Se.arg=j),!!Kt}for(var te=this.tryEntries.length-1;te>=0;--te){var Tt=this.tryEntries[te],jt=Tt.completion;if("root"===Tt.tryLoc)return Mt("end");if(Tt.tryLoc<=this.prev){var kn=H.call(Tt,"catchLoc"),on=H.call(Tt,"finallyLoc");if(kn&&on){if(this.prev<Tt.catchLoc)return Mt(Tt.catchLoc,!0);if(this.prev<Tt.finallyLoc)return Mt(Tt.finallyLoc)}else if(kn){if(this.prev<Tt.catchLoc)return Mt(Tt.catchLoc,!0)}else{if(!on)throw new Error("try statement without catch or finally");if(this.prev<Tt.finallyLoc)return Mt(Tt.finallyLoc)}}}},abrupt:function(Ge,Se){for(var Mt=this.tryEntries.length-1;Mt>=0;--Mt){var te=this.tryEntries[Mt];if(te.tryLoc<=this.prev&&H.call(te,"finallyLoc")&&this.prev<te.finallyLoc){var Tt=te;break}}Tt&&("break"===Ge||"continue"===Ge)&&Tt.tryLoc<=Se&&Se<=Tt.finallyLoc&&(Tt=null);var jt=Tt?Tt.completion:{};return jt.type=Ge,jt.arg=Se,Tt?(this.method="next",this.next=Tt.finallyLoc,Ve):this.complete(jt)},complete:function(Ge,Se){if("throw"===Ge.type)throw Ge.arg;return"break"===Ge.type||"continue"===Ge.type?this.next=Ge.arg:"return"===Ge.type?(this.rval=this.arg=Ge.arg,this.method="return",this.next="end"):"normal"===Ge.type&&Se&&(this.next=Se),Ve},finish:function(Ge){for(var Se=this.tryEntries.length-1;Se>=0;--Se){var Mt=this.tryEntries[Se];if(Mt.finallyLoc===Ge)return this.complete(Mt.completion,Mt.afterLoc),Fe(Mt),Ve}},catch:function(Ge){for(var Se=this.tryEntries.length-1;Se>=0;--Se){var Mt=this.tryEntries[Se];if(Mt.tryLoc===Ge){var te=Mt.completion;if("throw"===te.type){var Tt=te.arg;Fe(Mt)}return Tt}}throw new Error("illegal catch attempt")},delegateYield:function(Ge,Se,Mt){return this.delegate={iterator:Ce(Ge),resultName:Se,nextLoc:Mt},"next"===this.method&&(this.arg=j),Ve}},O}(Wt.exports);try{regeneratorRuntime=Qe}catch(O){"object"==typeof globalThis?globalThis.regeneratorRuntime=Qe:Function("r","regeneratorRuntime = r")(Qe)}},69751:function(Wt,Qe,O){"use strict";O.d(Qe,{y:function(){return Ee}});var z=O(15671),H=O(43144),j=O(32961),le=O(50727),M=O(48822),ce=O(89635),x=O(42416),F=O(30576),ke=O(72806),Ee=function(){var rt=function(){function Ve(fe){(0,z.Z)(this,Ve),fe&&(this._subscribe=fe)}return(0,H.Z)(Ve,[{key:"lift",value:function(ve){var qe=new Ve;return qe.source=this,qe.operator=ve,qe}},{key:"subscribe",value:function(ve,qe,wt){var ht=this,it=function Je(rt){return rt&&rt instanceof j.Lv||function et(rt){return rt&&(0,F.m)(rt.next)&&(0,F.m)(rt.error)&&(0,F.m)(rt.complete)}(rt)&&(0,le.Nn)(rt)}(ve)?ve:new j.Hp(ve,qe,wt);return(0,ke.x)(function(){var Me=ht.operator,ct=ht.source;it.add(Me?Me.call(it,ct):ct?ht._subscribe(it):ht._trySubscribe(it))}),it}},{key:"_trySubscribe",value:function(ve){try{return this._subscribe(ve)}catch(qe){ve.error(qe)}}},{key:"forEach",value:function(ve,qe){var wt=this;return new(qe=Te(qe))(function(ht,it){var Me=new j.Hp({next:function(gt){try{ve(gt)}catch(kt){it(kt),Me.unsubscribe()}},error:it,complete:ht});wt.subscribe(Me)})}},{key:"_subscribe",value:function(ve){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(ve)}},{key:M.L,value:function(){return this}},{key:"pipe",value:function(){for(var ve=arguments.length,qe=new Array(ve),wt=0;wt<ve;wt++)qe[wt]=arguments[wt];return(0,ce.U)(qe)(this)}},{key:"toPromise",value:function(ve){var qe=this;return new(ve=Te(ve))(function(wt,ht){var it;qe.subscribe(function(Me){return it=Me},function(Me){return ht(Me)},function(){return wt(it)})})}}]),Ve}();return rt.create=function(Ve){return new rt(Ve)},rt}();function Te(rt){var Ve;return null!==(Ve=null!=rt?rt:x.v.Promise)&&void 0!==Ve?Ve:Promise}},77579:function(Wt,Qe,O){"use strict";O.d(Qe,{x:function(){return rt}});var z=O(37762),H=O(15671),j=O(43144),le=O(73237),M=O(61120),ce=O(60136),x=O(57777),F=O(69751),ke=O(50727),Te=(0,O(83888).d)(function(fe){return function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),et=O(38737),Je=O(72806),rt=function(){var fe=function(ve){(0,ce.Z)(wt,ve);var qe=(0,x.Z)(wt);function wt(){var ht;return(0,H.Z)(this,wt),(ht=qe.call(this)).closed=!1,ht.currentObservers=null,ht.observers=[],ht.isStopped=!1,ht.hasError=!1,ht.thrownError=null,ht}return(0,j.Z)(wt,[{key:"lift",value:function(it){var Me=new Ve(this,this);return Me.operator=it,Me}},{key:"_throwIfClosed",value:function(){if(this.closed)throw new Te}},{key:"next",value:function(it){var Me=this;(0,Je.x)(function(){if(Me._throwIfClosed(),!Me.isStopped){Me.currentObservers||(Me.currentObservers=Array.from(Me.observers));var gt,ct=(0,z.Z)(Me.currentObservers);try{for(ct.s();!(gt=ct.n()).done;)gt.value.next(it)}catch(dt){ct.e(dt)}finally{ct.f()}}})}},{key:"error",value:function(it){var Me=this;(0,Je.x)(function(){if(Me._throwIfClosed(),!Me.isStopped){Me.hasError=Me.isStopped=!0,Me.thrownError=it;for(var ct=Me.observers;ct.length;)ct.shift().error(it)}})}},{key:"complete",value:function(){var it=this;(0,Je.x)(function(){if(it._throwIfClosed(),!it.isStopped){it.isStopped=!0;for(var Me=it.observers;Me.length;)Me.shift().complete()}})}},{key:"unsubscribe",value:function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}},{key:"observed",get:function(){var it;return(null===(it=this.observers)||void 0===it?void 0:it.length)>0}},{key:"_trySubscribe",value:function(it){return this._throwIfClosed(),(0,le.Z)((0,M.Z)(wt.prototype),"_trySubscribe",this).call(this,it)}},{key:"_subscribe",value:function(it){return this._throwIfClosed(),this._checkFinalizedStatuses(it),this._innerSubscribe(it)}},{key:"_innerSubscribe",value:function(it){var Me=this,kt=this.observers;return this.hasError||this.isStopped?ke.Lc:(this.currentObservers=null,kt.push(it),new ke.w0(function(){Me.currentObservers=null,(0,et.P)(kt,it)}))}},{key:"_checkFinalizedStatuses",value:function(it){var gt=this.isStopped;this.hasError?it.error(this.thrownError):gt&&it.complete()}},{key:"asObservable",value:function(){var it=new F.y;return it.source=this,it}}]),wt}(F.y);return fe.create=function(ve,qe){return new Ve(ve,qe)},fe}(),Ve=function(fe){(0,ce.Z)(qe,fe);var ve=(0,x.Z)(qe);function qe(wt,ht){var it;return(0,H.Z)(this,qe),(it=ve.call(this)).destination=wt,it.source=ht,it}return(0,j.Z)(qe,[{key:"next",value:function(ht){var it,Me;null===(Me=null===(it=this.destination)||void 0===it?void 0:it.next)||void 0===Me||Me.call(it,ht)}},{key:"error",value:function(ht){var it,Me;null===(Me=null===(it=this.destination)||void 0===it?void 0:it.error)||void 0===Me||Me.call(it,ht)}},{key:"complete",value:function(){var ht,it;null===(it=null===(ht=this.destination)||void 0===ht?void 0:ht.complete)||void 0===it||it.call(ht)}},{key:"_subscribe",value:function(ht){var it,Me;return null!==(Me=null===(it=this.source)||void 0===it?void 0:it.subscribe(ht))&&void 0!==Me?Me:ke.Lc}}]),qe}(rt)},32961:function(Wt,Qe,O){"use strict";O.d(Qe,{Hp:function(){return ct},Lv:function(){return wt}});var z=O(15671),H=O(43144),j=O(97326),le=O(73237),M=O(61120),ce=O(60136),x=O(57777),F=O(30576),ke=O(50727),Ee=O(42416),Te=O(87849);function et(){}var Je=fe("C",void 0,void 0);function fe(Fe,Pe,Ce){return{kind:Fe,value:Pe,error:Ce}}var ve=O(43410),qe=O(72806),wt=function(Fe){(0,ce.Z)(Ce,Fe);var Pe=(0,x.Z)(Ce);function Ce(at){var be;return(0,z.Z)(this,Ce),(be=Pe.call(this)).isStopped=!1,at?(be.destination=at,(0,ke.Nn)(at)&&at.add((0,j.Z)(be))):be.destination=$e,be}return(0,H.Z)(Ce,[{key:"next",value:function(be){this.isStopped?dt(function Ve(Fe){return fe("N",Fe,void 0)}(be),this):this._next(be)}},{key:"error",value:function(be){this.isStopped?dt(function rt(Fe){return fe("E",void 0,Fe)}(be),this):(this.isStopped=!0,this._error(be))}},{key:"complete",value:function(){this.isStopped?dt(Je,this):(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,(0,le.Z)((0,M.Z)(Ce.prototype),"unsubscribe",this).call(this),this.destination=null)}},{key:"_next",value:function(be){this.destination.next(be)}},{key:"_error",value:function(be){try{this.destination.error(be)}finally{this.unsubscribe()}}},{key:"_complete",value:function(){try{this.destination.complete()}finally{this.unsubscribe()}}}],[{key:"create",value:function(be,Ge,Se){return new ct(be,Ge,Se)}}]),Ce}(ke.w0),ht=Function.prototype.bind;function it(Fe,Pe){return ht.call(Fe,Pe)}var Me=function(){function Fe(Pe){(0,z.Z)(this,Fe),this.partialObserver=Pe}return(0,H.Z)(Fe,[{key:"next",value:function(Ce){var at=this.partialObserver;if(at.next)try{at.next(Ce)}catch(be){gt(be)}}},{key:"error",value:function(Ce){var at=this.partialObserver;if(at.error)try{at.error(Ce)}catch(be){gt(be)}else gt(Ce)}},{key:"complete",value:function(){var Ce=this.partialObserver;if(Ce.complete)try{Ce.complete()}catch(at){gt(at)}}}]),Fe}(),ct=function(Fe){(0,ce.Z)(Ce,Fe);var Pe=(0,x.Z)(Ce);function Ce(at,be,Ge){var Se,Mt,te;return(0,z.Z)(this,Ce),Se=Pe.call(this),(0,F.m)(at)||!at?Mt={next:null!=at?at:void 0,error:null!=be?be:void 0,complete:null!=Ge?Ge:void 0}:(0,j.Z)(Se)&&Ee.v.useDeprecatedNextContext?((te=Object.create(at)).unsubscribe=function(){return Se.unsubscribe()},Mt={next:at.next&&it(at.next,te),error:at.error&&it(at.error,te),complete:at.complete&&it(at.complete,te)}):Mt=at,Se.destination=new Me(Mt),Se}return(0,H.Z)(Ce)}(wt);function gt(Fe){Ee.v.useDeprecatedSynchronousErrorHandling?(0,qe.O)(Fe):(0,Te.h)(Fe)}function dt(Fe,Pe){var Ce=Ee.v.onStoppedNotification;Ce&&ve.z.setTimeout(function(){return Ce(Fe,Pe)})}var $e={closed:!0,next:et,error:function kt(Fe){throw Fe},complete:et}},50727:function(Wt,Qe,O){"use strict";O.d(Qe,{Lc:function(){return Ee},w0:function(){return ke},Nn:function(){return Te}});var Je,z=O(74902),H=O(37762),j=O(15671),le=O(43144),M=O(30576),x=(0,O(83888).d)(function(Je){return function(Ve){Je(this),this.message=Ve?"".concat(Ve.length," errors occurred during unsubscription:\n").concat(Ve.map(function(fe,ve){return"".concat(ve+1,") ").concat(fe.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=Ve}}),F=O(38737),ke=function(){function Je(rt){(0,j.Z)(this,Je),this.initialTeardown=rt,this.closed=!1,this._parentage=null,this._finalizers=null}return(0,le.Z)(Je,[{key:"unsubscribe",value:function(){var Ve;if(!this.closed){this.closed=!0;var fe=this._parentage;if(fe)if(this._parentage=null,Array.isArray(fe)){var qe,ve=(0,H.Z)(fe);try{for(ve.s();!(qe=ve.n()).done;)qe.value.remove(this)}catch(kt){ve.e(kt)}finally{ve.f()}}else fe.remove(this);var ht=this.initialTeardown;if((0,M.m)(ht))try{ht()}catch(kt){Ve=kt instanceof x?kt.errors:[kt]}var it=this._finalizers;if(it){this._finalizers=null;var ct,Me=(0,H.Z)(it);try{for(Me.s();!(ct=Me.n()).done;){var gt=ct.value;try{et(gt)}catch(kt){Ve=null!=Ve?Ve:[],kt instanceof x?Ve=[].concat((0,z.Z)(Ve),(0,z.Z)(kt.errors)):Ve.push(kt)}}}catch(kt){Me.e(kt)}finally{Me.f()}}if(Ve)throw new x(Ve)}}},{key:"add",value:function(Ve){var fe;if(Ve&&Ve!==this)if(this.closed)et(Ve);else{if(Ve instanceof Je){if(Ve.closed||Ve._hasParent(this))return;Ve._addParent(this)}(this._finalizers=null!==(fe=this._finalizers)&&void 0!==fe?fe:[]).push(Ve)}}},{key:"_hasParent",value:function(Ve){var fe=this._parentage;return fe===Ve||Array.isArray(fe)&&fe.includes(Ve)}},{key:"_addParent",value:function(Ve){var fe=this._parentage;this._parentage=Array.isArray(fe)?(fe.push(Ve),fe):fe?[fe,Ve]:Ve}},{key:"_removeParent",value:function(Ve){var fe=this._parentage;fe===Ve?this._parentage=null:Array.isArray(fe)&&(0,F.P)(fe,Ve)}},{key:"remove",value:function(Ve){var fe=this._finalizers;fe&&(0,F.P)(fe,Ve),Ve instanceof Je&&Ve._removeParent(this)}}]),Je}();ke.EMPTY=((Je=new ke).closed=!0,Je);var Ee=ke.EMPTY;function Te(Je){return Je instanceof ke||Je&&"closed"in Je&&(0,M.m)(Je.remove)&&(0,M.m)(Je.add)&&(0,M.m)(Je.unsubscribe)}function et(Je){(0,M.m)(Je)?Je():Je.unsubscribe()}},42416:function(Wt,Qe,O){"use strict";O.d(Qe,{v:function(){return z}});var z={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},97272:function(Wt,Qe,O){"use strict";O.d(Qe,{z:function(){return M}});var z=O(8189);function H(){return(0,z.J)(1)}var j=O(77669),le=O(88996);function M(){for(var ce=arguments.length,x=new Array(ce),F=0;F<ce;F++)x[F]=arguments[F];return H()((0,le.D)(x,(0,j.yG)(x)))}},49770:function(Wt,Qe,O){"use strict";O.d(Qe,{P:function(){return j}});var z=O(69751),H=O(38421);function j(le){return new z.y(function(M){(0,H.Xf)(le()).subscribe(M)})}},60515:function(Wt,Qe,O){"use strict";O.d(Qe,{E:function(){return H}});var H=new(O(69751).y)(function(M){return M.complete()})},4128:function(Wt,Qe,O){"use strict";O.d(Qe,{D:function(){return F}});var z=O(69751),H=O(54742),j=O(38421),le=O(77669),M=O(25403),ce=O(83268),x=O(31810);function F(){for(var ke=arguments.length,Ee=new Array(ke),Te=0;Te<ke;Te++)Ee[Te]=arguments[Te];var et=(0,le.jO)(Ee),Je=(0,H.D)(Ee),rt=Je.args,Ve=Je.keys,fe=new z.y(function(ve){var qe=rt.length;if(qe)for(var wt=new Array(qe),ht=qe,it=qe,Me=function(kt){var dt=!1;(0,j.Xf)(rt[kt]).subscribe((0,M.x)(ve,function($e){dt||(dt=!0,it--),wt[kt]=$e},function(){return ht--},void 0,function(){(!ht||!dt)&&(it||ve.next(Ve?(0,x.n)(Ve,wt):wt),ve.complete())}))},ct=0;ct<qe;ct++)Me(ct);else ve.complete()});return et?fe.pipe((0,ce.Z)(et)):fe}},88996:function(Wt,Qe,O){"use strict";O.d(Qe,{D:function(){return Me}});var z=O(38421),H=O(85363),j=O(49468),ce=O(69751),F=O(2202),ke=O(30576),Ee=O(39672);function et(ct,gt){if(!ct)throw new Error("Iterable cannot be null");return new ce.y(function(kt){(0,Ee.f)(kt,gt,function(){var dt=ct[Symbol.asyncIterator]();(0,Ee.f)(kt,gt,function(){dt.next().then(function($e){$e.done?kt.complete():kt.next($e.value)})},0,!0)})})}var Je=O(93670),rt=O(28239),Ve=O(81144),fe=O(26495),ve=O(12206),qe=O(44532),wt=O(53260);function Me(ct,gt){return gt?function it(ct,gt){if(null!=ct){if((0,Je.c)(ct))return function le(ct,gt){return(0,z.Xf)(ct).pipe((0,j.R)(gt),(0,H.Q)(gt))}(ct,gt);if((0,Ve.z)(ct))return function x(ct,gt){return new ce.y(function(kt){var dt=0;return gt.schedule(function(){dt===ct.length?kt.complete():(kt.next(ct[dt++]),kt.closed||this.schedule())})})}(ct,gt);if((0,rt.t)(ct))return function M(ct,gt){return(0,z.Xf)(ct).pipe((0,j.R)(gt),(0,H.Q)(gt))}(ct,gt);if((0,ve.D)(ct))return et(ct,gt);if((0,fe.T)(ct))return function Te(ct,gt){return new ce.y(function(kt){var dt;return(0,Ee.f)(kt,gt,function(){dt=ct[F.h](),(0,Ee.f)(kt,gt,function(){var $e,Fe;try{var Pe=dt.next();$e=Pe.value,Fe=Pe.done}catch(Ce){return void kt.error(Ce)}Fe?kt.complete():kt.next($e)},0,!0)}),function(){return(0,ke.m)(null==dt?void 0:dt.return)&&dt.return()}})}(ct,gt);if((0,wt.L)(ct))return function ht(ct,gt){return et((0,wt.Q)(ct),gt)}(ct,gt)}throw(0,qe.z)(ct)}(ct,gt):(0,z.Xf)(ct)}},38421:function(Wt,Qe,O){"use strict";O.d(Qe,{Xf:function(){return fe}});var z=O(37762),H=O(87757),j=O.n(H),le=O(70655),M=O(81144),ce=O(28239),x=O(69751),F=O(93670),ke=O(12206),Ee=O(44532),Te=O(26495),et=O(53260),Je=O(30576),rt=O(87849),Ve=O(48822);function fe(gt){if(gt instanceof x.y)return gt;if(null!=gt){if((0,F.c)(gt))return function ve(gt){return new x.y(function(kt){var dt=gt[Ve.L]();if((0,Je.m)(dt.subscribe))return dt.subscribe(kt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(gt);if((0,M.z)(gt))return function qe(gt){return new x.y(function(kt){for(var dt=0;dt<gt.length&&!kt.closed;dt++)kt.next(gt[dt]);kt.complete()})}(gt);if((0,ce.t)(gt))return function wt(gt){return new x.y(function(kt){gt.then(function(dt){kt.closed||(kt.next(dt),kt.complete())},function(dt){return kt.error(dt)}).then(null,rt.h)})}(gt);if((0,ke.D)(gt))return it(gt);if((0,Te.T)(gt))return function ht(gt){return new x.y(function(kt){var $e,dt=(0,z.Z)(gt);try{for(dt.s();!($e=dt.n()).done;)if(kt.next($e.value),kt.closed)return}catch(Pe){dt.e(Pe)}finally{dt.f()}kt.complete()})}(gt);if((0,et.L)(gt))return function Me(gt){return it((0,et.Q)(gt))}(gt)}throw(0,Ee.z)(gt)}function it(gt){return new x.y(function(kt){(function ct(gt,kt){var dt,$e,Fe,Pe;return(0,le.mG)(this,void 0,void 0,j().mark(function Ce(){return j().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:Ge.prev=0,dt=(0,le.KL)(gt);case 2:return Ge.next=4,dt.next();case 4:if(($e=Ge.sent).done){Ge.next=12;break}if(kt.next($e.value),!kt.closed){Ge.next=10;break}return Ge.abrupt("return");case 10:Ge.next=2;break;case 12:Ge.next=17;break;case 14:Ge.prev=14,Ge.t0=Ge.catch(0),Fe={error:Ge.t0};case 17:if(Ge.prev=17,Ge.prev=18,!$e||$e.done||!(Pe=dt.return)){Ge.next=22;break}return Ge.next=22,Pe.call(dt);case 22:if(Ge.prev=22,!Fe){Ge.next=25;break}throw Fe.error;case 25:return Ge.finish(22);case 26:return Ge.finish(17);case 27:kt.complete();case 28:case"end":return Ge.stop()}},Ce,null,[[0,14,17,27],[18,,22,26]])}))})(gt,kt).catch(function(dt){return kt.error(dt)})})}},56451:function(Wt,Qe,O){"use strict";O.d(Qe,{T:function(){return ce}});var z=O(8189),H=O(38421),j=O(60515),le=O(77669),M=O(88996);function ce(){for(var x=arguments.length,F=new Array(x),ke=0;ke<x;ke++)F[ke]=arguments[ke];var Ee=(0,le.yG)(F),Te=(0,le._6)(F,1/0),et=F;return et.length?1===et.length?(0,H.Xf)(et[0]):(0,z.J)(Te)((0,M.D)(et,Ee)):j.E}},39646:function(Wt,Qe,O){"use strict";O.d(Qe,{of:function(){return j}});var z=O(77669),H=O(88996);function j(){for(var le=arguments.length,M=new Array(le),ce=0;ce<le;ce++)M[ce]=arguments[ce];var x=(0,z.yG)(M);return(0,H.D)(M,x)}},25403:function(Wt,Qe,O){"use strict";O.d(Qe,{x:function(){return ke}});var z=O(15671),H=O(43144),j=O(97326),le=O(60136),M=O(57777),ce=O(73237),x=O(61120);function ke(Te,et,Je,rt,Ve){return new Ee(Te,et,Je,rt,Ve)}var Ee=function(Te){(0,le.Z)(Je,Te);var et=(0,M.Z)(Je);function Je(rt,Ve,fe,ve,qe,wt){var ht,it,Me,ct;return(0,z.Z)(this,Je),(ct=et.call(this,rt)).onFinalize=qe,ct.shouldUnsubscribe=wt,ct._next=Ve?function(gt){try{Ve(gt)}catch(kt){rt.error(kt)}}:(0,ce.Z)((ht=(0,j.Z)(ct),(0,x.Z)(Je.prototype)),"_next",ht),ct._error=ve?function(gt){try{ve(gt)}catch(kt){rt.error(kt)}finally{this.unsubscribe()}}:(0,ce.Z)((it=(0,j.Z)(ct),(0,x.Z)(Je.prototype)),"_error",it),ct._complete=fe?function(){try{fe()}catch(gt){rt.error(gt)}finally{this.unsubscribe()}}:(0,ce.Z)((Me=(0,j.Z)(ct),(0,x.Z)(Je.prototype)),"_complete",Me),ct}return(0,H.Z)(Je,[{key:"unsubscribe",value:function(){var Ve;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var fe=this.closed;(0,ce.Z)((0,x.Z)(Je.prototype),"unsubscribe",this).call(this),!fe&&(null===(Ve=this.onFinalize)||void 0===Ve||Ve.call(this))}}}]),Je}(O(32961).Lv)},24351:function(Wt,Qe,O){"use strict";O.d(Qe,{b:function(){return j}});var z=O(95577),H=O(30576);function j(le,M){return(0,H.m)(M)?(0,z.z)(le,M,1):(0,z.z)(le,1)}},46590:function(Wt,Qe,O){"use strict";O.d(Qe,{d:function(){return j}});var z=O(54482),H=O(25403);function j(le){return(0,z.e)(function(M,ce){var x=!1;M.subscribe((0,H.x)(ce,function(F){x=!0,ce.next(F)},function(){x||ce.next(le),ce.complete()}))})}},39300:function(Wt,Qe,O){"use strict";O.d(Qe,{h:function(){return j}});var z=O(54482),H=O(25403);function j(le,M){return(0,z.e)(function(ce,x){var F=0;ce.subscribe((0,H.x)(x,function(ke){return le.call(M,ke,F++)&&x.next(ke)}))})}},50590:function(Wt,Qe,O){"use strict";O.d(Qe,{P:function(){return x}});var z=O(86805),H=O(39300),j=O(95698),le=O(46590),M=O(18068),ce=O(44671);function x(F,ke){var Ee=arguments.length>=2;return function(Te){return Te.pipe(F?(0,H.h)(function(et,Je){return F(et,Je,Te)}):ce.y,(0,j.q)(1),Ee?(0,le.d)(ke):(0,M.T)(function(){return new z.K}))}}},54004:function(Wt,Qe,O){"use strict";O.d(Qe,{U:function(){return j}});var z=O(54482),H=O(25403);function j(le,M){return(0,z.e)(function(ce,x){var F=0;ce.subscribe((0,H.x)(x,function(ke){x.next(le.call(M,ke,F++))}))})}},8189:function(Wt,Qe,O){"use strict";O.d(Qe,{J:function(){return j}});var z=O(95577),H=O(44671);function j(){var le=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;return(0,z.z)(H.y,le)}},95577:function(Wt,Qe,O){"use strict";O.d(Qe,{z:function(){return F}});var z=O(54004),H=O(38421),j=O(54482),le=O(39672),M=O(25403);function ce(ke,Ee,Te,et,Je,rt,Ve,fe){var ve=[],qe=0,wt=0,ht=!1,it=function(){ht&&!ve.length&&!qe&&Ee.complete()},Me=function(kt){return qe<et?ct(kt):ve.push(kt)},ct=function gt(kt){rt&&Ee.next(kt),qe++;var dt=!1;(0,H.Xf)(Te(kt,wt++)).subscribe((0,M.x)(Ee,function($e){null==Je||Je($e),rt?Me($e):Ee.next($e)},function(){dt=!0},void 0,function(){if(dt)try{qe--;for(var $e=function(){var Pe=ve.shift();Ve?(0,le.f)(Ee,Ve,function(){return gt(Pe)}):gt(Pe)};ve.length&&qe<et;)$e();it()}catch(Fe){Ee.error(Fe)}}))};return ke.subscribe((0,M.x)(Ee,Me,function(){ht=!0,it()})),function(){null==fe||fe()}}var x=O(30576);function F(ke,Ee){var Te=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return(0,x.m)(Ee)?F(function(et,Je){return(0,z.U)(function(rt,Ve){return Ee(et,rt,Je,Ve)})((0,H.Xf)(ke(et,Je)))},Te):("number"==typeof Ee&&(Te=Ee),(0,j.e)(function(et,Je){return ce(et,Je,ke,Te)}))}},85363:function(Wt,Qe,O){"use strict";O.d(Qe,{Q:function(){return le}});var z=O(39672),H=O(54482),j=O(25403);function le(M){var ce=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,H.e)(function(x,F){x.subscribe((0,j.x)(F,function(ke){return(0,z.f)(F,M,function(){return F.next(ke)},ce)},function(){return(0,z.f)(F,M,function(){return F.complete()},ce)},function(ke){return(0,z.f)(F,M,function(){return F.error(ke)},ce)}))})}},75026:function(Wt,Qe,O){"use strict";O.d(Qe,{R:function(){return le}});var z=O(54482),H=O(25403);function j(M,ce,x,F,ke){return function(Ee,Te){var et=x,Je=ce,rt=0;Ee.subscribe((0,H.x)(Te,function(Ve){var fe=rt++;Je=et?M(Je,Ve,fe):(et=!0,Ve),F&&Te.next(Je)},ke&&function(){et&&Te.next(Je),Te.complete()}))}}function le(M,ce){return(0,z.e)(j(M,ce,arguments.length>=2,!0))}},13099:function(Wt,Qe,O){"use strict";O.d(Qe,{B:function(){return ce}});var z=O(88996),H=O(95698),j=O(77579),le=O(32961),M=O(54482);function ce(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ke=F.connector,Ee=void 0===ke?function(){return new j.x}:ke,Te=F.resetOnError,et=void 0===Te||Te,Je=F.resetOnComplete,rt=void 0===Je||Je,Ve=F.resetOnRefCountZero,fe=void 0===Ve||Ve;return function(ve){var qe=null,wt=null,ht=null,it=0,Me=!1,ct=!1,gt=function(){null==wt||wt.unsubscribe(),wt=null},kt=function(){gt(),qe=ht=null,Me=ct=!1},dt=function(){var Fe=qe;kt(),null==Fe||Fe.unsubscribe()};return(0,M.e)(function($e,Fe){it++,!ct&&!Me&&gt();var Pe=ht=null!=ht?ht:Ee();Fe.add(function(){0==--it&&!ct&&!Me&&(wt=x(dt,fe))}),Pe.subscribe(Fe),qe||(qe=new le.Hp({next:function(at){return Pe.next(at)},error:function(at){ct=!0,gt(),wt=x(kt,et,at),Pe.error(at)},complete:function(){Me=!0,gt(),wt=x(kt,rt),Pe.complete()}}),(0,z.D)($e).subscribe(qe))})(ve)}}function x(F,ke){if(!0===ke)return F(),null;if(!1===ke)return null;for(var Ee=arguments.length,Te=new Array(Ee>2?Ee-2:0),et=2;et<Ee;et++)Te[et-2]=arguments[et];return ke.apply(void 0,Te).pipe((0,H.q)(1)).subscribe(function(){return F()})}},23151:function(Wt,Qe,O){"use strict";O.d(Qe,{d:function(){return Te}});var z=O(15671),H=O(43144),j=O(73237),le=O(61120),M=O(60136),ce=O(57777),x=O(77579),F=O(26063),ke=function(et){(0,M.Z)(rt,et);var Je=(0,ce.Z)(rt);function rt(){var Ve,fe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,ve=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,qe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.l;return(0,z.Z)(this,rt),(Ve=Je.call(this))._bufferSize=fe,Ve._windowTime=ve,Ve._timestampProvider=qe,Ve._buffer=[],Ve._infiniteTimeWindow=!0,Ve._infiniteTimeWindow=ve===1/0,Ve._bufferSize=Math.max(1,fe),Ve._windowTime=Math.max(1,ve),Ve}return(0,H.Z)(rt,[{key:"next",value:function(fe){var qe=this._buffer,wt=this._infiniteTimeWindow,ht=this._timestampProvider,it=this._windowTime;this.isStopped||(qe.push(fe),!wt&&qe.push(ht.now()+it)),this._trimBuffer(),(0,j.Z)((0,le.Z)(rt.prototype),"next",this).call(this,fe)}},{key:"_subscribe",value:function(fe){this._throwIfClosed(),this._trimBuffer();for(var ve=this._innerSubscribe(fe),qe=this._infiniteTimeWindow,ht=this._buffer.slice(),it=0;it<ht.length&&!fe.closed;it+=qe?1:2)fe.next(ht[it]);return this._checkFinalizedStatuses(fe),ve}},{key:"_trimBuffer",value:function(){var fe=this._bufferSize,ve=this._timestampProvider,qe=this._buffer,wt=this._infiniteTimeWindow,ht=(wt?1:2)*fe;if(fe<1/0&&ht<qe.length&&qe.splice(0,qe.length-ht),!wt){for(var it=ve.now(),Me=0,ct=1;ct<qe.length&&qe[ct]<=it;ct+=2)Me=ct;Me&&qe.splice(0,Me+1)}}}]),rt}(x.x),Ee=O(13099);function Te(et,Je,rt){var Ve,fe=!1;if(et&&"object"==typeof et){var ve=et.bufferSize;Ve=void 0===ve?1/0:ve;var qe=et.windowTime;Je=void 0===qe?1/0:qe;var wt=et.refCount;fe=void 0!==wt&&wt,rt=et.scheduler}else Ve=null!=et?et:1/0;return(0,Ee.B)({connector:function(){return new ke(Ve,Je,rt)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:fe})}},68675:function(Wt,Qe,O){"use strict";O.d(Qe,{O:function(){return le}});var z=O(97272),H=O(77669),j=O(54482);function le(){for(var M=arguments.length,ce=new Array(M),x=0;x<M;x++)ce[x]=arguments[x];var F=(0,H.yG)(ce);return(0,j.e)(function(ke,Ee){(F?(0,z.z)(ce,ke,F):(0,z.z)(ce,ke)).subscribe(Ee)})}},49468:function(Wt,Qe,O){"use strict";O.d(Qe,{R:function(){return H}});var z=O(54482);function H(j){var le=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,z.e)(function(M,ce){ce.add(j.schedule(function(){return M.subscribe(ce)},le))})}},63900:function(Wt,Qe,O){"use strict";O.d(Qe,{w:function(){return le}});var z=O(38421),H=O(54482),j=O(25403);function le(M,ce){return(0,H.e)(function(x,F){var ke=null,Ee=0,Te=!1,et=function(){return Te&&!ke&&F.complete()};x.subscribe((0,j.x)(F,function(Je){null==ke||ke.unsubscribe();var rt=0,Ve=Ee++;(0,z.Xf)(M(Je,Ve)).subscribe(ke=(0,j.x)(F,function(fe){return F.next(ce?ce(Je,fe,Ve,rt++):fe)},function(){ke=null,et()}))},function(){Te=!0,et()}))})}},95698:function(Wt,Qe,O){"use strict";O.d(Qe,{q:function(){return le}});var z=O(60515),H=O(54482),j=O(25403);function le(M){return M<=0?function(){return z.E}:(0,H.e)(function(ce,x){var F=0;ce.subscribe((0,j.x)(x,function(ke){++F<=M&&(x.next(ke),M<=F&&x.complete())}))})}},18505:function(Wt,Qe,O){"use strict";O.d(Qe,{b:function(){return M}});var z=O(30576),H=O(54482),j=O(25403),le=O(44671);function M(ce,x,F){var ke=(0,z.m)(ce)||x||F?{next:ce,error:x,complete:F}:ce;return ke?(0,H.e)(function(Ee,Te){var et;null===(et=ke.subscribe)||void 0===et||et.call(ke);var Je=!0;Ee.subscribe((0,j.x)(Te,function(rt){var Ve;null===(Ve=ke.next)||void 0===Ve||Ve.call(ke,rt),Te.next(rt)},function(){var rt;Je=!1,null===(rt=ke.complete)||void 0===rt||rt.call(ke),Te.complete()},function(rt){var Ve;Je=!1,null===(Ve=ke.error)||void 0===Ve||Ve.call(ke,rt),Te.error(rt)},function(){var rt,Ve;Je&&(null===(rt=ke.unsubscribe)||void 0===rt||rt.call(ke)),null===(Ve=ke.finalize)||void 0===Ve||Ve.call(ke)}))}):le.y}},18068:function(Wt,Qe,O){"use strict";O.d(Qe,{T:function(){return le}});var z=O(86805),H=O(54482),j=O(25403);function le(){var ce=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return(0,H.e)(function(x,F){var ke=!1;x.subscribe((0,j.x)(F,function(Ee){ke=!0,F.next(Ee)},function(){return ke?F.complete():F.error(ce())}))})}function M(){return new z.K}},84408:function(Wt,Qe,O){"use strict";O.d(Qe,{o:function(){return Te}});var z=O(15671),H=O(43144),j=O(73237),le=O(61120),M=O(60136),ce=O(57777),F=function(et){(0,M.Z)(rt,et);var Je=(0,ce.Z)(rt);function rt(Ve,fe){return(0,z.Z)(this,rt),Je.call(this)}return(0,H.Z)(rt,[{key:"schedule",value:function(fe){return this}}]),rt}(O(50727).w0),ke={setInterval:function(et){function Je(rt,Ve){return et.apply(this,arguments)}return Je.toString=function(){return et.toString()},Je}(function(et,Je){for(var rt=ke.delegate,Ve=arguments.length,fe=new Array(Ve>2?Ve-2:0),ve=2;ve<Ve;ve++)fe[ve-2]=arguments[ve];return(null==rt?void 0:rt.setInterval)?rt.setInterval.apply(rt,[et,Je].concat(fe)):setInterval.apply(void 0,[et,Je].concat(fe))}),clearInterval:function(et){function Je(rt){return et.apply(this,arguments)}return Je.toString=function(){return et.toString()},Je}(function(et){var Je=ke.delegate;return((null==Je?void 0:Je.clearInterval)||clearInterval)(et)}),delegate:void 0},Ee=O(38737),Te=function(et){(0,M.Z)(rt,et);var Je=(0,ce.Z)(rt);function rt(Ve,fe){var ve;return(0,z.Z)(this,rt),(ve=Je.call(this,Ve,fe)).scheduler=Ve,ve.work=fe,ve.pending=!1,ve}return(0,H.Z)(rt,[{key:"schedule",value:function(fe){var ve=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=fe;var qe=this.id,wt=this.scheduler;return null!=qe&&(this.id=this.recycleAsyncId(wt,qe,ve)),this.pending=!0,this.delay=ve,this.id=this.id||this.requestAsyncId(wt,this.id,ve),this}},{key:"requestAsyncId",value:function(fe,ve){var qe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ke.setInterval(fe.flush.bind(fe,this),qe)}},{key:"recycleAsyncId",value:function(fe,ve){var qe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!=qe&&this.delay===qe&&!1===this.pending)return ve;ke.clearInterval(ve)}},{key:"execute",value:function(fe,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var qe=this._execute(fe,ve);if(qe)return qe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(fe,ve){var wt,qe=!1;try{this.work(fe)}catch(ht){qe=!0,wt=ht||new Error("Scheduled action threw falsy error")}if(qe)return this.unsubscribe(),wt}},{key:"unsubscribe",value:function(){if(!this.closed){var fe=this.id,ve=this.scheduler,qe=ve.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ee.P)(qe,this),null!=fe&&(this.id=this.recycleAsyncId(ve,fe,null)),this.delay=null,(0,j.Z)((0,le.Z)(rt.prototype),"unsubscribe",this).call(this)}}}]),rt}(F)},97565:function(Wt,Qe,O){"use strict";O.d(Qe,{v:function(){return x}});var z=O(15671),H=O(43144),j=O(60136),le=O(57777),M=O(26063),ce=function(){function F(ke){var Ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.now;(0,z.Z)(this,F),this.schedulerActionCtor=ke,this.now=Ee}return(0,H.Z)(F,[{key:"schedule",value:function(Ee){var Te=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,et=arguments.length>2?arguments[2]:void 0;return new this.schedulerActionCtor(this,Ee).schedule(et,Te)}}]),F}();ce.now=M.l.now;var x=function(F){(0,j.Z)(Ee,F);var ke=(0,le.Z)(Ee);function Ee(Te){var et,Je=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce.now;return(0,z.Z)(this,Ee),(et=ke.call(this,Te,Je)).actions=[],et._active=!1,et._scheduled=void 0,et}return(0,H.Z)(Ee,[{key:"flush",value:function(et){var Je=this.actions;if(this._active)Je.push(et);else{var rt;this._active=!0;do{if(rt=et.execute(et.state,et.delay))break}while(et=Je.shift());if(this._active=!1,rt){for(;et=Je.shift();)et.unsubscribe();throw rt}}}}]),Ee}(ce)},34986:function(Wt,Qe,O){"use strict";O.d(Qe,{z:function(){return j}});var z=O(84408),j=new(O(97565).v)(z.o)},26063:function(Wt,Qe,O){"use strict";O.d(Qe,{l:function(){return z}});var z={now:function(){return(z.delegate||Date).now()},delegate:void 0}},43410:function(Wt,Qe,O){"use strict";O.d(Qe,{z:function(){return z}});var z={setTimeout:function(H){function j(le,M){return H.apply(this,arguments)}return j.toString=function(){return H.toString()},j}(function(H,j){for(var le=z.delegate,M=arguments.length,ce=new Array(M>2?M-2:0),x=2;x<M;x++)ce[x-2]=arguments[x];return(null==le?void 0:le.setTimeout)?le.setTimeout.apply(le,[H,j].concat(ce)):setTimeout.apply(void 0,[H,j].concat(ce))}),clearTimeout:function(H){function j(le){return H.apply(this,arguments)}return j.toString=function(){return H.toString()},j}(function(H){var j=z.delegate;return((null==j?void 0:j.clearTimeout)||clearTimeout)(H)}),delegate:void 0}},2202:function(Wt,Qe,O){"use strict";O.d(Qe,{h:function(){return H}});var H=function z(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},48822:function(Wt,Qe,O){"use strict";O.d(Qe,{L:function(){return z}});var z="function"==typeof Symbol&&Symbol.observable||"@@observable"},86805:function(Wt,Qe,O){"use strict";O.d(Qe,{K:function(){return H}});var H=(0,O(83888).d)(function(j){return function(){j(this),this.name="EmptyError",this.message="no elements in sequence"}})},77669:function(Wt,Qe,O){"use strict";O.d(Qe,{_6:function(){return ce},jO:function(){return le},yG:function(){return M}});var z=O(30576);function j(x){return x[x.length-1]}function le(x){return(0,z.m)(j(x))?x.pop():void 0}function M(x){return function H(x){return x&&(0,z.m)(x.schedule)}(j(x))?x.pop():void 0}function ce(x,F){return"number"==typeof j(x)?x.pop():F}},54742:function(Wt,Qe,O){"use strict";O.d(Qe,{D:function(){return M}});var z=Array.isArray,H=Object.getPrototypeOf,j=Object.prototype,le=Object.keys;function M(x){if(1===x.length){var F=x[0];if(z(F))return{args:F,keys:null};if(function ce(x){return x&&"object"==typeof x&&H(x)===j}(F)){var ke=le(F);return{args:ke.map(function(Ee){return F[Ee]}),keys:ke}}}return{args:x,keys:null}}},38737:function(Wt,Qe,O){"use strict";function z(H,j){if(H){var le=H.indexOf(j);0<=le&&H.splice(le,1)}}O.d(Qe,{P:function(){return z}})},83888:function(Wt,Qe,O){"use strict";function z(H){var le=H(function(ce){Error.call(ce),ce.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}O.d(Qe,{d:function(){return z}})},31810:function(Wt,Qe,O){"use strict";function z(H,j){return H.reduce(function(le,M,ce){return le[M]=j[ce],le},{})}O.d(Qe,{n:function(){return z}})},72806:function(Wt,Qe,O){"use strict";O.d(Qe,{x:function(){return j},O:function(){return le}});var z=O(42416),H=null;function j(M){if(z.v.useDeprecatedSynchronousErrorHandling){var ce=!H;if(ce&&(H={errorThrown:!1,error:null}),M(),ce){var x=H;if(H=null,x.errorThrown)throw x.error}}else M()}function le(M){z.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=M)}},39672:function(Wt,Qe,O){"use strict";function z(H,j,le){var M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,ce=arguments.length>4&&void 0!==arguments[4]&&arguments[4],x=j.schedule(function(){le(),ce?H.add(this.schedule(null,M)):this.unsubscribe()},M);if(H.add(x),!ce)return x}O.d(Qe,{f:function(){return z}})},44671:function(Wt,Qe,O){"use strict";function z(H){return H}O.d(Qe,{y:function(){return z}})},81144:function(Wt,Qe,O){"use strict";O.d(Qe,{z:function(){return z}});var z=function(j){return j&&"number"==typeof j.length&&"function"!=typeof j}},12206:function(Wt,Qe,O){"use strict";O.d(Qe,{D:function(){return H}});var z=O(30576);function H(j){return Symbol.asyncIterator&&(0,z.m)(null==j?void 0:j[Symbol.asyncIterator])}},30576:function(Wt,Qe,O){"use strict";function z(H){return"function"==typeof H}O.d(Qe,{m:function(){return z}})},93670:function(Wt,Qe,O){"use strict";O.d(Qe,{c:function(){return j}});var z=O(48822),H=O(30576);function j(le){return(0,H.m)(le[z.L])}},26495:function(Wt,Qe,O){"use strict";O.d(Qe,{T:function(){return j}});var z=O(2202),H=O(30576);function j(le){return(0,H.m)(null==le?void 0:le[z.h])}},28239:function(Wt,Qe,O){"use strict";O.d(Qe,{t:function(){return H}});var z=O(30576);function H(j){return(0,z.m)(null==j?void 0:j.then)}},53260:function(Wt,Qe,O){"use strict";O.d(Qe,{Q:function(){return M},L:function(){return ce}});var z=O(87757),H=O.n(z),j=O(70655),le=O(30576);function M(x){return(0,j.FC)(this,arguments,H().mark(function F(){var ke,Ee,Te;return H().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:ke=x.getReader(),rt.prev=1;case 2:return rt.next=5,(0,j.qq)(ke.read());case 5:if(Te=(Ee=rt.sent).value,!Ee.done){rt.next=12;break}return rt.next=11,(0,j.qq)(void 0);case 11:return rt.abrupt("return",rt.sent);case 12:return rt.next=14,(0,j.qq)(Te);case 14:return rt.next=16,rt.sent;case 16:rt.next=2;break;case 18:return rt.prev=18,ke.releaseLock(),rt.finish(18);case 21:case"end":return rt.stop()}},F,null,[[1,,18,21]])}))}function ce(x){return(0,le.m)(null==x?void 0:x.getReader)}},54482:function(Wt,Qe,O){"use strict";O.d(Qe,{A:function(){return H},e:function(){return j}});var z=O(30576);function H(le){return(0,z.m)(null==le?void 0:le.lift)}function j(le){return function(M){if(H(M))return M.lift(function(ce){try{return le(ce,this)}catch(x){this.error(x)}});throw new TypeError("Unable to lift unknown Observable type")}}},83268:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return M}});var z=O(74902),H=O(54004),j=Array.isArray;function M(ce){return(0,H.U)(function(x){return function le(ce,x){return j(x)?ce.apply(void 0,(0,z.Z)(x)):ce(x)}(ce,x)})}},89635:function(Wt,Qe,O){"use strict";O.d(Qe,{z:function(){return H},U:function(){return j}});var z=O(44671);function H(){for(var le=arguments.length,M=new Array(le),ce=0;ce<le;ce++)M[ce]=arguments[ce];return j(M)}function j(le){return 0===le.length?z.y:1===le.length?le[0]:function(ce){return le.reduce(function(x,F){return F(x)},ce)}}},87849:function(Wt,Qe,O){"use strict";O.d(Qe,{h:function(){return j}});var z=O(42416),H=O(43410);function j(le){H.z.setTimeout(function(){var M=z.v.onUnhandledError;if(!M)throw le;M(le)})}},44532:function(Wt,Qe,O){"use strict";function z(H){return new TypeError("You provided ".concat(null!==H&&"object"==typeof H?"an invalid object":"'".concat(H,"'")," where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable."))}O.d(Qe,{z:function(){return z}})},87757:function(Wt,Qe,O){Wt.exports=O(67854)},70655:function(Wt,Qe,O){"use strict";function le($e,Fe){var Pe={};for(var Ce in $e)Object.prototype.hasOwnProperty.call($e,Ce)&&Fe.indexOf(Ce)<0&&(Pe[Ce]=$e[Ce]);if(null!=$e&&"function"==typeof Object.getOwnPropertySymbols){var at=0;for(Ce=Object.getOwnPropertySymbols($e);at<Ce.length;at++)Fe.indexOf(Ce[at])<0&&Object.prototype.propertyIsEnumerable.call($e,Ce[at])&&(Pe[Ce[at]]=$e[Ce[at]])}return Pe}function F($e,Fe,Pe,Ce){return new(Pe||(Pe=Promise))(function(be,Ge){function Se(Tt){try{te(Ce.next(Tt))}catch(jt){Ge(jt)}}function Mt(Tt){try{te(Ce.throw(Tt))}catch(jt){Ge(jt)}}function te(Tt){Tt.done?be(Tt.value):function at(be){return be instanceof Pe?be:new Pe(function(Ge){Ge(be)})}(Tt.value).then(Se,Mt)}te((Ce=Ce.apply($e,Fe||[])).next())})}function ve($e){return this instanceof ve?(this.v=$e,this):new ve($e)}function qe($e,Fe,Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var at,Ce=Pe.apply($e,Fe||[]),be=[];return at={},Ge("next"),Ge("throw"),Ge("return"),at[Symbol.asyncIterator]=function(){return this},at;function Ge(kn){Ce[kn]&&(at[kn]=function(on){return new Promise(function(Ze,Kt){be.push([kn,on,Ze,Kt])>1||Se(kn,on)})})}function Se(kn,on){try{!function Mt(kn){kn.value instanceof ve?Promise.resolve(kn.value.v).then(te,Tt):jt(be[0][2],kn)}(Ce[kn](on))}catch(Ze){jt(be[0][3],Ze)}}function te(kn){Se("next",kn)}function Tt(kn){Se("throw",kn)}function jt(kn,on){kn(on),be.shift(),be.length&&Se(be[0][0],be[0][1])}}function ht($e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,Fe=$e[Symbol.asyncIterator];return Fe?Fe.call($e):($e=function et($e){var Fe="function"==typeof Symbol&&Symbol.iterator,Pe=Fe&&$e[Fe],Ce=0;if(Pe)return Pe.call($e);if($e&&"number"==typeof $e.length)return{next:function(){return $e&&Ce>=$e.length&&($e=void 0),{value:$e&&$e[Ce++],done:!$e}}};throw new TypeError(Fe?"Object is not iterable.":"Symbol.iterator is not defined.")}($e),Pe={},Ce("next"),Ce("throw"),Ce("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe);function Ce(be){Pe[be]=$e[be]&&function(Ge){return new Promise(function(Se,Mt){!function at(be,Ge,Se,Mt){Promise.resolve(Mt).then(function(te){be({value:te,done:Se})},Ge)}(Se,Mt,(Ge=$e[be](Ge)).done,Ge.value)})}}}O.d(Qe,{_T:function(){return le},mG:function(){return F},qq:function(){return ve},FC:function(){return qe},KL:function(){return ht}})},69808:function(Wt,Qe,O){"use strict";O.d(Qe,{mr:function(){return kt},ez:function(){return Qo},K0:function(){return Je},Do:function(){return $e},V_:function(){return fe},Ye:function(){return Fe},S$:function(){return ct},O5:function(){return Gn},b0:function(){return dt},lw:function(){return rt},EM:function(){return su},JF:function(){return xa},PM:function(){return Ea},w_:function(){return et},bD:function(){return iu},q:function(){return ke},Mx:function(){return Wn},HT:function(){return Te}});var z=O(37762),H=O(97685),j=O(60136),le=O(57777),M=O(43144),ce=O(15671),x=O(5e3),F=null;function ke(){return F}function Te($){F||(F=$)}var et=(0,M.Z)(function $(){(0,ce.Z)(this,$)}),Je=new x.OlP("DocumentToken"),rt=function(){var $=function(){function Q(){(0,ce.Z)(this,Q)}return(0,M.Z)(Q,[{key:"historyGo",value:function(ie){throw new Error("Not implemented")}}]),Q}();return $.\u0275fac=function(se){return new(se||$)},$.\u0275prov=x.Yz7({token:$,factory:function(){return function Ve(){return(0,x.LFG)(ve)}()},providedIn:"platform"}),$}(),fe=new x.OlP("Location Initialized"),ve=function(){var $=function(Q){(0,j.Z)(ie,Q);var se=(0,le.Z)(ie);function ie(_e){var Ae;return(0,ce.Z)(this,ie),(Ae=se.call(this))._doc=_e,Ae._init(),Ae}return(0,M.Z)(ie,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return ke().getBaseHref(this._doc)}},{key:"onPopState",value:function(Ae){var mt=ke().getGlobalEventTarget(this._doc,"window");return mt.addEventListener("popstate",Ae,!1),function(){return mt.removeEventListener("popstate",Ae)}}},{key:"onHashChange",value:function(Ae){var mt=ke().getGlobalEventTarget(this._doc,"window");return mt.addEventListener("hashchange",Ae,!1),function(){return mt.removeEventListener("hashchange",Ae)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(Ae){this.location.pathname=Ae}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(Ae,mt,Ot){qe()?this._history.pushState(Ae,mt,Ot):this.location.hash=Ot}},{key:"replaceState",value:function(Ae,mt,Ot){qe()?this._history.replaceState(Ae,mt,Ot):this.location.hash=Ot}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var Ae=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(Ae)}},{key:"getState",value:function(){return this._history.state}}]),ie}(rt);return $.\u0275fac=function(se){return new(se||$)(x.LFG(Je))},$.\u0275prov=x.Yz7({token:$,factory:function(){return function wt(){return new ve((0,x.LFG)(Je))}()},providedIn:"platform"}),$}();function qe(){return!!window.history.pushState}function ht($,Q){if(0==$.length)return Q;if(0==Q.length)return $;var se=0;return $.endsWith("/")&&se++,Q.startsWith("/")&&se++,2==se?$+Q.substring(1):1==se?$+Q:$+"/"+Q}function it($){var Q=$.match(/#|\?|$/),se=Q&&Q.index||$.length;return $.slice(0,se-("/"===$[se-1]?1:0))+$.slice(se)}function Me($){return $&&"?"!==$[0]?"?"+$:$}var ct=function(){var $=function(){function Q(){(0,ce.Z)(this,Q)}return(0,M.Z)(Q,[{key:"historyGo",value:function(ie){throw new Error("Not implemented")}}]),Q}();return $.\u0275fac=function(se){return new(se||$)},$.\u0275prov=x.Yz7({token:$,factory:function(){return function gt($){var Q=(0,x.LFG)(Je).location;return new dt((0,x.LFG)(rt),Q&&Q.origin||"")}()},providedIn:"root"}),$}(),kt=new x.OlP("appBaseHref"),dt=function(){var $=function(Q){(0,j.Z)(ie,Q);var se=(0,le.Z)(ie);function ie(_e,Ae){var mt;if((0,ce.Z)(this,ie),(mt=se.call(this))._platformLocation=_e,mt._removeListenerFns=[],null==Ae&&(Ae=mt._platformLocation.getBaseHrefFromDOM()),null==Ae)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return mt._baseHref=Ae,mt}return(0,M.Z)(ie,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(Ae){this._removeListenerFns.push(this._platformLocation.onPopState(Ae),this._platformLocation.onHashChange(Ae))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(Ae){return ht(this._baseHref,Ae)}},{key:"path",value:function(){var Ae=arguments.length>0&&void 0!==arguments[0]&&arguments[0],mt=this._platformLocation.pathname+Me(this._platformLocation.search),Ot=this._platformLocation.hash;return Ot&&Ae?"".concat(mt).concat(Ot):mt}},{key:"pushState",value:function(Ae,mt,Ot,Nn){var En=this.prepareExternalUrl(Ot+Me(Nn));this._platformLocation.pushState(Ae,mt,En)}},{key:"replaceState",value:function(Ae,mt,Ot,Nn){var En=this.prepareExternalUrl(Ot+Me(Nn));this._platformLocation.replaceState(Ae,mt,En)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var mt,Ot,Ae=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(Ot=(mt=this._platformLocation).historyGo)||void 0===Ot||Ot.call(mt,Ae)}}]),ie}(ct);return $.\u0275fac=function(se){return new(se||$)(x.LFG(rt),x.LFG(kt,8))},$.\u0275prov=x.Yz7({token:$,factory:$.\u0275fac}),$}(),$e=function(){var $=function(Q){(0,j.Z)(ie,Q);var se=(0,le.Z)(ie);function ie(_e,Ae){var mt;return(0,ce.Z)(this,ie),(mt=se.call(this))._platformLocation=_e,mt._baseHref="",mt._removeListenerFns=[],null!=Ae&&(mt._baseHref=Ae),mt}return(0,M.Z)(ie,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(Ae){this._removeListenerFns.push(this._platformLocation.onPopState(Ae),this._platformLocation.onHashChange(Ae))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var mt=this._platformLocation.hash;return null==mt&&(mt="#"),mt.length>0?mt.substring(1):mt}},{key:"prepareExternalUrl",value:function(Ae){var mt=ht(this._baseHref,Ae);return mt.length>0?"#"+mt:mt}},{key:"pushState",value:function(Ae,mt,Ot,Nn){var En=this.prepareExternalUrl(Ot+Me(Nn));0==En.length&&(En=this._platformLocation.pathname),this._platformLocation.pushState(Ae,mt,En)}},{key:"replaceState",value:function(Ae,mt,Ot,Nn){var En=this.prepareExternalUrl(Ot+Me(Nn));0==En.length&&(En=this._platformLocation.pathname),this._platformLocation.replaceState(Ae,mt,En)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var mt,Ot,Ae=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(Ot=(mt=this._platformLocation).historyGo)||void 0===Ot||Ot.call(mt,Ae)}}]),ie}(ct);return $.\u0275fac=function(se){return new(se||$)(x.LFG(rt),x.LFG(kt,8))},$.\u0275prov=x.Yz7({token:$,factory:$.\u0275fac}),$}(),Fe=function(){var $=function(){function Q(se,ie){var _e=this;(0,ce.Z)(this,Q),this._subject=new x.vpe,this._urlChangeListeners=[],this._platformStrategy=se;var Ae=this._platformStrategy.getBaseHref();this._platformLocation=ie,this._baseHref=it(at(Ae)),this._platformStrategy.onPopState(function(mt){_e._subject.emit({url:_e.path(!0),pop:!0,state:mt.state,type:mt.type})})}return(0,M.Z)(Q,[{key:"path",value:function(){var ie=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(ie))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(ie){var _e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(ie+Me(_e))}},{key:"normalize",value:function(ie){return Q.stripTrailingSlash(function Ce($,Q){return $&&Q.startsWith($)?Q.substring($.length):Q}(this._baseHref,at(ie)))}},{key:"prepareExternalUrl",value:function(ie){return ie&&"/"!==ie[0]&&(ie="/"+ie),this._platformStrategy.prepareExternalUrl(ie)}},{key:"go",value:function(ie){var _e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",Ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(Ae,"",ie,_e),this._notifyUrlChangeListeners(this.prepareExternalUrl(ie+Me(_e)),Ae)}},{key:"replaceState",value:function(ie){var _e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",Ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(Ae,"",ie,_e),this._notifyUrlChangeListeners(this.prepareExternalUrl(ie+Me(_e)),Ae)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var _e,Ae,ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(Ae=(_e=this._platformStrategy).historyGo)||void 0===Ae||Ae.call(_e,ie)}},{key:"onUrlChange",value:function(ie){var _e=this;this._urlChangeListeners.push(ie),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(Ae){_e._notifyUrlChangeListeners(Ae.url,Ae.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",_e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(Ae){return Ae(ie,_e)})}},{key:"subscribe",value:function(ie,_e,Ae){return this._subject.subscribe({next:ie,error:_e,complete:Ae})}}]),Q}();return $.normalizeQueryParams=Me,$.joinWithSlash=ht,$.stripTrailingSlash=it,$.\u0275fac=function(se){return new(se||$)(x.LFG(ct),x.LFG(rt))},$.\u0275prov=x.Yz7({token:$,factory:function(){return function Pe(){return new Fe((0,x.LFG)(ct),(0,x.LFG)(rt))}()},providedIn:"root"}),$}();function at($){return $.replace(/\/index.html$/,"")}function Wn($,Q){Q=encodeURIComponent(Q);var ie,se=(0,z.Z)($.split(";"));try{for(se.s();!(ie=se.n()).done;){var _e=ie.value,Ae=_e.indexOf("="),mt=-1==Ae?[_e,""]:[_e.slice(0,Ae),_e.slice(Ae+1)],Ot=(0,H.Z)(mt,2),En=Ot[1];if(Ot[0].trim()===Q)return decodeURIComponent(En)}}catch(Cn){se.e(Cn)}finally{se.f()}return null}var Gn=function(){var $=function(){function Q(se,ie){(0,ce.Z)(this,Q),this._viewContainer=se,this._context=new Ua,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ie}return(0,M.Z)(Q,[{key:"ngIf",set:function(ie){this._context.$implicit=this._context.ngIf=ie,this._updateView()}},{key:"ngIfThen",set:function(ie){di("ngIfThen",ie),this._thenTemplateRef=ie,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(ie){di("ngIfElse",ie),this._elseTemplateRef=ie,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(ie,_e){return!0}}]),Q}();return $.\u0275fac=function(se){return new(se||$)(x.Y36(x.s_b),x.Y36(x.Rgc))},$.\u0275dir=x.lG2({type:$,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),$}(),Ua=(0,M.Z)(function $(){(0,ce.Z)(this,$),this.$implicit=null,this.ngIf=null});function di($,Q){if(Q&&!Q.createEmbeddedView)throw new Error("".concat($," must be a TemplateRef, but received '").concat((0,x.AaK)(Q),"'."))}var Qo=function(){var $=(0,M.Z)(function Q(){(0,ce.Z)(this,Q)});return $.\u0275fac=function(se){return new(se||$)},$.\u0275mod=x.oAB({type:$}),$.\u0275inj=x.cJS({}),$}(),iu="browser";function Ea($){return"server"===$}var su=function(){var $=(0,M.Z)(function Q(){(0,ce.Z)(this,Q)});return $.\u0275prov=(0,x.Yz7)({token:$,providedIn:"root",factory:function(){return new uu((0,x.LFG)(Je),window)}}),$}(),uu=function(){function $(Q,se){(0,ce.Z)(this,$),this.document=Q,this.window=se,this.offset=function(){return[0,0]}}return(0,M.Z)($,[{key:"setOffset",value:function(se){this.offset=Array.isArray(se)?function(){return se}:se}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(se){this.supportsScrolling()&&this.window.scrollTo(se[0],se[1])}},{key:"scrollToAnchor",value:function(se){if(this.supportsScrolling()){var ie=function Vi($,Q){var se=$.getElementById(Q)||$.getElementsByName(Q)[0];if(se)return se;if("function"==typeof $.createTreeWalker&&$.body&&($.body.createShadowRoot||$.body.attachShadow))for(var ie=$.createTreeWalker($.body,NodeFilter.SHOW_ELEMENT),_e=ie.currentNode;_e;){var Ae=_e.shadowRoot;if(Ae){var mt=Ae.getElementById(Q)||Ae.querySelector('[name="'.concat(Q,'"]'));if(mt)return mt}_e=ie.nextNode()}return null}(this.document,se);ie&&(this.scrollToElement(ie),ie.focus())}}},{key:"setHistoryScrollRestoration",value:function(se){if(this.supportScrollRestoration()){var ie=this.window.history;ie&&ie.scrollRestoration&&(ie.scrollRestoration=se)}}},{key:"scrollToElement",value:function(se){var ie=se.getBoundingClientRect(),_e=ie.left+this.window.pageXOffset,Ae=ie.top+this.window.pageYOffset,mt=this.offset();this.window.scrollTo(_e-mt[0],Ae-mt[1])}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var se=ks(this.window.history)||ks(Object.getPrototypeOf(this.window.history));return!(!se||!se.writable&&!se.set)}catch(ie){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(se){return!1}}}]),$}();function ks($){return Object.getOwnPropertyDescriptor($,"scrollRestoration")}var xa=(0,M.Z)(function $(){(0,ce.Z)(this,$)})},5e3:function(Wt,Qe,O){"use strict";O.d(Qe,{deG:function(){return tr},tb:function(){return C_},AFp:function(){return E_},ip1:function(){return w_},CZH:function(){return V0},hGG:function(){return pb},z2F:function(){return K0},sBO:function(){return eb},Sil:function(){return NE},_Vd:function(){return Gm},EJc:function(){return ME},SBq:function(){return Kp},qLn:function(){return vl},vpe:function(){return Nc},tBr:function(){return fr},XFs:function(){return tn},OlP:function(){return Er},zs3:function(){return Co},ZZ4:function(){return ek},aQg:function(){return tk},soG:function(){return j0},YKP:function(){return Zk},h0i:function(){return $d},PXZ:function(){return WE},R0b:function(){return zf},FiY:function(){return Jt},Lbi:function(){return D_},g9A:function(){return T_},Qsj:function(){return ww},FYo:function(){return Mk},JOm:function(){return P},tp0:function(){return ur},Rgc:function(){return Qp},dDg:function(){return R_},q4F:function(){return Nk},GfV:function(){return Ok},s_b:function(){return Km},ifc:function(){return Pi},eFA:function(){return O_},G48:function(){return XE},Gpc:function(){return kt},X6Q:function(){return JE},_c5:function(){return vb},VLi:function(){return HE},c2e:function(){return I_},zSh:function(){return yh},wAp:function(){return zn},vHH:function(){return Pe},cg1:function(){return ff},kL8:function(){return Fm},dqk:function(){return dr},sIi:function(){return rf},CqO:function(){return Ol},QGY:function(){return wp},F4k:function(){return Ep},RDi:function(){return _e},AaK:function(){return Me},qOj:function(){return wh},TTD:function(){return Tu},_Bn:function(){return Ak},xp6:function(){return Yh},uIk:function(){return ip},ekj:function(){return Nl},Suo:function(){return e_},Xpm:function(){return lt},lG2:function(){return Ci},Yz7:function(){return yn},cJS:function(){return Mr},oAB:function(){return nn},Yjl:function(){return hi},Y36:function(){return zi},_UZ:function(){return Id},BQk:function(){return Ad},ynx:function(){return Sd},qZA:function(){return Cd},TgZ:function(){return Dd},EpF:function(){return am},n5z:function(){return Wa},LFG:function(){return ge},$8M:function(){return Es},$Z:function(){return Gy},NdJ:function(){return sm},CRH:function(){return t_},oxw:function(){return Tp},ALo:function(){return Wk},lcZ:function(){return Kk},Q6J:function(){return rm},iGM:function(){return Xk},MAs:function(){return wd},CHM:function(){return Mo},LSH:function(){return hc},YNc:function(){return op},_uU:function(){return Em},Oqu:function(){return ac},hij:function(){return Zd}});var z=O(73237),H=O(61120),j=O(97326),x=(O(97685),O(4942),O(84506),O(37762)),F=O(74902),ke=O(5647),Ee=O(43144),Te=O(15671),et=O(60136),Je=O(57777),rt=O(35724),Ve=O(50727),fe=O(77579),ve=O(69751),qe=O(56451),wt=O(13099);function ht(n){for(var a in n)if(n[a]===ht)return a;throw Error("Could not find renamed property on target object.")}function it(n,a){for(var s in a)a.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=a[s])}function Me(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Me).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return"".concat(n.overriddenName);if(n.name)return"".concat(n.name);var a=n.toString();if(null==a)return""+a;var s=a.indexOf("\n");return-1===s?a:a.substring(0,s)}function ct(n,a){return null==n||""===n?null===a?"":a:null==a||""===a?n:n+" "+a}var gt=ht({__forward_ref__:ht});function kt(n){return n.__forward_ref__=kt,n.toString=function(){return Me(this())},n}function dt(n){return $e(n)?n():n}function $e(n){return"function"==typeof n&&n.hasOwnProperty(gt)&&n.__forward_ref__===kt}var Pe=function(n){(0,et.Z)(s,n);var a=(0,Je.Z)(s);function s(o,c){var d;return(0,Te.Z)(this,s),(d=a.call(this,function Ce(n,a){var s="NG0".concat(Math.abs(n));return"".concat(s).concat(a?": "+a:"")}(o,c))).code=o,d}return(0,Ee.Z)(s)}((0,rt.Z)(Error));function at(n){return"string"==typeof n?n:null==n?"":String(n)}function be(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():at(n)}function te(n,a){var s=a?" in ".concat(a):"";throw new Pe(-201,"No provider for ".concat(be(n)," found").concat(s))}function Rn(n,a){null==n&&function Sn(n,a,s,o){throw new Error("ASSERTION ERROR: ".concat(n)+(null==o?"":" [Expected=> ".concat(s," ").concat(o," ").concat(a," <=Actual]")))}(a,n,null,"!=")}function yn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Mr(n){return{providers:n.providers||[],imports:n.imports||[]}}function cr(n){return Lr(n,Xr)||Lr(n,ma)}function Lr(n,a){return n.hasOwnProperty(a)?n[a]:null}function Ki(n){return n&&(n.hasOwnProperty(ra)||n.hasOwnProperty(ls))?n[ra]:null}var ia,Xr=ht({"\u0275prov":ht}),ra=ht({"\u0275inj":ht}),ma=ht({ngInjectableDef:ht}),ls=ht({ngInjectorDef:ht}),tn=function(){return(tn=tn||{})[tn.Default=0]="Default",tn[tn.Host=1]="Host",tn[tn.Self=2]="Self",tn[tn.SkipSelf=4]="SkipSelf",tn[tn.Optional=8]="Optional",tn}();function Qn(){return ia}function _n(n){var a=ia;return ia=n,a}function Un(n,a,s){var o=cr(n);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:s&tn.Optional?null:void 0!==a?a:void te(Me(n),"Injector")}function Pn(n){return{toString:n}.toString()}var Dr=function(){return(Dr=Dr||{})[Dr.OnPush=0]="OnPush",Dr[Dr.Default=1]="Default",Dr}(),Pi=function(){return(n=Pi||(Pi={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Pi;var n}(),Zr="undefined"!=typeof globalThis&&globalThis,Fi="undefined"!=typeof window&&window,Or="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ur="undefined"!=typeof global&&global,dr=Zr||Ur||Fi||Or,vn={},zt=[],qt=ht({"\u0275cmp":ht}),Mn=ht({"\u0275dir":ht}),kr=ht({"\u0275pipe":ht}),On=ht({"\u0275mod":ht}),Xe=ht({"\u0275fac":ht}),Ne=ht({__NG_ELEMENT_ID__:ht}),Le=0;function lt(n){return Pn(function(){var s={},o={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Dr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||zt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Pi.Emulated,id:"c",styles:n.styles||zt,_:null,setInput:null,schemas:n.schemas||null,tView:null},c=n.directives,d=n.features,w=n.pipes;return o.id+=Le++,o.inputs=ni(n.inputs,s),o.outputs=ni(n.outputs),d&&d.forEach(function(S){return S(o)}),o.directiveDefs=c?function(){return("function"==typeof c?c():c).map(Dt)}:null,o.pipeDefs=w?function(){return("function"==typeof w?w():w).map(pn)}:null,o})}function Dt(n){return Rr(n)||function Mi(n){return n[Mn]||null}(n)}function pn(n){return function Zi(n){return n[kr]||null}(n)}var An={};function nn(n){return Pn(function(){var a={type:n.type,bootstrap:n.bootstrap||zt,declarations:n.declarations||zt,imports:n.imports||zt,exports:n.exports||zt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(An[n.id]=n.type),a})}function ni(n,a){if(null==n)return vn;var s={};for(var o in n)if(n.hasOwnProperty(o)){var c=n[o],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),s[c]=o,a&&(a[c]=d)}return s}var Ci=lt;function hi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Rr(n){return n[qt]||null}function ri(n,a){var s=n[On]||null;if(!s&&!0===a)throw new Error("Type ".concat(Me(n)," does not have '\u0275mod' property."));return s}function Oi(n){return Array.isArray(n)&&"object"==typeof n[1]}function Br(n){return Array.isArray(n)&&!0===n[1]}function Ps(n){return 0!=(8&n.flags)}function Ms(n){return 2==(2&n.flags)}function cs(n){return 1==(1&n.flags)}function ze(n){return null!==n.template}function ut(n){return 0!=(512&n[2])}function ki(n,a){return n.hasOwnProperty(Xe)?n[Xe]:null}var ca=function(){function n(a,s,o){(0,Te.Z)(this,n),this.previousValue=a,this.currentValue=s,this.firstChange=o}return(0,Ee.Z)(n,[{key:"isFirstChange",value:function(){return this.firstChange}}]),n}();function Tu(){return Yi}function Yi(n){return n.type.prototype.ngOnChanges&&(n.setInput=oo),Ea}function Ea(){var n=ju(this),a=null==n?void 0:n.current;if(a){var s=n.previous;if(s===vn)n.previous=a;else for(var o in a)s[o]=a[o];n.current=null,this.ngOnChanges(a)}}function oo(n,a,s,o){var c=ju(n)||function su(n,a){return n[au]=a}(n,{previous:vn,current:null}),d=c.current||(c.current={}),w=c.previous,S=this.declaredInputs[s],L=w[S];d[S]=new ca(L&&L.currentValue,a,w===vn),n[o]=a}Tu.ngInherit=!0;var au="__ngSimpleChanges__";function ju(n){return n[au]||null}var $="math",ie=void 0;function _e(n){ie=n}function Ot(n){return!!n.listen}var Nn={createRenderer:function(a,s){return function Ae(){return void 0!==ie?ie:"undefined"!=typeof document?document:void 0}()}};function Cn(n){for(;Array.isArray(n);)n=n[0];return n}function Qr(n,a){return Cn(a[n])}function oi(n,a){return Cn(a[n.index])}function Si(n,a){return n.data[a]}function vr(n,a){return n[a]}function li(n,a){var s=a[n];return Oi(s)?s:s[0]}function Qi(n){return 4==(4&n[2])}function ba(n){return 128==(128&n[2])}function ja(n,a){return null==a?null:n[a]}function lo(n){n[18]=0}function co(n,a){n[5]+=a;for(var s=n,o=n[3];null!==o&&(1===a&&1===s[5]||-1===a&&0===s[5]);)o[5]+=a,s=o,o=o[3]}var Kn={lFrame:$u(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Cu(){return Kn.bindingsEnabled}function Gt(){return Kn.lFrame.lView}function pr(){return Kn.lFrame.tView}function Mo(n){return Kn.lFrame.contextLView=n,n[8]}function Ni(){for(var n=Iu();null!==n&&64===n.type;)n=n.parent;return n}function Iu(){return Kn.lFrame.currentTNode}function es(n,a){var s=Kn.lFrame;s.currentTNode=n,s.isParent=a}function Su(){return Kn.lFrame.isParent}function Gu(){Kn.lFrame.isParent=!1}function ho(){return Kn.isInCheckNoChangesMode}function Jo(n){Kn.isInCheckNoChangesMode=n}function Fs(){return Kn.lFrame.bindingIndex++}function Wu(n,a){var s=Kn.lFrame;s.bindingIndex=s.bindingRootIndex=n,ci(a)}function ci(n){Kn.lFrame.currentDirectiveIndex=n}function Xo(){return Kn.lFrame.currentQueryIndex}function Ku(n){Kn.lFrame.currentQueryIndex=n}function Bl(n){var a=n[1];return 2===a.type?a.declTNode:1===a.type?n[6]:null}function Oo(n,a,s){if(s&tn.SkipSelf){for(var o=a,c=n;!(null!==(o=o.parent)||s&tn.Host||null===(o=Bl(c))||(c=c[15],10&o.type)););if(null===o)return!1;a=o,n=c}var d=Kn.lFrame=cu();return d.currentTNode=a,d.lView=n,!0}function Ga(n){var a=cu(),s=n[1];Kn.lFrame=a,a.currentTNode=s.firstChild,a.lView=n,a.tView=s,a.contextLView=n,a.bindingIndex=s.bindingStartIndex,a.inI18n=!1}function cu(){var n=Kn.lFrame,a=null===n?null:n.child;return null===a?$u(n):a}function $u(n){var a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=a),a}function za(){var n=Kn.lFrame;return Kn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var fu=za;function _i(){var n=za();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function wl(n){var a=Kn.lFrame.contextLView=function vo(n,a){for(;n>0;)a=a[15],n--;return a}(n,Kn.lFrame.contextLView);return a[8]}function Xi(){return Kn.lFrame.selectedIndex}function ns(n){Kn.lFrame.selectedIndex=n}function Pr(){var n=Kn.lFrame;return Si(n.tView,n.selectedIndex)}function Cr(n,a){for(var s=a.directiveStart,o=a.directiveEnd;s<o;s++){var d=n.data[s].type.prototype,w=d.ngAfterContentInit,S=d.ngAfterContentChecked,L=d.ngAfterViewInit,q=d.ngAfterViewChecked,ae=d.ngOnDestroy;w&&(n.contentHooks||(n.contentHooks=[])).push(-s,w),S&&((n.contentHooks||(n.contentHooks=[])).push(s,S),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,S)),L&&(n.viewHooks||(n.viewHooks=[])).push(-s,L),q&&((n.viewHooks||(n.viewHooks=[])).push(s,q),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,q)),null!=ae&&(n.destroyHooks||(n.destroyHooks=[])).push(s,ae)}}function _s(n,a,s){hu(n,a,3,s)}function go(n,a,s,o){(3&n[2])===s&&hu(n,a,s,o)}function Ru(n,a){var s=n[2];(3&s)===a&&(s&=2047,n[2]=s+=1)}function hu(n,a,s,o){for(var d=null!=o?o:-1,w=a.length-1,S=0,L=void 0!==o?65535&n[18]:0;L<w;L++)if("number"==typeof a[L+1]){if(S=a[L],null!=o&&S>=o)break}else a[L]<0&&(n[18]+=65536),(S<d||-1==d)&&(Us(n,s,a,L),n[18]=(4294901760&n[18])+L+2),L++}function Us(n,a,s,o){var c=s[o]<0,d=s[o+1],S=n[c?-s[o]:s[o]];if(c){if(n[2]>>11<n[18]>>16&&(3&n[2])===a){n[2]+=2048;try{d.call(S)}finally{}}}else try{d.call(S)}finally{}}var Vs=(0,Ee.Z)(function n(a,s,o){(0,Te.Z)(this,n),this.factory=a,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=o});function wi(n,a,s){for(var o=Ot(n),c=0;c<s.length;){var d=s[c];if("number"==typeof d){if(0!==d)break;c++;var w=s[c++],S=s[c++],L=s[c++];o?n.setAttribute(a,S,L,w):a.setAttributeNS(w,S,L)}else{var q=d,ae=s[++c];Ta(q)?o&&n.setProperty(a,q,ae):o?n.setAttribute(a,q,ae):a.setAttribute(q,ae),c++}}return c}function nl(n){return 3===n||4===n||6===n}function Ta(n){return 64===n.charCodeAt(0)}function xs(n,a){if(null!==a&&0!==a.length)if(null===n||0===n.length)n=a.slice();else for(var s=-1,o=0;o<a.length;o++){var c=a[o];"number"==typeof c?s=c:0===s||qs(n,s,c,null,-1===s||2===s?a[++o]:null)}return n}function qs(n,a,s,o,c){var d=0,w=n.length;if(-1===a)w=-1;else for(;d<n.length;){var S=n[d++];if("number"==typeof S){if(S===a){w=-1;break}if(S>a){w=d-1;break}}}for(;d<n.length;){var L=n[d];if("number"==typeof L)break;if(L===s){if(null===o)return void(null!==c&&(n[d+1]=c));if(o===n[d+1])return void(n[d+2]=c)}d++,null!==o&&d++,null!==c&&d++}-1!==w&&(n.splice(w,0,a),d=w+1),n.splice(d++,0,s),null!==o&&n.splice(d++,0,o),null!==c&&n.splice(d++,0,c)}function Ys(n){return-1!==n}function ws(n){return 32767&n}function fs(n,a){for(var s=function zr(n){return n>>16}(n),o=a;s>0;)o=o[15],s--;return o}var js=!0;function Qu(n){var a=js;return js=n,a}var Ei=0;function A(n,a){var s=C(n,a);if(-1!==s)return s;var o=a[1];o.firstCreatePass&&(n.injectorIndex=a.length,U(o.data,n),U(a,null),U(o.blueprint,null));var c=D(n,a),d=n.injectorIndex;if(Ys(c))for(var w=ws(c),S=fs(c,a),L=S[1].data,q=0;q<8;q++)a[d+q]=S[w+q]|L[w+q];return a[d+8]=c,d}function U(n,a){n.push(0,0,0,0,0,0,0,0,a)}function C(n,a){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===a[n.injectorIndex+8]?-1:n.injectorIndex}function D(n,a){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;for(var s=0,o=null,c=a;null!==c;){var d=c[1],w=d.type;if(null===(o=2===w?d.declTNode:1===w?c[6]:null))return-1;if(s++,c=c[15],-1!==o.injectorIndex)return o.injectorIndex|s<<16}return-1}function N(n,a,s){!function yo(n,a,s){var o;"string"==typeof s?o=s.charCodeAt(0)||0:s.hasOwnProperty(Ne)&&(o=s[Ne]),null==o&&(o=s[Ne]=Ei++);var c=255&o;a.data[n+(c>>5)]|=1<<c}(n,a,s)}function oe(n,a,s){if(s&tn.Optional)return n;te(a,"NodeInjector")}function pe(n,a,s,o){if(s&tn.Optional&&void 0===o&&(o=null),0==(s&(tn.Self|tn.Host))){var c=n[9],d=_n(void 0);try{return c?c.get(a,o,s&tn.Optional):Un(a,o,s&tn.Optional)}finally{_n(d)}}return oe(o,a,s)}function Ue(n,a,s){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tn.Default,c=arguments.length>4?arguments[4]:void 0;if(null!==n){var d=sr(s);if("function"==typeof d){if(!Oo(a,n,o))return o&tn.Host?oe(c,s,o):pe(a,s,o,c);try{var w=d(o);if(null!=w||o&tn.Optional)return w;te(s)}finally{fu()}}else if("number"==typeof d){var S=null,L=C(n,a),q=-1,ae=o&tn.Host?a[16][6]:null;for((-1===L||o&tn.SkipSelf)&&(-1!==(q=-1===L?D(n,a):a[L+8])&&ea(o,!1)?(S=a[1],L=ws(q),a=fs(q,a)):L=-1);-1!==L;){var ye=a[1];if(xi(d,L,ye.data)){var De=Ke(L,a,s,S,o,ae);if(De!==He)return De}-1!==(q=a[L+8])&&ea(o,a[1].data[L+8]===ae)&&xi(d,L,a)?(S=ye,L=ws(q),a=fs(q,a)):L=-1}}}return pe(a,s,o,c)}var He={};function vt(){return new ha(Ni(),Gt())}function Ke(n,a,s,o,c,d){var w=a[1],S=w.data[n+8],ae=Et(S,w,s,null==o?Ms(S)&&js:o!=w&&0!=(3&S.type),c&tn.Host&&d===S);return null!==ae?Vn(a,w,ae,S):He}function Et(n,a,s,o,c){for(var d=n.providerIndexes,w=a.data,S=1048575&d,L=n.directiveStart,ae=d>>20,De=c?S+ae:n.directiveEnd,xe=o?S:S+ae;xe<De;xe++){var Ct=w[xe];if(xe<L&&s===Ct||xe>=L&&Ct.type===s)return xe}if(c){var xt=w[L];if(xt&&ze(xt)&&xt.type===s)return L}return null}function Vn(n,a,s,o){var c=n[s],d=a.data;if(function qu(n){return n instanceof Vs}(c)){var w=c;w.resolving&&function Ge(n,a){var s=a?". Dependency path: ".concat(a.join(" > ")," > ").concat(n):"";throw new Pe(-200,"Circular dependency in DI detected for ".concat(n).concat(s))}(be(d[s]));var S=Qu(w.canSeeViewProviders);w.resolving=!0;var L=w.injectImpl?_n(w.injectImpl):null;Oo(n,o,tn.Default);try{c=n[s]=w.factory(void 0,d,n,o),a.firstCreatePass&&s>=o.directiveStart&&function Vl(n,a,s){var o=a.type.prototype,d=o.ngOnInit,w=o.ngDoCheck;if(o.ngOnChanges){var S=Yi(a);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,S),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,S)}d&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,d),w&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,w),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,w))}(s,d[s],a)}finally{null!==L&&_n(L),Qu(S),w.resolving=!1,fu()}}return c}function sr(n){if("string"==typeof n)return n.charCodeAt(0)||0;var a=n.hasOwnProperty(Ne)?n[Ne]:void 0;return"number"==typeof a?a>=0?255&a:vt:a}function xi(n,a,s){return!!(s[a+(n>>5)]&1<<n)}function ea(n,a){return!(n&tn.Self||n&tn.Host&&a)}var ha=function(){function n(a,s){(0,Te.Z)(this,n),this._tNode=a,this._lView=s}return(0,Ee.Z)(n,[{key:"get",value:function(s,o,c){return Ue(this._tNode,this._lView,s,c,o)}}]),n}();function Wa(n){return Pn(function(){for(var a=n.prototype.constructor,s=a[Xe]||vu(a),o=Object.prototype,c=Object.getPrototypeOf(n.prototype).constructor;c&&c!==o;){var d=c[Xe]||vu(c);if(d&&d!==s)return d;c=Object.getPrototypeOf(c)}return function(w){return new w}})}function vu(n){return $e(n)?function(){var a=vu(dt(n));return a&&a()}:ki(n)}function Es(n){return function J(n,a){if("class"===a)return n.classes;if("style"===a)return n.styles;var s=n.attrs;if(s)for(var o=s.length,c=0;c<o;){var d=s[c];if(nl(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<o&&"string"==typeof s[c];)c++;else{if(d===a)return s[c+1];c+=2}}return null}(Ni(),n)}var Hs="__parameters__";function gr(n,a,s){return Pn(function(){var o=function xl(n){return function(){if(n){var s=n.apply(void 0,arguments);for(var o in s)this[o]=s[o]}}}(a);function c(){for(var d=arguments.length,w=new Array(d),S=0;S<d;S++)w[S]=arguments[S];if(this instanceof c)return o.apply(this,w),this;var L=(0,ke.Z)(c,w);return q.annotation=L,q;function q(ae,ye,De){for(var xe=ae.hasOwnProperty(Hs)?ae[Hs]:Object.defineProperty(ae,Hs,{value:[]})[Hs];xe.length<=De;)xe.push(null);return(xe[De]=xe[De]||[]).push(L),ae}}return s&&(c.prototype=Object.create(s.prototype)),c.prototype.ngMetadataName=n,c.annotationCls=c,c})}var Er=function(){function n(a,s){(0,Te.Z)(this,n),this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=yn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}return(0,Ee.Z)(n,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),n}(),tr=new Er("AnalyzeForEntryComponents");function Hi(n,a){void 0===a&&(a=n);for(var s=0;s<n.length;s++){var o=n[s];Array.isArray(o)?(a===n&&(a=n.slice(0,s)),Hi(o,a)):a!==n&&a.push(o)}return a}function is(n,a){n.forEach(function(s){return Array.isArray(s)?is(s,a):a(s)})}function _o(n,a,s){a>=n.length?n.push(s):n.splice(a,0,s)}function Mu(n,a){return a>=n.length-1?n.pop():n.splice(a,1)[0]}function sa(n,a,s){var o=ds(n,a);return o>=0?n[1|o]=s:function Ou(n,a,s,o){var c=n.length;if(c==a)n.push(s,o);else if(1===c)n.push(o,n[0]),n[0]=s;else{for(c--,n.push(n[c-1],n[c]);c>a;)n[c]=n[c-2],c--;n[a]=s,n[a+1]=o}}(n,o=~o,a,s),o}function Ts(n,a){var s=ds(n,a);if(s>=0)return n[1|s]}function ds(n,a){return function pu(n,a,s){for(var o=0,c=n.length>>s;c!==o;){var d=o+(c-o>>1),w=n[d<<s];if(a===w)return d<<s;w>a?c=d:o=d+1}return~(c<<s)}(n,a,1)}var mu={},sl="__NG_DI_FLAG__",to="ngTempTokenPath",vs=/\n/gm,G="__source",W=ht({provide:String,useValue:ht}),ee=void 0;function ne(n){var a=ee;return ee=n,a}function me(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tn.Default;if(void 0===ee){var s="";throw new Pe(203,s)}return null===ee?Un(n,void 0,a):ee.get(n,a&tn.Optional?null:void 0,a)}function ge(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tn.Default;return(Qn()||me)(dt(n),a)}var Oe=ge;function bt(n){for(var a=[],s=0;s<n.length;s++){var o=dt(n[s]);if(Array.isArray(o)){if(0===o.length)throw new Pe(900,"");for(var d=void 0,w=tn.Default,S=0;S<o.length;S++){var L=o[S],q=Ht(L);"number"==typeof q?-1===q?d=L.token:w|=q:d=L}a.push(ge(d,w))}else a.push(ge(o))}return a}function Rt(n,a){return n[sl]=a,n.prototype[sl]=a,n}function Ht(n){return n[sl]}function Pt(n,a,s,o){var c=n[to];throw a[G]&&c.unshift(a[G]),n.message=function bn(n,a,s){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;var c=Me(a);if(Array.isArray(a))c=a.map(Me).join(" -> ");else if("object"==typeof a){var d=[];for(var w in a)if(a.hasOwnProperty(w)){var S=a[w];d.push(w+":"+("string"==typeof S?JSON.stringify(S):Me(S)))}c="{".concat(d.join(", "),"}")}return"".concat(s).concat(o?"("+o+")":"","[").concat(c,"]: ").concat(n.replace(vs,"\n  "))}("\n"+n.message,c,s,o),n.ngTokenPath=c,n[to]=null,n}var fr=Rt(gr("Inject",function(n){return{token:n}}),-1),Jt=Rt(gr("Optional"),8),ur=Rt(gr("SkipSelf"),4),ql=function(){function n(a){(0,Te.Z)(this,n),this.changingThisBreaksApplicationSecurity=a}return(0,Ee.Z)(n,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see https://g.co/ng/security#xss)"}}]),n}();function h(n){return n instanceof ql?n.changingThisBreaksApplicationSecurity:n}var In=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,or=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Tr=function(){return(Tr=Tr||{})[Tr.NONE=0]="NONE",Tr[Tr.HTML=1]="HTML",Tr[Tr.STYLE=2]="STYLE",Tr[Tr.SCRIPT=3]="SCRIPT",Tr[Tr.URL=4]="URL",Tr[Tr.RESOURCE_URL=5]="RESOURCE_URL",Tr}();function hc(n){var a=function As(){var n=Gt();return n&&n[12]}();return a?a.sanitize(Tr.URL,n)||"":function m(n,a){var s=function R(n){return n instanceof ql&&n.getTypeName()||null}(n);if(null!=s&&s!==a){if("ResourceURL"===s&&"URL"===a)return!0;throw new Error("Required a safe ".concat(a,", got a ").concat(s," (see https://g.co/ng/security#xss)"))}return s===a}(n,"URL")?h(n):function br(n){return(n=String(n)).match(In)||n.match(or)?n:"unsafe:"+n}(at(n))}var ua="__ngContext__";function pa(n,a){n[ua]=a}function Xs(n){var a=function Sl(n){return n[ua]||null}(n);return a?Array.isArray(a)?a:a.lView:null}function io(n){return n.ngOriginalError}function Zh(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];n.error.apply(n,s)}var vl=function(){function n(){(0,Te.Z)(this,n),this._console=console}return(0,Ee.Z)(n,[{key:"handleError",value:function(s){var o=this._findOriginalError(s),c=function qf(n){return n&&n.ngErrorLogger||Zh}(s);c(this._console,"ERROR",s),o&&c(this._console,"ORIGINAL ERROR",o)}},{key:"_findOriginalError",value:function(s){for(var o=s&&io(s);o&&io(o);)o=io(o);return o||null}}]),n}(),Vh=function(){return("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(dr)}();function y(n){return n instanceof Function?n():n}var P=function(){return(P=P||{})[P.Important=1]="Important",P[P.DashCase=2]="DashCase",P}();function Y(n,a){return undefined(n,a)}function nt(n){var a=n[3];return Br(a)?a[3]:a}function rn(n){return pi(n[13])}function an(n){return pi(n[4])}function pi(n){for(;null!==n&&!Br(n);)n=n[4];return n}function Ma(n,a,s,o,c){if(null!=o){var d,w=!1;Br(o)?d=o:Oi(o)&&(w=!0,o=o[0]);var S=Cn(o);0===n&&null!==s?null==c?ag(a,s,S):Wo(a,s,S,c||null,!0):1===n&&null!==s?Wo(a,s,S,c||null,!0):2===n?function sg(n,a,s){var o=jh(n,a);o&&function Gc(n,a,s,o){Ot(n)?n.removeChild(a,s,o):a.removeChild(s)}(n,o,a,s)}(a,S,w):3===n&&a.destroyNode(S),null!=d&&function Tf(n,a,s,o,c){var d=s[7];d!==Cn(s)&&Ma(a,n,o,d,c);for(var S=10;S<s.length;S++){var L=s[S];gc(L[1],L,n,a,o,d)}}(a,n,d,s,c)}}function Sr(n,a){return Ot(n)?n.createText(a):n.createTextNode(a)}function zo(n,a,s){if(Ot(n))return n.createElement(a,s);var o=null!==s?function se(n){var a=n.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":a===$?"http://www.w3.org/1998/MathML/":null}(s):null;return null===o?n.createElement(a):n.createElementNS(o,a)}function iv(n,a){var s=n[9],o=s.indexOf(a),c=a[3];1024&a[2]&&(a[2]&=-1025,co(c,-1)),s.splice(o,1)}function av(n,a){if(!(n.length<=10)){var s=10+a,o=n[s];if(o){var c=o[17];null!==c&&c!==n&&iv(c,o),a>0&&(n[s-1][4]=o[4]);var d=Mu(n,10+a);!function Hc(n,a){gc(n,a,a[11],2,null,null),a[0]=null,a[6]=null}(o[1],o);var w=d[19];null!==w&&w.detachView(d[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}}function sv(n,a){if(!(256&a[2])){var s=a[11];Ot(s)&&s.destroyNode&&gc(n,a,s,3,null,null),function Yf(n){var a=n[13];if(!a)return uv(n[1],n);for(;a;){var s=null;if(Oi(a))s=a[13];else{var o=a[10];o&&(s=o)}if(!s){for(;a&&!a[4]&&a!==n;)Oi(a)&&uv(a[1],a),a=a[3];null===a&&(a=n),Oi(a)&&uv(a[1],a),s=a&&a[4]}a=s}}(a)}}function uv(n,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function ig(n,a){var s;if(null!=n&&null!=(s=n.destroyHooks))for(var o=0;o<s.length;o+=2){var c=a[s[o]];if(!(c instanceof Vs)){var d=s[o+1];if(Array.isArray(d))for(var w=0;w<d.length;w+=2){var S=c[d[w]],L=d[w+1];try{L.call(S)}finally{}}else try{d.call(c)}finally{}}}}(n,a),function rg(n,a){var s=n.cleanup,o=a[7],c=-1;if(null!==s)for(var d=0;d<s.length-1;d+=2)if("string"==typeof s[d]){var w=s[d+1],S="function"==typeof w?w(a):Cn(a[w]),L=o[c=s[d+2]],q=s[d+3];"boolean"==typeof q?S.removeEventListener(s[d],L,q):q>=0?o[c=q]():o[c=-q].unsubscribe(),d+=2}else{var ae=o[c=s[d+1]];s[d].call(ae)}if(null!==o){for(var ye=c+1;ye<o.length;ye++)(0,o[ye])();a[7]=null}}(n,a),1===a[1].type&&Ot(a[11])&&a[11].destroy();var s=a[17];if(null!==s&&Br(a[3])){s!==a[3]&&iv(s,a);var o=a[19];null!==o&&o.detachView(n)}}}function Ut(n,a,s){return function ov(n,a,s){for(var o=a;null!==o&&40&o.type;)o=(a=o).parent;if(null===o)return s[0];if(2&o.flags){var c=n.data[o.directiveStart].encapsulation;if(c===Pi.None||c===Pi.Emulated)return null}return oi(o,s)}(n,a.parent,s)}function Wo(n,a,s,o,c){Ot(n)?n.insertBefore(a,s,o,c):a.insertBefore(s,o,c)}function ag(n,a,s){Ot(n)?n.appendChild(a,s):a.appendChild(s)}function Ef(n,a,s,o,c){null!==o?Wo(n,a,s,o,c):ag(n,a,s)}function jh(n,a){return Ot(n)?n.parentNode(a):a.parentNode}var cv=function Hh(n,a,s){return 40&n.type?oi(n,s):null};function zh(n,a,s,o){var c=Ut(n,o,a),d=a[11],S=function lv(n,a,s){return cv(n,a,s)}(o.parent||a[6],o,a);if(null!=c)if(Array.isArray(s))for(var L=0;L<s.length;L++)Ef(d,c,s[L],S,!1);else Ef(d,c,s,S,!1)}function bf(n,a){if(null!==a){var s=a.type;if(3&s)return oi(a,n);if(4&s)return Wh(-1,n[a.index]);if(8&s){var o=a.child;if(null!==o)return bf(n,o);var c=n[a.index];return Br(c)?Wh(-1,c):Cn(c)}if(32&s)return Y(a,n)()||Cn(n[a.index]);var S=Qf(n,a);return null!==S?Array.isArray(S)?S[0]:bf(nt(n[16]),S):bf(n,a.next)}return null}function Qf(n,a){return null!==a?n[16][6].projection[a.projection]:null}function Wh(n,a){var s=10+n+1;if(s<a.length){var o=a[s],c=o[1].firstChild;if(null!==c)return bf(o,c)}return a[7]}function Kh(n,a,s,o,c,d,w){for(;null!=s;){var S=o[s.index],L=s.type;if(w&&0===a&&(S&&pa(Cn(S),o),s.flags|=4),64!=(64&s.flags))if(8&L)Kh(n,a,s.child,o,c,d,!1),Ma(a,n,c,S,d);else if(32&L){for(var q=Y(s,o),ae=void 0;ae=q();)Ma(a,n,c,ae,d);Ma(a,n,c,S,d)}else 16&L?mc(n,a,o,s,c,d):Ma(a,n,c,S,d);s=w?s.projectionNext:s.next}}function gc(n,a,s,o,c,d){Kh(s,o,n.firstChild,a,c,d,!1)}function mc(n,a,s,o,c,d){var w=s[16],L=w[6].projection[o.projection];if(Array.isArray(L))for(var q=0;q<L.length;q++)Ma(a,n,c,L[q],d);else Kh(n,a,L,w[3],c,d,!0)}function fv(n,a,s){Ot(n)?n.setAttribute(a,"style",s):a.style.cssText=s}function Xf(n,a,s){Ot(n)?""===s?n.removeAttribute(a,"class"):n.setAttribute(a,"class",s):a.className=s}function $h(n,a,s){for(var o=n.length;;){var c=n.indexOf(a,s);if(-1===c)return c;if(0===c||n.charCodeAt(c-1)<=32){var d=a.length;if(c+d===o||n.charCodeAt(c+d)<=32)return c}s=c+1}}var ug="ng-template";function og(n,a,s){for(var o=0;o<n.length;){var c=n[o++];if(s&&"class"===c){if(-1!==$h((c=n[o]).toLowerCase(),a,0))return!0}else if(1===c){for(;o<n.length&&"string"==typeof(c=n[o++]);)if(c.toLowerCase()===a)return!0;return!1}}return!1}function hv(n){return 4===n.type&&n.value!==ug}function Xm(n,a,s){return a===(4!==n.type||s?n.value:ug)}function eh(n,a,s){for(var o=4,c=n.attrs||[],d=function ny(n){for(var a=0;a<n.length;a++)if(nl(n[a]))return a;return n.length}(c),w=!1,S=0;S<a.length;S++){var L=a[S];if("number"!=typeof L){if(!w)if(4&o){if(o=2|1&o,""!==L&&!Xm(n,L,s)||""===L&&1===a.length){if(wu(o))return!1;w=!0}}else{var q=8&o?L:a[++S];if(8&o&&null!==n.attrs){if(!og(n.attrs,q,s)){if(wu(o))return!1;w=!0}continue}var ye=ey(8&o?"class":L,c,hv(n),s);if(-1===ye){if(wu(o))return!1;w=!0;continue}if(""!==q){var De;De=ye>d?"":c[ye+1].toLowerCase();var xe=8&o?De:null;if(xe&&-1!==$h(xe,q,0)||2&o&&q!==De){if(wu(o))return!1;w=!0}}}}else{if(!w&&!wu(o)&&!wu(L))return!1;if(w&&wu(L))continue;w=!1,o=L|1&o}}return wu(o)||w}function wu(n){return 0==(1&n)}function ey(n,a,s,o){if(null===a)return-1;var c=0;if(o||!s){for(var d=!1;c<a.length;){var w=a[c];if(w===n)return c;if(3===w||6===w)d=!0;else{if(1===w||2===w){for(var S=a[++c];"string"==typeof S;)S=a[++c];continue}if(4===w)break;if(0===w){c+=4;continue}}c+=d?1:2}return-1}return function ry(n,a){var s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){var o=n[s];if("number"==typeof o)return-1;if(o===a)return s;s++}return-1}(a,n)}function dv(n,a){for(var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=0;o<a.length;o++)if(eh(n,a[o],s))return!0;return!1}function Kc(n,a){return n?":not("+a.trim()+")":a}function $c(n){for(var a=n[0],s=1,o=2,c="",d=!1;s<n.length;){var w=n[s];if("string"==typeof w)if(2&o){var S=n[++s];c+="["+w+(S.length>0?'="'+S+'"':"")+"]"}else 8&o?c+="."+w:4&o&&(c+=" "+w);else""!==c&&!wu(w)&&(a+=Kc(d,c),c=""),o=w,d=d||!wu(o);s++}return""!==c&&(a+=Kc(d,c)),a}var Ar={};function Yh(n){th(pr(),Gt(),Xi()+n,ho())}function th(n,a,s,o){if(!o)if(3==(3&a[2])){var d=n.preOrderCheckHooks;null!==d&&_s(a,d,s)}else{var w=n.preOrderHooks;null!==w&&go(a,w,0,s)}ns(s)}function nh(n,a){return n<<17|a<<2}function Uu(n){return n>>17&32767}function Jh(n){return 2|n}function zs(n){return(131068&n)>>2}function Xh(n,a){return-131069&n|a<<2}function vv(n){return 1|n}function Jc(n,a){var s=n.contentQueries;if(null!==s)for(var o=0;o<s.length;o+=2){var d=s[o+1];if(-1!==d){var w=n.data[d];Ku(s[o]),w.contentQueries(2,a[d],d)}}}function _c(n,a,s,o,c,d,w,S,L,q){var ae=a.blueprint.slice();return ae[0]=c,ae[2]=140|o,lo(ae),ae[3]=ae[15]=n,ae[8]=s,ae[10]=w||n&&n[10],ae[11]=S||n&&n[11],ae[12]=L||n&&n[12]||null,ae[9]=q||n&&n[9]||null,ae[6]=d,ae[16]=2==a.type?n[16]:ae,ae}function Xc(n,a,s,o,c){var d=n.data[a];if(null===d)d=function sd(n,a,s,o,c){var d=Iu(),w=Su(),L=n.data[a]=function my(n,a,s,o,c,d){return{type:s,index:o,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?d:d&&d.parent,s,a,o,c);return null===n.firstChild&&(n.firstChild=L),null!==d&&(w?null==d.child&&null!==L.parent&&(d.child=L):null===d.next&&(d.next=L)),L}(n,a,s,o,c),function kl(){return Kn.lFrame.inI18n}()&&(d.flags|=64);else if(64&d.type){d.type=s,d.value=o,d.attrs=c;var w=function ou(){var n=Kn.lFrame,a=n.currentTNode;return n.isParent?a:a.parent}();d.injectorIndex=null===w?-1:w.injectorIndex}return es(d,!0),d}function ef(n,a,s,o){if(0===s)return-1;for(var c=a.length,d=0;d<s;d++)a.push(o),n.blueprint.push(o),n.data.push(null);return c}function uh(n,a,s){Ga(a);try{var o=n.viewQuery;null!==o&&gh(1,o,s);var c=n.template;null!==c&&ud(n,a,c,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Jc(n,a),n.staticViewQueries&&gh(2,n.viewQuery,s);var d=n.components;null!==d&&function Cv(n,a){for(var s=0;s<a.length;s++)Ov(n,a[s])}(a,d)}catch(w){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),w}finally{a[2]&=-5,_i()}}function wc(n,a,s,o){var c=a[2];if(256!=(256&c)){Ga(a);var d=ho();try{lo(a),function Ls(n){return Kn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&ud(n,a,s,2,o);var w=3==(3&c);if(!d)if(w){var S=n.preOrderCheckHooks;null!==S&&_s(a,S,null)}else{var L=n.preOrderHooks;null!==L&&go(a,L,0,null),Ru(a,0)}if(function Mv(n){for(var a=rn(n);null!==a;a=an(a))if(a[2])for(var s=a[9],o=0;o<s.length;o++){var c=s[o];0==(1024&c[2])&&co(c[3],1),c[2]|=1024}}(a),function hh(n){for(var a=rn(n);null!==a;a=an(a))for(var s=10;s<a.length;s++){var o=a[s],c=o[1];ba(o)&&wc(c,o,c.template,o[8])}}(a),null!==n.contentQueries&&Jc(n,a),!d)if(w){var q=n.contentCheckHooks;null!==q&&_s(a,q)}else{var ae=n.contentHooks;null!==ae&&go(a,ae,1),Ru(a,1)}!function vy(n,a){var s=n.hostBindingOpCodes;if(null!==s)try{for(var o=0;o<s.length;o++){var c=s[o];if(c<0)ns(~c);else{var d=c,w=s[++o],S=s[++o];Wu(w,d),S(2,a[d])}}}finally{ns(-1)}}(n,a);var ye=n.components;null!==ye&&function Cf(n,a){for(var s=0;s<a.length;s++)Sg(n,a[s])}(a,ye);var De=n.viewQuery;if(null!==De&&gh(2,De,o),!d)if(w){var xe=n.viewCheckHooks;null!==xe&&_s(a,xe)}else{var Ct=n.viewHooks;null!==Ct&&go(a,Ct,2),Ru(a,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),d||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,co(a[3],-1))}finally{_i()}}}function py(n,a,s,o){var c=a[10],d=!ho(),w=Qi(a);try{d&&!w&&c.begin&&c.begin(),w&&uh(n,a,o),wc(n,a,s,o)}finally{d&&!w&&c.end&&c.end()}}function ud(n,a,s,o,c){var d=Xi(),w=2&o;try{ns(-1),w&&a.length>20&&th(n,a,20,ho()),s(o,c)}finally{ns(d)}}function pg(n,a,s){if(Ps(a))for(var c=a.directiveEnd,d=a.directiveStart;d<c;d++){var w=n.data[d];w.contentQueries&&w.contentQueries(1,s[d],d)}}function Iv(n,a,s){!Cu()||(function wy(n,a,s,o){var c=s.directiveStart,d=s.directiveEnd;n.firstCreatePass||A(s,a),pa(o,a);for(var w=s.initialInputs,S=c;S<d;S++){var L=n.data[S],q=ze(L);q&&by(a,s,L);var ae=Vn(a,n,S,s);pa(ae,a),null!==w&&Pv(0,S-c,ae,L,0,w),q&&(li(s.index,a)[8]=ae)}}(n,a,s,oi(s,a)),128==(128&s.flags)&&function bg(n,a,s){var o=s.directiveStart,c=s.directiveEnd,w=s.index,S=function _l(){return Kn.lFrame.currentDirectiveIndex}();try{ns(w);for(var L=o;L<c;L++){var q=n.data[L],ae=a[L];ci(L),(null!==q.hostBindings||0!==q.hostVars||null!==q.hostAttrs)&&lh(q,ae)}}finally{ns(-1),ci(S)}}(n,a,s))}function oh(n,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oi,o=a.localNames;if(null!==o)for(var c=a.index+1,d=0;d<o.length;d+=2){var w=o[d+1],S=-1===w?s(a,n):n[w];n[c++]=S}}function Rs(n){var a=n.tView;return null===a||a.incompleteFirstPass?n.tView=od(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):a}function od(n,a,s,o,c,d,w,S,L,q){var ae=20+o,ye=ae+c,De=function gy(n,a){for(var s=[],o=0;o<a;o++)s.push(o<n?null:Ar);return s}(ae,ye),xe="function"==typeof q?q():q;return De[1]={type:n,blueprint:De,template:s,queries:null,viewQuery:S,declTNode:a,data:De.slice().fill(null,ae),bindingStartIndex:ae,expandoStartIndex:ye,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:L,consts:xe,incompleteFirstPass:!1}}function yg(n,a,s,o){var c=dd(a);null===s?c.push(o):(c.push(s),n.firstCreatePass&&Rg(n).push(o,c.length-1))}function Sv(n,a,s){for(var o in n)if(n.hasOwnProperty(o)){var c=n[o];(s=null===s?{}:s).hasOwnProperty(o)?s[o].push(a,c):s[o]=[a,c]}return s}function cd(n,a,s,o){var c=!1;if(Cu()){var d=function ch(n,a,s){var o=n.directiveRegistry,c=null;if(o)for(var d=0;d<o.length;d++){var w=o[d];dv(s,w.selectors,!1)&&(c||(c=[]),N(A(s,a),n,w.type),ze(w)?(fd(n,s),c.unshift(w)):c.push(w))}return c}(n,a,s),w=null===o?null:{"":-1};if(null!==d){c=!0,Dg(s,n.data.length,d.length);for(var S=0;S<d.length;S++){var L=d[S];L.providersResolver&&L.providersResolver(L)}for(var q=!1,ae=!1,ye=ef(n,a,d.length,null),De=0;De<d.length;De++){var xe=d[De];s.mergedAttrs=xs(s.mergedAttrs,xe.hostAttrs),Cg(n,s,a,ye,xe),Ey(ye,xe,w),null!==xe.contentQueries&&(s.flags|=8),(null!==xe.hostBindings||null!==xe.hostAttrs||0!==xe.hostVars)&&(s.flags|=128);var Ct=xe.type.prototype;!q&&(Ct.ngOnChanges||Ct.ngOnInit||Ct.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),q=!0),!ae&&(Ct.ngOnChanges||Ct.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),ae=!0),ye++}!function kg(n,a){for(var o=a.directiveEnd,c=n.data,d=a.attrs,w=[],S=null,L=null,q=a.directiveStart;q<o;q++){var ae=c[q],ye=ae.inputs,De=null===d||hv(a)?null:If(ye,d);w.push(De),S=Sv(ye,q,S),L=Sv(ae.outputs,q,L)}null!==S&&(S.hasOwnProperty("class")&&(a.flags|=16),S.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=w,a.inputs=S,a.outputs=L}(n,s)}w&&function Tg(n,a,s){if(a)for(var o=n.localNames=[],c=0;c<a.length;c+=2){var d=s[a[c+1]];if(null==d)throw new Pe(-301,!1);o.push(a[c],d)}}(s,o,w)}return s.mergedAttrs=xs(s.mergedAttrs,s.attrs),c}function Eg(n,a,s,o,c,d){var w=d.hostBindings;if(w){var S=n.hostBindingOpCodes;null===S&&(S=n.hostBindingOpCodes=[]);var L=~a.index;(function _y(n){for(var a=n.length;a>0;){var s=n[--a];if("number"==typeof s&&s<0)return s}return 0})(S)!=L&&S.push(L),S.push(o,c,w)}}function lh(n,a){null!==n.hostBindings&&n.hostBindings(1,a)}function fd(n,a){a.flags|=2,(n.components||(n.components=[])).push(a.index)}function Ey(n,a,s){if(s){if(a.exportAs)for(var o=0;o<a.exportAs.length;o++)s[a.exportAs[o]]=n;ze(a)&&(s[""]=n)}}function Dg(n,a,s){n.flags|=1,n.directiveStart=a,n.directiveEnd=a+s,n.providerIndexes=a}function Cg(n,a,s,o,c){n.data[o]=c;var d=c.factory||(c.factory=ki(c.type)),w=new Vs(d,ze(c),null);n.blueprint[o]=w,s[o]=w,Eg(n,a,0,o,ef(n,s,c.hostVars,Ar),c)}function by(n,a,s){var o=oi(a,n),c=Rs(s),d=n[10],w=vh(n,_c(n,c,null,s.onPush?64:16,o,a,d,d.createRenderer(o,s),null,null));n[a.index]=w}function Ml(n,a,s,o,c,d){var w=oi(n,a);!function tf(n,a,s,o,c,d,w){if(null==d)Ot(n)?n.removeAttribute(a,c,s):a.removeAttribute(c);else{var S=null==w?at(d):w(d,o||"",c);Ot(n)?n.setAttribute(a,c,S,s):s?a.setAttributeNS(s,c,S):a.setAttribute(c,S)}}(a[11],w,d,n.value,s,o,c)}function Pv(n,a,s,o,c,d){var w=d[a];if(null!==w)for(var S=o.setInput,L=0;L<w.length;){var q=w[L++],ae=w[L++],ye=w[L++];null!==S?o.setInput(s,ye,q,ae):s[ae]=ye}}function If(n,a){for(var s=null,o=0;o<a.length;){var c=a[o];if(0!==c)if(5!==c){if("number"==typeof c)break;n.hasOwnProperty(c)&&(null===s&&(s=[]),s.push(c,n[c],a[o+1])),o+=2}else o+=2;else o+=4}return s}function fh(n,a,s,o){return new Array(n,!0,!1,a,null,0,o,s,null,null)}function Sg(n,a){var s=li(a,n);if(ba(s)){var o=s[1];80&s[2]?wc(o,s,o.template,s[8]):s[5]>0&&dh(s)}}function dh(n){for(var a=rn(n);null!==a;a=an(a))for(var s=10;s<a.length;s++){var o=a[s];if(1024&o[2]){var c=o[1];wc(c,o,c.template,o[8])}else o[5]>0&&dh(o)}var w=n[1].components;if(null!==w)for(var S=0;S<w.length;S++){var L=li(w[S],n);ba(L)&&L[5]>0&&dh(L)}}function Ov(n,a){var s=li(a,n),o=s[1];(function Ec(n,a){for(var s=a.length;s<n.blueprint.length;s++)a.push(n.blueprint[s])})(o,s),uh(o,s,s[8])}function vh(n,a){return n[13]?n[14][4]=a:n[13]=a,n[14]=a,a}function Nv(n){for(;n;){n[2]|=64;var a=nt(n);if(ut(n)&&!a)return n;n=a}return null}function ph(n,a,s){var o=a[10];o.begin&&o.begin();try{wc(n,a,n.template,s)}catch(c){throw Uv(a,c),c}finally{o.end&&o.end()}}function Ag(n){!function Fv(n){for(var a=0;a<n.components.length;a++){var s=n.components[a],o=Xs(s),c=o[1];py(c,o,c.template,s)}}(n[8])}function gh(n,a,s){Ku(0),a(n,s)}var Sf=function(){return Promise.resolve(null)}();function dd(n){return n[7]||(n[7]=[])}function Rg(n){return n.cleanup||(n.cleanup=[])}function Uv(n,a){var s=n[9],o=s?s.get(vl,null):null;o&&o.handleError(a)}function Bv(n,a,s,o,c){for(var d=0;d<s.length;){var w=s[d++],S=s[d++],L=a[w],q=n.data[w];null!==q.setInput?q.setInput(L,c,o,S):L[S]=c}}function Xl(n,a,s){var o=Qr(a,n);!function Oa(n,a,s){Ot(n)?n.setValue(a,s):a.textContent=s}(n[11],o,s)}function Af(n,a,s){var o=s?n.styles:null,c=s?n.classes:null,d=0;if(null!==a)for(var w=0;w<a.length;w++){var S=a[w];"number"==typeof S?d=S:1==d?c=ct(c,S):2==d&&(o=ct(o,S+": "+a[++w]+";"))}s?n.styles=o:n.stylesWithoutHost=o,s?n.classes=c:n.classesWithoutHost=c}var mh=new Er("INJECTOR",-1),Mg=function(){function n(){(0,Te.Z)(this,n)}return(0,Ee.Z)(n,[{key:"get",value:function(s){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mu;if(o===mu){var c=new Error("NullInjectorError: No provider for ".concat(Me(s),"!"));throw c.name="NullInjectorError",c}return o}}]),n}(),yh=new Er("Set Injector scope."),Rf={},xv={},kh=void 0;function vd(){return void 0===kh&&(kh=new Mg),kh}function nf(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0,c=ec(n,a,s,o);return c._resolveInjectorDefTypes(),c}function ec(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0;return new Cy(n,s,a||vd(),o)}var Cy=function(){function n(a,s,o){var c=this,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,Te.Z)(this,n),this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var w=[];s&&is(s,function(L){return c.processProvider(L,a,s)}),is([a],function(L){return c.processInjectorType(L,[],w)}),this.records.set(mh,Pf(void 0,this));var S=this.records.get(yh);this.scope=null!=S?S.value:null,this.source=d||("object"==typeof a?null:Me(a))}return(0,Ee.Z)(n,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(s){return s.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(s){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mu,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tn.Default;this.assertNotDestroyed();var d=ne(this),w=_n(void 0);try{if(!(c&tn.SkipSelf)){var S=this.records.get(s);if(void 0===S){var L=zv(s)&&cr(s);S=L&&this.injectableDefInScope(L)?Pf(bc(s),Rf):null,this.records.set(s,S)}if(null!=S)return this.hydrate(s,S)}var q=c&tn.Self?vd():this.parent;return q.get(s,o=c&tn.Optional&&o===mu?null:o)}catch(ye){if("NullInjectorError"===ye.name){var ae=ye[to]=ye[to]||[];if(ae.unshift(Me(s)),d)throw ye;return Pt(ye,s,"R3InjectorError",this.source)}throw ye}finally{_n(w),ne(d)}}},{key:"_resolveInjectorDefTypes",value:function(){var s=this;this.injectorDefTypes.forEach(function(o){return s.get(o)})}},{key:"toString",value:function(){var s=[];return this.records.forEach(function(c,d){return s.push(Me(d))}),"R3Injector[".concat(s.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Pe(205,!1)}},{key:"processInjectorType",value:function(s,o,c){var d=this;if(!(s=dt(s)))return!1;var w=Ki(s),S=null==w&&s.ngModule||void 0,L=void 0===S?s:S,ye=-1!==c.indexOf(L);if(void 0!==S&&(w=Ki(S)),null==w)return!1;if(null!=w.imports&&!ye){var De;c.push(L);try{is(w.imports,function(Lt){d.processInjectorType(Lt,o,c)&&(void 0===De&&(De=[]),De.push(Lt))})}finally{}if(void 0!==De)for(var xe=function(Ln){var Kr=De[Ln],Di=Kr.ngModule,La=Kr.providers;is(La,function(tu){return d.processProvider(tu,Di,La||zt)})},Ct=0;Ct<De.length;Ct++)xe(Ct)}this.injectorDefTypes.add(L);var xt=ki(L)||function(){return new L};this.records.set(L,Pf(xt,Rf));var en=w.providers;if(null!=en&&!ye){var wn=s;is(en,function(Lt){return d.processProvider(Lt,wn,en)})}return void 0!==S&&void 0!==s.providers}},{key:"processProvider",value:function(s,o,c){var d=Tc(s=dt(s))?s:dt(s&&s.provide),w=function Ng(n,a,s){return Lg(n)?Pf(void 0,n.useValue):Pf(_h(n),Rf)}(s);if(Tc(s)||!0!==s.multi)this.records.get(d);else{var S=this.records.get(d);S||((S=Pf(void 0,Rf,!0)).factory=function(){return bt(S.multi)},this.records.set(d,S)),d=s,S.multi.push(s)}this.records.set(d,w)}},{key:"hydrate",value:function(s,o){return o.value===Rf&&(o.value=xv,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Sy(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}},{key:"injectableDefInScope",value:function(s){if(!s.providedIn)return!1;var o=dt(s.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}]),n}();function bc(n){var a=cr(n),s=null!==a?a.factory:ki(n);if(null!==s)return s;if(n instanceof Er)throw new Pe(204,!1);if(n instanceof Function)return function Og(n){var a=n.length;if(a>0)throw function Uo(n,a){for(var s=[],o=0;o<n;o++)s.push(a);return s}(a,"?"),new Pe(204,!1);var o=function os(n){var a=n&&(n[Xr]||n[ma]);if(a){var s=function jr(n){if(n.hasOwnProperty("name"))return n.name;var a=(""+n).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(n);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(s,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in a future version of Angular. Please add @Injectable() to the "'.concat(s,'" class.')),a}return null}(n);return null!==o?function(){return o.factory(n)}:function(){return new n}}(n);throw new Pe(204,!1)}function _h(n,a,s){var o=void 0;if(Tc(n)){var c=dt(n);return ki(c)||bc(c)}if(Lg(n))o=function(){return dt(n.useValue)};else if(function Hv(n){return!(!n||!n.useFactory)}(n))o=function(){return n.useFactory.apply(n,(0,F.Z)(bt(n.deps||[])))};else if(function jv(n){return!(!n||!n.useExisting)}(n))o=function(){return ge(dt(n.useExisting))};else{var d=dt(n&&(n.useClass||n.provide));if(!function Iy(n){return!!n.deps}(n))return ki(d)||bc(d);o=function(){return(0,ke.Z)(d,(0,F.Z)(bt(n.deps)))}}return o}function Pf(n,a){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:n,value:a,multi:s?[]:void 0}}function Lg(n){return null!==n&&"object"==typeof n&&W in n}function Tc(n){return"function"==typeof n}function zv(n){return"function"==typeof n||"object"==typeof n&&n instanceof Er}var Co=function(){var n=function(){function a(){(0,Te.Z)(this,a)}return(0,Ee.Z)(a,null,[{key:"create",value:function(o,c){var d;if(Array.isArray(o))return nf({name:""},c,o,"");var w=null!==(d=o.name)&&void 0!==d?d:"";return nf({name:w},o.parent,o.providers,w)}}]),a}();return n.THROW_IF_NOT_FOUND=mu,n.NULL=new Mg,n.\u0275prov=yn({token:n,providedIn:"any",factory:function(){return ge(mh)}}),n.__NG_ELEMENT_ID__=-1,n}();function Ny(n,a){Cr(Xs(n)[1],Ni())}function wh(n){for(var a=function yd(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0,o=[n];a;){var c=void 0;if(ze(n))c=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Pe(903,"");c=a.\u0275dir}if(c){if(s){o.push(c);var w=n;w.inputs=kd(n.inputs),w.declaredInputs=kd(n.declaredInputs),w.outputs=kd(n.outputs);var S=c.hostBindings;S&&ep(n,S);var L=c.viewQuery,q=c.contentQueries;if(L&&Xv(n,L),q&&Ly(n,q),it(n.inputs,c.inputs),it(n.declaredInputs,c.declaredInputs),it(n.outputs,c.outputs),ze(c)&&c.data.animation){var ae=n.data;ae.animation=(ae.animation||[]).concat(c.data.animation)}}var ye=c.features;if(ye)for(var De=0;De<ye.length;De++){var xe=ye[De];xe&&xe.ngInherit&&xe(n),xe===wh&&(s=!1)}}a=Object.getPrototypeOf(a)}!function Mf(n){for(var a=0,s=null,o=n.length-1;o>=0;o--){var c=n[o];c.hostVars=a+=c.hostVars,c.hostAttrs=xs(c.hostAttrs,s=xs(s,c.hostAttrs))}}(o)}function kd(n){return n===vn?{}:n===zt?[]:n}function Xv(n,a){var s=n.viewQuery;n.viewQuery=s?function(o,c){a(o,c),s(o,c)}:a}function Ly(n,a){var s=n.contentQueries;n.contentQueries=s?function(o,c,d){a(o,c,d),s(o,c,d)}:a}function ep(n,a){var s=n.hostBindings;n.hostBindings=s?function(o,c){a(o,c),s(o,c)}:a}var Of=null;function Nf(){if(!Of){var n=dr.Symbol;if(n&&n.iterator)Of=n.iterator;else for(var a=Object.getOwnPropertyNames(Map.prototype),s=0;s<a.length;++s){var o=a[s];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Of=o)}}return Of}function rf(n){return!!rp(n)&&(Array.isArray(n)||!(n instanceof Map)&&Nf()in n)}function rp(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ws(n,a,s){return!Object.is(n[a],s)&&(n[a]=s,!0)}function ip(n,a,s,o){var c=Gt();return Ws(c,Fs(),a)&&(pr(),Ml(Pr(),c,n,a,s,o)),ip}function op(n,a,s,o,c,d,w,S){var L=Gt(),q=pr(),ae=n+20,ye=q.firstCreatePass?function up(n,a,s,o,c,d,w,S,L){var q=a.consts,ae=Xc(a,n,4,w||null,ja(q,S));cd(a,s,ae,ja(q,L)),Cr(a,ae);var ye=ae.tViews=od(2,ae,o,c,d,a.directiveRegistry,a.pipeRegistry,null,a.schemas,q);return null!==a.queries&&(a.queries.template(a,ae),ye.queries=a.queries.embeddedTView(ae)),ae}(ae,q,L,a,s,o,c,d,w):q.data[ae];es(ye,!1);var De=L[11].createComment("");zh(q,L,De,ye),pa(De,L),vh(L,L[ae]=fh(De,L,De,ye)),cs(ye)&&Iv(q,L,ye),null!=w&&oh(L,ye,S)}function wd(n){return vr(function zu(){return Kn.lFrame.contextLView}(),20+n)}function zi(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tn.Default,s=Gt();if(null===s)return ge(n,a);var o=Ni();return Ue(o,s,dt(n),a)}function Gy(){throw new Error("invalid")}function rm(n,a,s){var o=Gt();return Ws(o,Fs(),a)&&function ao(n,a,s,o,c,d,w,S){var ae,L=oi(a,s),q=a.inputs;!S&&null!=q&&(ae=q[o])?(Bv(n,s,ae,o,c),Ms(a)&&function Rv(n,a){var s=li(a,n);16&s[2]||(s[2]|=64)}(s,a.index)):3&a.type&&(o=function Av(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(o),c=null!=w?w(c,a.value||"",o):c,Ot(d)?d.setProperty(L,o,c):Ta(o)||(L.setProperty?L.setProperty(o,c):L[o]=c))}(pr(),Pr(),o,n,a,o[11],s,!1),rm}function qa(n,a,s,o,c){var w=c?"class":"style";Bv(n,s,a.inputs[w],w,o)}function Dd(n,a,s,o){var c=Gt(),d=pr(),w=20+n,S=c[11],L=c[w]=zo(S,a,function Lo(){return Kn.lFrame.currentNamespace}()),q=d.firstCreatePass?function im(n,a,s,o,c,d,w){var S=a.consts,q=Xc(a,n,2,c,ja(S,d));return cd(a,s,q,ja(S,w)),null!==q.attrs&&Af(q,q.attrs,!1),null!==q.mergedAttrs&&Af(q,q.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,q),q}(w,d,c,0,a,s,o):d.data[w];es(q,!0);var ae=q.mergedAttrs;null!==ae&&wi(S,L,ae);var ye=q.classes;null!==ye&&Xf(S,L,ye);var De=q.styles;return null!==De&&fv(S,L,De),64!=(64&q.flags)&&zh(d,c,L,q),0===function fo(){return Kn.lFrame.elementDepthCount}()&&pa(L,c),function Ha(){Kn.lFrame.elementDepthCount++}(),cs(q)&&(Iv(d,c,q),pg(d,q,c)),null!==o&&oh(c,q),Dd}function Cd(){var n=Ni();Su()?Gu():es(n=n.parent,!1);var a=n;!function Hu(){Kn.lFrame.elementDepthCount--}();var s=pr();return s.firstCreatePass&&(Cr(s,n),Ps(n)&&s.queries.elementEnd(n)),null!=a.classesWithoutHost&&function fa(n){return 0!=(16&n.flags)}(a)&&qa(s,a,Gt(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function tl(n){return 0!=(32&n.flags)}(a)&&qa(s,a,Gt(),a.stylesWithoutHost,!1),Cd}function Id(n,a,s,o){return Dd(n,a,s,o),Cd(),Id}function Sd(n,a,s){var o=Gt(),c=pr(),d=n+20,w=c.firstCreatePass?function zy(n,a,s,o,c){var d=a.consts,w=ja(d,o),S=Xc(a,n,8,"ng-container",w);return null!==w&&Af(S,w,!0),cd(a,s,S,ja(d,c)),null!==a.queries&&a.queries.elementStart(a,S),S}(d,c,o,a,s):c.data[d];es(w,!0);var S=o[d]=o[11].createComment("");return zh(c,o,S,w),pa(S,o),cs(w)&&(Iv(c,o,w),pg(c,w,o)),null!=s&&oh(o,w),Sd}function Ad(){var n=Ni(),a=pr();return Su()?Gu():es(n=n.parent,!1),a.firstCreatePass&&(Cr(a,n),Ps(n)&&a.queries.elementEnd(n)),Ad}function am(){return Gt()}function wp(n){return!!n&&"function"==typeof n.then}function Ep(n){return!!n&&"function"==typeof n.subscribe}var Ol=Ep;function sm(n,a,s,o){var c=Gt(),d=pr(),w=Ni();return function Ih(n,a,s,o,c,d,w,S){var L=cs(o),ae=n.firstCreatePass&&Rg(n),ye=a[8],De=dd(a),xe=!0;if(3&o.type||S){var Ct=oi(o,a),xt=S?S(Ct):Ct,en=De.length,wn=S?function(ng){return S(Cn(ng[o.index]))}:o.index;if(Ot(s)){var Lt=null;if(!S&&L&&(Lt=function uf(n,a,s,o){var c=n.cleanup;if(null!=c)for(var d=0;d<c.length-1;d+=2){var w=c[d];if(w===s&&c[d+1]===o){var S=a[7],L=c[d+2];return S.length>L?S[L]:null}"string"==typeof w&&(d+=2)}return null}(n,a,c,o.index)),null!==Lt)(Lt.__ngLastListenerFn__||Lt).__ngNextListenerFn__=d,Lt.__ngLastListenerFn__=d,xe=!1;else{d=bp(o,a,ye,d,!1);var Kr=s.listen(xt,c,d);De.push(d,Kr),ae&&ae.push(c,wn,en,en+1)}}else d=bp(o,a,ye,d,!0),xt.addEventListener(c,d,w),De.push(d),ae&&ae.push(c,wn,en,w)}else d=bp(o,a,ye,d,!1);var La,Di=o.outputs;if(xe&&null!==Di&&(La=Di[c])){var tu=La.length;if(tu)for(var Ro=0;Ro<tu;Ro+=2){var tg=a[La[Ro]][La[Ro+1]].subscribe(d),Qd=De.length;De.push(d,tg),ae&&ae.push(c,o.index,Qd,-(Qd+1))}}}(d,c,c[11],w,n,a,!!s,o),sm}function um(n,a,s,o){try{return!1!==s(o)}catch(c){return Uv(n,c),!1}}function bp(n,a,s,o,c){return function d(w){if(w===Function)return o;var S=2&n.flags?li(n.index,a):a;0==(32&a[2])&&Nv(S);for(var L=um(a,0,o,w),q=d.__ngNextListenerFn__;q;)L=um(a,0,q,w)&&L,q=q.__ngNextListenerFn__;return c&&!1===L&&(w.preventDefault(),w.returnValue=!1),L}}function Tp(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return wl(n)}function Cp(n,a,s,o,c){for(var d=n[s+1],w=null===a,S=o?Uu(d):zs(d),L=!1;0!==S&&(!1===L||w);){var ae=n[S+1];Ip(n[S],a)&&(L=!0,n[S+1]=o?vv(ae):Jh(ae)),S=o?Uu(ae):zs(ae)}L&&(n[s+1]=o?Jh(d):vv(d))}function Ip(n,a){return null===n||null==a||(Array.isArray(n)?n[1]:n)===a||!(!Array.isArray(n)||"string"!=typeof a)&&ds(n,a)>=0}function Nl(n,a){return function qo(n,a,s,o){var c=Gt(),d=pr(),w=function Sa(n){var a=Kn.lFrame,s=a.bindingIndex;return a.bindingIndex=a.bindingIndex+n,s}(2);d.firstUpdatePass&&function Rp(n,a,s,o){var c=n.data;if(null===c[s+1]){var d=c[Xi()],w=function mm(n,a){return a>=n.expandoStartIndex}(n,s);(function ic(n,a){return 0!=(n.flags&(a?16:32))})(d,o)&&null===a&&!w&&(a=!1),a=function Xy(n,a,s,o){var c=function lu(n){var a=Kn.lFrame.currentDirectiveIndex;return-1===a?null:n[a]}(n),d=o?a.residualClasses:a.residualStyles;if(null===c)0===(o?a.classBindings:a.styleBindings)&&(s=jf(s=Pp(null,n,a,s,o),a.attrs,o),d=null);else{var S=a.directiveStylingLast;if(-1===S||n[S]!==c)if(s=Pp(c,n,a,s,o),null===d){var q=function e0(n,a,s){var o=s?a.classBindings:a.styleBindings;if(0!==zs(o))return n[Uu(o)]}(n,a,o);void 0!==q&&Array.isArray(q)&&function ym(n,a,s,o){n[Uu(s?a.classBindings:a.styleBindings)]=o}(n,a,o,q=jf(q=Pp(null,n,a,q[1],o),a.attrs,o))}else d=function t0(n,a,s){for(var o=void 0,c=a.directiveEnd,d=1+a.directiveStylingLast;d<c;d++)o=jf(o,n[d].hostAttrs,s);return jf(o,a.attrs,s)}(n,a,o)}return void 0!==d&&(o?a.residualClasses=d:a.residualStyles=d),s}(c,d,a,o),function lf(n,a,s,o,c,d){var w=d?a.classBindings:a.styleBindings,S=Uu(w),L=zs(w);n[o]=s;var ae,q=!1;if(Array.isArray(s)?(null===(ae=s[1])||ds(s,ae)>0)&&(q=!0):ae=s,c)if(0!==L){var xe=Uu(n[S+1]);n[o+1]=nh(xe,S),0!==xe&&(n[xe+1]=Xh(n[xe+1],o)),n[S+1]=function Qh(n,a){return 131071&n|a<<17}(n[S+1],o)}else n[o+1]=nh(S,0),0!==S&&(n[S+1]=Xh(n[S+1],o)),S=o;else n[o+1]=nh(L,0),0===S?S=o:n[L+1]=Xh(n[L+1],o),L=o;q&&(n[o+1]=Jh(n[o+1])),Cp(n,ae,o,!0),Cp(n,ae,o,!1),function vm(n,a,s,o,c){var d=c?n.residualClasses:n.residualStyles;null!=d&&"string"==typeof a&&ds(d,a)>=0&&(s[o+1]=vv(s[o+1]))}(a,ae,n,o,d),w=nh(S,L),d?a.classBindings=w:a.styleBindings=w}(c,d,a,s,w,o)}}(d,n,w,o),a!==Ar&&Ws(c,w,a)&&function Ld(n,a,s,o,c,d,w,S){if(3&a.type){var L=n.data,q=L[S+1];Fd(function ih(n){return 1==(1&n)}(q)?Ph(L,a,s,c,zs(q),w):void 0)||(Fd(d)||function rh(n){return 2==(2&n)}(q)&&(d=Ph(L,null,s,c,S,w)),function Jf(n,a,s,o,c){var d=Ot(n);if(a)c?d?n.addClass(s,o):s.classList.add(o):d?n.removeClass(s,o):s.classList.remove(o);else{var w=-1===o.indexOf("-")?void 0:P.DashCase;if(null==c)d?n.removeStyle(s,o,w):s.style.removeProperty(o);else{var S="string"==typeof c&&c.endsWith("!important");S&&(c=c.slice(0,-10),w|=P.Important),d?n.setStyle(s,o,c,w):s.style.setProperty(o,c,S?"important":"")}}}(o,w,Qr(Xi(),s),c,d))}}(d,d.data[Xi()],c,c[11],n,c[w+1]=function wm(n,a){return null==n||("string"==typeof a?n+=a:"object"==typeof n&&(n=Me(h(n)))),n}(a,s),o,w)}(n,a,null,!0),Nl}function Pp(n,a,s,o,c){var d=null,w=s.directiveEnd,S=s.directiveStylingLast;for(-1===S?S=s.directiveStart:S++;S<w&&(o=jf(o,(d=a[S]).hostAttrs,c),d!==n);)S++;return null!==n&&(s.directiveStylingLast=S),o}function jf(n,a,s){var o=s?1:2,c=-1;if(null!==a)for(var d=0;d<a.length;d++){var w=a[d];"number"==typeof w?c=w:c===o&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),sa(n,w,!!s||a[++d]))}return void 0===n?null:n}function Ph(n,a,s,o,c,d){for(var w=null===a,S=void 0;c>0;){var L=n[c],q=Array.isArray(L),ae=q?L[1]:L,ye=null===ae,De=s[c+1];De===Ar&&(De=ye?zt:void 0);var xe=ye?Ts(De,o):ae===o?De:void 0;if(q&&!Fd(xe)&&(xe=Ts(L,o)),Fd(xe)&&(S=xe,w))return S;var Ct=n[c+1];c=w?Uu(Ct):zs(Ct)}if(null!==a){var xt=d?a.residualClasses:a.residualStyles;null!=xt&&(S=Ts(xt,o))}return S}function Fd(n){return void 0!==n}function Em(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=Gt(),o=pr(),c=n+20,d=o.firstCreatePass?Xc(o,c,1,a,null):o.data[c],w=s[c]=Sr(s[11],a);zh(o,s,w,d),es(d,!1)}function ac(n){return Zd("",n,""),ac}function Zd(n,a,s){var o=Gt(),c=function Cc(n,a,s,o){return Ws(n,Fs(),s)?a+at(s)+o:Ar}(o,n,a,s);return c!==Ar&&Xl(o,Xi(),c),Zd}var so=void 0,Lm=["en",[["a","p"],["AM","PM"],so],[["AM","PM"],so,so],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],so,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],so,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",so,"{1} 'at' {0}",so],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Bu(n){var s=Math.floor(Math.abs(n)),o=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===o?1:5}],cf={};function ff(n){var a=function d0(n){return n.toLowerCase().replace(/_/g,"-")}(n),s=xd(a);if(s)return s;var o=a.split("-")[0];if(s=xd(o))return s;if("en"===o)return Lm;throw new Error('Missing locale data for the locale "'.concat(n,'".'))}function Fm(n){return ff(n)[zn.PluralCase]}function xd(n){return n in cf||(cf[n]=dr.ng&&dr.ng.common&&dr.ng.common.locales&&dr.ng.common.locales[n]),cf[n]}var zn=function(){return(zn=zn||{})[zn.LocaleId=0]="LocaleId",zn[zn.DayPeriodsFormat=1]="DayPeriodsFormat",zn[zn.DayPeriodsStandalone=2]="DayPeriodsStandalone",zn[zn.DaysFormat=3]="DaysFormat",zn[zn.DaysStandalone=4]="DaysStandalone",zn[zn.MonthsFormat=5]="MonthsFormat",zn[zn.MonthsStandalone=6]="MonthsStandalone",zn[zn.Eras=7]="Eras",zn[zn.FirstDayOfWeek=8]="FirstDayOfWeek",zn[zn.WeekendRange=9]="WeekendRange",zn[zn.DateFormat=10]="DateFormat",zn[zn.TimeFormat=11]="TimeFormat",zn[zn.DateTimeFormat=12]="DateTimeFormat",zn[zn.NumberSymbols=13]="NumberSymbols",zn[zn.NumberFormats=14]="NumberFormats",zn[zn.CurrencyCode=15]="CurrencyCode",zn[zn.CurrencySymbol=16]="CurrencySymbol",zn[zn.CurrencyName=17]="CurrencyName",zn[zn.Currencies=18]="Currencies",zn[zn.Directionality=19]="Directionality",zn[zn.PluralCase=20]="PluralCase",zn[zn.ExtraData=21]="ExtraData",zn}(),jd="en-US";function hw(n,a,s){var o=pr();if(o.firstCreatePass){var c=ze(n);D0(s,o.data,o.blueprint,c,!0),D0(a,o.data,o.blueprint,c,!1)}}function D0(n,a,s,o,c){if(n=dt(n),Array.isArray(n))for(var d=0;d<n.length;d++)D0(n[d],a,s,o,c);else{var w=pr(),S=Gt(),L=Tc(n)?n:dt(n.provide),q=_h(n),ae=Ni(),ye=1048575&ae.providerIndexes,De=ae.directiveStart,xe=ae.providerIndexes>>20;if(Tc(n)||!n.multi){var Ct=new Vs(q,c,zi),xt=I0(L,a,c?ye:ye+xe,De);-1===xt?(N(A(ae,S),w,L),C0(w,n,a.length),a.push(L),ae.directiveStart++,ae.directiveEnd++,c&&(ae.providerIndexes+=1048576),s.push(Ct),S.push(Ct)):(s[xt]=Ct,S[xt]=Ct)}else{var en=I0(L,a,ye+xe,De),wn=I0(L,a,ye,ye+xe),Ln=wn>=0&&s[wn];if(c&&!Ln||!c&&!(en>=0&&s[en])){N(A(ae,S),w,L);var Kr=function pw(n,a,s,o,c){var d=new Vs(n,s,zi);return d.multi=[],d.index=a,d.componentProviders=0,Sk(d,c,o&&!s),d}(c?vw:dw,s.length,c,o,q);!c&&Ln&&(s[wn].providerFactory=Kr),C0(w,n,a.length,0),a.push(L),ae.directiveStart++,ae.directiveEnd++,c&&(ae.providerIndexes+=1048576),s.push(Kr),S.push(Kr)}else C0(w,n,en>-1?en:wn,Sk(s[c?wn:en],q,!c&&o));!c&&o&&Ln&&s[wn].componentProviders++}}}function C0(n,a,s,o){var c=Tc(a),d=function Gv(n){return!!n.useClass}(a);if(c||d){var L=(d?dt(a.useClass):a).prototype.ngOnDestroy;if(L){var q=n.destroyHooks||(n.destroyHooks=[]);if(!c&&a.multi){var ae=q.indexOf(s);-1===ae?q.push(s,[o,L]):q[ae+1].push(o,L)}else q.push(s,L)}}}function Sk(n,a,s){return s&&n.componentProviders++,n.multi.push(a)-1}function I0(n,a,s,o){for(var c=s;c<o;c++)if(a[c]===n)return c;return-1}function dw(n,a,s,o){return S0(this.multi,[])}function vw(n,a,s,o){var d,c=this.multi;if(this.providerFactory){var w=this.providerFactory.componentProviders,S=Vn(s,s[1],this.providerFactory.index,o);S0(c,d=S.slice(0,w));for(var L=w;L<S.length;L++)d.push(S[L])}else S0(c,d=[]);return d}function S0(n,a){for(var s=0;s<n.length;s++)a.push((0,n[s])());return a}function Ak(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(s){s.providersResolver=function(o,c){return hw(o,c?c(n):n,a)}}}var gw=(0,Ee.Z)(function n(){(0,Te.Z)(this,n)}),Rk=(0,Ee.Z)(function n(){(0,Te.Z)(this,n)}),yw=function(){function n(){(0,Te.Z)(this,n)}return(0,Ee.Z)(n,[{key:"resolveComponentFactory",value:function(s){throw function mw(n){var a=Error("No component factory found for ".concat(Me(n),". Did you add it to @NgModule.entryComponents?"));return a.ngComponent=n,a}(s)}}]),n}(),Gm=function(){var n=(0,Ee.Z)(function a(){(0,Te.Z)(this,a)});return n.NULL=new yw,n}();function kw(){return Kd(Ni(),Gt())}function Kd(n,a){return new Kp(oi(n,a))}var Kp=function(){var n=(0,Ee.Z)(function a(s){(0,Te.Z)(this,a),this.nativeElement=s});return n.__NG_ELEMENT_ID__=kw,n}();function _w(n){return n instanceof Kp?n.nativeElement:n}var Mk=(0,Ee.Z)(function n(){(0,Te.Z)(this,n)}),ww=function(){var n=(0,Ee.Z)(function a(){(0,Te.Z)(this,a)});return n.__NG_ELEMENT_ID__=function(){return function bw(){var n=Gt(),s=li(Ni().index,n);return function Ew(n){return n[11]}(Oi(s)?s:n)}()},n}(),Tw=function(){var n=(0,Ee.Z)(function a(){(0,Te.Z)(this,a)});return n.\u0275prov=yn({token:n,providedIn:"root",factory:function(){return null}}),n}(),Ok=(0,Ee.Z)(function n(a){(0,Te.Z)(this,n),this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}),Nk=new Ok("13.2.7"),A0={};function zm(n,a,s,o){for(var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==s;){var d=a[s.index];if(null!==d&&o.push(Cn(d)),Br(d))for(var w=10;w<d.length;w++){var S=d[w],L=S[1].firstChild;null!==L&&zm(S[1],S,L,o)}var q=s.type;if(8&q)zm(n,a,s.child,o);else if(32&q)for(var ae=Y(s,a),ye=void 0;ye=ae();)o.push(ye);else if(16&q){var De=Qf(a,s);if(Array.isArray(De))o.push.apply(o,(0,F.Z)(De));else{var xe=nt(a[16]);zm(xe[1],xe,De,o,!0)}}s=c?s.projectionNext:s.next}return o}var $p=function(){function n(a,s){(0,Te.Z)(this,n),this._lView=a,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}return(0,Ee.Z)(n,[{key:"rootNodes",get:function(){var s=this._lView,o=s[1];return zm(o,s,o.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(s){this._lView[8]=s}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var s=this._lView[3];if(Br(s)){var o=s[8],c=o?o.indexOf(this):-1;c>-1&&(av(s,c),Mu(o,c))}this._attachedToViewContainer=!1}sv(this._lView[1],this._lView)}},{key:"onDestroy",value:function(s){yg(this._lView[1],this._lView,null,s)}},{key:"markForCheck",value:function(){Nv(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){ph(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function Zv(n,a,s){Jo(!0);try{ph(n,a,s)}finally{Jo(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){this._appRef=null,function nv(n,a){gc(n,a,a[11],2,null,null)}(this._lView[1],this._lView)}},{key:"attachToAppRef",value:function(s){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=s}}]),n}(),Dw=function(n){(0,et.Z)(s,n);var a=(0,Je.Z)(s);function s(o){var c;return(0,Te.Z)(this,s),(c=a.call(this,o))._view=o,c}return(0,Ee.Z)(s,[{key:"detectChanges",value:function(){Ag(this._view)}},{key:"checkNoChanges",value:function(){!function hd(n){Jo(!0);try{Ag(n)}finally{Jo(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),s}($p),Lk=function(n){(0,et.Z)(s,n);var a=(0,Je.Z)(s);function s(o){var c;return(0,Te.Z)(this,s),(c=a.call(this)).ngModule=o,c}return(0,Ee.Z)(s,[{key:"resolveComponentFactory",value:function(c){var d=Rr(c);return new R0(d,this.ngModule)}}]),s}(Gm);function Fk(n){var a=[];for(var s in n)n.hasOwnProperty(s)&&a.push({propName:n[s],templateName:s});return a}var R0=function(n){(0,et.Z)(s,n);var a=(0,Je.Z)(s);function s(o,c){var d;return(0,Te.Z)(this,s),(d=a.call(this)).componentDef=o,d.ngModule=c,d.componentType=o.type,d.selector=function lg(n){return n.map($c).join(",")}(o.selectors),d.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],d.isBoundToModule=!!c,d}return(0,Ee.Z)(s,[{key:"inputs",get:function(){return Fk(this.componentDef.inputs)}},{key:"outputs",get:function(){return Fk(this.componentDef.outputs)}},{key:"create",value:function(c,d,w,S){var Lt,Ln,L=(S=S||this.ngModule)?function Iw(n,a){return{get:function(o,c,d){var w=n.get(o,A0,d);return w!==A0||c===A0?w:a.get(o,c,d)}}}(c,S.injector):c,q=L.get(Mk,Nn),ae=L.get(Tw,null),ye=q.createRenderer(null,this.componentDef),De=this.componentDef.selectors[0][0]||"div",xe=w?function mg(n,a,s){if(Ot(n))return n.selectRootElement(a,s===Pi.ShadowDom);var c="string"==typeof a?n.querySelector(a):a;return c.textContent="",c}(ye,w,this.componentDef.encapsulation):zo(q.createRenderer(null,this.componentDef),De,function Cw(n){var a=n.toLowerCase();return"svg"===a?"svg":"math"===a?$:null}(De)),Ct=this.componentDef.onPush?576:528,xt=function md(n,a){return{components:[],scheduler:n||Vh,clean:Sf,playerHandler:a||null,flags:0}}(),en=od(0,null,null,1,0,null,null,null,null,null),wn=_c(null,en,xt,Ct,null,null,q,ye,ae,L);Ga(wn);try{var Kr=function gd(n,a,s,o,c,d){var w=s[1];s[20]=n;var L=Xc(w,20,2,"#host",null),q=L.mergedAttrs=a.hostAttrs;null!==q&&(Af(L,q,!0),null!==n&&(wi(c,n,q),null!==L.classes&&Xf(c,n,L.classes),null!==L.styles&&fv(c,n,L.styles)));var ae=o.createRenderer(n,a),ye=_c(s,Rs(a),null,a.onPush?64:16,s[20],L,o,ae,d||null,null);return w.firstCreatePass&&(N(A(L,s),w,a.type),fd(w,L),Dg(L,s.length,1)),vh(s,ye),s[20]=ye}(xe,this.componentDef,wn,q,ye);if(xe)if(w)wi(ye,xe,["ng-version",Nk.full]);else{var Di=function iy(n){for(var a=[],s=[],o=1,c=2;o<n.length;){var d=n[o];if("string"==typeof d)2===c?""!==d&&a.push(d,n[++o]):8===c&&s.push(d);else{if(!wu(c))break;c=d}o++}return{attrs:a,classes:s}}(this.componentDef.selectors[0]),La=Di.attrs,tu=Di.classes;La&&wi(ye,xe,La),tu&&tu.length>0&&Xf(ye,xe,tu.join(" "))}if(Ln=Si(en,20),void 0!==d)for(var Ro=Ln.projection=[],ml=0;ml<this.ngContentSelectors.length;ml++){var Wf=d[ml];Ro.push(null!=Wf?Array.from(Wf):null)}Lt=function jg(n,a,s,o,c){var d=s[1],w=function ky(n,a,s){var o=Ni();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Cg(n,o,a,ef(n,a,1,null),s));var d=Vn(a,n,o.directiveStart,o);pa(d,a);var w=oi(o,a);return w&&pa(w,a),d}(d,s,a);if(o.components.push(w),n[8]=w,c&&c.forEach(function(ae){return ae(w,a)}),a.contentQueries){var S=Ni();a.contentQueries(1,w,S.directiveStart)}var L=Ni();return!d.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ns(L.index),Eg(s[1],L,0,L.directiveStart,L.directiveEnd,a),lh(a,w)),w}(Kr,this.componentDef,wn,xt,[Ny]),uh(en,wn,null)}finally{_i()}return new Aw(this.componentType,Lt,Kd(Ln,wn),wn,Ln)}}]),s}(Rk),Aw=function(n){(0,et.Z)(s,n);var a=(0,Je.Z)(s);function s(o,c,d,w,S){var L;return(0,Te.Z)(this,s),(L=a.call(this)).location=d,L._rootLView=w,L._tNode=S,L.instance=c,L.hostView=L.changeDetectorRef=new Dw(w),L.componentType=o,L}return(0,Ee.Z)(s,[{key:"injector",get:function(){return new ha(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(c){this.hostView.onDestroy(c)}}]),s}(gw),$d=(0,Ee.Z)(function n(){(0,Te.Z)(this,n)}),Zk=(0,Ee.Z)(function n(){(0,Te.Z)(this,n)}),qd=new Map;var Vk=function(n){(0,et.Z)(s,n);var a=(0,Je.Z)(s);function s(o,c){var d;(0,Te.Z)(this,s),(d=a.call(this))._parent=c,d._bootstrapComponents=[],d.injector=(0,j.Z)(d),d.destroyCbs=[],d.componentFactoryResolver=new Lk((0,j.Z)(d));var w=ri(o);return d._bootstrapComponents=y(w.bootstrap),d._r3Injector=ec(o,c,[{provide:$d,useValue:(0,j.Z)(d)},{provide:Gm,useValue:d.componentFactoryResolver}],Me(o)),d._r3Injector._resolveInjectorDefTypes(),d.instance=d.get(o),d}return(0,Ee.Z)(s,[{key:"get",value:function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Co.THROW_IF_NOT_FOUND,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tn.Default;return c===Co||c===$d||c===mh?this:this._r3Injector.get(c,d,w)}},{key:"destroy",value:function(){var c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(function(d){return d()}),this.destroyCbs=null}},{key:"onDestroy",value:function(c){this.destroyCbs.push(c)}}]),s}($d),P0=function(n){(0,et.Z)(s,n);var a=(0,Je.Z)(s);function s(o){var c;return(0,Te.Z)(this,s),(c=a.call(this)).moduleType=o,null!==ri(o)&&function Pw(n){var a=new Set;!function s(o){var c=ri(o,!0),d=c.id;null!==d&&(function Uk(n,a,s){if(a&&a!==s)throw new Error("Duplicate module registered for ".concat(n," - ").concat(Me(a)," vs ").concat(Me(a.name)))}(d,qd.get(d),o),qd.set(d,o));var q,S=y(c.imports),L=(0,x.Z)(S);try{for(L.s();!(q=L.n()).done;){var ae=q.value;a.has(ae)||(a.add(ae),s(ae))}}catch(ye){L.e(ye)}finally{L.f()}}(n)}(o),c}return(0,Ee.Z)(s,[{key:"create",value:function(c){return new Vk(this.moduleType,c)}}]),s}(Zk);function xk(n,a,s,o,c,d){var w=a+s;return Ws(n,w,c)?function Ko(n,a,s){return n[a]=s}(n,w+1,d?o.call(d,c):o(c)):function qp(n,a){var s=n[a];return s===Ar?void 0:s}(n,w+1)}function Wk(n,a){var o,s=pr(),c=n+20;s.firstCreatePass?(o=function jw(n,a){if(a)for(var s=a.length-1;s>=0;s--){var o=a[s];if(n===o.name)return o}}(a,s.pipeRegistry),s.data[c]=o,o.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(c,o.onDestroy)):o=s.data[c];var d=o.factory||(o.factory=ki(o.type)),w=_n(zi);try{var S=Qu(!1),L=d();return Qu(S),function lp(n,a,s,o){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),a[s]=o}(s,Gt(),c,L),L}finally{_n(w)}}function Kk(n,a,s){var o=n+20,c=Gt(),d=vr(c,o);return function Yp(n,a){return n[1].data[a].pure}(c,o)?xk(c,function Ji(){var n=Kn.lFrame,a=n.bindingRootIndex;return-1===a&&(a=n.bindingRootIndex=n.tView.bindingStartIndex),a}(),a,d.transform,s,d):d.transform(s)}var Kw=function(n){(0,et.Z)(s,n);var a=(0,Je.Z)(s);function s(){var o,c=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,Te.Z)(this,s),(o=a.call(this)).__isAsync=c,o}return(0,Ee.Z)(s,[{key:"emit",value:function(c){(0,z.Z)((0,H.Z)(s.prototype),"next",this).call(this,c)}},{key:"subscribe",value:function(c,d,w){var S,L,q,ae=c,ye=d||function(){return null},De=w;if(c&&"object"==typeof c){var xe=c;ae=null===(S=xe.next)||void 0===S?void 0:S.bind(xe),ye=null===(L=xe.error)||void 0===L?void 0:L.bind(xe),De=null===(q=xe.complete)||void 0===q?void 0:q.bind(xe)}this.__isAsync&&(ye=M0(ye),ae&&(ae=M0(ae)),De&&(De=M0(De)));var Ct=(0,z.Z)((0,H.Z)(s.prototype),"subscribe",this).call(this,{next:ae,error:ye,complete:De});return c instanceof Ve.w0&&c.add(Ct),Ct}}]),s}(fe.x);function M0(n){return function(a){setTimeout(n,void 0,a)}}var Nc=Kw;function $w(){return this._results[Nf()]()}var qw=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,Te.Z)(this,n),this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var s=Nf(),o=n.prototype;o[s]||(o[s]=$w)}return(0,Ee.Z)(n,[{key:"changes",get:function(){return this._changes||(this._changes=new Nc)}},{key:"get",value:function(s){return this._results[s]}},{key:"map",value:function(s){return this._results.map(s)}},{key:"filter",value:function(s){return this._results.filter(s)}},{key:"find",value:function(s){return this._results.find(s)}},{key:"reduce",value:function(s,o){return this._results.reduce(s,o)}},{key:"forEach",value:function(s){this._results.forEach(s)}},{key:"some",value:function(s){return this._results.some(s)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(s,o){var c=this;c.dirty=!1;var d=Hi(s);(this._changesDetected=!function ji(n,a,s){if(n.length!==a.length)return!1;for(var o=0;o<n.length;o++){var c=n[o],d=a[o];if(s&&(c=s(c),d=s(d)),d!==c)return!1}return!0}(c._results,d,o))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}},{key:"notifyOnChanges",value:function(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),n}();Symbol;var Qp=function(){var n=(0,Ee.Z)(function a(){(0,Te.Z)(this,a)});return n.__NG_ELEMENT_ID__=Jw,n}(),Qw=function(n){(0,et.Z)(s,n);var a=(0,Je.Z)(s);function s(o,c,d){var w;return(0,Te.Z)(this,s),(w=a.call(this))._declarationLView=o,w._declarationTContainer=c,w.elementRef=d,w}return(0,Ee.Z)(s,[{key:"createEmbeddedView",value:function(c){var d=this._declarationTContainer.tViews,w=_c(this._declarationLView,d,c,16,null,d.declTNode,null,null,null,null);w[17]=this._declarationLView[this._declarationTContainer.index];var L=this._declarationLView[19];return null!==L&&(w[19]=L.createEmbeddedView(d)),uh(d,w,c),new $p(w)}}]),s}(Qp);function Jw(){return Wm(Ni(),Gt())}function Wm(n,a){return 4&n.type?new Qw(a,n,Kd(n,a)):null}var Km=function(){var n=(0,Ee.Z)(function a(){(0,Te.Z)(this,a)});return n.__NG_ELEMENT_ID__=Xw,n}();function Xw(){return Yk(Ni(),Gt())}var $k=function(n){(0,et.Z)(s,n);var a=(0,Je.Z)(s);function s(o,c,d){var w;return(0,Te.Z)(this,s),(w=a.call(this))._lContainer=o,w._hostTNode=c,w._hostLView=d,w}return(0,Ee.Z)(s,[{key:"element",get:function(){return Kd(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new ha(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var c=D(this._hostTNode,this._hostLView);if(Ys(c)){var d=fs(c,this._hostLView),w=ws(c);return new ha(d[1].data[w+8],d)}return new ha(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(c){var d=qk(this._lContainer);return null!==d&&d[c]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(c,d,w){var S=c.createEmbeddedView(d||{});return this.insert(S,w),S}},{key:"createComponent",value:function(c,d,w,S,L){var ae,q=c&&!function il(n){return"function"==typeof n}(c);if(q)ae=d;else{var ye=d||{};ae=ye.index,w=ye.injector,S=ye.projectableNodes,L=ye.ngModuleRef}var De=q?c:new R0(Rr(c)),xe=w||this.parentInjector;if(!L&&null==De.ngModule){var xt=(q?xe:this.parentInjector).get($d,null);xt&&(L=xt)}var en=De.create(xe,S,void 0,L);return this.insert(en.hostView,ae),en}},{key:"insert",value:function(c,d){var w=c._lView,S=w[1];if(function ar(n){return Br(n[3])}(w)){var L=this.indexOf(c);if(-1!==L)this.detach(L);else{var q=w[3],ae=new $k(q,q[6],q[3]);ae.detach(ae.indexOf(c))}}var ye=this._adjustIndex(d),De=this._lContainer;!function rv(n,a,s,o){var c=10+o,d=s.length;o>0&&(s[c-1][4]=a),o<d-10?(a[4]=s[c],_o(s,10+o,a)):(s.push(a),a[4]=null),a[3]=s;var w=a[17];null!==w&&s!==w&&function Qm(n,a){var s=n[9];a[16]!==a[3][3][16]&&(n[2]=!0),null===s?n[9]=[a]:s.push(a)}(w,a);var S=a[19];null!==S&&S.insertView(n),a[2]|=128}(S,w,De,ye);var xe=Wh(ye,De),Ct=w[11],xt=jh(Ct,De[7]);return null!==xt&&function Da(n,a,s,o,c,d){o[0]=c,o[6]=a,gc(n,o,s,1,c,d)}(S,De[6],Ct,w,xt,xe),c.attachToViewContainerRef(),_o(O0(De),ye,c),c}},{key:"move",value:function(c,d){return this.insert(c,d)}},{key:"indexOf",value:function(c){var d=qk(this._lContainer);return null!==d?d.indexOf(c):-1}},{key:"remove",value:function(c){var d=this._adjustIndex(c,-1),w=av(this._lContainer,d);w&&(Mu(O0(this._lContainer),d),sv(w[1],w))}},{key:"detach",value:function(c){var d=this._adjustIndex(c,-1),w=av(this._lContainer,d);return w&&null!=Mu(O0(this._lContainer),d)?new $p(w):null}},{key:"_adjustIndex",value:function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==c?this.length+d:c}}]),s}(Km);function qk(n){return n[8]}function O0(n){return n[8]||(n[8]=[])}function Yk(n,a){var s,o=a[n.index];if(Br(o))s=o;else{var c;if(8&n.type)c=Cn(o);else{var d=a[11];c=d.createComment("");var w=oi(n,a);Wo(d,jh(d,w),c,function zc(n,a){return Ot(n)?n.nextSibling(a):a.nextSibling}(d,w),!1)}a[n.index]=s=fh(o,a,c,n),vh(a,s)}return new $k(s,n,a)}var rE=function(){function n(a){(0,Te.Z)(this,n),this.queryList=a,this.matches=null}return(0,Ee.Z)(n,[{key:"clone",value:function(){return new n(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),n}(),iE=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,Te.Z)(this,n),this.queries=a}return(0,Ee.Z)(n,[{key:"createEmbeddedView",value:function(s){var o=s.queries;if(null!==o){for(var c=null!==s.contentQueries?s.contentQueries[0]:o.length,d=[],w=0;w<c;w++){var S=o.getByIndex(w);d.push(this.queries[S.indexInDeclarationView].clone())}return new n(d)}return null}},{key:"insertView",value:function(s){this.dirtyQueriesWithMatches(s)}},{key:"detachView",value:function(s){this.dirtyQueriesWithMatches(s)}},{key:"dirtyQueriesWithMatches",value:function(s){for(var o=0;o<this.queries.length;o++)null!==i_(s,o).matches&&this.queries[o].setDirty()}}]),n}(),Qk=(0,Ee.Z)(function n(a,s){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,Te.Z)(this,n),this.predicate=a,this.flags=s,this.read=o}),aE=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,Te.Z)(this,n),this.queries=a}return(0,Ee.Z)(n,[{key:"elementStart",value:function(s,o){for(var c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,o)}},{key:"elementEnd",value:function(s){for(var o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}},{key:"embeddedTView",value:function(s){for(var o=null,c=0;c<this.length;c++){var d=null!==o?o.length:0,w=this.getByIndex(c).embeddedTView(s,d);w&&(w.indexInDeclarationView=c,null!==o?o.push(w):o=[w])}return null!==o?new n(o):null}},{key:"template",value:function(s,o){for(var c=0;c<this.queries.length;c++)this.queries[c].template(s,o)}},{key:"getByIndex",value:function(s){return this.queries[s]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(s){this.queries.push(s)}}]),n}(),sE=function(){function n(a){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,Te.Z)(this,n),this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}return(0,Ee.Z)(n,[{key:"elementStart",value:function(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}},{key:"elementEnd",value:function(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(s,o){this.elementStart(s,o)}},{key:"embeddedTView",value:function(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new n(this.metadata)):null}},{key:"isApplyingToNode",value:function(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var o=this._declarationNodeIndex,c=s.parent;null!==c&&8&c.type&&c.index!==o;)c=c.parent;return o===(null!==c?c.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(s,o){var c=this.metadata.predicate;if(Array.isArray(c))for(var d=0;d<c.length;d++){var w=c[d];this.matchTNodeWithReadOption(s,o,uE(o,w)),this.matchTNodeWithReadOption(s,o,Et(o,s,w,!1,!1))}else c===Qp?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,Et(o,s,c,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(s,o,c){if(null!==c){var d=this.metadata.read;if(null!==d)if(d===Kp||d===Km||d===Qp&&4&o.type)this.addMatch(o.index,-2);else{var w=Et(o,s,d,!1,!1);null!==w&&this.addMatch(o.index,w)}else this.addMatch(o.index,c)}}},{key:"addMatch",value:function(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}]),n}();function uE(n,a){var s=n.localNames;if(null!==s)for(var o=0;o<s.length;o+=2)if(s[o]===a)return s[o+1];return null}function lE(n,a,s,o){return-1===s?function oE(n,a){return 11&n.type?Kd(n,a):4&n.type?Wm(n,a):null}(a,n):-2===s?function cE(n,a,s){return s===Kp?Kd(a,n):s===Qp?Wm(a,n):s===Km?Yk(a,n):void 0}(n,a,o):Vn(n,n[1],s,a)}function Jk(n,a,s,o){var c=a[19].queries[o];if(null===c.matches){for(var d=n.data,w=s.matches,S=[],L=0;L<w.length;L+=2){var q=w[L];S.push(q<0?null:lE(a,d[q],w[L+1],s.metadata.read))}c.matches=S}return c.matches}function N0(n,a,s,o){var c=n.queries.getByIndex(s),d=c.matches;if(null!==d)for(var w=Jk(n,a,c,s),S=0;S<d.length;S+=2){var L=d[S];if(L>0)o.push(w[S/2]);else{for(var q=d[S+1],ae=a[-L],ye=10;ye<ae.length;ye++){var De=ae[ye];De[17]===De[3]&&N0(De[1],De,q,o)}if(null!==ae[9])for(var xe=ae[9],Ct=0;Ct<xe.length;Ct++){var xt=xe[Ct];N0(xt[1],xt,q,o)}}}return o}function Xk(n){var a=Gt(),s=pr(),o=Xo();Ku(o+1);var c=i_(s,o);if(n.dirty&&Qi(a)===(2==(2&c.metadata.flags))){if(null===c.matches)n.reset([]);else{var d=c.crossesNgTemplate?N0(s,a,o,[]):Jk(s,a,c,o);n.reset(d,_w),n.notifyOnChanges()}return!0}return!1}function e_(n,a,s,o){var c=pr();if(c.firstCreatePass){var d=Ni();(function r_(n,a,s){null===n.queries&&(n.queries=new aE),n.queries.track(new sE(a,s))})(c,new Qk(a,s,o),d.index),function dE(n,a){var s=n.contentQueries||(n.contentQueries=[]);a!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,a)}(c,n),2==(2&s)&&(c.staticContentQueries=!0)}!function n_(n,a,s){var o=new qw(4==(4&s));yg(n,a,o,o.destroy),null===a[19]&&(a[19]=new iE),a[19].queries.push(new rE(o))}(c,Gt(),s)}function t_(){return function hE(n,a){return n[19].queries[a].queryList}(Gt(),Xo())}function i_(n,a){return n.queries.getByIndex(a)}function Ym(){}var w_=new Er("Application Initializer"),V0=function(){var n=function(){function a(s){var o=this;(0,Te.Z)(this,a),this.appInits=s,this.resolve=Ym,this.reject=Ym,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(c,d){o.resolve=c,o.reject=d})}return(0,Ee.Z)(a,[{key:"runInitializers",value:function(){var o=this;if(!this.initialized){var c=[],d=function(){o.done=!0,o.resolve()};if(this.appInits)for(var w=function(q){var ae=o.appInits[q]();if(wp(ae))c.push(ae);else if(Ol(ae)){var ye=new Promise(function(De,xe){ae.subscribe({complete:De,error:xe})});c.push(ye)}},S=0;S<this.appInits.length;S++)w(S);Promise.all(c).then(function(){d()}).catch(function(L){o.reject(L)}),0===c.length&&d(),this.initialized=!0}}}]),a}();return n.\u0275fac=function(s){return new(s||n)(ge(w_,8))},n.\u0275prov=yn({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),E_=new Er("AppId",{providedIn:"root",factory:function b_(){return"".concat(x0()).concat(x0()).concat(x0())}});function x0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var T_=new Er("Platform Initializer"),D_=new Er("Platform ID"),C_=new Er("appBootstrapListener"),I_=function(){var n=function(){function a(){(0,Te.Z)(this,a)}return(0,Ee.Z)(a,[{key:"log",value:function(o){console.log(o)}},{key:"warn",value:function(o){console.warn(o)}}]),a}();return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=yn({token:n,factory:n.\u0275fac}),n}(),j0=new Er("LocaleId",{providedIn:"root",factory:function(){return Oe(j0,tn.Optional|tn.SkipSelf)||function PE(){return"undefined"!=typeof $localize&&$localize.locale||jd}()}}),ME=new Er("DefaultCurrencyCode",{providedIn:"root",factory:function(){return"USD"}}),OE=(0,Ee.Z)(function n(a,s){(0,Te.Z)(this,n),this.ngModuleFactory=a,this.componentFactories=s}),NE=function(){var n=function(){function a(){(0,Te.Z)(this,a)}return(0,Ee.Z)(a,[{key:"compileModuleSync",value:function(o){return new P0(o)}},{key:"compileModuleAsync",value:function(o){return Promise.resolve(this.compileModuleSync(o))}},{key:"compileModuleAndAllComponentsSync",value:function(o){var c=this.compileModuleSync(o),w=y(ri(o).declarations).reduce(function(S,L){var q=Rr(L);return q&&S.push(new R0(q)),S},[]);return new OE(c,w)}},{key:"compileModuleAndAllComponentsAsync",value:function(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}},{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(o){}},{key:"getModuleId",value:function(o){}}]),a}();return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=yn({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),FE=function(){return Promise.resolve(0)}();function H0(n){"undefined"==typeof Zone?FE.then(function(){n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}var zf=function(){function n(a){var s=a.enableLongStackTrace,o=void 0!==s&&s,c=a.shouldCoalesceEventChangeDetection,d=void 0!==c&&c,w=a.shouldCoalesceRunChangeDetection,S=void 0!==w&&w;if((0,Te.Z)(this,n),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Nc(!1),this.onMicrotaskEmpty=new Nc(!1),this.onStable=new Nc(!1),this.onError=new Nc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var L=this;L._nesting=0,L._outer=L._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(L._inner=L._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(L._inner=L._inner.fork(Zone.longStackTraceZoneSpec)),L.shouldCoalesceEventChangeDetection=!S&&d,L.shouldCoalesceRunChangeDetection=S,L.lastRequestAnimationFrameId=-1,L.nativeRequestAnimationFrame=function ZE(){var n=dr.requestAnimationFrame,a=dr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&a){var s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);var o=a[Zone.__symbol__("OriginalDelegate")];o&&(a=o)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function VE(n){var a=function(){!function BE(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(dr,function(){n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){n.lastRequestAnimationFrameId=-1,z0(n),n.isCheckStableRunning=!0,G0(n),n.isCheckStableRunning=!1},void 0,function(){},function(){})),n.fakeTopEventTask.invoke()}),z0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(o,c,d,w,S,L){try{return S_(n),o.invokeTask(d,w,S,L)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===w.type||n.shouldCoalesceRunChangeDetection)&&a(),A_(n)}},onInvoke:function(o,c,d,w,S,L,q){try{return S_(n),o.invoke(d,w,S,L,q)}finally{n.shouldCoalesceRunChangeDetection&&a(),A_(n)}},onHasTask:function(o,c,d,w){o.hasTask(d,w),c===d&&("microTask"==w.change?(n._hasPendingMicrotasks=w.microTask,z0(n),G0(n)):"macroTask"==w.change&&(n.hasPendingMacrotasks=w.macroTask))},onHandleError:function(o,c,d,w){return o.handleError(d,w),n.runOutsideAngular(function(){return n.onError.emit(w)}),!1}})}(L)}return(0,Ee.Z)(n,[{key:"run",value:function(s,o,c){return this._inner.run(s,o,c)}},{key:"runTask",value:function(s,o,c,d){var w=this._inner,S=w.scheduleEventTask("NgZoneEvent: "+d,s,UE,Ym,Ym);try{return w.runTask(S,o,c)}finally{w.cancelTask(S)}}},{key:"runGuarded",value:function(s,o,c){return this._inner.runGuarded(s,o,c)}},{key:"runOutsideAngular",value:function(s){return this._outer.run(s)}}],[{key:"isInAngularZone",value:function(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!n.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(n.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),n}(),UE={};function G0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(function(){return n.onStable.emit(null)})}finally{n.isStable=!0}}}function z0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function S_(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function A_(n){n._nesting--,G0(n)}var xE=function(){function n(){(0,Te.Z)(this,n),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Nc,this.onMicrotaskEmpty=new Nc,this.onStable=new Nc,this.onError=new Nc}return(0,Ee.Z)(n,[{key:"run",value:function(s,o,c){return s.apply(o,c)}},{key:"runGuarded",value:function(s,o,c){return s.apply(o,c)}},{key:"runOutsideAngular",value:function(s){return s()}},{key:"runTask",value:function(s,o,c,d){return s.apply(o,c)}}]),n}(),R_=function(){var n=function(){function a(s){var o=this;(0,Te.Z)(this,a),this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(function(){o.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return(0,Ee.Z)(a,[{key:"_watchAngularEvents",value:function(){var o=this;this._ngZone.onUnstable.subscribe({next:function(){o._didWork=!0,o._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){o._ngZone.onStable.subscribe({next:function(){zf.assertNotInAngularZone(),H0(function(){o._isZoneStable=!0,o._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var o=this;if(this.isStable())H0(function(){for(;0!==o._callbacks.length;){var d=o._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(o._didWork)}o._didWork=!1});else{var c=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(d){return!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(o){return{source:o.source,creationLocation:o.creationLocation,data:o.data}}):[]}},{key:"addCallback",value:function(o,c,d){var w=this,S=-1;c&&c>0&&(S=setTimeout(function(){w._callbacks=w._callbacks.filter(function(L){return L.timeoutId!==S}),o(w._didWork,w.getPendingTasks())},c)),this._callbacks.push({doneCb:o,timeoutId:S,updateCb:d})}},{key:"whenStable",value:function(o,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,c,d),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(o,c,d){return[]}}]),a}();return n.\u0275fac=function(s){return new(s||n)(ge(zf))},n.\u0275prov=yn({token:n,factory:n.\u0275fac}),n}(),P_=function(){var n=function(){function a(){(0,Te.Z)(this,a),this._applications=new Map,W0.addToWindow(this)}return(0,Ee.Z)(a,[{key:"registerApplication",value:function(o,c){this._applications.set(o,c)}},{key:"unregisterApplication",value:function(o){this._applications.delete(o)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(o){return this._applications.get(o)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(o){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return W0.findTestabilityInTree(this,o,c)}}]),a}();return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=yn({token:n,factory:n.\u0275fac}),n}();function HE(n){W0=n}var uc,W0=new(function(){function n(){(0,Te.Z)(this,n)}return(0,Ee.Z)(n,[{key:"addToWindow",value:function(s){}},{key:"findTestabilityInTree",value:function(s,o,c){return null}}]),n}());function GE(n,a,s){var o=new P0(s);return Promise.resolve(o)}var M_=new Er("AllowMultipleToken"),WE=(0,Ee.Z)(function n(a,s){(0,Te.Z)(this,n),this.name=a,this.token=s});function KE(n){if(uc&&!uc.destroyed&&!uc.injector.get(M_,!1))throw new Pe(400,"");uc=n.get(L_);var s=n.get(T_,null);return s&&s.forEach(function(o){return o()}),uc}function O_(n,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o="Platform: ".concat(a),c=new Er(o);return function(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],w=N_();if(!w||w.injector.get(M_,!1))if(n)n(s.concat(d).concat({provide:c,useValue:!0}));else{var S=s.concat(d).concat({provide:c,useValue:!0},{provide:yh,useValue:"platform"});KE(Co.create({providers:S,name:o}))}return $E()}}function $E(n){var a=N_();if(!a)throw new Pe(401,"");return a}function N_(){return uc&&!uc.destroyed?uc:null}var L_=function(){var n=function(){function a(s){(0,Te.Z)(this,a),this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return(0,Ee.Z)(a,[{key:"bootstrapModuleFactory",value:function(o,c){var d=this,q=function qE(n,a){return"noop"===n?new xE:("zone.js"===n?void 0:n)||new zf({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)})}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),ae=[{provide:zf,useValue:q}];return q.run(function(){var ye=Co.create({providers:ae,parent:d.injector,name:o.moduleType.name}),De=o.create(ye),xe=De.injector.get(vl,null);if(!xe)throw new Pe(402,"");return q.runOutsideAngular(function(){var xt=q.onError.subscribe({next:function(wn){xe.handleError(wn)}});De.onDestroy(function(){$0(d._modules,De),xt.unsubscribe()})}),function YE(n,a,s){try{var o=s();return wp(o)?o.catch(function(c){throw a.runOutsideAngular(function(){return n.handleError(c)}),c}):o}catch(c){throw a.runOutsideAngular(function(){return n.handleError(c)}),c}}(xe,q,function(){var xt=De.injector.get(V0);return xt.runInitializers(),xt.donePromise.then(function(){return function Gp(n){Rn(n,"Expected localeId to be defined"),"string"==typeof n&&n.toLowerCase().replace(/_/g,"-")}(De.injector.get(j0,jd)||jd),d._moduleDoBootstrap(De),De})})})}},{key:"bootstrapModule",value:function(o){var c=this,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],w=F_({},d);return GE(0,0,o).then(function(S){return c.bootstrapModuleFactory(S,w)})}},{key:"_moduleDoBootstrap",value:function(o){var c=o.injector.get(K0);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(function(w){return c.bootstrap(w)});else{if(!o.instance.ngDoBootstrap)throw new Pe(403,"");o.instance.ngDoBootstrap(c)}this._modules.push(o)}},{key:"onDestroy",value:function(o){this._destroyListeners.push(o)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(function(c){return c.destroy()}),this._destroyListeners.forEach(function(c){return c()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),a}();return n.\u0275fac=function(s){return new(s||n)(ge(Co))},n.\u0275prov=yn({token:n,factory:n.\u0275fac}),n}();function F_(n,a){return Array.isArray(a)?a.reduce(F_,n):Object.assign(Object.assign({},n),a)}var K0=function(){var n=function(){function a(s,o,c,d,w){var S=this;(0,Te.Z)(this,a),this._zone=s,this._injector=o,this._exceptionHandler=c,this._componentFactoryResolver=d,this._initStatus=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){S._zone.run(function(){S.tick()})}});var L=new ve.y(function(ae){S._stable=S._zone.isStable&&!S._zone.hasPendingMacrotasks&&!S._zone.hasPendingMicrotasks,S._zone.runOutsideAngular(function(){ae.next(S._stable),ae.complete()})}),q=new ve.y(function(ae){var ye;S._zone.runOutsideAngular(function(){ye=S._zone.onStable.subscribe(function(){zf.assertNotInAngularZone(),H0(function(){!S._stable&&!S._zone.hasPendingMacrotasks&&!S._zone.hasPendingMicrotasks&&(S._stable=!0,ae.next(!0))})})});var De=S._zone.onUnstable.subscribe(function(){zf.assertInAngularZone(),S._stable&&(S._stable=!1,S._zone.runOutsideAngular(function(){ae.next(!1)}))});return function(){ye.unsubscribe(),De.unsubscribe()}});this.isStable=(0,qe.T)(L,q.pipe((0,wt.B)()))}return(0,Ee.Z)(a,[{key:"bootstrap",value:function(o,c){var S,d=this;if(!this._initStatus.done)throw new Pe(405,"");S=o instanceof Rk?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(S.componentType);var L=function zE(n){return n.isBoundToModule}(S)?void 0:this._injector.get($d),ae=S.create(Co.NULL,[],c||S.selector,L),ye=ae.location.nativeElement,De=ae.injector.get(R_,null),xe=De&&ae.injector.get(P_);return De&&xe&&xe.registerApplication(ye,De),ae.onDestroy(function(){d.detachView(ae.hostView),$0(d.components,ae),xe&&xe.unregisterApplication(ye)}),this._loadComponent(ae),ae}},{key:"tick",value:function(){var o=this;if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;var w,d=(0,x.Z)(this._views);try{for(d.s();!(w=d.n()).done;)w.value.detectChanges()}catch(ye){d.e(ye)}finally{d.f()}}catch(ye){this._zone.runOutsideAngular(function(){return o._exceptionHandler.handleError(ye)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(o){var c=o;this._views.push(c),c.attachToAppRef(this)}},{key:"detachView",value:function(o){var c=o;$0(this._views,c),c.detachFromAppRef()}},{key:"_loadComponent",value:function(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(C_,[]).concat(this._bootstrapListeners).forEach(function(d){return d(o)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(o){return o.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),a}();return n.\u0275fac=function(s){return new(s||n)(ge(zf),ge(Co),ge(vl),ge(Gm),ge(V0))},n.\u0275prov=yn({token:n,factory:n.\u0275fac,providedIn:"root"}),n}();function $0(n,a){var s=n.indexOf(a);s>-1&&n.splice(s,1)}var U_=!0,B_=!1;function JE(){return B_=!0,U_}function XE(){if(B_)throw new Error("Cannot enable prod mode after platform setup.");U_=!1}var eb=function(){var n=(0,Ee.Z)(function a(){(0,Te.Z)(this,a)});return n.__NG_ELEMENT_ID__=tb,n}();function tb(n){return function nb(n,a,s){if(Ms(n)&&!s){var o=li(n.index,a);return new $p(o,o)}return 47&n.type?new $p(a[16],a):null}(Ni(),Gt(),16==(16&n))}var H_=function(){function n(){(0,Te.Z)(this,n)}return(0,Ee.Z)(n,[{key:"supports",value:function(s){return rf(s)}},{key:"create",value:function(s){return new sb(s)}}]),n}(),ab=function(a,s){return s},sb=function(){function n(a){(0,Te.Z)(this,n),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||ab}return(0,Ee.Z)(n,[{key:"forEachItem",value:function(s){var o;for(o=this._itHead;null!==o;o=o._next)s(o)}},{key:"forEachOperation",value:function(s){for(var o=this._itHead,c=this._removalsHead,d=0,w=null;o||c;){var S=!c||o&&o.currentIndex<z_(c,d,w)?o:c,L=z_(S,d,w),q=S.currentIndex;if(S===c)d--,c=c._nextRemoved;else if(o=o._next,null==S.previousIndex)d++;else{w||(w=[]);var ae=L-d,ye=q-d;if(ae!=ye){for(var De=0;De<ae;De++){var xe=De<w.length?w[De]:w[De]=0,Ct=xe+De;ye<=Ct&&Ct<ae&&(w[De]=xe+1)}w[S.previousIndex]=ye-ae}}L!==q&&s(S,L,q)}}},{key:"forEachPreviousItem",value:function(s){var o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}},{key:"forEachAddedItem",value:function(s){var o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}},{key:"forEachMovedItem",value:function(s){var o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}},{key:"forEachRemovedItem",value:function(s){var o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}},{key:"forEachIdentityChange",value:function(s){var o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}},{key:"diff",value:function(s){if(null==s&&(s=[]),!rf(s))throw new Pe(900,"");return this.check(s)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(s){var o=this;this._reset();var w,S,L,c=this._itHead,d=!1;if(Array.isArray(s)){this.length=s.length;for(var q=0;q<this.length;q++)L=this._trackByFn(q,S=s[q]),null!==c&&Object.is(c.trackById,L)?(d&&(c=this._verifyReinsertion(c,S,L,q)),Object.is(c.item,S)||this._addIdentityChange(c,S)):(c=this._mismatch(c,S,L,q),d=!0),c=c._next}else w=0,function np(n,a){if(Array.isArray(n))for(var s=0;s<n.length;s++)a(n[s]);else for(var c,o=n[Nf()]();!(c=o.next()).done;)a(c.value)}(s,function(ae){L=o._trackByFn(w,ae),null!==c&&Object.is(c.trackById,L)?(d&&(c=o._verifyReinsertion(c,ae,L,w)),Object.is(c.item,ae)||o._addIdentityChange(c,ae)):(c=o._mismatch(c,ae,L,w),d=!0),c=c._next,w++}),this.length=w;return this._truncate(c),this.collection=s,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(s,o,c,d){var w;return null===s?w=this._itTail:(w=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,w,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,w,d)):s=this._addAfter(new ub(o,c),w,d),s}},{key:"_verifyReinsertion",value:function(s,o,c,d){var w=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==w?s=this._reinsertAfter(w,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}},{key:"_truncate",value:function(s){for(;null!==s;){var o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(s,o,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);var d=s._prevRemoved,w=s._nextRemoved;return null===d?this._removalsHead=w:d._nextRemoved=w,null===w?this._removalsTail=d:w._prevRemoved=d,this._insertAfter(s,o,c),this._addToMoves(s,c),s}},{key:"_moveAfter",value:function(s,o,c){return this._unlink(s),this._insertAfter(s,o,c),this._addToMoves(s,c),s}},{key:"_addAfter",value:function(s,o,c){return this._insertAfter(s,o,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}},{key:"_insertAfter",value:function(s,o,c){var d=null===o?this._itHead:o._next;return s._next=d,s._prev=o,null===d?this._itTail=s:d._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new G_),this._linkedRecords.put(s),s.currentIndex=c,s}},{key:"_remove",value:function(s){return this._addToRemovals(this._unlink(s))}},{key:"_unlink",value:function(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);var o=s._prev,c=s._next;return null===o?this._itHead=c:o._next=c,null===c?this._itTail=o:c._prev=o,s}},{key:"_addToMoves",value:function(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}},{key:"_addToRemovals",value:function(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new G_),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}},{key:"_addIdentityChange",value:function(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}]),n}(),ub=(0,Ee.Z)(function n(a,s){(0,Te.Z)(this,n),this.item=a,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}),ob=function(){function n(){(0,Te.Z)(this,n),this._head=null,this._tail=null}return(0,Ee.Z)(n,[{key:"add",value:function(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}},{key:"get",value:function(s,o){var c;for(c=this._head;null!==c;c=c._nextDup)if((null===o||o<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}},{key:"remove",value:function(s){var o=s._prevDup,c=s._nextDup;return null===o?this._head=c:o._nextDup=c,null===c?this._tail=o:c._prevDup=o,null===this._head}}]),n}(),G_=function(){function n(){(0,Te.Z)(this,n),this.map=new Map}return(0,Ee.Z)(n,[{key:"put",value:function(s){var o=s.trackById,c=this.map.get(o);c||(c=new ob,this.map.set(o,c)),c.add(s)}},{key:"get",value:function(s,o){var d=this.map.get(s);return d?d.get(s,o):null}},{key:"remove",value:function(s){var o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),n}();function z_(n,a,s){var o=n.previousIndex;if(null===o)return o;var c=0;return s&&o<s.length&&(c=s[o]),o+a+c}var W_=function(){function n(){(0,Te.Z)(this,n)}return(0,Ee.Z)(n,[{key:"supports",value:function(s){return s instanceof Map||rp(s)}},{key:"create",value:function(){return new lb}}]),n}(),lb=function(){function n(){(0,Te.Z)(this,n),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return(0,Ee.Z)(n,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(s){var o;for(o=this._mapHead;null!==o;o=o._next)s(o)}},{key:"forEachPreviousItem",value:function(s){var o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}},{key:"forEachChangedItem",value:function(s){var o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}},{key:"forEachAddedItem",value:function(s){var o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}},{key:"forEachRemovedItem",value:function(s){var o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}},{key:"diff",value:function(s){if(s){if(!(s instanceof Map||rp(s)))throw new Pe(900,"")}else s=new Map;return this.check(s)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(s){var o=this;this._reset();var c=this._mapHead;if(this._appendAfter=null,this._forEach(s,function(w,S){if(c&&c.key===S)o._maybeAddToChanges(c,w),o._appendAfter=c,c=c._next;else{var L=o._getOrCreateRecordForKey(S,w);c=o._insertBeforeOrAppend(c,L)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(var d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(s,o){if(s){var c=s._prev;return o._next=s,o._prev=c,s._prev=o,c&&(c._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}},{key:"_getOrCreateRecordForKey",value:function(s,o){if(this._records.has(s)){var c=this._records.get(s);this._maybeAddToChanges(c,o);var d=c._prev,w=c._next;return d&&(d._next=w),w&&(w._prev=d),c._next=null,c._prev=null,c}var S=new cb(s);return this._records.set(s,S),S.currentValue=o,this._addToAdditions(S),S}},{key:"_reset",value:function(){if(this.isDirty){var s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}},{key:"_addToAdditions",value:function(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}},{key:"_addToChanges",value:function(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}},{key:"_forEach",value:function(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(function(c){return o(s[c],c)})}}]),n}(),cb=(0,Ee.Z)(function n(a){(0,Te.Z)(this,n),this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null});function K_(){return new ek([new H_])}var ek=function(){var n=function(){function a(s){(0,Te.Z)(this,a),this.factories=s}return(0,Ee.Z)(a,[{key:"find",value:function(o){var c=this.factories.find(function(w){return w.supports(o)});if(null!=c)return c;throw new Pe(901,"")}}],[{key:"create",value:function(o,c){if(null!=c){var d=c.factories.slice();o=o.concat(d)}return new a(o)}},{key:"extend",value:function(o){return{provide:a,useFactory:function(d){return a.create(o,d||K_())},deps:[[a,new ur,new Jt]]}}}]),a}();return n.\u0275prov=yn({token:n,providedIn:"root",factory:K_}),n}();function $_(){return new tk([new W_])}var tk=function(){var n=function(){function a(s){(0,Te.Z)(this,a),this.factories=s}return(0,Ee.Z)(a,[{key:"find",value:function(o){var c=this.factories.find(function(w){return w.supports(o)});if(c)return c;throw new Pe(901,"")}}],[{key:"create",value:function(o,c){if(c){var d=c.factories.slice();o=o.concat(d)}return new a(o)}},{key:"extend",value:function(o){return{provide:a,useFactory:function(d){return a.create(o,d||$_())},deps:[[a,new ur,new Jt]]}}}]),a}();return n.\u0275prov=yn({token:n,providedIn:"root",factory:$_}),n}(),vb=O_(null,"core",[{provide:D_,useValue:"unknown"},{provide:L_,deps:[Co]},{provide:P_,deps:[]},{provide:I_,deps:[]}]),pb=function(){var n=(0,Ee.Z)(function a(s){(0,Te.Z)(this,a)});return n.\u0275fac=function(s){return new(s||n)(ge(K0))},n.\u0275mod=nn({type:n}),n.\u0275inj=Mr({}),n}()},24473:function(Wt,Qe,O){"use strict";O.d(Qe,{F0:function(){return Cr},Bz:function(){return Ta},lC:function(){return Ns}});var z=O(4942),H=O(97326),j=O(37762),le=O(74902),M=O(60136),ce=O(57777),x=O(43144),F=O(15671),ke=O(5e3),Ee=O(73237),Te=O(61120),et=O(77579),Je=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D){var N;return(0,F.Z)(this,C),(N=U.call(this))._value=D,N}return(0,x.Z)(C,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(N){var J=(0,Ee.Z)((0,Te.Z)(C.prototype),"_subscribe",this).call(this,N);return!J.closed&&N.next(this._value),J}},{key:"getValue",value:function(){var oe=this._value;if(this.hasError)throw this.thrownError;return this._throwIfClosed(),oe}},{key:"next",value:function(N){(0,Ee.Z)((0,Te.Z)(C.prototype),"next",this).call(this,this._value=N)}}]),C}(et.x),rt=O(69751),Ve=O(54742),fe=O(88996),ve=O(44671),qe=O(83268),wt=O(77669),ht=O(31810),it=O(25403),Me=O(39672);function gt(A,U){var C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ve.y;return function(D){kt(U,function(){for(var N=A.length,J=new Array(N),oe=N,pe=N,Ue=function(Ke){kt(U,function(){var Et=(0,fe.D)(A[Ke],U),Vn=!1;Et.subscribe((0,it.x)(D,function(sr){J[Ke]=sr,Vn||(Vn=!0,pe--),pe||D.next(C(J.slice()))},function(){--oe||D.complete()}))},D)},He=0;He<N;He++)Ue(He)},D)}}function kt(A,U,C){A?(0,Me.f)(C,A,U):U()}var dt=O(30576);function $e(A,U){var C=(0,dt.m)(A)?A:function(){return A},D=function(J){return J.error(C())};return new rt.y(U?function(N){return U.schedule(D,0,N)}:D)}var Fe=O(50727),Pe=O(54482);function Ce(){return(0,Pe.e)(function(A,U){var C=null;A._refCount++;var D=(0,it.x)(U,void 0,void 0,void 0,function(){if(!A||A._refCount<=0||0<--A._refCount)C=null;else{var N=A._connection,J=C;C=null,N&&(!J||N===J)&&N.unsubscribe(),U.unsubscribe()}});A.subscribe(D),D.closed||(C=A.connect())})}var at=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D,N){var J;return(0,F.Z)(this,C),(J=U.call(this)).source=D,J.subjectFactory=N,J._subject=null,J._refCount=0,J._connection=null,(0,Pe.A)(D)&&(J.lift=D.lift),J}return(0,x.Z)(C,[{key:"_subscribe",value:function(N){return this.getSubject().subscribe(N)}},{key:"getSubject",value:function(){var N=this._subject;return(!N||N.isStopped)&&(this._subject=this.subjectFactory()),this._subject}},{key:"_teardown",value:function(){this._refCount=0;var N=this._connection;this._subject=this._connection=null,null==N||N.unsubscribe()}},{key:"connect",value:function(){var N=this,J=this._connection;if(!J){J=this._connection=new Fe.w0;var oe=this.getSubject();J.add(this.source.subscribe((0,it.x)(oe,void 0,function(){N._teardown(),oe.complete()},function(pe){N._teardown(),oe.error(pe)},function(){return N._teardown()}))),J.closed&&(this._connection=null,J=Fe.w0.EMPTY)}return J}},{key:"refCount",value:function(){return Ce()(this)}}]),C}(rt.y),be=O(39646),Ge=O(86805),Se=O(97272),Mt=O(49770),te=O(60515),Tt=O(38421);function jt(A){return(0,Pe.e)(function(U,C){var J,D=null,N=!1;D=U.subscribe((0,it.x)(C,void 0,void 0,function(oe){J=(0,Tt.Xf)(A(oe,jt(A)(U))),D?(D.unsubscribe(),D=null,J.subscribe(C)):N=!0})),N&&(D.unsubscribe(),D=null,J.subscribe(C))})}var kn=O(39300);function on(A){return A<=0?function(){return te.E}:(0,Pe.e)(function(U,C){var D=[];U.subscribe((0,it.x)(C,function(N){D.push(N),A<D.length&&D.shift()},function(){var J,N=(0,j.Z)(D);try{for(N.s();!(J=N.n()).done;)C.next(J.value)}catch(pe){N.e(pe)}finally{N.f()}C.complete()},void 0,function(){D=null}))})}var Ze=O(18068),Kt=O(46590),ft=O(54004),Ft=O(63900),$t=O(95698),Xt=O(68675),qn=O(75026),Rn=O(24351),Sn=O(50590),Yr=O(95577),Ir=O(18505),yr=O(8189),yn=O(69808),Yn=(0,x.Z)(function A(U,C){(0,F.Z)(this,A),this.id=U,this.url=C}),Mr=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D,N){var J,oe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",pe=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,F.Z)(this,C),(J=U.call(this,D,N)).navigationTrigger=oe,J.restoredState=pe,J}return(0,x.Z)(C,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),C}(Yn),cr=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D,N,J){var oe;return(0,F.Z)(this,C),(oe=U.call(this,D,N)).urlAfterRedirects=J,oe}return(0,x.Z)(C,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),C}(Yn),Lr=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D,N,J){var oe;return(0,F.Z)(this,C),(oe=U.call(this,D,N)).reason=J,oe}return(0,x.Z)(C,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),C}(Yn),os=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D,N,J){var oe;return(0,F.Z)(this,C),(oe=U.call(this,D,N)).error=J,oe}return(0,x.Z)(C,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),C}(Yn),jr=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D,N,J,oe){var pe;return(0,F.Z)(this,C),(pe=U.call(this,D,N)).urlAfterRedirects=J,pe.state=oe,pe}return(0,x.Z)(C,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),C}(Yn),Ki=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D,N,J,oe){var pe;return(0,F.Z)(this,C),(pe=U.call(this,D,N)).urlAfterRedirects=J,pe.state=oe,pe}return(0,x.Z)(C,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),C}(Yn),Xr=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D,N,J,oe,pe){var Ue;return(0,F.Z)(this,C),(Ue=U.call(this,D,N)).urlAfterRedirects=J,Ue.state=oe,Ue.shouldActivate=pe,Ue}return(0,x.Z)(C,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),C}(Yn),ra=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D,N,J,oe){var pe;return(0,F.Z)(this,C),(pe=U.call(this,D,N)).urlAfterRedirects=J,pe.state=oe,pe}return(0,x.Z)(C,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),C}(Yn),ma=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D,N,J,oe){var pe;return(0,F.Z)(this,C),(pe=U.call(this,D,N)).urlAfterRedirects=J,pe.state=oe,pe}return(0,x.Z)(C,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),C}(Yn),ls=function(){function A(U){(0,F.Z)(this,A),this.route=U}return(0,x.Z)(A,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),A}(),tn=function(){function A(U){(0,F.Z)(this,A),this.route=U}return(0,x.Z)(A,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),A}(),ia=function(){function A(U){(0,F.Z)(this,A),this.snapshot=U}return(0,x.Z)(A,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),A}(),Qn=function(){function A(U){(0,F.Z)(this,A),this.snapshot=U}return(0,x.Z)(A,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),A}(),_n=function(){function A(U){(0,F.Z)(this,A),this.snapshot=U}return(0,x.Z)(A,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),A}(),Un=function(){function A(U){(0,F.Z)(this,A),this.snapshot=U}return(0,x.Z)(A,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),A}(),ya=function(){function A(U,C,D){(0,F.Z)(this,A),this.routerEvent=U,this.position=C,this.anchor=D}return(0,x.Z)(A,[{key:"toString",value:function(){var C=this.position?"".concat(this.position[0],", ").concat(this.position[1]):null;return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(C,"')")}}]),A}(),Pn="primary",Dr=function(){function A(U){(0,F.Z)(this,A),this.params=U||{}}return(0,x.Z)(A,[{key:"has",value:function(C){return Object.prototype.hasOwnProperty.call(this.params,C)}},{key:"get",value:function(C){if(this.has(C)){var D=this.params[C];return Array.isArray(D)?D[0]:D}return null}},{key:"getAll",value:function(C){if(this.has(C)){var D=this.params[C];return Array.isArray(D)?D:[D]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),A}();function ka(A){return new Dr(A)}var fi="ngNavigationCancelingError";function Pi(A){var U=Error("NavigationCancelingError: "+A);return U[fi]=!0,U}function Fi(A,U,C){var D=C.path.split("/");if(D.length>A.length||"full"===C.pathMatch&&(U.hasChildren()||D.length<A.length))return null;for(var N={},J=0;J<D.length;J++){var oe=D[J],pe=A[J];if(oe.startsWith(":"))N[oe.substring(1)]=pe;else if(oe!==pe.path)return null}return{consumed:A.slice(0,D.length),posParams:N}}function Ur(A,U){var C=A?Object.keys(A):void 0,D=U?Object.keys(U):void 0;if(!C||!D||C.length!=D.length)return!1;for(var N,J=0;J<C.length;J++)if(!dr(A[N=C[J]],U[N]))return!1;return!0}function dr(A,U){if(Array.isArray(A)&&Array.isArray(U)){if(A.length!==U.length)return!1;var C=(0,le.Z)(A).sort(),D=(0,le.Z)(U).sort();return C.every(function(N,J){return D[J]===N})}return A===U}function un(A){return Array.prototype.concat.apply([],A)}function Qt(A){return A.length>0?A[A.length-1]:null}function zt(A,U){for(var C in A)A.hasOwnProperty(C)&&U(A[C],C)}function qt(A){return(0,ke.CqO)(A)?A:(0,ke.QGY)(A)?(0,fe.D)(Promise.resolve(A)):(0,be.of)(A)}var kr={exact:function Le(A,U,C){if(!Ci(A.segments,U.segments)||!pn(A.segments,U.segments,C)||A.numberOfChildren!==U.numberOfChildren)return!1;for(var D in U.children)if(!A.children[D]||!Le(A.children[D],U.children[D],C))return!1;return!0},subset:_t},On={exact:function Ne(A,U){return Ur(A,U)},subset:function lt(A,U){return Object.keys(U).length<=Object.keys(A).length&&Object.keys(U).every(function(C){return dr(A[C],U[C])})},ignored:function(){return!0}};function Xe(A,U,C){return kr[C.paths](A.root,U.root,C.matrixParams)&&On[C.queryParams](A.queryParams,U.queryParams)&&!("exact"===C.fragment&&A.fragment!==U.fragment)}function _t(A,U,C){return Dt(A,U,U.segments,C)}function Dt(A,U,C,D){if(A.segments.length>C.length){var N=A.segments.slice(0,C.length);return!(!Ci(N,C)||U.hasChildren()||!pn(N,C,D))}if(A.segments.length===C.length){if(!Ci(A.segments,C)||!pn(A.segments,C,D))return!1;for(var J in U.children)if(!A.children[J]||!_t(A.children[J],U.children[J],D))return!1;return!0}var oe=C.slice(0,A.segments.length),pe=C.slice(A.segments.length);return!!(Ci(A.segments,oe)&&pn(A.segments,oe,D)&&A.children[Pn])&&Dt(A.children[Pn],U,pe,D)}function pn(A,U,C){return U.every(function(D,N){return On[C](A[N].parameters,D.parameters)})}var An=function(){function A(U,C,D){(0,F.Z)(this,A),this.root=U,this.queryParams=C,this.fragment=D}return(0,x.Z)(A,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=ka(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return Zi.serialize(this)}}]),A}(),nn=function(){function A(U,C){var D=this;(0,F.Z)(this,A),this.segments=U,this.children=C,this.parent=null,zt(C,function(N,J){return N.parent=D})}return(0,x.Z)(A,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return ri(this)}}]),A}(),Hr=function(){function A(U,C){(0,F.Z)(this,A),this.path=U,this.parameters=C}return(0,x.Z)(A,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=ka(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return Ii(this)}}]),A}();function Ci(A,U){return A.length===U.length&&A.every(function(C,D){return C.path===U[D].path})}var Rr=(0,x.Z)(function A(){(0,F.Z)(this,A)}),Mi=function(){function A(){(0,F.Z)(this,A)}return(0,x.Z)(A,[{key:"parse",value:function(C){var D=new Ui(C);return new An(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}},{key:"serialize",value:function(C){var D="/".concat(Ia(C.root,!0)),N=function Dn(A){var U=Object.keys(A).map(function(C){var D=A[C];return Array.isArray(D)?D.map(function(N){return"".concat(Fa(C),"=").concat(Fa(N))}).join("&"):"".concat(Fa(C),"=").concat(Fa(D))}).filter(function(C){return!!C});return U.length?"?".concat(U.join("&")):""}(C.queryParams),J="string"==typeof C.fragment?"#".concat(function nu(A){return encodeURI(A)}(C.fragment)):"";return"".concat(D).concat(N).concat(J)}}]),A}(),Zi=new Mi;function ri(A){return A.segments.map(function(U){return Ii(U)}).join("/")}function Ia(A,U){if(!A.hasChildren())return ri(A);if(U){var C=A.children[Pn]?Ia(A.children[Pn],!1):"",D=[];return zt(A.children,function(J,oe){oe!==Pn&&D.push("".concat(oe,":").concat(Ia(J,!1)))}),D.length>0?"".concat(C,"(").concat(D.join("//"),")"):C}var N=function hi(A,U){var C=[];return zt(A.children,function(D,N){N===Pn&&(C=C.concat(U(D,N)))}),zt(A.children,function(D,N){N!==Pn&&(C=C.concat(U(D,N)))}),C}(A,function(J,oe){return oe===Pn?[Ia(A.children[Pn],!1)]:["".concat(oe,":").concat(Ia(J,!1))]});return 1===Object.keys(A.children).length&&null!=A.children[Pn]?"".concat(ri(A),"/").concat(N[0]):"".concat(ri(A),"/(").concat(N.join("//"),")")}function Qa(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fa(A){return Qa(A).replace(/%3B/gi,";")}function Za(A){return Qa(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _r(A){return decodeURIComponent(A)}function Ks(A){return _r(A.replace(/\+/g,"%20"))}function Ii(A){return"".concat(Za(A.path)).concat(function fn(A){return Object.keys(A).map(function(U){return";".concat(Za(U),"=").concat(Za(A[U]))}).join("")}(A.parameters))}var er=/^[^\/()?;=#]+/;function Wn(A){var U=A.match(er);return U?U[0]:""}var oa=/^[^=?&#]+/,ys=/^[^&#]+/,Ui=function(){function A(U){(0,F.Z)(this,A),this.url=U,this.remaining=U}return(0,x.Z)(A,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());var D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));var N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(C.length>0||Object.keys(D).length>0)&&(N[Pn]=new nn(C,D)),N}},{key:"parseSegment",value:function(){var C=Wn(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(C),new Hr(_r(C),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var C={};this.consumeOptional(";");)this.parseParam(C);return C}},{key:"parseParam",value:function(C){var D=Wn(this.remaining);if(D){this.capture(D);var N="";if(this.consumeOptional("=")){var J=Wn(this.remaining);J&&this.capture(N=J)}C[_r(D)]=_r(N)}}},{key:"parseQueryParam",value:function(C){var D=function gi(A){var U=A.match(oa);return U?U[0]:""}(this.remaining);if(D){this.capture(D);var N="";if(this.consumeOptional("=")){var J=function ii(A){var U=A.match(ys);return U?U[0]:""}(this.remaining);J&&this.capture(N=J)}var oe=Ks(D),pe=Ks(N);if(C.hasOwnProperty(oe)){var Ue=C[oe];Array.isArray(Ue)||(C[oe]=Ue=[Ue]),Ue.push(pe)}else C[oe]=pe}}},{key:"parseParens",value:function(C){var D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var N=Wn(this.remaining),J=this.remaining[N.length];if("/"!==J&&")"!==J&&";"!==J)throw new Error("Cannot parse url '".concat(this.url,"'"));var oe=void 0;N.indexOf(":")>-1?(oe=N.substr(0,N.indexOf(":")),this.capture(oe),this.capture(":")):C&&(oe=Pn);var pe=this.parseChildren();D[oe]=1===Object.keys(pe).length?pe[Pn]:new nn([],pe),this.consumeOptional("//")}return D}},{key:"peekStartsWith",value:function(C){return this.remaining.startsWith(C)}},{key:"consumeOptional",value:function(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}},{key:"capture",value:function(C){if(!this.consumeOptional(C))throw new Error('Expected "'.concat(C,'".'))}}]),A}(),$i=function(){function A(U){(0,F.Z)(this,A),this._root=U}return(0,x.Z)(A,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(C){var D=this.pathFromRoot(C);return D.length>1?D[D.length-2]:null}},{key:"children",value:function(C){var D=Gn(C,this._root);return D?D.children.map(function(N){return N.value}):[]}},{key:"firstChild",value:function(C){var D=Gn(C,this._root);return D&&D.children.length>0?D.children[0].value:null}},{key:"siblings",value:function(C){var D=Ua(C,this._root);return D.length<2?[]:D[D.length-2].children.map(function(J){return J.value}).filter(function(J){return J!==C})}},{key:"pathFromRoot",value:function(C){return Ua(C,this._root).map(function(D){return D.value})}}]),A}();function Gn(A,U){if(A===U.value)return U;var D,C=(0,j.Z)(U.children);try{for(C.s();!(D=C.n()).done;){var J=Gn(A,D.value);if(J)return J}}catch(oe){C.e(oe)}finally{C.f()}return null}function Ua(A,U){if(A===U.value)return[U];var D,C=(0,j.Z)(U.children);try{for(C.s();!(D=C.n()).done;){var J=Ua(A,D.value);if(J.length)return J.unshift(U),J}}catch(oe){C.e(oe)}finally{C.f()}return[]}var di=function(){function A(U,C){(0,F.Z)(this,A),this.value=U,this.children=C}return(0,x.Z)(A,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),A}();function _a(A){var U={};return A&&A.children.forEach(function(C){return U[C.value.outlet]=C}),U}var la=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D,N){var J;return(0,F.Z)(this,C),(J=U.call(this,D)).snapshot=N,Oi((0,H.Z)(J),D),J}return(0,x.Z)(C,[{key:"toString",value:function(){return this.snapshot.toString()}}]),C}($i);function mi(A,U){var C=function Ba(A,U){var oe=new Ja([],{},{},"",{},Pn,U,null,A.root,-1,{});return new Vu("",new di(oe,[]))}(A,U),D=new Je([new Hr("",{})]),N=new Je({}),J=new Je({}),oe=new Je({}),pe=new Je(""),Ue=new qi(D,N,oe,pe,J,Pn,U,C.root);return Ue.snapshot=C.root,new la(new di(Ue,[]),C)}var qi=function(){function A(U,C,D,N,J,oe,pe,Ue){(0,F.Z)(this,A),this.url=U,this.params=C,this.queryParams=D,this.fragment=N,this.data=J,this.outlet=oe,this.component=pe,this._futureSnapshot=Ue}return(0,x.Z)(A,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(function(C){return ka(C)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(function(C){return ka(C)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),A}();function Bi(A){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",C=A.pathFromRoot,D=0;if("always"!==U)for(D=C.length-1;D>=1;){var N=C[D],J=C[D-1];if(N.routeConfig&&""===N.routeConfig.path)D--;else{if(J.component)break;D--}}return Gr(C.slice(D))}function Gr(A){return A.reduce(function(U,C){return{params:Object.assign(Object.assign({},U.params),C.params),data:Object.assign(Object.assign({},U.data),C.data),resolve:Object.assign(Object.assign({},U.resolve),C._resolvedData)}},{params:{},data:{},resolve:{}})}var Ja=function(){function A(U,C,D,N,J,oe,pe,Ue,He,vt,Ke){(0,F.Z)(this,A),this.url=U,this.params=C,this.queryParams=D,this.fragment=N,this.data=J,this.outlet=oe,this.component=pe,this.routeConfig=Ue,this._urlSegment=He,this._lastPathIndex=vt,this._resolve=Ke}return(0,x.Z)(A,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=ka(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=ka(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){var C=this.url.map(function(N){return N.toString()}).join("/"),D=this.routeConfig?this.routeConfig.path:"";return"Route(url:'".concat(C,"', path:'").concat(D,"')")}}]),A}(),Vu=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(D,N){var J;return(0,F.Z)(this,C),(J=U.call(this,N)).url=D,Oi((0,H.Z)(J),N),J}return(0,x.Z)(C,[{key:"toString",value:function(){return Br(this._root)}}]),C}($i);function Oi(A,U){U.value._routerState=A,U.children.forEach(function(C){return Oi(A,C)})}function Br(A){var U=A.children.length>0?" { ".concat(A.children.map(Br).join(", ")," } "):"";return"".concat(A.value).concat(U)}function Ps(A){if(A.snapshot){var U=A.snapshot,C=A._futureSnapshot;A.snapshot=C,Ur(U.queryParams,C.queryParams)||A.queryParams.next(C.queryParams),U.fragment!==C.fragment&&A.fragment.next(C.fragment),Ur(U.params,C.params)||A.params.next(C.params),function Or(A,U){if(A.length!==U.length)return!1;for(var C=0;C<A.length;++C)if(!Ur(A[C],U[C]))return!1;return!0}(U.url,C.url)||A.url.next(C.url),Ur(U.data,C.data)||A.data.next(C.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function Ms(A,U){var C=Ur(A.params,U.params)&&function ni(A,U){return Ci(A,U)&&A.every(function(C,D){return Ur(C.parameters,U[D].parameters)})}(A.url,U.url);return C&&!(!A.parent!=!U.parent)&&(!A.parent||Ms(A.parent,U.parent))}function ze(A,U,C){if(C&&A.shouldReuseRoute(U.value,C.value.snapshot)){var D=C.value;D._futureSnapshot=U.value;var N=function ut(A,U,C){return U.children.map(function(D){var J,N=(0,j.Z)(C.children);try{for(N.s();!(J=N.n()).done;){var oe=J.value;if(A.shouldReuseRoute(D.value,oe.value.snapshot))return ze(A,D,oe)}}catch(pe){N.e(pe)}finally{N.f()}return ze(A,D)})}(A,U,C);return new di(D,N)}if(A.shouldAttach(U.value)){var J=A.retrieve(U.value);if(null!==J){var oe=J.route;return oe.value._futureSnapshot=U.value,oe.children=U.children.map(function(He){return ze(A,He)}),oe}}var pe=function yt(A){return new qi(new Je(A.url),new Je(A.params),new Je(A.queryParams),new Je(A.fragment),new Je(A.data),A.outlet,A.component,A)}(U.value),Ue=U.children.map(function(He){return ze(A,He)});return new di(pe,Ue)}function It(A,U,C,D,N){if(0===C.length)return ln(U.root,U.root,U.root,D,N);var J=function yi(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new Nr(!0,0,A);var U=0,C=!1,D=A.reduce(function(N,J,oe){if("object"==typeof J&&null!=J){if(J.outlets){var pe={};return zt(J.outlets,function(Ue,He){pe[He]="string"==typeof Ue?Ue.split("/"):Ue}),[].concat((0,le.Z)(N),[{outlets:pe}])}if(J.segmentPath)return[].concat((0,le.Z)(N),[J.segmentPath])}return"string"!=typeof J?[].concat((0,le.Z)(N),[J]):0===oe?(J.split("/").forEach(function(Ue,He){0==He&&"."===Ue||(0==He&&""===Ue?C=!0:".."===Ue?U++:""!=Ue&&N.push(Ue))}),N):[].concat((0,le.Z)(N),[J])},[]);return new Nr(C,U,D)}(C);if(J.toRoot())return ln(U.root,U.root,new nn([],{}),D,N);var oe=function wr(A,U,C){if(A.isAbsolute)return new ai(U.root,!0,0);if(-1===C.snapshot._lastPathIndex){var D=C.snapshot._urlSegment;return new ai(D,D===U.root,0)}var J=St(A.commands[0])?0:1;return function Va(A,U,C){for(var D=A,N=U,J=C;J>N;){if(J-=N,!(D=D.parent))throw new Error("Invalid number of '../'");N=D.segments.length}return new ai(D,!1,N-J)}(C.snapshot._urlSegment,C.snapshot._lastPathIndex+J,A.numberOfDoubleDots)}(J,U,A),pe=oe.processChildren?xr(oe.segmentGroup,oe.index,J.commands):wa(oe.segmentGroup,oe.index,J.commands);return ln(U.root,oe.segmentGroup,pe,D,N)}function St(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function At(A){return"object"==typeof A&&null!=A&&A.outlets}function ln(A,U,C,D,N){var J={};if(D&&zt(D,function(pe,Ue){J[Ue]=Array.isArray(pe)?pe.map(function(He){return"".concat(He)}):"".concat(pe)}),A===U)return new An(C,J,N);var oe=Vr(A,U,C);return new An(oe,J,N)}function Vr(A,U,C){var D={};return zt(A.children,function(N,J){D[J]=N===U?C:Vr(N,U,C)}),new nn(A.segments,D)}var Nr=function(){function A(U,C,D){if((0,F.Z)(this,A),this.isAbsolute=U,this.numberOfDoubleDots=C,this.commands=D,U&&D.length>0&&St(D[0]))throw new Error("Root segment cannot have matrix parameters");var N=D.find(At);if(N&&N!==Qt(D))throw new Error("{outlets:{}} has to be the last command")}return(0,x.Z)(A,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),A}(),ai=(0,x.Z)(function A(U,C,D){(0,F.Z)(this,A),this.segmentGroup=U,this.processChildren=C,this.index=D});function wa(A,U,C){if(A||(A=new nn([],{})),0===A.segments.length&&A.hasChildren())return xr(A,U,C);var D=function uo(A,U,C){for(var D=0,N=U,J={match:!1,pathIndex:0,commandIndex:0};N<A.segments.length;){if(D>=C.length)return J;var oe=A.segments[N],pe=C[D];if(At(pe))break;var Ue="".concat(pe),He=D<C.length-1?C[D+1]:null;if(N>0&&void 0===Ue)break;if(Ue&&He&&"object"==typeof He&&void 0===He.outlets){if(!ru(Ue,He,oe))return J;D+=2}else{if(!ru(Ue,{},oe))return J;D++}N++}return{match:!0,pathIndex:N,commandIndex:D}}(A,U,C),N=C.slice(D.commandIndex);if(D.match&&D.pathIndex<A.segments.length){var J=new nn(A.segments.slice(0,D.pathIndex),{});return J.children[Pn]=new nn(A.segments.slice(D.pathIndex),A.children),xr(J,0,N)}return D.match&&0===N.length?new nn(A.segments,{}):D.match&&!A.hasChildren()?si(A,U,C):D.match?xr(A,0,N):si(A,U,C)}function xr(A,U,C){if(0===C.length)return new nn(A.segments,{});var D=function Bn(A){return At(A[0])?A[0].outlets:(0,z.Z)({},Pn,A)}(C),N={};return zt(D,function(J,oe){"string"==typeof J&&(J=[J]),null!==J&&(N[oe]=wa(A.children[oe],U,J))}),zt(A.children,function(J,oe){void 0===D[oe]&&(N[oe]=J)}),new nn(A.segments,N)}function si(A,U,C){for(var D=A.segments.slice(0,U),N=0;N<C.length;){var J=C[N];if(At(J)){var oe=xu(J.outlets);return new nn(D,oe)}if(0===N&&St(C[0]))D.push(new Hr(A.segments[U].path,Os(C[0]))),N++;else{var Ue=At(J)?J.outlets[Pn]:"".concat(J),He=N<C.length-1?C[N+1]:null;Ue&&He&&St(He)?(D.push(new Hr(Ue,Os(He))),N+=2):(D.push(new Hr(Ue,{})),N++)}}return new nn(D,{})}function xu(A){var U={};return zt(A,function(C,D){"string"==typeof C&&(C=[C]),null!==C&&(U[D]=si(new nn([],{}),0,C))}),U}function Os(A){var U={};return zt(A,function(C,D){return U[D]="".concat(C)}),U}function ru(A,U,C){return A==C.path&&Ur(U,C.parameters)}var Qo=function(){function A(U,C,D,N){(0,F.Z)(this,A),this.routeReuseStrategy=U,this.futureState=C,this.currState=D,this.forwardEvent=N}return(0,x.Z)(A,[{key:"activate",value:function(C){var D=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,N,C),Ps(this.futureState.root),this.activateChildRoutes(D,N,C)}},{key:"deactivateChildRoutes",value:function(C,D,N){var J=this,oe=_a(D);C.children.forEach(function(pe){var Ue=pe.value.outlet;J.deactivateRoutes(pe,oe[Ue],N),delete oe[Ue]}),zt(oe,function(pe,Ue){J.deactivateRouteAndItsChildren(pe,N)})}},{key:"deactivateRoutes",value:function(C,D,N){var J=C.value,oe=D?D.value:null;if(J===oe)if(J.component){var pe=N.getContext(J.outlet);pe&&this.deactivateChildRoutes(C,D,pe.children)}else this.deactivateChildRoutes(C,D,N);else oe&&this.deactivateRouteAndItsChildren(D,N)}},{key:"deactivateRouteAndItsChildren",value:function(C,D){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,D):this.deactivateRouteAndOutlet(C,D)}},{key:"detachAndStoreRouteSubtree",value:function(C,D){for(var N=D.getContext(C.value.outlet),J=N&&C.value.component?N.children:D,oe=_a(C),pe=0,Ue=Object.keys(oe);pe<Ue.length;pe++)this.deactivateRouteAndItsChildren(oe[Ue[pe]],J);if(N&&N.outlet){var vt=N.outlet.detach(),Ke=N.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:vt,route:C,contexts:Ke})}}},{key:"deactivateRouteAndOutlet",value:function(C,D){for(var N=D.getContext(C.value.outlet),J=N&&C.value.component?N.children:D,oe=_a(C),pe=0,Ue=Object.keys(oe);pe<Ue.length;pe++)this.deactivateRouteAndItsChildren(oe[Ue[pe]],J);N&&N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated(),N.attachRef=null,N.resolver=null,N.route=null)}},{key:"activateChildRoutes",value:function(C,D,N){var J=this,oe=_a(D);C.children.forEach(function(pe){J.activateRoutes(pe,oe[pe.value.outlet],N),J.forwardEvent(new Un(pe.value.snapshot))}),C.children.length&&this.forwardEvent(new Qn(C.value.snapshot))}},{key:"activateRoutes",value:function(C,D,N){var J=C.value,oe=D?D.value:null;if(Ps(J),J===oe)if(J.component){var pe=N.getOrCreateContext(J.outlet);this.activateChildRoutes(C,D,pe.children)}else this.activateChildRoutes(C,D,N);else if(J.component){var Ue=N.getOrCreateContext(J.outlet);if(this.routeReuseStrategy.shouldAttach(J.snapshot)){var He=this.routeReuseStrategy.retrieve(J.snapshot);this.routeReuseStrategy.store(J.snapshot,null),Ue.children.onOutletReAttached(He.contexts),Ue.attachRef=He.componentRef,Ue.route=He.route.value,Ue.outlet&&Ue.outlet.attach(He.componentRef,He.route.value),Ps(He.route.value),this.activateChildRoutes(C,null,Ue.children)}else{var vt=function iu(A){for(var U=A.parent;U;U=U.parent){var C=U.routeConfig;if(C&&C._loadedConfig)return C._loadedConfig;if(C&&C.component)return null}return null}(J.snapshot),Ke=vt?vt.module.componentFactoryResolver:null;Ue.attachRef=null,Ue.route=J,Ue.resolver=Ke,Ue.outlet&&Ue.outlet.activateWith(J,Ke),this.activateChildRoutes(C,null,Ue.children)}}else this.activateChildRoutes(C,null,N)}}]),A}(),ki=(0,x.Z)(function A(U,C){(0,F.Z)(this,A),this.routes=U,this.module=C});function ca(A){return"function"==typeof A}function Yi(A){return A instanceof An}var su=Symbol("INITIAL_VALUE");function uu(){return(0,Ft.w)(function(A){return function ct(){for(var A=arguments.length,U=new Array(A),C=0;C<A;C++)U[C]=arguments[C];var D=(0,wt.yG)(U),N=(0,wt.jO)(U),J=(0,Ve.D)(U),oe=J.args,pe=J.keys;if(0===oe.length)return(0,fe.D)([],D);var Ue=new rt.y(gt(oe,D,pe?function(He){return(0,ht.n)(pe,He)}:ve.y));return N?Ue.pipe((0,qe.Z)(N)):Ue}(A.map(function(U){return U.pipe((0,$t.q)(1),(0,Xt.O)(su))})).pipe((0,qn.R)(function(U,C){var D=!1;return C.reduce(function(N,J,oe){return N!==su?N:(J===su&&(D=!0),D||!1!==J&&oe!==C.length-1&&!Yi(J)?N:J)},U)},su),(0,kn.h)(function(U){return U!==su}),(0,ft.U)(function(U){return Yi(U)?U:!0===U}),(0,$t.q)(1))})}var ks=(0,x.Z)(function A(){(0,F.Z)(this,A),this.outlet=null,this.route=null,this.resolver=null,this.children=new Vi,this.attachRef=null}),Vi=function(){function A(){(0,F.Z)(this,A),this.contexts=new Map}return(0,x.Z)(A,[{key:"onChildOutletCreated",value:function(C,D){var N=this.getOrCreateContext(C);N.outlet=D,this.contexts.set(C,N)}},{key:"onChildOutletDestroyed",value:function(C){var D=this.getContext(C);D&&(D.outlet=null,D.attachRef=null)}},{key:"onOutletDeactivated",value:function(){var C=this.contexts;return this.contexts=new Map,C}},{key:"onOutletReAttached",value:function(C){this.contexts=C}},{key:"getOrCreateContext",value:function(C){var D=this.getContext(C);return D||(D=new ks,this.contexts.set(C,D)),D}},{key:"getContext",value:function(C){return this.contexts.get(C)||null}}]),A}(),Ns=function(){var A=function(){function U(C,D,N,J,oe){(0,F.Z)(this,U),this.parentContexts=C,this.location=D,this.resolver=N,this.changeDetector=oe,this.activated=null,this._activatedRoute=null,this.activateEvents=new ke.vpe,this.deactivateEvents=new ke.vpe,this.attachEvents=new ke.vpe,this.detachEvents=new ke.vpe,this.name=J||Pn,C.onChildOutletCreated(this.name,this)}return(0,x.Z)(U,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var D=this.parentContexts.getContext(this.name);D&&D.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}},{key:"attach",value:function(D,N){this.activated=D,this._activatedRoute=N,this.location.insert(D.hostView),this.attachEvents.emit(D.instance)}},{key:"deactivate",value:function(){if(this.activated){var D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}},{key:"activateWith",value:function(D,N){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=D;var pe=(N=N||this.resolver).resolveComponentFactory(D._futureSnapshot.routeConfig.component),Ue=this.parentContexts.getOrCreateContext(this.name).children,He=new xa(D,Ue,this.location.injector);this.activated=this.location.createComponent(pe,this.location.length,He),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),U}();return A.\u0275fac=function(C){return new(C||A)(ke.Y36(Vi),ke.Y36(ke.s_b),ke.Y36(ke._Vd),ke.$8M("name"),ke.Y36(ke.sBO))},A.\u0275dir=ke.lG2({type:A,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),A}(),xa=function(){function A(U,C,D){(0,F.Z)(this,A),this.route=U,this.childContexts=C,this.parent=D}return(0,x.Z)(A,[{key:"get",value:function(C,D){return C===qi?this.route:C===Vi?this.childContexts:this.parent.get(C,D)}}]),A}(),$=function(){var A=(0,x.Z)(function U(){(0,F.Z)(this,U)});return A.\u0275fac=function(C){return new(C||A)},A.\u0275cmp=ke.Xpm({type:A,selectors:[["ng-component"]],decls:1,vars:0,template:function(C,D){1&C&&ke._UZ(0,"router-outlet")},directives:[Ns],encapsulation:2}),A}();function Q(A){for(var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",C=0;C<A.length;C++){var D=A[C],N=ie(U,D);se(D,N)}}function se(A,U){A.children&&Q(A.children,U)}function ie(A,U){return U?A||U.path?A&&!U.path?"".concat(A,"/"):!A&&U.path?U.path:"".concat(A,"/").concat(U.path):"":A}function _e(A){var U=A.children&&A.children.map(_e),C=U?Object.assign(Object.assign({},A),{children:U}):Object.assign({},A);return!C.component&&(U||C.loadChildren)&&C.outlet&&C.outlet!==Pn&&(C.component=$),C}function Ae(A){return A.outlet||Pn}function mt(A,U){var C=A.filter(function(D){return Ae(D)===U});return C.push.apply(C,(0,le.Z)(A.filter(function(D){return Ae(D)!==U}))),C}var Ot={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Nn(A,U,C){var D;if(""===U.path)return"full"===U.pathMatch&&(A.hasChildren()||C.length>0)?Object.assign({},Ot):{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};var J=(U.matcher||Fi)(C,A,U);if(!J)return Object.assign({},Ot);var oe={};zt(J.posParams,function(Ue,He){oe[He]=Ue.path});var pe=J.consumed.length>0?Object.assign(Object.assign({},oe),J.consumed[J.consumed.length-1].parameters):oe;return{matched:!0,consumedSegments:J.consumed,remainingSegments:C.slice(J.consumed.length),parameters:pe,positionalParamSegments:null!==(D=J.posParams)&&void 0!==D?D:{}}}function En(A,U,C,D){var N=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(C.length>0&&ui(A,C,D)){var J=new nn(U,xn(A,U,D,new nn(C,A.children)));return J._sourceSegment=A,J._segmentIndexShift=U.length,{segmentGroup:J,slicedSegments:[]}}if(0===C.length&&Qr(A,C,D)){var oe=new nn(A.segments,Cn(A,U,C,D,A.children,N));return oe._sourceSegment=A,oe._segmentIndexShift=U.length,{segmentGroup:oe,slicedSegments:C}}var pe=new nn(A.segments,A.children);return pe._sourceSegment=A,pe._segmentIndexShift=U.length,{segmentGroup:pe,slicedSegments:C}}function Cn(A,U,C,D,N,J){var Ue,oe={},pe=(0,j.Z)(D);try{for(pe.s();!(Ue=pe.n()).done;){var He=Ue.value;if(oi(A,C,He)&&!N[Ae(He)]){var vt=new nn([],{});vt._sourceSegment=A,vt._segmentIndexShift="legacy"===J?A.segments.length:U.length,oe[Ae(He)]=vt}}}catch(Ke){pe.e(Ke)}finally{pe.f()}return Object.assign(Object.assign({},N),oe)}function xn(A,U,C,D){var N={};N[Pn]=D,D._sourceSegment=A,D._segmentIndexShift=U.length;var oe,J=(0,j.Z)(C);try{for(J.s();!(oe=J.n()).done;){var pe=oe.value;if(""===pe.path&&Ae(pe)!==Pn){var Ue=new nn([],{});Ue._sourceSegment=A,Ue._segmentIndexShift=U.length,N[Ae(pe)]=Ue}}}catch(He){J.e(He)}finally{J.f()}return N}function ui(A,U,C){return C.some(function(D){return oi(A,U,D)&&Ae(D)!==Pn})}function Qr(A,U,C){return C.some(function(D){return oi(A,U,D)})}function oi(A,U,C){return(!(A.hasChildren()||U.length>0)||"full"!==C.pathMatch)&&""===C.path}function ir(A,U,C,D){return!!(Ae(A)===D||D!==Pn&&oi(U,C,A))&&("**"===A.path||Nn(U,A,C).matched)}function Si(A,U,C){return 0===U.length&&!A.children[C]}var vr=(0,x.Z)(function A(U){(0,F.Z)(this,A),this.segmentGroup=U||null}),li=(0,x.Z)(function A(U){(0,F.Z)(this,A),this.urlTree=U});function Qi(A){return $e(new vr(A))}function ba(A){return $e(new li(A))}function ar(A){return $e(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(A,"'")))}var co=function(){function A(U,C,D,N,J){(0,F.Z)(this,A),this.configLoader=C,this.urlSerializer=D,this.urlTree=N,this.config=J,this.allowRedirects=!0,this.ngModule=U.get(ke.h0i)}return(0,x.Z)(A,[{key:"apply",value:function(){var C=this,D=En(this.urlTree.root,[],[],this.config).segmentGroup,N=new nn(D.segments,D.children);return this.expandSegmentGroup(this.ngModule,this.config,N,Pn).pipe((0,ft.U)(function(pe){return C.createUrlTree(Du(pe),C.urlTree.queryParams,C.urlTree.fragment)})).pipe(jt(function(pe){if(pe instanceof li)return C.allowRedirects=!1,C.match(pe.urlTree);throw pe instanceof vr?C.noMatchError(pe):pe}))}},{key:"match",value:function(C){var D=this;return this.expandSegmentGroup(this.ngModule,this.config,C.root,Pn).pipe((0,ft.U)(function(oe){return D.createUrlTree(Du(oe),C.queryParams,C.fragment)})).pipe(jt(function(oe){throw oe instanceof vr?D.noMatchError(oe):oe}))}},{key:"noMatchError",value:function(C){return new Error("Cannot match any routes. URL Segment: '".concat(C.segmentGroup,"'"))}},{key:"createUrlTree",value:function(C,D,N){var J=C.segments.length>0?new nn([],(0,z.Z)({},Pn,C)):C;return new An(J,D,N)}},{key:"expandSegmentGroup",value:function(C,D,N,J){return 0===N.segments.length&&N.hasChildren()?this.expandChildren(C,D,N).pipe((0,ft.U)(function(oe){return new nn([],oe)})):this.expandSegment(C,N,D,N.segments,J,!0)}},{key:"expandChildren",value:function(C,D,N){for(var J=this,oe=[],pe=0,Ue=Object.keys(N.children);pe<Ue.length;pe++){var He=Ue[pe];"primary"===He?oe.unshift(He):oe.push(He)}return(0,fe.D)(oe).pipe((0,Rn.b)(function(vt){var Ke=N.children[vt],Et=mt(D,vt);return J.expandSegmentGroup(C,Et,Ke,vt).pipe((0,ft.U)(function(Vn){return{segment:Vn,outlet:vt}}))}),(0,qn.R)(function(vt,Ke){return vt[Ke.outlet]=Ke.segment,vt},{}),function ot(A,U){var C=arguments.length>=2;return function(D){return D.pipe(A?(0,kn.h)(function(N,J){return A(N,J,D)}):ve.y,on(1),C?(0,Kt.d)(U):(0,Ze.T)(function(){return new Ge.K}))}}())}},{key:"expandSegment",value:function(C,D,N,J,oe,pe){var Ue=this;return(0,fe.D)(N).pipe((0,Rn.b)(function(He){return Ue.expandSegmentAgainstRoute(C,D,N,He,J,oe,pe).pipe(jt(function(Ke){if(Ke instanceof vr)return(0,be.of)(null);throw Ke}))}),(0,Sn.P)(function(He){return!!He}),jt(function(He,vt){if(He instanceof Ge.K||"EmptyError"===He.name)return Si(D,J,oe)?(0,be.of)(new nn([],{})):Qi(D);throw He}))}},{key:"expandSegmentAgainstRoute",value:function(C,D,N,J,oe,pe,Ue){return ir(J,D,oe,pe)?void 0===J.redirectTo?this.matchSegmentAgainstRoute(C,D,J,oe,pe):Ue&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,D,N,J,oe,pe):Qi(D):Qi(D)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(C,D,N,J,oe,pe){return"**"===J.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,N,J,pe):this.expandRegularSegmentAgainstRouteUsingRedirect(C,D,N,J,oe,pe)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(C,D,N,J){var oe=this,pe=this.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?ba(pe):this.lineralizeSegments(N,pe).pipe((0,Yr.z)(function(Ue){var He=new nn(Ue,{});return oe.expandSegment(C,He,D,Ue,J,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(C,D,N,J,oe,pe){var Ue=this,He=Nn(D,J,oe),Ke=He.consumedSegments,Et=He.remainingSegments,Vn=He.positionalParamSegments;if(!He.matched)return Qi(D);var sr=this.applyRedirectCommands(Ke,J.redirectTo,Vn);return J.redirectTo.startsWith("/")?ba(sr):this.lineralizeSegments(J,sr).pipe((0,Yr.z)(function(xi){return Ue.expandSegment(C,D,N,xi.concat(Et),pe,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(C,D,N,J,oe){var pe=this;if("**"===N.path)return N.loadChildren?(N._loadedConfig?(0,be.of)(N._loadedConfig):this.configLoader.load(C.injector,N)).pipe((0,ft.U)(function(sr){return N._loadedConfig=sr,new nn(J,{})})):(0,be.of)(new nn(J,{}));var He=Nn(D,N,J),Ke=He.consumedSegments,Et=He.remainingSegments;return He.matched?this.getChildConfig(C,N,J).pipe((0,Yr.z)(function(sr){var xi=sr.module,ea=sr.routes,ha=En(D,Ke,Et,ea),Wa=ha.segmentGroup,vu=ha.slicedSegments,Es=new nn(Wa.segments,Wa.children);if(0===vu.length&&Es.hasChildren())return pe.expandChildren(xi,ea,Es).pipe((0,ft.U)(function(Gs){return new nn(Ke,Gs)}));if(0===ea.length&&0===vu.length)return(0,be.of)(new nn(Ke,{}));var Hs=Ae(N)===oe;return pe.expandSegment(xi,Es,ea,vu,Hs?Pn:oe,!0).pipe((0,ft.U)(function(Gs){return new nn(Ke.concat(Gs.segments),Gs.children)}))})):Qi(D)}},{key:"getChildConfig",value:function(C,D,N){var J=this;return D.children?(0,be.of)(new ki(D.children,C)):D.loadChildren?void 0!==D._loadedConfig?(0,be.of)(D._loadedConfig):this.runCanLoadGuards(C.injector,D,N).pipe((0,Yr.z)(function(oe){return oe?J.configLoader.load(C.injector,D).pipe((0,ft.U)(function(pe){return D._loadedConfig=pe,pe})):function ja(A){return $e(Pi("Cannot load children because the guard of the route \"path: '".concat(A.path,"'\" returned false")))}(D)})):(0,be.of)(new ki([],C))}},{key:"runCanLoadGuards",value:function(C,D,N){var J=this,oe=D.canLoad;if(!oe||0===oe.length)return(0,be.of)(!0);var pe=oe.map(function(Ue){var vt,He=C.get(Ue);if(function Ea(A){return A&&ca(A.canLoad)}(He))vt=He.canLoad(D,N);else{if(!ca(He))throw new Error("Invalid CanLoad guard");vt=He(D,N)}return qt(vt)});return(0,be.of)(pe).pipe(uu(),(0,Ir.b)(function(Ue){if(Yi(Ue)){var He=Pi('Redirecting to "'.concat(J.urlSerializer.serialize(Ue),'"'));throw He.url=Ue,He}}),(0,ft.U)(function(Ue){return!0===Ue}))}},{key:"lineralizeSegments",value:function(C,D){for(var N=[],J=D.root;;){if(N=N.concat(J.segments),0===J.numberOfChildren)return(0,be.of)(N);if(J.numberOfChildren>1||!J.children[Pn])return ar(C.redirectTo);J=J.children[Pn]}}},{key:"applyRedirectCommands",value:function(C,D,N){return this.applyRedirectCreatreUrlTree(D,this.urlSerializer.parse(D),C,N)}},{key:"applyRedirectCreatreUrlTree",value:function(C,D,N,J){var oe=this.createSegmentGroup(C,D.root,N,J);return new An(oe,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}},{key:"createQueryParams",value:function(C,D){var N={};return zt(C,function(J,oe){if("string"==typeof J&&J.startsWith(":")){var Ue=J.substring(1);N[oe]=D[Ue]}else N[oe]=J}),N}},{key:"createSegmentGroup",value:function(C,D,N,J){var oe=this,pe=this.createSegments(C,D.segments,N,J),Ue={};return zt(D.children,function(He,vt){Ue[vt]=oe.createSegmentGroup(C,He,N,J)}),new nn(pe,Ue)}},{key:"createSegments",value:function(C,D,N,J){var oe=this;return D.map(function(pe){return pe.path.startsWith(":")?oe.findPosParam(C,pe,J):oe.findOrReturn(pe,N)})}},{key:"findPosParam",value:function(C,D,N){var J=N[D.path.substring(1)];if(!J)throw new Error("Cannot redirect to '".concat(C,"'. Cannot find '").concat(D.path,"'."));return J}},{key:"findOrReturn",value:function(C,D){var oe,N=0,J=(0,j.Z)(D);try{for(J.s();!(oe=J.n()).done;){var pe=oe.value;if(pe.path===C.path)return D.splice(N),pe;N++}}catch(Ue){J.e(Ue)}finally{J.f()}return C}}]),A}();function Du(A){for(var U={},C=0,D=Object.keys(A.children);C<D.length;C++){var N=D[C],oe=Du(A.children[N]);(oe.segments.length>0||oe.hasChildren())&&(U[N]=oe)}return function Kn(A){if(1===A.numberOfChildren&&A.children[Pn]){var U=A.children[Pn];return new nn(A.segments.concat(U.segments),U.children)}return A}(new nn(A.segments,U))}var Ha=(0,x.Z)(function A(U){(0,F.Z)(this,A),this.path=U,this.route=this.path[this.path.length-1]}),Hu=(0,x.Z)(function A(U,C){(0,F.Z)(this,A),this.component=U,this.route=C});function Cu(A,U,C){var D=A._root;return pr(D,U?U._root:null,C,[D.value])}function Xa(A,U,C){var D=function Gt(A){if(!A)return null;for(var U=A.parent;U;U=U.parent){var C=U.routeConfig;if(C&&C._loadedConfig)return C._loadedConfig}return null}(U);return(D?D.module.injector:C).get(A)}function pr(A,U,C,D){var N=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},J=_a(U);return A.children.forEach(function(oe){Mo(oe,J[oe.value.outlet],C,D.concat([oe.value]),N),delete J[oe.value.outlet]}),zt(J,function(oe,pe){return Iu(oe,C.getContext(pe),N)}),N}function Mo(A,U,C,D){var N=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},J=A.value,oe=U?U.value:null,pe=C?C.getContext(A.value.outlet):null;if(oe&&J.routeConfig===oe.routeConfig){var Ue=Ni(oe,J,J.routeConfig.runGuardsAndResolvers);Ue?N.canActivateChecks.push(new Ha(D)):(J.data=oe.data,J._resolvedData=oe._resolvedData),pr(A,U,J.component?pe?pe.children:null:C,D,N),Ue&&pe&&pe.outlet&&pe.outlet.isActivated&&N.canDeactivateChecks.push(new Hu(pe.outlet.component,oe))}else oe&&Iu(U,pe,N),N.canActivateChecks.push(new Ha(D)),pr(A,null,J.component?pe?pe.children:null:C,D,N);return N}function Ni(A,U,C){if("function"==typeof C)return C(A,U);switch(C){case"pathParamsChange":return!Ci(A.url,U.url);case"pathParamsOrQueryParamsChange":return!Ci(A.url,U.url)||!Ur(A.queryParams,U.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ms(A,U)||!Ur(A.queryParams,U.queryParams);default:return!Ms(A,U)}}function Iu(A,U,C){var D=_a(A),N=A.value;zt(D,function(J,oe){Iu(J,N.component?U?U.children.getContext(oe):null:U,C)}),C.canDeactivateChecks.push(new Hu(N.component&&U&&U.outlet&&U.outlet.isActivated?U.outlet.component:null,N))}var Ji=(0,x.Z)(function A(){(0,F.Z)(this,A)});function ts(A){return new rt.y(function(U){return U.error(A)})}var Fs=function(){function A(U,C,D,N,J,oe){(0,F.Z)(this,A),this.rootComponentType=U,this.config=C,this.urlTree=D,this.url=N,this.paramsInheritanceStrategy=J,this.relativeLinkResolution=oe}return(0,x.Z)(A,[{key:"recognize",value:function(){var C=En(this.urlTree.root,[],[],this.config.filter(function(pe){return void 0===pe.redirectTo}),this.relativeLinkResolution).segmentGroup,D=this.processSegmentGroup(this.config,C,Pn);if(null===D)return null;var N=new Ja([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pn,this.rootComponentType,null,this.urlTree.root,-1,{}),J=new di(N,D),oe=new Vu(this.url,J);return this.inheritParamsAndData(oe._root),oe}},{key:"inheritParamsAndData",value:function(C){var D=this,N=C.value,J=Bi(N,this.paramsInheritanceStrategy);N.params=Object.freeze(J.params),N.data=Object.freeze(J.data),C.children.forEach(function(oe){return D.inheritParamsAndData(oe)})}},{key:"processSegmentGroup",value:function(C,D,N){return 0===D.segments.length&&D.hasChildren()?this.processChildren(C,D):this.processSegment(C,D,D.segments,N)}},{key:"processChildren",value:function(C,D){for(var N=[],J=0,oe=Object.keys(D.children);J<oe.length;J++){var pe=oe[J],Ue=D.children[pe],He=mt(C,pe),vt=this.processSegmentGroup(He,Ue,pe);if(null===vt)return null;N.push.apply(N,(0,le.Z)(vt))}var Ke=Wu(N);return function Sa(A){A.sort(function(U,C){return U.value.outlet===Pn?-1:C.value.outlet===Pn?1:U.value.outlet.localeCompare(C.value.outlet)})}(Ke),Ke}},{key:"processSegment",value:function(C,D,N,J){var pe,oe=(0,j.Z)(C);try{for(oe.s();!(pe=oe.n()).done;){var He=this.processSegmentAgainstRoute(pe.value,D,N,J);if(null!==He)return He}}catch(vt){oe.e(vt)}finally{oe.f()}return Si(D,N,J)?[]:null}},{key:"processSegmentAgainstRoute",value:function(C,D,N,J){if(C.redirectTo||!ir(C,D,N,J))return null;var oe,pe=[],Ue=[];if("**"===C.path){var He=N.length>0?Qt(N).parameters:{};oe=new Ja(N,He,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xo(C),Ae(C),C.component,C,ci(D),lu(D)+N.length,Ku(C))}else{var vt=Nn(D,C,N);if(!vt.matched)return null;Ue=vt.remainingSegments,oe=new Ja(pe=vt.consumedSegments,vt.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xo(C),Ae(C),C.component,C,ci(D),lu(D)+pe.length,Ku(C))}var Ke=function kl(A){return A.children?A.children:A.loadChildren?A._loadedConfig.routes:[]}(C),Et=En(D,pe,Ue,Ke.filter(function(Wa){return void 0===Wa.redirectTo}),this.relativeLinkResolution),Vn=Et.segmentGroup,sr=Et.slicedSegments;if(0===sr.length&&Vn.hasChildren()){var xi=this.processChildren(Ke,Vn);return null===xi?null:[new di(oe,xi)]}if(0===Ke.length&&0===sr.length)return[new di(oe,[])];var ea=Ae(C)===J,ha=this.processSegment(Ke,Vn,sr,ea?Pn:J);return null===ha?null:[new di(oe,ha)]}}]),A}();function Wu(A){var N,U=[],C=new Set,D=(0,j.Z)(A);try{var J=function(){var Et=N.value;if(!function Zs(A){var U=A.value.routeConfig;return U&&""===U.path&&void 0===U.redirectTo}(Et))return U.push(Et),"continue";var sr,Vn=U.find(function(xi){return Et.value.routeConfig===xi.value.routeConfig});void 0!==Vn?((sr=Vn.children).push.apply(sr,(0,le.Z)(Et.children)),C.add(Vn)):U.push(Et)};for(D.s();!(N=D.n()).done;)J()}catch(Ke){D.e(Ke)}finally{D.f()}var Ue,pe=(0,j.Z)(C);try{for(pe.s();!(Ue=pe.n()).done;){var He=Ue.value,vt=Wu(He.children);U.push(new di(He.value,vt))}}catch(Ke){pe.e(Ke)}finally{pe.f()}return U.filter(function(Ke){return!C.has(Ke)})}function ci(A){for(var U=A;U._sourceSegment;)U=U._sourceSegment;return U}function lu(A){for(var U=A,C=U._segmentIndexShift?U._segmentIndexShift:0;U._sourceSegment;)C+=(U=U._sourceSegment)._segmentIndexShift?U._segmentIndexShift:0;return C-1}function Xo(A){return A.data||{}}function Ku(A){return A.resolve||{}}function $u(A){return[].concat((0,le.Z)(Object.keys(A)),(0,le.Z)(Object.getOwnPropertySymbols(A)))}function fu(A){return(0,Ft.w)(function(U){var C=A(U);return C?(0,fe.D)(C).pipe((0,ft.U)(function(){return U})):(0,be.of)(U)})}var _i=(0,x.Z)(function A(){(0,F.Z)(this,A)}),vo=function(A){(0,M.Z)(C,A);var U=(0,ce.Z)(C);function C(){return(0,F.Z)(this,C),U.apply(this,arguments)}return(0,x.Z)(C)}(function(){function A(){(0,F.Z)(this,A)}return(0,x.Z)(A,[{key:"shouldDetach",value:function(C){return!1}},{key:"store",value:function(C,D){}},{key:"shouldAttach",value:function(C){return!1}},{key:"retrieve",value:function(C){return null}},{key:"shouldReuseRoute",value:function(C,D){return C.routeConfig===D.routeConfig}}]),A}()),Xi=new ke.OlP("ROUTES"),ns=function(){function A(U,C,D,N){(0,F.Z)(this,A),this.injector=U,this.compiler=C,this.onLoadStartListener=D,this.onLoadEndListener=N}return(0,x.Z)(A,[{key:"load",value:function(C,D){var N=this;if(D._loader$)return D._loader$;this.onLoadStartListener&&this.onLoadStartListener(D);var oe=this.loadModuleFactory(D.loadChildren).pipe((0,ft.U)(function(pe){N.onLoadEndListener&&N.onLoadEndListener(D);var Ue=pe.create(C);return new ki(un(Ue.injector.get(Xi,void 0,ke.XFs.Self|ke.XFs.Optional)).map(_e),Ue)}),jt(function(pe){throw D._loader$=void 0,pe}));return D._loader$=new at(oe,function(){return new et.x}).pipe(Ce()),D._loader$}},{key:"loadModuleFactory",value:function(C){var D=this;return qt(C()).pipe((0,Yr.z)(function(N){return N instanceof ke.YKP?(0,be.of)(N):(0,fe.D)(D.compiler.compileModuleAsync(N))}))}}]),A}(),Pr=(0,x.Z)(function A(){(0,F.Z)(this,A)}),po=function(){function A(){(0,F.Z)(this,A)}return(0,x.Z)(A,[{key:"shouldProcessUrl",value:function(C){return!0}},{key:"extract",value:function(C){return C}},{key:"merge",value:function(C,D){return C}}]),A}();function el(A){throw A}function Au(A,U,C){return U.parse("/")}function No(A,U){return(0,be.of)(null)}var Lo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Vl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Cr=function(){var A=function(){function U(C,D,N,J,oe,pe,Ue){var He=this;(0,F.Z)(this,U),this.rootComponentType=C,this.urlSerializer=D,this.rootContexts=N,this.location=J,this.config=Ue,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new et.x,this.errorHandler=el,this.malformedUriErrorHandler=Au,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:No,afterPreactivation:No},this.urlHandlingStrategy=new po,this.routeReuseStrategy=new vo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=oe.get(ke.h0i),this.console=oe.get(ke.c2e);var Et=oe.get(ke.R0b);this.isNgZoneEnabled=Et instanceof ke.R0b&&ke.R0b.isInAngularZone(),this.resetConfig(Ue),this.currentUrlTree=function Mn(){return new An(new nn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ns(oe,pe,function(sr){return He.triggerEvent(new ls(sr))},function(sr){return He.triggerEvent(new tn(sr))}),this.routerState=mi(this.currentUrlTree,this.rootComponentType),this.transitions=new Je({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return(0,x.Z)(U,[{key:"browserPageId",get:function(){var D;return null===(D=this.location.getState())||void 0===D?void 0:D.\u0275routerPageId}},{key:"setupNavigations",value:function(D){var N=this,J=this.events;return D.pipe((0,kn.h)(function(oe){return 0!==oe.id}),(0,ft.U)(function(oe){return Object.assign(Object.assign({},oe),{extractedUrl:N.urlHandlingStrategy.extract(oe.rawUrl)})}),(0,Ft.w)(function(oe){var pe=!1,Ue=!1;return(0,be.of)(oe).pipe((0,Ir.b)(function(He){N.currentNavigation={id:He.id,initialUrl:He.currentRawUrl,extractedUrl:He.extractedUrl,trigger:He.source,extras:He.extras,previousNavigation:N.lastSuccessfulNavigation?Object.assign(Object.assign({},N.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Ft.w)(function(He){var vt=N.browserUrlTree.toString(),Ke=!N.navigated||He.extractedUrl.toString()!==vt||vt!==N.currentUrlTree.toString();if(("reload"===N.onSameUrlNavigation||Ke)&&N.urlHandlingStrategy.shouldProcessUrl(He.rawUrl))return go(He.source)&&(N.browserUrlTree=He.extractedUrl),(0,be.of)(He).pipe((0,Ft.w)(function(ei){var Hs=N.transitions.getValue();return J.next(new Mr(ei.id,N.serializeUrl(ei.extractedUrl),ei.source,ei.restoredState)),Hs!==N.transitions.getValue()?te.E:Promise.resolve(ei)}),function fo(A,U,C,D){return(0,Ft.w)(function(N){return function lo(A,U,C,D,N){return new co(A,U,C,D,N).apply()}(A,U,C,N.extractedUrl,D).pipe((0,ft.U)(function(J){return Object.assign(Object.assign({},N),{urlAfterRedirects:J})}))})}(N.ngModule.injector,N.configLoader,N.urlSerializer,N.config),(0,Ir.b)(function(ei){N.currentNavigation=Object.assign(Object.assign({},N.currentNavigation),{finalUrl:ei.urlAfterRedirects})}),function Bl(A,U,C,D,N){return(0,Yr.z)(function(J){return function Ls(A,U,C,D){var N=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",J=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var oe=new Fs(A,U,C,D,N,J).recognize();return null===oe?ts(new Ji):(0,be.of)(oe)}catch(pe){return ts(pe)}}(A,U,J.urlAfterRedirects,C(J.urlAfterRedirects),D,N).pipe((0,ft.U)(function(oe){return Object.assign(Object.assign({},J),{targetSnapshot:oe})}))})}(N.rootComponentType,N.config,function(ei){return N.serializeUrl(ei)},N.paramsInheritanceStrategy,N.relativeLinkResolution),(0,Ir.b)(function(ei){if("eager"===N.urlUpdateStrategy){if(!ei.extras.skipLocationChange){var Hs=N.urlHandlingStrategy.merge(ei.urlAfterRedirects,ei.rawUrl);N.setBrowserUrl(Hs,ei)}N.browserUrlTree=ei.urlAfterRedirects}var Li=new jr(ei.id,N.serializeUrl(ei.extractedUrl),N.serializeUrl(ei.urlAfterRedirects),ei.targetSnapshot);J.next(Li)}));if(Ke&&N.rawUrlTree&&N.urlHandlingStrategy.shouldProcessUrl(N.rawUrlTree)){var xi=He.extractedUrl,ea=He.source,ha=He.restoredState,Wa=He.extras,vu=new Mr(He.id,N.serializeUrl(xi),ea,ha);J.next(vu);var Es=mi(xi,N.rootComponentType).snapshot;return(0,be.of)(Object.assign(Object.assign({},He),{targetSnapshot:Es,urlAfterRedirects:xi,extras:Object.assign(Object.assign({},Wa),{skipLocationChange:!1,replaceUrl:!1})}))}return N.rawUrlTree=He.rawUrl,He.resolve(null),te.E}),fu(function(He){var sr=He.extras;return N.hooks.beforePreactivation(He.targetSnapshot,{navigationId:He.id,appliedUrlTree:He.extractedUrl,rawUrlTree:He.rawUrl,skipLocationChange:!!sr.skipLocationChange,replaceUrl:!!sr.replaceUrl})}),(0,Ir.b)(function(He){var vt=new Ki(He.id,N.serializeUrl(He.extractedUrl),N.serializeUrl(He.urlAfterRedirects),He.targetSnapshot);N.triggerEvent(vt)}),(0,ft.U)(function(He){return Object.assign(Object.assign({},He),{guards:Cu(He.targetSnapshot,He.currentSnapshot,N.rootContexts)})}),function ou(A,U){return(0,Yr.z)(function(C){var D=C.targetSnapshot,N=C.currentSnapshot,J=C.guards,oe=J.canActivateChecks,pe=J.canDeactivateChecks;return 0===pe.length&&0===oe.length?(0,be.of)(Object.assign(Object.assign({},C),{guardsResult:!0})):function es(A,U,C,D){return(0,fe.D)(A).pipe((0,Yr.z)(function(N){return function Jo(A,U,C,D,N){var J=U&&U.routeConfig?U.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,be.of)(!0);var oe=J.map(function(pe){var He,Ue=Xa(pe,U,N);if(function ju(A){return A&&ca(A.canDeactivate)}(Ue))He=qt(Ue.canDeactivate(A,U,C,D));else{if(!ca(Ue))throw new Error("Invalid CanDeactivate guard");He=qt(Ue(A,U,C,D))}return He.pipe((0,Sn.P)())});return(0,be.of)(oe).pipe(uu())}(N.component,N.route,C,U,D)}),(0,Sn.P)(function(N){return!0!==N},!0))}(pe,D,N,A).pipe((0,Yr.z)(function(Ue){return Ue&&function Tu(A){return"boolean"==typeof A}(Ue)?function Su(A,U,C,D){return(0,fe.D)(U).pipe((0,Rn.b)(function(N){return(0,Se.z)(function Ul(A,U){return null!==A&&U&&U(new ia(A)),(0,be.of)(!0)}(N.route.parent,D),function Gu(A,U){return null!==A&&U&&U(new _n(A)),(0,be.of)(!0)}(N.route,D),function ho(A,U,C){var D=U[U.length-1],N=U.slice(0,U.length-1).reverse().map(function(oe){return function yl(A){var U=A.routeConfig?A.routeConfig.canActivateChild:null;return U&&0!==U.length?{node:A,guards:U}:null}(oe)}).filter(function(oe){return null!==oe}),J=N.map(function(oe){return(0,Mt.P)(function(){var pe=oe.guards.map(function(Ue){var vt,He=Xa(Ue,oe.node,C);if(function au(A){return A&&ca(A.canActivateChild)}(He))vt=qt(He.canActivateChild(D,A));else{if(!ca(He))throw new Error("Invalid CanActivateChild guard");vt=qt(He(D,A))}return vt.pipe((0,Sn.P)())});return(0,be.of)(pe).pipe(uu())})});return(0,be.of)(J).pipe(uu())}(A,N.path,C),function zu(A,U,C){var D=U.routeConfig?U.routeConfig.canActivate:null;if(!D||0===D.length)return(0,be.of)(!0);var N=D.map(function(J){return(0,Mt.P)(function(){var pe,oe=Xa(J,U,C);if(function oo(A){return A&&ca(A.canActivate)}(oe))pe=qt(oe.canActivate(U,A));else{if(!ca(oe))throw new Error("Invalid CanActivate guard");pe=qt(oe(U,A))}return pe.pipe((0,Sn.P)())})});return(0,be.of)(N).pipe(uu())}(A,N.route,C))}),(0,Sn.P)(function(N){return!0!==N},!0))}(D,oe,A,U):(0,be.of)(Ue)}),(0,ft.U)(function(Ue){return Object.assign(Object.assign({},C),{guardsResult:Ue})}))})}(N.ngModule.injector,function(He){return N.triggerEvent(He)}),(0,Ir.b)(function(He){if(Yi(He.guardsResult)){var vt=Pi('Redirecting to "'.concat(N.serializeUrl(He.guardsResult),'"'));throw vt.url=He.guardsResult,vt}var Ke=new Xr(He.id,N.serializeUrl(He.extractedUrl),N.serializeUrl(He.urlAfterRedirects),He.targetSnapshot,!!He.guardsResult);N.triggerEvent(Ke)}),(0,kn.h)(function(He){return!!He.guardsResult||(N.restoreHistory(He),N.cancelNavigationTransition(He,""),!1)}),fu(function(He){if(He.guards.canActivateChecks.length)return(0,be.of)(He).pipe((0,Ir.b)(function(vt){var Ke=new ra(vt.id,N.serializeUrl(vt.extractedUrl),N.serializeUrl(vt.urlAfterRedirects),vt.targetSnapshot);N.triggerEvent(Ke)}),(0,Ft.w)(function(vt){var Ke=!1;return(0,be.of)(vt).pipe(function Oo(A,U){return(0,Yr.z)(function(C){var D=C.targetSnapshot,N=C.guards.canActivateChecks;if(!N.length)return(0,be.of)(C);var J=0;return(0,fe.D)(N).pipe((0,Rn.b)(function(oe){return function Ga(A,U,C,D){return function cu(A,U,C,D){var N=$u(A);if(0===N.length)return(0,be.of)({});var J={};return(0,fe.D)(N).pipe((0,Yr.z)(function(oe){return function za(A,U,C,D){var N=Xa(A,U,D);return qt(N.resolve?N.resolve(U,C):N(U,C))}(A[oe],U,C,D).pipe((0,Ir.b)(function(pe){J[oe]=pe}))}),on(1),(0,Yr.z)(function(){return $u(J).length===N.length?(0,be.of)(J):te.E}))}(A._resolve,A,U,D).pipe((0,ft.U)(function(J){return A._resolvedData=J,A.data=Object.assign(Object.assign({},A.data),Bi(A,C).resolve),null}))}(oe.route,D,A,U)}),(0,Ir.b)(function(){return J++}),on(1),(0,Yr.z)(function(oe){return J===N.length?(0,be.of)(C):te.E}))})}(N.paramsInheritanceStrategy,N.ngModule.injector),(0,Ir.b)({next:function(){return Ke=!0},complete:function(){Ke||(N.restoreHistory(vt),N.cancelNavigationTransition(vt,"At least one route resolver didn't emit any value."))}}))}),(0,Ir.b)(function(vt){var Ke=new ma(vt.id,N.serializeUrl(vt.extractedUrl),N.serializeUrl(vt.urlAfterRedirects),vt.targetSnapshot);N.triggerEvent(Ke)}))}),fu(function(He){var sr=He.extras;return N.hooks.afterPreactivation(He.targetSnapshot,{navigationId:He.id,appliedUrlTree:He.extractedUrl,rawUrlTree:He.rawUrl,skipLocationChange:!!sr.skipLocationChange,replaceUrl:!!sr.replaceUrl})}),(0,ft.U)(function(He){var vt=function cs(A,U,C){var D=ze(A,U._root,C?C._root:void 0);return new la(D,U)}(N.routeReuseStrategy,He.targetSnapshot,He.currentRouterState);return Object.assign(Object.assign({},He),{targetRouterState:vt})}),(0,Ir.b)(function(He){N.currentUrlTree=He.urlAfterRedirects,N.rawUrlTree=N.urlHandlingStrategy.merge(He.urlAfterRedirects,He.rawUrl),N.routerState=He.targetRouterState,"deferred"===N.urlUpdateStrategy&&(He.extras.skipLocationChange||N.setBrowserUrl(N.rawUrlTree,He),N.browserUrlTree=He.urlAfterRedirects)}),function(U,C,D){return(0,ft.U)(function(N){return new Qo(C,N.targetRouterState,N.currentRouterState,D).activate(U),N})}(N.rootContexts,N.routeReuseStrategy,function(He){return N.triggerEvent(He)}),(0,Ir.b)({next:function(){pe=!0},complete:function(){pe=!0}}),function je(A){return(0,Pe.e)(function(U,C){try{U.subscribe(C)}finally{C.add(A)}})}(function(){var He;if(!pe&&!Ue){var vt="Navigation ID ".concat(oe.id," is not equal to the current navigation id ").concat(N.navigationId);N.cancelNavigationTransition(oe,vt)}(null===(He=N.currentNavigation)||void 0===He?void 0:He.id)===oe.id&&(N.currentNavigation=null)}),jt(function(He){if(Ue=!0,function Zr(A){return A&&A[fi]}(He)){var vt=Yi(He.url);vt||(N.navigated=!0,N.restoreHistory(oe,!0));var Ke=new Lr(oe.id,N.serializeUrl(oe.extractedUrl),He.message);J.next(Ke),vt?setTimeout(function(){var Vn=N.urlHandlingStrategy.merge(He.url,N.rawUrlTree),sr={skipLocationChange:oe.extras.skipLocationChange,replaceUrl:"eager"===N.urlUpdateStrategy||go(oe.source)};N.scheduleNavigation(Vn,"imperative",null,sr,{resolve:oe.resolve,reject:oe.reject,promise:oe.promise})},0):oe.resolve(!1)}else{N.restoreHistory(oe,!0);var Et=new os(oe.id,N.serializeUrl(oe.extractedUrl),He);J.next(Et);try{oe.resolve(N.errorHandler(He))}catch(Vn){oe.reject(Vn)}}return te.E}))}))}},{key:"resetRootComponentType",value:function(D){this.rootComponentType=D,this.routerState.root.component=this.rootComponentType}},{key:"setTransition",value:function(D){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),D))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var D=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(N){var J="popstate"===N.type?"popstate":"hashchange";"popstate"===J&&setTimeout(function(){var oe,pe={replaceUrl:!0},Ue=(null===(oe=N.state)||void 0===oe?void 0:oe.navigationId)?N.state:null;if(Ue){var He=Object.assign({},Ue);delete He.navigationId,delete He.\u0275routerPageId,0!==Object.keys(He).length&&(pe.state=He)}var vt=D.parseUrl(N.url);D.scheduleNavigation(vt,J,Ue,pe)},0)}))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(D){this.events.next(D)}},{key:"resetConfig",value:function(D){Q(D),this.config=D.map(_e),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(D){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},J=N.relativeTo,oe=N.queryParams,pe=N.fragment,Ue=N.queryParamsHandling,He=N.preserveFragment,vt=J||this.routerState.root,Ke=He?this.currentUrlTree.fragment:pe,Et=null;switch(Ue){case"merge":Et=Object.assign(Object.assign({},this.currentUrlTree.queryParams),oe);break;case"preserve":Et=this.currentUrlTree.queryParams;break;default:Et=oe||null}return null!==Et&&(Et=this.removeEmptyProps(Et)),It(vt,this.currentUrlTree,D,Et,null!=Ke?Ke:null)}},{key:"navigateByUrl",value:function(D){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},J=Yi(D)?D:this.parseUrl(D),oe=this.urlHandlingStrategy.merge(J,this.rawUrlTree);return this.scheduleNavigation(oe,"imperative",null,N)}},{key:"navigate",value:function(D){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return _s(D),this.navigateByUrl(this.createUrlTree(D,N),N)}},{key:"serializeUrl",value:function(D){return this.urlSerializer.serialize(D)}},{key:"parseUrl",value:function(D){var N;try{N=this.urlSerializer.parse(D)}catch(J){N=this.malformedUriErrorHandler(J,this.urlSerializer,D)}return N}},{key:"isActive",value:function(D,N){var J;if(J=!0===N?Object.assign({},Lo):!1===N?Object.assign({},Vl):N,Yi(D))return Xe(this.currentUrlTree,D,J);var oe=this.parseUrl(D);return Xe(this.currentUrlTree,oe,J)}},{key:"removeEmptyProps",value:function(D){return Object.keys(D).reduce(function(N,J){var oe=D[J];return null!=oe&&(N[J]=oe),N},{})}},{key:"processNavigations",value:function(){var D=this;this.navigations.subscribe(function(N){D.navigated=!0,D.lastSuccessfulId=N.id,D.currentPageId=N.targetPageId,D.events.next(new cr(N.id,D.serializeUrl(N.extractedUrl),D.serializeUrl(D.currentUrlTree))),D.lastSuccessfulNavigation=D.currentNavigation,N.resolve(!0)},function(N){D.console.warn("Unhandled Navigation Error: ".concat(N))})}},{key:"scheduleNavigation",value:function(D,N,J,oe,pe){var Ue,He,vt,Ke,Et;if(this.disposed)return Promise.resolve(!1);pe?(vt=pe.resolve,Ke=pe.reject,Et=pe.promise):Et=new Promise(function(ea,ha){vt=ea,Ke=ha});var sr,Vn=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(J=this.location.getState()),sr=J&&J.\u0275routerPageId?J.\u0275routerPageId:oe.replaceUrl||oe.skipLocationChange?null!==(Ue=this.browserPageId)&&void 0!==Ue?Ue:0:(null!==(He=this.browserPageId)&&void 0!==He?He:0)+1):sr=0,this.setTransition({id:Vn,targetPageId:sr,source:N,restoredState:J,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:D,extras:oe,resolve:vt,reject:Ke,promise:Et,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Et.catch(function(ea){return Promise.reject(ea)})}},{key:"setBrowserUrl",value:function(D,N){var J=this.urlSerializer.serialize(D),oe=Object.assign(Object.assign({},N.extras.state),this.generateNgRouterState(N.id,N.targetPageId));this.location.isCurrentPathEqualTo(J)||N.extras.replaceUrl?this.location.replaceState(J,"",oe):this.location.go(J,"",oe)}},{key:"restoreHistory",value:function(D){var J,oe,N=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var pe=this.currentPageId-D.targetPageId,Ue="popstate"===D.source||"eager"===this.urlUpdateStrategy||this.currentUrlTree===(null===(J=this.currentNavigation)||void 0===J?void 0:J.finalUrl);Ue&&0!==pe?this.location.historyGo(pe):this.currentUrlTree===(null===(oe=this.currentNavigation)||void 0===oe?void 0:oe.finalUrl)&&0===pe&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(D),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(D,N){var J=new Lr(D.id,this.serializeUrl(D.extractedUrl),N);this.triggerEvent(J),D.resolve(!1)}},{key:"generateNgRouterState",value:function(D,N){return"computed"===this.canceledNavigationResolution?{navigationId:D,"\u0275routerPageId":N}:{navigationId:D}}}]),U}();return A.\u0275fac=function(C){ke.$Z()},A.\u0275prov=ke.Yz7({token:A,factory:A.\u0275fac}),A}();function _s(A){for(var U=0;U<A.length;U++){var C=A[U];if(null==C)throw new Error("The requested path contains ".concat(C," segment at index ").concat(U))}}function go(A){return"imperative"!==A}var qu=(0,x.Z)(function A(){(0,F.Z)(this,A)}),Fo=function(){function A(){(0,F.Z)(this,A)}return(0,x.Z)(A,[{key:"preload",value:function(C,D){return D().pipe(jt(function(){return(0,be.of)(null)}))}}]),A}(),aa=function(){function A(){(0,F.Z)(this,A)}return(0,x.Z)(A,[{key:"preload",value:function(C,D){return(0,be.of)(null)}}]),A}(),$s=function(){var A=function(){function U(C,D,N,J){(0,F.Z)(this,U),this.router=C,this.injector=N,this.preloadingStrategy=J,this.loader=new ns(N,D,function(He){return C.triggerEvent(new ls(He))},function(He){return C.triggerEvent(new tn(He))})}return(0,x.Z)(U,[{key:"setUpPreloading",value:function(){var D=this;this.subscription=this.router.events.pipe((0,kn.h)(function(N){return N instanceof cr}),(0,Rn.b)(function(){return D.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var D=this.injector.get(ke.h0i);return this.processRoutes(D,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(D,N){var pe,J=[],oe=(0,j.Z)(N);try{for(oe.s();!(pe=oe.n()).done;){var Ue=pe.value;if(Ue.loadChildren&&!Ue.canLoad&&Ue._loadedConfig){var He=Ue._loadedConfig;J.push(this.processRoutes(He.module,He.routes))}else Ue.loadChildren&&!Ue.canLoad?J.push(this.preloadConfig(D,Ue)):Ue.children&&J.push(this.processRoutes(D,Ue.children))}}catch(vt){oe.e(vt)}finally{oe.f()}return(0,fe.D)(J).pipe((0,yr.J)(),(0,ft.U)(function(vt){}))}},{key:"preloadConfig",value:function(D,N){var J=this;return this.preloadingStrategy.preload(N,function(){return(N._loadedConfig?(0,be.of)(N._loadedConfig):J.loader.load(D.injector,N)).pipe((0,Yr.z)(function(pe){return N._loadedConfig=pe,J.processRoutes(pe.module,pe.routes)}))})}}]),U}();return A.\u0275fac=function(C){return new(C||A)(ke.LFG(Cr),ke.LFG(ke.Sil),ke.LFG(ke.zs3),ke.LFG(qu))},A.\u0275prov=ke.Yz7({token:A,factory:A.\u0275fac}),A}(),fa=function(){var A=function(){function U(C,D){var N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,F.Z)(this,U),this.router=C,this.viewportScroller=D,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}return(0,x.Z)(U,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var D=this;return this.router.events.subscribe(function(N){N instanceof Mr?(D.store[D.lastId]=D.viewportScroller.getScrollPosition(),D.lastSource=N.navigationTrigger,D.restoredId=N.restoredState?N.restoredState.navigationId:0):N instanceof cr&&(D.lastId=N.id,D.scheduleScrollEvent(N,D.router.parseUrl(N.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var D=this;return this.router.events.subscribe(function(N){N instanceof ya&&(N.position?"top"===D.options.scrollPositionRestoration?D.viewportScroller.scrollToPosition([0,0]):"enabled"===D.options.scrollPositionRestoration&&D.viewportScroller.scrollToPosition(N.position):N.anchor&&"enabled"===D.options.anchorScrolling?D.viewportScroller.scrollToAnchor(N.anchor):"disabled"!==D.options.scrollPositionRestoration&&D.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(D,N){this.router.triggerEvent(new ya(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),U}();return A.\u0275fac=function(C){ke.$Z()},A.\u0275prov=ke.Yz7({token:A,factory:A.\u0275fac}),A}(),rs=new ke.OlP("ROUTER_CONFIGURATION"),Yu=new ke.OlP("ROUTER_FORROOT_GUARD"),wi=[yn.Ye,{provide:Rr,useClass:Mi},{provide:Cr,useFactory:function zr(A,U,C,D,N,J){var oe=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},pe=arguments.length>7?arguments[7]:void 0,Ue=arguments.length>8?arguments[8]:void 0,He=new Cr(null,A,U,C,D,N,un(J));return pe&&(He.urlHandlingStrategy=pe),Ue&&(He.routeReuseStrategy=Ue),fs(oe,He),oe.enableTracing&&He.events.subscribe(function(vt){var Ke,Et;null===(Ke=console.group)||void 0===Ke||Ke.call(console,"Router Event: ".concat(vt.constructor.name)),console.log(vt.toString()),console.log(vt),null===(Et=console.groupEnd)||void 0===Et||Et.call(console)}),He},deps:[Rr,Vi,yn.Ye,ke.zs3,ke.Sil,Xi,rs,[Pr,new ke.FiY],[_i,new ke.FiY]]},Vi,{provide:qi,useFactory:function js(A){return A.routerState.root},deps:[Cr]},$s,aa,Fo,{provide:rs,useValue:{enableTracing:!1}}];function nl(){return new ke.PXZ("Router",Cr)}var Ta=function(){var A=function(){function U(C,D){(0,F.Z)(this,U)}return(0,x.Z)(U,null,[{key:"forRoot",value:function(D,N){return{ngModule:U,providers:[wi,ws(D),{provide:Yu,useFactory:Ys,deps:[[Cr,new ke.FiY,new ke.tp0]]},{provide:rs,useValue:N||{}},{provide:yn.S$,useFactory:qs,deps:[yn.lw,[new ke.tBr(yn.mr),new ke.FiY],rs]},{provide:fa,useFactory:xs,deps:[Cr,yn.EM,rs]},{provide:qu,useExisting:N&&N.preloadingStrategy?N.preloadingStrategy:aa},{provide:ke.PXZ,multi:!0,useFactory:nl},[Qu,{provide:ke.ip1,multi:!0,useFactory:du,deps:[Qu]},{provide:Pu,useFactory:mo,deps:[Qu]},{provide:ke.tb,multi:!0,useExisting:Pu}]]}}},{key:"forChild",value:function(D){return{ngModule:U,providers:[ws(D)]}}}]),U}();return A.\u0275fac=function(C){return new(C||A)(ke.LFG(Yu,8),ke.LFG(Cr,8))},A.\u0275mod=ke.oAB({type:A}),A.\u0275inj=ke.cJS({}),A}();function xs(A,U,C){return C.scrollOffset&&U.setOffset(C.scrollOffset),new fa(A,U,C)}function qs(A,U){var C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return C.useHash?new yn.Do(A,U):new yn.b0(A,U)}function Ys(A){return"guarded"}function ws(A){return[{provide:ke.deG,multi:!0,useValue:A},{provide:Xi,multi:!0,useValue:A}]}function fs(A,U){A.errorHandler&&(U.errorHandler=A.errorHandler),A.malformedUriErrorHandler&&(U.malformedUriErrorHandler=A.malformedUriErrorHandler),A.onSameUrlNavigation&&(U.onSameUrlNavigation=A.onSameUrlNavigation),A.paramsInheritanceStrategy&&(U.paramsInheritanceStrategy=A.paramsInheritanceStrategy),A.relativeLinkResolution&&(U.relativeLinkResolution=A.relativeLinkResolution),A.urlUpdateStrategy&&(U.urlUpdateStrategy=A.urlUpdateStrategy),A.canceledNavigationResolution&&(U.canceledNavigationResolution=A.canceledNavigationResolution)}var Qu=function(){var A=function(){function U(C){(0,F.Z)(this,U),this.injector=C,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new et.x}return(0,x.Z)(U,[{key:"appInitializer",value:function(){var D=this;return this.injector.get(yn.V_,Promise.resolve(null)).then(function(){if(D.destroyed)return Promise.resolve(!0);var J=null,oe=new Promise(function(He){return J=He}),pe=D.injector.get(Cr),Ue=D.injector.get(rs);return"disabled"===Ue.initialNavigation?(pe.setUpLocationChangeListener(),J(!0)):"enabled"===Ue.initialNavigation||"enabledBlocking"===Ue.initialNavigation?(pe.hooks.afterPreactivation=function(){return D.initNavigation?(0,be.of)(null):(D.initNavigation=!0,J(!0),D.resultOfPreactivationDone)},pe.initialNavigation()):J(!0),oe})}},{key:"bootstrapListener",value:function(D){var N=this.injector.get(rs),J=this.injector.get($s),oe=this.injector.get(fa),pe=this.injector.get(Cr),Ue=this.injector.get(ke.z2F);D===Ue.components[0]&&(("enabledNonBlocking"===N.initialNavigation||void 0===N.initialNavigation)&&pe.initialNavigation(),J.setUpPreloading(),oe.init(),pe.resetRootComponentType(Ue.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"ngOnDestroy",value:function(){this.destroyed=!0}}]),U}();return A.\u0275fac=function(C){return new(C||A)(ke.LFG(ke.zs3))},A.\u0275prov=ke.Yz7({token:A,factory:A.\u0275fac}),A}();function du(A){return A.appInitializer.bind(A)}function mo(A){return A.bootstrapListener.bind(A)}var Pu=new ke.OlP("Router Initializer")},63942:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return ht}});var F,z=O(4942),H=O(15671),j=O(43144),le=O(42090),M=O(34859),ce=O(49681),x=O(41877),ke=function(){function it(Me,ct){var gt=this;(0,H.Z)(this,it),this._delegate=Me,this.firebase=ct,(0,ce._addComponent)(Me,new M.wA("app-compat",function(){return gt},"PUBLIC")),this.container=Me.container}return(0,j.Z)(it,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(ct){this._delegate.automaticDataCollectionEnabled=ct}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var ct=this;return new Promise(function(gt){ct._delegate.checkDestroyed(),gt()}).then(function(){return ct.firebase.INTERNAL.removeApp(ct.name),(0,ce.deleteApp)(ct._delegate)})}},{key:"_getService",value:function(ct){var kt,gt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var dt=this._delegate.container.getProvider(ct);return!dt.isInitialized()&&"EXPLICIT"===(null===(kt=dt.getComponent())||void 0===kt?void 0:kt.instantiationMode)&&dt.initialize(),dt.getImmediate({identifier:gt})}},{key:"_removeServiceInstance",value:function(ct){var gt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(ct).clearInstance(gt)}},{key:"_addComponent",value:function(ct){(0,ce._addComponent)(this._delegate,ct)}},{key:"_addOrOverwriteComponent",value:function(ct){(0,ce._addOrOverwriteComponent)(this._delegate,ct)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),it}(),Ee=((0,z.Z)(F={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,z.Z)(F,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),F),Te=new le.LL("app-compat","Firebase",Ee),rt=function Je(){var it=function et(it){var Me={},ct={__esModule:!0,initializeApp:function dt(Ce){var be=ce.initializeApp(Ce,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if((0,le.r3)(Me,be.name))return Me[be.name];var Ge=new it(be,ct);return Me[be.name]=Ge,Ge},app:kt,registerVersion:ce.registerVersion,setLogLevel:ce.setLogLevel,onLog:ce.onLog,apps:null,SDK_VERSION:ce.SDK_VERSION,INTERNAL:{registerComponent:function Fe(Ce){var at=Ce.name,be=at.replace("-compat","");if(ce._registerComponent(Ce)&&"PUBLIC"===Ce.type){var Ge=function(){var Mt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt();if("function"!=typeof Mt[be])throw Te.create("invalid-app-argument",{appName:at});return Mt[be]()};void 0!==Ce.serviceProps&&(0,le.ZB)(Ge,Ce.serviceProps),ct[be]=Ge,it.prototype[be]=function(){for(var Se=this._getService.bind(this,at),Mt=arguments.length,te=new Array(Mt),Tt=0;Tt<Mt;Tt++)te[Tt]=arguments[Tt];return Se.apply(this,Ce.multipleInstances?te:[])}}return"PUBLIC"===Ce.type?ct[be]:null},removeApp:function gt(Ce){delete Me[Ce]},useAsService:function Pe(Ce,at){return"serverAuth"===at?null:at},modularAPIs:ce}};function kt(Ce){if(!(0,le.r3)(Me,Ce=Ce||ce._DEFAULT_ENTRY_NAME))throw Te.create("no-app",{appName:Ce});return Me[Ce]}return ct.default=ct,Object.defineProperty(ct,"apps",{get:function $e(){return Object.keys(Me).map(function(Ce){return Me[Ce]})}}),kt.App=it,ct}(ke);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:Je,extendNamespace:function Me(ct){(0,le.ZB)(it,ct)},createSubscribe:le.ne,ErrorFactory:le.LL,deepExtend:le.ZB}),it}(),Ve=new x.Yd("@firebase/app-compat");if((0,le.jU)()&&void 0!==self.firebase){Ve.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var wt=self.firebase.SDK_VERSION;wt&&wt.indexOf("LITE")>=0&&Ve.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ht=rt;!function qe(it){(0,ce.registerVersion)("@firebase/app-compat","0.1.21",it)}()},49681:function(Wt,Qe,O){"use strict";O.r(Qe),O.d(Qe,{FirebaseError:function(){return Ee.ZR},SDK_VERSION:function(){return Yn},_DEFAULT_ENTRY_NAME:function(){return ot},_addComponent:function(){return $t},_addOrOverwriteComponent:function(){return Xt},_apps:function(){return ft},_clearComponents:function(){return Yr},_components:function(){return Ft},_getProvider:function(){return Rn},_registerComponent:function(){return qn},_removeServiceInstance:function(){return Sn},deleteApp:function(){return os},getApp:function(){return cr},getApps:function(){return Lr},initializeApp:function(){return Mr},onLog:function(){return Xr},registerVersion:function(){return Ki},setLogLevel:function(){return ra}});var Te,et,z=O(74902),H=O(15861),j=O(37762),le=O(4942),M=O(15671),ce=O(43144),x=O(87757),F=O(34859),ke=O(41877),Ee=O(42090),Je=function(){function un(Qt){(0,M.Z)(this,un),this.container=Qt}return(0,ce.Z)(un,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(zt){if(function rt(un){var Qt=un.getComponent();return"VERSION"===(null==Qt?void 0:Qt.type)}(zt)){var qt=zt.getImmediate();return"".concat(qt.library,"/").concat(qt.version)}return null}).filter(function(zt){return zt}).join(" ")}}]),un}(),Ve="@firebase/app",ve=new ke.Yd("@firebase/app"),ot="[DEFAULT]",je=((0,le.Z)(Te={},Ve,"fire-core"),(0,le.Z)(Te,"@firebase/app-compat","fire-core-compat"),(0,le.Z)(Te,"@firebase/analytics","fire-analytics"),(0,le.Z)(Te,"@firebase/analytics-compat","fire-analytics-compat"),(0,le.Z)(Te,"@firebase/app-check","fire-app-check"),(0,le.Z)(Te,"@firebase/app-check-compat","fire-app-check-compat"),(0,le.Z)(Te,"@firebase/auth","fire-auth"),(0,le.Z)(Te,"@firebase/auth-compat","fire-auth-compat"),(0,le.Z)(Te,"@firebase/database","fire-rtdb"),(0,le.Z)(Te,"@firebase/database-compat","fire-rtdb-compat"),(0,le.Z)(Te,"@firebase/functions","fire-fn"),(0,le.Z)(Te,"@firebase/functions-compat","fire-fn-compat"),(0,le.Z)(Te,"@firebase/installations","fire-iid"),(0,le.Z)(Te,"@firebase/installations-compat","fire-iid-compat"),(0,le.Z)(Te,"@firebase/messaging","fire-fcm"),(0,le.Z)(Te,"@firebase/messaging-compat","fire-fcm-compat"),(0,le.Z)(Te,"@firebase/performance","fire-perf"),(0,le.Z)(Te,"@firebase/performance-compat","fire-perf-compat"),(0,le.Z)(Te,"@firebase/remote-config","fire-rc"),(0,le.Z)(Te,"@firebase/remote-config-compat","fire-rc-compat"),(0,le.Z)(Te,"@firebase/storage","fire-gcs"),(0,le.Z)(Te,"@firebase/storage-compat","fire-gcs-compat"),(0,le.Z)(Te,"@firebase/firestore","fire-fst"),(0,le.Z)(Te,"@firebase/firestore-compat","fire-fst-compat"),(0,le.Z)(Te,"fire-js","fire-js"),(0,le.Z)(Te,"firebase","fire-js-all"),Te),ft=new Map,Ft=new Map;function $t(un,Qt){try{un.container.addComponent(Qt)}catch(vn){ve.debug("Component ".concat(Qt.name," failed to register with FirebaseApp ").concat(un.name),vn)}}function Xt(un,Qt){un.container.addOrOverwriteComponent(Qt)}function qn(un){var Qt=un.name;if(Ft.has(Qt))return ve.debug("There were multiple attempts to register component ".concat(Qt,".")),!1;Ft.set(Qt,un);var zt,vn=(0,j.Z)(ft.values());try{for(vn.s();!(zt=vn.n()).done;)$t(zt.value,un)}catch(Mn){vn.e(Mn)}finally{vn.f()}return!0}function Rn(un,Qt){var vn=un.container.getProvider("heartbeat").getImmediate({optional:!0});return vn&&vn.triggerHeartbeat(),un.container.getProvider(Qt)}function Sn(un,Qt){var vn=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ot;Rn(un,Qt).clearInstance(vn)}function Yr(){Ft.clear()}var Ir=((0,le.Z)(et={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,le.Z)(et,"bad-app-name","Illegal App name: '{$appName}"),(0,le.Z)(et,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,le.Z)(et,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,le.Z)(et,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,le.Z)(et,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,le.Z)(et,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,le.Z)(et,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,le.Z)(et,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,le.Z)(et,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),et),yr=new Ee.LL("app","Firebase",Ir),yn=function(){function un(Qt,vn,zt){var qt=this;(0,M.Z)(this,un),this._isDeleted=!1,this._options=Object.assign({},Qt),this._config=Object.assign({},vn),this._name=vn.name,this._automaticDataCollectionEnabled=vn.automaticDataCollectionEnabled,this._container=zt,this.container.addComponent(new F.wA("app",function(){return qt},"PUBLIC"))}return(0,ce.Z)(un,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(vn){this.checkDestroyed(),this._automaticDataCollectionEnabled=vn}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(vn){this._isDeleted=vn}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}]),un}(),Yn="9.6.10";function Mr(un){var Qt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!=typeof Qt){var vn=Qt;Qt={name:vn}}var zt=Object.assign({name:ot,automaticDataCollectionEnabled:!1},Qt),qt=zt.name;if("string"!=typeof qt||!qt)throw yr.create("bad-app-name",{appName:String(qt)});var Mn=ft.get(qt);if(Mn){if((0,Ee.vZ)(un,Mn.options)&&(0,Ee.vZ)(zt,Mn.config))return Mn;throw yr.create("duplicate-app",{appName:qt})}var Xe,kr=new F.H0(qt),On=(0,j.Z)(Ft.values());try{for(On.s();!(Xe=On.n()).done;){var Ne=Xe.value;kr.addComponent(Ne)}}catch(lt){On.e(lt)}finally{On.f()}var Le=new yn(un,zt,kr);return ft.set(qt,Le),Le}function cr(){var un=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,Qt=ft.get(un);if(!Qt)throw yr.create("no-app",{appName:un});return Qt}function Lr(){return Array.from(ft.values())}function os(un){return jr.apply(this,arguments)}function jr(){return(jr=(0,H.Z)(x.mark(function un(Qt){var vn;return x.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:if(!ft.has(vn=Qt.name)){qt.next=6;break}return ft.delete(vn),qt.next=5,Promise.all(Qt.container.getProviders().map(function(Mn){return Mn.delete()}));case 5:Qt.isDeleted=!0;case 6:case"end":return qt.stop()}},un)}))).apply(this,arguments)}function Ki(un,Qt,vn){var zt,qt=null!==(zt=je[un])&&void 0!==zt?zt:un;vn&&(qt+="-".concat(vn));var Mn=qt.match(/\s|\//),kr=Qt.match(/\s|\//);if(Mn||kr){var On=['Unable to register library "'.concat(qt,'" with version "').concat(Qt,'":')];return Mn&&On.push('library name "'.concat(qt,'" contains illegal characters (whitespace or "/")')),Mn&&kr&&On.push("and"),kr&&On.push('version name "'.concat(Qt,'" contains illegal characters (whitespace or "/")')),void ve.warn(On.join(" "))}qn(new F.wA("".concat(qt,"-version"),function(){return{library:qt,version:Qt}},"VERSION"))}function Xr(un,Qt){if(null!==un&&"function"!=typeof un)throw yr.create("invalid-log-argument");(0,ke.Am)(un,Qt)}function ra(un){(0,ke.Ub)(un)}var tn="firebase-heartbeat-store",ia=null;function Qn(){return ia||(ia=(0,Ee.X3)("firebase-heartbeat-database",1,function(un,Qt){0===Qt&&un.createObjectStore(tn)}).catch(function(un){throw yr.create("storage-open",{originalErrorMessage:un.message})})),ia}function _n(un){return Un.apply(this,arguments)}function Un(){return(Un=(0,H.Z)(x.mark(function un(Qt){return x.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return qt.prev=0,qt.next=3,Qn();case 3:return qt.abrupt("return",qt.sent.transaction(tn).objectStore(tn).get(Dr(Qt)));case 7:throw qt.prev=7,qt.t0=qt.catch(0),yr.create("storage-get",{originalErrorMessage:qt.t0.message});case 10:case"end":return qt.stop()}},un,null,[[0,7]])}))).apply(this,arguments)}function ya(un,Qt){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,H.Z)(x.mark(function un(Qt,vn){var qt,Mn;return x.wrap(function(On){for(;;)switch(On.prev=On.next){case 0:return On.prev=0,On.next=3,Qn();case 3:return qt=On.sent.transaction(tn,"readwrite"),Mn=qt.objectStore(tn),On.next=8,Mn.put(vn,Dr(Qt));case 8:return On.abrupt("return",qt.complete);case 11:throw On.prev=11,On.t0=On.catch(0),yr.create("storage-set",{originalErrorMessage:On.t0.message});case 14:case"end":return On.stop()}},un,null,[[0,11]])}))).apply(this,arguments)}function Dr(un){return"".concat(un.name,"!").concat(un.options.appId)}var Pi=function(){function un(Qt){var vn=this;(0,M.Z)(this,un),this.container=Qt,this._heartbeatsCache=null;var zt=this.container.getProvider("app").getImmediate();this._storage=new Or(zt),this._heartbeatsCachePromise=this._storage.read().then(function(qt){return vn._heartbeatsCache=qt,qt})}return(0,ce.Z)(un,[{key:"triggerHeartbeat",value:(Qt=(0,H.Z)(x.mark(function zt(){var qt,Mn,kr;return x.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(qt=this.container.getProvider("platform-logger").getImmediate(),Mn=qt.getPlatformInfoString(),kr=Zr(),null!==this._heartbeatsCache){Xe.next=7;break}return Xe.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=Xe.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==kr&&!this._heartbeatsCache.heartbeats.some(function(Ne){return Ne.date===kr})){Xe.next=11;break}return Xe.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:kr,agent:Mn});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(function(Ne){var Le=new Date(Ne.date).valueOf();return Date.now()-Le<=2592e6}),Xe.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return Xe.stop()}},zt,this)})),function vn(){return Qt.apply(this,arguments)})},{key:"getHeartbeatsHeader",value:function(){var Qt=(0,H.Z)(x.mark(function zt(){var qt,Mn,On,Xe;return x.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(null!==this._heartbeatsCache){Le.next=3;break}return Le.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){Le.next=5;break}return Le.abrupt("return","");case 5:if(qt=Zr(),Mn=Fi(this._heartbeatsCache.heartbeats),On=Mn.unsentEntries,Xe=(0,Ee.L)(JSON.stringify({version:2,heartbeats:Mn.heartbeatsToSend})),this._heartbeatsCache.lastSentHeartbeatDate=qt,!(On.length>0)){Le.next=15;break}return this._heartbeatsCache.heartbeats=On,Le.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:Le.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return Le.abrupt("return",Xe);case 18:case"end":return Le.stop()}},zt,this)}));return function vn(){return Qt.apply(this,arguments)}}()}]),un;var Qt}();function Zr(){return(new Date).toISOString().substring(0,10)}function Fi(un){var Mn,Qt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,vn=[],zt=un.slice(),qt=(0,j.Z)(un);try{var kr=function(){var Ne=Mn.value,Le=vn.find(function(lt){return lt.agent===Ne.agent});if(Le){if(Le.dates.push(Ne.date),Ur(vn)>Qt)return Le.dates.pop(),"break"}else if(vn.push({agent:Ne.agent,dates:[Ne.date]}),Ur(vn)>Qt)return vn.pop(),"break";zt=zt.slice(1)};for(qt.s();!(Mn=qt.n()).done;){var On=kr();if("break"===On)break}}catch(Xe){qt.e(Xe)}finally{qt.f()}return{heartbeatsToSend:vn,unsentEntries:zt}}var Or=function(){function un(Qt){(0,M.Z)(this,un),this.app=Qt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,ce.Z)(un,[{key:"runIndexedDBEnvironmentCheck",value:(Qt=(0,H.Z)(x.mark(function zt(){return x.wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:if((0,Ee.hl)()){Mn.next=4;break}return Mn.abrupt("return",!1);case 4:return Mn.abrupt("return",(0,Ee.eu)().then(function(){return!0}).catch(function(){return!1}));case 5:case"end":return Mn.stop()}},zt)})),function vn(){return Qt.apply(this,arguments)})},{key:"read",value:function(){var Qt=(0,H.Z)(x.mark(function zt(){return x.wrap(function(On){for(;;)switch(On.prev=On.next){case 0:return On.next=2,this._canUseIndexedDBPromise;case 2:if(On.sent){On.next=7;break}return On.abrupt("return",{heartbeats:[]});case 7:return On.next=9,_n(this.app);case 9:return On.abrupt("return",On.sent||{heartbeats:[]});case 11:case"end":return On.stop()}},zt,this)}));return function vn(){return Qt.apply(this,arguments)}}()},{key:"overwrite",value:function(){var Qt=(0,H.Z)(x.mark(function zt(qt){var Mn,On;return x.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this._canUseIndexedDBPromise;case 2:if(Ne.sent){Ne.next=7;break}return Ne.abrupt("return");case 7:return Ne.next=9,this.read();case 9:return On=Ne.sent,Ne.abrupt("return",ya(this.app,{lastSentHeartbeatDate:null!==(Mn=qt.lastSentHeartbeatDate)&&void 0!==Mn?Mn:On.lastSentHeartbeatDate,heartbeats:qt.heartbeats}));case 11:case"end":return Ne.stop()}},zt,this)}));return function vn(zt){return Qt.apply(this,arguments)}}()},{key:"add",value:function(){var Qt=(0,H.Z)(x.mark(function zt(qt){var Mn,On;return x.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this._canUseIndexedDBPromise;case 2:if(Ne.sent){Ne.next=7;break}return Ne.abrupt("return");case 7:return Ne.next=9,this.read();case 9:return On=Ne.sent,Ne.abrupt("return",ya(this.app,{lastSentHeartbeatDate:null!==(Mn=qt.lastSentHeartbeatDate)&&void 0!==Mn?Mn:On.lastSentHeartbeatDate,heartbeats:[].concat((0,z.Z)(On.heartbeats),(0,z.Z)(qt.heartbeats))}));case 11:case"end":return Ne.stop()}},zt,this)}));return function vn(zt){return Qt.apply(this,arguments)}}()}]),un;var Qt}();function Ur(un){return(0,Ee.L)(JSON.stringify({version:2,heartbeats:un})).length}!function dr(un){qn(new F.wA("platform-logger",function(Qt){return new Je(Qt)},"PRIVATE")),qn(new F.wA("heartbeat",function(Qt){return new Pi(Qt)},"PRIVATE")),Ki(Ve,"0.7.20",un),Ki(Ve,"0.7.20","esm2017"),Ki("fire-js","")}("")},34859:function(Wt,Qe,O){"use strict";O.d(Qe,{wA:function(){return ke},H0:function(){return rt}});var z=O(74902),H=O(15861),j=O(97685),le=O(37762),M=O(15671),ce=O(43144),x=O(87757),F=O(42090),ke=function(){function Ve(fe,ve,qe){(0,M.Z)(this,Ve),this.name=fe,this.instanceFactory=ve,this.type=qe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,ce.Z)(Ve,[{key:"setInstantiationMode",value:function(ve){return this.instantiationMode=ve,this}},{key:"setMultipleInstances",value:function(ve){return this.multipleInstances=ve,this}},{key:"setServiceProps",value:function(ve){return this.serviceProps=ve,this}},{key:"setInstanceCreatedCallback",value:function(ve){return this.onInstanceCreated=ve,this}}]),Ve}(),Ee="[DEFAULT]",Te=function(){function Ve(fe,ve){(0,M.Z)(this,Ve),this.name=fe,this.container=ve,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,ce.Z)(Ve,[{key:"get",value:function(ve){var qe=this.normalizeInstanceIdentifier(ve);if(!this.instancesDeferred.has(qe)){var wt=new F.BH;if(this.instancesDeferred.set(qe,wt),this.isInitialized(qe)||this.shouldAutoInitialize())try{var ht=this.getOrInitializeService({instanceIdentifier:qe});ht&&wt.resolve(ht)}catch(it){}}return this.instancesDeferred.get(qe).promise}},{key:"getImmediate",value:function(ve){var qe,wt=this.normalizeInstanceIdentifier(null==ve?void 0:ve.identifier),ht=null!==(qe=null==ve?void 0:ve.optional)&&void 0!==qe&&qe;if(!this.isInitialized(wt)&&!this.shouldAutoInitialize()){if(ht)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:wt})}catch(it){if(ht)return null;throw it}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(ve){if(ve.name!==this.name)throw Error("Mismatching Component ".concat(ve.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=ve,this.shouldAutoInitialize()){if(function Je(Ve){return"EAGER"===Ve.instantiationMode}(ve))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch(kt){}var wt,qe=(0,le.Z)(this.instancesDeferred.entries());try{for(qe.s();!(wt=qe.n()).done;){var ht=(0,j.Z)(wt.value,2),Me=ht[1],ct=this.normalizeInstanceIdentifier(ht[0]);try{var gt=this.getOrInitializeService({instanceIdentifier:ct});Me.resolve(gt)}catch(kt){}}}catch(kt){qe.e(kt)}finally{qe.f()}}}},{key:"clearInstance",value:function(){var ve=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;this.instancesDeferred.delete(ve),this.instancesOptions.delete(ve),this.instances.delete(ve)}},{key:"delete",value:(fe=(0,H.Z)(x.mark(function qe(){var wt;return x.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return wt=Array.from(this.instances.values()),it.next=3,Promise.all([].concat((0,z.Z)(wt.filter(function(Me){return"INTERNAL"in Me}).map(function(Me){return Me.INTERNAL.delete()})),(0,z.Z)(wt.filter(function(Me){return"_delete"in Me}).map(function(Me){return Me._delete()}))));case 3:case"end":return it.stop()}},qe,this)})),function ve(){return fe.apply(this,arguments)})},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var ve=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;return this.instances.has(ve)}},{key:"getOptions",value:function(){var ve=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;return this.instancesOptions.get(ve)||{}}},{key:"initialize",value:function(){var ve=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},qe=ve.options,wt=void 0===qe?{}:qe,ht=this.normalizeInstanceIdentifier(ve.instanceIdentifier);if(this.isInitialized(ht))throw Error("".concat(this.name,"(").concat(ht,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var ct,it=this.getOrInitializeService({instanceIdentifier:ht,options:wt}),Me=(0,le.Z)(this.instancesDeferred.entries());try{for(Me.s();!(ct=Me.n()).done;){var gt=(0,j.Z)(ct.value,2),kt=gt[0],dt=gt[1],$e=this.normalizeInstanceIdentifier(kt);ht===$e&&dt.resolve(it)}}catch(Fe){Me.e(Fe)}finally{Me.f()}return it}},{key:"onInit",value:function(ve,qe){var wt,ht=this.normalizeInstanceIdentifier(qe),it=null!==(wt=this.onInitCallbacks.get(ht))&&void 0!==wt?wt:new Set;it.add(ve),this.onInitCallbacks.set(ht,it);var Me=this.instances.get(ht);return Me&&ve(Me,ht),function(){it.delete(ve)}}},{key:"invokeOnInitCallbacks",value:function(ve,qe){var wt=this.onInitCallbacks.get(qe);if(wt){var it,ht=(0,le.Z)(wt);try{for(ht.s();!(it=ht.n()).done;){var Me=it.value;try{Me(ve,qe)}catch(ct){}}}catch(ct){ht.e(ct)}finally{ht.f()}}}},{key:"getOrInitializeService",value:function(ve){var qe=ve.instanceIdentifier,wt=ve.options,ht=void 0===wt?{}:wt,it=this.instances.get(qe);if(!it&&this.component&&(it=this.component.instanceFactory(this.container,{instanceIdentifier:et(qe),options:ht}),this.instances.set(qe,it),this.instancesOptions.set(qe,ht),this.invokeOnInitCallbacks(it,qe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,qe,it)}catch(Me){}return it||null}},{key:"normalizeInstanceIdentifier",value:function(){var ve=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;return this.component?this.component.multipleInstances?ve:Ee:ve}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),Ve;var fe}();function et(Ve){return Ve===Ee?void 0:Ve}var rt=function(){function Ve(fe){(0,M.Z)(this,Ve),this.name=fe,this.providers=new Map}return(0,ce.Z)(Ve,[{key:"addComponent",value:function(ve){var qe=this.getProvider(ve.name);if(qe.isComponentSet())throw new Error("Component ".concat(ve.name," has already been registered with ").concat(this.name));qe.setComponent(ve)}},{key:"addOrOverwriteComponent",value:function(ve){this.getProvider(ve.name).isComponentSet()&&this.providers.delete(ve.name),this.addComponent(ve)}},{key:"getProvider",value:function(ve){if(this.providers.has(ve))return this.providers.get(ve);var qe=new Te(ve,this);return this.providers.set(ve,qe),qe}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),Ve}()},41877:function(Wt,Qe,O){"use strict";O.d(Qe,{in:function(){return x},Yd:function(){return et},Ub:function(){return Je},Am:function(){return rt}});var M,z=O(37762),H=O(15671),j=O(43144),le=O(4942),ce=[],x=function(){return(Ve=x||(x={}))[Ve.DEBUG=0]="DEBUG",Ve[Ve.VERBOSE=1]="VERBOSE",Ve[Ve.INFO=2]="INFO",Ve[Ve.WARN=3]="WARN",Ve[Ve.ERROR=4]="ERROR",Ve[Ve.SILENT=5]="SILENT",x;var Ve}(),F={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},ke=x.INFO,Ee=((0,le.Z)(M={},x.DEBUG,"log"),(0,le.Z)(M,x.VERBOSE,"log"),(0,le.Z)(M,x.INFO,"info"),(0,le.Z)(M,x.WARN,"warn"),(0,le.Z)(M,x.ERROR,"error"),M),Te=function(fe,ve){if(!(ve<fe.logLevel)){var qe=(new Date).toISOString(),wt=Ee[ve];if(!wt)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(ve,")"));for(var ht,it=arguments.length,Me=new Array(it>2?it-2:0),ct=2;ct<it;ct++)Me[ct-2]=arguments[ct];(ht=console)[wt].apply(ht,["[".concat(qe,"]  ").concat(fe.name,":")].concat(Me))}},et=function(){function Ve(fe){(0,H.Z)(this,Ve),this.name=fe,this._logLevel=ke,this._logHandler=Te,this._userLogHandler=null,ce.push(this)}return(0,j.Z)(Ve,[{key:"logLevel",get:function(){return this._logLevel},set:function(ve){if(!(ve in x))throw new TypeError('Invalid value "'.concat(ve,'" assigned to `logLevel`'));this._logLevel=ve}},{key:"setLogLevel",value:function(ve){this._logLevel="string"==typeof ve?F[ve]:ve}},{key:"logHandler",get:function(){return this._logHandler},set:function(ve){if("function"!=typeof ve)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ve}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(ve){this._userLogHandler=ve}},{key:"debug",value:function(){for(var ve=arguments.length,qe=new Array(ve),wt=0;wt<ve;wt++)qe[wt]=arguments[wt];this._userLogHandler&&this._userLogHandler.apply(this,[this,x.DEBUG].concat(qe)),this._logHandler.apply(this,[this,x.DEBUG].concat(qe))}},{key:"log",value:function(){for(var ve=arguments.length,qe=new Array(ve),wt=0;wt<ve;wt++)qe[wt]=arguments[wt];this._userLogHandler&&this._userLogHandler.apply(this,[this,x.VERBOSE].concat(qe)),this._logHandler.apply(this,[this,x.VERBOSE].concat(qe))}},{key:"info",value:function(){for(var ve=arguments.length,qe=new Array(ve),wt=0;wt<ve;wt++)qe[wt]=arguments[wt];this._userLogHandler&&this._userLogHandler.apply(this,[this,x.INFO].concat(qe)),this._logHandler.apply(this,[this,x.INFO].concat(qe))}},{key:"warn",value:function(){for(var ve=arguments.length,qe=new Array(ve),wt=0;wt<ve;wt++)qe[wt]=arguments[wt];this._userLogHandler&&this._userLogHandler.apply(this,[this,x.WARN].concat(qe)),this._logHandler.apply(this,[this,x.WARN].concat(qe))}},{key:"error",value:function(){for(var ve=arguments.length,qe=new Array(ve),wt=0;wt<ve;wt++)qe[wt]=arguments[wt];this._userLogHandler&&this._userLogHandler.apply(this,[this,x.ERROR].concat(qe)),this._logHandler.apply(this,[this,x.ERROR].concat(qe))}}]),Ve}();function Je(Ve){ce.forEach(function(fe){fe.setLogLevel(Ve)})}function rt(Ve,fe){var qe,ve=(0,z.Z)(ce);try{var wt=function(){var Me=null;fe&&fe.level&&(Me=F[fe.level]),qe.value.userLogHandler=null===Ve?null:function(ct,gt){for(var kt=arguments.length,dt=new Array(kt>2?kt-2:0),$e=2;$e<kt;$e++)dt[$e-2]=arguments[$e];var Fe=dt.map(function(Pe){if(null==Pe)return null;if("string"==typeof Pe)return Pe;if("number"==typeof Pe||"boolean"==typeof Pe)return Pe.toString();if(Pe instanceof Error)return Pe.message;try{return JSON.stringify(Pe)}catch(Ce){return null}}).filter(function(Pe){return Pe}).join(" ");gt>=(null!=Me?Me:ct.logLevel)&&Ve({level:x[gt].toLowerCase(),message:Fe,args:dt,type:ct.name})}};for(ve.s();!(qe=ve.n()).done;)wt()}catch(ht){ve.e(ht)}finally{ve.f()}}},18995:function(Wt,Qe,O){"use strict";O.d(Qe,{Zw:function(){return ht},aw:function(){return on},X$:function(){return kn},sK:function(){return Tt}});var z=O(37762),H=O(4942),j=O(60136),le=O(57777),M=O(43144),ce=O(15671),x=O(5e3),F=O(69751),ke=O(30576);function Ee(Ze){return!!Ze&&(Ze instanceof F.y||(0,ke.m)(Ze.lift)&&(0,ke.m)(Ze.subscribe))}var Te=O(39646),et=O(4128),Je=O(97272),rt=O(49770),Ve=O(95698),fe=O(23151),ve=O(54004),qe=O(24351),wt=O(63900),ht=(0,M.Z)(function Ze(){(0,ce.Z)(this,Ze)}),it=function(){var Ze=function(Kt){(0,j.Z)(je,Kt);var ot=(0,le.Z)(je);function je(){return(0,ce.Z)(this,je),ot.apply(this,arguments)}return(0,M.Z)(je,[{key:"getTranslation",value:function(Ft){return(0,Te.of)({})}}]),je}(ht);return Ze.\u0275fac=function(){var Kt;return function(je){return(Kt||(Kt=x.n5z(Ze)))(je||Ze)}}(),Ze.\u0275prov=x.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze}(),Me=(0,M.Z)(function Ze(){(0,ce.Z)(this,Ze)}),ct=function(){var Ze=function(){function Kt(){(0,ce.Z)(this,Kt)}return(0,M.Z)(Kt,[{key:"handle",value:function(je){return je.key}}]),Kt}();return Ze.\u0275fac=function(ot){return new(ot||Ze)},Ze.\u0275prov=x.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze}();function gt(Ze,Kt){if(Ze===Kt)return!0;if(null===Ze||null===Kt)return!1;if(Ze!=Ze&&Kt!=Kt)return!0;var ft,Ft,$t,ot=typeof Ze;if(ot==typeof Kt&&"object"==ot){if(!Array.isArray(Ze)){if(Array.isArray(Kt))return!1;for(Ft in $t=Object.create(null),Ze){if(!gt(Ze[Ft],Kt[Ft]))return!1;$t[Ft]=!0}for(Ft in Kt)if(!(Ft in $t)&&void 0!==Kt[Ft])return!1;return!0}if(!Array.isArray(Kt))return!1;if((ft=Ze.length)==Kt.length){for(Ft=0;Ft<ft;Ft++)if(!gt(Ze[Ft],Kt[Ft]))return!1;return!0}}return!1}function kt(Ze){return null!=Ze}function dt(Ze){return Ze&&"object"==typeof Ze&&!Array.isArray(Ze)}function $e(Ze,Kt){var ot=Object.assign({},Ze);return dt(Ze)&&dt(Kt)&&Object.keys(Kt).forEach(function(je){dt(Kt[je])&&je in Ze?ot[je]=$e(Ze[je],Kt[je]):Object.assign(ot,(0,H.Z)({},je,Kt[je]))}),ot}var Fe=(0,M.Z)(function Ze(){(0,ce.Z)(this,Ze)}),Pe=function(){var Ze=function(Kt){(0,j.Z)(je,Kt);var ot=(0,le.Z)(je);function je(){var ft;return(0,ce.Z)(this,je),(ft=ot.apply(this,arguments)).templateMatcher=/{{\s?([^{}\s]*)\s?}}/g,ft}return(0,M.Z)(je,[{key:"interpolate",value:function(Ft,$t){return"string"==typeof Ft?this.interpolateString(Ft,$t):"function"==typeof Ft?this.interpolateFunction(Ft,$t):Ft}},{key:"getValue",value:function(Ft,$t){var Xt="string"==typeof $t?$t.split("."):[$t];$t="";do{$t+=Xt.shift(),!kt(Ft)||!kt(Ft[$t])||"object"!=typeof Ft[$t]&&Xt.length?Xt.length?$t+=".":Ft=void 0:(Ft=Ft[$t],$t="")}while(Xt.length);return Ft}},{key:"interpolateFunction",value:function(Ft,$t){return Ft($t)}},{key:"interpolateString",value:function(Ft,$t){var Xt=this;return $t?Ft.replace(this.templateMatcher,function(qn,Rn){var Sn=Xt.getValue($t,Rn);return kt(Sn)?Sn:qn}):Ft}}]),je}(Fe);return Ze.\u0275fac=function(){var Kt;return function(je){return(Kt||(Kt=x.n5z(Ze)))(je||Ze)}}(),Ze.\u0275prov=x.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze}(),Ce=(0,M.Z)(function Ze(){(0,ce.Z)(this,Ze)}),at=function(){var Ze=function(Kt){(0,j.Z)(je,Kt);var ot=(0,le.Z)(je);function je(){return(0,ce.Z)(this,je),ot.apply(this,arguments)}return(0,M.Z)(je,[{key:"compile",value:function(Ft,$t){return Ft}},{key:"compileTranslations",value:function(Ft,$t){return Ft}}]),je}(Ce);return Ze.\u0275fac=function(){var Kt;return function(je){return(Kt||(Kt=x.n5z(Ze)))(je||Ze)}}(),Ze.\u0275prov=x.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze}(),be=(0,M.Z)(function Ze(){(0,ce.Z)(this,Ze),this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new x.vpe,this.onLangChange=new x.vpe,this.onDefaultLangChange=new x.vpe}),Ge=new x.OlP("USE_STORE"),Se=new x.OlP("USE_DEFAULT_LANG"),Mt=new x.OlP("DEFAULT_LANGUAGE"),te=new x.OlP("USE_EXTEND"),Tt=function(){var Ze=function(){function Kt(ot,je,ft,Ft,$t){var Xt=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],qn=arguments.length>6&&void 0!==arguments[6]&&arguments[6],Rn=arguments.length>7&&void 0!==arguments[7]&&arguments[7],Sn=arguments.length>8?arguments[8]:void 0;(0,ce.Z)(this,Kt),this.store=ot,this.currentLoader=je,this.compiler=ft,this.parser=Ft,this.missingTranslationHandler=$t,this.useDefaultLang=Xt,this.isolate=qn,this.extend=Rn,this.pending=!1,this._onTranslationChange=new x.vpe,this._onLangChange=new x.vpe,this._onDefaultLangChange=new x.vpe,this._langs=[],this._translations={},this._translationRequests={},Sn&&this.setDefaultLang(Sn)}return(0,M.Z)(Kt,[{key:"onTranslationChange",get:function(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}},{key:"onLangChange",get:function(){return this.isolate?this._onLangChange:this.store.onLangChange}},{key:"onDefaultLangChange",get:function(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}},{key:"defaultLang",get:function(){return this.isolate?this._defaultLang:this.store.defaultLang},set:function(je){this.isolate?this._defaultLang=je:this.store.defaultLang=je}},{key:"currentLang",get:function(){return this.isolate?this._currentLang:this.store.currentLang},set:function(je){this.isolate?this._currentLang=je:this.store.currentLang=je}},{key:"langs",get:function(){return this.isolate?this._langs:this.store.langs},set:function(je){this.isolate?this._langs=je:this.store.langs=je}},{key:"translations",get:function(){return this.isolate?this._translations:this.store.translations},set:function(je){this.isolate?this._translations=je:this.store.translations=je}},{key:"setDefaultLang",value:function(je){var ft=this;if(je!==this.defaultLang){var Ft=this.retrieveTranslations(je);void 0!==Ft?(null==this.defaultLang&&(this.defaultLang=je),Ft.pipe((0,Ve.q)(1)).subscribe(function($t){ft.changeDefaultLang(je)})):this.changeDefaultLang(je)}}},{key:"getDefaultLang",value:function(){return this.defaultLang}},{key:"use",value:function(je){var ft=this;if(je===this.currentLang)return(0,Te.of)(this.translations[je]);var Ft=this.retrieveTranslations(je);return void 0!==Ft?(this.currentLang||(this.currentLang=je),Ft.pipe((0,Ve.q)(1)).subscribe(function($t){ft.changeLang(je)}),Ft):(this.changeLang(je),(0,Te.of)(this.translations[je]))}},{key:"retrieveTranslations",value:function(je){var ft;return(void 0===this.translations[je]||this.extend)&&(this._translationRequests[je]=this._translationRequests[je]||this.getTranslation(je),ft=this._translationRequests[je]),ft}},{key:"getTranslation",value:function(je){var ft=this;this.pending=!0;var Ft=this.currentLoader.getTranslation(je).pipe((0,fe.d)(1),(0,Ve.q)(1));return this.loadingTranslations=Ft.pipe((0,ve.U)(function($t){return ft.compiler.compileTranslations($t,je)}),(0,fe.d)(1),(0,Ve.q)(1)),this.loadingTranslations.subscribe({next:function(Xt){ft.translations[je]=ft.extend&&ft.translations[je]?Object.assign(Object.assign({},Xt),ft.translations[je]):Xt,ft.updateLangs(),ft.pending=!1},error:function(Xt){ft.pending=!1}}),Ft}},{key:"setTranslation",value:function(je,ft){var Ft=arguments.length>2&&void 0!==arguments[2]&&arguments[2];ft=this.compiler.compileTranslations(ft,je),this.translations[je]=(Ft||this.extend)&&this.translations[je]?$e(this.translations[je],ft):ft,this.updateLangs(),this.onTranslationChange.emit({lang:je,translations:this.translations[je]})}},{key:"getLangs",value:function(){return this.langs}},{key:"addLangs",value:function(je){var ft=this;je.forEach(function(Ft){-1===ft.langs.indexOf(Ft)&&ft.langs.push(Ft)})}},{key:"updateLangs",value:function(){this.addLangs(Object.keys(this.translations))}},{key:"getParsedResult",value:function(je,ft,Ft){var $t;if(ft instanceof Array){var Sn,Xt={},qn=!1,Rn=(0,z.Z)(ft);try{for(Rn.s();!(Sn=Rn.n()).done;){var Yr=Sn.value;Xt[Yr]=this.getParsedResult(je,Yr,Ft),Ee(Xt[Yr])&&(qn=!0)}}catch(yn){Rn.e(yn)}finally{Rn.f()}if(qn){var Ir=ft.map(function(yn){return Ee(Xt[yn])?Xt[yn]:(0,Te.of)(Xt[yn])});return(0,et.D)(Ir).pipe((0,ve.U)(function(yn){var Yn={};return yn.forEach(function(Mr,cr){Yn[ft[cr]]=Mr}),Yn}))}return Xt}if(je&&($t=this.parser.interpolate(this.parser.getValue(je,ft),Ft)),void 0===$t&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&($t=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],ft),Ft)),void 0===$t){var yr={key:ft,translateService:this};void 0!==Ft&&(yr.interpolateParams=Ft),$t=this.missingTranslationHandler.handle(yr)}return void 0!==$t?$t:ft}},{key:"get",value:function(je,ft){var Ft=this;if(!kt(je)||!je.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,qe.b)(function(Xt){return Ee(Xt=Ft.getParsedResult(Xt,je,ft))?Xt:(0,Te.of)(Xt)}));var $t=this.getParsedResult(this.translations[this.currentLang],je,ft);return Ee($t)?$t:(0,Te.of)($t)}},{key:"getStreamOnTranslationChange",value:function(je,ft){var Ft=this;if(!kt(je)||!je.length)throw new Error('Parameter "key" required');return(0,Je.z)((0,rt.P)(function(){return Ft.get(je,ft)}),this.onTranslationChange.pipe((0,wt.w)(function($t){var Xt=Ft.getParsedResult($t.translations,je,ft);return"function"==typeof Xt.subscribe?Xt:(0,Te.of)(Xt)})))}},{key:"stream",value:function(je,ft){var Ft=this;if(!kt(je)||!je.length)throw new Error('Parameter "key" required');return(0,Je.z)((0,rt.P)(function(){return Ft.get(je,ft)}),this.onLangChange.pipe((0,wt.w)(function($t){var Xt=Ft.getParsedResult($t.translations,je,ft);return Ee(Xt)?Xt:(0,Te.of)(Xt)})))}},{key:"instant",value:function(je,ft){if(!kt(je)||!je.length)throw new Error('Parameter "key" required');var Ft=this.getParsedResult(this.translations[this.currentLang],je,ft);if(Ee(Ft)){if(je instanceof Array){var $t={};return je.forEach(function(Xt,qn){$t[je[qn]]=je[qn]}),$t}return je}return Ft}},{key:"set",value:function(je,ft){var Ft=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.currentLang;this.translations[Ft][je]=this.compiler.compile(ft,Ft),this.updateLangs(),this.onTranslationChange.emit({lang:Ft,translations:this.translations[Ft]})}},{key:"changeLang",value:function(je){this.currentLang=je,this.onLangChange.emit({lang:je,translations:this.translations[je]}),null==this.defaultLang&&this.changeDefaultLang(je)}},{key:"changeDefaultLang",value:function(je){this.defaultLang=je,this.onDefaultLangChange.emit({lang:je,translations:this.translations[je]})}},{key:"reloadLang",value:function(je){return this.resetLang(je),this.getTranslation(je)}},{key:"resetLang",value:function(je){this._translationRequests[je]=void 0,this.translations[je]=void 0}},{key:"getBrowserLang",value:function(){if("undefined"!=typeof window&&void 0!==window.navigator){var je=window.navigator.languages?window.navigator.languages[0]:null;if(void 0!==(je=je||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage))return-1!==je.indexOf("-")&&(je=je.split("-")[0]),-1!==je.indexOf("_")&&(je=je.split("_")[0]),je}}},{key:"getBrowserCultureLang",value:function(){if("undefined"!=typeof window&&void 0!==window.navigator){var je=window.navigator.languages?window.navigator.languages[0]:null;return je||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}}}]),Kt}();return Ze.\u0275fac=function(ot){return new(ot||Ze)(x.LFG(be),x.LFG(ht),x.LFG(Ce),x.LFG(Fe),x.LFG(Me),x.LFG(Se),x.LFG(Ge),x.LFG(te),x.LFG(Mt))},Ze.\u0275prov=x.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze}(),kn=function(){var Ze=function(){function Kt(ot,je){(0,ce.Z)(this,Kt),this.translate=ot,this._ref=je,this.value="",this.lastKey=null,this.lastParams=[]}return(0,M.Z)(Kt,[{key:"updateValue",value:function(je,ft,Ft){var $t=this,Xt=function(Sn){$t.value=void 0!==Sn?Sn:je,$t.lastKey=je,$t._ref.markForCheck()};if(Ft){var qn=this.translate.getParsedResult(Ft,je,ft);Ee(qn.subscribe)?qn.subscribe(Xt):Xt(qn)}this.translate.get(je,ft).subscribe(Xt)}},{key:"transform",value:function(je){var ft=this;if(!je||!je.length)return je;for(var Ft=arguments.length,$t=new Array(Ft>1?Ft-1:0),Xt=1;Xt<Ft;Xt++)$t[Xt-1]=arguments[Xt];if(gt(je,this.lastKey)&&gt($t,this.lastParams))return this.value;var qn=void 0;if(kt($t[0])&&$t.length)if("string"==typeof $t[0]&&$t[0].length){var Rn=$t[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{qn=JSON.parse(Rn)}catch(Sn){throw new SyntaxError("Wrong parameter in TranslatePipe. Expected a valid Object, received: ".concat($t[0]))}}else"object"==typeof $t[0]&&!Array.isArray($t[0])&&(qn=$t[0]);return this.lastKey=je,this.lastParams=$t,this.updateValue(je,qn),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(function(Sn){ft.lastKey&&Sn.lang===ft.translate.currentLang&&(ft.lastKey=null,ft.updateValue(je,qn,Sn.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(function(Sn){ft.lastKey&&(ft.lastKey=null,ft.updateValue(je,qn,Sn.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(function(){ft.lastKey&&(ft.lastKey=null,ft.updateValue(je,qn))})),this.value}},{key:"_dispose",value:function(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}},{key:"ngOnDestroy",value:function(){this._dispose()}}]),Kt}();return Ze.\u0275fac=function(ot){return new(ot||Ze)(x.Y36(Tt,16),x.Y36(x.sBO,16))},Ze.\u0275pipe=x.Yjl({name:"translate",type:Ze,pure:!1}),Ze.\u0275prov=x.Yz7({token:Ze,factory:Ze.\u0275fac}),Ze}(),on=function(){var Ze=function(){function Kt(){(0,ce.Z)(this,Kt)}return(0,M.Z)(Kt,null,[{key:"forRoot",value:function(){var je=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:Kt,providers:[je.loader||{provide:ht,useClass:it},je.compiler||{provide:Ce,useClass:at},je.parser||{provide:Fe,useClass:Pe},je.missingTranslationHandler||{provide:Me,useClass:ct},be,{provide:Ge,useValue:je.isolate},{provide:Se,useValue:je.useDefaultLang},{provide:te,useValue:je.extend},{provide:Mt,useValue:je.defaultLanguage},Tt]}}},{key:"forChild",value:function(){var je=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:Kt,providers:[je.loader||{provide:ht,useClass:it},je.compiler||{provide:Ce,useClass:at},je.parser||{provide:Fe,useClass:Pe},je.missingTranslationHandler||{provide:Me,useClass:ct},{provide:Ge,useValue:je.isolate},{provide:Se,useValue:je.useDefaultLang},{provide:te,useValue:je.extend},{provide:Mt,useValue:je.defaultLanguage},Tt]}}}]),Kt}();return Ze.\u0275fac=function(ot){return new(ot||Ze)},Ze.\u0275mod=x.oAB({type:Ze}),Ze.\u0275inj=x.cJS({}),Ze}()},30907:function(Wt,Qe,O){"use strict";function z(H,j){(null==j||j>H.length)&&(j=H.length);for(var le=0,M=new Array(j);le<j;le++)M[le]=H[le];return M}O.d(Qe,{Z:function(){return z}})},83878:function(Wt,Qe,O){"use strict";function z(H){if(Array.isArray(H))return H}O.d(Qe,{Z:function(){return z}})},97326:function(Wt,Qe,O){"use strict";function z(H){if(void 0===H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}O.d(Qe,{Z:function(){return z}})},15861:function(Wt,Qe,O){"use strict";function z(j,le,M,ce,x,F,ke){try{var Ee=j[F](ke),Te=Ee.value}catch(et){return void M(et)}Ee.done?le(Te):Promise.resolve(Te).then(ce,x)}function H(j){return function(){var le=this,M=arguments;return new Promise(function(ce,x){var F=j.apply(le,M);function ke(Te){z(F,ce,x,ke,Ee,"next",Te)}function Ee(Te){z(F,ce,x,ke,Ee,"throw",Te)}ke(void 0)})}}O.d(Qe,{Z:function(){return H}})},15671:function(Wt,Qe,O){"use strict";function z(H,j){if(!(H instanceof j))throw new TypeError("Cannot call a class as a function")}O.d(Qe,{Z:function(){return z}})},5647:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return j}});var z=O(89611),H=O(78814);function j(le,M,ce){return(j=(0,H.Z)()?Reflect.construct:function(F,ke,Ee){var Te=[null];Te.push.apply(Te,ke);var Je=new(Function.bind.apply(F,Te));return Ee&&(0,z.Z)(Je,Ee.prototype),Je}).apply(null,arguments)}},43144:function(Wt,Qe,O){"use strict";function z(j,le){for(var M=0;M<le.length;M++){var ce=le[M];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(j,ce.key,ce)}}function H(j,le,M){return le&&z(j.prototype,le),M&&z(j,M),Object.defineProperty(j,"prototype",{writable:!1}),j}O.d(Qe,{Z:function(){return H}})},37762:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return H}});var z=O(40181);function H(j,le){var M="undefined"!=typeof Symbol&&j[Symbol.iterator]||j["@@iterator"];if(!M){if(Array.isArray(j)||(M=(0,z.Z)(j))||le&&j&&"number"==typeof j.length){M&&(j=M);var ce=0,x=function(){};return{s:x,n:function(){return ce>=j.length?{done:!0}:{done:!1,value:j[ce++]}},e:function(et){throw et},f:x}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ee,F=!0,ke=!1;return{s:function(){M=M.call(j)},n:function(){var et=M.next();return F=et.done,et},e:function(et){ke=!0,Ee=et},f:function(){try{!F&&null!=M.return&&M.return()}finally{if(ke)throw Ee}}}}},57777:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return ce}});var z=O(61120),H=O(78814);function j(x){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(x)}var le=O(97326);function M(x,F){if(F&&("object"===j(F)||"function"==typeof F))return F;if(void 0!==F)throw new TypeError("Derived constructors may only return object or undefined");return(0,le.Z)(x)}function ce(x){var F=(0,H.Z)();return function(){var Te,Ee=(0,z.Z)(x);if(F){var et=(0,z.Z)(this).constructor;Te=Reflect.construct(Ee,arguments,et)}else Te=Ee.apply(this,arguments);return M(this,Te)}}},4942:function(Wt,Qe,O){"use strict";function z(H,j,le){return j in H?Object.defineProperty(H,j,{value:le,enumerable:!0,configurable:!0,writable:!0}):H[j]=le,H}O.d(Qe,{Z:function(){return z}})},73237:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return j}});var z=O(61120);function H(le,M){for(;!Object.prototype.hasOwnProperty.call(le,M)&&null!==(le=(0,z.Z)(le)););return le}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(M,ce,x){var F=H(M,ce);if(F){var ke=Object.getOwnPropertyDescriptor(F,ce);return ke.get?ke.get.call(arguments.length<3?M:x):ke.value}},j.apply(this,arguments)}},61120:function(Wt,Qe,O){"use strict";function z(H){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(le){return le.__proto__||Object.getPrototypeOf(le)})(H)}O.d(Qe,{Z:function(){return z}})},60136:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return H}});var z=O(89611);function H(j,le){if("function"!=typeof le&&null!==le)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(le&&le.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),le&&(0,z.Z)(j,le)}},78814:function(Wt,Qe,O){"use strict";function z(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(H){return!1}}O.d(Qe,{Z:function(){return z}})},59199:function(Wt,Qe,O){"use strict";function z(H){if("undefined"!=typeof Symbol&&null!=H[Symbol.iterator]||null!=H["@@iterator"])return Array.from(H)}O.d(Qe,{Z:function(){return z}})},25267:function(Wt,Qe,O){"use strict";function z(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}O.d(Qe,{Z:function(){return z}})},89611:function(Wt,Qe,O){"use strict";function z(H,j){return(z=Object.setPrototypeOf||function(M,ce){return M.__proto__=ce,M})(H,j)}O.d(Qe,{Z:function(){return z}})},97685:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return M}});var z=O(83878),j=O(40181),le=O(25267);function M(ce,x){return(0,z.Z)(ce)||function H(ce,x){var F=null==ce?null:"undefined"!=typeof Symbol&&ce[Symbol.iterator]||ce["@@iterator"];if(null!=F){var et,Je,ke=[],Ee=!0,Te=!1;try{for(F=F.call(ce);!(Ee=(et=F.next()).done)&&(ke.push(et.value),!x||ke.length!==x);Ee=!0);}catch(rt){Te=!0,Je=rt}finally{try{!Ee&&null!=F.return&&F.return()}finally{if(Te)throw Je}}return ke}}(ce,x)||(0,j.Z)(ce,x)||(0,le.Z)()}},84506:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return M}});var z=O(83878),H=O(59199),j=O(40181),le=O(25267);function M(ce){return(0,z.Z)(ce)||(0,H.Z)(ce)||(0,j.Z)(ce)||(0,le.Z)()}},74902:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return ce}});var z=O(30907),j=O(59199),le=O(40181);function ce(x){return function H(x){if(Array.isArray(x))return(0,z.Z)(x)}(x)||(0,j.Z)(x)||(0,le.Z)(x)||function M(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},40181:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return H}});var z=O(30907);function H(j,le){if(j){if("string"==typeof j)return(0,z.Z)(j,le);var M=Object.prototype.toString.call(j).slice(8,-1);if("Object"===M&&j.constructor&&(M=j.constructor.name),"Map"===M||"Set"===M)return Array.from(j);if("Arguments"===M||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return(0,z.Z)(j,le)}}},35724:function(Wt,Qe,O){"use strict";O.d(Qe,{Z:function(){return M}});var z=O(61120),H=O(89611),le=O(5647);function M(ce){var x="function"==typeof Map?new Map:void 0;return M=function(ke){if(null===ke||!function j(ce){return-1!==Function.toString.call(ce).indexOf("[native code]")}(ke))return ke;if("function"!=typeof ke)throw new TypeError("Super expression must either be null or a function");if(void 0!==x){if(x.has(ke))return x.get(ke);x.set(ke,Ee)}function Ee(){return(0,le.Z)(ke,arguments,(0,z.Z)(this).constructor)}return Ee.prototype=Object.create(ke.prototype,{constructor:{value:Ee,enumerable:!1,writable:!0,configurable:!0}}),(0,H.Z)(Ee,ke)},M(ce)}}},function(Wt){Wt(Wt.s=25973)}]);